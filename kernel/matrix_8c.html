<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>linux/kernel: irq/matrix.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">linux/kernel
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('matrix_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">matrix.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;linux/spinlock.h&gt;</code><br />
<code>#include &lt;linux/seq_file.h&gt;</code><br />
<code>#include &lt;linux/bitmap.h&gt;</code><br />
<code>#include &lt;linux/percpu.h&gt;</code><br />
<code>#include &lt;linux/cpu.h&gt;</code><br />
<code>#include &lt;linux/irq.h&gt;</code><br />
<code>#include &lt;trace/events/irq_matrix.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for matrix.c:</div>
<div class="dyncontent">
<div class="center"><img src="matrix_8c__incl.png" border="0" usemap="#irq_2matrix_8c" alt=""/></div>
<map name="irq_2matrix_8c" id="irq_2matrix_8c">
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcpumap.html">cpumap</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structirq__matrix.html">irq_matrix</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ae29a832f6903bf6fdb7113bcddf270b2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="matrix_8c.html#ae29a832f6903bf6fdb7113bcddf270b2">IRQ_MATRIX_SIZE</a>&#160;&#160;&#160;(BITS_TO_LONGS(IRQ_MATRIX_BITS) * sizeof(unsigned long))</td></tr>
<tr class="separator:ae29a832f6903bf6fdb7113bcddf270b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40473b47b4871fa538a0fa131f94e774"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="matrix_8c.html#a40473b47b4871fa538a0fa131f94e774">CREATE_TRACE_POINTS</a></td></tr>
<tr class="separator:a40473b47b4871fa538a0fa131f94e774"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3a272e1e34f38530b60cbab023440818"><td class="memItemLeft" align="right" valign="top">__init struct <a class="el" href="structirq__matrix.html">irq_matrix</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="matrix_8c.html#a3a272e1e34f38530b60cbab023440818">irq_alloc_matrix</a> (unsigned int matrix_bits, unsigned int alloc_start, unsigned int alloc_end)</td></tr>
<tr class="separator:a3a272e1e34f38530b60cbab023440818"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30e041e075a6744d8c16245273db841c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="matrix_8c.html#a30e041e075a6744d8c16245273db841c">irq_matrix_online</a> (struct <a class="el" href="structirq__matrix.html">irq_matrix</a> *m)</td></tr>
<tr class="separator:a30e041e075a6744d8c16245273db841c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82bf9f0bcd7dd003134d5bf7e52cdc11"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="matrix_8c.html#a82bf9f0bcd7dd003134d5bf7e52cdc11">irq_matrix_offline</a> (struct <a class="el" href="structirq__matrix.html">irq_matrix</a> *m)</td></tr>
<tr class="separator:a82bf9f0bcd7dd003134d5bf7e52cdc11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a281141be185e66b60ae05683b3bb18cc"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="matrix_8c.html#a281141be185e66b60ae05683b3bb18cc">matrix_alloc_area</a> (struct <a class="el" href="structirq__matrix.html">irq_matrix</a> *m, struct <a class="el" href="structcpumap.html">cpumap</a> *cm, unsigned int num, bool managed)</td></tr>
<tr class="separator:a281141be185e66b60ae05683b3bb18cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae62c376fcc458f5b3ab97258ddc6676d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="matrix_8c.html#ae62c376fcc458f5b3ab97258ddc6676d">irq_matrix_assign_system</a> (struct <a class="el" href="structirq__matrix.html">irq_matrix</a> *m, unsigned int bit, bool replace)</td></tr>
<tr class="separator:ae62c376fcc458f5b3ab97258ddc6676d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbe39d8e6fa0669b7c605027b8682ece"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="matrix_8c.html#acbe39d8e6fa0669b7c605027b8682ece">irq_matrix_reserve_managed</a> (struct <a class="el" href="structirq__matrix.html">irq_matrix</a> *m, const struct cpumask *msk)</td></tr>
<tr class="separator:acbe39d8e6fa0669b7c605027b8682ece"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a862dadff4a79868bdb0599e3dc659d29"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="matrix_8c.html#a862dadff4a79868bdb0599e3dc659d29">irq_matrix_remove_managed</a> (struct <a class="el" href="structirq__matrix.html">irq_matrix</a> *m, const struct cpumask *msk)</td></tr>
<tr class="separator:a862dadff4a79868bdb0599e3dc659d29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e0c9ffa3cf4e936a787a2a437812bfa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="matrix_8c.html#a7e0c9ffa3cf4e936a787a2a437812bfa">irq_matrix_alloc_managed</a> (struct <a class="el" href="structirq__matrix.html">irq_matrix</a> *m, unsigned int cpu)</td></tr>
<tr class="separator:a7e0c9ffa3cf4e936a787a2a437812bfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98005314c3025d29c83a347d343e8eb5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="matrix_8c.html#a98005314c3025d29c83a347d343e8eb5">irq_matrix_assign</a> (struct <a class="el" href="structirq__matrix.html">irq_matrix</a> *m, unsigned int bit)</td></tr>
<tr class="separator:a98005314c3025d29c83a347d343e8eb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ac4f552b7db66db59a9253e8a198984"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="matrix_8c.html#a0ac4f552b7db66db59a9253e8a198984">irq_matrix_reserve</a> (struct <a class="el" href="structirq__matrix.html">irq_matrix</a> *m)</td></tr>
<tr class="separator:a0ac4f552b7db66db59a9253e8a198984"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab10dde1abc2b902993d30bad0e425f0d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="matrix_8c.html#ab10dde1abc2b902993d30bad0e425f0d">irq_matrix_remove_reserved</a> (struct <a class="el" href="structirq__matrix.html">irq_matrix</a> *m)</td></tr>
<tr class="separator:ab10dde1abc2b902993d30bad0e425f0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25db4d4e583f33c1e6237257a4980051"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="matrix_8c.html#a25db4d4e583f33c1e6237257a4980051">irq_matrix_alloc</a> (struct <a class="el" href="structirq__matrix.html">irq_matrix</a> *m, const struct cpumask *msk, bool reserved, unsigned int *mapped_cpu)</td></tr>
<tr class="separator:a25db4d4e583f33c1e6237257a4980051"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0affde5b4e60097ee0c421659114d803"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="matrix_8c.html#a0affde5b4e60097ee0c421659114d803">irq_matrix_free</a> (struct <a class="el" href="structirq__matrix.html">irq_matrix</a> *m, unsigned int cpu, unsigned int bit, bool managed)</td></tr>
<tr class="separator:a0affde5b4e60097ee0c421659114d803"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88b0532c2c1ee89563e5a34751951fa6"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="matrix_8c.html#a88b0532c2c1ee89563e5a34751951fa6">irq_matrix_available</a> (struct <a class="el" href="structirq__matrix.html">irq_matrix</a> *m, bool cpudown)</td></tr>
<tr class="separator:a88b0532c2c1ee89563e5a34751951fa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab025c417c12fe9b256ee8032585900f4"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="matrix_8c.html#ab025c417c12fe9b256ee8032585900f4">irq_matrix_reserved</a> (struct <a class="el" href="structirq__matrix.html">irq_matrix</a> *m)</td></tr>
<tr class="separator:ab025c417c12fe9b256ee8032585900f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a505184f25482453a65a8a9de3b610654"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="matrix_8c.html#a505184f25482453a65a8a9de3b610654">irq_matrix_allocated</a> (struct <a class="el" href="structirq__matrix.html">irq_matrix</a> *m)</td></tr>
<tr class="separator:a505184f25482453a65a8a9de3b610654"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a40473b47b4871fa538a0fa131f94e774"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40473b47b4871fa538a0fa131f94e774">&#9670;&nbsp;</a></span>CREATE_TRACE_POINTS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CREATE_TRACE_POINTS</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae29a832f6903bf6fdb7113bcddf270b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae29a832f6903bf6fdb7113bcddf270b2">&#9670;&nbsp;</a></span>IRQ_MATRIX_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRQ_MATRIX_SIZE&#160;&#160;&#160;(BITS_TO_LONGS(IRQ_MATRIX_BITS) * sizeof(unsigned long))</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a3a272e1e34f38530b60cbab023440818"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a272e1e34f38530b60cbab023440818">&#9670;&nbsp;</a></span>irq_alloc_matrix()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__init struct <a class="el" href="structirq__matrix.html">irq_matrix</a>* irq_alloc_matrix </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>matrix_bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>alloc_start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>alloc_end</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>irq_alloc_matrix - Allocate a <a class="el" href="structirq__matrix.html">irq_matrix</a> structure and initialize it : Number of matrix bits must be &lt;= IRQ_MATRIX_BITS : From which bit the allocation search starts : At which bit the allocation search ends, i.e first invalid bit </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="matrix_8c_a3a272e1e34f38530b60cbab023440818_cgraph.png" border="0" usemap="#matrix_8c_a3a272e1e34f38530b60cbab023440818_cgraph" alt=""/></div>
<map name="matrix_8c_a3a272e1e34f38530b60cbab023440818_cgraph" id="matrix_8c_a3a272e1e34f38530b60cbab023440818_cgraph">
<area shape="rect" id="node2" href="rcu_8h.html#ad92c2890c435f9cca9e36ff4f97feb5c" title="kfree" alt="" coords="167,5,217,32"/>
</map>
</div>

</div>
</div>
<a id="a25db4d4e583f33c1e6237257a4980051"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25db4d4e583f33c1e6237257a4980051">&#9670;&nbsp;</a></span>irq_matrix_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int irq_matrix_alloc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structirq__matrix.html">irq_matrix</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct cpumask *&#160;</td>
          <td class="paramname"><em>msk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>reserved</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>mapped_cpu</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>irq_matrix_alloc - Allocate a regular interrupt in a CPU map : Matrix pointer : Which CPUs to search in : Allocate previously reserved interrupts : Pointer to store the CPU for which the irq was allocated </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="matrix_8c_a25db4d4e583f33c1e6237257a4980051_cgraph.png" border="0" usemap="#matrix_8c_a25db4d4e583f33c1e6237257a4980051_cgraph" alt=""/></div>
<map name="matrix_8c_a25db4d4e583f33c1e6237257a4980051_cgraph" id="matrix_8c_a25db4d4e583f33c1e6237257a4980051_cgraph">
<area shape="rect" id="node2" href="matrix_8c.html#a281141be185e66b60ae05683b3bb18cc" title="matrix_alloc_area" alt="" coords="167,5,291,32"/>
</map>
</div>

</div>
</div>
<a id="a7e0c9ffa3cf4e936a787a2a437812bfa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e0c9ffa3cf4e936a787a2a437812bfa">&#9670;&nbsp;</a></span>irq_matrix_alloc_managed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int irq_matrix_alloc_managed </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structirq__matrix.html">irq_matrix</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>cpu</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>irq_matrix_alloc_managed - Allocate a managed interrupt in a CPU map : Matrix pointer : On which CPU the interrupt should be allocated </p>

</div>
</div>
<a id="a505184f25482453a65a8a9de3b610654"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a505184f25482453a65a8a9de3b610654">&#9670;&nbsp;</a></span>irq_matrix_allocated()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int irq_matrix_allocated </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structirq__matrix.html">irq_matrix</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>irq_matrix_allocated - Get the number of allocated irqs on the local cpu : Pointer to the matrix to search</p>
<p>This returns number of allocated irqs </p>

</div>
</div>
<a id="a98005314c3025d29c83a347d343e8eb5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98005314c3025d29c83a347d343e8eb5">&#9670;&nbsp;</a></span>irq_matrix_assign()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void irq_matrix_assign </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structirq__matrix.html">irq_matrix</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>bit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>irq_matrix_assign - Assign a preallocated interrupt in the local CPU map : Matrix pointer : Which bit to mark</p>
<p>This should only be used to mark preallocated vectors </p>

</div>
</div>
<a id="ae62c376fcc458f5b3ab97258ddc6676d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae62c376fcc458f5b3ab97258ddc6676d">&#9670;&nbsp;</a></span>irq_matrix_assign_system()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void irq_matrix_assign_system </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structirq__matrix.html">irq_matrix</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>bit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>replace</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>irq_matrix_assign_system - Assign system wide entry in the matrix : Matrix pointer : Which bit to reserve : Replace an already allocated vector with a system vector at the same bit position.</p>
<p>The BUG_ON()s below are on purpose. If this goes wrong in the early boot process, then the chance to survive is about zero. If this happens when the system is life, it's not much better. </p>

</div>
</div>
<a id="a88b0532c2c1ee89563e5a34751951fa6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b0532c2c1ee89563e5a34751951fa6">&#9670;&nbsp;</a></span>irq_matrix_available()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int irq_matrix_available </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structirq__matrix.html">irq_matrix</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>cpudown</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>irq_matrix_available - Get the number of globally available irqs : Pointer to the matrix to query : If true, the local CPU is about to go down, adjust the number of available irqs accordingly </p>

</div>
</div>
<a id="a0affde5b4e60097ee0c421659114d803"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0affde5b4e60097ee0c421659114d803">&#9670;&nbsp;</a></span>irq_matrix_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void irq_matrix_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structirq__matrix.html">irq_matrix</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>cpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>bit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>managed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>irq_matrix_free - Free allocated interrupt in the matrix : Matrix pointer : Which CPU map needs be updated : The bit to remove : If true, the interrupt is managed and not accounted as available. </p>

</div>
</div>
<a id="a82bf9f0bcd7dd003134d5bf7e52cdc11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82bf9f0bcd7dd003134d5bf7e52cdc11">&#9670;&nbsp;</a></span>irq_matrix_offline()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void irq_matrix_offline </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structirq__matrix.html">irq_matrix</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>irq_matrix_offline - Bring the local CPU matrix offline : Matrix pointer </p>

</div>
</div>
<a id="a30e041e075a6744d8c16245273db841c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30e041e075a6744d8c16245273db841c">&#9670;&nbsp;</a></span>irq_matrix_online()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void irq_matrix_online </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structirq__matrix.html">irq_matrix</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>irq_matrix_online - Bring the local CPU matrix online : Matrix pointer </p>

</div>
</div>
<a id="a862dadff4a79868bdb0599e3dc659d29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a862dadff4a79868bdb0599e3dc659d29">&#9670;&nbsp;</a></span>irq_matrix_remove_managed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void irq_matrix_remove_managed </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structirq__matrix.html">irq_matrix</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct cpumask *&#160;</td>
          <td class="paramname"><em>msk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>irq_matrix_remove_managed - Remove managed interrupts in a CPU map : Matrix pointer : On which CPUs the bits should be removed</p>
<p>Can be called for offline CPUs</p>
<p>This removes not allocated managed interrupts from the map. It does not matter which one because the managed interrupts free their allocation when they shut down. If not, the accounting is screwed, but all what can be done at this point is warn about it. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="matrix_8c_a862dadff4a79868bdb0599e3dc659d29_icgraph.png" border="0" usemap="#matrix_8c_a862dadff4a79868bdb0599e3dc659d29_icgraph" alt=""/></div>
<map name="matrix_8c_a862dadff4a79868bdb0599e3dc659d29_icgraph" id="matrix_8c_a862dadff4a79868bdb0599e3dc659d29_icgraph">
<area shape="rect" id="node2" href="matrix_8c.html#acbe39d8e6fa0669b7c605027b8682ece" title="irq_matrix_reserve\l_managed" alt="" coords="243,5,372,47"/>
</map>
</div>

</div>
</div>
<a id="ab10dde1abc2b902993d30bad0e425f0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab10dde1abc2b902993d30bad0e425f0d">&#9670;&nbsp;</a></span>irq_matrix_remove_reserved()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void irq_matrix_remove_reserved </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structirq__matrix.html">irq_matrix</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>irq_matrix_remove_reserved - Remove interrupt reservation : Matrix pointer</p>
<p>This is merily a book keeping call. It decrements the number of globally reserved interrupt bits. This is used to undo <a class="el" href="matrix_8c.html#a0ac4f552b7db66db59a9253e8a198984">irq_matrix_reserve()</a> when the interrupt was never in use and a real vector allocated, which undid the reservation. </p>

</div>
</div>
<a id="a0ac4f552b7db66db59a9253e8a198984"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ac4f552b7db66db59a9253e8a198984">&#9670;&nbsp;</a></span>irq_matrix_reserve()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void irq_matrix_reserve </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structirq__matrix.html">irq_matrix</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>irq_matrix_reserve - Reserve interrupts : Matrix pointer</p>
<p>This is merily a book keeping call. It increments the number of globally reserved interrupt bits w/o actually allocating them. This allows to setup interrupt descriptors w/o assigning low level resources to it. The actual allocation happens when the interrupt gets activated. </p>

</div>
</div>
<a id="acbe39d8e6fa0669b7c605027b8682ece"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbe39d8e6fa0669b7c605027b8682ece">&#9670;&nbsp;</a></span>irq_matrix_reserve_managed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int irq_matrix_reserve_managed </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structirq__matrix.html">irq_matrix</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct cpumask *&#160;</td>
          <td class="paramname"><em>msk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>irq_matrix_reserve_managed - Reserve a managed interrupt in a CPU map : Matrix pointer : On which CPUs the bits should be reserved.</p>
<p>Can be called for offline CPUs. Note, this will only reserve one bit on all CPUs in , but it's not guaranteed that the bits are at the same offset on all CPUs </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="matrix_8c_acbe39d8e6fa0669b7c605027b8682ece_cgraph.png" border="0" usemap="#matrix_8c_acbe39d8e6fa0669b7c605027b8682ece_cgraph" alt=""/></div>
<map name="matrix_8c_acbe39d8e6fa0669b7c605027b8682ece_cgraph" id="matrix_8c_acbe39d8e6fa0669b7c605027b8682ece_cgraph">
<area shape="rect" id="node2" href="matrix_8c.html#a281141be185e66b60ae05683b3bb18cc" title="matrix_alloc_area" alt="" coords="215,5,339,32"/>
<area shape="rect" id="node3" href="matrix_8c.html#a862dadff4a79868bdb0599e3dc659d29" title="irq_matrix_remove_managed" alt="" coords="183,56,372,83"/>
</map>
</div>

</div>
</div>
<a id="ab025c417c12fe9b256ee8032585900f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab025c417c12fe9b256ee8032585900f4">&#9670;&nbsp;</a></span>irq_matrix_reserved()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int irq_matrix_reserved </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structirq__matrix.html">irq_matrix</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>irq_matrix_reserved - Get the number of globally reserved irqs : Pointer to the matrix to query </p>

</div>
</div>
<a id="a281141be185e66b60ae05683b3bb18cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a281141be185e66b60ae05683b3bb18cc">&#9670;&nbsp;</a></span>matrix_alloc_area()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned int matrix_alloc_area </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structirq__matrix.html">irq_matrix</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcpumap.html">cpumap</a> *&#160;</td>
          <td class="paramname"><em>cm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>managed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="matrix_8c_a281141be185e66b60ae05683b3bb18cc_icgraph.png" border="0" usemap="#matrix_8c_a281141be185e66b60ae05683b3bb18cc_icgraph" alt=""/></div>
<map name="matrix_8c_a281141be185e66b60ae05683b3bb18cc_icgraph" id="matrix_8c_a281141be185e66b60ae05683b3bb18cc_icgraph">
<area shape="rect" id="node2" href="matrix_8c.html#acbe39d8e6fa0669b7c605027b8682ece" title="irq_matrix_reserve\l_managed" alt="" coords="177,5,307,47"/>
<area shape="rect" id="node3" href="matrix_8c.html#a25db4d4e583f33c1e6237257a4980051" title="irq_matrix_alloc" alt="" coords="185,71,299,98"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_2afccf18bcf8d7f040e2ec2def3a539b.html">irq</a></li><li class="navelem"><a class="el" href="matrix_8c.html">matrix.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>

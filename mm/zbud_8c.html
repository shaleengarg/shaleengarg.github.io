<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Linux MM: zbud.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Linux MM
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('zbud_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">zbud.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;linux/atomic.h&gt;</code><br />
<code>#include &lt;linux/list.h&gt;</code><br />
<code>#include &lt;linux/mm.h&gt;</code><br />
<code>#include &lt;linux/module.h&gt;</code><br />
<code>#include &lt;linux/preempt.h&gt;</code><br />
<code>#include &lt;linux/slab.h&gt;</code><br />
<code>#include &lt;linux/spinlock.h&gt;</code><br />
<code>#include &lt;linux/zbud.h&gt;</code><br />
<code>#include &lt;linux/zpool.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for zbud.c:</div>
<div class="dyncontent">
<div class="center"><img src="zbud_8c__incl.png" border="0" usemap="#zbud_8c" alt=""/></div>
<map name="zbud_8c" id="zbud_8c">
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structzbud__pool.html">zbud_pool</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structzbud__header.html">zbud_header</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a1f8c165bf4196327bc3abff648276d92"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zbud_8c.html#a1f8c165bf4196327bc3abff648276d92">pr_fmt</a>(fmt)&#160;&#160;&#160;KBUILD_MODNAME &quot;: &quot; fmt</td></tr>
<tr class="separator:a1f8c165bf4196327bc3abff648276d92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af62c2fafbfb558e965a06e3e80878cd5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zbud_8c.html#af62c2fafbfb558e965a06e3e80878cd5">NCHUNKS_ORDER</a>&#160;&#160;&#160;6</td></tr>
<tr class="separator:af62c2fafbfb558e965a06e3e80878cd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acda112e2dfd5df63a5b4fb4e31fdeedc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zbud_8c.html#acda112e2dfd5df63a5b4fb4e31fdeedc">CHUNK_SHIFT</a>&#160;&#160;&#160;(PAGE_SHIFT - <a class="el" href="zbud_8c.html#af62c2fafbfb558e965a06e3e80878cd5">NCHUNKS_ORDER</a>)</td></tr>
<tr class="separator:acda112e2dfd5df63a5b4fb4e31fdeedc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea3cfda4f3a9f978ec759f206cf186fe"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zbud_8c.html#aea3cfda4f3a9f978ec759f206cf186fe">CHUNK_SIZE</a>&#160;&#160;&#160;(1 &lt;&lt; <a class="el" href="zbud_8c.html#acda112e2dfd5df63a5b4fb4e31fdeedc">CHUNK_SHIFT</a>)</td></tr>
<tr class="separator:aea3cfda4f3a9f978ec759f206cf186fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa53138709654d3e395109c4478de381e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zbud_8c.html#aa53138709654d3e395109c4478de381e">ZHDR_SIZE_ALIGNED</a>&#160;&#160;&#160;<a class="el" href="zbud_8c.html#aea3cfda4f3a9f978ec759f206cf186fe">CHUNK_SIZE</a></td></tr>
<tr class="separator:aa53138709654d3e395109c4478de381e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f747b77d7e5100b43722cdba0611c22"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zbud_8c.html#a4f747b77d7e5100b43722cdba0611c22">NCHUNKS</a>&#160;&#160;&#160;((PAGE_SIZE - <a class="el" href="zbud_8c.html#aa53138709654d3e395109c4478de381e">ZHDR_SIZE_ALIGNED</a>) &gt;&gt; <a class="el" href="zbud_8c.html#acda112e2dfd5df63a5b4fb4e31fdeedc">CHUNK_SHIFT</a>)</td></tr>
<tr class="separator:a4f747b77d7e5100b43722cdba0611c22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ed45c8f72ac3cceaa7ed3bc8c0c7bc8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zbud_8c.html#a4ed45c8f72ac3cceaa7ed3bc8c0c7bc8">for_each_unbuddied_list</a>(_iter,  _begin)&#160;&#160;&#160;for ((_iter) = (_begin); (_iter) &lt; <a class="el" href="zbud_8c.html#a4f747b77d7e5100b43722cdba0611c22">NCHUNKS</a>; (_iter)++)</td></tr>
<tr class="separator:a4ed45c8f72ac3cceaa7ed3bc8c0c7bc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a64b3b880fcc1449518ff4c0e53c9d53b"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zbud_8c.html#a64b3b880fcc1449518ff4c0e53c9d53b">buddy</a> { <br />
&#160;&#160;<a class="el" href="z3fold_8c.html#a64b3b880fcc1449518ff4c0e53c9d53babbc8c795df97627cc722e37f0bd2e4ee">HEADLESS</a> = 0, 
<a class="el" href="z3fold_8c.html#a64b3b880fcc1449518ff4c0e53c9d53ba6a7856cca1833641e731676636b193f1">FIRST</a>, 
<a class="el" href="z3fold_8c.html#a64b3b880fcc1449518ff4c0e53c9d53ba1a2710fb8b50ea593b207d1e79fea574">MIDDLE</a>, 
<a class="el" href="z3fold_8c.html#a64b3b880fcc1449518ff4c0e53c9d53ba990cd45e93be2b4661f3499e0a658a33">LAST</a>, 
<br />
&#160;&#160;<a class="el" href="z3fold_8c.html#a64b3b880fcc1449518ff4c0e53c9d53ba4a31d445d8c87ac47ae3ad117016ceba">BUDDIES_MAX</a>, 
<a class="el" href="zbud_8c.html#a64b3b880fcc1449518ff4c0e53c9d53ba6a7856cca1833641e731676636b193f1">FIRST</a>, 
<a class="el" href="zbud_8c.html#a64b3b880fcc1449518ff4c0e53c9d53ba990cd45e93be2b4661f3499e0a658a33">LAST</a>
<br />
 }</td></tr>
<tr class="separator:a64b3b880fcc1449518ff4c0e53c9d53b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6ea9ceb4114613b24e23d22eedfa6285"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zbud_8c.html#a6ea9ceb4114613b24e23d22eedfa6285">size_to_chunks</a> (size_t size)</td></tr>
<tr class="separator:a6ea9ceb4114613b24e23d22eedfa6285"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad315f57d5f3f2edf748b369957b4b9a0"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structzbud__header.html">zbud_header</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zbud_8c.html#ad315f57d5f3f2edf748b369957b4b9a0">init_zbud_page</a> (struct page *page)</td></tr>
<tr class="separator:ad315f57d5f3f2edf748b369957b4b9a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a082b965a56fb1fbb7befce278b9515d3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zbud_8c.html#a082b965a56fb1fbb7befce278b9515d3">free_zbud_page</a> (struct <a class="el" href="structzbud__header.html">zbud_header</a> *zhdr)</td></tr>
<tr class="separator:a082b965a56fb1fbb7befce278b9515d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a622bad1e7737e602a3ec6593c8e7b33f"><td class="memItemLeft" align="right" valign="top">static unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zbud_8c.html#a622bad1e7737e602a3ec6593c8e7b33f">encode_handle</a> (struct <a class="el" href="structzbud__header.html">zbud_header</a> *zhdr, enum <a class="el" href="z3fold_8c.html#a64b3b880fcc1449518ff4c0e53c9d53b">buddy</a> bud)</td></tr>
<tr class="separator:a622bad1e7737e602a3ec6593c8e7b33f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a3e324b16819c8f0dde1e1c02e2a1da"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structzbud__header.html">zbud_header</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zbud_8c.html#a4a3e324b16819c8f0dde1e1c02e2a1da">handle_to_zbud_header</a> (unsigned long handle)</td></tr>
<tr class="separator:a4a3e324b16819c8f0dde1e1c02e2a1da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2889e57b1df36034f53a2db4dceff6ea"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zbud_8c.html#a2889e57b1df36034f53a2db4dceff6ea">num_free_chunks</a> (struct <a class="el" href="structzbud__header.html">zbud_header</a> *zhdr)</td></tr>
<tr class="separator:a2889e57b1df36034f53a2db4dceff6ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5561b835a85eb259f1abc377bc2b5dcc"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structzbud__pool.html">zbud_pool</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zbud_8c.html#a5561b835a85eb259f1abc377bc2b5dcc">zbud_create_pool</a> (gfp_t gfp, const struct zbud_ops *ops)</td></tr>
<tr class="separator:a5561b835a85eb259f1abc377bc2b5dcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4bd5a4bc3d9af0a85acb3224b09a27b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zbud_8c.html#ac4bd5a4bc3d9af0a85acb3224b09a27b">zbud_destroy_pool</a> (struct <a class="el" href="structzbud__pool.html">zbud_pool</a> *pool)</td></tr>
<tr class="separator:ac4bd5a4bc3d9af0a85acb3224b09a27b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b0b8191195b039ea62e5b2f909948aa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zbud_8c.html#a4b0b8191195b039ea62e5b2f909948aa">zbud_alloc</a> (struct <a class="el" href="structzbud__pool.html">zbud_pool</a> *pool, size_t size, gfp_t gfp, unsigned long *handle)</td></tr>
<tr class="separator:a4b0b8191195b039ea62e5b2f909948aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1dba256782aea4fc5611bdf557ed5999"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zbud_8c.html#a1dba256782aea4fc5611bdf557ed5999">zbud_free</a> (struct <a class="el" href="structzbud__pool.html">zbud_pool</a> *pool, unsigned long handle)</td></tr>
<tr class="separator:a1dba256782aea4fc5611bdf557ed5999"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5dd35858e97d99d865aae2aaf5dbcb68"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zbud_8c.html#a5dd35858e97d99d865aae2aaf5dbcb68">zbud_reclaim_page</a> (struct <a class="el" href="structzbud__pool.html">zbud_pool</a> *pool, unsigned int retries)</td></tr>
<tr class="separator:a5dd35858e97d99d865aae2aaf5dbcb68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d4d812d455155aa8b403c30d2d5c19e"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zbud_8c.html#a9d4d812d455155aa8b403c30d2d5c19e">zbud_map</a> (struct <a class="el" href="structzbud__pool.html">zbud_pool</a> *pool, unsigned long handle)</td></tr>
<tr class="separator:a9d4d812d455155aa8b403c30d2d5c19e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab943bd2a36bc5429d0f4a221d9778013"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zbud_8c.html#ab943bd2a36bc5429d0f4a221d9778013">zbud_unmap</a> (struct <a class="el" href="structzbud__pool.html">zbud_pool</a> *pool, unsigned long handle)</td></tr>
<tr class="separator:ab943bd2a36bc5429d0f4a221d9778013"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7c87c2f439f4cc49597d5492b11328f"><td class="memItemLeft" align="right" valign="top">u64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zbud_8c.html#ac7c87c2f439f4cc49597d5492b11328f">zbud_get_pool_size</a> (struct <a class="el" href="structzbud__pool.html">zbud_pool</a> *pool)</td></tr>
<tr class="separator:ac7c87c2f439f4cc49597d5492b11328f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4513b518969f659b0b28cf4a75a9fb6"><td class="memItemLeft" align="right" valign="top">static int __init&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zbud_8c.html#ad4513b518969f659b0b28cf4a75a9fb6">init_zbud</a> (void)</td></tr>
<tr class="separator:ad4513b518969f659b0b28cf4a75a9fb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7418bfc5b24b97838625e214dedfde98"><td class="memItemLeft" align="right" valign="top">static void __exit&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zbud_8c.html#a7418bfc5b24b97838625e214dedfde98">exit_zbud</a> (void)</td></tr>
<tr class="separator:a7418bfc5b24b97838625e214dedfde98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04330098bc509a45f195da9a30cb8239"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zbud_8c.html#a04330098bc509a45f195da9a30cb8239">module_init</a> (<a class="el" href="zbud_8c.html#ad4513b518969f659b0b28cf4a75a9fb6">init_zbud</a>)</td></tr>
<tr class="separator:a04330098bc509a45f195da9a30cb8239"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1aa33e4ed82262c36e0477527828859"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zbud_8c.html#ab1aa33e4ed82262c36e0477527828859">module_exit</a> (<a class="el" href="zbud_8c.html#a7418bfc5b24b97838625e214dedfde98">exit_zbud</a>)</td></tr>
<tr class="separator:ab1aa33e4ed82262c36e0477527828859"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad94b36675e7eb067ea3ce6ff9e244a44"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zbud_8c.html#ad94b36675e7eb067ea3ce6ff9e244a44">MODULE_LICENSE</a> (&quot;GPL&quot;)</td></tr>
<tr class="separator:ad94b36675e7eb067ea3ce6ff9e244a44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c6cc6ef57dcc4585b16553e6d9a0227"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zbud_8c.html#a5c6cc6ef57dcc4585b16553e6d9a0227">MODULE_AUTHOR</a> (&quot;Seth Jennings &lt;sjennings@variantweb.net&gt;&quot;)</td></tr>
<tr class="separator:a5c6cc6ef57dcc4585b16553e6d9a0227"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afba3ac4edaef802ec032e1f8e47ebf53"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zbud_8c.html#afba3ac4edaef802ec032e1f8e47ebf53">MODULE_DESCRIPTION</a> (&quot;Buddy Allocator for Compressed Pages&quot;)</td></tr>
<tr class="separator:afba3ac4edaef802ec032e1f8e47ebf53"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="acda112e2dfd5df63a5b4fb4e31fdeedc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acda112e2dfd5df63a5b4fb4e31fdeedc">&#9670;&nbsp;</a></span>CHUNK_SHIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CHUNK_SHIFT&#160;&#160;&#160;(PAGE_SHIFT - <a class="el" href="zbud_8c.html#af62c2fafbfb558e965a06e3e80878cd5">NCHUNKS_ORDER</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aea3cfda4f3a9f978ec759f206cf186fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea3cfda4f3a9f978ec759f206cf186fe">&#9670;&nbsp;</a></span>CHUNK_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CHUNK_SIZE&#160;&#160;&#160;(1 &lt;&lt; <a class="el" href="zbud_8c.html#acda112e2dfd5df63a5b4fb4e31fdeedc">CHUNK_SHIFT</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4ed45c8f72ac3cceaa7ed3bc8c0c7bc8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ed45c8f72ac3cceaa7ed3bc8c0c7bc8">&#9670;&nbsp;</a></span>for_each_unbuddied_list</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define for_each_unbuddied_list</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_iter, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_begin&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;for ((_iter) = (_begin); (_iter) &lt; <a class="el" href="zbud_8c.html#a4f747b77d7e5100b43722cdba0611c22">NCHUNKS</a>; (_iter)++)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4f747b77d7e5100b43722cdba0611c22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f747b77d7e5100b43722cdba0611c22">&#9670;&nbsp;</a></span>NCHUNKS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NCHUNKS&#160;&#160;&#160;((PAGE_SIZE - <a class="el" href="zbud_8c.html#aa53138709654d3e395109c4478de381e">ZHDR_SIZE_ALIGNED</a>) &gt;&gt; <a class="el" href="zbud_8c.html#acda112e2dfd5df63a5b4fb4e31fdeedc">CHUNK_SHIFT</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="af62c2fafbfb558e965a06e3e80878cd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af62c2fafbfb558e965a06e3e80878cd5">&#9670;&nbsp;</a></span>NCHUNKS_ORDER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NCHUNKS_ORDER&#160;&#160;&#160;6</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a1f8c165bf4196327bc3abff648276d92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f8c165bf4196327bc3abff648276d92">&#9670;&nbsp;</a></span>pr_fmt</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define pr_fmt</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">fmt</td><td>)</td>
          <td>&#160;&#160;&#160;KBUILD_MODNAME &quot;: &quot; fmt</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa53138709654d3e395109c4478de381e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa53138709654d3e395109c4478de381e">&#9670;&nbsp;</a></span>ZHDR_SIZE_ALIGNED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ZHDR_SIZE_ALIGNED&#160;&#160;&#160;<a class="el" href="zbud_8c.html#aea3cfda4f3a9f978ec759f206cf186fe">CHUNK_SIZE</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a64b3b880fcc1449518ff4c0e53c9d53b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64b3b880fcc1449518ff4c0e53c9d53b">&#9670;&nbsp;</a></span>buddy</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="z3fold_8c.html#a64b3b880fcc1449518ff4c0e53c9d53b">buddy</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a64b3b880fcc1449518ff4c0e53c9d53babbc8c795df97627cc722e37f0bd2e4ee"></a>HEADLESS&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a64b3b880fcc1449518ff4c0e53c9d53ba6a7856cca1833641e731676636b193f1"></a>FIRST&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a64b3b880fcc1449518ff4c0e53c9d53ba1a2710fb8b50ea593b207d1e79fea574"></a>MIDDLE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a64b3b880fcc1449518ff4c0e53c9d53ba990cd45e93be2b4661f3499e0a658a33"></a>LAST&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a64b3b880fcc1449518ff4c0e53c9d53ba4a31d445d8c87ac47ae3ad117016ceba"></a>BUDDIES_MAX&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a64b3b880fcc1449518ff4c0e53c9d53ba6a7856cca1833641e731676636b193f1"></a>FIRST&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a64b3b880fcc1449518ff4c0e53c9d53ba990cd45e93be2b4661f3499e0a658a33"></a>LAST&#160;</td><td class="fielddoc"></td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a622bad1e7737e602a3ec6593c8e7b33f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a622bad1e7737e602a3ec6593c8e7b33f">&#9670;&nbsp;</a></span>encode_handle()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned long encode_handle </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structzbud__header.html">zbud_header</a> *&#160;</td>
          <td class="paramname"><em>zhdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="z3fold_8c.html#a64b3b880fcc1449518ff4c0e53c9d53b">buddy</a>&#160;</td>
          <td class="paramname"><em>bud</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="zbud_8c_a622bad1e7737e602a3ec6593c8e7b33f_icgraph.png" border="0" usemap="#zbud_8c_a622bad1e7737e602a3ec6593c8e7b33f_icgraph" alt=""/></div>
<map name="zbud_8c_a622bad1e7737e602a3ec6593c8e7b33f_icgraph" id="zbud_8c_a622bad1e7737e602a3ec6593c8e7b33f_icgraph">
<area shape="rect" id="node2" href="zbud_8c.html#a4b0b8191195b039ea62e5b2f909948aa" title="zbud_alloc" alt="" coords="188,5,272,32"/>
<area shape="rect" id="node3" href="zbud_8c.html#a5dd35858e97d99d865aae2aaf5dbcb68" title="zbud_reclaim_page" alt="" coords="163,56,297,83"/>
</map>
</div>

</div>
</div>
<a id="a7418bfc5b24b97838625e214dedfde98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7418bfc5b24b97838625e214dedfde98">&#9670;&nbsp;</a></span>exit_zbud()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __exit exit_zbud </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="zbud_8c_a7418bfc5b24b97838625e214dedfde98_cgraph.png" border="0" usemap="#zbud_8c_a7418bfc5b24b97838625e214dedfde98_cgraph" alt=""/></div>
<map name="zbud_8c_a7418bfc5b24b97838625e214dedfde98_cgraph" id="zbud_8c_a7418bfc5b24b97838625e214dedfde98_cgraph">
<area shape="rect" id="node2" href="zpool_8c.html#a58f4e4851dd20ade105f4bddb18899cc" title="zpool_unregister_driver" alt="" coords="359,13,515,40"/>
<area shape="rect" id="node4" href="zbud_8c.html#a04330098bc509a45f195da9a30cb8239" title="module_init" alt="" coords="177,50,265,77"/>
<area shape="rect" id="node5" href="zbud_8c.html#ad4513b518969f659b0b28cf4a75a9fb6" title="init_zbud" alt="" coords="184,101,259,128"/>
<area shape="rect" id="node7" href="zbud_8c.html#ab1aa33e4ed82262c36e0477527828859" title="module_exit" alt="" coords="175,152,267,178"/>
<area shape="rect" id="node8" href="zbud_8c.html#ad94b36675e7eb067ea3ce6ff9e244a44" title="MODULE_LICENSE" alt="" coords="149,202,293,229"/>
<area shape="rect" id="node9" href="zbud_8c.html#a5c6cc6ef57dcc4585b16553e6d9a0227" title="MODULE_AUTHOR" alt="" coords="150,253,293,280"/>
<area shape="rect" id="node10" href="zbud_8c.html#afba3ac4edaef802ec032e1f8e47ebf53" title="MODULE_DESCRIPTION" alt="" coords="132,304,311,330"/>
<area shape="rect" id="node3" href="zpool_8c.html#a446bb8e4a1a6fc5d089ad5ce3e4409e0" title="EXPORT_SYMBOL" alt="" coords="563,50,701,77"/>
<area shape="rect" id="node6" href="zpool_8c.html#a3402f9403ae4ae9ad653a264adf5c9bc" title="zpool_register_driver" alt="" coords="365,76,508,102"/>
</map>
</div>

</div>
</div>
<a id="a082b965a56fb1fbb7befce278b9515d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a082b965a56fb1fbb7befce278b9515d3">&#9670;&nbsp;</a></span>free_zbud_page()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void free_zbud_page </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structzbud__header.html">zbud_header</a> *&#160;</td>
          <td class="paramname"><em>zhdr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="zbud_8c_a082b965a56fb1fbb7befce278b9515d3_icgraph.png" border="0" usemap="#zbud_8c_a082b965a56fb1fbb7befce278b9515d3_icgraph" alt=""/></div>
<map name="zbud_8c_a082b965a56fb1fbb7befce278b9515d3_icgraph" id="zbud_8c_a082b965a56fb1fbb7befce278b9515d3_icgraph">
<area shape="rect" id="node2" href="zbud_8c.html#a1dba256782aea4fc5611bdf557ed5999" title="zbud_free" alt="" coords="196,5,275,32"/>
<area shape="rect" id="node3" href="zbud_8c.html#a5dd35858e97d99d865aae2aaf5dbcb68" title="zbud_reclaim_page" alt="" coords="168,56,303,83"/>
</map>
</div>

</div>
</div>
<a id="a4a3e324b16819c8f0dde1e1c02e2a1da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a3e324b16819c8f0dde1e1c02e2a1da">&#9670;&nbsp;</a></span>handle_to_zbud_header()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structzbud__header.html">zbud_header</a>* handle_to_zbud_header </td>
          <td>(</td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="zbud_8c_a4a3e324b16819c8f0dde1e1c02e2a1da_icgraph.png" border="0" usemap="#zbud_8c_a4a3e324b16819c8f0dde1e1c02e2a1da_icgraph" alt=""/></div>
<map name="zbud_8c_a4a3e324b16819c8f0dde1e1c02e2a1da_icgraph" id="zbud_8c_a4a3e324b16819c8f0dde1e1c02e2a1da_icgraph">
<area shape="rect" id="node2" href="zbud_8c.html#a1dba256782aea4fc5611bdf557ed5999" title="zbud_free" alt="" coords="212,5,291,32"/>
</map>
</div>

</div>
</div>
<a id="ad4513b518969f659b0b28cf4a75a9fb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4513b518969f659b0b28cf4a75a9fb6">&#9670;&nbsp;</a></span>init_zbud()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int __init init_zbud </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="zbud_8c_ad4513b518969f659b0b28cf4a75a9fb6_cgraph.png" border="0" usemap="#zbud_8c_ad4513b518969f659b0b28cf4a75a9fb6_cgraph" alt=""/></div>
<map name="zbud_8c_ad4513b518969f659b0b28cf4a75a9fb6_cgraph" id="zbud_8c_ad4513b518969f659b0b28cf4a75a9fb6_cgraph">
<area shape="rect" id="node2" href="zpool_8c.html#a3402f9403ae4ae9ad653a264adf5c9bc" title="zpool_register_driver" alt="" coords="128,5,271,32"/>
<area shape="rect" id="node3" href="zpool_8c.html#a446bb8e4a1a6fc5d089ad5ce3e4409e0" title="EXPORT_SYMBOL" alt="" coords="319,5,457,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="zbud_8c_ad4513b518969f659b0b28cf4a75a9fb6_icgraph.png" border="0" usemap="#zbud_8c_ad4513b518969f659b0b28cf4a75a9fb6_icgraph" alt=""/></div>
<map name="zbud_8c_ad4513b518969f659b0b28cf4a75a9fb6_icgraph" id="zbud_8c_ad4513b518969f659b0b28cf4a75a9fb6_icgraph">
<area shape="rect" id="node2" href="zbud_8c.html#a7418bfc5b24b97838625e214dedfde98" title="exit_zbud" alt="" coords="128,5,207,32"/>
</map>
</div>

</div>
</div>
<a id="ad315f57d5f3f2edf748b369957b4b9a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad315f57d5f3f2edf748b369957b4b9a0">&#9670;&nbsp;</a></span>init_zbud_page()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structzbud__header.html">zbud_header</a>* init_zbud_page </td>
          <td>(</td>
          <td class="paramtype">struct page *&#160;</td>
          <td class="paramname"><em>page</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="zbud_8c_ad315f57d5f3f2edf748b369957b4b9a0_icgraph.png" border="0" usemap="#zbud_8c_ad315f57d5f3f2edf748b369957b4b9a0_icgraph" alt=""/></div>
<map name="zbud_8c_ad315f57d5f3f2edf748b369957b4b9a0_icgraph" id="zbud_8c_ad315f57d5f3f2edf748b369957b4b9a0_icgraph">
<area shape="rect" id="node2" href="zbud_8c.html#a4b0b8191195b039ea62e5b2f909948aa" title="zbud_alloc" alt="" coords="163,5,247,32"/>
</map>
</div>

</div>
</div>
<a id="a5c6cc6ef57dcc4585b16553e6d9a0227"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c6cc6ef57dcc4585b16553e6d9a0227">&#9670;&nbsp;</a></span>MODULE_AUTHOR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MODULE_AUTHOR </td>
          <td>(</td>
          <td class="paramtype">&quot;Seth Jennings &lt;sjennings@variantweb.net&gt;&quot;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="zbud_8c_a5c6cc6ef57dcc4585b16553e6d9a0227_icgraph.png" border="0" usemap="#zbud_8c_a5c6cc6ef57dcc4585b16553e6d9a0227_icgraph" alt=""/></div>
<map name="zbud_8c_a5c6cc6ef57dcc4585b16553e6d9a0227_icgraph" id="zbud_8c_a5c6cc6ef57dcc4585b16553e6d9a0227_icgraph">
<area shape="rect" id="node2" href="zbud_8c.html#a7418bfc5b24b97838625e214dedfde98" title="exit_zbud" alt="" coords="196,5,275,32"/>
</map>
</div>

</div>
</div>
<a id="afba3ac4edaef802ec032e1f8e47ebf53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afba3ac4edaef802ec032e1f8e47ebf53">&#9670;&nbsp;</a></span>MODULE_DESCRIPTION()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MODULE_DESCRIPTION </td>
          <td>(</td>
          <td class="paramtype">&quot;Buddy Allocator for Compressed Pages&quot;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="zbud_8c_afba3ac4edaef802ec032e1f8e47ebf53_icgraph.png" border="0" usemap="#zbud_8c_afba3ac4edaef802ec032e1f8e47ebf53_icgraph" alt=""/></div>
<map name="zbud_8c_afba3ac4edaef802ec032e1f8e47ebf53_icgraph" id="zbud_8c_afba3ac4edaef802ec032e1f8e47ebf53_icgraph">
<area shape="rect" id="node2" href="zbud_8c.html#a7418bfc5b24b97838625e214dedfde98" title="exit_zbud" alt="" coords="232,5,311,32"/>
</map>
</div>

</div>
</div>
<a id="ab1aa33e4ed82262c36e0477527828859"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1aa33e4ed82262c36e0477527828859">&#9670;&nbsp;</a></span>module_exit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module_exit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="zbud_8c.html#a7418bfc5b24b97838625e214dedfde98">exit_zbud</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="zbud_8c_ab1aa33e4ed82262c36e0477527828859_icgraph.png" border="0" usemap="#zbud_8c_ab1aa33e4ed82262c36e0477527828859_icgraph" alt=""/></div>
<map name="zbud_8c_ab1aa33e4ed82262c36e0477527828859_icgraph" id="zbud_8c_ab1aa33e4ed82262c36e0477527828859_icgraph">
<area shape="rect" id="node2" href="zbud_8c.html#a7418bfc5b24b97838625e214dedfde98" title="exit_zbud" alt="" coords="145,5,224,32"/>
</map>
</div>

</div>
</div>
<a id="a04330098bc509a45f195da9a30cb8239"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04330098bc509a45f195da9a30cb8239">&#9670;&nbsp;</a></span>module_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="zbud_8c.html#ad4513b518969f659b0b28cf4a75a9fb6">init_zbud</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="zbud_8c_a04330098bc509a45f195da9a30cb8239_icgraph.png" border="0" usemap="#zbud_8c_a04330098bc509a45f195da9a30cb8239_icgraph" alt=""/></div>
<map name="zbud_8c_a04330098bc509a45f195da9a30cb8239_icgraph" id="zbud_8c_a04330098bc509a45f195da9a30cb8239_icgraph">
<area shape="rect" id="node2" href="zbud_8c.html#a7418bfc5b24b97838625e214dedfde98" title="exit_zbud" alt="" coords="141,5,220,32"/>
</map>
</div>

</div>
</div>
<a id="ad94b36675e7eb067ea3ce6ff9e244a44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad94b36675e7eb067ea3ce6ff9e244a44">&#9670;&nbsp;</a></span>MODULE_LICENSE()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MODULE_LICENSE </td>
          <td>(</td>
          <td class="paramtype">&quot;GPL&quot;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="zbud_8c_ad94b36675e7eb067ea3ce6ff9e244a44_icgraph.png" border="0" usemap="#zbud_8c_ad94b36675e7eb067ea3ce6ff9e244a44_icgraph" alt=""/></div>
<map name="zbud_8c_ad94b36675e7eb067ea3ce6ff9e244a44_icgraph" id="zbud_8c_ad94b36675e7eb067ea3ce6ff9e244a44_icgraph">
<area shape="rect" id="node2" href="zbud_8c.html#a7418bfc5b24b97838625e214dedfde98" title="exit_zbud" alt="" coords="197,5,276,32"/>
</map>
</div>

</div>
</div>
<a id="a2889e57b1df36034f53a2db4dceff6ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2889e57b1df36034f53a2db4dceff6ea">&#9670;&nbsp;</a></span>num_free_chunks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int num_free_chunks </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structzbud__header.html">zbud_header</a> *&#160;</td>
          <td class="paramname"><em>zhdr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="zbud_8c_a2889e57b1df36034f53a2db4dceff6ea_icgraph.png" border="0" usemap="#zbud_8c_a2889e57b1df36034f53a2db4dceff6ea_icgraph" alt=""/></div>
<map name="zbud_8c_a2889e57b1df36034f53a2db4dceff6ea_icgraph" id="zbud_8c_a2889e57b1df36034f53a2db4dceff6ea_icgraph">
<area shape="rect" id="node2" href="zbud_8c.html#a4b0b8191195b039ea62e5b2f909948aa" title="zbud_alloc" alt="" coords="204,5,288,32"/>
<area shape="rect" id="node3" href="zbud_8c.html#a1dba256782aea4fc5611bdf557ed5999" title="zbud_free" alt="" coords="207,56,285,83"/>
<area shape="rect" id="node4" href="zbud_8c.html#a5dd35858e97d99d865aae2aaf5dbcb68" title="zbud_reclaim_page" alt="" coords="179,107,313,133"/>
</map>
</div>

</div>
</div>
<a id="a6ea9ceb4114613b24e23d22eedfa6285"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ea9ceb4114613b24e23d22eedfa6285">&#9670;&nbsp;</a></span>size_to_chunks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int size_to_chunks </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="zbud_8c_a6ea9ceb4114613b24e23d22eedfa6285_icgraph.png" border="0" usemap="#zbud_8c_a6ea9ceb4114613b24e23d22eedfa6285_icgraph" alt=""/></div>
<map name="zbud_8c_a6ea9ceb4114613b24e23d22eedfa6285_icgraph" id="zbud_8c_a6ea9ceb4114613b24e23d22eedfa6285_icgraph">
<area shape="rect" id="node2" href="zbud_8c.html#a4b0b8191195b039ea62e5b2f909948aa" title="zbud_alloc" alt="" coords="167,5,251,32"/>
</map>
</div>

</div>
</div>
<a id="a4b0b8191195b039ea62e5b2f909948aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b0b8191195b039ea62e5b2f909948aa">&#9670;&nbsp;</a></span>zbud_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int zbud_alloc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structzbud__pool.html">zbud_pool</a> *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gfp_t&#160;</td>
          <td class="paramname"><em>gfp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long *&#160;</td>
          <td class="paramname"><em>handle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="zbud_8c.html#a4b0b8191195b039ea62e5b2f909948aa">zbud_alloc()</a> - allocates a region of a given size : zbud pool from which to allocate : size in bytes of the desired allocation : gfp flags used if the pool needs to grow : handle of the new allocation</p>
<p>This function will attempt to find a free region in the pool large enough to satisfy the allocation request. A search of the unbuddied lists is performed first. If no suitable free region is found, then a new page is allocated and added to the pool to satisfy the request.</p>
<p>gfp should not set __GFP_HIGHMEM as highmem pages cannot be used as zbud pool pages.</p>
<p>Return: 0 if success and handle is set, otherwise -EINVAL if the size or gfp arguments are invalid or -ENOMEM if the pool was unable to allocate a new page. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="zbud_8c_a4b0b8191195b039ea62e5b2f909948aa_cgraph.png" border="0" usemap="#zbud_8c_a4b0b8191195b039ea62e5b2f909948aa_cgraph" alt=""/></div>
<map name="zbud_8c_a4b0b8191195b039ea62e5b2f909948aa_cgraph" id="zbud_8c_a4b0b8191195b039ea62e5b2f909948aa_cgraph">
<area shape="rect" id="node2" href="zbud_8c.html#a6ea9ceb4114613b24e23d22eedfa6285" title="size_to_chunks" alt="" coords="143,5,257,32"/>
<area shape="rect" id="node3" href="zbud_8c.html#ad315f57d5f3f2edf748b369957b4b9a0" title="init_zbud_page" alt="" coords="145,56,255,83"/>
<area shape="rect" id="node4" href="zbud_8c.html#a2889e57b1df36034f53a2db4dceff6ea" title="num_free_chunks" alt="" coords="137,107,263,133"/>
<area shape="rect" id="node5" href="zbud_8c.html#a622bad1e7737e602a3ec6593c8e7b33f" title="encode_handle" alt="" coords="145,157,255,184"/>
</map>
</div>

</div>
</div>
<a id="a5561b835a85eb259f1abc377bc2b5dcc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5561b835a85eb259f1abc377bc2b5dcc">&#9670;&nbsp;</a></span>zbud_create_pool()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structzbud__pool.html">zbud_pool</a>* zbud_create_pool </td>
          <td>(</td>
          <td class="paramtype">gfp_t&#160;</td>
          <td class="paramname"><em>gfp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct zbud_ops *&#160;</td>
          <td class="paramname"><em>ops</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="zbud_8c.html#a5561b835a85eb259f1abc377bc2b5dcc">zbud_create_pool()</a> - create a new zbud pool : gfp flags when allocating the zbud pool structure : user-defined operations for the zbud pool</p>
<p>Return: pointer to the new zbud pool or NULL if the metadata allocation failed. </p>

</div>
</div>
<a id="ac4bd5a4bc3d9af0a85acb3224b09a27b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4bd5a4bc3d9af0a85acb3224b09a27b">&#9670;&nbsp;</a></span>zbud_destroy_pool()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void zbud_destroy_pool </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structzbud__pool.html">zbud_pool</a> *&#160;</td>
          <td class="paramname"><em>pool</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="zbud_8c.html#ac4bd5a4bc3d9af0a85acb3224b09a27b">zbud_destroy_pool()</a> - destroys an existing zbud pool : the zbud pool to be destroyed</p>
<p>The pool should be emptied before this function is called. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="zbud_8c_ac4bd5a4bc3d9af0a85acb3224b09a27b_cgraph.png" border="0" usemap="#zbud_8c_ac4bd5a4bc3d9af0a85acb3224b09a27b_cgraph" alt=""/></div>
<map name="zbud_8c_ac4bd5a4bc3d9af0a85acb3224b09a27b_cgraph" id="zbud_8c_ac4bd5a4bc3d9af0a85acb3224b09a27b_cgraph">
<area shape="rect" id="node2" href="slab_8c.html#a5273884a01705283d2b9e4262a8e6da3" title="kfree" alt="" coords="184,309,235,336"/>
<area shape="rect" id="node3" href="slab_8c.html#ad01b9979e3af9ef6cf6cf0e5e07a888b" title="virt_to_cache" alt="" coords="302,259,402,285"/>
<area shape="rect" id="node4" href="slab_8c.html#ada85c8dcd5a12135fafd3e57e04b2a83" title="__cache_free" alt="" coords="302,309,402,336"/>
<area shape="rect" id="node50" href="slab_8c.html#a8bd568fd926e82c7f9a045968ddd296d" title="EXPORT_SYMBOL" alt="" coords="283,360,421,387"/>
<area shape="rect" id="node5" href="kasan_8c.html#abd2a19c22112d47e30a5c894126893b5" title="kasan_slab_free" alt="" coords="469,335,587,361"/>
<area shape="rect" id="node37" href="slab_8c.html#a0eafce5f5883b9c61abc40932bddc6c9" title="___cache_free" alt="" coords="845,107,952,133"/>
<area shape="rect" id="node6" href="kasan_8c.html#aa34aa7ae5a893c8850d0773ee47162aa" title="__kasan_slab_free" alt="" coords="635,512,765,539"/>
<area shape="rect" id="node7" href="kasan_8h.html#af2bea275d78093f6af2c85be98bdf24b" title="kasan_report_invalid_free" alt="" coords="813,867,984,893"/>
<area shape="rect" id="node13" href="kasan_8c.html#adb69ca028304e68fa451114764677b5f" title="get_alloc_info" alt="" coords="1484,765,1587,792"/>
<area shape="rect" id="node26" href="kasan_8c.html#ab71bae781dddbf4f66628b902e794d88" title="kasan_poison_shadow" alt="" coords="821,512,976,539"/>
<area shape="rect" id="node28" href="kasan_8c.html#ad5ba468802e0122c6d515b6142ff7f6f" title="set_track" alt="" coords="861,335,937,361"/>
<area shape="rect" id="node31" href="quarantine_8c.html#a603d62b05c523669617a49a220248d4b" title="quarantine_put" alt="" coords="845,436,952,463"/>
<area shape="rect" id="node36" href="kasan_8c.html#a20e07e3a641c8d09d6d3acb14b0b878a" title="get_free_info" alt="" coords="850,917,947,944"/>
<area shape="rect" id="node8" href="report_8c.html#a1f7a5cf13fd9e99799cc758cfa063120" title="kasan_start_report" alt="" coords="1054,1069,1185,1096"/>
<area shape="rect" id="node10" href="report_8c.html#adb5e7fc83a730108e0325580882c635b" title="print_address_description" alt="" coords="1034,867,1205,893"/>
<area shape="rect" id="node17" href="report_8c.html#a52bda725850cacc62324e336c0a0874c" title="print_shadow_for_address" alt="" coords="1032,664,1207,691"/>
<area shape="rect" id="node24" href="report_8c.html#a7fcbb215d9c5bd7fe874cdedb8f6d3a5" title="kasan_end_report" alt="" coords="1057,1120,1182,1147"/>
<area shape="rect" id="node9" href="kasan_8c.html#a88859b8fe2395d376ae69f124f1235cd" title="kasan_disable_current" alt="" coords="1257,1069,1409,1096"/>
<area shape="rect" id="node11" href="report_8c.html#a63a4f10f947359d49b14ba01e8b0aa15" title="addr_to_page" alt="" coords="1283,917,1383,944"/>
<area shape="rect" id="node12" href="report_8c.html#ad3142c36fe391b8b037417b37a7f0079" title="describe_object" alt="" coords="1276,867,1389,893"/>
<area shape="rect" id="node14" href="report_8c.html#ab899ec8b3a7e2cf4d6d7fb059fa9a13f" title="kernel_or_module_addr" alt="" coords="1255,968,1411,995"/>
<area shape="rect" id="node15" href="report_8c.html#a97e511031e74fccf6c9ee22a28233b90" title="init_task_stack_addr" alt="" coords="1261,765,1404,792"/>
<area shape="rect" id="node16" href="debug_8c.html#ada492eebbcb4d84055f11c3e0d95f647" title="dump_page" alt="" coords="1288,816,1377,843"/>
<area shape="rect" id="node18" href="kasan_8h.html#a830464b823ce36ea87a54e8aac09ea72" title="kasan_shadow_to_mem" alt="" coords="1861,613,2024,640"/>
<area shape="rect" id="node19" href="kasan_8c.html#ab68eb7b07f8ada1c6c8bde74731d3de7" title="memcpy" alt="" coords="1297,461,1369,488"/>
<area shape="rect" id="node22" href="report_8c.html#a725f90c3757193777c339f026c450b56" title="row_is_guilty" alt="" coords="1283,664,1382,691"/>
<area shape="rect" id="node23" href="report_8c.html#aae3e71838bd335d57371bc0cc7b269ef" title="shadow_pointer_offset" alt="" coords="1256,715,1409,741"/>
<area shape="rect" id="node20" href="kasan_8c.html#a7920dadee1bb73aa1025df02f9dc48fb" title="check_memory_region" alt="" coords="1459,487,1612,513"/>
<area shape="rect" id="node21" href="kasan_8c.html#a9963951e75463ffa8c550c6160bcd2ab" title="check_memory_region\l_inline" alt="" coords="1660,501,1813,542"/>
<area shape="rect" id="node25" href="kasan_8c.html#a381e9c4ae1310ba55286c94c5c99afbb" title="kasan_enable_current" alt="" coords="1258,1120,1407,1147"/>
<area shape="rect" id="node27" href="kasan_8c.html#a2ca89717875af0c4a577ccc15f9ee1f8" title="memset" alt="" coords="1085,512,1154,539"/>
<area shape="rect" id="node29" href="kasan_8c.html#a3132ff737bd834b4e02a3f0330e61085" title="save_stack" alt="" coords="1075,309,1164,336"/>
<area shape="rect" id="node30" href="kasan_8c.html#a895f44fd219f105e1eee6eb55f652104" title="filter_irq_stacks" alt="" coords="1275,309,1390,336"/>
<area shape="rect" id="node32" href="quarantine_8c.html#acd04074fc7838abca4658d51d45a37a7" title="qlist_put" alt="" coords="1084,436,1155,463"/>
<area shape="rect" id="node34" href="quarantine_8c.html#a3da88f9da1f9507fa2aa9f0140d3ca23" title="qlist_move_all" alt="" coords="1067,385,1172,412"/>
<area shape="rect" id="node33" href="quarantine_8c.html#a49b8ef45b73fe926fe4b9c99181b8665" title="qlist_empty" alt="" coords="1288,411,1377,437"/>
<area shape="rect" id="node35" href="quarantine_8c.html#a7996a74a388918d433f976b8fd7f4e94" title="qlist_init" alt="" coords="1297,360,1368,387"/>
<area shape="rect" id="node38" href="slab_8c.html#af6eda99a015919d7af7e8b2799ce3aee" title="cpu_cache_get" alt="" coords="1064,5,1175,32"/>
<area shape="rect" id="node39" href="slab_8c.html#abb46ae6ffdeb850bdf3c7660cb7630c1" title="cache_free_alien" alt="" coords="1059,56,1179,83"/>
<area shape="rect" id="node40" href="slab_8c.html#a56bbdd7d1e792b46e5b8b5c97947f243" title="cache_flusharray" alt="" coords="1059,157,1180,184"/>
<area shape="rect" id="node49" href="slab_8c.html#aba8e8d9fa7c15478202fad52c4632313" title="cache_free_pfmemalloc" alt="" coords="1039,107,1199,133"/>
<area shape="rect" id="node41" href="backing-dev_8c.html#a06db5190b75a5cdc8ccc743c76a893b9" title="LIST_HEAD" alt="" coords="1285,56,1380,83"/>
<area shape="rect" id="node42" href="slab_8h.html#afe261ca1029ab42c9c703d4ed0adc8da" title="get_node" alt="" coords="1498,56,1573,83"/>
<area shape="rect" id="node43" href="slab_8c.html#a84987b9997332f225327636b7603198f" title="free_block" alt="" coords="1291,107,1374,133"/>
<area shape="rect" id="node46" href="slab_8c.html#ae5ce075fac9a39ef69ede1421936a15a" title="slabs_destroy" alt="" coords="1281,157,1384,184"/>
<area shape="rect" id="node48" href="kasan_8c.html#a5b5c065d8150b7fed8da22473164e8a9" title="memmove" alt="" coords="1291,259,1374,285"/>
<area shape="rect" id="node44" href="slab_8c.html#a733b5378353a5e10305230c34182e0da" title="slab_put_obj" alt="" coords="1488,107,1583,133"/>
<area shape="rect" id="node45" href="slab_8c.html#a6f9495022093c3c98888a52fe2bc6498" title="obj_to_index" alt="" coords="1689,107,1784,133"/>
<area shape="rect" id="node47" href="slab_8c.html#ad6c57b64b8f047c68ad83938915ef283" title="slab_destroy" alt="" coords="1487,157,1583,184"/>
</map>
</div>

</div>
</div>
<a id="a1dba256782aea4fc5611bdf557ed5999"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1dba256782aea4fc5611bdf557ed5999">&#9670;&nbsp;</a></span>zbud_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void zbud_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structzbud__pool.html">zbud_pool</a> *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>handle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="zbud_8c.html#a1dba256782aea4fc5611bdf557ed5999">zbud_free()</a> - frees the allocation associated with the given handle : pool in which the allocation resided : handle associated with the allocation returned by <a class="el" href="zbud_8c.html#a4b0b8191195b039ea62e5b2f909948aa">zbud_alloc()</a></p>
<p>In the case that the zbud page in which the allocation resides is under reclaim, as indicated by the PG_reclaim flag being set, this function only sets the first|last_chunks to 0. The page is actually freed once both buddies are evicted (see <a class="el" href="zbud_8c.html#a5dd35858e97d99d865aae2aaf5dbcb68">zbud_reclaim_page()</a> below). </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="zbud_8c_a1dba256782aea4fc5611bdf557ed5999_cgraph.png" border="0" usemap="#zbud_8c_a1dba256782aea4fc5611bdf557ed5999_cgraph" alt=""/></div>
<map name="zbud_8c_a1dba256782aea4fc5611bdf557ed5999_cgraph" id="zbud_8c_a1dba256782aea4fc5611bdf557ed5999_cgraph">
<area shape="rect" id="node2" href="zbud_8c.html#a4a3e324b16819c8f0dde1e1c02e2a1da" title="handle_to_zbud_header" alt="" coords="132,5,291,32"/>
<area shape="rect" id="node3" href="zbud_8c.html#a082b965a56fb1fbb7befce278b9515d3" title="free_zbud_page" alt="" coords="154,56,269,83"/>
<area shape="rect" id="node4" href="zbud_8c.html#a2889e57b1df36034f53a2db4dceff6ea" title="num_free_chunks" alt="" coords="149,107,274,133"/>
</map>
</div>

</div>
</div>
<a id="ac7c87c2f439f4cc49597d5492b11328f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7c87c2f439f4cc49597d5492b11328f">&#9670;&nbsp;</a></span>zbud_get_pool_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u64 zbud_get_pool_size </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structzbud__pool.html">zbud_pool</a> *&#160;</td>
          <td class="paramname"><em>pool</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="zbud_8c.html#ac7c87c2f439f4cc49597d5492b11328f">zbud_get_pool_size()</a> - gets the zbud pool size in pages : pool whose size is being queried</p>
<p>Returns: size in pages of the given pool. The pool lock need not be taken to access pages_nr. </p>

</div>
</div>
<a id="a9d4d812d455155aa8b403c30d2d5c19e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d4d812d455155aa8b403c30d2d5c19e">&#9670;&nbsp;</a></span>zbud_map()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* zbud_map </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structzbud__pool.html">zbud_pool</a> *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>handle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="zbud_8c.html#a9d4d812d455155aa8b403c30d2d5c19e">zbud_map()</a> - maps the allocation associated with the given handle : pool in which the allocation resides : handle associated with the allocation to be mapped</p>
<p>While trivial for zbud, the mapping functions for others allocators implementing this allocation API could have more complex information encoded in the handle and could create temporary mappings to make the data accessible to the user.</p>
<p>Returns: a pointer to the mapped allocation </p>

</div>
</div>
<a id="a5dd35858e97d99d865aae2aaf5dbcb68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5dd35858e97d99d865aae2aaf5dbcb68">&#9670;&nbsp;</a></span>zbud_reclaim_page()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int zbud_reclaim_page </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structzbud__pool.html">zbud_pool</a> *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>retries</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="zbud_8c.html#a5dd35858e97d99d865aae2aaf5dbcb68">zbud_reclaim_page()</a> - evicts allocations from a pool page and frees it : pool from which a page will attempt to be evicted : number of pages on the LRU list for which eviction will be attempted before failing</p>
<p>zbud reclaim is different from normal system reclaim in that the reclaim is done from the bottom, up. This is because only the bottom layer, zbud, has information on how the allocations are organized within each zbud page. This has the potential to create interesting locking situations between zbud and the user, however.</p>
<p>To avoid these, this is how <a class="el" href="zbud_8c.html#a5dd35858e97d99d865aae2aaf5dbcb68">zbud_reclaim_page()</a> should be called:</p>
<p>The user detects a page should be reclaimed and calls <a class="el" href="zbud_8c.html#a5dd35858e97d99d865aae2aaf5dbcb68">zbud_reclaim_page()</a>. <a class="el" href="zbud_8c.html#a5dd35858e97d99d865aae2aaf5dbcb68">zbud_reclaim_page()</a> will remove a zbud page from the pool LRU list and call the user-defined eviction handler with the pool and handle as arguments.</p>
<p>If the handle can not be evicted, the eviction handler should return non-zero. <a class="el" href="zbud_8c.html#a5dd35858e97d99d865aae2aaf5dbcb68">zbud_reclaim_page()</a> will add the zbud page back to the appropriate list and try the next zbud page on the LRU up to a user defined number of retries.</p>
<p>If the handle is successfully evicted, the eviction handler should return 0 <em>and</em> should have called <a class="el" href="zbud_8c.html#a1dba256782aea4fc5611bdf557ed5999">zbud_free()</a> on the handle. <a class="el" href="zbud_8c.html#a1dba256782aea4fc5611bdf557ed5999">zbud_free()</a> contains logic to delay freeing the page if the page is under reclaim, as indicated by the setting of the PG_reclaim flag on the underlying page.</p>
<p>If all buddies in the zbud page are successfully evicted, then the zbud page can be freed.</p>
<p>Returns: 0 if page is successfully freed, otherwise -EINVAL if there are no pages to evict or an eviction handler is not registered, -EAGAIN if the retry limit was hit. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="zbud_8c_a5dd35858e97d99d865aae2aaf5dbcb68_cgraph.png" border="0" usemap="#zbud_8c_a5dd35858e97d99d865aae2aaf5dbcb68_cgraph" alt=""/></div>
<map name="zbud_8c_a5dd35858e97d99d865aae2aaf5dbcb68_cgraph" id="zbud_8c_a5dd35858e97d99d865aae2aaf5dbcb68_cgraph">
<area shape="rect" id="node2" href="zbud_8c.html#a622bad1e7737e602a3ec6593c8e7b33f" title="encode_handle" alt="" coords="196,5,305,32"/>
<area shape="rect" id="node3" href="zbud_8c.html#a082b965a56fb1fbb7befce278b9515d3" title="free_zbud_page" alt="" coords="193,56,308,83"/>
<area shape="rect" id="node4" href="zbud_8c.html#a2889e57b1df36034f53a2db4dceff6ea" title="num_free_chunks" alt="" coords="188,107,313,133"/>
</map>
</div>

</div>
</div>
<a id="ab943bd2a36bc5429d0f4a221d9778013"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab943bd2a36bc5429d0f4a221d9778013">&#9670;&nbsp;</a></span>zbud_unmap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void zbud_unmap </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structzbud__pool.html">zbud_pool</a> *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>handle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="zbud_8c.html#ab943bd2a36bc5429d0f4a221d9778013">zbud_unmap()</a> - maps the allocation associated with the given handle : pool in which the allocation resides : handle associated with the allocation to be unmapped </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="zbud_8c.html">zbud.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>

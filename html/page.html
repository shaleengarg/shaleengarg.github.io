<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Linux MM: to add</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Linux MM
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('page.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">to add </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>add_to_page_cache_locked - add a locked page to the pagecache</p>
<p>: the page's address_space : page index : page allocation mode</p>
<p>This function is used to add a page to the pagecache. It must be locked. This function does not add the page to the LRU. The caller must do that.</p>
<p>mem_cgroup_css_from_page - css of the memcg associated with a page</p>
<p>If memcg is bound to the default hierarchy, css of the memcg associated with</p>
<p>memcg_kmem_charge_memcg: charge a kmem page</p>
<p>: reclaim mode : allocation order : memory cgroup to charge</p>
<p>Returns 0 on success, an error code on failure.</p>
<p>memcg_kmem_charge: charge a kmem page to the current memory cgroup</p>
<p>: reclaim mode : allocation order</p>
<p>Returns 0 on success, an error code on failure.</p>
<p>memcg_kmem_uncharge: uncharge a kmem page</p>
<p>: allocation order</p>
<p>mem_cgroup_try_charge - try charging a page</p>
<p>: mm context of the victim : reclaim mode : charged memcg return : charge the page as compound or small page</p>
<p>Try to charge</p>
<p>mem_cgroup_commit_charge - commit a page charge</p>
<p>: memcg to charge the page to : page might be on LRU already : charge the page as compound or small page</p>
<p>Finalize a charge transaction started by <a class="el" href="memcontrol_8c.html#ad59db95e8ab6a953e567648e184d1233">mem_cgroup_try_charge()</a>, after page-&gt;mapping has been set up. This must happen atomically as part of the page instantiation, i.e. under the page table lock for anonymous pages, under the page lock for page and swap cache.</p>
<p>In addition, the page must not be on the LRU during the commit, to prevent racing with task migration. If it might be, use .</p>
<p>Use <a class="el" href="memcontrol_8c.html#a733114a148f13b07c08c20e1ff206677">mem_cgroup_cancel_charge()</a> to cancel the transaction instead.</p>
<p>mem_cgroup_cancel_charge - cancel a page charge</p>
<p>: memcg to charge the page to : charge the page as compound or small page</p>
<p>Cancel a charge transaction started by <a class="el" href="memcontrol_8c.html#ad59db95e8ab6a953e567648e184d1233">mem_cgroup_try_charge()</a>.</p>
<p>mem_cgroup_uncharge - uncharge a page</p>
<p>Uncharge a page previously charged with <a class="el" href="memcontrol_8c.html#ad59db95e8ab6a953e567648e184d1233">mem_cgroup_try_charge()</a> and <a class="el" href="memcontrol_8c.html#a0426fb193d45505417c834375de18bf3">mem_cgroup_commit_charge()</a>.</p>
<p>soft_offline_page - Soft offline a page.</p>
<p>: flags. Same as <a class="el" href="memory-failure_8c.html#a2601bce571ed122f848164f1d8a89304">memory_failure()</a>.</p>
<p>Returns 0 on success, otherwise negated errno.</p>
<p>Soft offline a page, by migration or invalidation, without killing anything. This is for the case when a page is not corrupted yet (so it's still valid to access), but has had a number of corrected errors and is better taken out.</p>
<p>The actual policy on when to do that is maintained by user space.</p>
<p>This should never impact any application or cause data loss, however it might take some time.</p>
<p>This is not a 100% solution for all memory, but tries to be ``good enough'' for the majority of memory.</p>
<p>alloc_set_pte - setup new PTE entry for given page and add reverse page mapping. If needed, the fucntion allocates page table or use pre-allocated.</p>
<p>: fault environment : memcg to charge page (only for private mappings)</p>
<p>Caller must take care of unlocking vmf-&gt;ptl, if vmf-&gt;pte is non-NULL on return.</p>
<p>Target users are page handler itself and implementations of vm_ops-&gt;map_pages.</p>
<p>mpol_misplaced - check whether current page node is valid in policy</p>
<p>: vm area where page mapped : virtual address where page mapped</p>
<p>Lookup current policy node id for vma,addr and "compare to" page's node id.</p>
<p>Returns: -1 - not misplaced, page is in the right node node - node id where the page should be</p>
<p>Policy determination "mimics" alloc_page_vma(). Called from fault path where we know the vma and faulting address.</p>
<p>munlock_vma_page - munlock a vma page</p>
<p>returns the size of the page as a page mask (0 for normal page, HPAGE_PMD_NR - 1 for THP head page)</p>
<p>called from munlock()/munmap() path with page supposedly on the LRU. When we munlock a page, because the vma where we found the page is being munlock()ed or munmap()ed, we want to check whether other vmas hold the page locked so that we can leave it on the unevictable lru list and not bother vmscan with it. However, to walk the page's rmap list in <a class="el" href="rmap_8c.html#a7ef11e6c84b84e36017afa8714cb2377">try_to_munlock()</a> we must isolate the page from the LRU. If some other task has removed the page from the LRU, we won't be able to do that. So we clear the PageMlocked as we might not get another chance. If we can't isolate the page, we leave it for <a class="el" href="internal_8h.html#af1e9e30255520f222b4b4761bf018ac0">putback_lru_page()</a> and vmscan [<a class="el" href="rmap_8c.html#a81111cdf3621a2f26a915031cf1a3c29">page_referenced()</a>/try_to_unmap()] to deal with.</p>
<p>page_remove_rmap - take down pte mapping from a page</p>
<p>: uncharge the page as compound or small page</p>
<p>The caller needs to hold the pte lock.</p>
<p>slab_destroy - destroy and release all objects in a slab : cache pointer being destroyed</p>
<p>Destroy all the objs in a slab page, and release the mem back to the system. Before calling the slab page must have been unlinked from the cache. The <a class="el" href="structkmem__cache__node.html">kmem_cache_node</a> -&gt;list_lock is not held/needed.</p>
<p>deactivate_file_page - forcefully deactivate a file page</p>
<p>This function hints the VM that</p>
<p>mark_page_lazyfree - make an anon page lazyfree</p>
<p><a class="el" href="swap_8c.html#a32522ef0c1c8d91f602308a7f86c875d">mark_page_lazyfree()</a> moves</p>
<p>add_to_swap - allocate swap space for a page</p>
<p>Allocate swap space for the page and add the page to the swap cache. Caller needs to hold the page lock.</p>
<p>putback_lru_page - put previously isolated page onto appropriate LRU list</p>
<p>Add previously isolated</p>
<p>isolate_lru_page - tries to isolate a page from its LRU list</p>
<p>Isolates a</p>
<p>workingset_activation - note a page activation</p>
<p>obj_to_location - get (&lt;page&gt;, &lt;obj_idx&gt;) from encoded object value : the encoded object value</p>
<p>: object index</p>
<p>location_to_obj - get obj value encoded from (&lt;page&gt;, &lt;obj_idx&gt;)</p>
<p>: object index </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>

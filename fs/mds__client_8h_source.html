<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>linux/fs: ceph/mds_client.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">linux/fs
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('mds__client_8h_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">mds_client.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="mds__client_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/* SPDX-License-Identifier: GPL-2.0 */</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#ifndef _FS_CEPH_MDS_CLIENT_H</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#define _FS_CEPH_MDS_CLIENT_H</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;linux/completion.h&gt;</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;linux/kref.h&gt;</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;linux/list.h&gt;</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;linux/mutex.h&gt;</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;linux/rbtree.h&gt;</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;linux/spinlock.h&gt;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;linux/refcount.h&gt;</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;linux/utsname.h&gt;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;linux/ceph/types.h&gt;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;linux/ceph/messenger.h&gt;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;linux/ceph/mdsmap.h&gt;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;linux/ceph/auth.h&gt;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * Some lock dependencies:</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> * session-&gt;s_mutex</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> *         mdsc-&gt;mutex</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> *         mdsc-&gt;snap_rwsem</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> *         ci-&gt;i_ceph_lock</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> *                 mdsc-&gt;snap_flush_lock</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> *                 mdsc-&gt;cap_delay_lock</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="keyword">struct </span><a class="code" href="structceph__fs__client.html">ceph_fs_client</a>;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keyword">struct </span><a class="code" href="structceph__cap.html">ceph_cap</a>;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment"> * parsed info about a single inode.  pointers are into the encoded</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment"> * on-wire structures within the mds reply message payload.</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="structceph__mds__reply__info__in.html">   40</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structceph__mds__reply__info__in.html">ceph_mds_reply_info_in</a> {</div><div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="structceph__mds__reply__info__in.html#aa8ea4153d0ff2d57f06004b76dc2a618">   41</a></span>&#160;    <span class="keyword">struct </span>ceph_mds_reply_inode *<a class="code" href="structceph__mds__reply__info__in.html#aa8ea4153d0ff2d57f06004b76dc2a618">in</a>;</div><div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="structceph__mds__reply__info__in.html#af57f535f07457d27a16983806804cc59">   42</a></span>&#160;    <span class="keyword">struct </span>ceph_dir_layout <a class="code" href="structceph__mds__reply__info__in.html#af57f535f07457d27a16983806804cc59">dir_layout</a>;</div><div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="structceph__mds__reply__info__in.html#a40358c87145969792084d7153b2fb454">   43</a></span>&#160;    u32 <a class="code" href="structceph__mds__reply__info__in.html#a40358c87145969792084d7153b2fb454">symlink_len</a>;</div><div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="structceph__mds__reply__info__in.html#abf1cc02281746b870690f91f082d51db">   44</a></span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="structceph__mds__reply__info__in.html#abf1cc02281746b870690f91f082d51db">symlink</a>;</div><div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="structceph__mds__reply__info__in.html#acf0d01a7269875e631dbbd64136f0f55">   45</a></span>&#160;    u32 <a class="code" href="structceph__mds__reply__info__in.html#acf0d01a7269875e631dbbd64136f0f55">xattr_len</a>;</div><div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="structceph__mds__reply__info__in.html#abac184002317d1e13ad5a246b655874c">   46</a></span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="structceph__mds__reply__info__in.html#abac184002317d1e13ad5a246b655874c">xattr_data</a>;</div><div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="structceph__mds__reply__info__in.html#a62bf1b86100ee6bd74d29bde965d32c8">   47</a></span>&#160;    u64 <a class="code" href="structceph__mds__reply__info__in.html#a62bf1b86100ee6bd74d29bde965d32c8">inline_version</a>;</div><div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="structceph__mds__reply__info__in.html#a3c87409705ee619717698b835239b7e4">   48</a></span>&#160;    u32 <a class="code" href="structceph__mds__reply__info__in.html#a3c87409705ee619717698b835239b7e4">inline_len</a>;</div><div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="structceph__mds__reply__info__in.html#af9bba6d32f1db11c1579077a3b960a1d">   49</a></span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="structceph__mds__reply__info__in.html#af9bba6d32f1db11c1579077a3b960a1d">inline_data</a>;</div><div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="structceph__mds__reply__info__in.html#aa3cee84c95652bc3a27918d84370b1ac">   50</a></span>&#160;    u32 <a class="code" href="structceph__mds__reply__info__in.html#aa3cee84c95652bc3a27918d84370b1ac">pool_ns_len</a>;</div><div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="structceph__mds__reply__info__in.html#a0aceb5a2f49b154cab3ba3454b6c5b27">   51</a></span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="structceph__mds__reply__info__in.html#a0aceb5a2f49b154cab3ba3454b6c5b27">pool_ns_data</a>;</div><div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="structceph__mds__reply__info__in.html#a49070e31df9913954639d111d4e379cd">   52</a></span>&#160;    u64 <a class="code" href="structceph__mds__reply__info__in.html#a49070e31df9913954639d111d4e379cd">max_bytes</a>;</div><div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="structceph__mds__reply__info__in.html#aeef9c9a57ae0c20a6557be2672033761">   53</a></span>&#160;    u64 <a class="code" href="structceph__mds__reply__info__in.html#aeef9c9a57ae0c20a6557be2672033761">max_files</a>;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;};</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="structceph__mds__reply__dir__entry.html">   56</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structceph__mds__reply__dir__entry.html">ceph_mds_reply_dir_entry</a> {</div><div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="structceph__mds__reply__dir__entry.html#a7ab7438d7194dbc54d3341bbf2b06cd8">   57</a></span>&#160;    <span class="keywordtype">char</span>                          *<a class="code" href="structceph__mds__reply__dir__entry.html#a7ab7438d7194dbc54d3341bbf2b06cd8">name</a>;</div><div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="structceph__mds__reply__dir__entry.html#afe90d1c7bb8c4e2fadc00aa05ea96f51">   58</a></span>&#160;    u32                           <a class="code" href="structceph__mds__reply__dir__entry.html#afe90d1c7bb8c4e2fadc00aa05ea96f51">name_len</a>;</div><div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="structceph__mds__reply__dir__entry.html#a3810f7b2a83b1c08122d8f6e21adca44">   59</a></span>&#160;    <span class="keyword">struct </span>ceph_mds_reply_lease   *<a class="code" href="structceph__mds__reply__dir__entry.html#a3810f7b2a83b1c08122d8f6e21adca44">lease</a>;</div><div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="structceph__mds__reply__dir__entry.html#a0021d2d09485259e576dd67ff4547edb">   60</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structceph__mds__reply__info__in.html">ceph_mds_reply_info_in</a> <a class="code" href="summary_8h.html#a63c41f9614ee9a4e1beb75eabad72f22">inode</a>;</div><div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="structceph__mds__reply__dir__entry.html#ae0b8b6f42d26f4bba5f40a842a61876f">   61</a></span>&#160;    loff_t                <a class="code" href="structceph__mds__reply__dir__entry.html#ae0b8b6f42d26f4bba5f40a842a61876f">offset</a>;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;};</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"> * parsed info about an mds reply, including information about</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment"> * either: 1) the target inode and/or its parent directory and dentry,</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment"> * and directory contents (for readdir results), or</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment"> * 2) the file range lock info (for fcntl F_GETLK results).</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="structceph__mds__reply__info__parsed.html">   70</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structceph__mds__reply__info__parsed.html">ceph_mds_reply_info_parsed</a> {</div><div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="structceph__mds__reply__info__parsed.html#a1bf92d60bbc5283b66f682cbf700ed67">   71</a></span>&#160;    <span class="keyword">struct </span>ceph_mds_reply_head    *<a class="code" href="structceph__mds__reply__info__parsed.html#a1bf92d60bbc5283b66f682cbf700ed67">head</a>;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="comment">/* trace */</span></div><div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="structceph__mds__reply__info__parsed.html#a6867f0a6b1141cd890a066f9575afecc">   74</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structceph__mds__reply__info__in.html">ceph_mds_reply_info_in</a> diri, targeti;</div><div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="structceph__mds__reply__info__parsed.html#a4dc132076a255af17d9eede0eb0149ea">   75</a></span>&#160;    <span class="keyword">struct </span>ceph_mds_reply_dirfrag *<a class="code" href="structceph__mds__reply__info__parsed.html#a4dc132076a255af17d9eede0eb0149ea">dirfrag</a>;</div><div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="structceph__mds__reply__info__parsed.html#adb8cac6ea86630af48fcd744b1792873">   76</a></span>&#160;    <span class="keywordtype">char</span>                          *<a class="code" href="structceph__mds__reply__info__parsed.html#adb8cac6ea86630af48fcd744b1792873">dname</a>;</div><div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="structceph__mds__reply__info__parsed.html#a222f0e9c3223346258010276c172cd11">   77</a></span>&#160;    u32                           <a class="code" href="structceph__mds__reply__info__parsed.html#a222f0e9c3223346258010276c172cd11">dname_len</a>;</div><div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="structceph__mds__reply__info__parsed.html#a33eb4e3044da14cd1b6e23f36206a180">   78</a></span>&#160;    <span class="keyword">struct </span>ceph_mds_reply_lease   *<a class="code" href="structceph__mds__reply__info__parsed.html#a33eb4e3044da14cd1b6e23f36206a180">dlease</a>;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="comment">/* extra */</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keyword">union </span>{</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="comment">/* for fcntl F_GETLK results */</span></div><div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="structceph__mds__reply__info__parsed.html#a5bd158cd336342d4ca93b80ad1aa94b4">   83</a></span>&#160;        <span class="keyword">struct </span>ceph_filelock *<a class="code" href="structceph__mds__reply__info__parsed.html#a5bd158cd336342d4ca93b80ad1aa94b4">filelock_reply</a>;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <span class="comment">/* for readdir results */</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <span class="keyword">struct </span>{</div><div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="structceph__mds__reply__info__parsed.html#a4734e05e70d5a31534b5e258bd7d84c6">   87</a></span>&#160;            <span class="keyword">struct </span>ceph_mds_reply_dirfrag *<a class="code" href="structceph__mds__reply__info__parsed.html#a4734e05e70d5a31534b5e258bd7d84c6">dir_dir</a>;</div><div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="structceph__mds__reply__info__parsed.html#a6d2ab830d4e8a84f3bf094c57f89e871">   88</a></span>&#160;            <span class="keywordtype">size_t</span>                <a class="code" href="structceph__mds__reply__info__parsed.html#a6d2ab830d4e8a84f3bf094c57f89e871">dir_buf_size</a>;</div><div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="structceph__mds__reply__info__parsed.html#a0a2cdd54780ad50b3ef5c3a883c6a0fc">   89</a></span>&#160;            <span class="keywordtype">int</span>                           <a class="code" href="structceph__mds__reply__info__parsed.html#a0a2cdd54780ad50b3ef5c3a883c6a0fc">dir_nr</a>;</div><div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="structceph__mds__reply__info__parsed.html#a66a1784aa227b19a946b68fac76eb6c2">   90</a></span>&#160;            <span class="keywordtype">bool</span>                  <a class="code" href="structceph__mds__reply__info__parsed.html#a66a1784aa227b19a946b68fac76eb6c2">dir_end</a>;</div><div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="structceph__mds__reply__info__parsed.html#a8631de13fc8262e4f43c492ceb8be802">   91</a></span>&#160;            <span class="keywordtype">bool</span>                  <a class="code" href="structceph__mds__reply__info__parsed.html#a8631de13fc8262e4f43c492ceb8be802">dir_complete</a>;</div><div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="structceph__mds__reply__info__parsed.html#a28619d903db7ba822afe3560d82fa618">   92</a></span>&#160;            <span class="keywordtype">bool</span>                  <a class="code" href="structceph__mds__reply__info__parsed.html#a28619d903db7ba822afe3560d82fa618">hash_order</a>;</div><div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="structceph__mds__reply__info__parsed.html#a81eb4109e2c3da46d18ea7912d7e2e5f">   93</a></span>&#160;            <span class="keywordtype">bool</span>                  <a class="code" href="structceph__mds__reply__info__parsed.html#a81eb4109e2c3da46d18ea7912d7e2e5f">offset_hash</a>;</div><div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="structceph__mds__reply__info__parsed.html#a6fe25d1c6d32f51f32c01db36d5292a3">   94</a></span>&#160;            <span class="keyword">struct </span><a class="code" href="structceph__mds__reply__dir__entry.html">ceph_mds_reply_dir_entry</a>  *<a class="code" href="structceph__mds__reply__info__parsed.html#a6fe25d1c6d32f51f32c01db36d5292a3">dir_entries</a>;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        };</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="comment">/* for create results */</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="keyword">struct </span>{</div><div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="structceph__mds__reply__info__parsed.html#ae9e6f292b980f63d2e70b14fbc76bc41">   99</a></span>&#160;            <span class="keywordtype">bool</span> <a class="code" href="structceph__mds__reply__info__parsed.html#ae9e6f292b980f63d2e70b14fbc76bc41">has_create_ino</a>;</div><div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="structceph__mds__reply__info__parsed.html#ad75996244b2e793c1d9ded98497f3913">  100</a></span>&#160;            u64 <a class="code" href="structceph__mds__reply__info__parsed.html#ad75996244b2e793c1d9ded98497f3913">ino</a>;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        };</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    };</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="comment">/* encoded blob describing snapshot contexts for certain</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">       operations (e.g., open) */</span></div><div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="structceph__mds__reply__info__parsed.html#a4b109ebacabc730da87bde0a8020e790">  106</a></span>&#160;    <span class="keywordtype">void</span> *<a class="code" href="structceph__mds__reply__info__parsed.html#a4b109ebacabc730da87bde0a8020e790">snapblob</a>;</div><div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="structceph__mds__reply__info__parsed.html#a46c94b86d905eeb339942ed3fca4a193">  107</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structceph__mds__reply__info__parsed.html#a46c94b86d905eeb339942ed3fca4a193">snapblob_len</a>;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;};</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment"> * cap releases are batched and sent to the MDS en masse.</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment"> * Account for per-message overhead of mds_cap_release header</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment"> * and __le32 for osd epoch barrier trailing field.</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="mds__client_8h.html#ae3c5fac875f1cce05ebc71ec61df1a51">  117</a></span>&#160;<span class="preprocessor">#define CEPH_CAPS_PER_RELEASE ((PAGE_SIZE - sizeof(u32) -       \</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="preprocessor">                sizeof(struct ceph_mds_cap_release)) /  \</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="preprocessor">                    sizeof(struct ceph_mds_cap_item))</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment"> * state associated with each MDS&lt;-&gt;client session</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="keyword">enum</span> {</div><div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="mds__client_8h.html#a900dca9b26de42491763226e12dcd47ba0bf7c78e1a656efc5d06702da71f8ae7">  126</a></span>&#160;    <a class="code" href="mds__client_8h.html#a900dca9b26de42491763226e12dcd47ba0bf7c78e1a656efc5d06702da71f8ae7">CEPH_MDS_SESSION_NEW</a> = 1,</div><div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="mds__client_8h.html#a900dca9b26de42491763226e12dcd47bafd1d1e9f79fa2b03e01dc7d79d6fe1e2">  127</a></span>&#160;    <a class="code" href="mds__client_8h.html#a900dca9b26de42491763226e12dcd47bafd1d1e9f79fa2b03e01dc7d79d6fe1e2">CEPH_MDS_SESSION_OPENING</a> = 2,</div><div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="mds__client_8h.html#a900dca9b26de42491763226e12dcd47ba1a5a975815d8dc279b719876e95062d9">  128</a></span>&#160;    <a class="code" href="mds__client_8h.html#a900dca9b26de42491763226e12dcd47ba1a5a975815d8dc279b719876e95062d9">CEPH_MDS_SESSION_OPEN</a> = 3,</div><div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="mds__client_8h.html#a900dca9b26de42491763226e12dcd47ba321b08917eff83893ecadf8df673a17f">  129</a></span>&#160;    <a class="code" href="mds__client_8h.html#a900dca9b26de42491763226e12dcd47ba321b08917eff83893ecadf8df673a17f">CEPH_MDS_SESSION_HUNG</a> = 4,</div><div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="mds__client_8h.html#a900dca9b26de42491763226e12dcd47ba7e8f59bef2dc796f443b6db566246441">  130</a></span>&#160;    <a class="code" href="mds__client_8h.html#a900dca9b26de42491763226e12dcd47ba7e8f59bef2dc796f443b6db566246441">CEPH_MDS_SESSION_CLOSING</a> = 5,</div><div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="mds__client_8h.html#a900dca9b26de42491763226e12dcd47bab44086985f20fcce6f77a08d95b21038">  131</a></span>&#160;    <a class="code" href="mds__client_8h.html#a900dca9b26de42491763226e12dcd47bab44086985f20fcce6f77a08d95b21038">CEPH_MDS_SESSION_RESTARTING</a> = 6,</div><div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="mds__client_8h.html#a900dca9b26de42491763226e12dcd47bac924b53ec580e26dfd439c9fee728d2c">  132</a></span>&#160;    <a class="code" href="mds__client_8h.html#a900dca9b26de42491763226e12dcd47bac924b53ec580e26dfd439c9fee728d2c">CEPH_MDS_SESSION_RECONNECTING</a> = 7,</div><div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="mds__client_8h.html#a900dca9b26de42491763226e12dcd47baf61590c570680cbe24551b89e5f5f57a">  133</a></span>&#160;    <a class="code" href="mds__client_8h.html#a900dca9b26de42491763226e12dcd47baf61590c570680cbe24551b89e5f5f57a">CEPH_MDS_SESSION_REJECTED</a> = 8,</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;};</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="structceph__mds__session.html">  136</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structceph__mds__session.html">ceph_mds_session</a> {</div><div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="structceph__mds__session.html#a3c7eb66ad272276128d35532b751b61b">  137</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structceph__mds__client.html">ceph_mds_client</a> *<a class="code" href="structceph__mds__session.html#a3c7eb66ad272276128d35532b751b61b">s_mdsc</a>;</div><div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="structceph__mds__session.html#afef365279a404d9990cd01d5b60008d2">  138</a></span>&#160;    <span class="keywordtype">int</span>               <a class="code" href="structceph__mds__session.html#afef365279a404d9990cd01d5b60008d2">s_mds</a>;</div><div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="structceph__mds__session.html#a9a88c8dee8dfb06937d0df7e4f956b0c">  139</a></span>&#160;    <span class="keywordtype">int</span>               <a class="code" href="structceph__mds__session.html#a9a88c8dee8dfb06937d0df7e4f956b0c">s_state</a>;</div><div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="structceph__mds__session.html#aea3107b7204f4cde80d29b515e40df80">  140</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>     <a class="code" href="structceph__mds__session.html#aea3107b7204f4cde80d29b515e40df80">s_ttl</a>;      <span class="comment">/* time until mds kills us */</span></div><div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="structceph__mds__session.html#a9fb242041fa2c0e7b602a5b3c09e4943">  141</a></span>&#160;    u64               <a class="code" href="structceph__mds__session.html#a9fb242041fa2c0e7b602a5b3c09e4943">s_seq</a>;      <span class="comment">/* incoming msg seq # */</span></div><div class="line"><a name="l00142"></a><span class="lineno"><a class="line" href="structceph__mds__session.html#a4eff11741b8927f3de6f8375b6f03d0d">  142</a></span>&#160;    <span class="keyword">struct </span>mutex      s_mutex;    <span class="comment">/* serialize session messages */</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div><div class="line"><a name="l00144"></a><span class="lineno"><a class="line" href="structceph__mds__session.html#ad32e326dfcd2f6dc122ce5aa45280676">  144</a></span>&#160;    <span class="keyword">struct </span>ceph_connection s_con;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="structceph__mds__session.html#a31393bab0f271f737283a85a9b610e5d">  146</a></span>&#160;    <span class="keyword">struct </span>ceph_auth_handshake s_auth;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="comment">/* protected by s_gen_ttl_lock */</span></div><div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="structceph__mds__session.html#a060f315fabf7d120f1505eef25973377">  149</a></span>&#160;    spinlock_t        <a class="code" href="structceph__mds__session.html#a060f315fabf7d120f1505eef25973377">s_gen_ttl_lock</a>;</div><div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="structceph__mds__session.html#a5291a58df3a00e0faa9ec3c7d740ff32">  150</a></span>&#160;    u32               <a class="code" href="structceph__mds__session.html#a5291a58df3a00e0faa9ec3c7d740ff32">s_cap_gen</a>;  <span class="comment">/* inc each time we get mds stale msg */</span></div><div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="structceph__mds__session.html#aa849b24c488ca4ba4fc31156ba1d67bb">  151</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>     <a class="code" href="structceph__mds__session.html#aa849b24c488ca4ba4fc31156ba1d67bb">s_cap_ttl</a>;  <span class="comment">/* when session caps expire */</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="comment">/* protected by s_cap_lock */</span></div><div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="structceph__mds__session.html#a90f86a847bba1c9fb7744701f97766cf">  154</a></span>&#160;    spinlock_t        <a class="code" href="structceph__mds__session.html#a90f86a847bba1c9fb7744701f97766cf">s_cap_lock</a>;</div><div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="structceph__mds__session.html#ad881af5d81af0254051246df134c5293">  155</a></span>&#160;    <span class="keyword">struct </span>list_head  s_caps;     <span class="comment">/* all caps issued by this session */</span></div><div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="structceph__mds__session.html#ad1c537053fc7cebfa2c98800d8088232">  156</a></span>&#160;    <span class="keywordtype">int</span>               s_nr_caps, <a class="code" href="structceph__mds__session.html#ad1c537053fc7cebfa2c98800d8088232">s_trim_caps</a>;</div><div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="structceph__mds__session.html#acd33c689a6b78b9821bc08bac18e812e">  157</a></span>&#160;    <span class="keywordtype">int</span>               <a class="code" href="structceph__mds__session.html#acd33c689a6b78b9821bc08bac18e812e">s_num_cap_releases</a>;</div><div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="structceph__mds__session.html#ae15cdab47a66fceb7e6806d9e072144b">  158</a></span>&#160;    <span class="keywordtype">int</span>       <a class="code" href="structceph__mds__session.html#ae15cdab47a66fceb7e6806d9e072144b">s_cap_reconnect</a>;</div><div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="structceph__mds__session.html#a009ce5d4f1448c973ec510e573cf1a77">  159</a></span>&#160;    <span class="keywordtype">int</span>       <a class="code" href="structceph__mds__session.html#a009ce5d4f1448c973ec510e573cf1a77">s_readonly</a>;</div><div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="structceph__mds__session.html#a28e00acf1bd4f538d7d5248962d08301">  160</a></span>&#160;    <span class="keyword">struct </span>list_head  s_cap_releases; <span class="comment">/* waiting cap_release messages */</span></div><div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="structceph__mds__session.html#a31469762f12e9a68e7c11034704be72d">  161</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structceph__cap.html">ceph_cap</a>  *<a class="code" href="structceph__mds__session.html#a31469762f12e9a68e7c11034704be72d">s_cap_iterator</a>;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="comment">/* protected by mutex */</span></div><div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="structceph__mds__session.html#ae7b3cb101b051ac22f5026f4a2770d8d">  164</a></span>&#160;    <span class="keyword">struct </span>list_head  s_cap_flushing;     <span class="comment">/* inodes w/ flushing caps */</span></div><div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="structceph__mds__session.html#aa10ab90d7210face2ecb40faf26a5d35">  165</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>     <a class="code" href="structceph__mds__session.html#aa10ab90d7210face2ecb40faf26a5d35">s_renew_requested</a>; <span class="comment">/* last time we sent a renew req */</span></div><div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="structceph__mds__session.html#a6f87017c1d448995fb863e6e38d32f66">  166</a></span>&#160;    u64               <a class="code" href="structceph__mds__session.html#a6f87017c1d448995fb863e6e38d32f66">s_renew_seq</a>;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="structceph__mds__session.html#a6931e301fae2fabf8cd0a467858d62f8">  168</a></span>&#160;    refcount_t          <a class="code" href="structceph__mds__session.html#a6931e301fae2fabf8cd0a467858d62f8">s_ref</a>;</div><div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="structceph__mds__session.html#aab70c41b803fde4e961360460ac851cc">  169</a></span>&#160;    <span class="keyword">struct </span>list_head  s_waiting;  <span class="comment">/* waiting requests */</span></div><div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="structceph__mds__session.html#ab41ecfbd274906e99385336168e6e00b">  170</a></span>&#160;    <span class="keyword">struct </span>list_head  s_unsafe;   <span class="comment">/* unsafe requests */</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;};</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment"> * modes of choosing which MDS to send a request to</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="keyword">enum</span> {</div><div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="mds__client_8h.html#a1be3860693af99a6c1da72580097294ca983f42844c352aa315c4504e9d8542b4">  177</a></span>&#160;    <a class="code" href="mds__client_8h.html#a1be3860693af99a6c1da72580097294ca983f42844c352aa315c4504e9d8542b4">USE_ANY_MDS</a>,</div><div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="mds__client_8h.html#a1be3860693af99a6c1da72580097294ca394f7a1179eda0e382ae488ed6286602">  178</a></span>&#160;    <a class="code" href="mds__client_8h.html#a1be3860693af99a6c1da72580097294ca394f7a1179eda0e382ae488ed6286602">USE_RANDOM_MDS</a>,</div><div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="mds__client_8h.html#a1be3860693af99a6c1da72580097294ca10f13f44768cd40fdc37fa3ba87028bb">  179</a></span>&#160;    <a class="code" href="mds__client_8h.html#a1be3860693af99a6c1da72580097294ca10f13f44768cd40fdc37fa3ba87028bb">USE_AUTH_MDS</a>,   <span class="comment">/* prefer authoritative mds for this metadata item */</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;};</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="keyword">struct </span><a class="code" href="structceph__mds__request.html">ceph_mds_request</a>;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="keyword">struct </span><a class="code" href="structceph__mds__client.html">ceph_mds_client</a>;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment"> * request completion callback</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="mds__client_8h.html#a52c77d28ba4631b096096ae4d07334b2">  188</a></span>&#160;<span class="keyword">typedef</span> void (*<a class="code" href="mds__client_8h.html#a52c77d28ba4631b096096ae4d07334b2">ceph_mds_request_callback_t</a>) (<span class="keyword">struct </span><a class="code" href="structceph__mds__client.html">ceph_mds_client</a> *mdsc,</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                         <span class="keyword">struct </span><a class="code" href="structceph__mds__request.html">ceph_mds_request</a> *req);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment"> * wait for request completion callback</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="mds__client_8h.html#a57011cb807a800acece931f1c2940df8">  193</a></span>&#160;<span class="keyword">typedef</span> int (*<a class="code" href="mds__client_8h.html#a57011cb807a800acece931f1c2940df8">ceph_mds_request_wait_callback_t</a>) (<span class="keyword">struct </span><a class="code" href="structceph__mds__client.html">ceph_mds_client</a> *mdsc,</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                         <span class="keyword">struct </span><a class="code" href="structceph__mds__request.html">ceph_mds_request</a> *req);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment"> * an in-flight mds request</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="structceph__mds__request.html">  199</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structceph__mds__request.html">ceph_mds_request</a> {</div><div class="line"><a name="l00200"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#a3a8d7cd9a1792280239f445566868fb1">  200</a></span>&#160;    u64 <a class="code" href="structceph__mds__request.html#a3a8d7cd9a1792280239f445566868fb1">r_tid</a>;                   <span class="comment">/* transaction id */</span></div><div class="line"><a name="l00201"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#a303127e986182e95501db0ccdee8ce02">  201</a></span>&#160;    <span class="keyword">struct </span>rb_node r_node;</div><div class="line"><a name="l00202"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#aca0d0eace5bce00cefd75de70bf09eb9">  202</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structceph__mds__client.html">ceph_mds_client</a> *<a class="code" href="structceph__mds__request.html#aca0d0eace5bce00cefd75de70bf09eb9">r_mdsc</a>;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#ac5058e6fbbc9373cfb74bd5922feb400">  204</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structceph__mds__request.html#ac5058e6fbbc9373cfb74bd5922feb400">r_op</a>;                    <span class="comment">/* mds op code */</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="comment">/* operation on what? */</span></div><div class="line"><a name="l00207"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#ab63dc64357a11ff07fb64a9feb88a5e7">  207</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="summary_8h.html#a63c41f9614ee9a4e1beb75eabad72f22">inode</a> *<a class="code" href="structceph__mds__request.html#ab63dc64357a11ff07fb64a9feb88a5e7">r_inode</a>;              <span class="comment">/* arg1 */</span></div><div class="line"><a name="l00208"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#ac3059e7e7b354e20449f763d66e63b45">  208</a></span>&#160;    <span class="keyword">struct </span>dentry *<a class="code" href="structceph__mds__request.html#ac3059e7e7b354e20449f763d66e63b45">r_dentry</a>;            <span class="comment">/* arg1 */</span></div><div class="line"><a name="l00209"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#ac31b1938365db3ae94506a7fcdf9e6a5">  209</a></span>&#160;    <span class="keyword">struct </span>dentry *<a class="code" href="structceph__mds__request.html#ac31b1938365db3ae94506a7fcdf9e6a5">r_old_dentry</a>;        <span class="comment">/* arg2: rename from or link from */</span></div><div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#aff23696c7b324e84cd9f4541da1737f1">  210</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="summary_8h.html#a63c41f9614ee9a4e1beb75eabad72f22">inode</a> *<a class="code" href="structceph__mds__request.html#aff23696c7b324e84cd9f4541da1737f1">r_old_dentry_dir</a>;     <span class="comment">/* arg2: old dentry&#39;s parent dir */</span></div><div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#ad02f9fa5c684617ce1abb08088b8aced">  211</a></span>&#160;    <span class="keywordtype">char</span> *r_path1, *<a class="code" href="structceph__mds__request.html#ad02f9fa5c684617ce1abb08088b8aced">r_path2</a>;</div><div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#a8d007a8d05181f0f0095245aa30ead56">  212</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="ceph_2super_8h.html#ab9776e3e695e4d6214fd8061a0ab43cb">ceph_vino</a> r_ino1, r_ino2;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#ab3fffaeb4c923cbf323cd0dc5059990b">  214</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="summary_8h.html#a63c41f9614ee9a4e1beb75eabad72f22">inode</a> *<a class="code" href="structceph__mds__request.html#ab3fffaeb4c923cbf323cd0dc5059990b">r_parent</a>;         <span class="comment">/* parent dir inode */</span></div><div class="line"><a name="l00215"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#af66ade2ec05b4c09b24ec33456c2ea87">  215</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="summary_8h.html#a63c41f9614ee9a4e1beb75eabad72f22">inode</a> *<a class="code" href="structceph__mds__request.html#af66ade2ec05b4c09b24ec33456c2ea87">r_target_inode</a>;       <span class="comment">/* resulting inode */</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="mds__client_8h.html#a66e8fd3082f2c1ee5b093ea7c6463597">  217</a></span>&#160;<span class="preprocessor">#define CEPH_MDS_R_DIRECT_IS_HASH   (1) </span><span class="comment">/* r_direct_hash is valid */</span><span class="preprocessor"></span></div><div class="line"><a name="l00218"></a><span class="lineno"><a class="line" href="mds__client_8h.html#aa1342fdd1f03b7a3dbb0b5322a976f90">  218</a></span>&#160;<span class="preprocessor">#define CEPH_MDS_R_ABORTED      (2) </span><span class="comment">/* call was aborted */</span><span class="preprocessor"></span></div><div class="line"><a name="l00219"></a><span class="lineno"><a class="line" href="mds__client_8h.html#a8e2f183f4354a8220bb9fdbb6895f85b">  219</a></span>&#160;<span class="preprocessor">#define CEPH_MDS_R_GOT_UNSAFE       (3) </span><span class="comment">/* got an unsafe reply */</span><span class="preprocessor"></span></div><div class="line"><a name="l00220"></a><span class="lineno"><a class="line" href="mds__client_8h.html#a81cd1d48d38d5707d56edb02f2d0e97f">  220</a></span>&#160;<span class="preprocessor">#define CEPH_MDS_R_GOT_SAFE     (4) </span><span class="comment">/* got a safe reply */</span><span class="preprocessor"></span></div><div class="line"><a name="l00221"></a><span class="lineno"><a class="line" href="mds__client_8h.html#a5ffeef4c6ff12c9759bb824558930ad4">  221</a></span>&#160;<span class="preprocessor">#define CEPH_MDS_R_GOT_RESULT       (5) </span><span class="comment">/* got a result */</span><span class="preprocessor"></span></div><div class="line"><a name="l00222"></a><span class="lineno"><a class="line" href="mds__client_8h.html#a6ce164a7f4acfe944b70788231315d3b">  222</a></span>&#160;<span class="preprocessor">#define CEPH_MDS_R_DID_PREPOPULATE  (6) </span><span class="comment">/* prepopulated readdir */</span><span class="preprocessor"></span></div><div class="line"><a name="l00223"></a><span class="lineno"><a class="line" href="mds__client_8h.html#ab57604d424944db1bb0943bccc8b2406">  223</a></span>&#160;<span class="preprocessor">#define CEPH_MDS_R_PARENT_LOCKED    (7) </span><span class="comment">/* is r_parent-&gt;i_rwsem wlocked? */</span><span class="preprocessor"></span></div><div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#aaea76217ec3a752b2a8d5aadb90ac24e">  224</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>   <a class="code" href="structceph__mds__request.html#aaea76217ec3a752b2a8d5aadb90ac24e">r_req_flags</a>;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#a72a29f56c558530b046359db5cded5c6">  226</a></span>&#160;    <span class="keyword">struct </span>mutex r_fill_mutex;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#ae23bfb80e211d084927e725f6ef7c74d">  228</a></span>&#160;    <span class="keyword">union </span>ceph_mds_request_args r_args;</div><div class="line"><a name="l00229"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#a692efdf4e92d74f8d9e090f8d2d32efa">  229</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structceph__mds__request.html#a692efdf4e92d74f8d9e090f8d2d32efa">r_fmode</a>;        <span class="comment">/* file mode, if expecting cap */</span></div><div class="line"><a name="l00230"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#aed1e25a5cdc5bf3b747449e548a1e1e2">  230</a></span>&#160;    kuid_t <a class="code" href="structceph__mds__request.html#aed1e25a5cdc5bf3b747449e548a1e1e2">r_uid</a>;</div><div class="line"><a name="l00231"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#a1bde526a9d2619f6390ec7b0e345bbc5">  231</a></span>&#160;    kgid_t <a class="code" href="structceph__mds__request.html#a1bde526a9d2619f6390ec7b0e345bbc5">r_gid</a>;</div><div class="line"><a name="l00232"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#a2cedc21bd7e2fb4eb434233739d64b73">  232</a></span>&#160;    <span class="keyword">struct </span>timespec r_stamp;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="comment">/* for choosing which mds to send this request to */</span></div><div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#ac06c0535175f9329d0eb126b40ee2e08">  235</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structceph__mds__request.html#ac06c0535175f9329d0eb126b40ee2e08">r_direct_mode</a>;</div><div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#a5a6814337176cf264489abd70289d8a8">  236</a></span>&#160;    u32 <a class="code" href="structceph__mds__request.html#a5a6814337176cf264489abd70289d8a8">r_direct_hash</a>;      <span class="comment">/* choose dir frag based on this dentry hash */</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="comment">/* data payload is used for xattr ops */</span></div><div class="line"><a name="l00239"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#aa7efc31e506f0ebd1f0787126f29038c">  239</a></span>&#160;    <span class="keyword">struct </span>ceph_pagelist *<a class="code" href="structceph__mds__request.html#aa7efc31e506f0ebd1f0787126f29038c">r_pagelist</a>;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="comment">/* what caps shall we drop? */</span></div><div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#aedc91b92419a8df3e36060f7f14de77c">  242</a></span>&#160;    <span class="keywordtype">int</span> r_inode_drop, <a class="code" href="structceph__mds__request.html#aedc91b92419a8df3e36060f7f14de77c">r_inode_unless</a>;</div><div class="line"><a name="l00243"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#aa07cbe032d554bbc952cb144417c8d0c">  243</a></span>&#160;    <span class="keywordtype">int</span> r_dentry_drop, <a class="code" href="structceph__mds__request.html#aa07cbe032d554bbc952cb144417c8d0c">r_dentry_unless</a>;</div><div class="line"><a name="l00244"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#abd3faa22b8ceaf4ae92f754ce81a5221">  244</a></span>&#160;    <span class="keywordtype">int</span> r_old_dentry_drop, <a class="code" href="structceph__mds__request.html#abd3faa22b8ceaf4ae92f754ce81a5221">r_old_dentry_unless</a>;</div><div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#a1e9a3b63a4337945ffc4a189611836bf">  245</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="summary_8h.html#a63c41f9614ee9a4e1beb75eabad72f22">inode</a> *<a class="code" href="structceph__mds__request.html#a1e9a3b63a4337945ffc4a189611836bf">r_old_inode</a>;</div><div class="line"><a name="l00246"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#a654d3cac04464dc2e1c40c6412149dfc">  246</a></span>&#160;    <span class="keywordtype">int</span> r_old_inode_drop, <a class="code" href="structceph__mds__request.html#a654d3cac04464dc2e1c40c6412149dfc">r_old_inode_unless</a>;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#a19b8f9f9a0100cfa70a0da952dc2d6dc">  248</a></span>&#160;    <span class="keyword">struct </span>ceph_msg  *<a class="code" href="structceph__mds__request.html#a19b8f9f9a0100cfa70a0da952dc2d6dc">r_request</a>;  <span class="comment">/* original request */</span></div><div class="line"><a name="l00249"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#ad9214a618cd46d77318323ac298c400d">  249</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structceph__mds__request.html#ad9214a618cd46d77318323ac298c400d">r_request_release_offset</a>;</div><div class="line"><a name="l00250"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#ab50da71b1525e3fff44cb0cae440c308">  250</a></span>&#160;    <span class="keyword">struct </span>ceph_msg  *<a class="code" href="structceph__mds__request.html#ab50da71b1525e3fff44cb0cae440c308">r_reply</a>;</div><div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#aaeb3a68e7e3affe5ccfd10bc62502685">  251</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structceph__mds__reply__info__parsed.html">ceph_mds_reply_info_parsed</a> r_reply_info;</div><div class="line"><a name="l00252"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#a268c3eb0a59837cd8d91b905cf3381bd">  252</a></span>&#160;    <span class="keyword">struct </span>page *<a class="code" href="structceph__mds__request.html#a268c3eb0a59837cd8d91b905cf3381bd">r_locked_page</a>;</div><div class="line"><a name="l00253"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#afa1b196d64eb848d3806100a9583bc68">  253</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structceph__mds__request.html#afa1b196d64eb848d3806100a9583bc68">r_err</a>;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div><div class="line"><a name="l00255"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#af673a84b0a79290b7f46409eeae4b23c">  255</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="structceph__mds__request.html#af673a84b0a79290b7f46409eeae4b23c">r_timeout</a>;  <span class="comment">/* optional.  jiffies, 0 is &quot;wait forever&quot; */</span></div><div class="line"><a name="l00256"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#a4b89f620269aef96fce66fd0c1684149">  256</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="structceph__mds__request.html#a4b89f620269aef96fce66fd0c1684149">r_started</a>;  <span class="comment">/* start time to measure timeout against */</span></div><div class="line"><a name="l00257"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#a361b425c093046a592661c435d9a0789">  257</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="structceph__mds__request.html#a361b425c093046a592661c435d9a0789">r_request_started</a>; <span class="comment">/* start time for mds request only,</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">                        used to measure lease durations */</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="comment">/* link unsafe requests to parent directory, for fsync */</span></div><div class="line"><a name="l00261"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#a88c0daf006d27a53fc45665c7c4fc1e0">  261</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="summary_8h.html#a63c41f9614ee9a4e1beb75eabad72f22">inode</a>    *<a class="code" href="structceph__mds__request.html#a88c0daf006d27a53fc45665c7c4fc1e0">r_unsafe_dir</a>;</div><div class="line"><a name="l00262"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#a63fdb4c7f85a7916aa61ecc768d9506b">  262</a></span>&#160;    <span class="keyword">struct </span>list_head r_unsafe_dir_item;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="comment">/* unsafe requests that modify the target inode */</span></div><div class="line"><a name="l00265"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#a467b7f8cd478bf141b8254dd3df6c5f3">  265</a></span>&#160;    <span class="keyword">struct </span>list_head r_unsafe_target_item;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div><div class="line"><a name="l00267"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#ae5402d425887506a00213ee9f89b1bc0">  267</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structceph__mds__session.html">ceph_mds_session</a> *<a class="code" href="structceph__mds__request.html#ae5402d425887506a00213ee9f89b1bc0">r_session</a>;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div><div class="line"><a name="l00269"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#aa4fab7de038a03ea4688810a030804da">  269</a></span>&#160;    <span class="keywordtype">int</span>               <a class="code" href="structceph__mds__request.html#aa4fab7de038a03ea4688810a030804da">r_attempts</a>;   <span class="comment">/* resend attempts */</span></div><div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#aab9898066cc133b9062b1472c7fe2388">  270</a></span>&#160;    <span class="keywordtype">int</span>               <a class="code" href="structceph__mds__request.html#aab9898066cc133b9062b1472c7fe2388">r_num_fwd</a>;    <span class="comment">/* number of forward attempts */</span></div><div class="line"><a name="l00271"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#a292a086c82ea778e67dafb02c155c34b">  271</a></span>&#160;    <span class="keywordtype">int</span>               <a class="code" href="structceph__mds__request.html#a292a086c82ea778e67dafb02c155c34b">r_resend_mds</a>; <span class="comment">/* mds to resend to next, if any*/</span></div><div class="line"><a name="l00272"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#ae28912d53e7f304eec84ef972458ff5f">  272</a></span>&#160;    u32               <a class="code" href="structceph__mds__request.html#ae28912d53e7f304eec84ef972458ff5f">r_sent_on_mseq</a>; <span class="comment">/* cap mseq request was sent at*/</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#ae83f6fd728b4384cc26936a596438324">  274</a></span>&#160;    <span class="keyword">struct </span>kref       r_kref;</div><div class="line"><a name="l00275"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#a4b18044a1ca7402a0e0bb65f75f6c4c3">  275</a></span>&#160;    <span class="keyword">struct </span>list_head  r_wait;</div><div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#a0ee870bd56711a1011ca7c40a925018d">  276</a></span>&#160;    <span class="keyword">struct </span>completion r_completion;</div><div class="line"><a name="l00277"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#aec43552a31b09d7ddb85296a68cc34f4">  277</a></span>&#160;    <span class="keyword">struct </span>completion r_safe_completion;</div><div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#adf7d58fdb2e1587d71aa43105d24cda1">  278</a></span>&#160;    <a class="code" href="mds__client_8h.html#a52c77d28ba4631b096096ae4d07334b2">ceph_mds_request_callback_t</a> <a class="code" href="structceph__mds__request.html#adf7d58fdb2e1587d71aa43105d24cda1">r_callback</a>;</div><div class="line"><a name="l00279"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#a16f15e5117c1101250cbac9090ec3605">  279</a></span>&#160;    <a class="code" href="mds__client_8h.html#a57011cb807a800acece931f1c2940df8">ceph_mds_request_wait_callback_t</a> <a class="code" href="structceph__mds__request.html#a16f15e5117c1101250cbac9090ec3605">r_wait_for_completion</a>;</div><div class="line"><a name="l00280"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#a9a6959b9306b155e3af29a5bd3f795c0">  280</a></span>&#160;    <span class="keyword">struct </span>list_head  r_unsafe_item;  <span class="comment">/* per-session unsafe list item */</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div><div class="line"><a name="l00282"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#a9f047b3a0731af962432a53c189641e9">  282</a></span>&#160;    <span class="keywordtype">long</span> <span class="keywordtype">long</span>     <a class="code" href="structceph__mds__request.html#a9f047b3a0731af962432a53c189641e9">r_dir_release_cnt</a>;</div><div class="line"><a name="l00283"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#af348d5d0d0aa3afdbe5f5d40bf59cfee">  283</a></span>&#160;    <span class="keywordtype">long</span> <span class="keywordtype">long</span>     <a class="code" href="structceph__mds__request.html#af348d5d0d0aa3afdbe5f5d40bf59cfee">r_dir_ordered_cnt</a>;</div><div class="line"><a name="l00284"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#a68b5ecfff4df9b8e137d70fe6a2c9dc2">  284</a></span>&#160;    <span class="keywordtype">int</span>       <a class="code" href="structceph__mds__request.html#a68b5ecfff4df9b8e137d70fe6a2c9dc2">r_readdir_cache_idx</a>;</div><div class="line"><a name="l00285"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#a646f192aba152e8863c189920c983877">  285</a></span>&#160;    u32               <a class="code" href="structceph__mds__request.html#a646f192aba152e8863c189920c983877">r_readdir_offset</a>;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div><div class="line"><a name="l00287"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#ab9397d19f56bf00370680f44f6fefef7">  287</a></span>&#160;    <span class="keyword">struct </span>ceph_cap_reservation r_caps_reservation;</div><div class="line"><a name="l00288"></a><span class="lineno"><a class="line" href="structceph__mds__request.html#adae38a98ff6f2d05c6ab621626ba26ee">  288</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structceph__mds__request.html#adae38a98ff6f2d05c6ab621626ba26ee">r_num_caps</a>;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;};</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno"><a class="line" href="structceph__pool__perm.html">  291</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structceph__pool__perm.html">ceph_pool_perm</a> {</div><div class="line"><a name="l00292"></a><span class="lineno"><a class="line" href="structceph__pool__perm.html#a5089758e2422916f92c31420d1c3c129">  292</a></span>&#160;    <span class="keyword">struct </span>rb_node node;</div><div class="line"><a name="l00293"></a><span class="lineno"><a class="line" href="structceph__pool__perm.html#a6ba7982118ddd368358ec83bd10bc7ab">  293</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structceph__pool__perm.html#a6ba7982118ddd368358ec83bd10bc7ab">perm</a>;</div><div class="line"><a name="l00294"></a><span class="lineno"><a class="line" href="structceph__pool__perm.html#acaae9f236ede34eff5220fc9b4205ff8">  294</a></span>&#160;    s64 <a class="code" href="structceph__pool__perm.html#acaae9f236ede34eff5220fc9b4205ff8">pool</a>;</div><div class="line"><a name="l00295"></a><span class="lineno"><a class="line" href="structceph__pool__perm.html#ad184a17ddb28b47e17acf501f1e6d6e2">  295</a></span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="structceph__pool__perm.html#ad184a17ddb28b47e17acf501f1e6d6e2">pool_ns_len</a>;</div><div class="line"><a name="l00296"></a><span class="lineno"><a class="line" href="structceph__pool__perm.html#a029d4c7e3ce85fd349a5ffcc3e3328d5">  296</a></span>&#160;    <span class="keywordtype">char</span> pool_ns[];</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;};</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment"> * mds client state</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00302"></a><span class="lineno"><a class="line" href="structceph__mds__client.html">  302</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structceph__mds__client.html">ceph_mds_client</a> {</div><div class="line"><a name="l00303"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#a24e75cbcbead255945602551cc4cbcfd">  303</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structceph__fs__client.html">ceph_fs_client</a>  *<a class="code" href="structceph__mds__client.html#a24e75cbcbead255945602551cc4cbcfd">fsc</a>;</div><div class="line"><a name="l00304"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#aaaff40d43e20aea5eb1ff67e775cf8e3">  304</a></span>&#160;    <span class="keyword">struct </span>mutex            mutex;         <span class="comment">/* all nested structures */</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div><div class="line"><a name="l00306"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#ae40b8ab4dc70907c4a83f82b22f3ad3a">  306</a></span>&#160;    <span class="keyword">struct </span>ceph_mdsmap      *<a class="code" href="structceph__mds__client.html#ae40b8ab4dc70907c4a83f82b22f3ad3a">mdsmap</a>;</div><div class="line"><a name="l00307"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#ad110cef2a03e3ab87f7172f33f7c877a">  307</a></span>&#160;    <span class="keyword">struct </span>completion       safe_umount_waiters;</div><div class="line"><a name="l00308"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#a4f2ac18146193b1c527b17e3cfd7fee4">  308</a></span>&#160;    wait_queue_head_t       <a class="code" href="structceph__mds__client.html#a4f2ac18146193b1c527b17e3cfd7fee4">session_close_wq</a>;</div><div class="line"><a name="l00309"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#a890d8f25ea91b5c8a28d0d918170bf91">  309</a></span>&#160;    <span class="keyword">struct </span>list_head        waiting_for_map;</div><div class="line"><a name="l00310"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#a345133d31a1b147ceee372a075e6e7d5">  310</a></span>&#160;    <span class="keywordtype">int</span>             <a class="code" href="structceph__mds__client.html#a345133d31a1b147ceee372a075e6e7d5">mdsmap_err</a>;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#a2b11bed988564ffe8a0f7ced0069ae21">  312</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structceph__mds__session.html">ceph_mds_session</a> **<a class="code" href="structceph__mds__client.html#a2b11bed988564ffe8a0f7ced0069ae21">sessions</a>;    <span class="comment">/* NULL for mds if no session */</span></div><div class="line"><a name="l00313"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#a53aa23a9d6a302d4724770b342d1c965">  313</a></span>&#160;    atomic_t        <a class="code" href="structceph__mds__client.html#a53aa23a9d6a302d4724770b342d1c965">num_sessions</a>;</div><div class="line"><a name="l00314"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#a8e5d3a48f647056871ba8a35079e86d7">  314</a></span>&#160;    <span class="keywordtype">int</span>                     <a class="code" href="structceph__mds__client.html#a8e5d3a48f647056871ba8a35079e86d7">max_sessions</a>;  <span class="comment">/* len of s_mds_sessions */</span></div><div class="line"><a name="l00315"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#aacc004b6f111b694434483ece63c48fb">  315</a></span>&#160;    <span class="keywordtype">int</span>                     <a class="code" href="structceph__mds__client.html#aacc004b6f111b694434483ece63c48fb">stopping</a>;      <span class="comment">/* true if shutting down */</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#adc0d90f9c7c700d37dd557ceaa0aabcb">  317</a></span>&#160;    atomic64_t      <a class="code" href="structceph__mds__client.html#adc0d90f9c7c700d37dd557ceaa0aabcb">quotarealms_count</a>; <span class="comment">/* # realms with quota */</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment">     * snap_rwsem will cover cap linkage into snaprealms, and</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment">     * realm snap contexts.  (later, we can do per-realm snap</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment">     * contexts locks..)  the empty list contains realms with no</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">     * references (implying they contain no inodes with caps) that</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment">     * should be destroyed.</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00326"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#a116bc289b2d7c7cdfffc326fc8798651">  326</a></span>&#160;    u64         <a class="code" href="structceph__mds__client.html#a116bc289b2d7c7cdfffc326fc8798651">last_snap_seq</a>;</div><div class="line"><a name="l00327"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#a1c4141346e64b884abfcc9ac221f3c30">  327</a></span>&#160;    <span class="keyword">struct </span>rw_semaphore     snap_rwsem;</div><div class="line"><a name="l00328"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#aaf9b166e2b78b4da3dc441a0929f0eb1">  328</a></span>&#160;    <span class="keyword">struct </span>rb_root          snap_realms;</div><div class="line"><a name="l00329"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#a4e36e7a1990cd4a3863f7159ce225fe5">  329</a></span>&#160;    <span class="keyword">struct </span>list_head        snap_empty;</div><div class="line"><a name="l00330"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#a898a5d891ad3b352cbf9e2ce5103bcfc">  330</a></span>&#160;    spinlock_t              <a class="code" href="structceph__mds__client.html#a898a5d891ad3b352cbf9e2ce5103bcfc">snap_empty_lock</a>;  <span class="comment">/* protect snap_empty */</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#ad097b335334a4989afe74fbe9337f4e1">  332</a></span>&#160;    u64                    <a class="code" href="structceph__mds__client.html#ad097b335334a4989afe74fbe9337f4e1">last_tid</a>;      <span class="comment">/* most recent mds request */</span></div><div class="line"><a name="l00333"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#ab12a5e8a837944057c0523179ae51fa1">  333</a></span>&#160;    u64                    <a class="code" href="structceph__mds__client.html#ab12a5e8a837944057c0523179ae51fa1">oldest_tid</a>;    <span class="comment">/* oldest incomplete mds request,</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment">                         excluding setfilelock requests */</span></div><div class="line"><a name="l00335"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#a6113270dbf8355b044113cf056149957">  335</a></span>&#160;    <span class="keyword">struct </span>rb_root         request_tree;  <span class="comment">/* pending mds requests */</span></div><div class="line"><a name="l00336"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#a76e9c9b17c369bc0649a1d0807d92050">  336</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="mds__client_8c.html#a5f584af691004d9ca3bb703c82c071cc">delayed_work</a>    <a class="code" href="mds__client_8c.html#a5f584af691004d9ca3bb703c82c071cc">delayed_work</a>;  <span class="comment">/* delayed work */</span></div><div class="line"><a name="l00337"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#a2841fa779f25462d7fc2c6385e363ac9">  337</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>    <a class="code" href="structceph__mds__client.html#a2841fa779f25462d7fc2c6385e363ac9">last_renew_caps</a>;  <span class="comment">/* last time we renewed our caps */</span></div><div class="line"><a name="l00338"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#a1022e401c64efafeb41157d4647550df">  338</a></span>&#160;    <span class="keyword">struct </span>list_head cap_delay_list;   <span class="comment">/* caps with delayed release */</span></div><div class="line"><a name="l00339"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#aa282e83334eee61e8b30516980d33f2d">  339</a></span>&#160;    spinlock_t       <a class="code" href="structceph__mds__client.html#aa282e83334eee61e8b30516980d33f2d">cap_delay_lock</a>;   <span class="comment">/* protects cap_delay_list */</span></div><div class="line"><a name="l00340"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#a15254bd422076248c78ce9da420dce29">  340</a></span>&#160;    <span class="keyword">struct </span>list_head snap_flush_list;  <span class="comment">/* cap_snaps ready to flush */</span></div><div class="line"><a name="l00341"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#a0760835de85b62b1aa12fbb0ec0bc555">  341</a></span>&#160;    spinlock_t       <a class="code" href="structceph__mds__client.html#a0760835de85b62b1aa12fbb0ec0bc555">snap_flush_lock</a>;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#a31553684041ce2b129ea34e55864768f">  343</a></span>&#160;    u64               <a class="code" href="structceph__mds__client.html#a31553684041ce2b129ea34e55864768f">last_cap_flush_tid</a>;</div><div class="line"><a name="l00344"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#a36255eb71d0258b4024064a630618edd">  344</a></span>&#160;    <span class="keyword">struct </span>list_head  cap_flush_list;</div><div class="line"><a name="l00345"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#ae39130428ca555c440537c5478b5708a">  345</a></span>&#160;    <span class="keyword">struct </span>list_head  cap_dirty;        <span class="comment">/* inodes with dirty caps */</span></div><div class="line"><a name="l00346"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#a9726bf8dd738a8754767e47bd444b2bb">  346</a></span>&#160;    <span class="keyword">struct </span>list_head  cap_dirty_migrating; <span class="comment">/* ...that are migration... */</span></div><div class="line"><a name="l00347"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#a9d3035808f86b5ed5ef822a4b933dc17">  347</a></span>&#160;    <span class="keywordtype">int</span>               <a class="code" href="structceph__mds__client.html#a9d3035808f86b5ed5ef822a4b933dc17">num_cap_flushing</a>; <span class="comment">/* # caps we are flushing */</span></div><div class="line"><a name="l00348"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#aa502d04e622e40a2c8ed640b5936d9ac">  348</a></span>&#160;    spinlock_t        <a class="code" href="structceph__mds__client.html#aa502d04e622e40a2c8ed640b5936d9ac">cap_dirty_lock</a>;   <span class="comment">/* protects above items */</span></div><div class="line"><a name="l00349"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#a157993f34029147942225aa7952a88c6">  349</a></span>&#160;    wait_queue_head_t <a class="code" href="structceph__mds__client.html#a157993f34029147942225aa7952a88c6">cap_flushing_wq</a>;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment">     * Cap reservations</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment">     * Maintain a global pool of preallocated struct ceph_caps, referenced</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment">     * by struct ceph_caps_reservations.  This ensures that we preallocate</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment">     * memory needed to successfully process an MDS response.  (If an MDS</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment">     * sends us cap information and we fail to process it, we will have</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment">     * problems due to the client and MDS being out of sync.)</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">     * Reservations are &#39;owned&#39; by a ceph_cap_reservation context.</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00362"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#acbc9695474b140493f6663082c8e507d">  362</a></span>&#160;    spinlock_t  <a class="code" href="structceph__mds__client.html#acbc9695474b140493f6663082c8e507d">caps_list_lock</a>;</div><div class="line"><a name="l00363"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#a44ab90e2da08e8fd78c3244ac19ec35a">  363</a></span>&#160;    <span class="keyword">struct      </span>list_head caps_list; <span class="comment">/* unused (reserved or</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment">                        unreserved) */</span></div><div class="line"><a name="l00365"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#af88c9b4f8f654806f4f49d978cee93f4">  365</a></span>&#160;    <span class="keywordtype">int</span>     <a class="code" href="structceph__mds__client.html#af88c9b4f8f654806f4f49d978cee93f4">caps_total_count</a>;    <span class="comment">/* total caps allocated */</span></div><div class="line"><a name="l00366"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#a5c9c8714c7dd73711399a492d9db3716">  366</a></span>&#160;    <span class="keywordtype">int</span>     <a class="code" href="structceph__mds__client.html#a5c9c8714c7dd73711399a492d9db3716">caps_use_count</a>;      <span class="comment">/* in use */</span></div><div class="line"><a name="l00367"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#ac01d3ff73bfc7776dcea96186b5c89b8">  367</a></span>&#160;    <span class="keywordtype">int</span>     <a class="code" href="structceph__mds__client.html#ac01d3ff73bfc7776dcea96186b5c89b8">caps_reserve_count</a>;  <span class="comment">/* unused, reserved */</span></div><div class="line"><a name="l00368"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#ae8e7a85f84db6cfcbc5a6078b7b2e005">  368</a></span>&#160;    <span class="keywordtype">int</span>     <a class="code" href="structceph__mds__client.html#ae8e7a85f84db6cfcbc5a6078b7b2e005">caps_avail_count</a>;    <span class="comment">/* unused, unreserved */</span></div><div class="line"><a name="l00369"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#a08ff5565e5438f5c558a43b2e4bd4766">  369</a></span>&#160;    <span class="keywordtype">int</span>     <a class="code" href="structceph__mds__client.html#a08ff5565e5438f5c558a43b2e4bd4766">caps_min_count</a>;      <span class="comment">/* keep at least this many</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment">                        (unreserved) */</span></div><div class="line"><a name="l00371"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#abd6a41f1509f408b31ecbf793e72ef10">  371</a></span>&#160;    spinlock_t    <a class="code" href="structceph__mds__client.html#abd6a41f1509f408b31ecbf793e72ef10">dentry_lru_lock</a>;</div><div class="line"><a name="l00372"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#ab6df4634a2bbf3e8accf7437ca888a36">  372</a></span>&#160;    <span class="keyword">struct </span>list_head  dentry_lru;</div><div class="line"><a name="l00373"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#afefd1357f55445969518db413cdebaef">  373</a></span>&#160;    <span class="keywordtype">int</span>       <a class="code" href="structceph__mds__client.html#afefd1357f55445969518db413cdebaef">num_dentry</a>;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div><div class="line"><a name="l00375"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#ab1f71e04532cac53f49e20c289cf6b3c">  375</a></span>&#160;    <span class="keyword">struct </span>rw_semaphore     pool_perm_rwsem;</div><div class="line"><a name="l00376"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#a5345b887766c37c590a0cc0516b47225">  376</a></span>&#160;    <span class="keyword">struct </span>rb_root      pool_perm_tree;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div><div class="line"><a name="l00378"></a><span class="lineno"><a class="line" href="structceph__mds__client.html#a527dcbd34053eaf0609ff26f9dd20a12">  378</a></span>&#160;    <span class="keywordtype">char</span> nodename[__NEW_UTS_LEN + 1];</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;};</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="mds__client_8h.html#ab672a0fe1db6cfa5a993c8e8cdc255fe">ceph_mds_op_name</a>(<span class="keywordtype">int</span> op);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="keyword">extern</span> <span class="keyword">struct </span><a class="code" href="structceph__mds__session.html">ceph_mds_session</a> *</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<a class="code" href="mds__client_8h.html#a0b096dcb63b03f55255cf00134d6d7ff">__ceph_lookup_mds_session</a>(<span class="keyword">struct</span> <a class="code" href="structceph__mds__client.html">ceph_mds_client</a> *, <span class="keywordtype">int</span> mds);</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">struct </span><a class="code" href="structceph__mds__session.html">ceph_mds_session</a> *</div><div class="line"><a name="l00387"></a><span class="lineno"><a class="line" href="mds__client_8h.html#ac28e27c51a386b2d032e592c3d4a83df">  387</a></span>&#160;<a class="code" href="mds__client_8h.html#ac28e27c51a386b2d032e592c3d4a83df">ceph_get_mds_session</a>(<span class="keyword">struct</span> <a class="code" href="structceph__mds__session.html">ceph_mds_session</a> *s)</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;{</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    refcount_inc(&amp;s-&gt;<a class="code" href="structceph__mds__session.html#a6931e301fae2fabf8cd0a467858d62f8">s_ref</a>);</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordflow">return</span> s;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;}</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="mds__client_8h.html#afaba7f45f5f30ce2e396519d30889d67">ceph_session_state_name</a>(<span class="keywordtype">int</span> s);</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="mds__client_8h.html#ac8b30c6f0d3c66b2a768c251e9e14268">ceph_put_mds_session</a>(<span class="keyword">struct</span> <a class="code" href="structceph__mds__session.html">ceph_mds_session</a> *s);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="mds__client_8h.html#a2d49720e321e4db83cec5184ddbf597b">ceph_send_msg_mds</a>(<span class="keyword">struct</span> <a class="code" href="structceph__mds__client.html">ceph_mds_client</a> *mdsc,</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                 <span class="keyword">struct</span> ceph_msg *msg, <span class="keywordtype">int</span> mds);</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="mds__client_8h.html#ace5b628cb3ad36ba876c1792e2922d81">ceph_mdsc_init</a>(<span class="keyword">struct</span> <a class="code" href="structceph__fs__client.html">ceph_fs_client</a> *fsc);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="mds__client_8h.html#a90cd624d396cca56a05acaddd072cb3a">ceph_mdsc_close_sessions</a>(<span class="keyword">struct</span> <a class="code" href="structceph__mds__client.html">ceph_mds_client</a> *mdsc);</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="mds__client_8h.html#a679279e05084bf0e754dd17f41d7cbc7">ceph_mdsc_force_umount</a>(<span class="keyword">struct</span> <a class="code" href="structceph__mds__client.html">ceph_mds_client</a> *mdsc);</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="mds__client_8h.html#ac6eee48a0498dae9f32e404b418a5b2f">ceph_mdsc_destroy</a>(<span class="keyword">struct</span> <a class="code" href="structceph__fs__client.html">ceph_fs_client</a> *fsc);</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="mds__client_8h.html#a2cdaf6b1bd65bdb7a17c4b7a4a9a3881">ceph_mdsc_sync</a>(<span class="keyword">struct</span> <a class="code" href="structceph__mds__client.html">ceph_mds_client</a> *mdsc);</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="mds__client_8h.html#a881d6a999ea651540ad5c554182b267d">ceph_invalidate_dir_request</a>(<span class="keyword">struct</span> <a class="code" href="structceph__mds__request.html">ceph_mds_request</a> *req);</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="mds__client_8h.html#a2afa0f41af223fe5075cabf06714e504">ceph_alloc_readdir_reply_buffer</a>(<span class="keyword">struct</span> <a class="code" href="structceph__mds__request.html">ceph_mds_request</a> *req,</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                       <span class="keyword">struct</span> <a class="code" href="summary_8h.html#a63c41f9614ee9a4e1beb75eabad72f22">inode</a> *dir);</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="keyword">extern</span> <span class="keyword">struct </span><a class="code" href="structceph__mds__request.html">ceph_mds_request</a> *</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<a class="code" href="mds__client_8h.html#a1f4e3ccc5b0a05d39ed1a8b0febd0808">ceph_mdsc_create_request</a>(<span class="keyword">struct</span> <a class="code" href="structceph__mds__client.html">ceph_mds_client</a> *mdsc, <span class="keywordtype">int</span> op, <span class="keywordtype">int</span> mode);</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="mds__client_8h.html#aa5c5e0f0c721a71ac5eaa57b1621acaf">ceph_mdsc_submit_request</a>(<span class="keyword">struct</span> <a class="code" href="structceph__mds__client.html">ceph_mds_client</a> *mdsc,</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                     <span class="keyword">struct</span> <a class="code" href="structceph__mds__request.html">ceph_mds_request</a> *req);</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="mds__client_8h.html#aa3634bc15cfd9cb13b8778cff07fe63e">ceph_mdsc_do_request</a>(<span class="keyword">struct</span> <a class="code" href="structceph__mds__client.html">ceph_mds_client</a> *mdsc,</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                <span class="keyword">struct</span> <a class="code" href="summary_8h.html#a63c41f9614ee9a4e1beb75eabad72f22">inode</a> *dir,</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                <span class="keyword">struct</span> <a class="code" href="structceph__mds__request.html">ceph_mds_request</a> *req);</div><div class="line"><a name="l00417"></a><span class="lineno"><a class="line" href="mds__client_8h.html#a0acb90b9da78619536106fe846531c68">  417</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="mds__client_8h.html#a0acb90b9da78619536106fe846531c68">ceph_mdsc_get_request</a>(<span class="keyword">struct</span> <a class="code" href="structceph__mds__request.html">ceph_mds_request</a> *req)</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;{</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    kref_get(&amp;req-&gt;<a class="code" href="structceph__mds__request.html#ae83f6fd728b4384cc26936a596438324">r_kref</a>);</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;}</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="mds__client_8h.html#aaa281eda32f4528f44e1a3aa21b74108">ceph_mdsc_release_request</a>(<span class="keyword">struct</span> kref *kref);</div><div class="line"><a name="l00422"></a><span class="lineno"><a class="line" href="mds__client_8h.html#af4dc0de9d5f330a9348d8a7643acfd4a">  422</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="mds__client_8h.html#af4dc0de9d5f330a9348d8a7643acfd4a">ceph_mdsc_put_request</a>(<span class="keyword">struct</span> <a class="code" href="structceph__mds__request.html">ceph_mds_request</a> *req)</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;{</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    kref_put(&amp;req-&gt;<a class="code" href="structceph__mds__request.html#ae83f6fd728b4384cc26936a596438324">r_kref</a>, <a class="code" href="mds__client_8h.html#aaa281eda32f4528f44e1a3aa21b74108">ceph_mdsc_release_request</a>);</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;}</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="mds__client_8h.html#ac9fb160e1775b476bd78942c928ac7b5">ceph_send_cap_releases</a>(<span class="keyword">struct</span> <a class="code" href="structceph__mds__client.html">ceph_mds_client</a> *mdsc,</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                   <span class="keyword">struct</span> <a class="code" href="structceph__mds__session.html">ceph_mds_session</a> *session);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="mds__client_8h.html#a6c92910b8600ccfefb8063f55e4785a6">ceph_mdsc_pre_umount</a>(<span class="keyword">struct</span> <a class="code" href="structceph__mds__client.html">ceph_mds_client</a> *mdsc);</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">char</span> *<a class="code" href="mds__client_8h.html#a0435bf9d87d67b682d73e5bd92f3f41a">ceph_mdsc_build_path</a>(<span class="keyword">struct</span> dentry *dentry, <span class="keywordtype">int</span> *plen, u64 *base,</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                  <span class="keywordtype">int</span> stop_on_nosnap);</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="mds__client_8h.html#a05ecbf1d7ee0cdb585e3480b5d9833da">__ceph_mdsc_drop_dentry_lease</a>(<span class="keyword">struct</span> dentry *dentry);</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="mds__client_8h.html#a1d3c4cd04177b319e012186a5a04c39b">ceph_mdsc_lease_send_msg</a>(<span class="keyword">struct</span> <a class="code" href="structceph__mds__session.html">ceph_mds_session</a> *session,</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                     <span class="keyword">struct</span> <a class="code" href="summary_8h.html#a63c41f9614ee9a4e1beb75eabad72f22">inode</a> *<a class="code" href="summary_8h.html#a63c41f9614ee9a4e1beb75eabad72f22">inode</a>,</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                     <span class="keyword">struct</span> dentry *dentry, <span class="keywordtype">char</span> action,</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                     u32 seq);</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="mds__client_8h.html#aafb3b5f8ec2c1db9a721f133b0eafc22">ceph_mdsc_handle_mdsmap</a>(<span class="keyword">struct</span> <a class="code" href="structceph__mds__client.html">ceph_mds_client</a> *mdsc,</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                    <span class="keyword">struct</span> ceph_msg *msg);</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="mds__client_8h.html#abee229f022194ee7d2acd035e0b21f24">ceph_mdsc_handle_fsmap</a>(<span class="keyword">struct</span> <a class="code" href="structceph__mds__client.html">ceph_mds_client</a> *mdsc,</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                   <span class="keyword">struct</span> ceph_msg *msg);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="keyword">extern</span> <span class="keyword">struct </span><a class="code" href="structceph__mds__session.html">ceph_mds_session</a> *</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<a class="code" href="mds__client_8h.html#a079c415fb97832014699f121021760e6">ceph_mdsc_open_export_target_session</a>(<span class="keyword">struct</span> <a class="code" href="structceph__mds__client.html">ceph_mds_client</a> *mdsc, <span class="keywordtype">int</span> target);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="mds__client_8h.html#a6f400bce6e34c2f1d994870cce784825">ceph_mdsc_open_export_target_sessions</a>(<span class="keyword">struct</span> <a class="code" href="structceph__mds__client.html">ceph_mds_client</a> *mdsc,</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                      <span class="keyword">struct</span> <a class="code" href="structceph__mds__session.html">ceph_mds_session</a> *session);</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="mds__client_8h.html#a046537b239b561ee1f8f5c6c187b0190">ceph_trim_caps</a>(<span class="keyword">struct</span> <a class="code" href="structceph__mds__client.html">ceph_mds_client</a> *mdsc,</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;              <span class="keyword">struct</span> <a class="code" href="structceph__mds__session.html">ceph_mds_session</a> *session,</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;              <span class="keywordtype">int</span> max_caps);</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="preprocessor">#endif</span></div><div class="ttc" id="structceph__mds__request_html_aca0d0eace5bce00cefd75de70bf09eb9"><div class="ttname"><a href="structceph__mds__request.html#aca0d0eace5bce00cefd75de70bf09eb9">ceph_mds_request::r_mdsc</a></div><div class="ttdeci">struct ceph_mds_client * r_mdsc</div><div class="ttdef"><b>Definition:</b> mds_client.h:202</div></div>
<div class="ttc" id="structceph__mds__request_html_a1e9a3b63a4337945ffc4a189611836bf"><div class="ttname"><a href="structceph__mds__request.html#a1e9a3b63a4337945ffc4a189611836bf">ceph_mds_request::r_old_inode</a></div><div class="ttdeci">struct inode * r_old_inode</div><div class="ttdef"><b>Definition:</b> mds_client.h:245</div></div>
<div class="ttc" id="structceph__mds__request_html_a5a6814337176cf264489abd70289d8a8"><div class="ttname"><a href="structceph__mds__request.html#a5a6814337176cf264489abd70289d8a8">ceph_mds_request::r_direct_hash</a></div><div class="ttdeci">u32 r_direct_hash</div><div class="ttdef"><b>Definition:</b> mds_client.h:236</div></div>
<div class="ttc" id="structceph__mds__reply__info__in_html_a40358c87145969792084d7153b2fb454"><div class="ttname"><a href="structceph__mds__reply__info__in.html#a40358c87145969792084d7153b2fb454">ceph_mds_reply_info_in::symlink_len</a></div><div class="ttdeci">u32 symlink_len</div><div class="ttdef"><b>Definition:</b> mds_client.h:43</div></div>
<div class="ttc" id="mds__client_8h_html_a046537b239b561ee1f8f5c6c187b0190"><div class="ttname"><a href="mds__client_8h.html#a046537b239b561ee1f8f5c6c187b0190">ceph_trim_caps</a></div><div class="ttdeci">int ceph_trim_caps(struct ceph_mds_client *mdsc, struct ceph_mds_session *session, int max_caps)</div><div class="ttdef"><b>Definition:</b> mds_client.c:1581</div></div>
<div class="ttc" id="mds__client_8h_html_afaba7f45f5f30ce2e396519d30889d67"><div class="ttname"><a href="mds__client_8h.html#afaba7f45f5f30ce2e396519d30889d67">ceph_session_state_name</a></div><div class="ttdeci">const char * ceph_session_state_name(int s)</div><div class="ttdef"><b>Definition:</b> mds_client.c:385</div></div>
<div class="ttc" id="structceph__cap_html"><div class="ttname"><a href="structceph__cap.html">ceph_cap</a></div><div class="ttdef"><b>Definition:</b> super.h:135</div></div>
<div class="ttc" id="structceph__mds__reply__info__in_html_a62bf1b86100ee6bd74d29bde965d32c8"><div class="ttname"><a href="structceph__mds__reply__info__in.html#a62bf1b86100ee6bd74d29bde965d32c8">ceph_mds_reply_info_in::inline_version</a></div><div class="ttdeci">u64 inline_version</div><div class="ttdef"><b>Definition:</b> mds_client.h:47</div></div>
<div class="ttc" id="structceph__mds__session_html_a6931e301fae2fabf8cd0a467858d62f8"><div class="ttname"><a href="structceph__mds__session.html#a6931e301fae2fabf8cd0a467858d62f8">ceph_mds_session::s_ref</a></div><div class="ttdeci">refcount_t s_ref</div><div class="ttdef"><b>Definition:</b> mds_client.h:168</div></div>
<div class="ttc" id="structceph__mds__request_html_ae5402d425887506a00213ee9f89b1bc0"><div class="ttname"><a href="structceph__mds__request.html#ae5402d425887506a00213ee9f89b1bc0">ceph_mds_request::r_session</a></div><div class="ttdeci">struct ceph_mds_session * r_session</div><div class="ttdef"><b>Definition:</b> mds_client.h:267</div></div>
<div class="ttc" id="structceph__mds__client_html_a8e5d3a48f647056871ba8a35079e86d7"><div class="ttname"><a href="structceph__mds__client.html#a8e5d3a48f647056871ba8a35079e86d7">ceph_mds_client::max_sessions</a></div><div class="ttdeci">int max_sessions</div><div class="ttdef"><b>Definition:</b> mds_client.h:314</div></div>
<div class="ttc" id="structceph__mds__session_html_acd33c689a6b78b9821bc08bac18e812e"><div class="ttname"><a href="structceph__mds__session.html#acd33c689a6b78b9821bc08bac18e812e">ceph_mds_session::s_num_cap_releases</a></div><div class="ttdeci">int s_num_cap_releases</div><div class="ttdef"><b>Definition:</b> mds_client.h:157</div></div>
<div class="ttc" id="structceph__mds__reply__dir__entry_html_a7ab7438d7194dbc54d3341bbf2b06cd8"><div class="ttname"><a href="structceph__mds__reply__dir__entry.html#a7ab7438d7194dbc54d3341bbf2b06cd8">ceph_mds_reply_dir_entry::name</a></div><div class="ttdeci">char * name</div><div class="ttdef"><b>Definition:</b> mds_client.h:57</div></div>
<div class="ttc" id="structceph__mds__request_html_a16f15e5117c1101250cbac9090ec3605"><div class="ttname"><a href="structceph__mds__request.html#a16f15e5117c1101250cbac9090ec3605">ceph_mds_request::r_wait_for_completion</a></div><div class="ttdeci">ceph_mds_request_wait_callback_t r_wait_for_completion</div><div class="ttdef"><b>Definition:</b> mds_client.h:279</div></div>
<div class="ttc" id="structceph__mds__request_html_a361b425c093046a592661c435d9a0789"><div class="ttname"><a href="structceph__mds__request.html#a361b425c093046a592661c435d9a0789">ceph_mds_request::r_request_started</a></div><div class="ttdeci">unsigned long r_request_started</div><div class="ttdef"><b>Definition:</b> mds_client.h:257</div></div>
<div class="ttc" id="mds__client_8h_html_a900dca9b26de42491763226e12dcd47bab44086985f20fcce6f77a08d95b21038"><div class="ttname"><a href="mds__client_8h.html#a900dca9b26de42491763226e12dcd47bab44086985f20fcce6f77a08d95b21038">CEPH_MDS_SESSION_RESTARTING</a></div><div class="ttdef"><b>Definition:</b> mds_client.h:131</div></div>
<div class="ttc" id="structceph__mds__request_html_ac3059e7e7b354e20449f763d66e63b45"><div class="ttname"><a href="structceph__mds__request.html#ac3059e7e7b354e20449f763d66e63b45">ceph_mds_request::r_dentry</a></div><div class="ttdeci">struct dentry * r_dentry</div><div class="ttdef"><b>Definition:</b> mds_client.h:208</div></div>
<div class="ttc" id="structceph__mds__request_html_a292a086c82ea778e67dafb02c155c34b"><div class="ttname"><a href="structceph__mds__request.html#a292a086c82ea778e67dafb02c155c34b">ceph_mds_request::r_resend_mds</a></div><div class="ttdeci">int r_resend_mds</div><div class="ttdef"><b>Definition:</b> mds_client.h:271</div></div>
<div class="ttc" id="mds__client_8h_html_a2afa0f41af223fe5075cabf06714e504"><div class="ttname"><a href="mds__client_8h.html#a2afa0f41af223fe5075cabf06714e504">ceph_alloc_readdir_reply_buffer</a></div><div class="ttdeci">int ceph_alloc_readdir_reply_buffer(struct ceph_mds_request *req, struct inode *dir)</div><div class="ttdef"><b>Definition:</b> mds_client.c:1738</div></div>
<div class="ttc" id="structceph__mds__client_html_aa502d04e622e40a2c8ed640b5936d9ac"><div class="ttname"><a href="structceph__mds__client.html#aa502d04e622e40a2c8ed640b5936d9ac">ceph_mds_client::cap_dirty_lock</a></div><div class="ttdeci">spinlock_t cap_dirty_lock</div><div class="ttdef"><b>Definition:</b> mds_client.h:348</div></div>
<div class="ttc" id="structceph__mds__reply__info__parsed_html_a46c94b86d905eeb339942ed3fca4a193"><div class="ttname"><a href="structceph__mds__reply__info__parsed.html#a46c94b86d905eeb339942ed3fca4a193">ceph_mds_reply_info_parsed::snapblob_len</a></div><div class="ttdeci">int snapblob_len</div><div class="ttdef"><b>Definition:</b> mds_client.h:107</div></div>
<div class="ttc" id="structceph__mds__client_html_ae40b8ab4dc70907c4a83f82b22f3ad3a"><div class="ttname"><a href="structceph__mds__client.html#ae40b8ab4dc70907c4a83f82b22f3ad3a">ceph_mds_client::mdsmap</a></div><div class="ttdeci">struct ceph_mdsmap * mdsmap</div><div class="ttdef"><b>Definition:</b> mds_client.h:306</div></div>
<div class="ttc" id="structceph__mds__request_html_ad9214a618cd46d77318323ac298c400d"><div class="ttname"><a href="structceph__mds__request.html#ad9214a618cd46d77318323ac298c400d">ceph_mds_request::r_request_release_offset</a></div><div class="ttdeci">int r_request_release_offset</div><div class="ttdef"><b>Definition:</b> mds_client.h:249</div></div>
<div class="ttc" id="mds__client_8c_html_a5f584af691004d9ca3bb703c82c071cc"><div class="ttname"><a href="mds__client_8c.html#a5f584af691004d9ca3bb703c82c071cc">delayed_work</a></div><div class="ttdeci">static void delayed_work(struct work_struct *work)</div><div class="ttdef"><b>Definition:</b> mds_client.c:3528</div></div>
<div class="ttc" id="structceph__mds__reply__info__parsed_html_a5bd158cd336342d4ca93b80ad1aa94b4"><div class="ttname"><a href="structceph__mds__reply__info__parsed.html#a5bd158cd336342d4ca93b80ad1aa94b4">ceph_mds_reply_info_parsed::filelock_reply</a></div><div class="ttdeci">struct ceph_filelock * filelock_reply</div><div class="ttdef"><b>Definition:</b> mds_client.h:83</div></div>
<div class="ttc" id="mds__client_8h_html_abee229f022194ee7d2acd035e0b21f24"><div class="ttname"><a href="mds__client_8h.html#abee229f022194ee7d2acd035e0b21f24">ceph_mdsc_handle_fsmap</a></div><div class="ttdeci">void ceph_mdsc_handle_fsmap(struct ceph_mds_client *mdsc, struct ceph_msg *msg)</div><div class="ttdef"><b>Definition:</b> mds_client.c:3897</div></div>
<div class="ttc" id="mds__client_8h_html_ac8b30c6f0d3c66b2a768c251e9e14268"><div class="ttname"><a href="mds__client_8h.html#ac8b30c6f0d3c66b2a768c251e9e14268">ceph_put_mds_session</a></div><div class="ttdeci">void ceph_put_mds_session(struct ceph_mds_session *s)</div><div class="ttdef"><b>Definition:</b> mds_client.c:412</div></div>
<div class="ttc" id="structceph__mds__reply__info__in_html_aeef9c9a57ae0c20a6557be2672033761"><div class="ttname"><a href="structceph__mds__reply__info__in.html#aeef9c9a57ae0c20a6557be2672033761">ceph_mds_reply_info_in::max_files</a></div><div class="ttdeci">u64 max_files</div><div class="ttdef"><b>Definition:</b> mds_client.h:53</div></div>
<div class="ttc" id="structceph__mds__reply__info__in_html_af9bba6d32f1db11c1579077a3b960a1d"><div class="ttname"><a href="structceph__mds__reply__info__in.html#af9bba6d32f1db11c1579077a3b960a1d">ceph_mds_reply_info_in::inline_data</a></div><div class="ttdeci">char * inline_data</div><div class="ttdef"><b>Definition:</b> mds_client.h:49</div></div>
<div class="ttc" id="structceph__mds__client_html_ae8e7a85f84db6cfcbc5a6078b7b2e005"><div class="ttname"><a href="structceph__mds__client.html#ae8e7a85f84db6cfcbc5a6078b7b2e005">ceph_mds_client::caps_avail_count</a></div><div class="ttdeci">int caps_avail_count</div><div class="ttdef"><b>Definition:</b> mds_client.h:368</div></div>
<div class="ttc" id="structceph__mds__session_html_aa10ab90d7210face2ecb40faf26a5d35"><div class="ttname"><a href="structceph__mds__session.html#aa10ab90d7210face2ecb40faf26a5d35">ceph_mds_session::s_renew_requested</a></div><div class="ttdeci">unsigned long s_renew_requested</div><div class="ttdef"><b>Definition:</b> mds_client.h:165</div></div>
<div class="ttc" id="structceph__mds__client_html_a2841fa779f25462d7fc2c6385e363ac9"><div class="ttname"><a href="structceph__mds__client.html#a2841fa779f25462d7fc2c6385e363ac9">ceph_mds_client::last_renew_caps</a></div><div class="ttdeci">unsigned long last_renew_caps</div><div class="ttdef"><b>Definition:</b> mds_client.h:337</div></div>
<div class="ttc" id="structceph__mds__reply__info__parsed_html_a222f0e9c3223346258010276c172cd11"><div class="ttname"><a href="structceph__mds__reply__info__parsed.html#a222f0e9c3223346258010276c172cd11">ceph_mds_reply_info_parsed::dname_len</a></div><div class="ttdeci">u32 dname_len</div><div class="ttdef"><b>Definition:</b> mds_client.h:77</div></div>
<div class="ttc" id="mds__client_8h_html_a900dca9b26de42491763226e12dcd47ba0bf7c78e1a656efc5d06702da71f8ae7"><div class="ttname"><a href="mds__client_8h.html#a900dca9b26de42491763226e12dcd47ba0bf7c78e1a656efc5d06702da71f8ae7">CEPH_MDS_SESSION_NEW</a></div><div class="ttdef"><b>Definition:</b> mds_client.h:126</div></div>
<div class="ttc" id="structceph__mds__reply__info__parsed_html_a1bf92d60bbc5283b66f682cbf700ed67"><div class="ttname"><a href="structceph__mds__reply__info__parsed.html#a1bf92d60bbc5283b66f682cbf700ed67">ceph_mds_reply_info_parsed::head</a></div><div class="ttdeci">struct ceph_mds_reply_head * head</div><div class="ttdef"><b>Definition:</b> mds_client.h:71</div></div>
<div class="ttc" id="structceph__pool__perm_html_ad184a17ddb28b47e17acf501f1e6d6e2"><div class="ttname"><a href="structceph__pool__perm.html#ad184a17ddb28b47e17acf501f1e6d6e2">ceph_pool_perm::pool_ns_len</a></div><div class="ttdeci">size_t pool_ns_len</div><div class="ttdef"><b>Definition:</b> mds_client.h:295</div></div>
<div class="ttc" id="structceph__mds__session_html"><div class="ttname"><a href="structceph__mds__session.html">ceph_mds_session</a></div><div class="ttdef"><b>Definition:</b> mds_client.h:136</div></div>
<div class="ttc" id="structceph__mds__request_html_adae38a98ff6f2d05c6ab621626ba26ee"><div class="ttname"><a href="structceph__mds__request.html#adae38a98ff6f2d05c6ab621626ba26ee">ceph_mds_request::r_num_caps</a></div><div class="ttdeci">int r_num_caps</div><div class="ttdef"><b>Definition:</b> mds_client.h:288</div></div>
<div class="ttc" id="structceph__mds__reply__info__in_html_a49070e31df9913954639d111d4e379cd"><div class="ttname"><a href="structceph__mds__reply__info__in.html#a49070e31df9913954639d111d4e379cd">ceph_mds_reply_info_in::max_bytes</a></div><div class="ttdeci">u64 max_bytes</div><div class="ttdef"><b>Definition:</b> mds_client.h:52</div></div>
<div class="ttc" id="structceph__mds__client_html_acbc9695474b140493f6663082c8e507d"><div class="ttname"><a href="structceph__mds__client.html#acbc9695474b140493f6663082c8e507d">ceph_mds_client::caps_list_lock</a></div><div class="ttdeci">spinlock_t caps_list_lock</div><div class="ttdef"><b>Definition:</b> mds_client.h:362</div></div>
<div class="ttc" id="structceph__mds__reply__info__parsed_html_a33eb4e3044da14cd1b6e23f36206a180"><div class="ttname"><a href="structceph__mds__reply__info__parsed.html#a33eb4e3044da14cd1b6e23f36206a180">ceph_mds_reply_info_parsed::dlease</a></div><div class="ttdeci">struct ceph_mds_reply_lease * dlease</div><div class="ttdef"><b>Definition:</b> mds_client.h:78</div></div>
<div class="ttc" id="structceph__pool__perm_html_a6ba7982118ddd368358ec83bd10bc7ab"><div class="ttname"><a href="structceph__pool__perm.html#a6ba7982118ddd368358ec83bd10bc7ab">ceph_pool_perm::perm</a></div><div class="ttdeci">int perm</div><div class="ttdef"><b>Definition:</b> mds_client.h:293</div></div>
<div class="ttc" id="mds__client_8h_html_a6f400bce6e34c2f1d994870cce784825"><div class="ttname"><a href="mds__client_8h.html#a6f400bce6e34c2f1d994870cce784825">ceph_mdsc_open_export_target_sessions</a></div><div class="ttdeci">void ceph_mdsc_open_export_target_sessions(struct ceph_mds_client *mdsc, struct ceph_mds_session *session)</div><div class="ttdef"><b>Definition:</b> mds_client.c:1063</div></div>
<div class="ttc" id="structceph__mds__session_html_a6f87017c1d448995fb863e6e38d32f66"><div class="ttname"><a href="structceph__mds__session.html#a6f87017c1d448995fb863e6e38d32f66">ceph_mds_session::s_renew_seq</a></div><div class="ttdeci">u64 s_renew_seq</div><div class="ttdef"><b>Definition:</b> mds_client.h:166</div></div>
<div class="ttc" id="mds__client_8h_html_a0435bf9d87d67b682d73e5bd92f3f41a"><div class="ttname"><a href="mds__client_8h.html#a0435bf9d87d67b682d73e5bd92f3f41a">ceph_mdsc_build_path</a></div><div class="ttdeci">char * ceph_mdsc_build_path(struct dentry *dentry, int *plen, u64 *base, int stop_on_nosnap)</div><div class="ttdef"><b>Definition:</b> mds_client.c:1835</div></div>
<div class="ttc" id="mds__client_8h_html_a079c415fb97832014699f121021760e6"><div class="ttname"><a href="mds__client_8h.html#a079c415fb97832014699f121021760e6">ceph_mdsc_open_export_target_session</a></div><div class="ttdeci">struct ceph_mds_session * ceph_mdsc_open_export_target_session(struct ceph_mds_client *mdsc, int target)</div><div class="ttdef"><b>Definition:</b> mds_client.c:1029</div></div>
<div class="ttc" id="structceph__mds__client_html_abd6a41f1509f408b31ecbf793e72ef10"><div class="ttname"><a href="structceph__mds__client.html#abd6a41f1509f408b31ecbf793e72ef10">ceph_mds_client::dentry_lru_lock</a></div><div class="ttdeci">spinlock_t dentry_lru_lock</div><div class="ttdef"><b>Definition:</b> mds_client.h:371</div></div>
<div class="ttc" id="structceph__mds__client_html_a0760835de85b62b1aa12fbb0ec0bc555"><div class="ttname"><a href="structceph__mds__client.html#a0760835de85b62b1aa12fbb0ec0bc555">ceph_mds_client::snap_flush_lock</a></div><div class="ttdeci">spinlock_t snap_flush_lock</div><div class="ttdef"><b>Definition:</b> mds_client.h:341</div></div>
<div class="ttc" id="structceph__mds__request_html_aedc91b92419a8df3e36060f7f14de77c"><div class="ttname"><a href="structceph__mds__request.html#aedc91b92419a8df3e36060f7f14de77c">ceph_mds_request::r_inode_unless</a></div><div class="ttdeci">int r_inode_unless</div><div class="ttdef"><b>Definition:</b> mds_client.h:242</div></div>
<div class="ttc" id="mds__client_8h_html_af4dc0de9d5f330a9348d8a7643acfd4a"><div class="ttname"><a href="mds__client_8h.html#af4dc0de9d5f330a9348d8a7643acfd4a">ceph_mdsc_put_request</a></div><div class="ttdeci">static void ceph_mdsc_put_request(struct ceph_mds_request *req)</div><div class="ttdef"><b>Definition:</b> mds_client.h:422</div></div>
<div class="ttc" id="structceph__mds__reply__info__in_html_a0aceb5a2f49b154cab3ba3454b6c5b27"><div class="ttname"><a href="structceph__mds__reply__info__in.html#a0aceb5a2f49b154cab3ba3454b6c5b27">ceph_mds_reply_info_in::pool_ns_data</a></div><div class="ttdeci">char * pool_ns_data</div><div class="ttdef"><b>Definition:</b> mds_client.h:51</div></div>
<div class="ttc" id="structceph__mds__client_html_a9d3035808f86b5ed5ef822a4b933dc17"><div class="ttname"><a href="structceph__mds__client.html#a9d3035808f86b5ed5ef822a4b933dc17">ceph_mds_client::num_cap_flushing</a></div><div class="ttdeci">int num_cap_flushing</div><div class="ttdef"><b>Definition:</b> mds_client.h:347</div></div>
<div class="ttc" id="mds__client_8h_html_ab672a0fe1db6cfa5a993c8e8cdc255fe"><div class="ttname"><a href="mds__client_8h.html#ab672a0fe1db6cfa5a993c8e8cdc255fe">ceph_mds_op_name</a></div><div class="ttdeci">const char * ceph_mds_op_name(int op)</div><div class="ttdef"><b>Definition:</b> strings.c:53</div></div>
<div class="ttc" id="structceph__mds__request_html_ac06c0535175f9329d0eb126b40ee2e08"><div class="ttname"><a href="structceph__mds__request.html#ac06c0535175f9329d0eb126b40ee2e08">ceph_mds_request::r_direct_mode</a></div><div class="ttdeci">int r_direct_mode</div><div class="ttdef"><b>Definition:</b> mds_client.h:235</div></div>
<div class="ttc" id="structceph__mds__request_html_ab63dc64357a11ff07fb64a9feb88a5e7"><div class="ttname"><a href="structceph__mds__request.html#ab63dc64357a11ff07fb64a9feb88a5e7">ceph_mds_request::r_inode</a></div><div class="ttdeci">struct inode * r_inode</div><div class="ttdef"><b>Definition:</b> mds_client.h:207</div></div>
<div class="ttc" id="structceph__pool__perm_html_acaae9f236ede34eff5220fc9b4205ff8"><div class="ttname"><a href="structceph__pool__perm.html#acaae9f236ede34eff5220fc9b4205ff8">ceph_pool_perm::pool</a></div><div class="ttdeci">s64 pool</div><div class="ttdef"><b>Definition:</b> mds_client.h:294</div></div>
<div class="ttc" id="ceph_2super_8h_html_ab9776e3e695e4d6214fd8061a0ab43cb"><div class="ttname"><a href="ceph_2super_8h.html#ab9776e3e695e4d6214fd8061a0ab43cb">ceph_vino</a></div><div class="ttdeci">static struct ceph_vino ceph_vino(struct inode *inode)</div><div class="ttdef"><b>Definition:</b> super.h:401</div></div>
<div class="ttc" id="mds__client_8h_html_a1be3860693af99a6c1da72580097294ca10f13f44768cd40fdc37fa3ba87028bb"><div class="ttname"><a href="mds__client_8h.html#a1be3860693af99a6c1da72580097294ca10f13f44768cd40fdc37fa3ba87028bb">USE_AUTH_MDS</a></div><div class="ttdef"><b>Definition:</b> mds_client.h:179</div></div>
<div class="ttc" id="structceph__mds__reply__info__parsed_html_a6d2ab830d4e8a84f3bf094c57f89e871"><div class="ttname"><a href="structceph__mds__reply__info__parsed.html#a6d2ab830d4e8a84f3bf094c57f89e871">ceph_mds_reply_info_parsed::dir_buf_size</a></div><div class="ttdeci">size_t dir_buf_size</div><div class="ttdef"><b>Definition:</b> mds_client.h:88</div></div>
<div class="ttc" id="structceph__mds__reply__info__parsed_html_ae9e6f292b980f63d2e70b14fbc76bc41"><div class="ttname"><a href="structceph__mds__reply__info__parsed.html#ae9e6f292b980f63d2e70b14fbc76bc41">ceph_mds_reply_info_parsed::has_create_ino</a></div><div class="ttdeci">bool has_create_ino</div><div class="ttdef"><b>Definition:</b> mds_client.h:99</div></div>
<div class="ttc" id="structceph__mds__session_html_a009ce5d4f1448c973ec510e573cf1a77"><div class="ttname"><a href="structceph__mds__session.html#a009ce5d4f1448c973ec510e573cf1a77">ceph_mds_session::s_readonly</a></div><div class="ttdeci">int s_readonly</div><div class="ttdef"><b>Definition:</b> mds_client.h:159</div></div>
<div class="ttc" id="mds__client_8h_html_aa3634bc15cfd9cb13b8778cff07fe63e"><div class="ttname"><a href="mds__client_8h.html#aa3634bc15cfd9cb13b8778cff07fe63e">ceph_mdsc_do_request</a></div><div class="ttdeci">int ceph_mdsc_do_request(struct ceph_mds_client *mdsc, struct inode *dir, struct ceph_mds_request *req)</div><div class="ttdef"><b>Definition:</b> mds_client.c:2393</div></div>
<div class="ttc" id="structceph__mds__client_html_a116bc289b2d7c7cdfffc326fc8798651"><div class="ttname"><a href="structceph__mds__client.html#a116bc289b2d7c7cdfffc326fc8798651">ceph_mds_client::last_snap_seq</a></div><div class="ttdeci">u64 last_snap_seq</div><div class="ttdef"><b>Definition:</b> mds_client.h:326</div></div>
<div class="ttc" id="structceph__mds__client_html_ad097b335334a4989afe74fbe9337f4e1"><div class="ttname"><a href="structceph__mds__client.html#ad097b335334a4989afe74fbe9337f4e1">ceph_mds_client::last_tid</a></div><div class="ttdeci">u64 last_tid</div><div class="ttdef"><b>Definition:</b> mds_client.h:332</div></div>
<div class="ttc" id="structceph__mds__request_html_af66ade2ec05b4c09b24ec33456c2ea87"><div class="ttname"><a href="structceph__mds__request.html#af66ade2ec05b4c09b24ec33456c2ea87">ceph_mds_request::r_target_inode</a></div><div class="ttdeci">struct inode * r_target_inode</div><div class="ttdef"><b>Definition:</b> mds_client.h:215</div></div>
<div class="ttc" id="structceph__mds__request_html_aa07cbe032d554bbc952cb144417c8d0c"><div class="ttname"><a href="structceph__mds__request.html#aa07cbe032d554bbc952cb144417c8d0c">ceph_mds_request::r_dentry_unless</a></div><div class="ttdeci">int r_dentry_unless</div><div class="ttdef"><b>Definition:</b> mds_client.h:243</div></div>
<div class="ttc" id="structceph__mds__client_html_afefd1357f55445969518db413cdebaef"><div class="ttname"><a href="structceph__mds__client.html#afefd1357f55445969518db413cdebaef">ceph_mds_client::num_dentry</a></div><div class="ttdeci">int num_dentry</div><div class="ttdef"><b>Definition:</b> mds_client.h:373</div></div>
<div class="ttc" id="mds__client_8h_html_ace5b628cb3ad36ba876c1792e2922d81"><div class="ttname"><a href="mds__client_8h.html#ace5b628cb3ad36ba876c1792e2922d81">ceph_mdsc_init</a></div><div class="ttdeci">int ceph_mdsc_init(struct ceph_fs_client *fsc)</div><div class="ttdef"><b>Definition:</b> mds_client.c:3588</div></div>
<div class="ttc" id="structceph__mds__reply__info__in_html_abac184002317d1e13ad5a246b655874c"><div class="ttname"><a href="structceph__mds__reply__info__in.html#abac184002317d1e13ad5a246b655874c">ceph_mds_reply_info_in::xattr_data</a></div><div class="ttdeci">char * xattr_data</div><div class="ttdef"><b>Definition:</b> mds_client.h:46</div></div>
<div class="ttc" id="mds__client_8h_html_a1be3860693af99a6c1da72580097294ca394f7a1179eda0e382ae488ed6286602"><div class="ttname"><a href="mds__client_8h.html#a1be3860693af99a6c1da72580097294ca394f7a1179eda0e382ae488ed6286602">USE_RANDOM_MDS</a></div><div class="ttdef"><b>Definition:</b> mds_client.h:178</div></div>
<div class="ttc" id="structceph__mds__request_html_aed1e25a5cdc5bf3b747449e548a1e1e2"><div class="ttname"><a href="structceph__mds__request.html#aed1e25a5cdc5bf3b747449e548a1e1e2">ceph_mds_request::r_uid</a></div><div class="ttdeci">kuid_t r_uid</div><div class="ttdef"><b>Definition:</b> mds_client.h:230</div></div>
<div class="ttc" id="mds__client_8h_html_a05ecbf1d7ee0cdb585e3480b5d9833da"><div class="ttname"><a href="mds__client_8h.html#a05ecbf1d7ee0cdb585e3480b5d9833da">__ceph_mdsc_drop_dentry_lease</a></div><div class="ttdeci">void __ceph_mdsc_drop_dentry_lease(struct dentry *dentry)</div><div class="ttdef"><b>Definition:</b> mds_client.c:3346</div></div>
<div class="ttc" id="structceph__mds__request_html_a4b89f620269aef96fce66fd0c1684149"><div class="ttname"><a href="structceph__mds__request.html#a4b89f620269aef96fce66fd0c1684149">ceph_mds_request::r_started</a></div><div class="ttdeci">unsigned long r_started</div><div class="ttdef"><b>Definition:</b> mds_client.h:256</div></div>
<div class="ttc" id="structceph__mds__reply__info__parsed_html_adb8cac6ea86630af48fcd744b1792873"><div class="ttname"><a href="structceph__mds__reply__info__parsed.html#adb8cac6ea86630af48fcd744b1792873">ceph_mds_reply_info_parsed::dname</a></div><div class="ttdeci">char * dname</div><div class="ttdef"><b>Definition:</b> mds_client.h:76</div></div>
<div class="ttc" id="structceph__mds__reply__info__parsed_html_a66a1784aa227b19a946b68fac76eb6c2"><div class="ttname"><a href="structceph__mds__reply__info__parsed.html#a66a1784aa227b19a946b68fac76eb6c2">ceph_mds_reply_info_parsed::dir_end</a></div><div class="ttdeci">bool dir_end</div><div class="ttdef"><b>Definition:</b> mds_client.h:90</div></div>
<div class="ttc" id="mds__client_8h_html_ac6eee48a0498dae9f32e404b418a5b2f"><div class="ttname"><a href="mds__client_8h.html#ac6eee48a0498dae9f32e404b418a5b2f">ceph_mdsc_destroy</a></div><div class="ttdeci">void ceph_mdsc_destroy(struct ceph_fs_client *fsc)</div><div class="ttdef"><b>Definition:</b> mds_client.c:3879</div></div>
<div class="ttc" id="structceph__mds__reply__dir__entry_html_afe90d1c7bb8c4e2fadc00aa05ea96f51"><div class="ttname"><a href="structceph__mds__reply__dir__entry.html#afe90d1c7bb8c4e2fadc00aa05ea96f51">ceph_mds_reply_dir_entry::name_len</a></div><div class="ttdeci">u32 name_len</div><div class="ttdef"><b>Definition:</b> mds_client.h:58</div></div>
<div class="ttc" id="structceph__mds__client_html_a24e75cbcbead255945602551cc4cbcfd"><div class="ttname"><a href="structceph__mds__client.html#a24e75cbcbead255945602551cc4cbcfd">ceph_mds_client::fsc</a></div><div class="ttdeci">struct ceph_fs_client * fsc</div><div class="ttdef"><b>Definition:</b> mds_client.h:303</div></div>
<div class="ttc" id="mds__client_8h_html_a900dca9b26de42491763226e12dcd47ba7e8f59bef2dc796f443b6db566246441"><div class="ttname"><a href="mds__client_8h.html#a900dca9b26de42491763226e12dcd47ba7e8f59bef2dc796f443b6db566246441">CEPH_MDS_SESSION_CLOSING</a></div><div class="ttdef"><b>Definition:</b> mds_client.h:130</div></div>
<div class="ttc" id="mds__client_8h_html_aaa281eda32f4528f44e1a3aa21b74108"><div class="ttname"><a href="mds__client_8h.html#aaa281eda32f4528f44e1a3aa21b74108">ceph_mdsc_release_request</a></div><div class="ttdeci">void ceph_mdsc_release_request(struct kref *kref)</div><div class="ttdef"><b>Definition:</b> mds_client.c:560</div></div>
<div class="ttc" id="structceph__mds__request_html"><div class="ttname"><a href="structceph__mds__request.html">ceph_mds_request</a></div><div class="ttdef"><b>Definition:</b> mds_client.h:199</div></div>
<div class="ttc" id="structceph__mds__request_html_ab3fffaeb4c923cbf323cd0dc5059990b"><div class="ttname"><a href="structceph__mds__request.html#ab3fffaeb4c923cbf323cd0dc5059990b">ceph_mds_request::r_parent</a></div><div class="ttdeci">struct inode * r_parent</div><div class="ttdef"><b>Definition:</b> mds_client.h:214</div></div>
<div class="ttc" id="structceph__mds__reply__info__in_html_a3c87409705ee619717698b835239b7e4"><div class="ttname"><a href="structceph__mds__reply__info__in.html#a3c87409705ee619717698b835239b7e4">ceph_mds_reply_info_in::inline_len</a></div><div class="ttdeci">u32 inline_len</div><div class="ttdef"><b>Definition:</b> mds_client.h:48</div></div>
<div class="ttc" id="structceph__mds__session_html_afef365279a404d9990cd01d5b60008d2"><div class="ttname"><a href="structceph__mds__session.html#afef365279a404d9990cd01d5b60008d2">ceph_mds_session::s_mds</a></div><div class="ttdeci">int s_mds</div><div class="ttdef"><b>Definition:</b> mds_client.h:138</div></div>
<div class="ttc" id="structceph__mds__request_html_ae28912d53e7f304eec84ef972458ff5f"><div class="ttname"><a href="structceph__mds__request.html#ae28912d53e7f304eec84ef972458ff5f">ceph_mds_request::r_sent_on_mseq</a></div><div class="ttdeci">u32 r_sent_on_mseq</div><div class="ttdef"><b>Definition:</b> mds_client.h:272</div></div>
<div class="ttc" id="mds__client_8h_html_a2d49720e321e4db83cec5184ddbf597b"><div class="ttname"><a href="mds__client_8h.html#a2d49720e321e4db83cec5184ddbf597b">ceph_send_msg_mds</a></div><div class="ttdeci">int ceph_send_msg_mds(struct ceph_mds_client *mdsc, struct ceph_msg *msg, int mds)</div></div>
<div class="ttc" id="structceph__mds__reply__dir__entry_html_a3810f7b2a83b1c08122d8f6e21adca44"><div class="ttname"><a href="structceph__mds__reply__dir__entry.html#a3810f7b2a83b1c08122d8f6e21adca44">ceph_mds_reply_dir_entry::lease</a></div><div class="ttdeci">struct ceph_mds_reply_lease * lease</div><div class="ttdef"><b>Definition:</b> mds_client.h:59</div></div>
<div class="ttc" id="structceph__mds__client_html"><div class="ttname"><a href="structceph__mds__client.html">ceph_mds_client</a></div><div class="ttdef"><b>Definition:</b> mds_client.h:302</div></div>
<div class="ttc" id="mds__client_8h_html_a57011cb807a800acece931f1c2940df8"><div class="ttname"><a href="mds__client_8h.html#a57011cb807a800acece931f1c2940df8">ceph_mds_request_wait_callback_t</a></div><div class="ttdeci">int(* ceph_mds_request_wait_callback_t)(struct ceph_mds_client *mdsc, struct ceph_mds_request *req)</div><div class="ttdef"><b>Definition:</b> mds_client.h:193</div></div>
<div class="ttc" id="structceph__mds__client_html_a5c9c8714c7dd73711399a492d9db3716"><div class="ttname"><a href="structceph__mds__client.html#a5c9c8714c7dd73711399a492d9db3716">ceph_mds_client::caps_use_count</a></div><div class="ttdeci">int caps_use_count</div><div class="ttdef"><b>Definition:</b> mds_client.h:366</div></div>
<div class="ttc" id="structceph__mds__request_html_ae83f6fd728b4384cc26936a596438324"><div class="ttname"><a href="structceph__mds__request.html#ae83f6fd728b4384cc26936a596438324">ceph_mds_request::r_kref</a></div><div class="ttdeci">struct kref r_kref</div><div class="ttdef"><b>Definition:</b> mds_client.h:274</div></div>
<div class="ttc" id="structceph__mds__session_html_aa849b24c488ca4ba4fc31156ba1d67bb"><div class="ttname"><a href="structceph__mds__session.html#aa849b24c488ca4ba4fc31156ba1d67bb">ceph_mds_session::s_cap_ttl</a></div><div class="ttdeci">unsigned long s_cap_ttl</div><div class="ttdef"><b>Definition:</b> mds_client.h:151</div></div>
<div class="ttc" id="mds__client_8h_html_ac28e27c51a386b2d032e592c3d4a83df"><div class="ttname"><a href="mds__client_8h.html#ac28e27c51a386b2d032e592c3d4a83df">ceph_get_mds_session</a></div><div class="ttdeci">static struct ceph_mds_session * ceph_get_mds_session(struct ceph_mds_session *s)</div><div class="ttdef"><b>Definition:</b> mds_client.h:387</div></div>
<div class="ttc" id="mds__client_8h_html_a52c77d28ba4631b096096ae4d07334b2"><div class="ttname"><a href="mds__client_8h.html#a52c77d28ba4631b096096ae4d07334b2">ceph_mds_request_callback_t</a></div><div class="ttdeci">void(* ceph_mds_request_callback_t)(struct ceph_mds_client *mdsc, struct ceph_mds_request *req)</div><div class="ttdef"><b>Definition:</b> mds_client.h:188</div></div>
<div class="ttc" id="summary_8h_html_a63c41f9614ee9a4e1beb75eabad72f22"><div class="ttname"><a href="summary_8h.html#a63c41f9614ee9a4e1beb75eabad72f22">inode</a></div><div class="ttdeci">jint32_t inode</div><div class="ttdef"><b>Definition:</b> summary.h:848</div></div>
<div class="ttc" id="structceph__mds__client_html_a345133d31a1b147ceee372a075e6e7d5"><div class="ttname"><a href="structceph__mds__client.html#a345133d31a1b147ceee372a075e6e7d5">ceph_mds_client::mdsmap_err</a></div><div class="ttdeci">int mdsmap_err</div><div class="ttdef"><b>Definition:</b> mds_client.h:310</div></div>
<div class="ttc" id="structceph__mds__session_html_a31469762f12e9a68e7c11034704be72d"><div class="ttname"><a href="structceph__mds__session.html#a31469762f12e9a68e7c11034704be72d">ceph_mds_session::s_cap_iterator</a></div><div class="ttdeci">struct ceph_cap * s_cap_iterator</div><div class="ttdef"><b>Definition:</b> mds_client.h:161</div></div>
<div class="ttc" id="mds__client_8h_html_a900dca9b26de42491763226e12dcd47ba1a5a975815d8dc279b719876e95062d9"><div class="ttname"><a href="mds__client_8h.html#a900dca9b26de42491763226e12dcd47ba1a5a975815d8dc279b719876e95062d9">CEPH_MDS_SESSION_OPEN</a></div><div class="ttdef"><b>Definition:</b> mds_client.h:128</div></div>
<div class="ttc" id="mds__client_8h_html_a900dca9b26de42491763226e12dcd47baf61590c570680cbe24551b89e5f5f57a"><div class="ttname"><a href="mds__client_8h.html#a900dca9b26de42491763226e12dcd47baf61590c570680cbe24551b89e5f5f57a">CEPH_MDS_SESSION_REJECTED</a></div><div class="ttdef"><b>Definition:</b> mds_client.h:133</div></div>
<div class="ttc" id="structceph__mds__reply__info__in_html"><div class="ttname"><a href="structceph__mds__reply__info__in.html">ceph_mds_reply_info_in</a></div><div class="ttdef"><b>Definition:</b> mds_client.h:40</div></div>
<div class="ttc" id="structceph__mds__reply__info__in_html_acf0d01a7269875e631dbbd64136f0f55"><div class="ttname"><a href="structceph__mds__reply__info__in.html#acf0d01a7269875e631dbbd64136f0f55">ceph_mds_reply_info_in::xattr_len</a></div><div class="ttdeci">u32 xattr_len</div><div class="ttdef"><b>Definition:</b> mds_client.h:45</div></div>
<div class="ttc" id="structceph__mds__session_html_ad1c537053fc7cebfa2c98800d8088232"><div class="ttname"><a href="structceph__mds__session.html#ad1c537053fc7cebfa2c98800d8088232">ceph_mds_session::s_trim_caps</a></div><div class="ttdeci">int s_trim_caps</div><div class="ttdef"><b>Definition:</b> mds_client.h:156</div></div>
<div class="ttc" id="structceph__mds__session_html_a9a88c8dee8dfb06937d0df7e4f956b0c"><div class="ttname"><a href="structceph__mds__session.html#a9a88c8dee8dfb06937d0df7e4f956b0c">ceph_mds_session::s_state</a></div><div class="ttdeci">int s_state</div><div class="ttdef"><b>Definition:</b> mds_client.h:139</div></div>
<div class="ttc" id="structceph__mds__request_html_aaea76217ec3a752b2a8d5aadb90ac24e"><div class="ttname"><a href="structceph__mds__request.html#aaea76217ec3a752b2a8d5aadb90ac24e">ceph_mds_request::r_req_flags</a></div><div class="ttdeci">unsigned long r_req_flags</div><div class="ttdef"><b>Definition:</b> mds_client.h:224</div></div>
<div class="ttc" id="structceph__mds__request_html_aa4fab7de038a03ea4688810a030804da"><div class="ttname"><a href="structceph__mds__request.html#aa4fab7de038a03ea4688810a030804da">ceph_mds_request::r_attempts</a></div><div class="ttdeci">int r_attempts</div><div class="ttdef"><b>Definition:</b> mds_client.h:269</div></div>
<div class="ttc" id="structceph__mds__request_html_aff23696c7b324e84cd9f4541da1737f1"><div class="ttname"><a href="structceph__mds__request.html#aff23696c7b324e84cd9f4541da1737f1">ceph_mds_request::r_old_dentry_dir</a></div><div class="ttdeci">struct inode * r_old_dentry_dir</div><div class="ttdef"><b>Definition:</b> mds_client.h:210</div></div>
<div class="ttc" id="structceph__mds__request_html_a692efdf4e92d74f8d9e090f8d2d32efa"><div class="ttname"><a href="structceph__mds__request.html#a692efdf4e92d74f8d9e090f8d2d32efa">ceph_mds_request::r_fmode</a></div><div class="ttdeci">int r_fmode</div><div class="ttdef"><b>Definition:</b> mds_client.h:229</div></div>
<div class="ttc" id="structceph__mds__request_html_ac5058e6fbbc9373cfb74bd5922feb400"><div class="ttname"><a href="structceph__mds__request.html#ac5058e6fbbc9373cfb74bd5922feb400">ceph_mds_request::r_op</a></div><div class="ttdeci">int r_op</div><div class="ttdef"><b>Definition:</b> mds_client.h:204</div></div>
<div class="ttc" id="structceph__mds__request_html_af348d5d0d0aa3afdbe5f5d40bf59cfee"><div class="ttname"><a href="structceph__mds__request.html#af348d5d0d0aa3afdbe5f5d40bf59cfee">ceph_mds_request::r_dir_ordered_cnt</a></div><div class="ttdeci">long long r_dir_ordered_cnt</div><div class="ttdef"><b>Definition:</b> mds_client.h:283</div></div>
<div class="ttc" id="structceph__mds__session_html_aea3107b7204f4cde80d29b515e40df80"><div class="ttname"><a href="structceph__mds__session.html#aea3107b7204f4cde80d29b515e40df80">ceph_mds_session::s_ttl</a></div><div class="ttdeci">unsigned long s_ttl</div><div class="ttdef"><b>Definition:</b> mds_client.h:140</div></div>
<div class="ttc" id="structceph__mds__client_html_a2b11bed988564ffe8a0f7ced0069ae21"><div class="ttname"><a href="structceph__mds__client.html#a2b11bed988564ffe8a0f7ced0069ae21">ceph_mds_client::sessions</a></div><div class="ttdeci">struct ceph_mds_session ** sessions</div><div class="ttdef"><b>Definition:</b> mds_client.h:312</div></div>
<div class="ttc" id="structceph__mds__request_html_a3a8d7cd9a1792280239f445566868fb1"><div class="ttname"><a href="structceph__mds__request.html#a3a8d7cd9a1792280239f445566868fb1">ceph_mds_request::r_tid</a></div><div class="ttdeci">u64 r_tid</div><div class="ttdef"><b>Definition:</b> mds_client.h:200</div></div>
<div class="ttc" id="structceph__mds__request_html_a88c0daf006d27a53fc45665c7c4fc1e0"><div class="ttname"><a href="structceph__mds__request.html#a88c0daf006d27a53fc45665c7c4fc1e0">ceph_mds_request::r_unsafe_dir</a></div><div class="ttdeci">struct inode * r_unsafe_dir</div><div class="ttdef"><b>Definition:</b> mds_client.h:261</div></div>
<div class="ttc" id="structceph__mds__session_html_a9fb242041fa2c0e7b602a5b3c09e4943"><div class="ttname"><a href="structceph__mds__session.html#a9fb242041fa2c0e7b602a5b3c09e4943">ceph_mds_session::s_seq</a></div><div class="ttdeci">u64 s_seq</div><div class="ttdef"><b>Definition:</b> mds_client.h:141</div></div>
<div class="ttc" id="structceph__mds__reply__info__parsed_html_a6fe25d1c6d32f51f32c01db36d5292a3"><div class="ttname"><a href="structceph__mds__reply__info__parsed.html#a6fe25d1c6d32f51f32c01db36d5292a3">ceph_mds_reply_info_parsed::dir_entries</a></div><div class="ttdeci">struct ceph_mds_reply_dir_entry * dir_entries</div><div class="ttdef"><b>Definition:</b> mds_client.h:94</div></div>
<div class="ttc" id="structceph__mds__session_html_a5291a58df3a00e0faa9ec3c7d740ff32"><div class="ttname"><a href="structceph__mds__session.html#a5291a58df3a00e0faa9ec3c7d740ff32">ceph_mds_session::s_cap_gen</a></div><div class="ttdeci">u32 s_cap_gen</div><div class="ttdef"><b>Definition:</b> mds_client.h:150</div></div>
<div class="ttc" id="structceph__mds__client_html_ac01d3ff73bfc7776dcea96186b5c89b8"><div class="ttname"><a href="structceph__mds__client.html#ac01d3ff73bfc7776dcea96186b5c89b8">ceph_mds_client::caps_reserve_count</a></div><div class="ttdeci">int caps_reserve_count</div><div class="ttdef"><b>Definition:</b> mds_client.h:367</div></div>
<div class="ttc" id="structceph__mds__client_html_a898a5d891ad3b352cbf9e2ce5103bcfc"><div class="ttname"><a href="structceph__mds__client.html#a898a5d891ad3b352cbf9e2ce5103bcfc">ceph_mds_client::snap_empty_lock</a></div><div class="ttdeci">spinlock_t snap_empty_lock</div><div class="ttdef"><b>Definition:</b> mds_client.h:330</div></div>
<div class="ttc" id="structceph__mds__request_html_ac31b1938365db3ae94506a7fcdf9e6a5"><div class="ttname"><a href="structceph__mds__request.html#ac31b1938365db3ae94506a7fcdf9e6a5">ceph_mds_request::r_old_dentry</a></div><div class="ttdeci">struct dentry * r_old_dentry</div><div class="ttdef"><b>Definition:</b> mds_client.h:209</div></div>
<div class="ttc" id="structceph__mds__client_html_ab12a5e8a837944057c0523179ae51fa1"><div class="ttname"><a href="structceph__mds__client.html#ab12a5e8a837944057c0523179ae51fa1">ceph_mds_client::oldest_tid</a></div><div class="ttdeci">u64 oldest_tid</div><div class="ttdef"><b>Definition:</b> mds_client.h:333</div></div>
<div class="ttc" id="mds__client_8h_html_a0acb90b9da78619536106fe846531c68"><div class="ttname"><a href="mds__client_8h.html#a0acb90b9da78619536106fe846531c68">ceph_mdsc_get_request</a></div><div class="ttdeci">static void ceph_mdsc_get_request(struct ceph_mds_request *req)</div><div class="ttdef"><b>Definition:</b> mds_client.h:417</div></div>
<div class="ttc" id="mds__client_8h_html_a679279e05084bf0e754dd17f41d7cbc7"><div class="ttname"><a href="mds__client_8h.html#a679279e05084bf0e754dd17f41d7cbc7">ceph_mdsc_force_umount</a></div><div class="ttdeci">void ceph_mdsc_force_umount(struct ceph_mds_client *mdsc)</div><div class="ttdef"><b>Definition:</b> mds_client.c:3840</div></div>
<div class="ttc" id="structceph__mds__session_html_a060f315fabf7d120f1505eef25973377"><div class="ttname"><a href="structceph__mds__session.html#a060f315fabf7d120f1505eef25973377">ceph_mds_session::s_gen_ttl_lock</a></div><div class="ttdeci">spinlock_t s_gen_ttl_lock</div><div class="ttdef"><b>Definition:</b> mds_client.h:149</div></div>
<div class="ttc" id="mds__client_8h_html_a6c92910b8600ccfefb8063f55e4785a6"><div class="ttname"><a href="mds__client_8h.html#a6c92910b8600ccfefb8063f55e4785a6">ceph_mdsc_pre_umount</a></div><div class="ttdeci">void ceph_mdsc_pre_umount(struct ceph_mds_client *mdsc)</div><div class="ttdef"><b>Definition:</b> mds_client.c:3681</div></div>
<div class="ttc" id="mds__client_8h_html_a0b096dcb63b03f55255cf00134d6d7ff"><div class="ttname"><a href="mds__client_8h.html#a0b096dcb63b03f55255cf00134d6d7ff">__ceph_lookup_mds_session</a></div><div class="ttdeci">struct ceph_mds_session * __ceph_lookup_mds_session(struct ceph_mds_client *, int mds)</div><div class="ttdef"><b>Definition:</b> mds_client.c:426</div></div>
<div class="ttc" id="structceph__mds__request_html_ad02f9fa5c684617ce1abb08088b8aced"><div class="ttname"><a href="structceph__mds__request.html#ad02f9fa5c684617ce1abb08088b8aced">ceph_mds_request::r_path2</a></div><div class="ttdeci">char * r_path2</div><div class="ttdef"><b>Definition:</b> mds_client.h:211</div></div>
<div class="ttc" id="structceph__mds__request_html_a646f192aba152e8863c189920c983877"><div class="ttname"><a href="structceph__mds__request.html#a646f192aba152e8863c189920c983877">ceph_mds_request::r_readdir_offset</a></div><div class="ttdeci">u32 r_readdir_offset</div><div class="ttdef"><b>Definition:</b> mds_client.h:285</div></div>
<div class="ttc" id="structceph__mds__client_html_a157993f34029147942225aa7952a88c6"><div class="ttname"><a href="structceph__mds__client.html#a157993f34029147942225aa7952a88c6">ceph_mds_client::cap_flushing_wq</a></div><div class="ttdeci">wait_queue_head_t cap_flushing_wq</div><div class="ttdef"><b>Definition:</b> mds_client.h:349</div></div>
<div class="ttc" id="structceph__mds__session_html_a90f86a847bba1c9fb7744701f97766cf"><div class="ttname"><a href="structceph__mds__session.html#a90f86a847bba1c9fb7744701f97766cf">ceph_mds_session::s_cap_lock</a></div><div class="ttdeci">spinlock_t s_cap_lock</div><div class="ttdef"><b>Definition:</b> mds_client.h:154</div></div>
<div class="ttc" id="structceph__mds__reply__info__in_html_af57f535f07457d27a16983806804cc59"><div class="ttname"><a href="structceph__mds__reply__info__in.html#af57f535f07457d27a16983806804cc59">ceph_mds_reply_info_in::dir_layout</a></div><div class="ttdeci">struct ceph_dir_layout dir_layout</div><div class="ttdef"><b>Definition:</b> mds_client.h:42</div></div>
<div class="ttc" id="mds__client_8h_html_a1d3c4cd04177b319e012186a5a04c39b"><div class="ttname"><a href="mds__client_8h.html#a1d3c4cd04177b319e012186a5a04c39b">ceph_mdsc_lease_send_msg</a></div><div class="ttdeci">void ceph_mdsc_lease_send_msg(struct ceph_mds_session *session, struct inode *inode, struct dentry *dentry, char action, u32 seq)</div><div class="ttdef"><b>Definition:</b> mds_client.c:3459</div></div>
<div class="ttc" id="structceph__mds__request_html_af673a84b0a79290b7f46409eeae4b23c"><div class="ttname"><a href="structceph__mds__request.html#af673a84b0a79290b7f46409eeae4b23c">ceph_mds_request::r_timeout</a></div><div class="ttdeci">unsigned long r_timeout</div><div class="ttdef"><b>Definition:</b> mds_client.h:255</div></div>
<div class="ttc" id="structceph__mds__reply__info__parsed_html_a4dc132076a255af17d9eede0eb0149ea"><div class="ttname"><a href="structceph__mds__reply__info__parsed.html#a4dc132076a255af17d9eede0eb0149ea">ceph_mds_reply_info_parsed::dirfrag</a></div><div class="ttdeci">struct ceph_mds_reply_dirfrag * dirfrag</div><div class="ttdef"><b>Definition:</b> mds_client.h:75</div></div>
<div class="ttc" id="structceph__mds__reply__dir__entry_html_ae0b8b6f42d26f4bba5f40a842a61876f"><div class="ttname"><a href="structceph__mds__reply__dir__entry.html#ae0b8b6f42d26f4bba5f40a842a61876f">ceph_mds_reply_dir_entry::offset</a></div><div class="ttdeci">loff_t offset</div><div class="ttdef"><b>Definition:</b> mds_client.h:61</div></div>
<div class="ttc" id="mds__client_8h_html_a900dca9b26de42491763226e12dcd47bac924b53ec580e26dfd439c9fee728d2c"><div class="ttname"><a href="mds__client_8h.html#a900dca9b26de42491763226e12dcd47bac924b53ec580e26dfd439c9fee728d2c">CEPH_MDS_SESSION_RECONNECTING</a></div><div class="ttdef"><b>Definition:</b> mds_client.h:132</div></div>
<div class="ttc" id="mds__client_8h_html_a90cd624d396cca56a05acaddd072cb3a"><div class="ttname"><a href="mds__client_8h.html#a90cd624d396cca56a05acaddd072cb3a">ceph_mdsc_close_sessions</a></div><div class="ttdeci">void ceph_mdsc_close_sessions(struct ceph_mds_client *mdsc)</div><div class="ttdef"><b>Definition:</b> mds_client.c:3786</div></div>
<div class="ttc" id="structceph__mds__request_html_aa7efc31e506f0ebd1f0787126f29038c"><div class="ttname"><a href="structceph__mds__request.html#aa7efc31e506f0ebd1f0787126f29038c">ceph_mds_request::r_pagelist</a></div><div class="ttdeci">struct ceph_pagelist * r_pagelist</div><div class="ttdef"><b>Definition:</b> mds_client.h:239</div></div>
<div class="ttc" id="structceph__mds__client_html_a53aa23a9d6a302d4724770b342d1c965"><div class="ttname"><a href="structceph__mds__client.html#a53aa23a9d6a302d4724770b342d1c965">ceph_mds_client::num_sessions</a></div><div class="ttdeci">atomic_t num_sessions</div><div class="ttdef"><b>Definition:</b> mds_client.h:313</div></div>
<div class="ttc" id="structceph__fs__client_html"><div class="ttname"><a href="structceph__fs__client.html">ceph_fs_client</a></div><div class="ttdef"><b>Definition:</b> super.h:93</div></div>
<div class="ttc" id="structceph__mds__request_html_a19b8f9f9a0100cfa70a0da952dc2d6dc"><div class="ttname"><a href="structceph__mds__request.html#a19b8f9f9a0100cfa70a0da952dc2d6dc">ceph_mds_request::r_request</a></div><div class="ttdeci">struct ceph_msg * r_request</div><div class="ttdef"><b>Definition:</b> mds_client.h:248</div></div>
<div class="ttc" id="structceph__mds__request_html_adf7d58fdb2e1587d71aa43105d24cda1"><div class="ttname"><a href="structceph__mds__request.html#adf7d58fdb2e1587d71aa43105d24cda1">ceph_mds_request::r_callback</a></div><div class="ttdeci">ceph_mds_request_callback_t r_callback</div><div class="ttdef"><b>Definition:</b> mds_client.h:278</div></div>
<div class="ttc" id="structceph__mds__client_html_a08ff5565e5438f5c558a43b2e4bd4766"><div class="ttname"><a href="structceph__mds__client.html#a08ff5565e5438f5c558a43b2e4bd4766">ceph_mds_client::caps_min_count</a></div><div class="ttdeci">int caps_min_count</div><div class="ttdef"><b>Definition:</b> mds_client.h:369</div></div>
<div class="ttc" id="structceph__mds__reply__info__parsed_html_a28619d903db7ba822afe3560d82fa618"><div class="ttname"><a href="structceph__mds__reply__info__parsed.html#a28619d903db7ba822afe3560d82fa618">ceph_mds_reply_info_parsed::hash_order</a></div><div class="ttdeci">bool hash_order</div><div class="ttdef"><b>Definition:</b> mds_client.h:92</div></div>
<div class="ttc" id="structceph__mds__reply__info__in_html_abf1cc02281746b870690f91f082d51db"><div class="ttname"><a href="structceph__mds__reply__info__in.html#abf1cc02281746b870690f91f082d51db">ceph_mds_reply_info_in::symlink</a></div><div class="ttdeci">char * symlink</div><div class="ttdef"><b>Definition:</b> mds_client.h:44</div></div>
<div class="ttc" id="structceph__mds__client_html_a31553684041ce2b129ea34e55864768f"><div class="ttname"><a href="structceph__mds__client.html#a31553684041ce2b129ea34e55864768f">ceph_mds_client::last_cap_flush_tid</a></div><div class="ttdeci">u64 last_cap_flush_tid</div><div class="ttdef"><b>Definition:</b> mds_client.h:343</div></div>
<div class="ttc" id="structceph__mds__request_html_a1bde526a9d2619f6390ec7b0e345bbc5"><div class="ttname"><a href="structceph__mds__request.html#a1bde526a9d2619f6390ec7b0e345bbc5">ceph_mds_request::r_gid</a></div><div class="ttdeci">kgid_t r_gid</div><div class="ttdef"><b>Definition:</b> mds_client.h:231</div></div>
<div class="ttc" id="structceph__mds__reply__info__parsed_html"><div class="ttname"><a href="structceph__mds__reply__info__parsed.html">ceph_mds_reply_info_parsed</a></div><div class="ttdef"><b>Definition:</b> mds_client.h:70</div></div>
<div class="ttc" id="mds__client_8h_html_aa5c5e0f0c721a71ac5eaa57b1621acaf"><div class="ttname"><a href="mds__client_8h.html#aa5c5e0f0c721a71ac5eaa57b1621acaf">ceph_mdsc_submit_request</a></div><div class="ttdeci">void ceph_mdsc_submit_request(struct ceph_mds_client *mdsc, struct ceph_mds_request *req)</div><div class="ttdef"><b>Definition:</b> mds_client.c:2379</div></div>
<div class="ttc" id="structceph__mds__request_html_a9f047b3a0731af962432a53c189641e9"><div class="ttname"><a href="structceph__mds__request.html#a9f047b3a0731af962432a53c189641e9">ceph_mds_request::r_dir_release_cnt</a></div><div class="ttdeci">long long r_dir_release_cnt</div><div class="ttdef"><b>Definition:</b> mds_client.h:282</div></div>
<div class="ttc" id="mds__client_8h_html_a881d6a999ea651540ad5c554182b267d"><div class="ttname"><a href="mds__client_8h.html#a881d6a999ea651540ad5c554182b267d">ceph_invalidate_dir_request</a></div><div class="ttdeci">void ceph_invalidate_dir_request(struct ceph_mds_request *req)</div><div class="ttdef"><b>Definition:</b> mds_client.c:2472</div></div>
<div class="ttc" id="structceph__mds__client_html_aacc004b6f111b694434483ece63c48fb"><div class="ttname"><a href="structceph__mds__client.html#aacc004b6f111b694434483ece63c48fb">ceph_mds_client::stopping</a></div><div class="ttdeci">int stopping</div><div class="ttdef"><b>Definition:</b> mds_client.h:315</div></div>
<div class="ttc" id="structceph__mds__reply__info__parsed_html_a8631de13fc8262e4f43c492ceb8be802"><div class="ttname"><a href="structceph__mds__reply__info__parsed.html#a8631de13fc8262e4f43c492ceb8be802">ceph_mds_reply_info_parsed::dir_complete</a></div><div class="ttdeci">bool dir_complete</div><div class="ttdef"><b>Definition:</b> mds_client.h:91</div></div>
<div class="ttc" id="structceph__mds__client_html_a4f2ac18146193b1c527b17e3cfd7fee4"><div class="ttname"><a href="structceph__mds__client.html#a4f2ac18146193b1c527b17e3cfd7fee4">ceph_mds_client::session_close_wq</a></div><div class="ttdeci">wait_queue_head_t session_close_wq</div><div class="ttdef"><b>Definition:</b> mds_client.h:308</div></div>
<div class="ttc" id="mds__client_8h_html_a900dca9b26de42491763226e12dcd47ba321b08917eff83893ecadf8df673a17f"><div class="ttname"><a href="mds__client_8h.html#a900dca9b26de42491763226e12dcd47ba321b08917eff83893ecadf8df673a17f">CEPH_MDS_SESSION_HUNG</a></div><div class="ttdef"><b>Definition:</b> mds_client.h:129</div></div>
<div class="ttc" id="structceph__mds__client_html_aa282e83334eee61e8b30516980d33f2d"><div class="ttname"><a href="structceph__mds__client.html#aa282e83334eee61e8b30516980d33f2d">ceph_mds_client::cap_delay_lock</a></div><div class="ttdeci">spinlock_t cap_delay_lock</div><div class="ttdef"><b>Definition:</b> mds_client.h:339</div></div>
<div class="ttc" id="structceph__mds__request_html_ab50da71b1525e3fff44cb0cae440c308"><div class="ttname"><a href="structceph__mds__request.html#ab50da71b1525e3fff44cb0cae440c308">ceph_mds_request::r_reply</a></div><div class="ttdeci">struct ceph_msg * r_reply</div><div class="ttdef"><b>Definition:</b> mds_client.h:250</div></div>
<div class="ttc" id="structceph__mds__session_html_a3c7eb66ad272276128d35532b751b61b"><div class="ttname"><a href="structceph__mds__session.html#a3c7eb66ad272276128d35532b751b61b">ceph_mds_session::s_mdsc</a></div><div class="ttdeci">struct ceph_mds_client * s_mdsc</div><div class="ttdef"><b>Definition:</b> mds_client.h:137</div></div>
<div class="ttc" id="mds__client_8h_html_a2cdaf6b1bd65bdb7a17c4b7a4a9a3881"><div class="ttname"><a href="mds__client_8h.html#a2cdaf6b1bd65bdb7a17c4b7a4a9a3881">ceph_mdsc_sync</a></div><div class="ttdeci">void ceph_mdsc_sync(struct ceph_mds_client *mdsc)</div><div class="ttdef"><b>Definition:</b> mds_client.c:3743</div></div>
<div class="ttc" id="mds__client_8h_html_ac9fb160e1775b476bd78942c928ac7b5"><div class="ttname"><a href="mds__client_8h.html#ac9fb160e1775b476bd78942c928ac7b5">ceph_send_cap_releases</a></div><div class="ttdeci">void ceph_send_cap_releases(struct ceph_mds_client *mdsc, struct ceph_mds_session *session)</div><div class="ttdef"><b>Definition:</b> mds_client.c:1641</div></div>
<div class="ttc" id="structceph__mds__request_html_a68b5ecfff4df9b8e137d70fe6a2c9dc2"><div class="ttname"><a href="structceph__mds__request.html#a68b5ecfff4df9b8e137d70fe6a2c9dc2">ceph_mds_request::r_readdir_cache_idx</a></div><div class="ttdeci">int r_readdir_cache_idx</div><div class="ttdef"><b>Definition:</b> mds_client.h:284</div></div>
<div class="ttc" id="structceph__mds__reply__info__in_html_aa8ea4153d0ff2d57f06004b76dc2a618"><div class="ttname"><a href="structceph__mds__reply__info__in.html#aa8ea4153d0ff2d57f06004b76dc2a618">ceph_mds_reply_info_in::in</a></div><div class="ttdeci">struct ceph_mds_reply_inode * in</div><div class="ttdef"><b>Definition:</b> mds_client.h:41</div></div>
<div class="ttc" id="structceph__mds__reply__dir__entry_html"><div class="ttname"><a href="structceph__mds__reply__dir__entry.html">ceph_mds_reply_dir_entry</a></div><div class="ttdef"><b>Definition:</b> mds_client.h:56</div></div>
<div class="ttc" id="structceph__mds__reply__info__parsed_html_a4734e05e70d5a31534b5e258bd7d84c6"><div class="ttname"><a href="structceph__mds__reply__info__parsed.html#a4734e05e70d5a31534b5e258bd7d84c6">ceph_mds_reply_info_parsed::dir_dir</a></div><div class="ttdeci">struct ceph_mds_reply_dirfrag * dir_dir</div><div class="ttdef"><b>Definition:</b> mds_client.h:87</div></div>
<div class="ttc" id="structceph__mds__reply__info__parsed_html_a0a2cdd54780ad50b3ef5c3a883c6a0fc"><div class="ttname"><a href="structceph__mds__reply__info__parsed.html#a0a2cdd54780ad50b3ef5c3a883c6a0fc">ceph_mds_reply_info_parsed::dir_nr</a></div><div class="ttdeci">int dir_nr</div><div class="ttdef"><b>Definition:</b> mds_client.h:89</div></div>
<div class="ttc" id="mds__client_8h_html_a1be3860693af99a6c1da72580097294ca983f42844c352aa315c4504e9d8542b4"><div class="ttname"><a href="mds__client_8h.html#a1be3860693af99a6c1da72580097294ca983f42844c352aa315c4504e9d8542b4">USE_ANY_MDS</a></div><div class="ttdef"><b>Definition:</b> mds_client.h:177</div></div>
<div class="ttc" id="structceph__mds__request_html_a654d3cac04464dc2e1c40c6412149dfc"><div class="ttname"><a href="structceph__mds__request.html#a654d3cac04464dc2e1c40c6412149dfc">ceph_mds_request::r_old_inode_unless</a></div><div class="ttdeci">int r_old_inode_unless</div><div class="ttdef"><b>Definition:</b> mds_client.h:246</div></div>
<div class="ttc" id="structceph__mds__client_html_af88c9b4f8f654806f4f49d978cee93f4"><div class="ttname"><a href="structceph__mds__client.html#af88c9b4f8f654806f4f49d978cee93f4">ceph_mds_client::caps_total_count</a></div><div class="ttdeci">int caps_total_count</div><div class="ttdef"><b>Definition:</b> mds_client.h:365</div></div>
<div class="ttc" id="structceph__mds__reply__info__parsed_html_a81eb4109e2c3da46d18ea7912d7e2e5f"><div class="ttname"><a href="structceph__mds__reply__info__parsed.html#a81eb4109e2c3da46d18ea7912d7e2e5f">ceph_mds_reply_info_parsed::offset_hash</a></div><div class="ttdeci">bool offset_hash</div><div class="ttdef"><b>Definition:</b> mds_client.h:93</div></div>
<div class="ttc" id="structceph__mds__reply__info__in_html_aa3cee84c95652bc3a27918d84370b1ac"><div class="ttname"><a href="structceph__mds__reply__info__in.html#aa3cee84c95652bc3a27918d84370b1ac">ceph_mds_reply_info_in::pool_ns_len</a></div><div class="ttdeci">u32 pool_ns_len</div><div class="ttdef"><b>Definition:</b> mds_client.h:50</div></div>
<div class="ttc" id="structceph__mds__request_html_abd3faa22b8ceaf4ae92f754ce81a5221"><div class="ttname"><a href="structceph__mds__request.html#abd3faa22b8ceaf4ae92f754ce81a5221">ceph_mds_request::r_old_dentry_unless</a></div><div class="ttdeci">int r_old_dentry_unless</div><div class="ttdef"><b>Definition:</b> mds_client.h:244</div></div>
<div class="ttc" id="structceph__pool__perm_html"><div class="ttname"><a href="structceph__pool__perm.html">ceph_pool_perm</a></div><div class="ttdef"><b>Definition:</b> mds_client.h:291</div></div>
<div class="ttc" id="structceph__mds__reply__info__parsed_html_ad75996244b2e793c1d9ded98497f3913"><div class="ttname"><a href="structceph__mds__reply__info__parsed.html#ad75996244b2e793c1d9ded98497f3913">ceph_mds_reply_info_parsed::ino</a></div><div class="ttdeci">u64 ino</div><div class="ttdef"><b>Definition:</b> mds_client.h:100</div></div>
<div class="ttc" id="mds__client_8h_html_a900dca9b26de42491763226e12dcd47bafd1d1e9f79fa2b03e01dc7d79d6fe1e2"><div class="ttname"><a href="mds__client_8h.html#a900dca9b26de42491763226e12dcd47bafd1d1e9f79fa2b03e01dc7d79d6fe1e2">CEPH_MDS_SESSION_OPENING</a></div><div class="ttdef"><b>Definition:</b> mds_client.h:127</div></div>
<div class="ttc" id="structceph__mds__request_html_aab9898066cc133b9062b1472c7fe2388"><div class="ttname"><a href="structceph__mds__request.html#aab9898066cc133b9062b1472c7fe2388">ceph_mds_request::r_num_fwd</a></div><div class="ttdeci">int r_num_fwd</div><div class="ttdef"><b>Definition:</b> mds_client.h:270</div></div>
<div class="ttc" id="structceph__mds__reply__info__parsed_html_a4b109ebacabc730da87bde0a8020e790"><div class="ttname"><a href="structceph__mds__reply__info__parsed.html#a4b109ebacabc730da87bde0a8020e790">ceph_mds_reply_info_parsed::snapblob</a></div><div class="ttdeci">void * snapblob</div><div class="ttdef"><b>Definition:</b> mds_client.h:106</div></div>
<div class="ttc" id="mds__client_8h_html_aafb3b5f8ec2c1db9a721f133b0eafc22"><div class="ttname"><a href="mds__client_8h.html#aafb3b5f8ec2c1db9a721f133b0eafc22">ceph_mdsc_handle_mdsmap</a></div><div class="ttdeci">void ceph_mdsc_handle_mdsmap(struct ceph_mds_client *mdsc, struct ceph_msg *msg)</div><div class="ttdef"><b>Definition:</b> mds_client.c:3976</div></div>
<div class="ttc" id="mds__client_8h_html_a1f4e3ccc5b0a05d39ed1a8b0febd0808"><div class="ttname"><a href="mds__client_8h.html#a1f4e3ccc5b0a05d39ed1a8b0febd0808">ceph_mdsc_create_request</a></div><div class="ttdeci">struct ceph_mds_request * ceph_mdsc_create_request(struct ceph_mds_client *mdsc, int op, int mode)</div><div class="ttdef"><b>Definition:</b> mds_client.c:1779</div></div>
<div class="ttc" id="structceph__mds__session_html_ae15cdab47a66fceb7e6806d9e072144b"><div class="ttname"><a href="structceph__mds__session.html#ae15cdab47a66fceb7e6806d9e072144b">ceph_mds_session::s_cap_reconnect</a></div><div class="ttdeci">int s_cap_reconnect</div><div class="ttdef"><b>Definition:</b> mds_client.h:158</div></div>
<div class="ttc" id="structceph__mds__request_html_a268c3eb0a59837cd8d91b905cf3381bd"><div class="ttname"><a href="structceph__mds__request.html#a268c3eb0a59837cd8d91b905cf3381bd">ceph_mds_request::r_locked_page</a></div><div class="ttdeci">struct page * r_locked_page</div><div class="ttdef"><b>Definition:</b> mds_client.h:252</div></div>
<div class="ttc" id="structceph__mds__request_html_afa1b196d64eb848d3806100a9583bc68"><div class="ttname"><a href="structceph__mds__request.html#afa1b196d64eb848d3806100a9583bc68">ceph_mds_request::r_err</a></div><div class="ttdeci">int r_err</div><div class="ttdef"><b>Definition:</b> mds_client.h:253</div></div>
<div class="ttc" id="structceph__mds__client_html_adc0d90f9c7c700d37dd557ceaa0aabcb"><div class="ttname"><a href="structceph__mds__client.html#adc0d90f9c7c700d37dd557ceaa0aabcb">ceph_mds_client::quotarealms_count</a></div><div class="ttdeci">atomic64_t quotarealms_count</div><div class="ttdef"><b>Definition:</b> mds_client.h:317</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_277e9de12ca591d684d25c534e13f5a5.html">ceph</a></li><li class="navelem"><a class="el" href="mds__client_8h.html">mds_client.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>linux/fs: nilfs2/recovery.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">linux/fs
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('nilfs2_2recovery_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">recovery.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;linux/buffer_head.h&gt;</code><br />
<code>#include &lt;linux/blkdev.h&gt;</code><br />
<code>#include &lt;linux/swap.h&gt;</code><br />
<code>#include &lt;linux/slab.h&gt;</code><br />
<code>#include &lt;linux/crc32.h&gt;</code><br />
<code>#include &quot;<a class="el" href="nilfs_8h_source.html">nilfs.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="nilfs2_2segment_8h_source.html">segment.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sufile_8h_source.html">sufile.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="page_8h_source.html">page.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="segbuf_8h_source.html">segbuf.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for recovery.c:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2recovery_8c__incl.png" border="0" usemap="#nilfs2_2recovery_8c" alt=""/></div>
<map name="nilfs2_2recovery_8c" id="nilfs2_2recovery_8c">
<area shape="rect" id="node7" href="nilfs_8h.html" title="nilfs.h" alt="" coords="1002,304,1059,331"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8h.html" title="segment.h" alt="" coords="464,229,546,256"/>
<area shape="rect" id="node23" href="sufile_8h.html" title="sufile.h" alt="" coords="1232,80,1296,107"/>
<area shape="rect" id="node26" href="page_8h.html" title="page.h" alt="" coords="1478,229,1540,256"/>
<area shape="rect" id="node27" href="segbuf_8h.html" title="segbuf.h" alt="" coords="1665,453,1737,480"/>
<area shape="rect" id="node12" href="the__nilfs_8h.html" title="the_nilfs.h" alt="" coords="510,379,593,405"/>
<area shape="rect" id="node18" href="nilfs2_2bmap_8h.html" title="bmap.h" alt="" coords="940,379,1006,405"/>
<area shape="rect" id="node19" href="nilfs2_2alloc_8h.html" title="alloc.h" alt="" coords="999,453,1059,480"/>
<area shape="rect" id="node20" href="dat_8h.html" title="dat.h" alt="" coords="1084,453,1134,480"/>
<area shape="rect" id="node24" href="mdt_8h.html" title="mdt.h" alt="" coords="1267,155,1322,181"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnilfs__recovery__block.html">nilfs_recovery_block</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnilfs__segment__entry.html">nilfs_segment_entry</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a2397dacb6bf5299415d295e773dfeb44"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <br />
&#160;&#160;<a class="el" href="nilfs2_2recovery_8c.html#a2397dacb6bf5299415d295e773dfeb44a96ed96d84961ef1692e4faa9306cee35">NILFS_SEG_VALID</a>, 
<a class="el" href="nilfs2_2recovery_8c.html#a2397dacb6bf5299415d295e773dfeb44a991cdb2f70cf8e20687d434fa483c770">NILFS_SEG_NO_SUPER_ROOT</a>, 
<a class="el" href="nilfs2_2recovery_8c.html#a2397dacb6bf5299415d295e773dfeb44a80ce38977c95d6055d17d68cb15d82a8">NILFS_SEG_FAIL_IO</a>, 
<a class="el" href="nilfs2_2recovery_8c.html#a2397dacb6bf5299415d295e773dfeb44aa6d6c45c73f96b897388a39105434642">NILFS_SEG_FAIL_MAGIC</a>, 
<br />
&#160;&#160;<a class="el" href="nilfs2_2recovery_8c.html#a2397dacb6bf5299415d295e773dfeb44abb10190f5768101a0a883be161379add">NILFS_SEG_FAIL_SEQ</a>, 
<a class="el" href="nilfs2_2recovery_8c.html#a2397dacb6bf5299415d295e773dfeb44ab28a9fc1404d8e3ef761a31560d3c3a8">NILFS_SEG_FAIL_CHECKSUM_SUPER_ROOT</a>, 
<a class="el" href="nilfs2_2recovery_8c.html#a2397dacb6bf5299415d295e773dfeb44ac8f9cc182f3ca462b20279f59a338dfd">NILFS_SEG_FAIL_CHECKSUM_FULL</a>, 
<a class="el" href="nilfs2_2recovery_8c.html#a2397dacb6bf5299415d295e773dfeb44a9fdca44c3454e892d304fcfec65b68c8">NILFS_SEG_FAIL_CONSISTENCY</a>
<br />
 }</td></tr>
<tr class="separator:a2397dacb6bf5299415d295e773dfeb44"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a109c59b06bae1b29692af69694c5ab03"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2recovery_8c.html#a109c59b06bae1b29692af69694c5ab03">nilfs_warn_segment_error</a> (struct <a class="el" href="structsuper__block.html">super_block</a> *<a class="el" href="ntfs_2debug_8h.html#a65b1b0602e37268ec9bc2c240a676c39">sb</a>, int err)</td></tr>
<tr class="separator:a109c59b06bae1b29692af69694c5ab03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a259060e9360fc15d85d67af63a41b28b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2recovery_8c.html#a259060e9360fc15d85d67af63a41b28b">nilfs_compute_checksum</a> (struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *nilfs, struct buffer_head *bhs, u32 *sum, unsigned long <a class="el" href="summary_8h.html#a3875b4f2ee8a9d27ac3b3b145f934f86">offset</a>, u64 check_bytes, sector_t <a class="el" href="cifspdu_8h.html#a94f8d852c02921f3079f6987b4a5d7d0">start</a>, unsigned long nblock)</td></tr>
<tr class="separator:a259060e9360fc15d85d67af63a41b28b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f396e9debfefa7181d7e1f5b8b57a05"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2recovery_8c.html#a1f396e9debfefa7181d7e1f5b8b57a05">nilfs_read_super_root_block</a> (struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *nilfs, sector_t sr_block, struct buffer_head **pbh, int check)</td></tr>
<tr class="separator:a1f396e9debfefa7181d7e1f5b8b57a05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d8c2c650ddfd797f123c53e2f374587"><td class="memItemLeft" align="right" valign="top">static struct buffer_head *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2recovery_8c.html#a3d8c2c650ddfd797f123c53e2f374587">nilfs_read_log_header</a> (struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *nilfs, sector_t start_blocknr, struct nilfs_segment_summary **sum)</td></tr>
<tr class="separator:a3d8c2c650ddfd797f123c53e2f374587"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91af8857a8fd8f38883fefccafaff570"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2recovery_8c.html#a91af8857a8fd8f38883fefccafaff570">nilfs_validate_log</a> (struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *nilfs, u64 seg_seq, struct buffer_head *bh_sum, struct nilfs_segment_summary *sum)</td></tr>
<tr class="separator:a91af8857a8fd8f38883fefccafaff570"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8122880fae04138dd1a06012d627a50"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2recovery_8c.html#ab8122880fae04138dd1a06012d627a50">nilfs_read_summary_info</a> (struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *nilfs, struct buffer_head **pbh, unsigned int *<a class="el" href="summary_8h.html#a3875b4f2ee8a9d27ac3b3b145f934f86">offset</a>, unsigned int bytes)</td></tr>
<tr class="separator:ab8122880fae04138dd1a06012d627a50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a768e6438029e14ce1987a20a235da2a0"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2recovery_8c.html#a768e6438029e14ce1987a20a235da2a0">nilfs_skip_summary_info</a> (struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *nilfs, struct buffer_head **pbh, unsigned int *<a class="el" href="summary_8h.html#a3875b4f2ee8a9d27ac3b3b145f934f86">offset</a>, unsigned int bytes, unsigned long <a class="el" href="exec_8c.html#a36dcaf63ad8fe9783c81b418943e2346">count</a>)</td></tr>
<tr class="separator:a768e6438029e14ce1987a20a235da2a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf77ed253bd969bb1d723c7ee3f8d8d8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2recovery_8c.html#abf77ed253bd969bb1d723c7ee3f8d8d8">nilfs_scan_dsync_log</a> (struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *nilfs, sector_t start_blocknr, struct nilfs_segment_summary *sum, struct list_head *head)</td></tr>
<tr class="separator:abf77ed253bd969bb1d723c7ee3f8d8d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15f5d18b0afaa21aa96bfcb45b98ab66"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2recovery_8c.html#a15f5d18b0afaa21aa96bfcb45b98ab66">dispose_recovery_list</a> (struct list_head *head)</td></tr>
<tr class="separator:a15f5d18b0afaa21aa96bfcb45b98ab66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84b5fcfc15ade4d11a4ca915643bcb8a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2recovery_8c.html#a84b5fcfc15ade4d11a4ca915643bcb8a">nilfs_segment_list_add</a> (struct list_head *head, __u64 segnum)</td></tr>
<tr class="separator:a84b5fcfc15ade4d11a4ca915643bcb8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a719edb6aac97b7519bc1a0190548ec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2recovery_8c.html#a5a719edb6aac97b7519bc1a0190548ec">nilfs_dispose_segment_list</a> (struct list_head *head)</td></tr>
<tr class="separator:a5a719edb6aac97b7519bc1a0190548ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a561c361c13ae22022d24695836c97423"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423">nilfs_prepare_segment_for_recovery</a> (struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *nilfs, struct <a class="el" href="structsuper__block.html">super_block</a> *<a class="el" href="ntfs_2debug_8h.html#a65b1b0602e37268ec9bc2c240a676c39">sb</a>, struct <a class="el" href="structnilfs__recovery__info.html">nilfs_recovery_info</a> *ri)</td></tr>
<tr class="separator:a561c361c13ae22022d24695836c97423"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63f9a40be5d6287fa2dc672847712c91"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2recovery_8c.html#a63f9a40be5d6287fa2dc672847712c91">nilfs_recovery_copy_block</a> (struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *nilfs, struct <a class="el" href="structnilfs__recovery__block.html">nilfs_recovery_block</a> *rb, struct page *page)</td></tr>
<tr class="separator:a63f9a40be5d6287fa2dc672847712c91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ee5a3a12c87c9cd4363d28a2c6edb73"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2recovery_8c.html#a2ee5a3a12c87c9cd4363d28a2c6edb73">nilfs_recover_dsync_blocks</a> (struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *nilfs, struct <a class="el" href="structsuper__block.html">super_block</a> *<a class="el" href="ntfs_2debug_8h.html#a65b1b0602e37268ec9bc2c240a676c39">sb</a>, struct <a class="el" href="structnilfs__root.html">nilfs_root</a> *<a class="el" href="ctree_8h.html#a3cfd2c1908c7a280340fc7ee887a88a8">root</a>, struct list_head *head, unsigned long *nr_salvaged_blocks)</td></tr>
<tr class="separator:a2ee5a3a12c87c9cd4363d28a2c6edb73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a17f874531cf68d55aecb35d5e54fff"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2recovery_8c.html#a2a17f874531cf68d55aecb35d5e54fff">nilfs_do_roll_forward</a> (struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *nilfs, struct <a class="el" href="structsuper__block.html">super_block</a> *<a class="el" href="ntfs_2debug_8h.html#a65b1b0602e37268ec9bc2c240a676c39">sb</a>, struct <a class="el" href="structnilfs__root.html">nilfs_root</a> *<a class="el" href="ctree_8h.html#a3cfd2c1908c7a280340fc7ee887a88a8">root</a>, struct <a class="el" href="structnilfs__recovery__info.html">nilfs_recovery_info</a> *ri)</td></tr>
<tr class="separator:a2a17f874531cf68d55aecb35d5e54fff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45afe93f318383d5ed3381fa68650a8c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2recovery_8c.html#a45afe93f318383d5ed3381fa68650a8c">nilfs_finish_roll_forward</a> (struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *nilfs, struct <a class="el" href="structnilfs__recovery__info.html">nilfs_recovery_info</a> *ri)</td></tr>
<tr class="separator:a45afe93f318383d5ed3381fa68650a8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e61516876368ef4aa3118ef414d37c3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2recovery_8c.html#a9e61516876368ef4aa3118ef414d37c3">nilfs_salvage_orphan_logs</a> (struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *nilfs, struct <a class="el" href="structsuper__block.html">super_block</a> *<a class="el" href="ntfs_2debug_8h.html#a65b1b0602e37268ec9bc2c240a676c39">sb</a>, struct <a class="el" href="structnilfs__recovery__info.html">nilfs_recovery_info</a> *ri)</td></tr>
<tr class="separator:a9e61516876368ef4aa3118ef414d37c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0277d890503e30014aee9b37557917f9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2recovery_8c.html#a0277d890503e30014aee9b37557917f9">nilfs_search_super_root</a> (struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *nilfs, struct <a class="el" href="structnilfs__recovery__info.html">nilfs_recovery_info</a> *ri)</td></tr>
<tr class="separator:a0277d890503e30014aee9b37557917f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a2397dacb6bf5299415d295e773dfeb44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2397dacb6bf5299415d295e773dfeb44">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a2397dacb6bf5299415d295e773dfeb44a96ed96d84961ef1692e4faa9306cee35"></a>NILFS_SEG_VALID&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a2397dacb6bf5299415d295e773dfeb44a991cdb2f70cf8e20687d434fa483c770"></a>NILFS_SEG_NO_SUPER_ROOT&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a2397dacb6bf5299415d295e773dfeb44a80ce38977c95d6055d17d68cb15d82a8"></a>NILFS_SEG_FAIL_IO&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a2397dacb6bf5299415d295e773dfeb44aa6d6c45c73f96b897388a39105434642"></a>NILFS_SEG_FAIL_MAGIC&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a2397dacb6bf5299415d295e773dfeb44abb10190f5768101a0a883be161379add"></a>NILFS_SEG_FAIL_SEQ&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a2397dacb6bf5299415d295e773dfeb44ab28a9fc1404d8e3ef761a31560d3c3a8"></a>NILFS_SEG_FAIL_CHECKSUM_SUPER_ROOT&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a2397dacb6bf5299415d295e773dfeb44ac8f9cc182f3ca462b20279f59a338dfd"></a>NILFS_SEG_FAIL_CHECKSUM_FULL&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a2397dacb6bf5299415d295e773dfeb44a9fdca44c3454e892d304fcfec65b68c8"></a>NILFS_SEG_FAIL_CONSISTENCY&#160;</td><td class="fielddoc"></td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a15f5d18b0afaa21aa96bfcb45b98ab66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15f5d18b0afaa21aa96bfcb45b98ab66">&#9670;&nbsp;</a></span>dispose_recovery_list()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void dispose_recovery_list </td>
          <td>(</td>
          <td class="paramtype">struct list_head *&#160;</td>
          <td class="paramname"><em>head</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2recovery_8c_a15f5d18b0afaa21aa96bfcb45b98ab66_icgraph.png" border="0" usemap="#nilfs2_2recovery_8c_a15f5d18b0afaa21aa96bfcb45b98ab66_icgraph" alt=""/></div>
<map name="nilfs2_2recovery_8c_a15f5d18b0afaa21aa96bfcb45b98ab66_icgraph" id="nilfs2_2recovery_8c_a15f5d18b0afaa21aa96bfcb45b98ab66_icgraph">
<area shape="rect" id="node2" href="nilfs2_2recovery_8c.html#a2a17f874531cf68d55aecb35d5e54fff" title="nilfs_do_roll_forward" alt="" coords="201,351,343,377"/>
<area shape="rect" id="node3" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="391,351,565,377"/>
<area shape="rect" id="node4" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="613,208,691,235"/>
<area shape="rect" id="node5" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1955,241,2061,268"/>
<area shape="rect" id="node7" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="739,208,856,235"/>
<area shape="rect" id="node6" href="nilfs2_2super_8c.html#a6f69bb47bb8193c95863dfa7858e0556" title="nilfs_mount" alt="" coords="2126,279,2215,305"/>
<area shape="rect" id="node8" href="nilfs2_2super_8c.html#aa52d92dd32f84052f43449918f769c15" title="nilfs_sync_fs" alt="" coords="933,183,1032,209"/>
<area shape="rect" id="node9" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="904,233,1061,260"/>
<area shape="rect" id="node10" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1113,183,1261,209"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1118,285,1257,326"/>
<area shape="rect" id="node25" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1109,233,1265,260"/>
<area shape="rect" id="node11" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096" title="nilfs_ioctl_clean_segments" alt="" coords="1313,81,1492,108"/>
<area shape="rect" id="node12" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1579,81,1656,108"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1759,81,1879,108"/>
<area shape="rect" id="node14" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="1951,81,2065,108"/>
<area shape="rect" id="node19" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="1943,31,2073,57"/>
<area shape="rect" id="node15" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="2126,157,2215,184"/>
<area shape="rect" id="node16" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="2125,5,2217,32"/>
<area shape="rect" id="node17" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="2121,56,2220,83"/>
<area shape="rect" id="node18" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="2128,107,2213,133"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a39d3b93661aea1ce6d75d52641a734f7" title="nilfs_segctor_thread" alt="" coords="1333,376,1472,403"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8c.html#accb2af3cf720ef8a382baa244f770a64" title="nilfs_segctor_start\l_thread" alt="" coords="1553,361,1682,402"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8h.html#accc0b22d29c5e0dc0550492c2814845f" title="nilfs_attach_log_writer" alt="" coords="1743,368,1895,395"/>
<area shape="rect" id="node24" href="nilfs2_2super_8c.html#abaf12a9facc571b7e4e46389a440b694" title="nilfs_remount" alt="" coords="1958,317,2058,344"/>
<area shape="rect" id="node26" href="nilfs2_2segment_8c.html#a53eace4b3351e7a47d95a83e02257fda" title="nilfs_segctor_destroy" alt="" coords="1329,237,1476,264"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8h.html#a86ad97768e43fb1c81c962ab7f895fb0" title="nilfs_detach_log_writer" alt="" coords="1540,288,1695,315"/>
<area shape="rect" id="node28" href="nilfs2_2super_8c.html#aa48b8ba2014d88aac606b97a2b09d0ef" title="nilfs_put_super" alt="" coords="1763,267,1874,293"/>
</map>
</div>

</div>
</div>
<a id="a259060e9360fc15d85d67af63a41b28b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a259060e9360fc15d85d67af63a41b28b">&#9670;&nbsp;</a></span>nilfs_compute_checksum()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_compute_checksum </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *&#160;</td>
          <td class="paramname"><em>nilfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct buffer_head *&#160;</td>
          <td class="paramname"><em>bhs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32 *&#160;</td>
          <td class="paramname"><em>sum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>check_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sector_t&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>nblock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_compute_checksum - compute checksum of blocks continuously : nilfs object : buffer head of start block : place to store result : offset bytes in the first block : number of bytes to be checked : DBN of start block : number of blocks to be checked </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2recovery_8c_a259060e9360fc15d85d67af63a41b28b_icgraph.png" border="0" usemap="#nilfs2_2recovery_8c_a259060e9360fc15d85d67af63a41b28b_icgraph" alt=""/></div>
<map name="nilfs2_2recovery_8c_a259060e9360fc15d85d67af63a41b28b_icgraph" id="nilfs2_2recovery_8c_a259060e9360fc15d85d67af63a41b28b_icgraph">
<area shape="rect" id="node2" href="nilfs2_2segment_8h.html#a05c84597e935fa4c02cd556b371e3ed5" title="nilfs_read_super_root\l_block" alt="" coords="224,131,371,173"/>
<area shape="rect" id="node30" href="nilfs2_2recovery_8c.html#a91af8857a8fd8f38883fefccafaff570" title="nilfs_validate_log" alt="" coords="236,80,359,107"/>
<area shape="rect" id="node3" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="426,139,571,165"/>
<area shape="rect" id="node4" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="659,139,736,165"/>
<area shape="rect" id="node5" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="2055,308,2160,335"/>
<area shape="rect" id="node7" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="816,145,933,172"/>
<area shape="rect" id="node6" href="nilfs2_2super_8c.html#a6f69bb47bb8193c95863dfa7858e0556" title="nilfs_mount" alt="" coords="2247,283,2337,309"/>
<area shape="rect" id="node8" href="nilfs2_2super_8c.html#aa52d92dd32f84052f43449918f769c15" title="nilfs_sync_fs" alt="" coords="1011,145,1109,172"/>
<area shape="rect" id="node9" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="981,209,1139,236"/>
<area shape="rect" id="node10" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1191,285,1339,312"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1195,147,1334,189"/>
<area shape="rect" id="node26" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1187,213,1343,240"/>
<area shape="rect" id="node11" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096" title="nilfs_ioctl_clean_segments" alt="" coords="1391,421,1569,448"/>
<area shape="rect" id="node12" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1656,433,1733,460"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1836,472,1956,499"/>
<area shape="rect" id="node14" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2050,472,2165,499"/>
<area shape="rect" id="node19" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2042,421,2173,448"/>
<area shape="rect" id="node15" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="2247,396,2337,423"/>
<area shape="rect" id="node16" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="2246,447,2338,473"/>
<area shape="rect" id="node17" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="2243,497,2341,524"/>
<area shape="rect" id="node18" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="2249,548,2335,575"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a39d3b93661aea1ce6d75d52641a734f7" title="nilfs_segctor_thread" alt="" coords="1411,155,1549,181"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8c.html#accb2af3cf720ef8a382baa244f770a64" title="nilfs_segctor_start\l_thread" alt="" coords="1630,147,1759,189"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8h.html#accc0b22d29c5e0dc0550492c2814845f" title="nilfs_attach_log_writer" alt="" coords="1820,156,1972,183"/>
<area shape="rect" id="node24" href="nilfs2_2super_8c.html#abaf12a9facc571b7e4e46389a440b694" title="nilfs_remount" alt="" coords="2057,257,2157,284"/>
<area shape="rect" id="node25" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="2020,80,2195,107"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8c.html#a53eace4b3351e7a47d95a83e02257fda" title="nilfs_segctor_destroy" alt="" coords="1407,213,1553,240"/>
<area shape="rect" id="node28" href="nilfs2_2segment_8h.html#a86ad97768e43fb1c81c962ab7f895fb0" title="nilfs_detach_log_writer" alt="" coords="1617,213,1772,240"/>
<area shape="rect" id="node29" href="nilfs2_2super_8c.html#aa48b8ba2014d88aac606b97a2b09d0ef" title="nilfs_put_super" alt="" coords="1841,207,1951,233"/>
<area shape="rect" id="node31" href="nilfs2_2recovery_8c.html#a2a17f874531cf68d55aecb35d5e54fff" title="nilfs_do_roll_forward" alt="" coords="627,5,768,32"/>
<area shape="rect" id="node32" href="nilfs2_2segment_8h.html#ac35601ebb220d6cce77c5513d0c5ff9a" title="nilfs_search_super_root" alt="" coords="419,84,579,111"/>
</map>
</div>

</div>
</div>
<a id="a5a719edb6aac97b7519bc1a0190548ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a719edb6aac97b7519bc1a0190548ec">&#9670;&nbsp;</a></span>nilfs_dispose_segment_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nilfs_dispose_segment_list </td>
          <td>(</td>
          <td class="paramtype">struct list_head *&#160;</td>
          <td class="paramname"><em>head</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2recovery_8c_a5a719edb6aac97b7519bc1a0190548ec_icgraph.png" border="0" usemap="#nilfs2_2recovery_8c_a5a719edb6aac97b7519bc1a0190548ec_icgraph" alt=""/></div>
<map name="nilfs2_2recovery_8c_a5a719edb6aac97b7519bc1a0190548ec_icgraph" id="nilfs2_2recovery_8c_a5a719edb6aac97b7519bc1a0190548ec_icgraph">
<area shape="rect" id="node2" href="nilfs2_2segment_8h.html#ac35601ebb220d6cce77c5513d0c5ff9a" title="nilfs_search_super_root" alt="" coords="235,204,395,231"/>
<area shape="rect" id="node29" href="the__nilfs_8c.html#af1c2aa5df0d1b266ae2b3007b945358b" title="nilfs_clear_recovery_info" alt="" coords="232,255,399,281"/>
<area shape="rect" id="node3" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="447,229,524,256"/>
<area shape="rect" id="node4" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1811,196,1916,223"/>
<area shape="rect" id="node6" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="572,229,689,256"/>
<area shape="rect" id="node5" href="nilfs2_2super_8c.html#a6f69bb47bb8193c95863dfa7858e0556" title="nilfs_mount" alt="" coords="2003,233,2093,260"/>
<area shape="rect" id="node7" href="nilfs2_2super_8c.html#aa52d92dd32f84052f43449918f769c15" title="nilfs_sync_fs" alt="" coords="767,204,865,231"/>
<area shape="rect" id="node8" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="737,255,895,281"/>
<area shape="rect" id="node9" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="947,196,1095,223"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="951,247,1090,289"/>
<area shape="rect" id="node25" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="943,313,1099,340"/>
<area shape="rect" id="node10" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096" title="nilfs_ioctl_clean_segments" alt="" coords="1147,196,1325,223"/>
<area shape="rect" id="node11" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1412,95,1489,121"/>
<area shape="rect" id="node12" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1592,95,1712,121"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="1806,95,1921,121"/>
<area shape="rect" id="node18" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="1798,44,1929,71"/>
<area shape="rect" id="node14" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="2003,107,2093,133"/>
<area shape="rect" id="node15" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="2002,157,2094,184"/>
<area shape="rect" id="node16" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="1999,5,2097,32"/>
<area shape="rect" id="node17" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="2005,56,2091,83"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8c.html#a39d3b93661aea1ce6d75d52641a734f7" title="nilfs_segctor_thread" alt="" coords="1167,253,1305,280"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#accb2af3cf720ef8a382baa244f770a64" title="nilfs_segctor_start\l_thread" alt="" coords="1386,243,1515,285"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8h.html#accc0b22d29c5e0dc0550492c2814845f" title="nilfs_attach_log_writer" alt="" coords="1576,247,1728,273"/>
<area shape="rect" id="node23" href="nilfs2_2super_8c.html#abaf12a9facc571b7e4e46389a440b694" title="nilfs_remount" alt="" coords="1813,247,1913,273"/>
<area shape="rect" id="node24" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1776,399,1951,425"/>
<area shape="rect" id="node26" href="nilfs2_2segment_8c.html#a53eace4b3351e7a47d95a83e02257fda" title="nilfs_segctor_destroy" alt="" coords="1163,312,1309,339"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8h.html#a86ad97768e43fb1c81c962ab7f895fb0" title="nilfs_detach_log_writer" alt="" coords="1373,311,1528,337"/>
<area shape="rect" id="node28" href="nilfs2_2super_8c.html#aa48b8ba2014d88aac606b97a2b09d0ef" title="nilfs_put_super" alt="" coords="1597,348,1707,375"/>
</map>
</div>

</div>
</div>
<a id="a2a17f874531cf68d55aecb35d5e54fff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a17f874531cf68d55aecb35d5e54fff">&#9670;&nbsp;</a></span>nilfs_do_roll_forward()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_do_roll_forward </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *&#160;</td>
          <td class="paramname"><em>nilfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structsuper__block.html">super_block</a> *&#160;</td>
          <td class="paramname"><em>sb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structnilfs__root.html">nilfs_root</a> *&#160;</td>
          <td class="paramname"><em>root</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structnilfs__recovery__info.html">nilfs_recovery_info</a> *&#160;</td>
          <td class="paramname"><em>ri</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_do_roll_forward - salvage logical segments newer than the latest checkpoint : nilfs object : super block instance : pointer to a <a class="el" href="structnilfs__recovery__info.html">nilfs_recovery_info</a> </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2recovery_8c_a2a17f874531cf68d55aecb35d5e54fff_cgraph.png" border="0" usemap="#nilfs2_2recovery_8c_a2a17f874531cf68d55aecb35d5e54fff_cgraph" alt=""/></div>
<map name="nilfs2_2recovery_8c_a2a17f874531cf68d55aecb35d5e54fff_cgraph" id="nilfs2_2recovery_8c_a2a17f874531cf68d55aecb35d5e54fff_cgraph">
<area shape="rect" id="node2" href="v9fs_8c.html#a962ef1b35907bdda12de2cddce8bc638" title="LIST_HEAD" alt="" coords="231,5,325,32"/>
<area shape="rect" id="node3" href="the__nilfs_8h.html#acbe15a8b57f8ecf5e4777294c2f7303d" title="nilfs_get_segnum_of\l_block" alt="" coords="207,57,349,98"/>
<area shape="rect" id="node4" href="the__nilfs_8h.html#a0dc161eb6c4f6bad9212b67517b46a37" title="nilfs_get_segment_range" alt="" coords="195,123,361,149"/>
<area shape="rect" id="node5" href="nilfs2_2recovery_8c.html#a3d8c2c650ddfd797f123c53e2f374587" title="nilfs_read_log_header" alt="" coords="204,173,352,200"/>
<area shape="rect" id="node6" href="nilfs2_2recovery_8c.html#a91af8857a8fd8f38883fefccafaff570" title="nilfs_validate_log" alt="" coords="217,224,339,251"/>
<area shape="rect" id="node8" href="nilfs2_2recovery_8c.html#abf77ed253bd969bb1d723c7ee3f8d8d8" title="nilfs_scan_dsync_log" alt="" coords="205,275,351,301"/>
<area shape="rect" id="node14" href="nilfs2_2recovery_8c.html#a2ee5a3a12c87c9cd4363d28a2c6edb73" title="nilfs_recover_dsync\l_blocks" alt="" coords="209,838,347,879"/>
<area shape="rect" id="node50" href="nilfs2_2recovery_8c.html#a15f5d18b0afaa21aa96bfcb45b98ab66" title="dispose_recovery_list" alt="" coords="204,904,352,931"/>
<area shape="rect" id="node7" href="nilfs2_2recovery_8c.html#a259060e9360fc15d85d67af63a41b28b" title="nilfs_compute_checksum" alt="" coords="409,148,580,175"/>
<area shape="rect" id="node9" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033" title="nblocks" alt="" coords="461,199,528,225"/>
<area shape="rect" id="node10" href="nilfs2_2recovery_8c.html#ab8122880fae04138dd1a06012d627a50" title="nilfs_read_summary_info" alt="" coords="411,249,578,276"/>
<area shape="rect" id="node11" href="nilfs2_2recovery_8c.html#a768e6438029e14ce1987a20a235da2a0" title="nilfs_skip_summary_info" alt="" coords="411,300,578,327"/>
<area shape="rect" id="node12" href="exec_8c.html#a36dcaf63ad8fe9783c81b418943e2346" title="count" alt="" coords="681,300,735,327"/>
<area shape="rect" id="node13" href="exec_8c.html#a9ea507497a5718b67a987a1c91a5becb" title="get_user_arg_ptr" alt="" coords="863,300,982,327"/>
<area shape="rect" id="node15" href="nilfs2_2inode_8c.html#ab64be592aa4e2bde69277e23529d0646" title="nilfs_iget" alt="" coords="457,553,532,580"/>
<area shape="rect" id="node18" href="inode_8c.html#a378733dcbf0fb08359b9a02145ac8fc3" title="iput" alt="" coords="1129,401,1172,428"/>
<area shape="rect" id="node32" href="buffer_8c.html#a6626aefd9b59aaebc226cb3baebd6a61" title="block_write_begin" alt="" coords="431,807,558,833"/>
<area shape="rect" id="node35" href="nilfs2_2inode_8c.html#a335edb4af34b36291d7c68d3e4002f55" title="nilfs_get_block" alt="" coords="868,1177,977,1204"/>
<area shape="rect" id="node42" href="nilfs2_2inode_8c.html#a5c3f5e67f9f8c1d512363b1b93f23d3a" title="nilfs_write_failed" alt="" coords="435,1060,554,1087"/>
<area shape="rect" id="node44" href="nilfs2_2inode_8c.html#ac5555ab9881841d4884f09d25c9e398d" title="nilfs_set_file_dirty" alt="" coords="859,975,986,1001"/>
<area shape="rect" id="node46" href="nilfs2_2recovery_8c.html#a63f9a40be5d6287fa2dc672847712c91" title="nilfs_recovery_copy\l_block" alt="" coords="425,1111,564,1153"/>
<area shape="rect" id="node47" href="buffer_8c.html#a826b1a44acf1091159a257d6014aff19" title="block_write_end" alt="" coords="437,883,553,909"/>
<area shape="rect" id="node16" href="nilfs2_2inode_8c.html#ae758d8edf633a8af3535ac0af248f1d1" title="nilfs_iget_locked" alt="" coords="649,553,767,580"/>
<area shape="rect" id="node24" href="nilfs2_2inode_8c.html#a7c8a580327d859581fa4a8da594a44ad" title="__nilfs_read_inode" alt="" coords="643,705,773,732"/>
<area shape="rect" id="node30" href="bad__inode_8c.html#a8c027cf52e2b7669b11b0bfa09bbcd45" title="iget_failed" alt="" coords="667,452,749,479"/>
<area shape="rect" id="node31" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="858,452,987,479"/>
<area shape="rect" id="node17" href="inode_8c.html#a0e9a0440646ab0424be87f1ee6387c64" title="iget5_locked" alt="" coords="875,503,970,529"/>
<area shape="rect" id="node21" href="nilfs2_2inode_8c.html#a42350b0b59e53776755f5a0b17efd97f" title="nilfs_iget_test" alt="" coords="871,604,974,631"/>
<area shape="rect" id="node23" href="nilfs2_2inode_8c.html#ab596c6b27b262ff881fb811a5d25990a" title="nilfs_iget_set" alt="" coords="873,553,972,580"/>
<area shape="rect" id="node20" href="debugfs_2inode_8c.html#a16e485b5debd4cd96a200844c38df190" title="EXPORT_SYMBOL" alt="" coords="1292,503,1431,529"/>
<area shape="rect" id="node19" href="inode_8c.html#a7e99b25ac29d19bc82fbddcb773c4f25" title="iput_final" alt="" coords="1324,401,1399,428"/>
<area shape="rect" id="node22" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1115,789,1186,816"/>
<area shape="rect" id="node25" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1103,885,1199,912"/>
<area shape="rect" id="node26" href="ifile_8c.html#ac12b6cbcad77a1c74299227badad2ed9" title="nilfs_ifile_get_inode\l_block" alt="" coords="855,807,991,849"/>
<area shape="rect" id="node27" href="ifile_8h.html#a4e642f68aed763c618b16f0074eac6c8" title="nilfs_ifile_map_inode" alt="" coords="851,705,994,732"/>
<area shape="rect" id="node28" href="nilfs2_2inode_8c.html#affec0e84c605c1d9028332974ba58cd3" title="nilfs_read_inode_common" alt="" coords="836,756,1009,783"/>
<area shape="rect" id="node29" href="inode_8c.html#a79a9fc774cdfca7aa0f76f8e733c9c1e" title="inode_nohighmem" alt="" coords="1087,604,1214,631"/>
<area shape="rect" id="node33" href="buffer_8c.html#a68ae9324a11c2ad8febf0b0868c8926a" title="__block_write_begin" alt="" coords="638,807,778,833"/>
<area shape="rect" id="node34" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="853,924,992,951"/>
<area shape="rect" id="node36" href="nilfs2_2bmap_8c.html#a562a4fcb04f5c54344afe05639c86914" title="nilfs_bmap_lookup_contig" alt="" coords="1065,1228,1237,1255"/>
<area shape="rect" id="node37" href="nilfs_8h.html#aacff7fe9750a849356475b2063b69e3b" title="nilfs_transaction_begin" alt="" coords="1073,1076,1228,1103"/>
<area shape="rect" id="node38" href="nilfs2_2bmap_8c.html#a4e7fd87b553f99a5d10b2f1d0cbbec0b" title="nilfs_bmap_insert" alt="" coords="1089,1279,1213,1305"/>
<area shape="rect" id="node39" href="nilfs_8h.html#a155140033fba0977ed043367001c3384" title="nilfs_transaction_abort" alt="" coords="1074,1329,1227,1356"/>
<area shape="rect" id="node40" href="nilfs_8h.html#a106a77a98b196bbb9307865c001a5025" title="nilfs_mark_inode_dirty_sync" alt="" coords="1057,1177,1244,1204"/>
<area shape="rect" id="node41" href="nilfs_8h.html#a576ee8d20fe7a5d7c5889cb118fe0533" title="nilfs_transaction_commit" alt="" coords="1067,1127,1234,1153"/>
<area shape="rect" id="node43" href="nilfs2_2inode_8c.html#a3f5a72b1064dea6d7c2737682eada97d" title="nilfs_truncate" alt="" coords="658,1068,758,1095"/>
<area shape="rect" id="node45" href="inode_8c.html#ad2a7d900c04745e54c8d2f3847922a59" title="igrab" alt="" coords="1125,961,1176,988"/>
<area shape="rect" id="node48" href="buffer_8c.html#abfc73969477d64594cbf039c1aa06788" title="page_zero_new_buffers" alt="" coords="628,908,788,935"/>
<area shape="rect" id="node49" href="buffer_8c.html#a2e34c3c659da4274a05fa553f0a9b9e7" title="__block_commit_write" alt="" coords="632,857,784,884"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2recovery_8c_a2a17f874531cf68d55aecb35d5e54fff_icgraph.png" border="0" usemap="#nilfs2_2recovery_8c_a2a17f874531cf68d55aecb35d5e54fff_icgraph" alt=""/></div>
<map name="nilfs2_2recovery_8c_a2a17f874531cf68d55aecb35d5e54fff_icgraph" id="nilfs2_2recovery_8c_a2a17f874531cf68d55aecb35d5e54fff_icgraph">
<area shape="rect" id="node2" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="195,351,369,377"/>
<area shape="rect" id="node3" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="417,208,495,235"/>
<area shape="rect" id="node4" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1759,241,1865,268"/>
<area shape="rect" id="node6" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="543,208,660,235"/>
<area shape="rect" id="node5" href="nilfs2_2super_8c.html#a6f69bb47bb8193c95863dfa7858e0556" title="nilfs_mount" alt="" coords="1930,279,2019,305"/>
<area shape="rect" id="node7" href="nilfs2_2super_8c.html#aa52d92dd32f84052f43449918f769c15" title="nilfs_sync_fs" alt="" coords="737,183,836,209"/>
<area shape="rect" id="node8" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="708,233,865,260"/>
<area shape="rect" id="node9" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="917,183,1065,209"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="922,285,1061,326"/>
<area shape="rect" id="node24" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="913,233,1069,260"/>
<area shape="rect" id="node10" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096" title="nilfs_ioctl_clean_segments" alt="" coords="1117,81,1296,108"/>
<area shape="rect" id="node11" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1383,81,1460,108"/>
<area shape="rect" id="node12" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1563,81,1683,108"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="1755,81,1869,108"/>
<area shape="rect" id="node18" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="1747,31,1877,57"/>
<area shape="rect" id="node14" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="1930,157,2019,184"/>
<area shape="rect" id="node15" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="1929,5,2021,32"/>
<area shape="rect" id="node16" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="1925,56,2024,83"/>
<area shape="rect" id="node17" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="1932,107,2017,133"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8c.html#a39d3b93661aea1ce6d75d52641a734f7" title="nilfs_segctor_thread" alt="" coords="1137,376,1276,403"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#accb2af3cf720ef8a382baa244f770a64" title="nilfs_segctor_start\l_thread" alt="" coords="1357,361,1486,402"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8h.html#accc0b22d29c5e0dc0550492c2814845f" title="nilfs_attach_log_writer" alt="" coords="1547,368,1699,395"/>
<area shape="rect" id="node23" href="nilfs2_2super_8c.html#abaf12a9facc571b7e4e46389a440b694" title="nilfs_remount" alt="" coords="1762,317,1862,344"/>
<area shape="rect" id="node25" href="nilfs2_2segment_8c.html#a53eace4b3351e7a47d95a83e02257fda" title="nilfs_segctor_destroy" alt="" coords="1133,237,1280,264"/>
<area shape="rect" id="node26" href="nilfs2_2segment_8h.html#a86ad97768e43fb1c81c962ab7f895fb0" title="nilfs_detach_log_writer" alt="" coords="1344,288,1499,315"/>
<area shape="rect" id="node27" href="nilfs2_2super_8c.html#aa48b8ba2014d88aac606b97a2b09d0ef" title="nilfs_put_super" alt="" coords="1567,267,1678,293"/>
</map>
</div>

</div>
</div>
<a id="a45afe93f318383d5ed3381fa68650a8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45afe93f318383d5ed3381fa68650a8c">&#9670;&nbsp;</a></span>nilfs_finish_roll_forward()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void nilfs_finish_roll_forward </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *&#160;</td>
          <td class="paramname"><em>nilfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structnilfs__recovery__info.html">nilfs_recovery_info</a> *&#160;</td>
          <td class="paramname"><em>ri</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2recovery_8c_a45afe93f318383d5ed3381fa68650a8c_cgraph.png" border="0" usemap="#nilfs2_2recovery_8c_a45afe93f318383d5ed3381fa68650a8c_cgraph" alt=""/></div>
<map name="nilfs2_2recovery_8c_a45afe93f318383d5ed3381fa68650a8c_cgraph" id="nilfs2_2recovery_8c_a45afe93f318383d5ed3381fa68650a8c_cgraph">
<area shape="rect" id="node2" href="the__nilfs_8h.html#acbe15a8b57f8ecf5e4777294c2f7303d" title="nilfs_get_segnum_of\l_block" alt="" coords="212,285,355,326"/>
<area shape="rect" id="node3" href="buffer_8c.html#aa6e73e23b9f75a73cf4112fb3d19b668" title="sync_dirty_buffer" alt="" coords="222,351,345,377"/>
<area shape="rect" id="node4" href="buffer_8c.html#ad14d5a18ab22cf24baa474870664c128" title="__sync_dirty_buffer" alt="" coords="403,300,539,327"/>
<area shape="rect" id="node8" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="979,275,1118,301"/>
<area shape="rect" id="node5" href="buffer_8c.html#aac5852df82371e20e891b02a37461248" title="end_buffer_write_sync" alt="" coords="587,249,740,276"/>
<area shape="rect" id="node9" href="buffer_8c.html#a5fc92b2c44523c64e98193eaa4f46541" title="unlock_buffer" alt="" coords="809,300,909,327"/>
<area shape="rect" id="node10" href="buffer_8c.html#ab65df498c54845f497bae7afe9222c91" title="submit_bh" alt="" coords="622,81,705,108"/>
<area shape="rect" id="node6" href="buffer_8c.html#a15c60a53f942f27f505098848dda3f3e" title="buffer_io_error" alt="" coords="807,132,912,159"/>
<area shape="rect" id="node7" href="buffer_8c.html#a0c5a9b93af2e1cc8bdeb45d23f5fd4fd" title="mark_buffer_write_io\l_error" alt="" coords="788,183,931,225"/>
<area shape="rect" id="node11" href="buffer_8c.html#a5fd6f01c5f9cff0945cb999cbefa412d" title="submit_bh_wbc" alt="" coords="803,31,916,57"/>
<area shape="rect" id="node12" href="buffer_8c.html#a2463267e7636f2be0fc2b44fb65cb5ba" title="end_bio_bh_io_sync" alt="" coords="979,56,1119,83"/>
<area shape="rect" id="node13" href="buffer_8c.html#aa35a4aa9ac3d40858082aabb83e2a44c" title="guard_bio_eod" alt="" coords="995,5,1102,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2recovery_8c_a45afe93f318383d5ed3381fa68650a8c_icgraph.png" border="0" usemap="#nilfs2_2recovery_8c_a45afe93f318383d5ed3381fa68650a8c_icgraph" alt=""/></div>
<map name="nilfs2_2recovery_8c_a45afe93f318383d5ed3381fa68650a8c_icgraph" id="nilfs2_2recovery_8c_a45afe93f318383d5ed3381fa68650a8c_icgraph">
<area shape="rect" id="node2" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="212,351,387,377"/>
<area shape="rect" id="node3" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="435,208,512,235"/>
<area shape="rect" id="node4" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1777,241,1882,268"/>
<area shape="rect" id="node6" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="560,208,677,235"/>
<area shape="rect" id="node5" href="nilfs2_2super_8c.html#a6f69bb47bb8193c95863dfa7858e0556" title="nilfs_mount" alt="" coords="1947,279,2037,305"/>
<area shape="rect" id="node7" href="nilfs2_2super_8c.html#aa52d92dd32f84052f43449918f769c15" title="nilfs_sync_fs" alt="" coords="755,183,853,209"/>
<area shape="rect" id="node8" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="725,233,883,260"/>
<area shape="rect" id="node9" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="935,183,1083,209"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="939,285,1078,326"/>
<area shape="rect" id="node24" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="931,233,1087,260"/>
<area shape="rect" id="node10" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096" title="nilfs_ioctl_clean_segments" alt="" coords="1135,81,1313,108"/>
<area shape="rect" id="node11" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1400,81,1477,108"/>
<area shape="rect" id="node12" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1580,81,1700,108"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="1772,81,1887,108"/>
<area shape="rect" id="node18" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="1764,31,1895,57"/>
<area shape="rect" id="node14" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="1947,157,2037,184"/>
<area shape="rect" id="node15" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="1946,5,2038,32"/>
<area shape="rect" id="node16" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="1943,56,2041,83"/>
<area shape="rect" id="node17" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="1949,107,2035,133"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8c.html#a39d3b93661aea1ce6d75d52641a734f7" title="nilfs_segctor_thread" alt="" coords="1155,376,1293,403"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#accb2af3cf720ef8a382baa244f770a64" title="nilfs_segctor_start\l_thread" alt="" coords="1374,361,1503,402"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8h.html#accc0b22d29c5e0dc0550492c2814845f" title="nilfs_attach_log_writer" alt="" coords="1564,368,1716,395"/>
<area shape="rect" id="node23" href="nilfs2_2super_8c.html#abaf12a9facc571b7e4e46389a440b694" title="nilfs_remount" alt="" coords="1779,317,1879,344"/>
<area shape="rect" id="node25" href="nilfs2_2segment_8c.html#a53eace4b3351e7a47d95a83e02257fda" title="nilfs_segctor_destroy" alt="" coords="1151,237,1297,264"/>
<area shape="rect" id="node26" href="nilfs2_2segment_8h.html#a86ad97768e43fb1c81c962ab7f895fb0" title="nilfs_detach_log_writer" alt="" coords="1361,288,1516,315"/>
<area shape="rect" id="node27" href="nilfs2_2super_8c.html#aa48b8ba2014d88aac606b97a2b09d0ef" title="nilfs_put_super" alt="" coords="1585,267,1695,293"/>
</map>
</div>

</div>
</div>
<a id="a561c361c13ae22022d24695836c97423"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a561c361c13ae22022d24695836c97423">&#9670;&nbsp;</a></span>nilfs_prepare_segment_for_recovery()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_prepare_segment_for_recovery </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *&#160;</td>
          <td class="paramname"><em>nilfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structsuper__block.html">super_block</a> *&#160;</td>
          <td class="paramname"><em>sb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structnilfs__recovery__info.html">nilfs_recovery_info</a> *&#160;</td>
          <td class="paramname"><em>ri</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2recovery_8c_a561c361c13ae22022d24695836c97423_cgraph.png" border="0" usemap="#nilfs2_2recovery_8c_a561c361c13ae22022d24695836c97423_cgraph" alt=""/></div>
<map name="nilfs2_2recovery_8c_a561c361c13ae22022d24695836c97423_cgraph" id="nilfs2_2recovery_8c_a561c361c13ae22022d24695836c97423_cgraph">
<area shape="rect" id="node2" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="227,1055,341,1081"/>
<area shape="rect" id="node48" href="nilfs2_2recovery_8c.html#a84b5fcfc15ade4d11a4ca915643bcb8a" title="nilfs_segment_list_add" alt="" coords="207,1156,361,1183"/>
<area shape="rect" id="node49" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="223,1004,345,1031"/>
<area shape="rect" id="node50" href="sufile_8c.html#a6af95c8f1e6b7fedd7f95421e2eeafe6" title="nilfs_sufile_alloc" alt="" coords="415,1131,534,1157"/>
<area shape="rect" id="node3" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="409,1055,540,1081"/>
<area shape="rect" id="node36" href="sufile_8h.html#a577d0d35a7907909b6c0a139d8cc1704" title="nilfs_sufile_do_free" alt="" coords="1069,616,1203,643"/>
<area shape="rect" id="node4" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="588,1093,768,1120"/>
<area shape="rect" id="node7" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1907,1399,2003,1425"/>
<area shape="rect" id="node10" href="sufile_8c.html#a7df3cdff37c5aa00cca3458f1d7d400e" title="nilfs_sufile_get_header\l_block" alt="" coords="1279,1358,1434,1399"/>
<area shape="rect" id="node14" href="sufile_8c.html#a38f2abf7ef7577b1af4b9e8fc9316727" title="nilfs_sufile_get_segment\l_usage_block" alt="" coords="1273,1475,1440,1517"/>
<area shape="rect" id="node5" href="sufile_8h.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="816,891,999,917"/>
<area shape="rect" id="node8" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="836,1219,979,1261"/>
<area shape="rect" id="node9" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="1077,1307,1195,1333"/>
<area shape="rect" id="node26" href="sufile_8h.html#ae5c9db186be6baf07d66e049a0fd9b9b" title="nilfs_sufile_mark_dirty" alt="" coords="1060,565,1212,592"/>
<area shape="rect" id="node27" href="sufile_8h.html#ac6379742426c30d02072b1a5b0f527f8" title="nilfs_sufile_set_segment\l_usage" alt="" coords="1053,449,1219,490"/>
<area shape="rect" id="node28" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033" title="nblocks" alt="" coords="1323,1744,1390,1771"/>
<area shape="rect" id="node29" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="838,1093,977,1120"/>
<area shape="rect" id="node30" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="1061,1795,1211,1821"/>
<area shape="rect" id="node32" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687" title="nilfs_sufile_set_suinfo" alt="" coords="1061,987,1211,1013"/>
<area shape="rect" id="node34" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="1067,1452,1205,1479"/>
<area shape="rect" id="node35" href="sufile_8h.html#acad60c93c0f7f6c3a8a9dc843107f1ed" title="nilfs_sufile_do_scrap" alt="" coords="1064,515,1208,541"/>
<area shape="rect" id="node37" href="sufile_8h.html#aff87ff4257115842ff3c7940e5f8e769" title="nilfs_sufile_do_cancel_free" alt="" coords="1047,733,1225,760"/>
<area shape="rect" id="node38" href="sufile_8h.html#a7e943e59486cd6176a3317bed589b7c9" title="nilfs_sufile_do_set\l_error" alt="" coords="1071,667,1201,709"/>
<area shape="rect" id="node39" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="844,397,971,424"/>
<area shape="rect" id="node43" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="1078,1503,1194,1529"/>
<area shape="rect" id="node47" href="sufile_8h.html#a202058a1d5a7ee3658e8e7cda1ffee37" title="nilfs_sufile_trim_fs" alt="" coords="1071,1743,1201,1769"/>
<area shape="rect" id="node6" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="1311,784,1402,811"/>
<area shape="rect" id="node17" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="1283,987,1430,1029"/>
<area shape="rect" id="node19" href="sufile_8c.html#a34ecb984fd0f57101d2ee0b4bde4bf95" title="nilfs_sufile_segment\l_usages_in_block" alt="" coords="1286,1846,1427,1887"/>
<area shape="rect" id="node20" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1510,607,1633,633"/>
<area shape="rect" id="node24" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="1285,531,1428,557"/>
<area shape="rect" id="node11" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="1502,1344,1641,1371"/>
<area shape="rect" id="node12" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="1708,1272,1853,1299"/>
<area shape="rect" id="node13" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="1703,1323,1859,1349"/>
<area shape="rect" id="node15" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="1497,1432,1645,1459"/>
<area shape="rect" id="node16" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="1710,1475,1851,1517"/>
<area shape="rect" id="node18" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="1497,1483,1646,1509"/>
<area shape="rect" id="node21" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1720,657,1841,684"/>
<area shape="rect" id="node22" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1713,556,1848,583"/>
<area shape="rect" id="node23" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1711,607,1850,633"/>
<area shape="rect" id="node25" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1536,531,1607,557"/>
<area shape="rect" id="node31" href="the__nilfs_8h.html#a51bb53199a62a87f269e03404136d00f" title="nilfs_segment_is_active" alt="" coords="1275,1795,1438,1821"/>
<area shape="rect" id="node33" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="1273,683,1440,709"/>
<area shape="rect" id="node40" href="the__nilfs_8c.html#aa7bf85e7bb9022b3680b22d945d17f91" title="nilfs_nrsvsegs" alt="" coords="1303,109,1410,136"/>
<area shape="rect" id="node41" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="1067,1089,1205,1130"/>
<area shape="rect" id="node42" href="the__nilfs_8c.html#a38632ac69509070865038bf0120a1509" title="nilfs_set_nsegments" alt="" coords="1065,144,1207,171"/>
<area shape="rect" id="node44" href="nilfs2_2inode_8c.html#ae758d8edf633a8af3535ac0af248f1d1" title="nilfs_iget_locked" alt="" coords="1297,1693,1416,1720"/>
<area shape="rect" id="node45" href="mdt_8c.html#a9d24c6e56a98e581fc30fd8a65841e2a" title="nilfs_mdt_init" alt="" coords="1307,1643,1406,1669"/>
<area shape="rect" id="node46" href="mdt_8c.html#ae0d853ce1775f22eb93823f6423e6fac" title="nilfs_mdt_set_entry_size" alt="" coords="1488,2064,1655,2091"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2recovery_8c_a561c361c13ae22022d24695836c97423_icgraph.png" border="0" usemap="#nilfs2_2recovery_8c_a561c361c13ae22022d24695836c97423_icgraph" alt=""/></div>
<map name="nilfs2_2recovery_8c_a561c361c13ae22022d24695836c97423_icgraph" id="nilfs2_2recovery_8c_a561c361c13ae22022d24695836c97423_icgraph">
<area shape="rect" id="node2" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="207,351,381,377"/>
<area shape="rect" id="node3" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="429,208,507,235"/>
<area shape="rect" id="node4" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1771,241,1877,268"/>
<area shape="rect" id="node6" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="555,208,672,235"/>
<area shape="rect" id="node5" href="nilfs2_2super_8c.html#a6f69bb47bb8193c95863dfa7858e0556" title="nilfs_mount" alt="" coords="1942,279,2031,305"/>
<area shape="rect" id="node7" href="nilfs2_2super_8c.html#aa52d92dd32f84052f43449918f769c15" title="nilfs_sync_fs" alt="" coords="749,183,848,209"/>
<area shape="rect" id="node8" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="720,233,877,260"/>
<area shape="rect" id="node9" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="929,183,1077,209"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="934,285,1073,326"/>
<area shape="rect" id="node24" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="925,233,1081,260"/>
<area shape="rect" id="node10" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096" title="nilfs_ioctl_clean_segments" alt="" coords="1129,81,1308,108"/>
<area shape="rect" id="node11" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1395,81,1472,108"/>
<area shape="rect" id="node12" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1575,81,1695,108"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="1767,81,1881,108"/>
<area shape="rect" id="node18" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="1759,31,1889,57"/>
<area shape="rect" id="node14" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="1942,157,2031,184"/>
<area shape="rect" id="node15" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="1941,5,2033,32"/>
<area shape="rect" id="node16" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="1937,56,2036,83"/>
<area shape="rect" id="node17" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="1944,107,2029,133"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8c.html#a39d3b93661aea1ce6d75d52641a734f7" title="nilfs_segctor_thread" alt="" coords="1149,376,1288,403"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#accb2af3cf720ef8a382baa244f770a64" title="nilfs_segctor_start\l_thread" alt="" coords="1369,361,1498,402"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8h.html#accc0b22d29c5e0dc0550492c2814845f" title="nilfs_attach_log_writer" alt="" coords="1559,368,1711,395"/>
<area shape="rect" id="node23" href="nilfs2_2super_8c.html#abaf12a9facc571b7e4e46389a440b694" title="nilfs_remount" alt="" coords="1774,317,1874,344"/>
<area shape="rect" id="node25" href="nilfs2_2segment_8c.html#a53eace4b3351e7a47d95a83e02257fda" title="nilfs_segctor_destroy" alt="" coords="1145,237,1292,264"/>
<area shape="rect" id="node26" href="nilfs2_2segment_8h.html#a86ad97768e43fb1c81c962ab7f895fb0" title="nilfs_detach_log_writer" alt="" coords="1356,288,1511,315"/>
<area shape="rect" id="node27" href="nilfs2_2super_8c.html#aa48b8ba2014d88aac606b97a2b09d0ef" title="nilfs_put_super" alt="" coords="1579,267,1690,293"/>
</map>
</div>

</div>
</div>
<a id="a3d8c2c650ddfd797f123c53e2f374587"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d8c2c650ddfd797f123c53e2f374587">&#9670;&nbsp;</a></span>nilfs_read_log_header()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct buffer_head* nilfs_read_log_header </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *&#160;</td>
          <td class="paramname"><em>nilfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sector_t&#160;</td>
          <td class="paramname"><em>start_blocknr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct nilfs_segment_summary **&#160;</td>
          <td class="paramname"><em>sum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_read_log_header - read summary header of the specified log : nilfs object : start block number of the log : pointer to return segment summary structure </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2recovery_8c_a3d8c2c650ddfd797f123c53e2f374587_icgraph.png" border="0" usemap="#nilfs2_2recovery_8c_a3d8c2c650ddfd797f123c53e2f374587_icgraph" alt=""/></div>
<map name="nilfs2_2recovery_8c_a3d8c2c650ddfd797f123c53e2f374587_icgraph" id="nilfs2_2recovery_8c_a3d8c2c650ddfd797f123c53e2f374587_icgraph">
<area shape="rect" id="node2" href="nilfs2_2recovery_8c.html#a2a17f874531cf68d55aecb35d5e54fff" title="nilfs_do_roll_forward" alt="" coords="201,351,343,377"/>
<area shape="rect" id="node29" href="nilfs2_2segment_8h.html#ac35601ebb220d6cce77c5513d0c5ff9a" title="nilfs_search_super_root" alt="" coords="398,300,558,327"/>
<area shape="rect" id="node3" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="391,351,565,377"/>
<area shape="rect" id="node4" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="613,296,691,323"/>
<area shape="rect" id="node5" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1955,241,2061,268"/>
<area shape="rect" id="node7" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="739,263,856,289"/>
<area shape="rect" id="node6" href="nilfs2_2super_8c.html#a6f69bb47bb8193c95863dfa7858e0556" title="nilfs_mount" alt="" coords="2126,279,2215,305"/>
<area shape="rect" id="node8" href="nilfs2_2super_8c.html#aa52d92dd32f84052f43449918f769c15" title="nilfs_sync_fs" alt="" coords="933,212,1032,239"/>
<area shape="rect" id="node9" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="904,263,1061,289"/>
<area shape="rect" id="node10" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1113,183,1261,209"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1118,285,1257,326"/>
<area shape="rect" id="node25" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1109,233,1265,260"/>
<area shape="rect" id="node11" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096" title="nilfs_ioctl_clean_segments" alt="" coords="1313,81,1492,108"/>
<area shape="rect" id="node12" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1579,81,1656,108"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1759,81,1879,108"/>
<area shape="rect" id="node14" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="1951,81,2065,108"/>
<area shape="rect" id="node19" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="1943,31,2073,57"/>
<area shape="rect" id="node15" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="2126,157,2215,184"/>
<area shape="rect" id="node16" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="2125,5,2217,32"/>
<area shape="rect" id="node17" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="2121,56,2220,83"/>
<area shape="rect" id="node18" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="2128,107,2213,133"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a39d3b93661aea1ce6d75d52641a734f7" title="nilfs_segctor_thread" alt="" coords="1333,376,1472,403"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8c.html#accb2af3cf720ef8a382baa244f770a64" title="nilfs_segctor_start\l_thread" alt="" coords="1553,361,1682,402"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8h.html#accc0b22d29c5e0dc0550492c2814845f" title="nilfs_attach_log_writer" alt="" coords="1743,368,1895,395"/>
<area shape="rect" id="node24" href="nilfs2_2super_8c.html#abaf12a9facc571b7e4e46389a440b694" title="nilfs_remount" alt="" coords="1958,317,2058,344"/>
<area shape="rect" id="node26" href="nilfs2_2segment_8c.html#a53eace4b3351e7a47d95a83e02257fda" title="nilfs_segctor_destroy" alt="" coords="1329,237,1476,264"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8h.html#a86ad97768e43fb1c81c962ab7f895fb0" title="nilfs_detach_log_writer" alt="" coords="1540,288,1695,315"/>
<area shape="rect" id="node28" href="nilfs2_2super_8c.html#aa48b8ba2014d88aac606b97a2b09d0ef" title="nilfs_put_super" alt="" coords="1763,267,1874,293"/>
</map>
</div>

</div>
</div>
<a id="ab8122880fae04138dd1a06012d627a50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8122880fae04138dd1a06012d627a50">&#9670;&nbsp;</a></span>nilfs_read_summary_info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* nilfs_read_summary_info </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *&#160;</td>
          <td class="paramname"><em>nilfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct buffer_head **&#160;</td>
          <td class="paramname"><em>pbh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_read_summary_info - read an item on summary blocks of a log : nilfs object : the current buffer head on summary blocks [in, out] : the current byte offset on summary blocks [in, out] : byte size of the item to be read </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2recovery_8c_ab8122880fae04138dd1a06012d627a50_icgraph.png" border="0" usemap="#nilfs2_2recovery_8c_ab8122880fae04138dd1a06012d627a50_icgraph" alt=""/></div>
<map name="nilfs2_2recovery_8c_ab8122880fae04138dd1a06012d627a50_icgraph" id="nilfs2_2recovery_8c_ab8122880fae04138dd1a06012d627a50_icgraph">
<area shape="rect" id="node2" href="nilfs2_2recovery_8c.html#abf77ed253bd969bb1d723c7ee3f8d8d8" title="nilfs_scan_dsync_log" alt="" coords="220,351,367,377"/>
<area shape="rect" id="node3" href="nilfs2_2recovery_8c.html#a2a17f874531cf68d55aecb35d5e54fff" title="nilfs_do_roll_forward" alt="" coords="415,351,556,377"/>
<area shape="rect" id="node4" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="604,351,779,377"/>
<area shape="rect" id="node5" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="827,208,904,235"/>
<area shape="rect" id="node6" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="2169,241,2274,268"/>
<area shape="rect" id="node8" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="952,208,1069,235"/>
<area shape="rect" id="node7" href="nilfs2_2super_8c.html#a6f69bb47bb8193c95863dfa7858e0556" title="nilfs_mount" alt="" coords="2339,279,2429,305"/>
<area shape="rect" id="node9" href="nilfs2_2super_8c.html#aa52d92dd32f84052f43449918f769c15" title="nilfs_sync_fs" alt="" coords="1147,183,1245,209"/>
<area shape="rect" id="node10" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1117,233,1275,260"/>
<area shape="rect" id="node11" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1327,183,1475,209"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1331,285,1470,326"/>
<area shape="rect" id="node26" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1323,233,1479,260"/>
<area shape="rect" id="node12" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096" title="nilfs_ioctl_clean_segments" alt="" coords="1527,81,1705,108"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1792,81,1869,108"/>
<area shape="rect" id="node14" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1972,81,2092,108"/>
<area shape="rect" id="node15" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2164,81,2279,108"/>
<area shape="rect" id="node20" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2156,31,2287,57"/>
<area shape="rect" id="node16" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="2339,157,2429,184"/>
<area shape="rect" id="node17" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="2338,5,2430,32"/>
<area shape="rect" id="node18" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="2335,56,2433,83"/>
<area shape="rect" id="node19" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="2341,107,2427,133"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8c.html#a39d3b93661aea1ce6d75d52641a734f7" title="nilfs_segctor_thread" alt="" coords="1547,376,1685,403"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8c.html#accb2af3cf720ef8a382baa244f770a64" title="nilfs_segctor_start\l_thread" alt="" coords="1766,361,1895,402"/>
<area shape="rect" id="node24" href="nilfs2_2segment_8h.html#accc0b22d29c5e0dc0550492c2814845f" title="nilfs_attach_log_writer" alt="" coords="1956,368,2108,395"/>
<area shape="rect" id="node25" href="nilfs2_2super_8c.html#abaf12a9facc571b7e4e46389a440b694" title="nilfs_remount" alt="" coords="2171,317,2271,344"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8c.html#a53eace4b3351e7a47d95a83e02257fda" title="nilfs_segctor_destroy" alt="" coords="1543,237,1689,264"/>
<area shape="rect" id="node28" href="nilfs2_2segment_8h.html#a86ad97768e43fb1c81c962ab7f895fb0" title="nilfs_detach_log_writer" alt="" coords="1753,288,1908,315"/>
<area shape="rect" id="node29" href="nilfs2_2super_8c.html#aa48b8ba2014d88aac606b97a2b09d0ef" title="nilfs_put_super" alt="" coords="1977,267,2087,293"/>
</map>
</div>

</div>
</div>
<a id="a1f396e9debfefa7181d7e1f5b8b57a05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f396e9debfefa7181d7e1f5b8b57a05">&#9670;&nbsp;</a></span>nilfs_read_super_root_block()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nilfs_read_super_root_block </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *&#160;</td>
          <td class="paramname"><em>nilfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sector_t&#160;</td>
          <td class="paramname"><em>sr_block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct buffer_head **&#160;</td>
          <td class="paramname"><em>pbh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>check</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>nilfs_read_super_root_block - read super root block : nilfs object : disk block number of the super root block : address of a buffer_head pointer to return super root buffer : CRC check flag </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2recovery_8c_a1f396e9debfefa7181d7e1f5b8b57a05_cgraph.png" border="0" usemap="#nilfs2_2recovery_8c_a1f396e9debfefa7181d7e1f5b8b57a05_cgraph" alt=""/></div>
<map name="nilfs2_2recovery_8c_a1f396e9debfefa7181d7e1f5b8b57a05_cgraph" id="nilfs2_2recovery_8c_a1f396e9debfefa7181d7e1f5b8b57a05_cgraph">
<area shape="rect" id="node2" href="nilfs2_2recovery_8c.html#a259060e9360fc15d85d67af63a41b28b" title="nilfs_compute_checksum" alt="" coords="200,5,371,32"/>
<area shape="rect" id="node3" href="nilfs2_2recovery_8c.html#a109c59b06bae1b29692af69694c5ab03" title="nilfs_warn_segment\l_error" alt="" coords="216,57,355,98"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2recovery_8c_a1f396e9debfefa7181d7e1f5b8b57a05_icgraph.png" border="0" usemap="#nilfs2_2recovery_8c_a1f396e9debfefa7181d7e1f5b8b57a05_icgraph" alt=""/></div>
<map name="nilfs2_2recovery_8c_a1f396e9debfefa7181d7e1f5b8b57a05_icgraph" id="nilfs2_2recovery_8c_a1f396e9debfefa7181d7e1f5b8b57a05_icgraph">
<area shape="rect" id="node2" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="200,229,345,256"/>
<area shape="rect" id="node3" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="393,229,471,256"/>
<area shape="rect" id="node4" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1757,196,1863,223"/>
<area shape="rect" id="node6" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="519,229,636,256"/>
<area shape="rect" id="node5" href="nilfs2_2super_8c.html#a6f69bb47bb8193c95863dfa7858e0556" title="nilfs_mount" alt="" coords="1950,233,2039,260"/>
<area shape="rect" id="node7" href="nilfs2_2super_8c.html#aa52d92dd32f84052f43449918f769c15" title="nilfs_sync_fs" alt="" coords="713,204,812,231"/>
<area shape="rect" id="node8" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="684,255,841,281"/>
<area shape="rect" id="node9" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="893,196,1041,223"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="898,247,1037,289"/>
<area shape="rect" id="node25" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="889,313,1045,340"/>
<area shape="rect" id="node10" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096" title="nilfs_ioctl_clean_segments" alt="" coords="1093,196,1272,223"/>
<area shape="rect" id="node11" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1359,95,1436,121"/>
<area shape="rect" id="node12" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1539,95,1659,121"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="1753,95,1867,121"/>
<area shape="rect" id="node18" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="1745,44,1875,71"/>
<area shape="rect" id="node14" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="1950,107,2039,133"/>
<area shape="rect" id="node15" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="1949,157,2041,184"/>
<area shape="rect" id="node16" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="1945,5,2044,32"/>
<area shape="rect" id="node17" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="1952,56,2037,83"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8c.html#a39d3b93661aea1ce6d75d52641a734f7" title="nilfs_segctor_thread" alt="" coords="1113,251,1252,277"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#accb2af3cf720ef8a382baa244f770a64" title="nilfs_segctor_start\l_thread" alt="" coords="1333,241,1462,282"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8h.html#accc0b22d29c5e0dc0550492c2814845f" title="nilfs_attach_log_writer" alt="" coords="1523,247,1675,273"/>
<area shape="rect" id="node23" href="nilfs2_2super_8c.html#abaf12a9facc571b7e4e46389a440b694" title="nilfs_remount" alt="" coords="1760,247,1860,273"/>
<area shape="rect" id="node24" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1723,399,1897,425"/>
<area shape="rect" id="node26" href="nilfs2_2segment_8c.html#a53eace4b3351e7a47d95a83e02257fda" title="nilfs_segctor_destroy" alt="" coords="1109,309,1256,336"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8h.html#a86ad97768e43fb1c81c962ab7f895fb0" title="nilfs_detach_log_writer" alt="" coords="1320,308,1475,335"/>
<area shape="rect" id="node28" href="nilfs2_2super_8c.html#aa48b8ba2014d88aac606b97a2b09d0ef" title="nilfs_put_super" alt="" coords="1543,348,1654,375"/>
</map>
</div>

</div>
</div>
<a id="a2ee5a3a12c87c9cd4363d28a2c6edb73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ee5a3a12c87c9cd4363d28a2c6edb73">&#9670;&nbsp;</a></span>nilfs_recover_dsync_blocks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_recover_dsync_blocks </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *&#160;</td>
          <td class="paramname"><em>nilfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structsuper__block.html">super_block</a> *&#160;</td>
          <td class="paramname"><em>sb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structnilfs__root.html">nilfs_root</a> *&#160;</td>
          <td class="paramname"><em>root</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct list_head *&#160;</td>
          <td class="paramname"><em>head</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long *&#160;</td>
          <td class="paramname"><em>nr_salvaged_blocks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2recovery_8c_a2ee5a3a12c87c9cd4363d28a2c6edb73_cgraph.png" border="0" usemap="#nilfs2_2recovery_8c_a2ee5a3a12c87c9cd4363d28a2c6edb73_cgraph" alt=""/></div>
<map name="nilfs2_2recovery_8c_a2ee5a3a12c87c9cd4363d28a2c6edb73_cgraph" id="nilfs2_2recovery_8c_a2ee5a3a12c87c9cd4363d28a2c6edb73_cgraph">
<area shape="rect" id="node2" href="nilfs2_2inode_8c.html#ab64be592aa4e2bde69277e23529d0646" title="nilfs_iget" alt="" coords="224,263,299,290"/>
<area shape="rect" id="node5" href="inode_8c.html#a378733dcbf0fb08359b9a02145ac8fc3" title="iput" alt="" coords="848,250,891,276"/>
<area shape="rect" id="node24" href="buffer_8c.html#a6626aefd9b59aaebc226cb3baebd6a61" title="block_write_begin" alt="" coords="198,1304,325,1331"/>
<area shape="rect" id="node29" href="nilfs2_2inode_8c.html#a335edb4af34b36291d7c68d3e4002f55" title="nilfs_get_block" alt="" coords="593,1032,702,1059"/>
<area shape="rect" id="node44" href="nilfs2_2inode_8c.html#a5c3f5e67f9f8c1d512363b1b93f23d3a" title="nilfs_write_failed" alt="" coords="202,1094,321,1120"/>
<area shape="rect" id="node46" href="nilfs2_2inode_8c.html#ac5555ab9881841d4884f09d25c9e398d" title="nilfs_set_file_dirty" alt="" coords="584,899,711,926"/>
<area shape="rect" id="node48" href="nilfs2_2recovery_8c.html#a63f9a40be5d6287fa2dc672847712c91" title="nilfs_recovery_copy\l_block" alt="" coords="192,1482,331,1524"/>
<area shape="rect" id="node49" href="buffer_8c.html#a826b1a44acf1091159a257d6014aff19" title="block_write_end" alt="" coords="589,1456,705,1483"/>
<area shape="rect" id="node3" href="nilfs2_2inode_8c.html#ae758d8edf633a8af3535ac0af248f1d1" title="nilfs_iget_locked" alt="" coords="389,263,508,290"/>
<area shape="rect" id="node11" href="nilfs2_2inode_8c.html#a7c8a580327d859581fa4a8da594a44ad" title="__nilfs_read_inode" alt="" coords="582,503,713,530"/>
<area shape="rect" id="node20" href="bad__inode_8c.html#a8c027cf52e2b7669b11b0bfa09bbcd45" title="iget_failed" alt="" coords="408,111,489,138"/>
<area shape="rect" id="node23" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="583,10,712,36"/>
<area shape="rect" id="node4" href="inode_8c.html#a0e9a0440646ab0424be87f1ee6387c64" title="iget5_locked" alt="" coords="600,314,695,340"/>
<area shape="rect" id="node8" href="nilfs2_2inode_8c.html#a42350b0b59e53776755f5a0b17efd97f" title="nilfs_iget_test" alt="" coords="596,212,699,239"/>
<area shape="rect" id="node10" href="nilfs2_2inode_8c.html#ab596c6b27b262ff881fb811a5d25990a" title="nilfs_iget_set" alt="" coords="598,263,697,290"/>
<area shape="rect" id="node7" href="debugfs_2inode_8c.html#a16e485b5debd4cd96a200844c38df190" title="EXPORT_SYMBOL" alt="" coords="1033,326,1172,352"/>
<area shape="rect" id="node6" href="inode_8c.html#a7e99b25ac29d19bc82fbddcb773c4f25" title="iput_final" alt="" coords="1065,250,1140,276"/>
<area shape="rect" id="node9" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1243,596,1313,623"/>
<area shape="rect" id="node12" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="821,722,917,748"/>
<area shape="rect" id="node13" href="ifile_8c.html#ac12b6cbcad77a1c74299227badad2ed9" title="nilfs_ifile_get_inode\l_block" alt="" coords="801,656,937,697"/>
<area shape="rect" id="node14" href="ifile_8h.html#a4e642f68aed763c618b16f0074eac6c8" title="nilfs_ifile_map_inode" alt="" coords="798,554,941,580"/>
<area shape="rect" id="node15" href="nilfs2_2inode_8c.html#affec0e84c605c1d9028332974ba58cd3" title="nilfs_read_inode_common" alt="" coords="1016,550,1189,576"/>
<area shape="rect" id="node16" href="inode_8c.html#a79a9fc774cdfca7aa0f76f8e733c9c1e" title="inode_nohighmem" alt="" coords="806,351,933,378"/>
<area shape="rect" id="node17" href="inode_8c.html#aa992afd465d948c7fca769d396933c98" title="init_special_inode" alt="" coords="807,402,932,428"/>
<area shape="rect" id="node18" href="ifile_8h.html#a71eaa47470458aa09a3fcf3c98e19e25" title="nilfs_ifile_unmap_inode" alt="" coords="791,604,948,631"/>
<area shape="rect" id="node19" href="nilfs2_2inode_8c.html#a3709db610911a00ce98363ee8d9938fd" title="nilfs_set_inode_flags" alt="" coords="1031,452,1175,479"/>
<area shape="rect" id="node21" href="bad__inode_8c.html#ab9cc2af6161530b35e5f86e29f977033" title="make_bad_inode" alt="" coords="587,111,707,138"/>
<area shape="rect" id="node22" href="bad__inode_8c.html#a74ff3566c64350315f12163f4ddfdae7" title="EXPORT_SYMBOL" alt="" coords="800,72,939,99"/>
<area shape="rect" id="node25" href="buffer_8c.html#a68ae9324a11c2ad8febf0b0868c8926a" title="__block_write_begin" alt="" coords="379,1304,519,1331"/>
<area shape="rect" id="node28" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1033,1406,1172,1432"/>
<area shape="rect" id="node26" href="buffer_8c.html#a0d8deb1a832a7ff7803dd5bb8eeeb848" title="__block_write_begin_int" alt="" coords="567,1330,728,1356"/>
<area shape="rect" id="node27" href="buffer_8c.html#abfc73969477d64594cbf039c1aa06788" title="page_zero_new_buffers" alt="" coords="789,1431,949,1458"/>
<area shape="rect" id="node30" href="nilfs2_2bmap_8c.html#a562a4fcb04f5c54344afe05639c86914" title="nilfs_bmap_lookup_contig" alt="" coords="783,1026,955,1052"/>
<area shape="rect" id="node32" href="nilfs_8h.html#aacff7fe9750a849356475b2063b69e3b" title="nilfs_transaction_begin" alt="" coords="792,1127,947,1154"/>
<area shape="rect" id="node35" href="nilfs2_2bmap_8c.html#a4e7fd87b553f99a5d10b2f1d0cbbec0b" title="nilfs_bmap_insert" alt="" coords="807,924,931,951"/>
<area shape="rect" id="node37" href="nilfs_8h.html#a155140033fba0977ed043367001c3384" title="nilfs_transaction_abort" alt="" coords="793,975,946,1002"/>
<area shape="rect" id="node38" href="nilfs_8h.html#a106a77a98b196bbb9307865c001a5025" title="nilfs_mark_inode_dirty_sync" alt="" coords="776,874,963,900"/>
<area shape="rect" id="node43" href="nilfs_8h.html#a576ee8d20fe7a5d7c5889cb118fe0533" title="nilfs_transaction_commit" alt="" coords="786,1178,953,1204"/>
<area shape="rect" id="node31" href="nilfs2_2bmap_8c.html#a7a7ea41075313d317e5036ebc1fbbe3b" title="nilfs_bmap_convert\l_error" alt="" coords="1035,1010,1170,1052"/>
<area shape="rect" id="node33" href="nilfs2_2segment_8c.html#ada0ba1bf162679380f6096c9f83b94ea" title="nilfs_prepare_segment_lock" alt="" coords="1011,1178,1195,1204"/>
<area shape="rect" id="node34" href="the__nilfs_8c.html#a137faca9117bfef2a2264ccf3a9aa809" title="nilfs_near_disk_full" alt="" coords="1036,1127,1169,1154"/>
<area shape="rect" id="node36" href="nilfs2_2bmap_8c.html#ac5f71baa604f8d2043ceb4c11aa72ff3" title="nilfs_bmap_do_insert" alt="" coords="1030,959,1175,986"/>
<area shape="rect" id="node39" href="nilfs_8h.html#a46e169872ed27278f3e5c506282e6ffe" title="__nilfs_mark_inode\l_dirty" alt="" coords="1035,842,1170,884"/>
<area shape="rect" id="node40" href="nilfs_8h.html#a0b563a3dda73d94cec30f6fbfc200609" title="nilfs_alloc_inode" alt="" coords="1043,740,1162,767"/>
<area shape="rect" id="node41" href="nilfs_8h.html#a27f655836f48b79bbf1a0d938a6f394c" title="nilfs_destroy_inode" alt="" coords="1035,791,1170,818"/>
<area shape="rect" id="node42" href="nilfs_8h.html#a97604abb336d5d3a3d3cf5e84ca2f28b" title="__printf" alt="" coords="1070,908,1135,935"/>
<area shape="rect" id="node45" href="nilfs2_2inode_8c.html#a3f5a72b1064dea6d7c2737682eada97d" title="nilfs_truncate" alt="" coords="399,1099,499,1126"/>
<area shape="rect" id="node47" href="inode_8c.html#ad2a7d900c04745e54c8d2f3847922a59" title="igrab" alt="" coords="844,772,895,799"/>
<area shape="rect" id="node50" href="buffer_8c.html#a2e34c3c659da4274a05fa553f0a9b9e7" title="__block_commit_write" alt="" coords="793,1482,945,1508"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2recovery_8c_a2ee5a3a12c87c9cd4363d28a2c6edb73_icgraph.png" border="0" usemap="#nilfs2_2recovery_8c_a2ee5a3a12c87c9cd4363d28a2c6edb73_icgraph" alt=""/></div>
<map name="nilfs2_2recovery_8c_a2ee5a3a12c87c9cd4363d28a2c6edb73_icgraph" id="nilfs2_2recovery_8c_a2ee5a3a12c87c9cd4363d28a2c6edb73_icgraph">
<area shape="rect" id="node2" href="nilfs2_2recovery_8c.html#a2a17f874531cf68d55aecb35d5e54fff" title="nilfs_do_roll_forward" alt="" coords="192,351,333,377"/>
<area shape="rect" id="node3" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="381,351,556,377"/>
<area shape="rect" id="node4" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="604,208,681,235"/>
<area shape="rect" id="node5" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1946,241,2051,268"/>
<area shape="rect" id="node7" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="729,208,847,235"/>
<area shape="rect" id="node6" href="nilfs2_2super_8c.html#a6f69bb47bb8193c95863dfa7858e0556" title="nilfs_mount" alt="" coords="2117,279,2206,305"/>
<area shape="rect" id="node8" href="nilfs2_2super_8c.html#aa52d92dd32f84052f43449918f769c15" title="nilfs_sync_fs" alt="" coords="924,183,1023,209"/>
<area shape="rect" id="node9" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="895,233,1052,260"/>
<area shape="rect" id="node10" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1104,183,1252,209"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1109,285,1247,326"/>
<area shape="rect" id="node25" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1100,233,1256,260"/>
<area shape="rect" id="node11" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096" title="nilfs_ioctl_clean_segments" alt="" coords="1304,81,1483,108"/>
<area shape="rect" id="node12" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1569,81,1647,108"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1749,81,1869,108"/>
<area shape="rect" id="node14" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="1941,81,2056,108"/>
<area shape="rect" id="node19" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="1933,31,2064,57"/>
<area shape="rect" id="node15" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="2117,157,2206,184"/>
<area shape="rect" id="node16" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="2115,5,2207,32"/>
<area shape="rect" id="node17" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="2112,56,2211,83"/>
<area shape="rect" id="node18" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="2119,107,2204,133"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a39d3b93661aea1ce6d75d52641a734f7" title="nilfs_segctor_thread" alt="" coords="1324,376,1463,403"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8c.html#accb2af3cf720ef8a382baa244f770a64" title="nilfs_segctor_start\l_thread" alt="" coords="1543,361,1673,402"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8h.html#accc0b22d29c5e0dc0550492c2814845f" title="nilfs_attach_log_writer" alt="" coords="1733,368,1885,395"/>
<area shape="rect" id="node24" href="nilfs2_2super_8c.html#abaf12a9facc571b7e4e46389a440b694" title="nilfs_remount" alt="" coords="1949,317,2049,344"/>
<area shape="rect" id="node26" href="nilfs2_2segment_8c.html#a53eace4b3351e7a47d95a83e02257fda" title="nilfs_segctor_destroy" alt="" coords="1320,237,1467,264"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8h.html#a86ad97768e43fb1c81c962ab7f895fb0" title="nilfs_detach_log_writer" alt="" coords="1531,288,1685,315"/>
<area shape="rect" id="node28" href="nilfs2_2super_8c.html#aa48b8ba2014d88aac606b97a2b09d0ef" title="nilfs_put_super" alt="" coords="1754,267,1865,293"/>
</map>
</div>

</div>
</div>
<a id="a63f9a40be5d6287fa2dc672847712c91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63f9a40be5d6287fa2dc672847712c91">&#9670;&nbsp;</a></span>nilfs_recovery_copy_block()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_recovery_copy_block </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *&#160;</td>
          <td class="paramname"><em>nilfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structnilfs__recovery__block.html">nilfs_recovery_block</a> *&#160;</td>
          <td class="paramname"><em>rb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct page *&#160;</td>
          <td class="paramname"><em>page</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2recovery_8c_a63f9a40be5d6287fa2dc672847712c91_icgraph.png" border="0" usemap="#nilfs2_2recovery_8c_a63f9a40be5d6287fa2dc672847712c91_icgraph" alt=""/></div>
<map name="nilfs2_2recovery_8c_a63f9a40be5d6287fa2dc672847712c91_icgraph" id="nilfs2_2recovery_8c_a63f9a40be5d6287fa2dc672847712c91_icgraph">
<area shape="rect" id="node2" href="nilfs2_2recovery_8c.html#a2ee5a3a12c87c9cd4363d28a2c6edb73" title="nilfs_recover_dsync\l_blocks" alt="" coords="192,343,331,385"/>
<area shape="rect" id="node3" href="nilfs2_2recovery_8c.html#a2a17f874531cf68d55aecb35d5e54fff" title="nilfs_do_roll_forward" alt="" coords="379,351,520,377"/>
<area shape="rect" id="node4" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="568,351,743,377"/>
<area shape="rect" id="node5" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="791,208,868,235"/>
<area shape="rect" id="node6" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="2133,241,2238,268"/>
<area shape="rect" id="node8" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="916,208,1033,235"/>
<area shape="rect" id="node7" href="nilfs2_2super_8c.html#a6f69bb47bb8193c95863dfa7858e0556" title="nilfs_mount" alt="" coords="2303,279,2393,305"/>
<area shape="rect" id="node9" href="nilfs2_2super_8c.html#aa52d92dd32f84052f43449918f769c15" title="nilfs_sync_fs" alt="" coords="1111,183,1209,209"/>
<area shape="rect" id="node10" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1081,233,1239,260"/>
<area shape="rect" id="node11" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1291,183,1439,209"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1295,285,1434,326"/>
<area shape="rect" id="node26" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1287,233,1443,260"/>
<area shape="rect" id="node12" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096" title="nilfs_ioctl_clean_segments" alt="" coords="1491,81,1669,108"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1756,81,1833,108"/>
<area shape="rect" id="node14" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1936,81,2056,108"/>
<area shape="rect" id="node15" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2128,81,2243,108"/>
<area shape="rect" id="node20" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2120,31,2251,57"/>
<area shape="rect" id="node16" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="2303,157,2393,184"/>
<area shape="rect" id="node17" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="2302,5,2394,32"/>
<area shape="rect" id="node18" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="2299,56,2397,83"/>
<area shape="rect" id="node19" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="2305,107,2391,133"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8c.html#a39d3b93661aea1ce6d75d52641a734f7" title="nilfs_segctor_thread" alt="" coords="1511,376,1649,403"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8c.html#accb2af3cf720ef8a382baa244f770a64" title="nilfs_segctor_start\l_thread" alt="" coords="1730,361,1859,402"/>
<area shape="rect" id="node24" href="nilfs2_2segment_8h.html#accc0b22d29c5e0dc0550492c2814845f" title="nilfs_attach_log_writer" alt="" coords="1920,368,2072,395"/>
<area shape="rect" id="node25" href="nilfs2_2super_8c.html#abaf12a9facc571b7e4e46389a440b694" title="nilfs_remount" alt="" coords="2135,317,2235,344"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8c.html#a53eace4b3351e7a47d95a83e02257fda" title="nilfs_segctor_destroy" alt="" coords="1507,237,1653,264"/>
<area shape="rect" id="node28" href="nilfs2_2segment_8h.html#a86ad97768e43fb1c81c962ab7f895fb0" title="nilfs_detach_log_writer" alt="" coords="1717,288,1872,315"/>
<area shape="rect" id="node29" href="nilfs2_2super_8c.html#aa48b8ba2014d88aac606b97a2b09d0ef" title="nilfs_put_super" alt="" coords="1941,267,2051,293"/>
</map>
</div>

</div>
</div>
<a id="a9e61516876368ef4aa3118ef414d37c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e61516876368ef4aa3118ef414d37c3">&#9670;&nbsp;</a></span>nilfs_salvage_orphan_logs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nilfs_salvage_orphan_logs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *&#160;</td>
          <td class="paramname"><em>nilfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structsuper__block.html">super_block</a> *&#160;</td>
          <td class="paramname"><em>sb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structnilfs__recovery__info.html">nilfs_recovery_info</a> *&#160;</td>
          <td class="paramname"><em>ri</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>nilfs_salvage_orphan_logs - salvage logs written after the latest checkpoint : nilfs object : super block instance : pointer to a <a class="el" href="structnilfs__recovery__info.html">nilfs_recovery_info</a> struct to store search results.</p>
<p>Return Value: On success, 0 is returned. On error, one of the following negative error code is returned.</p>
<p>%-EINVAL - Inconsistent filesystem state.</p>
<p>%-EIO - I/O error</p>
<p>%-ENOSPC - No space left on device (only in a panic state).</p>
<p>%-ERESTARTSYS - Interrupted.</p>
<p>%-ENOMEM - Insufficient memory available. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2recovery_8c_a9e61516876368ef4aa3118ef414d37c3_cgraph.png" border="0" usemap="#nilfs2_2recovery_8c_a9e61516876368ef4aa3118ef414d37c3_cgraph" alt=""/></div>
<map name="nilfs2_2recovery_8c_a9e61516876368ef4aa3118ef414d37c3_cgraph" id="nilfs2_2recovery_8c_a9e61516876368ef4aa3118ef414d37c3_cgraph">
<area shape="rect" id="node2" href="nilfs_8h.html#a4d4b07670f241b39a170aea4c12dbd91" title="nilfs_attach_checkpoint" alt="" coords="231,692,389,719"/>
<area shape="rect" id="node24" href="the__nilfs_8c.html#a59cc4f3286a6c2bdf7626a4093351fd9" title="nilfs_put_root" alt="" coords="915,1137,1015,1164"/>
<area shape="rect" id="node27" href="nilfs2_2recovery_8c.html#a2a17f874531cf68d55aecb35d5e54fff" title="nilfs_do_roll_forward" alt="" coords="239,1680,381,1707"/>
<area shape="rect" id="node36" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="233,1185,387,1226"/>
<area shape="rect" id="node41" href="nilfs2_2segment_8c.html#accc0b22d29c5e0dc0550492c2814845f" title="nilfs_attach_log_writer" alt="" coords="234,1344,386,1371"/>
<area shape="rect" id="node42" href="nilfs2_2segment_8c.html#a86ad97768e43fb1c81c962ab7f895fb0" title="nilfs_detach_log_writer" alt="" coords="452,1293,607,1320"/>
<area shape="rect" id="node47" href="nilfs2_2segment_8c.html#ad8bab60b16b37c93e180e1ea3e1580ad" title="nilfs_construct_segment" alt="" coords="228,1832,392,1859"/>
<area shape="rect" id="node49" href="nilfs2_2recovery_8c.html#a45afe93f318383d5ed3381fa68650a8c" title="nilfs_finish_roll_forward" alt="" coords="231,1461,389,1488"/>
<area shape="rect" id="node3" href="the__nilfs_8c.html#a7deeda483b4076a9cdd1b09171f81445" title="nilfs_find_or_create_root" alt="" coords="447,64,611,91"/>
<area shape="rect" id="node6" href="cpfile_8c.html#a40c09da14774428448759c7e4bac12ec" title="nilfs_cpfile_get_checkpoint" alt="" coords="440,667,619,693"/>
<area shape="rect" id="node17" href="ifile_8c.html#a09f1bf8e0e9cb3a39127eba8c0c433a4" title="nilfs_ifile_read" alt="" coords="477,249,582,276"/>
<area shape="rect" id="node23" href="cpfile_8c.html#a72e48092c22cb4deae815d7073201249" title="nilfs_cpfile_put_checkpoint" alt="" coords="440,717,619,744"/>
<area shape="rect" id="node4" href="the__nilfs_8c.html#ab515063d92ea4e8384e70d37bcaa46ff" title="nilfs_lookup_root" alt="" coords="697,5,817,32"/>
<area shape="rect" id="node5" href="nilfs_8h.html#a5b852f45dfb6467814b578dd4c30ac2d" title="nilfs_sysfs_create\l_snapshot_group" alt="" coords="693,57,821,98"/>
<area shape="rect" id="node7" href="mdt_8h.html#a6726d332d6af4468ef3bc1a2ab975b56" title="nilfs_mdt_cno" alt="" coords="706,509,809,536"/>
<area shape="rect" id="node8" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="917,363,1013,389"/>
<area shape="rect" id="node9" href="cpfile_8c.html#a9ff8012cf954ee1e283e981e7c92c4cf" title="nilfs_cpfile_get_header\l_block" alt="" coords="680,561,835,602"/>
<area shape="rect" id="node10" href="cpfile_8c.html#a3aefee4421b37e13cdc047fbd1765eef" title="nilfs_cpfile_get_checkpoint\l_block" alt="" coords="668,626,847,667"/>
<area shape="rect" id="node11" href="cpfile_8c.html#a61f50ee8f6946771fe618e3ac414fae4" title="nilfs_cpfile_block\l_get_checkpoint" alt="" coords="696,443,819,485"/>
<area shape="rect" id="node12" href="cpfile_8c.html#a3426549677cf51101b5df35dc01aa4a7" title="nilfs_cpfile_is_in\l_first" alt="" coords="698,691,817,733"/>
<area shape="rect" id="node13" href="cpfile_8c.html#a447cee523bd7bc37ca3dda45ab0b5fa1" title="nilfs_cpfile_block\l_add_valid_checkpoints" alt="" coords="677,757,838,798"/>
<area shape="rect" id="node14" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="696,888,819,915"/>
<area shape="rect" id="node15" href="cpfile_8c.html#af5bb4325de3f70ecd2e2b03ea43205cb" title="nilfs_cpfile_block\l_get_header" alt="" coords="696,822,819,863"/>
<area shape="rect" id="node16" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="686,939,829,965"/>
<area shape="rect" id="node18" href="nilfs2_2inode_8c.html#ae758d8edf633a8af3535ac0af248f1d1" title="nilfs_iget_locked" alt="" coords="698,275,817,301"/>
<area shape="rect" id="node19" href="mdt_8c.html#a9d24c6e56a98e581fc30fd8a65841e2a" title="nilfs_mdt_init" alt="" coords="708,123,807,149"/>
<area shape="rect" id="node20" href="nilfs2_2alloc_8c.html#a66e987613b3d45c0b59461a111065842" title="nilfs_palloc_init_blockgroup" alt="" coords="667,224,848,251"/>
<area shape="rect" id="node21" href="nilfs2_2alloc_8c.html#a3a6e87dc6acaebeca419a5c1711b2d3b" title="nilfs_palloc_setup\l_cache" alt="" coords="694,326,821,367"/>
<area shape="rect" id="node22" href="ifile_8c.html#a03a081dea13d3bbdbbe6df452fef3a9f" title="NILFS_IFILE_I" alt="" coords="702,173,813,200"/>
<area shape="rect" id="node25" href="nilfs_8h.html#aad2fffdbbe9fb440e3b6a5c3d4b9ba01" title="nilfs_sysfs_delete\l_snapshot_group" alt="" coords="1083,1130,1209,1171"/>
<area shape="rect" id="node26" href="inode_8c.html#a378733dcbf0fb08359b9a02145ac8fc3" title="iput" alt="" coords="1125,1268,1167,1295"/>
<area shape="rect" id="node28" href="v9fs_8c.html#a962ef1b35907bdda12de2cddce8bc638" title="LIST_HEAD" alt="" coords="710,1487,805,1513"/>
<area shape="rect" id="node29" href="the__nilfs_8h.html#acbe15a8b57f8ecf5e4777294c2f7303d" title="nilfs_get_segnum_of\l_block" alt="" coords="458,1513,601,1554"/>
<area shape="rect" id="node30" href="the__nilfs_8h.html#a0dc161eb6c4f6bad9212b67517b46a37" title="nilfs_get_segment_range" alt="" coords="446,1731,613,1757"/>
<area shape="rect" id="node31" href="nilfs2_2recovery_8c.html#a3d8c2c650ddfd797f123c53e2f374587" title="nilfs_read_log_header" alt="" coords="455,1781,603,1808"/>
<area shape="rect" id="node32" href="nilfs2_2recovery_8c.html#a91af8857a8fd8f38883fefccafaff570" title="nilfs_validate_log" alt="" coords="468,1832,591,1859"/>
<area shape="rect" id="node33" href="nilfs2_2recovery_8c.html#abf77ed253bd969bb1d723c7ee3f8d8d8" title="nilfs_scan_dsync_log" alt="" coords="456,1883,603,1909"/>
<area shape="rect" id="node34" href="nilfs2_2recovery_8c.html#a2ee5a3a12c87c9cd4363d28a2c6edb73" title="nilfs_recover_dsync\l_blocks" alt="" coords="896,1483,1035,1525"/>
<area shape="rect" id="node35" href="nilfs2_2recovery_8c.html#a15f5d18b0afaa21aa96bfcb45b98ab66" title="dispose_recovery_list" alt="" coords="455,1579,603,1605"/>
<area shape="rect" id="node37" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="473,1141,586,1168"/>
<area shape="rect" id="node38" href="nilfs2_2recovery_8c.html#a84b5fcfc15ade4d11a4ca915643bcb8a" title="nilfs_segment_list_add" alt="" coords="452,1192,607,1219"/>
<area shape="rect" id="node39" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="468,1243,591,1269"/>
<area shape="rect" id="node40" href="sufile_8c.html#a6af95c8f1e6b7fedd7f95421e2eeafe6" title="nilfs_sufile_alloc" alt="" coords="470,964,589,991"/>
<area shape="rect" id="node45" href="nilfs2_2segment_8c.html#a642f913818c60b9458a79aadb090f3ad" title="nilfs_segctor_new" alt="" coords="466,1344,593,1371"/>
<area shape="rect" id="node46" href="nilfs2_2segment_8c.html#accb2af3cf720ef8a382baa244f770a64" title="nilfs_segctor_start\l_thread" alt="" coords="465,1395,594,1437"/>
<area shape="rect" id="node43" href="nilfs2_2segment_8c.html#a53eace4b3351e7a47d95a83e02257fda" title="nilfs_segctor_destroy" alt="" coords="684,1243,831,1269"/>
<area shape="rect" id="node44" href="nilfs2_2segment_8c.html#a6b6facffe5bf73523d4936fec680fa35" title="nilfs_dispose_list" alt="" coords="904,1268,1027,1295"/>
<area shape="rect" id="node48" href="nilfs2_2segment_8c.html#aece5ba8b7c1a8df29083370bfb0f3aad" title="nilfs_segctor_sync" alt="" coords="464,1933,595,1960"/>
<area shape="rect" id="node50" href="buffer_8c.html#aa6e73e23b9f75a73cf4112fb3d19b668" title="sync_dirty_buffer" alt="" coords="468,1461,591,1488"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2recovery_8c_a9e61516876368ef4aa3118ef414d37c3_icgraph.png" border="0" usemap="#nilfs2_2recovery_8c_a9e61516876368ef4aa3118ef414d37c3_icgraph" alt=""/></div>
<map name="nilfs2_2recovery_8c_a9e61516876368ef4aa3118ef414d37c3_icgraph" id="nilfs2_2recovery_8c_a9e61516876368ef4aa3118ef414d37c3_icgraph">
<area shape="rect" id="node2" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="228,229,305,256"/>
<area shape="rect" id="node3" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1592,196,1697,223"/>
<area shape="rect" id="node5" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="353,229,471,256"/>
<area shape="rect" id="node4" href="nilfs2_2super_8c.html#a6f69bb47bb8193c95863dfa7858e0556" title="nilfs_mount" alt="" coords="1785,233,1874,260"/>
<area shape="rect" id="node6" href="nilfs2_2super_8c.html#aa52d92dd32f84052f43449918f769c15" title="nilfs_sync_fs" alt="" coords="548,204,647,231"/>
<area shape="rect" id="node7" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="519,255,676,281"/>
<area shape="rect" id="node8" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="728,196,876,223"/>
<area shape="rect" id="node18" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="733,247,871,289"/>
<area shape="rect" id="node24" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="724,313,880,340"/>
<area shape="rect" id="node9" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096" title="nilfs_ioctl_clean_segments" alt="" coords="928,196,1107,223"/>
<area shape="rect" id="node10" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1193,95,1271,121"/>
<area shape="rect" id="node11" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1373,95,1493,121"/>
<area shape="rect" id="node12" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="1587,95,1702,121"/>
<area shape="rect" id="node17" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="1579,44,1710,71"/>
<area shape="rect" id="node13" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="1785,107,1874,133"/>
<area shape="rect" id="node14" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="1783,157,1875,184"/>
<area shape="rect" id="node15" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="1780,5,1879,32"/>
<area shape="rect" id="node16" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="1787,56,1872,83"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8c.html#a39d3b93661aea1ce6d75d52641a734f7" title="nilfs_segctor_thread" alt="" coords="948,251,1087,277"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8c.html#accb2af3cf720ef8a382baa244f770a64" title="nilfs_segctor_start\l_thread" alt="" coords="1167,241,1297,282"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8h.html#accc0b22d29c5e0dc0550492c2814845f" title="nilfs_attach_log_writer" alt="" coords="1357,247,1509,273"/>
<area shape="rect" id="node22" href="nilfs2_2super_8c.html#abaf12a9facc571b7e4e46389a440b694" title="nilfs_remount" alt="" coords="1595,247,1695,273"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1557,399,1732,425"/>
<area shape="rect" id="node25" href="nilfs2_2segment_8c.html#a53eace4b3351e7a47d95a83e02257fda" title="nilfs_segctor_destroy" alt="" coords="944,309,1091,336"/>
<area shape="rect" id="node26" href="nilfs2_2segment_8h.html#a86ad97768e43fb1c81c962ab7f895fb0" title="nilfs_detach_log_writer" alt="" coords="1155,308,1309,335"/>
<area shape="rect" id="node27" href="nilfs2_2super_8c.html#aa48b8ba2014d88aac606b97a2b09d0ef" title="nilfs_put_super" alt="" coords="1378,348,1489,375"/>
</map>
</div>

</div>
</div>
<a id="abf77ed253bd969bb1d723c7ee3f8d8d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf77ed253bd969bb1d723c7ee3f8d8d8">&#9670;&nbsp;</a></span>nilfs_scan_dsync_log()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_scan_dsync_log </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *&#160;</td>
          <td class="paramname"><em>nilfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sector_t&#160;</td>
          <td class="paramname"><em>start_blocknr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct nilfs_segment_summary *&#160;</td>
          <td class="paramname"><em>sum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct list_head *&#160;</td>
          <td class="paramname"><em>head</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_scan_dsync_log - get block information of a log written for data sync : nilfs object : start block number of the log : log summary information : list head to add <a class="el" href="structnilfs__recovery__block.html">nilfs_recovery_block</a> struct </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2recovery_8c_abf77ed253bd969bb1d723c7ee3f8d8d8_cgraph.png" border="0" usemap="#nilfs2_2recovery_8c_abf77ed253bd969bb1d723c7ee3f8d8d8_cgraph" alt=""/></div>
<map name="nilfs2_2recovery_8c_abf77ed253bd969bb1d723c7ee3f8d8d8_cgraph" id="nilfs2_2recovery_8c_abf77ed253bd969bb1d723c7ee3f8d8d8_cgraph">
<area shape="rect" id="node2" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033" title="nblocks" alt="" coords="250,5,317,32"/>
<area shape="rect" id="node3" href="nilfs2_2recovery_8c.html#ab8122880fae04138dd1a06012d627a50" title="nilfs_read_summary_info" alt="" coords="200,56,367,83"/>
<area shape="rect" id="node4" href="nilfs2_2recovery_8c.html#a768e6438029e14ce1987a20a235da2a0" title="nilfs_skip_summary_info" alt="" coords="200,107,367,133"/>
<area shape="rect" id="node5" href="exec_8c.html#a36dcaf63ad8fe9783c81b418943e2346" title="count" alt="" coords="415,107,469,133"/>
<area shape="rect" id="node6" href="exec_8c.html#a9ea507497a5718b67a987a1c91a5becb" title="get_user_arg_ptr" alt="" coords="517,107,636,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2recovery_8c_abf77ed253bd969bb1d723c7ee3f8d8d8_icgraph.png" border="0" usemap="#nilfs2_2recovery_8c_abf77ed253bd969bb1d723c7ee3f8d8d8_icgraph" alt=""/></div>
<map name="nilfs2_2recovery_8c_abf77ed253bd969bb1d723c7ee3f8d8d8_icgraph" id="nilfs2_2recovery_8c_abf77ed253bd969bb1d723c7ee3f8d8d8_icgraph">
<area shape="rect" id="node2" href="nilfs2_2recovery_8c.html#a2a17f874531cf68d55aecb35d5e54fff" title="nilfs_do_roll_forward" alt="" coords="200,351,341,377"/>
<area shape="rect" id="node3" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="389,351,564,377"/>
<area shape="rect" id="node4" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="612,208,689,235"/>
<area shape="rect" id="node5" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1954,241,2059,268"/>
<area shape="rect" id="node7" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="737,208,855,235"/>
<area shape="rect" id="node6" href="nilfs2_2super_8c.html#a6f69bb47bb8193c95863dfa7858e0556" title="nilfs_mount" alt="" coords="2125,279,2214,305"/>
<area shape="rect" id="node8" href="nilfs2_2super_8c.html#aa52d92dd32f84052f43449918f769c15" title="nilfs_sync_fs" alt="" coords="932,183,1031,209"/>
<area shape="rect" id="node9" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="903,233,1060,260"/>
<area shape="rect" id="node10" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1112,183,1260,209"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1117,285,1255,326"/>
<area shape="rect" id="node25" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1108,233,1264,260"/>
<area shape="rect" id="node11" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096" title="nilfs_ioctl_clean_segments" alt="" coords="1312,81,1491,108"/>
<area shape="rect" id="node12" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1577,81,1655,108"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1757,81,1877,108"/>
<area shape="rect" id="node14" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="1949,81,2064,108"/>
<area shape="rect" id="node19" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="1941,31,2072,57"/>
<area shape="rect" id="node15" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="2125,157,2214,184"/>
<area shape="rect" id="node16" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="2123,5,2215,32"/>
<area shape="rect" id="node17" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="2120,56,2219,83"/>
<area shape="rect" id="node18" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="2127,107,2212,133"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a39d3b93661aea1ce6d75d52641a734f7" title="nilfs_segctor_thread" alt="" coords="1332,376,1471,403"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8c.html#accb2af3cf720ef8a382baa244f770a64" title="nilfs_segctor_start\l_thread" alt="" coords="1551,361,1681,402"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8h.html#accc0b22d29c5e0dc0550492c2814845f" title="nilfs_attach_log_writer" alt="" coords="1741,368,1893,395"/>
<area shape="rect" id="node24" href="nilfs2_2super_8c.html#abaf12a9facc571b7e4e46389a440b694" title="nilfs_remount" alt="" coords="1957,317,2057,344"/>
<area shape="rect" id="node26" href="nilfs2_2segment_8c.html#a53eace4b3351e7a47d95a83e02257fda" title="nilfs_segctor_destroy" alt="" coords="1328,237,1475,264"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8h.html#a86ad97768e43fb1c81c962ab7f895fb0" title="nilfs_detach_log_writer" alt="" coords="1539,288,1693,315"/>
<area shape="rect" id="node28" href="nilfs2_2super_8c.html#aa48b8ba2014d88aac606b97a2b09d0ef" title="nilfs_put_super" alt="" coords="1762,267,1873,293"/>
</map>
</div>

</div>
</div>
<a id="a0277d890503e30014aee9b37557917f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0277d890503e30014aee9b37557917f9">&#9670;&nbsp;</a></span>nilfs_search_super_root()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nilfs_search_super_root </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *&#160;</td>
          <td class="paramname"><em>nilfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structnilfs__recovery__info.html">nilfs_recovery_info</a> *&#160;</td>
          <td class="paramname"><em>ri</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>nilfs_search_super_root - search the latest valid super root : <a class="el" href="structthe__nilfs.html">the_nilfs</a> : pointer to a <a class="el" href="structnilfs__recovery__info.html">nilfs_recovery_info</a> struct to store search results.</p>
<p><a class="el" href="nilfs2_2recovery_8c.html#a0277d890503e30014aee9b37557917f9">nilfs_search_super_root()</a> looks for the latest super-root from a partial segment pointed by the superblock. It sets up struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> through this search. It fills <a class="el" href="structnilfs__recovery__info.html">nilfs_recovery_info</a> (ri) required for recovery.</p>
<p>Return Value: On success, 0 is returned. On error, one of the following negative error code is returned.</p>
<p>%-EINVAL - No valid segment found</p>
<p>%-EIO - I/O error</p>
<p>%-ENOMEM - Insufficient memory available. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2recovery_8c_a0277d890503e30014aee9b37557917f9_cgraph.png" border="0" usemap="#nilfs2_2recovery_8c_a0277d890503e30014aee9b37557917f9_cgraph" alt=""/></div>
<map name="nilfs2_2recovery_8c_a0277d890503e30014aee9b37557917f9_cgraph" id="nilfs2_2recovery_8c_a0277d890503e30014aee9b37557917f9_cgraph">
<area shape="rect" id="node2" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033" title="nblocks" alt="" coords="269,5,336,32"/>
<area shape="rect" id="node3" href="v9fs_8c.html#a962ef1b35907bdda12de2cddce8bc638" title="LIST_HEAD" alt="" coords="255,56,350,83"/>
<area shape="rect" id="node4" href="the__nilfs_8h.html#acbe15a8b57f8ecf5e4777294c2f7303d" title="nilfs_get_segnum_of\l_block" alt="" coords="231,107,374,149"/>
<area shape="rect" id="node5" href="the__nilfs_8h.html#a0dc161eb6c4f6bad9212b67517b46a37" title="nilfs_get_segment_range" alt="" coords="219,173,386,200"/>
<area shape="rect" id="node6" href="buffer_8c.html#ab4482139a712709454d9a9605818a27c" title="__breadahead" alt="" coords="251,224,354,251"/>
<area shape="rect" id="node19" href="nilfs2_2recovery_8c.html#a3d8c2c650ddfd797f123c53e2f374587" title="nilfs_read_log_header" alt="" coords="229,275,377,301"/>
<area shape="rect" id="node20" href="nilfs2_2recovery_8c.html#a91af8857a8fd8f38883fefccafaff570" title="nilfs_validate_log" alt="" coords="241,325,364,352"/>
<area shape="rect" id="node22" href="nilfs2_2recovery_8c.html#a5a719edb6aac97b7519bc1a0190548ec" title="nilfs_dispose_segment_list" alt="" coords="213,376,392,403"/>
<area shape="rect" id="node23" href="nilfs2_2recovery_8c.html#a84b5fcfc15ade4d11a4ca915643bcb8a" title="nilfs_segment_list_add" alt="" coords="225,427,380,453"/>
<area shape="rect" id="node24" href="nilfs2_2recovery_8c.html#a109c59b06bae1b29692af69694c5ab03" title="nilfs_warn_segment\l_error" alt="" coords="233,478,372,519"/>
<area shape="rect" id="node7" href="buffer_8c.html#ad9372db3e0c2dcbecdd95bd73d1e7143" title="ll_rw_block" alt="" coords="482,249,569,276"/>
<area shape="rect" id="node11" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1279,225,1417,252"/>
<area shape="rect" id="node8" href="buffer_8c.html#aac5852df82371e20e891b02a37461248" title="end_buffer_write_sync" alt="" coords="872,224,1025,251"/>
<area shape="rect" id="node12" href="buffer_8c.html#a5fc92b2c44523c64e98193eaa4f46541" title="unlock_buffer" alt="" coords="1109,108,1209,135"/>
<area shape="rect" id="node13" href="buffer_8c.html#ab65df498c54845f497bae7afe9222c91" title="submit_bh" alt="" coords="693,403,775,429"/>
<area shape="rect" id="node17" href="buffer_8c.html#ade60786fa99b4fbb4cf607434af395db" title="end_buffer_read_sync" alt="" coords="659,275,809,301"/>
<area shape="rect" id="node9" href="buffer_8c.html#a15c60a53f942f27f505098848dda3f3e" title="buffer_io_error" alt="" coords="1107,276,1212,303"/>
<area shape="rect" id="node10" href="buffer_8c.html#a0c5a9b93af2e1cc8bdeb45d23f5fd4fd" title="mark_buffer_write_io\l_error" alt="" coords="1088,159,1231,201"/>
<area shape="rect" id="node14" href="buffer_8c.html#a5fd6f01c5f9cff0945cb999cbefa412d" title="submit_bh_wbc" alt="" coords="892,403,1005,429"/>
<area shape="rect" id="node15" href="buffer_8c.html#a2463267e7636f2be0fc2b44fb65cb5ba" title="end_bio_bh_io_sync" alt="" coords="1089,428,1229,455"/>
<area shape="rect" id="node16" href="buffer_8c.html#aa35a4aa9ac3d40858082aabb83e2a44c" title="guard_bio_eod" alt="" coords="1106,377,1213,404"/>
<area shape="rect" id="node18" href="buffer_8c.html#a85e290b32d9599acd25df3b159392ab7" title="__end_buffer_read_notouch" alt="" coords="857,165,1040,192"/>
<area shape="rect" id="node21" href="nilfs2_2recovery_8c.html#a259060e9360fc15d85d67af63a41b28b" title="nilfs_compute_checksum" alt="" coords="440,325,611,352"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2recovery_8c_a0277d890503e30014aee9b37557917f9_icgraph.png" border="0" usemap="#nilfs2_2recovery_8c_a0277d890503e30014aee9b37557917f9_icgraph" alt=""/></div>
<map name="nilfs2_2recovery_8c_a0277d890503e30014aee9b37557917f9_icgraph" id="nilfs2_2recovery_8c_a0277d890503e30014aee9b37557917f9_icgraph">
<area shape="rect" id="node2" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="213,229,291,256"/>
<area shape="rect" id="node3" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1577,196,1683,223"/>
<area shape="rect" id="node5" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="339,229,456,256"/>
<area shape="rect" id="node4" href="nilfs2_2super_8c.html#a6f69bb47bb8193c95863dfa7858e0556" title="nilfs_mount" alt="" coords="1770,233,1859,260"/>
<area shape="rect" id="node6" href="nilfs2_2super_8c.html#aa52d92dd32f84052f43449918f769c15" title="nilfs_sync_fs" alt="" coords="533,204,632,231"/>
<area shape="rect" id="node7" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="504,255,661,281"/>
<area shape="rect" id="node8" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="713,196,861,223"/>
<area shape="rect" id="node18" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="718,247,857,289"/>
<area shape="rect" id="node24" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="709,313,865,340"/>
<area shape="rect" id="node9" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096" title="nilfs_ioctl_clean_segments" alt="" coords="913,196,1092,223"/>
<area shape="rect" id="node10" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1179,95,1256,121"/>
<area shape="rect" id="node11" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1359,95,1479,121"/>
<area shape="rect" id="node12" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="1573,95,1687,121"/>
<area shape="rect" id="node17" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="1565,44,1695,71"/>
<area shape="rect" id="node13" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="1770,107,1859,133"/>
<area shape="rect" id="node14" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="1769,157,1861,184"/>
<area shape="rect" id="node15" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="1765,5,1864,32"/>
<area shape="rect" id="node16" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="1772,56,1857,83"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8c.html#a39d3b93661aea1ce6d75d52641a734f7" title="nilfs_segctor_thread" alt="" coords="933,251,1072,277"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8c.html#accb2af3cf720ef8a382baa244f770a64" title="nilfs_segctor_start\l_thread" alt="" coords="1153,241,1282,282"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8h.html#accc0b22d29c5e0dc0550492c2814845f" title="nilfs_attach_log_writer" alt="" coords="1343,247,1495,273"/>
<area shape="rect" id="node22" href="nilfs2_2super_8c.html#abaf12a9facc571b7e4e46389a440b694" title="nilfs_remount" alt="" coords="1580,247,1680,273"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1543,399,1717,425"/>
<area shape="rect" id="node25" href="nilfs2_2segment_8c.html#a53eace4b3351e7a47d95a83e02257fda" title="nilfs_segctor_destroy" alt="" coords="929,309,1076,336"/>
<area shape="rect" id="node26" href="nilfs2_2segment_8h.html#a86ad97768e43fb1c81c962ab7f895fb0" title="nilfs_detach_log_writer" alt="" coords="1140,308,1295,335"/>
<area shape="rect" id="node27" href="nilfs2_2super_8c.html#aa48b8ba2014d88aac606b97a2b09d0ef" title="nilfs_put_super" alt="" coords="1363,348,1474,375"/>
</map>
</div>

</div>
</div>
<a id="a84b5fcfc15ade4d11a4ca915643bcb8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84b5fcfc15ade4d11a4ca915643bcb8a">&#9670;&nbsp;</a></span>nilfs_segment_list_add()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_segment_list_add </td>
          <td>(</td>
          <td class="paramtype">struct list_head *&#160;</td>
          <td class="paramname"><em>head</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64&#160;</td>
          <td class="paramname"><em>segnum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2recovery_8c_a84b5fcfc15ade4d11a4ca915643bcb8a_icgraph.png" border="0" usemap="#nilfs2_2recovery_8c_a84b5fcfc15ade4d11a4ca915643bcb8a_icgraph" alt=""/></div>
<map name="nilfs2_2recovery_8c_a84b5fcfc15ade4d11a4ca915643bcb8a_icgraph" id="nilfs2_2recovery_8c_a84b5fcfc15ade4d11a4ca915643bcb8a_icgraph">
<area shape="rect" id="node2" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="208,343,361,385"/>
<area shape="rect" id="node29" href="nilfs2_2segment_8h.html#ac35601ebb220d6cce77c5513d0c5ff9a" title="nilfs_search_super_root" alt="" coords="417,292,577,319"/>
<area shape="rect" id="node3" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="409,351,584,377"/>
<area shape="rect" id="node4" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="632,292,709,319"/>
<area shape="rect" id="node5" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1974,241,2079,268"/>
<area shape="rect" id="node7" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="757,263,875,289"/>
<area shape="rect" id="node6" href="nilfs2_2super_8c.html#a6f69bb47bb8193c95863dfa7858e0556" title="nilfs_mount" alt="" coords="2145,279,2234,305"/>
<area shape="rect" id="node8" href="nilfs2_2super_8c.html#aa52d92dd32f84052f43449918f769c15" title="nilfs_sync_fs" alt="" coords="952,212,1051,239"/>
<area shape="rect" id="node9" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="923,263,1080,289"/>
<area shape="rect" id="node10" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1132,183,1280,209"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1137,285,1275,326"/>
<area shape="rect" id="node25" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1128,233,1284,260"/>
<area shape="rect" id="node11" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096" title="nilfs_ioctl_clean_segments" alt="" coords="1332,81,1511,108"/>
<area shape="rect" id="node12" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1597,81,1675,108"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1777,81,1897,108"/>
<area shape="rect" id="node14" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="1969,81,2084,108"/>
<area shape="rect" id="node19" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="1961,31,2092,57"/>
<area shape="rect" id="node15" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="2145,157,2234,184"/>
<area shape="rect" id="node16" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="2143,5,2235,32"/>
<area shape="rect" id="node17" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="2140,56,2239,83"/>
<area shape="rect" id="node18" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="2147,107,2232,133"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a39d3b93661aea1ce6d75d52641a734f7" title="nilfs_segctor_thread" alt="" coords="1352,376,1491,403"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8c.html#accb2af3cf720ef8a382baa244f770a64" title="nilfs_segctor_start\l_thread" alt="" coords="1571,361,1701,402"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8h.html#accc0b22d29c5e0dc0550492c2814845f" title="nilfs_attach_log_writer" alt="" coords="1761,368,1913,395"/>
<area shape="rect" id="node24" href="nilfs2_2super_8c.html#abaf12a9facc571b7e4e46389a440b694" title="nilfs_remount" alt="" coords="1977,317,2077,344"/>
<area shape="rect" id="node26" href="nilfs2_2segment_8c.html#a53eace4b3351e7a47d95a83e02257fda" title="nilfs_segctor_destroy" alt="" coords="1348,237,1495,264"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8h.html#a86ad97768e43fb1c81c962ab7f895fb0" title="nilfs_detach_log_writer" alt="" coords="1559,288,1713,315"/>
<area shape="rect" id="node28" href="nilfs2_2super_8c.html#aa48b8ba2014d88aac606b97a2b09d0ef" title="nilfs_put_super" alt="" coords="1782,267,1893,293"/>
</map>
</div>

</div>
</div>
<a id="a768e6438029e14ce1987a20a235da2a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a768e6438029e14ce1987a20a235da2a0">&#9670;&nbsp;</a></span>nilfs_skip_summary_info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void nilfs_skip_summary_info </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *&#160;</td>
          <td class="paramname"><em>nilfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct buffer_head **&#160;</td>
          <td class="paramname"><em>pbh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_skip_summary_info - skip items on summary blocks of a log : nilfs object : the current buffer head on summary blocks [in, out] : the current byte offset on summary blocks [in, out] : byte size of the item to be skipped : number of items to be skipped </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2recovery_8c_a768e6438029e14ce1987a20a235da2a0_cgraph.png" border="0" usemap="#nilfs2_2recovery_8c_a768e6438029e14ce1987a20a235da2a0_cgraph" alt=""/></div>
<map name="nilfs2_2recovery_8c_a768e6438029e14ce1987a20a235da2a0_cgraph" id="nilfs2_2recovery_8c_a768e6438029e14ce1987a20a235da2a0_cgraph">
<area shape="rect" id="node2" href="exec_8c.html#a36dcaf63ad8fe9783c81b418943e2346" title="count" alt="" coords="220,5,275,32"/>
<area shape="rect" id="node3" href="exec_8c.html#a9ea507497a5718b67a987a1c91a5becb" title="get_user_arg_ptr" alt="" coords="323,5,441,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2recovery_8c_a768e6438029e14ce1987a20a235da2a0_icgraph.png" border="0" usemap="#nilfs2_2recovery_8c_a768e6438029e14ce1987a20a235da2a0_icgraph" alt=""/></div>
<map name="nilfs2_2recovery_8c_a768e6438029e14ce1987a20a235da2a0_icgraph" id="nilfs2_2recovery_8c_a768e6438029e14ce1987a20a235da2a0_icgraph">
<area shape="rect" id="node2" href="nilfs2_2recovery_8c.html#abf77ed253bd969bb1d723c7ee3f8d8d8" title="nilfs_scan_dsync_log" alt="" coords="220,351,367,377"/>
<area shape="rect" id="node3" href="nilfs2_2recovery_8c.html#a2a17f874531cf68d55aecb35d5e54fff" title="nilfs_do_roll_forward" alt="" coords="415,351,556,377"/>
<area shape="rect" id="node4" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="604,351,779,377"/>
<area shape="rect" id="node5" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="827,208,904,235"/>
<area shape="rect" id="node6" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="2169,241,2274,268"/>
<area shape="rect" id="node8" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="952,208,1069,235"/>
<area shape="rect" id="node7" href="nilfs2_2super_8c.html#a6f69bb47bb8193c95863dfa7858e0556" title="nilfs_mount" alt="" coords="2339,279,2429,305"/>
<area shape="rect" id="node9" href="nilfs2_2super_8c.html#aa52d92dd32f84052f43449918f769c15" title="nilfs_sync_fs" alt="" coords="1147,183,1245,209"/>
<area shape="rect" id="node10" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1117,233,1275,260"/>
<area shape="rect" id="node11" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1327,183,1475,209"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1331,285,1470,326"/>
<area shape="rect" id="node26" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1323,233,1479,260"/>
<area shape="rect" id="node12" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096" title="nilfs_ioctl_clean_segments" alt="" coords="1527,81,1705,108"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1792,81,1869,108"/>
<area shape="rect" id="node14" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1972,81,2092,108"/>
<area shape="rect" id="node15" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2164,81,2279,108"/>
<area shape="rect" id="node20" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2156,31,2287,57"/>
<area shape="rect" id="node16" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="2339,157,2429,184"/>
<area shape="rect" id="node17" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="2338,5,2430,32"/>
<area shape="rect" id="node18" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="2335,56,2433,83"/>
<area shape="rect" id="node19" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="2341,107,2427,133"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8c.html#a39d3b93661aea1ce6d75d52641a734f7" title="nilfs_segctor_thread" alt="" coords="1547,376,1685,403"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8c.html#accb2af3cf720ef8a382baa244f770a64" title="nilfs_segctor_start\l_thread" alt="" coords="1766,361,1895,402"/>
<area shape="rect" id="node24" href="nilfs2_2segment_8h.html#accc0b22d29c5e0dc0550492c2814845f" title="nilfs_attach_log_writer" alt="" coords="1956,368,2108,395"/>
<area shape="rect" id="node25" href="nilfs2_2super_8c.html#abaf12a9facc571b7e4e46389a440b694" title="nilfs_remount" alt="" coords="2171,317,2271,344"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8c.html#a53eace4b3351e7a47d95a83e02257fda" title="nilfs_segctor_destroy" alt="" coords="1543,237,1689,264"/>
<area shape="rect" id="node28" href="nilfs2_2segment_8h.html#a86ad97768e43fb1c81c962ab7f895fb0" title="nilfs_detach_log_writer" alt="" coords="1753,288,1908,315"/>
<area shape="rect" id="node29" href="nilfs2_2super_8c.html#aa48b8ba2014d88aac606b97a2b09d0ef" title="nilfs_put_super" alt="" coords="1977,267,2087,293"/>
</map>
</div>

</div>
</div>
<a id="a91af8857a8fd8f38883fefccafaff570"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91af8857a8fd8f38883fefccafaff570">&#9670;&nbsp;</a></span>nilfs_validate_log()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_validate_log </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *&#160;</td>
          <td class="paramname"><em>nilfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>seg_seq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct buffer_head *&#160;</td>
          <td class="paramname"><em>bh_sum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct nilfs_segment_summary *&#160;</td>
          <td class="paramname"><em>sum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_validate_log - verify consistency of log : nilfs object : sequence number of segment : buffer head of summary block : segment summary struct </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2recovery_8c_a91af8857a8fd8f38883fefccafaff570_cgraph.png" border="0" usemap="#nilfs2_2recovery_8c_a91af8857a8fd8f38883fefccafaff570_cgraph" alt=""/></div>
<map name="nilfs2_2recovery_8c_a91af8857a8fd8f38883fefccafaff570_cgraph" id="nilfs2_2recovery_8c_a91af8857a8fd8f38883fefccafaff570_cgraph">
<area shape="rect" id="node2" href="nilfs2_2recovery_8c.html#a259060e9360fc15d85d67af63a41b28b" title="nilfs_compute_checksum" alt="" coords="176,5,347,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2recovery_8c_a91af8857a8fd8f38883fefccafaff570_icgraph.png" border="0" usemap="#nilfs2_2recovery_8c_a91af8857a8fd8f38883fefccafaff570_icgraph" alt=""/></div>
<map name="nilfs2_2recovery_8c_a91af8857a8fd8f38883fefccafaff570_icgraph" id="nilfs2_2recovery_8c_a91af8857a8fd8f38883fefccafaff570_icgraph">
<area shape="rect" id="node2" href="nilfs2_2recovery_8c.html#a2a17f874531cf68d55aecb35d5e54fff" title="nilfs_do_roll_forward" alt="" coords="176,351,317,377"/>
<area shape="rect" id="node29" href="nilfs2_2segment_8h.html#ac35601ebb220d6cce77c5513d0c5ff9a" title="nilfs_search_super_root" alt="" coords="373,300,533,327"/>
<area shape="rect" id="node3" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="365,351,540,377"/>
<area shape="rect" id="node4" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="588,296,665,323"/>
<area shape="rect" id="node5" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1930,241,2035,268"/>
<area shape="rect" id="node7" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="713,263,831,289"/>
<area shape="rect" id="node6" href="nilfs2_2super_8c.html#a6f69bb47bb8193c95863dfa7858e0556" title="nilfs_mount" alt="" coords="2101,279,2190,305"/>
<area shape="rect" id="node8" href="nilfs2_2super_8c.html#aa52d92dd32f84052f43449918f769c15" title="nilfs_sync_fs" alt="" coords="908,212,1007,239"/>
<area shape="rect" id="node9" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="879,263,1036,289"/>
<area shape="rect" id="node10" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1088,183,1236,209"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1093,285,1231,326"/>
<area shape="rect" id="node25" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1084,233,1240,260"/>
<area shape="rect" id="node11" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096" title="nilfs_ioctl_clean_segments" alt="" coords="1288,81,1467,108"/>
<area shape="rect" id="node12" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1553,81,1631,108"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1733,81,1853,108"/>
<area shape="rect" id="node14" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="1925,81,2040,108"/>
<area shape="rect" id="node19" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="1917,31,2048,57"/>
<area shape="rect" id="node15" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="2101,157,2190,184"/>
<area shape="rect" id="node16" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="2099,5,2191,32"/>
<area shape="rect" id="node17" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="2096,56,2195,83"/>
<area shape="rect" id="node18" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="2103,107,2188,133"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a39d3b93661aea1ce6d75d52641a734f7" title="nilfs_segctor_thread" alt="" coords="1308,376,1447,403"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8c.html#accb2af3cf720ef8a382baa244f770a64" title="nilfs_segctor_start\l_thread" alt="" coords="1527,361,1657,402"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8h.html#accc0b22d29c5e0dc0550492c2814845f" title="nilfs_attach_log_writer" alt="" coords="1717,368,1869,395"/>
<area shape="rect" id="node24" href="nilfs2_2super_8c.html#abaf12a9facc571b7e4e46389a440b694" title="nilfs_remount" alt="" coords="1933,317,2033,344"/>
<area shape="rect" id="node26" href="nilfs2_2segment_8c.html#a53eace4b3351e7a47d95a83e02257fda" title="nilfs_segctor_destroy" alt="" coords="1304,237,1451,264"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8h.html#a86ad97768e43fb1c81c962ab7f895fb0" title="nilfs_detach_log_writer" alt="" coords="1515,288,1669,315"/>
<area shape="rect" id="node28" href="nilfs2_2super_8c.html#aa48b8ba2014d88aac606b97a2b09d0ef" title="nilfs_put_super" alt="" coords="1738,267,1849,293"/>
</map>
</div>

</div>
</div>
<a id="a109c59b06bae1b29692af69694c5ab03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a109c59b06bae1b29692af69694c5ab03">&#9670;&nbsp;</a></span>nilfs_warn_segment_error()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_warn_segment_error </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structsuper__block.html">super_block</a> *&#160;</td>
          <td class="paramname"><em>sb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>err</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2recovery_8c_a109c59b06bae1b29692af69694c5ab03_icgraph.png" border="0" usemap="#nilfs2_2recovery_8c_a109c59b06bae1b29692af69694c5ab03_icgraph" alt=""/></div>
<map name="nilfs2_2recovery_8c_a109c59b06bae1b29692af69694c5ab03_icgraph" id="nilfs2_2recovery_8c_a109c59b06bae1b29692af69694c5ab03_icgraph">
<area shape="rect" id="node2" href="nilfs2_2segment_8h.html#a05c84597e935fa4c02cd556b371e3ed5" title="nilfs_read_super_root\l_block" alt="" coords="192,193,339,234"/>
<area shape="rect" id="node30" href="nilfs2_2segment_8h.html#ac35601ebb220d6cce77c5513d0c5ff9a" title="nilfs_search_super_root" alt="" coords="387,255,547,281"/>
<area shape="rect" id="node3" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="394,203,539,229"/>
<area shape="rect" id="node4" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="595,229,672,256"/>
<area shape="rect" id="node5" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1959,196,2064,223"/>
<area shape="rect" id="node7" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="720,229,837,256"/>
<area shape="rect" id="node6" href="nilfs2_2super_8c.html#a6f69bb47bb8193c95863dfa7858e0556" title="nilfs_mount" alt="" coords="2151,233,2241,260"/>
<area shape="rect" id="node8" href="nilfs2_2super_8c.html#aa52d92dd32f84052f43449918f769c15" title="nilfs_sync_fs" alt="" coords="915,204,1013,231"/>
<area shape="rect" id="node9" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="885,255,1043,281"/>
<area shape="rect" id="node10" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1095,196,1243,223"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1099,247,1238,289"/>
<area shape="rect" id="node26" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1091,313,1247,340"/>
<area shape="rect" id="node11" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096" title="nilfs_ioctl_clean_segments" alt="" coords="1295,196,1473,223"/>
<area shape="rect" id="node12" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1560,95,1637,121"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1740,95,1860,121"/>
<area shape="rect" id="node14" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="1954,95,2069,121"/>
<area shape="rect" id="node19" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="1946,44,2077,71"/>
<area shape="rect" id="node15" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="2151,107,2241,133"/>
<area shape="rect" id="node16" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="2150,157,2242,184"/>
<area shape="rect" id="node17" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="2147,5,2245,32"/>
<area shape="rect" id="node18" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="2153,56,2239,83"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a39d3b93661aea1ce6d75d52641a734f7" title="nilfs_segctor_thread" alt="" coords="1315,253,1453,280"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8c.html#accb2af3cf720ef8a382baa244f770a64" title="nilfs_segctor_start\l_thread" alt="" coords="1534,243,1663,285"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8h.html#accc0b22d29c5e0dc0550492c2814845f" title="nilfs_attach_log_writer" alt="" coords="1724,247,1876,273"/>
<area shape="rect" id="node24" href="nilfs2_2super_8c.html#abaf12a9facc571b7e4e46389a440b694" title="nilfs_remount" alt="" coords="1961,247,2061,273"/>
<area shape="rect" id="node25" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1924,399,2099,425"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8c.html#a53eace4b3351e7a47d95a83e02257fda" title="nilfs_segctor_destroy" alt="" coords="1311,312,1457,339"/>
<area shape="rect" id="node28" href="nilfs2_2segment_8h.html#a86ad97768e43fb1c81c962ab7f895fb0" title="nilfs_detach_log_writer" alt="" coords="1521,311,1676,337"/>
<area shape="rect" id="node29" href="nilfs2_2super_8c.html#aa48b8ba2014d88aac606b97a2b09d0ef" title="nilfs_put_super" alt="" coords="1745,348,1855,375"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_8fac9e178a1e3eec5aa774d52dddfbee.html">nilfs2</a></li><li class="navelem"><a class="el" href="nilfs2_2recovery_8c.html">recovery.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>

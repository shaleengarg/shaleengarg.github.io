<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>linux/fs: ufs/util.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">linux/fs
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('ufs_2util_8h_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">util.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="ufs_2util_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/* SPDX-License-Identifier: GPL-2.0 */</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *  linux/fs/ufs/util.h</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * Copyright (C) 1998 </span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * Daniel Pirkl &lt;daniel.pirkl@email.cz&gt;</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * Charles University, Faculty of Mathematics and Physics</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;linux/buffer_head.h&gt;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;linux/fs.h&gt;</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="swab_8h.html">swab.h</a>&quot;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * some useful macros</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00018"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a1977fdcd00b52c8c3819bf8e8ecac09d">   18</a></span>&#160;<span class="preprocessor">#define in_range(b,first,len)   ((b)&gt;=(first)&amp;&amp;(b)&lt;(first)+(len))</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * functions used for retyping</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00023"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#ae903f016308b1d7aee5e9481f34043fb">   23</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">struct </span><a class="code" href="structufs__buffer__head.html">ufs_buffer_head</a> *<a class="code" href="ufs_2util_8h.html#ae903f016308b1d7aee5e9481f34043fb">UCPI_UBH</a>(<span class="keyword">struct</span> <a class="code" href="structufs__cg__private__info.html">ufs_cg_private_info</a> *cpi)</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;{</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    <span class="keywordflow">return</span> &amp;cpi-&gt;<a class="code" href="structufs__cg__private__info.html#ae0ed4eccb496c948e329a38eed8b12fd">c_ubh</a>;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;}</div><div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a73e5f57b60b896639b277abe53c7fd9e">   27</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">struct </span><a class="code" href="structufs__buffer__head.html">ufs_buffer_head</a> *<a class="code" href="ufs_2util_8h.html#a73e5f57b60b896639b277abe53c7fd9e">USPI_UBH</a>(<span class="keyword">struct</span> <a class="code" href="structufs__sb__private__info.html">ufs_sb_private_info</a> *spi)</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;{</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <span class="keywordflow">return</span> &amp;spi-&gt;<a class="code" href="structufs__sb__private__info.html#a66da309a27cf894564dd735bb6c40417">s_ubh</a>;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;}</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment"> * macros used for accessing structures</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> s32</div><div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#adb38a7be9956e3bc0d81590633963d6e">   38</a></span>&#160;<a class="code" href="ufs_2util_8h.html#adb38a7be9956e3bc0d81590633963d6e">ufs_get_fs_state</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *<a class="code" href="ntfs_2debug_8h.html#a65b1b0602e37268ec9bc2c240a676c39">sb</a>, <span class="keyword">struct</span> <a class="code" href="structufs__super__block__first.html">ufs_super_block_first</a> *usb1,</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;         <span class="keyword">struct</span> <a class="code" href="structufs__super__block__third.html">ufs_super_block_third</a> *usb3)</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;{</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="ufs_8h.html#abeb63dc517629bd2f7833215c463946e">UFS_SB</a>(sb)-&gt;<a class="code" href="reiserfs_8h.html#a50db69d969858eaf7616d95432491eb1">s_flags</a> &amp; <a class="code" href="ufs__fs_8h.html#a410e53db958cb0018ac32364041afd93">UFS_ST_MASK</a>) {</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="ufs__fs_8h.html#a13c230fc890cc6d0a856b3265d3dfc30">UFS_ST_SUNOS</a>:</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="befs_2endian_8h.html#ae07ba9050b95e781e7d8925d1cab379a">fs32_to_cpu</a>(sb, usb3-&gt;<a class="code" href="structufs__super__block__third.html#a5cbbed34ad3d54b732bd95bf2ecfea90">fs_postblformat</a>) == <a class="code" href="ufs__fs_8h.html#a70eba5da1f466bd142ca680ca03ee122">UFS_42POSTBLFMT</a>)</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="befs_2endian_8h.html#ae07ba9050b95e781e7d8925d1cab379a">fs32_to_cpu</a>(sb, usb1-&gt;<a class="code" href="structufs__super__block__first.html#a6c23cec090e02130968e1996e6b5877c">fs_u0</a>.<a class="code" href="structufs__super__block__first.html#a42d176b8c8ff943bab60b179ced2a181">fs_sun</a>.fs_state);</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        <span class="comment">/* Fall Through to UFS_ST_SUN */</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="ufs__fs_8h.html#a85d734b26960961790ce58caac31b26c">UFS_ST_SUN</a>:</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="befs_2endian_8h.html#ae07ba9050b95e781e7d8925d1cab379a">fs32_to_cpu</a>(sb, usb3-&gt;<a class="code" href="structufs__super__block__third.html#afb98c9645ea98dcd0ab3f3a4b2af1711">fs_un2</a>.<a class="code" href="structufs__super__block__third.html#ae73495098b5cd79314f7e31ccc934eb8">fs_sun</a>.fs_state);</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="ufs__fs_8h.html#abe35808274b6eab50ff2171c4e067874">UFS_ST_SUNx86</a>:</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="befs_2endian_8h.html#ae07ba9050b95e781e7d8925d1cab379a">fs32_to_cpu</a>(sb, usb1-&gt;<a class="code" href="structufs__super__block__first.html#a6dac6f288eb9901cb324e6f2887ad92d">fs_u1</a>.<a class="code" href="structufs__super__block__first.html#a4cbca10a44efea41245bbc14e17592e0">fs_sunx86</a>.fs_state);</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="ufs__fs_8h.html#ac861af589ad9ed49d81a65790f874ffc">UFS_ST_44BSD</a>:</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="befs_2endian_8h.html#ae07ba9050b95e781e7d8925d1cab379a">fs32_to_cpu</a>(sb, usb3-&gt;<a class="code" href="structufs__super__block__third.html#afb98c9645ea98dcd0ab3f3a4b2af1711">fs_un2</a>.<a class="code" href="structufs__super__block__third.html#aefc939a11584841b9b34acdc7728a1e4">fs_44</a>.fs_state);</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    }</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;}</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span></div><div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a60777ca13a8b08b579f280af1549a917">   57</a></span>&#160;<a class="code" href="ufs_2util_8h.html#a60777ca13a8b08b579f280af1549a917">ufs_set_fs_state</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *<a class="code" href="ntfs_2debug_8h.html#a65b1b0602e37268ec9bc2c240a676c39">sb</a>, <span class="keyword">struct</span> <a class="code" href="structufs__super__block__first.html">ufs_super_block_first</a> *usb1,</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;         <span class="keyword">struct</span> <a class="code" href="structufs__super__block__third.html">ufs_super_block_third</a> *usb3, s32 value)</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;{</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="ufs_8h.html#abeb63dc517629bd2f7833215c463946e">UFS_SB</a>(sb)-&gt;<a class="code" href="reiserfs_8h.html#a50db69d969858eaf7616d95432491eb1">s_flags</a> &amp; <a class="code" href="ufs__fs_8h.html#a410e53db958cb0018ac32364041afd93">UFS_ST_MASK</a>) {</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="ufs__fs_8h.html#a13c230fc890cc6d0a856b3265d3dfc30">UFS_ST_SUNOS</a>:</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="befs_2endian_8h.html#ae07ba9050b95e781e7d8925d1cab379a">fs32_to_cpu</a>(sb, usb3-&gt;<a class="code" href="structufs__super__block__third.html#a5cbbed34ad3d54b732bd95bf2ecfea90">fs_postblformat</a>) == <a class="code" href="ufs__fs_8h.html#a70eba5da1f466bd142ca680ca03ee122">UFS_42POSTBLFMT</a>) {</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;            usb1-&gt;<a class="code" href="structufs__super__block__first.html#a6c23cec090e02130968e1996e6b5877c">fs_u0</a>.<a class="code" href="structufs__super__block__first.html#a42d176b8c8ff943bab60b179ced2a181">fs_sun</a>.fs_state = <a class="code" href="befs_2endian_8h.html#a3c45c2c14dbfede22ed2dc98eae7276f">cpu_to_fs32</a>(sb, value);</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        }</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="comment">/* Fall Through to UFS_ST_SUN */</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="ufs__fs_8h.html#a85d734b26960961790ce58caac31b26c">UFS_ST_SUN</a>:</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        usb3-&gt;<a class="code" href="structufs__super__block__third.html#afb98c9645ea98dcd0ab3f3a4b2af1711">fs_un2</a>.<a class="code" href="structufs__super__block__third.html#ae73495098b5cd79314f7e31ccc934eb8">fs_sun</a>.fs_state = <a class="code" href="befs_2endian_8h.html#a3c45c2c14dbfede22ed2dc98eae7276f">cpu_to_fs32</a>(sb, value);</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="ufs__fs_8h.html#abe35808274b6eab50ff2171c4e067874">UFS_ST_SUNx86</a>:</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        usb1-&gt;<a class="code" href="structufs__super__block__first.html#a6dac6f288eb9901cb324e6f2887ad92d">fs_u1</a>.<a class="code" href="structufs__super__block__first.html#a4cbca10a44efea41245bbc14e17592e0">fs_sunx86</a>.fs_state = <a class="code" href="befs_2endian_8h.html#a3c45c2c14dbfede22ed2dc98eae7276f">cpu_to_fs32</a>(sb, value);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="ufs__fs_8h.html#ac861af589ad9ed49d81a65790f874ffc">UFS_ST_44BSD</a>:</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        usb3-&gt;<a class="code" href="structufs__super__block__third.html#afb98c9645ea98dcd0ab3f3a4b2af1711">fs_un2</a>.<a class="code" href="structufs__super__block__third.html#aefc939a11584841b9b34acdc7728a1e4">fs_44</a>.fs_state = <a class="code" href="befs_2endian_8h.html#a3c45c2c14dbfede22ed2dc98eae7276f">cpu_to_fs32</a>(sb, value);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    }</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;}</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> u32</div><div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a25a6704c62c033a15d859f666a21a63e">   80</a></span>&#160;<a class="code" href="ufs_2util_8h.html#a25a6704c62c033a15d859f666a21a63e">ufs_get_fs_npsect</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *<a class="code" href="ntfs_2debug_8h.html#a65b1b0602e37268ec9bc2c240a676c39">sb</a>, <span class="keyword">struct</span> <a class="code" href="structufs__super__block__first.html">ufs_super_block_first</a> *usb1,</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;          <span class="keyword">struct</span> <a class="code" href="structufs__super__block__third.html">ufs_super_block_third</a> *usb3)</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;{</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="ufs_8h.html#abeb63dc517629bd2f7833215c463946e">UFS_SB</a>(sb)-&gt;<a class="code" href="reiserfs_8h.html#a50db69d969858eaf7616d95432491eb1">s_flags</a> &amp; <a class="code" href="ufs__fs_8h.html#a410e53db958cb0018ac32364041afd93">UFS_ST_MASK</a>) == <a class="code" href="ufs__fs_8h.html#abe35808274b6eab50ff2171c4e067874">UFS_ST_SUNx86</a>)</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="befs_2endian_8h.html#ae07ba9050b95e781e7d8925d1cab379a">fs32_to_cpu</a>(sb, usb3-&gt;<a class="code" href="structufs__super__block__third.html#afb98c9645ea98dcd0ab3f3a4b2af1711">fs_un2</a>.<a class="code" href="structufs__super__block__third.html#a07e77f7dc5f3c2352f2e6b998c538135">fs_sunx86</a>.fs_npsect);</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="befs_2endian_8h.html#ae07ba9050b95e781e7d8925d1cab379a">fs32_to_cpu</a>(sb, usb1-&gt;<a class="code" href="structufs__super__block__first.html#a6dac6f288eb9901cb324e6f2887ad92d">fs_u1</a>.<a class="code" href="structufs__super__block__first.html#a42d176b8c8ff943bab60b179ced2a181">fs_sun</a>.fs_npsect);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;}</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> u64</div><div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a7a51302f5a4781f88396a0b1e9353b03">   90</a></span>&#160;<a class="code" href="ufs_2util_8h.html#a7a51302f5a4781f88396a0b1e9353b03">ufs_get_fs_qbmask</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *<a class="code" href="ntfs_2debug_8h.html#a65b1b0602e37268ec9bc2c240a676c39">sb</a>, <span class="keyword">struct</span> <a class="code" href="structufs__super__block__third.html">ufs_super_block_third</a> *usb3)</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;{</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="vxfs_8h.html#a5b8093831df5a3cca747f86b41c5392b">__fs64</a> tmp;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="ufs_8h.html#abeb63dc517629bd2f7833215c463946e">UFS_SB</a>(sb)-&gt;<a class="code" href="reiserfs_8h.html#a50db69d969858eaf7616d95432491eb1">s_flags</a> &amp; <a class="code" href="ufs__fs_8h.html#a410e53db958cb0018ac32364041afd93">UFS_ST_MASK</a>) {</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="ufs__fs_8h.html#a13c230fc890cc6d0a856b3265d3dfc30">UFS_ST_SUNOS</a>:</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="ufs__fs_8h.html#a85d734b26960961790ce58caac31b26c">UFS_ST_SUN</a>:</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        ((<a class="code" href="vxfs_8h.html#ab97cbd5e70d7575725483965767262c8">__fs32</a> *)&amp;tmp)[0] = usb3-&gt;<a class="code" href="structufs__super__block__third.html#afb98c9645ea98dcd0ab3f3a4b2af1711">fs_un2</a>.<a class="code" href="structufs__super__block__third.html#ae73495098b5cd79314f7e31ccc934eb8">fs_sun</a>.fs_qbmask[0];</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        ((<a class="code" href="vxfs_8h.html#ab97cbd5e70d7575725483965767262c8">__fs32</a> *)&amp;tmp)[1] = usb3-&gt;<a class="code" href="structufs__super__block__third.html#afb98c9645ea98dcd0ab3f3a4b2af1711">fs_un2</a>.<a class="code" href="structufs__super__block__third.html#ae73495098b5cd79314f7e31ccc934eb8">fs_sun</a>.fs_qbmask[1];</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="ufs__fs_8h.html#abe35808274b6eab50ff2171c4e067874">UFS_ST_SUNx86</a>:</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        ((<a class="code" href="vxfs_8h.html#ab97cbd5e70d7575725483965767262c8">__fs32</a> *)&amp;tmp)[0] = usb3-&gt;<a class="code" href="structufs__super__block__third.html#afb98c9645ea98dcd0ab3f3a4b2af1711">fs_un2</a>.<a class="code" href="structufs__super__block__third.html#a07e77f7dc5f3c2352f2e6b998c538135">fs_sunx86</a>.fs_qbmask[0];</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        ((<a class="code" href="vxfs_8h.html#ab97cbd5e70d7575725483965767262c8">__fs32</a> *)&amp;tmp)[1] = usb3-&gt;<a class="code" href="structufs__super__block__third.html#afb98c9645ea98dcd0ab3f3a4b2af1711">fs_un2</a>.<a class="code" href="structufs__super__block__third.html#a07e77f7dc5f3c2352f2e6b998c538135">fs_sunx86</a>.fs_qbmask[1];</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="ufs__fs_8h.html#ac861af589ad9ed49d81a65790f874ffc">UFS_ST_44BSD</a>:</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        ((<a class="code" href="vxfs_8h.html#ab97cbd5e70d7575725483965767262c8">__fs32</a> *)&amp;tmp)[0] = usb3-&gt;<a class="code" href="structufs__super__block__third.html#afb98c9645ea98dcd0ab3f3a4b2af1711">fs_un2</a>.<a class="code" href="structufs__super__block__third.html#aefc939a11584841b9b34acdc7728a1e4">fs_44</a>.fs_qbmask[0];</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        ((<a class="code" href="vxfs_8h.html#ab97cbd5e70d7575725483965767262c8">__fs32</a> *)&amp;tmp)[1] = usb3-&gt;<a class="code" href="structufs__super__block__third.html#afb98c9645ea98dcd0ab3f3a4b2af1711">fs_un2</a>.<a class="code" href="structufs__super__block__third.html#aefc939a11584841b9b34acdc7728a1e4">fs_44</a>.fs_qbmask[1];</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    }</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="befs_2endian_8h.html#a4e097a2d44726a7d174f21d830a2d693">fs64_to_cpu</a>(sb, tmp);</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;}</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> u64</div><div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a2089a171c4fe3f852ede23da6ae7be47">  114</a></span>&#160;<a class="code" href="ufs_2util_8h.html#a2089a171c4fe3f852ede23da6ae7be47">ufs_get_fs_qfmask</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *<a class="code" href="ntfs_2debug_8h.html#a65b1b0602e37268ec9bc2c240a676c39">sb</a>, <span class="keyword">struct</span> <a class="code" href="structufs__super__block__third.html">ufs_super_block_third</a> *usb3)</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;{</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <a class="code" href="vxfs_8h.html#a5b8093831df5a3cca747f86b41c5392b">__fs64</a> tmp;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="ufs_8h.html#abeb63dc517629bd2f7833215c463946e">UFS_SB</a>(sb)-&gt;<a class="code" href="reiserfs_8h.html#a50db69d969858eaf7616d95432491eb1">s_flags</a> &amp; <a class="code" href="ufs__fs_8h.html#a410e53db958cb0018ac32364041afd93">UFS_ST_MASK</a>) {</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="ufs__fs_8h.html#a13c230fc890cc6d0a856b3265d3dfc30">UFS_ST_SUNOS</a>:</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="ufs__fs_8h.html#a85d734b26960961790ce58caac31b26c">UFS_ST_SUN</a>:</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        ((<a class="code" href="vxfs_8h.html#ab97cbd5e70d7575725483965767262c8">__fs32</a> *)&amp;tmp)[0] = usb3-&gt;<a class="code" href="structufs__super__block__third.html#afb98c9645ea98dcd0ab3f3a4b2af1711">fs_un2</a>.<a class="code" href="structufs__super__block__third.html#ae73495098b5cd79314f7e31ccc934eb8">fs_sun</a>.fs_qfmask[0];</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        ((<a class="code" href="vxfs_8h.html#ab97cbd5e70d7575725483965767262c8">__fs32</a> *)&amp;tmp)[1] = usb3-&gt;<a class="code" href="structufs__super__block__third.html#afb98c9645ea98dcd0ab3f3a4b2af1711">fs_un2</a>.<a class="code" href="structufs__super__block__third.html#ae73495098b5cd79314f7e31ccc934eb8">fs_sun</a>.fs_qfmask[1];</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="ufs__fs_8h.html#abe35808274b6eab50ff2171c4e067874">UFS_ST_SUNx86</a>:</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        ((<a class="code" href="vxfs_8h.html#ab97cbd5e70d7575725483965767262c8">__fs32</a> *)&amp;tmp)[0] = usb3-&gt;<a class="code" href="structufs__super__block__third.html#afb98c9645ea98dcd0ab3f3a4b2af1711">fs_un2</a>.<a class="code" href="structufs__super__block__third.html#a07e77f7dc5f3c2352f2e6b998c538135">fs_sunx86</a>.fs_qfmask[0];</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        ((<a class="code" href="vxfs_8h.html#ab97cbd5e70d7575725483965767262c8">__fs32</a> *)&amp;tmp)[1] = usb3-&gt;<a class="code" href="structufs__super__block__third.html#afb98c9645ea98dcd0ab3f3a4b2af1711">fs_un2</a>.<a class="code" href="structufs__super__block__third.html#a07e77f7dc5f3c2352f2e6b998c538135">fs_sunx86</a>.fs_qfmask[1];</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="ufs__fs_8h.html#ac861af589ad9ed49d81a65790f874ffc">UFS_ST_44BSD</a>:</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        ((<a class="code" href="vxfs_8h.html#ab97cbd5e70d7575725483965767262c8">__fs32</a> *)&amp;tmp)[0] = usb3-&gt;<a class="code" href="structufs__super__block__third.html#afb98c9645ea98dcd0ab3f3a4b2af1711">fs_un2</a>.<a class="code" href="structufs__super__block__third.html#aefc939a11584841b9b34acdc7728a1e4">fs_44</a>.fs_qfmask[0];</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        ((<a class="code" href="vxfs_8h.html#ab97cbd5e70d7575725483965767262c8">__fs32</a> *)&amp;tmp)[1] = usb3-&gt;<a class="code" href="structufs__super__block__third.html#afb98c9645ea98dcd0ab3f3a4b2af1711">fs_un2</a>.<a class="code" href="structufs__super__block__third.html#aefc939a11584841b9b34acdc7728a1e4">fs_44</a>.fs_qfmask[1];</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    }</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="befs_2endian_8h.html#a4e097a2d44726a7d174f21d830a2d693">fs64_to_cpu</a>(sb, tmp);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;}</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> u16</div><div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#ae681a84a06a5a39de8c7f76277108e88">  138</a></span>&#160;<a class="code" href="ufs_2util_8h.html#ae681a84a06a5a39de8c7f76277108e88">ufs_get_de_namlen</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *<a class="code" href="ntfs_2debug_8h.html#a65b1b0602e37268ec9bc2c240a676c39">sb</a>, <span class="keyword">struct</span> <a class="code" href="structufs__dir__entry.html">ufs_dir_entry</a> *de)</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;{</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="ufs_8h.html#abeb63dc517629bd2f7833215c463946e">UFS_SB</a>(sb)-&gt;<a class="code" href="reiserfs_8h.html#a50db69d969858eaf7616d95432491eb1">s_flags</a> &amp; <a class="code" href="ufs__fs_8h.html#a5bdb1f3ac3a964e6ccfc0d27049a88b3">UFS_DE_MASK</a>) == <a class="code" href="ufs__fs_8h.html#a92f838876feb94e65c52465eea4ae73e">UFS_DE_OLD</a>)</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="befs_2endian_8h.html#aaa8c79959db5e2ef0095b801e89a0416">fs16_to_cpu</a>(sb, de-&gt;<a class="code" href="structufs__dir__entry.html#a879d28f5cff3233d5bf220f1eab241fd">d_u</a>.<a class="code" href="structufs__dir__entry.html#aabad90b50880cdaa626fcb0b38a0e3b6">d_namlen</a>);</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="keywordflow">return</span> de-&gt;<a class="code" href="structufs__dir__entry.html#a879d28f5cff3233d5bf220f1eab241fd">d_u</a>.<a class="code" href="structufs__dir__entry.html#a1940bb43bfa3f5d66c3ec8009c173d52">d_44</a>.d_namlen; <span class="comment">/* XXX this seems wrong */</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;}</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span></div><div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a890e8a217e010eebf7e8e4abfd1702b3">  147</a></span>&#160;<a class="code" href="ufs_2util_8h.html#a890e8a217e010eebf7e8e4abfd1702b3">ufs_set_de_namlen</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *<a class="code" href="ntfs_2debug_8h.html#a65b1b0602e37268ec9bc2c240a676c39">sb</a>, <span class="keyword">struct</span> <a class="code" href="structufs__dir__entry.html">ufs_dir_entry</a> *de, u16 value)</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;{</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="ufs_8h.html#abeb63dc517629bd2f7833215c463946e">UFS_SB</a>(sb)-&gt;<a class="code" href="reiserfs_8h.html#a50db69d969858eaf7616d95432491eb1">s_flags</a> &amp; <a class="code" href="ufs__fs_8h.html#a5bdb1f3ac3a964e6ccfc0d27049a88b3">UFS_DE_MASK</a>) == <a class="code" href="ufs__fs_8h.html#a92f838876feb94e65c52465eea4ae73e">UFS_DE_OLD</a>)</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        de-&gt;<a class="code" href="structufs__dir__entry.html#a879d28f5cff3233d5bf220f1eab241fd">d_u</a>.<a class="code" href="structufs__dir__entry.html#aabad90b50880cdaa626fcb0b38a0e3b6">d_namlen</a> = <a class="code" href="befs_2endian_8h.html#a3220c033bf495e76bbdbec2253053825">cpu_to_fs16</a>(sb, value);</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        de-&gt;<a class="code" href="structufs__dir__entry.html#a879d28f5cff3233d5bf220f1eab241fd">d_u</a>.<a class="code" href="structufs__dir__entry.html#a1940bb43bfa3f5d66c3ec8009c173d52">d_44</a>.d_namlen = value; <span class="comment">/* XXX this seems wrong */</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;}</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span></div><div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a0e8a5960ff189fed813c5b2fd9198d77">  156</a></span>&#160;<a class="code" href="ufs_2util_8h.html#a0e8a5960ff189fed813c5b2fd9198d77">ufs_set_de_type</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *<a class="code" href="ntfs_2debug_8h.html#a65b1b0602e37268ec9bc2c240a676c39">sb</a>, <span class="keyword">struct</span> <a class="code" href="structufs__dir__entry.html">ufs_dir_entry</a> *de, <span class="keywordtype">int</span> mode)</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;{</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="ufs_8h.html#abeb63dc517629bd2f7833215c463946e">UFS_SB</a>(sb)-&gt;<a class="code" href="reiserfs_8h.html#a50db69d969858eaf7616d95432491eb1">s_flags</a> &amp; <a class="code" href="ufs__fs_8h.html#a5bdb1f3ac3a964e6ccfc0d27049a88b3">UFS_DE_MASK</a>) != <a class="code" href="ufs__fs_8h.html#ab212677180e80f928ba41d0562a5c0d5">UFS_DE_44BSD</a>)</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">     * TODO turn this into a table lookup</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordflow">switch</span> (mode &amp; S_IFMT) {</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">case</span> S_IFSOCK:</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        de-&gt;<a class="code" href="structufs__dir__entry.html#a879d28f5cff3233d5bf220f1eab241fd">d_u</a>.<a class="code" href="structufs__dir__entry.html#a1940bb43bfa3f5d66c3ec8009c173d52">d_44</a>.d_type = DT_SOCK;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">case</span> S_IFLNK:</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        de-&gt;<a class="code" href="structufs__dir__entry.html#a879d28f5cff3233d5bf220f1eab241fd">d_u</a>.<a class="code" href="structufs__dir__entry.html#a1940bb43bfa3f5d66c3ec8009c173d52">d_44</a>.d_type = DT_LNK;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordflow">case</span> S_IFREG:</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        de-&gt;<a class="code" href="structufs__dir__entry.html#a879d28f5cff3233d5bf220f1eab241fd">d_u</a>.<a class="code" href="structufs__dir__entry.html#a1940bb43bfa3f5d66c3ec8009c173d52">d_44</a>.d_type = DT_REG;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">case</span> S_IFBLK:</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        de-&gt;<a class="code" href="structufs__dir__entry.html#a879d28f5cff3233d5bf220f1eab241fd">d_u</a>.<a class="code" href="structufs__dir__entry.html#a1940bb43bfa3f5d66c3ec8009c173d52">d_44</a>.d_type = DT_BLK;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">case</span> S_IFDIR:</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        de-&gt;<a class="code" href="structufs__dir__entry.html#a879d28f5cff3233d5bf220f1eab241fd">d_u</a>.<a class="code" href="structufs__dir__entry.html#a1940bb43bfa3f5d66c3ec8009c173d52">d_44</a>.d_type = DT_DIR;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">case</span> S_IFCHR:</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        de-&gt;<a class="code" href="structufs__dir__entry.html#a879d28f5cff3233d5bf220f1eab241fd">d_u</a>.<a class="code" href="structufs__dir__entry.html#a1940bb43bfa3f5d66c3ec8009c173d52">d_44</a>.d_type = DT_CHR;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">case</span> S_IFIFO:</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        de-&gt;<a class="code" href="structufs__dir__entry.html#a879d28f5cff3233d5bf220f1eab241fd">d_u</a>.<a class="code" href="structufs__dir__entry.html#a1940bb43bfa3f5d66c3ec8009c173d52">d_44</a>.d_type = DT_FIFO;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        de-&gt;<a class="code" href="structufs__dir__entry.html#a879d28f5cff3233d5bf220f1eab241fd">d_u</a>.<a class="code" href="structufs__dir__entry.html#a1940bb43bfa3f5d66c3ec8009c173d52">d_44</a>.d_type = DT_UNKNOWN;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    }</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;}</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> u32</div><div class="line"><a name="l00192"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#aa24124b68a54cf70383fffe0b44018cc">  192</a></span>&#160;<a class="code" href="ufs_2util_8h.html#aa24124b68a54cf70383fffe0b44018cc">ufs_get_inode_uid</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *<a class="code" href="ntfs_2debug_8h.html#a65b1b0602e37268ec9bc2c240a676c39">sb</a>, <span class="keyword">struct</span> <a class="code" href="structufs__inode.html">ufs_inode</a> *<a class="code" href="summary_8h.html#a63c41f9614ee9a4e1beb75eabad72f22">inode</a>)</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;{</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="ufs_8h.html#abeb63dc517629bd2f7833215c463946e">UFS_SB</a>(sb)-&gt;<a class="code" href="reiserfs_8h.html#a50db69d969858eaf7616d95432491eb1">s_flags</a> &amp; <a class="code" href="ufs__fs_8h.html#a6f1474b84eaf0f452bafd27ec230bd07">UFS_UID_MASK</a>) {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="ufs__fs_8h.html#a30ed00df50f976ba1c9abd3f4e9f3705">UFS_UID_44BSD</a>:</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="befs_2endian_8h.html#ae07ba9050b95e781e7d8925d1cab379a">fs32_to_cpu</a>(sb, inode-&gt;<a class="code" href="structufs__inode.html#a1691d9e92e3484496919a35bca232e8b">ui_u3</a>.<a class="code" href="structufs__inode.html#aee85cc4724605c1d4910a4cc6d9e7116">ui_44</a>.ui_uid);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="ufs__fs_8h.html#a987da573af8be6b625c75b855b806267">UFS_UID_EFT</a>:</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="keywordflow">if</span> (inode-&gt;<a class="code" href="structufs__inode.html#a7822efb2d20ea51341eb24bf47b55160">ui_u1</a>.<a class="code" href="structufs__inode.html#a54a150031edfbdf655031bac109277bc">oldids</a>.ui_suid == 0xFFFF)</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="befs_2endian_8h.html#ae07ba9050b95e781e7d8925d1cab379a">fs32_to_cpu</a>(sb, inode-&gt;<a class="code" href="structufs__inode.html#a1691d9e92e3484496919a35bca232e8b">ui_u3</a>.<a class="code" href="structufs__inode.html#a7a6e588c03788d1734a7294b9cc76efa">ui_sun</a>.ui_uid);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="comment">/* Fall through */</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="befs_2endian_8h.html#aaa8c79959db5e2ef0095b801e89a0416">fs16_to_cpu</a>(sb, inode-&gt;<a class="code" href="structufs__inode.html#a7822efb2d20ea51341eb24bf47b55160">ui_u1</a>.<a class="code" href="structufs__inode.html#a54a150031edfbdf655031bac109277bc">oldids</a>.ui_suid);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    }</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;}</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span></div><div class="line"><a name="l00207"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a53c2c06d2586358837b203e31705487f">  207</a></span>&#160;<a class="code" href="ufs_2util_8h.html#a53c2c06d2586358837b203e31705487f">ufs_set_inode_uid</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *<a class="code" href="ntfs_2debug_8h.html#a65b1b0602e37268ec9bc2c240a676c39">sb</a>, <span class="keyword">struct</span> <a class="code" href="structufs__inode.html">ufs_inode</a> *<a class="code" href="summary_8h.html#a63c41f9614ee9a4e1beb75eabad72f22">inode</a>, u32 value)</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;{</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="ufs_8h.html#abeb63dc517629bd2f7833215c463946e">UFS_SB</a>(sb)-&gt;<a class="code" href="reiserfs_8h.html#a50db69d969858eaf7616d95432491eb1">s_flags</a> &amp; <a class="code" href="ufs__fs_8h.html#a6f1474b84eaf0f452bafd27ec230bd07">UFS_UID_MASK</a>) {</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="ufs__fs_8h.html#a30ed00df50f976ba1c9abd3f4e9f3705">UFS_UID_44BSD</a>:</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        inode-&gt;<a class="code" href="structufs__inode.html#a1691d9e92e3484496919a35bca232e8b">ui_u3</a>.<a class="code" href="structufs__inode.html#aee85cc4724605c1d4910a4cc6d9e7116">ui_44</a>.ui_uid = <a class="code" href="befs_2endian_8h.html#a3c45c2c14dbfede22ed2dc98eae7276f">cpu_to_fs32</a>(sb, value);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        inode-&gt;<a class="code" href="structufs__inode.html#a7822efb2d20ea51341eb24bf47b55160">ui_u1</a>.<a class="code" href="structufs__inode.html#a54a150031edfbdf655031bac109277bc">oldids</a>.ui_suid = <a class="code" href="befs_2endian_8h.html#a3220c033bf495e76bbdbec2253053825">cpu_to_fs16</a>(sb, value);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="ufs__fs_8h.html#a987da573af8be6b625c75b855b806267">UFS_UID_EFT</a>:</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        inode-&gt;<a class="code" href="structufs__inode.html#a1691d9e92e3484496919a35bca232e8b">ui_u3</a>.<a class="code" href="structufs__inode.html#a7a6e588c03788d1734a7294b9cc76efa">ui_sun</a>.ui_uid = <a class="code" href="befs_2endian_8h.html#a3c45c2c14dbfede22ed2dc98eae7276f">cpu_to_fs32</a>(sb, value);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <span class="keywordflow">if</span> (value &gt; 0xFFFF)</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            value = 0xFFFF;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="comment">/* Fall through */</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        inode-&gt;<a class="code" href="structufs__inode.html#a7822efb2d20ea51341eb24bf47b55160">ui_u1</a>.<a class="code" href="structufs__inode.html#a54a150031edfbdf655031bac109277bc">oldids</a>.ui_suid = <a class="code" href="befs_2endian_8h.html#a3220c033bf495e76bbdbec2253053825">cpu_to_fs16</a>(sb, value);</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    }</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;}</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> u32</div><div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a04e50c0da80d55ec8299f9be2c4ddc6e">  226</a></span>&#160;<a class="code" href="ufs_2util_8h.html#a04e50c0da80d55ec8299f9be2c4ddc6e">ufs_get_inode_gid</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *<a class="code" href="ntfs_2debug_8h.html#a65b1b0602e37268ec9bc2c240a676c39">sb</a>, <span class="keyword">struct</span> <a class="code" href="structufs__inode.html">ufs_inode</a> *<a class="code" href="summary_8h.html#a63c41f9614ee9a4e1beb75eabad72f22">inode</a>)</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;{</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="ufs_8h.html#abeb63dc517629bd2f7833215c463946e">UFS_SB</a>(sb)-&gt;<a class="code" href="reiserfs_8h.html#a50db69d969858eaf7616d95432491eb1">s_flags</a> &amp; <a class="code" href="ufs__fs_8h.html#a6f1474b84eaf0f452bafd27ec230bd07">UFS_UID_MASK</a>) {</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="ufs__fs_8h.html#a30ed00df50f976ba1c9abd3f4e9f3705">UFS_UID_44BSD</a>:</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="befs_2endian_8h.html#ae07ba9050b95e781e7d8925d1cab379a">fs32_to_cpu</a>(sb, inode-&gt;<a class="code" href="structufs__inode.html#a1691d9e92e3484496919a35bca232e8b">ui_u3</a>.<a class="code" href="structufs__inode.html#aee85cc4724605c1d4910a4cc6d9e7116">ui_44</a>.ui_gid);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="ufs__fs_8h.html#a987da573af8be6b625c75b855b806267">UFS_UID_EFT</a>:</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <span class="keywordflow">if</span> (inode-&gt;<a class="code" href="structufs__inode.html#a7822efb2d20ea51341eb24bf47b55160">ui_u1</a>.<a class="code" href="structufs__inode.html#a54a150031edfbdf655031bac109277bc">oldids</a>.ui_suid == 0xFFFF)</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="befs_2endian_8h.html#ae07ba9050b95e781e7d8925d1cab379a">fs32_to_cpu</a>(sb, inode-&gt;<a class="code" href="structufs__inode.html#a1691d9e92e3484496919a35bca232e8b">ui_u3</a>.<a class="code" href="structufs__inode.html#a7a6e588c03788d1734a7294b9cc76efa">ui_sun</a>.ui_gid);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="comment">/* Fall through */</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="befs_2endian_8h.html#aaa8c79959db5e2ef0095b801e89a0416">fs16_to_cpu</a>(sb, inode-&gt;<a class="code" href="structufs__inode.html#a7822efb2d20ea51341eb24bf47b55160">ui_u1</a>.<a class="code" href="structufs__inode.html#a54a150031edfbdf655031bac109277bc">oldids</a>.ui_sgid);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    }</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;}</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span></div><div class="line"><a name="l00241"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a68db33ce780b72958a142eefa2f2621e">  241</a></span>&#160;<a class="code" href="ufs_2util_8h.html#a68db33ce780b72958a142eefa2f2621e">ufs_set_inode_gid</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *<a class="code" href="ntfs_2debug_8h.html#a65b1b0602e37268ec9bc2c240a676c39">sb</a>, <span class="keyword">struct</span> <a class="code" href="structufs__inode.html">ufs_inode</a> *<a class="code" href="summary_8h.html#a63c41f9614ee9a4e1beb75eabad72f22">inode</a>, u32 value)</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;{</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="ufs_8h.html#abeb63dc517629bd2f7833215c463946e">UFS_SB</a>(sb)-&gt;<a class="code" href="reiserfs_8h.html#a50db69d969858eaf7616d95432491eb1">s_flags</a> &amp; <a class="code" href="ufs__fs_8h.html#a6f1474b84eaf0f452bafd27ec230bd07">UFS_UID_MASK</a>) {</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="ufs__fs_8h.html#a30ed00df50f976ba1c9abd3f4e9f3705">UFS_UID_44BSD</a>:</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        inode-&gt;<a class="code" href="structufs__inode.html#a1691d9e92e3484496919a35bca232e8b">ui_u3</a>.<a class="code" href="structufs__inode.html#aee85cc4724605c1d4910a4cc6d9e7116">ui_44</a>.ui_gid = <a class="code" href="befs_2endian_8h.html#a3c45c2c14dbfede22ed2dc98eae7276f">cpu_to_fs32</a>(sb, value);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        inode-&gt;<a class="code" href="structufs__inode.html#a7822efb2d20ea51341eb24bf47b55160">ui_u1</a>.<a class="code" href="structufs__inode.html#a54a150031edfbdf655031bac109277bc">oldids</a>.ui_sgid =  <a class="code" href="befs_2endian_8h.html#a3220c033bf495e76bbdbec2253053825">cpu_to_fs16</a>(sb, value);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="ufs__fs_8h.html#a987da573af8be6b625c75b855b806267">UFS_UID_EFT</a>:</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        inode-&gt;<a class="code" href="structufs__inode.html#a1691d9e92e3484496919a35bca232e8b">ui_u3</a>.<a class="code" href="structufs__inode.html#a7a6e588c03788d1734a7294b9cc76efa">ui_sun</a>.ui_gid = <a class="code" href="befs_2endian_8h.html#a3c45c2c14dbfede22ed2dc98eae7276f">cpu_to_fs32</a>(sb, value);</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <span class="keywordflow">if</span> (value &gt; 0xFFFF)</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            value = 0xFFFF;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="comment">/* Fall through */</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        inode-&gt;<a class="code" href="structufs__inode.html#a7822efb2d20ea51341eb24bf47b55160">ui_u1</a>.<a class="code" href="structufs__inode.html#a54a150031edfbdf655031bac109277bc">oldids</a>.ui_sgid =  <a class="code" href="befs_2endian_8h.html#a3220c033bf495e76bbdbec2253053825">cpu_to_fs16</a>(sb, value);</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    }</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;}</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="keyword">extern</span> dev_t <a class="code" href="ufs_2util_8h.html#af288d798df4bfbe1fc41eec1e47d4b25">ufs_get_inode_dev</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *, <span class="keyword">struct</span> <a class="code" href="structufs__inode__info.html">ufs_inode_info</a> *);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="ufs_2util_8h.html#a51092ff8276845745f0f8ac9d5b5a98a">ufs_set_inode_dev</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *, <span class="keyword">struct</span> <a class="code" href="structufs__inode__info.html">ufs_inode_info</a> *, dev_t);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="ufs_2util_8h.html#a8cf45a3cb4167ccf3661aea54e6e28a7">ufs_prepare_chunk</a>(<span class="keyword">struct</span> page *page, loff_t pos, <span class="keywordtype">unsigned</span> <a class="code" href="send_8h.html#ac6c61fc2d54b5e017432ab28daf5a7a9">len</a>);</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment"> * These functions manipulate ufs buffers</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00266"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#acce6f4497c805da09cfa1780984b7b62">  266</a></span>&#160;<span class="preprocessor">#define ubh_bread(sb,fragment,size) _ubh_bread_(uspi,sb,fragment,size)  </span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="keyword">extern</span> <span class="keyword">struct </span><a class="code" href="structufs__buffer__head.html">ufs_buffer_head</a> * <a class="code" href="ufs_2util_8h.html#a5b7d8cb99f41318776466aff5fd2be22">_ubh_bread_</a>(<span class="keyword">struct</span> <a class="code" href="structufs__sb__private__info.html">ufs_sb_private_info</a> *, <span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *, u64 , u64);</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="keyword">extern</span> <span class="keyword">struct </span><a class="code" href="structufs__buffer__head.html">ufs_buffer_head</a> * <a class="code" href="ufs_2util_8h.html#ac742e9eae43657deaa08afafdda5291d">ubh_bread_uspi</a>(<span class="keyword">struct</span> <a class="code" href="structufs__sb__private__info.html">ufs_sb_private_info</a> *, <span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *, u64, u64);</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="ufs_2util_8h.html#a4764800956914ac7ba0c78ff27c9149f">ubh_brelse</a> (<span class="keyword">struct</span> <a class="code" href="structufs__buffer__head.html">ufs_buffer_head</a> *);</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="ufs_2util_8h.html#a53ae611805f3852752cab1d19d50e81d">ubh_brelse_uspi</a> (<span class="keyword">struct</span> <a class="code" href="structufs__sb__private__info.html">ufs_sb_private_info</a> *);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="ufs_2util_8h.html#a29a46db75fd999398c5dcd6332c4d545">ubh_mark_buffer_dirty</a> (<span class="keyword">struct</span> <a class="code" href="structufs__buffer__head.html">ufs_buffer_head</a> *);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="ufs_2util_8h.html#a07b506a23b96c560c89be7d0eb5720f5">ubh_mark_buffer_uptodate</a> (<span class="keyword">struct</span> <a class="code" href="structufs__buffer__head.html">ufs_buffer_head</a> *, <span class="keywordtype">int</span>);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="ufs_2util_8h.html#a9886ab44f8d9d497eade92f48f5a5ca4">ubh_sync_block</a>(<span class="keyword">struct</span> <a class="code" href="structufs__buffer__head.html">ufs_buffer_head</a> *);</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="ufs_2util_8h.html#abe69f232d2ab4a452c277d278597cb34">ubh_bforget</a> (<span class="keyword">struct</span> <a class="code" href="structufs__buffer__head.html">ufs_buffer_head</a> *);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span>  <a class="code" href="ufs_2util_8h.html#ade5d18e3fa7cd71765c37e005a1adb31">ubh_buffer_dirty</a> (<span class="keyword">struct</span> <a class="code" href="structufs__buffer__head.html">ufs_buffer_head</a> *);</div><div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#ace61c7d6f370b65164e880098166c8e4">  276</a></span>&#160;<span class="preprocessor">#define ubh_ubhcpymem(mem,ubh,size) _ubh_ubhcpymem_(uspi,mem,ubh,size)</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="ufs_2util_8h.html#af881dc6a624951cb6ef086e0b9cbd037">_ubh_ubhcpymem_</a>(<span class="keyword">struct</span> <a class="code" href="structufs__sb__private__info.html">ufs_sb_private_info</a> *, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *, <span class="keyword">struct</span> <a class="code" href="structufs__buffer__head.html">ufs_buffer_head</a> *, <span class="keywordtype">unsigned</span>);</div><div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a09851b2d2ed91b4e06caf11f910ee0bd">  278</a></span>&#160;<span class="preprocessor">#define ubh_memcpyubh(ubh,mem,size) _ubh_memcpyubh_(uspi,ubh,mem,size)</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="ufs_2util_8h.html#added0fce07e1d88dd7f2c414b3daaa66">_ubh_memcpyubh_</a>(<span class="keyword">struct</span> <a class="code" href="structufs__sb__private__info.html">ufs_sb_private_info</a> *, <span class="keyword">struct</span> <a class="code" href="structufs__buffer__head.html">ufs_buffer_head</a> *, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *, <span class="keywordtype">unsigned</span>);</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">/* This functions works with cache pages*/</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="keyword">extern</span> <span class="keyword">struct </span>page *<a class="code" href="ufs_2util_8h.html#af3066e34394a75c2ee1602ac77dc9f27">ufs_get_locked_page</a>(<span class="keyword">struct</span> address_space *mapping,</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                    pgoff_t <a class="code" href="cifssmb_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>);</div><div class="line"><a name="l00284"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a4903ccc8c070c631db844c56b699c75b">  284</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="ufs_2util_8h.html#a4903ccc8c070c631db844c56b699c75b">ufs_put_locked_page</a>(<span class="keyword">struct</span> page *page)</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;{</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;       unlock_page(page);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;       put_page(page);</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;}</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment"> * macros and inline function to get important structures from ufs_sb_private_info</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a968577291a5c472bf29d4726ba770006">  295</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> *<a class="code" href="ufs_2util_8h.html#a968577291a5c472bf29d4726ba770006">get_usb_offset</a>(<span class="keyword">struct</span> <a class="code" href="structufs__sb__private__info.html">ufs_sb_private_info</a> *uspi,</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="ctree_8h.html#a3875b4f2ee8a9d27ac3b3b145f934f86">offset</a>)</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;{</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="cifssmb_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    </div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    index = offset &gt;&gt; uspi-&gt;<a class="code" href="structufs__sb__private__info.html#aee3193a911a948a0a438277c5f1525a6">s_fshift</a>;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    offset &amp;= ~uspi-&gt;<a class="code" href="structufs__sb__private__info.html#a985a74e1d1d6acf4be770b3e9c5f1479">s_fmask</a>;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">return</span> uspi-&gt;<a class="code" href="structufs__sb__private__info.html#a66da309a27cf894564dd735bb6c40417">s_ubh</a>.<a class="code" href="structufs__buffer__head.html#a79a6d8b2f0e4fccbedab85c0262ecaf2">bh</a>[<a class="code" href="cifssmb_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>]-&gt;b_data + <a class="code" href="ctree_8h.html#a3875b4f2ee8a9d27ac3b3b145f934f86">offset</a>;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;}</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a28b69c2dc9b2579fbd292d0ed21bd027">  305</a></span>&#160;<span class="preprocessor">#define ubh_get_usb_first(uspi) \</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="preprocessor">    ((struct ufs_super_block_first *)get_usb_offset((uspi), 0))</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div><div class="line"><a name="l00308"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a57c297765ca6cf5c0ad2202446dbbd5d">  308</a></span>&#160;<span class="preprocessor">#define ubh_get_usb_second(uspi) \</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="preprocessor">    ((struct ufs_super_block_second *)get_usb_offset((uspi), UFS_SECTOR_SIZE))</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a976c6a3613de84bf480eb3537b66d61f">  311</a></span>&#160;<span class="preprocessor">#define ubh_get_usb_third(uspi) \</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="preprocessor">    ((struct ufs_super_block_third *)get_usb_offset((uspi), 2*UFS_SECTOR_SIZE))</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div><div class="line"><a name="l00315"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#ad516b3a8f8cd737f12229e8cdf64f7c7">  315</a></span>&#160;<span class="preprocessor">#define ubh_get_ucg(ubh) \</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="preprocessor">    ((struct ufs_cylinder_group *)((ubh)-&gt;bh[0]-&gt;b_data))</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment"> * Extract byte from ufs_buffer_head</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment"> * Extract the bits for a block from a map inside ufs_buffer_head</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00323"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#af0356e84b6aac73fbaa7596c084a01a5">  323</a></span>&#160;<span class="preprocessor">#define ubh_get_addr8(ubh,begin) \</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="preprocessor">    ((u8*)(ubh)-&gt;bh[(begin) &gt;&gt; uspi-&gt;s_fshift]-&gt;b_data + \</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="preprocessor">    ((begin) &amp; ~uspi-&gt;s_fmask))</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div><div class="line"><a name="l00327"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a6de37792629eca906043dc3f54235cf9">  327</a></span>&#160;<span class="preprocessor">#define ubh_get_addr16(ubh,begin) \</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="preprocessor">    (((__fs16*)((ubh)-&gt;bh[(begin) &gt;&gt; (uspi-&gt;s_fshift-1)]-&gt;b_data)) + \</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="preprocessor">    ((begin) &amp; ((uspi-&gt;fsize&gt;&gt;1) - 1)))</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div><div class="line"><a name="l00331"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a1a9043b09da51ac77146eab5607fc49b">  331</a></span>&#160;<span class="preprocessor">#define ubh_get_addr32(ubh,begin) \</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="preprocessor">    (((__fs32*)((ubh)-&gt;bh[(begin) &gt;&gt; (uspi-&gt;s_fshift-2)]-&gt;b_data)) + \</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="preprocessor">    ((begin) &amp; ((uspi-&gt;s_fsize&gt;&gt;2) - 1)))</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div><div class="line"><a name="l00335"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#ae09d3cdad984a6e41d17ca719f07fc4d">  335</a></span>&#160;<span class="preprocessor">#define ubh_get_addr64(ubh,begin) \</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="preprocessor">    (((__fs64*)((ubh)-&gt;bh[(begin) &gt;&gt; (uspi-&gt;s_fshift-3)]-&gt;b_data)) + \</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="preprocessor">    ((begin) &amp; ((uspi-&gt;s_fsize&gt;&gt;3) - 1)))</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00339"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a51208b25d4717f23c48d71ec4446ce2e">  339</a></span>&#160;<span class="preprocessor">#define ubh_get_addr ubh_get_addr8</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00341"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#aabe8213b0e9c802b9bc821d5347067ea">  341</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> *<a class="code" href="ufs_2util_8h.html#aabe8213b0e9c802b9bc821d5347067ea">ubh_get_data_ptr</a>(<span class="keyword">struct</span> <a class="code" href="structufs__sb__private__info.html">ufs_sb_private_info</a> *uspi,</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                     <span class="keyword">struct</span> <a class="code" href="structufs__buffer__head.html">ufs_buffer_head</a> *ubh,</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                     u64 blk)</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;{</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">if</span> (uspi-&gt;<a class="code" href="structufs__sb__private__info.html#a2c539ff343eeda464cf807e9d1630121">fs_magic</a> == <a class="code" href="ufs__fs_8h.html#a4e9c3a91c1d68aeb1e4c2ebc98522d2c">UFS2_MAGIC</a>)</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="ufs_2util_8h.html#ae09d3cdad984a6e41d17ca719f07fc4d">ubh_get_addr64</a>(ubh, blk);</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="ufs_2util_8h.html#a1a9043b09da51ac77146eab5607fc49b">ubh_get_addr32</a>(ubh, blk);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;}</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div><div class="line"><a name="l00351"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a5446756da618d79121d33ed6202ec89c">  351</a></span>&#160;<span class="preprocessor">#define ubh_blkmap(ubh,begin,bit) \</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="preprocessor">    ((*ubh_get_addr(ubh, (begin) + ((bit) &gt;&gt; 3)) &gt;&gt; ((bit) &amp; 7)) &amp; (0xff &gt;&gt; (UFS_MAXFRAG - uspi-&gt;s_fpb)))</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> u64</div><div class="line"><a name="l00355"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#afedded0cf13a36acbb4e42d748eba8fe">  355</a></span>&#160;<a class="code" href="ufs_2util_8h.html#afedded0cf13a36acbb4e42d748eba8fe">ufs_freefrags</a>(<span class="keyword">struct</span> <a class="code" href="structufs__sb__private__info.html">ufs_sb_private_info</a> *uspi)</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;{</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="ufs__fs_8h.html#af70ea0ec3bded695bc9a3d23eec34a72">ufs_blkstofrags</a>(uspi-&gt;<a class="code" href="structufs__sb__private__info.html#acfe643cf1a9f3c0f82cb3f2b8c26df3a">cs_total</a>.<a class="code" href="structufs__csum__core.html#af5293470e5a75fae801a0702135f53d0">cs_nbfree</a>) +</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        uspi-&gt;<a class="code" href="structufs__sb__private__info.html#acfe643cf1a9f3c0f82cb3f2b8c26df3a">cs_total</a>.<a class="code" href="structufs__csum__core.html#ab028e5b65b8934470a83b335ced3d031">cs_nffree</a>;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;}</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment"> * Macros to access cylinder group array structures</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00364"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#ac3916ce37545e3995c5d7edb489b2962">  364</a></span>&#160;<span class="preprocessor">#define ubh_cg_blktot(ucpi,cylno) \</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="preprocessor">    (*((__fs32*)ubh_get_addr(UCPI_UBH(ucpi), (ucpi)-&gt;c_btotoff + ((cylno) &lt;&lt; 2))))</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#ab8a38b517446822b0ea01bc7052a3d8a">  367</a></span>&#160;<span class="preprocessor">#define ubh_cg_blks(ucpi,cylno,rpos) \</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="preprocessor">    (*((__fs16*)ubh_get_addr(UCPI_UBH(ucpi), \</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="preprocessor">    (ucpi)-&gt;c_boff + (((cylno) * uspi-&gt;s_nrpos + (rpos)) &lt;&lt; 1 ))))</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment"> * Bitmap operations</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment"> * These functions work like classical bitmap operations.</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment"> * The difference is that we don&#39;t have the whole bitmap</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment"> * in one contiguous chunk of memory, but in several buffers.</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment"> * The parameters of each function are super_block, ufs_buffer_head and</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment"> * position of the beginning of the bitmap.</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00379"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a155fd0c80cf344066ed5ee4acc99770b">  379</a></span>&#160;<span class="preprocessor">#define ubh_setbit(ubh,begin,bit) \</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="preprocessor">    (*ubh_get_addr(ubh, (begin) + ((bit) &gt;&gt; 3)) |= (1 &lt;&lt; ((bit) &amp; 7)))</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div><div class="line"><a name="l00382"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a4532fc26f55fa37e0d1197270920d84b">  382</a></span>&#160;<span class="preprocessor">#define ubh_clrbit(ubh,begin,bit) \</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="preprocessor">    (*ubh_get_addr (ubh, (begin) + ((bit) &gt;&gt; 3)) &amp;= ~(1 &lt;&lt; ((bit) &amp; 7)))</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div><div class="line"><a name="l00385"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a1c9ac20bc9b3204bfbcf43fbcc6eac0d">  385</a></span>&#160;<span class="preprocessor">#define ubh_isset(ubh,begin,bit) \</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="preprocessor">    (*ubh_get_addr (ubh, (begin) + ((bit) &gt;&gt; 3)) &amp; (1 &lt;&lt; ((bit) &amp; 7)))</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a7cd2cd2f0f1b6551d0ebf4bab13fd640">  388</a></span>&#160;<span class="preprocessor">#define ubh_isclr(ubh,begin,bit) (!ubh_isset(ubh,begin,bit))</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div><div class="line"><a name="l00390"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a9e5c85668856a41b5bd18d41f3eae079">  390</a></span>&#160;<span class="preprocessor">#define ubh_find_first_zero_bit(ubh,begin,size) _ubh_find_next_zero_bit_(uspi,ubh,begin,size,0)</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div><div class="line"><a name="l00392"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a4a74a847803d0d9382ba7339ae3c91e0">  392</a></span>&#160;<span class="preprocessor">#define ubh_find_next_zero_bit(ubh,begin,size,offset) _ubh_find_next_zero_bit_(uspi,ubh,begin,size,offset)</span></div><div class="line"><a name="l00393"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a0b08ccf1101e199b415a0db5b5864434">  393</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">unsigned</span> <a class="code" href="ufs_2util_8h.html#a0b08ccf1101e199b415a0db5b5864434">_ubh_find_next_zero_bit_</a>(</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structufs__sb__private__info.html">ufs_sb_private_info</a> * uspi, <span class="keyword">struct</span> <a class="code" href="structufs__buffer__head.html">ufs_buffer_head</a> * ubh,</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordtype">unsigned</span> begin, <span class="keywordtype">unsigned</span> <a class="code" href="ctree_8h.html#a370d10a726e7596cd6c17d656fa8c8ad">size</a>, <span class="keywordtype">unsigned</span> <a class="code" href="ctree_8h.html#a3875b4f2ee8a9d27ac3b3b145f934f86">offset</a>)</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;{</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordtype">unsigned</span> base, <a class="code" href="exec_8c.html#a36dcaf63ad8fe9783c81b418943e2346">count</a>, pos;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    size -= <a class="code" href="ctree_8h.html#a3875b4f2ee8a9d27ac3b3b145f934f86">offset</a>;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    begin &lt;&lt;= 3;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    offset += begin;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    base = offset &gt;&gt; uspi-&gt;<a class="code" href="structufs__sb__private__info.html#a8803792ad26bf565eb3869e230ce15fc">s_bpfshift</a>;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    offset &amp;= uspi-&gt;<a class="code" href="structufs__sb__private__info.html#a8ff59f60a1dd4f01454b46590315a652">s_bpfmask</a>;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        count = min_t(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>, size + offset, uspi-&gt;<a class="code" href="structufs__sb__private__info.html#a6598f4c370e0e7ceb1bdca86e8e4c9cd">s_bpf</a>);</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        size -= count - <a class="code" href="ctree_8h.html#a3875b4f2ee8a9d27ac3b3b145f934f86">offset</a>;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        pos = find_next_zero_bit_le(ubh-&gt;<a class="code" href="structufs__buffer__head.html#a79a6d8b2f0e4fccbedab85c0262ecaf2">bh</a>[base]-&gt;b_data, count, offset);</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <span class="keywordflow">if</span> (pos &lt; count || !size)</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        base++;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        offset = 0;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    }</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">return</span> (base &lt;&lt; uspi-&gt;<a class="code" href="structufs__sb__private__info.html#a8803792ad26bf565eb3869e230ce15fc">s_bpfshift</a>) + pos - begin;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;}   </div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div><div class="line"><a name="l00416"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a7d62193bde70e8c8b9e8509fd3f8bf9a">  416</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">unsigned</span> <a class="code" href="ufs_2util_8h.html#a7d62193bde70e8c8b9e8509fd3f8bf9a">find_last_zero_bit</a> (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * bitmap,</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="ctree_8h.html#a370d10a726e7596cd6c17d656fa8c8ad">size</a>, <span class="keywordtype">unsigned</span> <a class="code" href="ctree_8h.html#a3875b4f2ee8a9d27ac3b3b145f934f86">offset</a>)</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;{</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordtype">unsigned</span> bit, i;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * mapp;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> map;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    mapp = bitmap + (size &gt;&gt; 3);</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    map = *mapp--;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    bit = 1 &lt;&lt; (size &amp; 7);</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordflow">for</span> (i = size; i &gt; <a class="code" href="ctree_8h.html#a3875b4f2ee8a9d27ac3b3b145f934f86">offset</a>; i--) {</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <span class="keywordflow">if</span> ((map &amp; bit) == 0)</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="keywordflow">if</span> ((i &amp; 7) != 0) {</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            bit &gt;&gt;= 1;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            map = *mapp--;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;            bit = 1 &lt;&lt; 7;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        }</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    }</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="keywordflow">return</span> i;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;}</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div><div class="line"><a name="l00439"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a2cc624ee2bdeb35a586bf2dc3bb954b3">  439</a></span>&#160;<span class="preprocessor">#define ubh_find_last_zero_bit(ubh,begin,size,offset) _ubh_find_last_zero_bit_(uspi,ubh,begin,size,offset)</span></div><div class="line"><a name="l00440"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a7e077bf8b9ad724c0cf2fa3c40de481d">  440</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">unsigned</span> <a class="code" href="ufs_2util_8h.html#a7e077bf8b9ad724c0cf2fa3c40de481d">_ubh_find_last_zero_bit_</a>(</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structufs__sb__private__info.html">ufs_sb_private_info</a> * uspi, <span class="keyword">struct</span> <a class="code" href="structufs__buffer__head.html">ufs_buffer_head</a> * ubh,</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordtype">unsigned</span> begin, <span class="keywordtype">unsigned</span> <a class="code" href="cifspdu_8h.html#a94f8d852c02921f3079f6987b4a5d7d0">start</a>, <span class="keywordtype">unsigned</span> end)</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;{</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordtype">unsigned</span> base, <a class="code" href="exec_8c.html#a36dcaf63ad8fe9783c81b418943e2346">count</a>, pos, <a class="code" href="ctree_8h.html#a370d10a726e7596cd6c17d656fa8c8ad">size</a>;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    size = start - end;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    begin &lt;&lt;= 3;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    start += begin;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    base = start &gt;&gt; uspi-&gt;<a class="code" href="structufs__sb__private__info.html#a8803792ad26bf565eb3869e230ce15fc">s_bpfshift</a>;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    start &amp;= uspi-&gt;<a class="code" href="structufs__sb__private__info.html#a8ff59f60a1dd4f01454b46590315a652">s_bpfmask</a>;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        count = min_t(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>,</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                size + (uspi-&gt;<a class="code" href="structufs__sb__private__info.html#a6598f4c370e0e7ceb1bdca86e8e4c9cd">s_bpf</a> - start), uspi-&gt;<a class="code" href="structufs__sb__private__info.html#a6598f4c370e0e7ceb1bdca86e8e4c9cd">s_bpf</a>)</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            - (uspi-&gt;<a class="code" href="structufs__sb__private__info.html#a6598f4c370e0e7ceb1bdca86e8e4c9cd">s_bpf</a> - <a class="code" href="cifspdu_8h.html#a94f8d852c02921f3079f6987b4a5d7d0">start</a>);</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        size -= <a class="code" href="exec_8c.html#a36dcaf63ad8fe9783c81b418943e2346">count</a>;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        pos = <a class="code" href="ufs_2util_8h.html#a7d62193bde70e8c8b9e8509fd3f8bf9a">find_last_zero_bit</a> (ubh-&gt;<a class="code" href="structufs__buffer__head.html#a79a6d8b2f0e4fccbedab85c0262ecaf2">bh</a>[base]-&gt;b_data,</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            start, start - count);</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="keywordflow">if</span> (pos &gt; start - count || !size)</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        base--;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        start = uspi-&gt;<a class="code" href="structufs__sb__private__info.html#a6598f4c370e0e7ceb1bdca86e8e4c9cd">s_bpf</a>;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    }</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordflow">return</span> (base &lt;&lt; uspi-&gt;<a class="code" href="structufs__sb__private__info.html#a8803792ad26bf565eb3869e230ce15fc">s_bpfshift</a>) + pos - begin;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;}   </div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div><div class="line"><a name="l00466"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a06f3e7131cd0f24e0c74245ca0917dd1">  466</a></span>&#160;<span class="preprocessor">#define ubh_isblockclear(ubh,begin,block) (!_ubh_isblockset_(uspi,ubh,begin,block))</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div><div class="line"><a name="l00468"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a7dd44c9e0310fa3bd78562c4cea7a1a4">  468</a></span>&#160;<span class="preprocessor">#define ubh_isblockset(ubh,begin,block) _ubh_isblockset_(uspi,ubh,begin,block)</span></div><div class="line"><a name="l00469"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a0f34c1ff323a1107a93fdd0192283dbe">  469</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="ufs_2util_8h.html#a0f34c1ff323a1107a93fdd0192283dbe">_ubh_isblockset_</a>(<span class="keyword">struct</span> <a class="code" href="structufs__sb__private__info.html">ufs_sb_private_info</a> * uspi,</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structufs__buffer__head.html">ufs_buffer_head</a> * ubh, <span class="keywordtype">unsigned</span> begin, <span class="keywordtype">unsigned</span> <a class="code" href="sysv_2super_8c.html#a6f5f3480b66f3cc414fd0d6dfcf54046">block</a>)</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;{</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    u8 <a class="code" href="cifspdu_8h.html#a12b1ee8c5efcba4a2341cc1d49f58b71">mask</a>;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="keywordflow">switch</span> (uspi-&gt;<a class="code" href="structufs__sb__private__info.html#a3b58769381e73c3a5b14ba772f1c689f">s_fpb</a>) {</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordflow">case</span> 8:</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;            <span class="keywordflow">return</span> (*<a class="code" href="ufs_2util_8h.html#a51208b25d4717f23c48d71ec4446ce2e">ubh_get_addr</a> (ubh, begin + block) == 0xff);</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keywordflow">case</span> 4:</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        mask = 0x0f &lt;&lt; ((block &amp; 0x01) &lt;&lt; 2);</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="keywordflow">return</span> (*<a class="code" href="ufs_2util_8h.html#a51208b25d4717f23c48d71ec4446ce2e">ubh_get_addr</a> (ubh, begin + (block &gt;&gt; 1)) &amp; mask) == <a class="code" href="cifspdu_8h.html#a12b1ee8c5efcba4a2341cc1d49f58b71">mask</a>;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="keywordflow">case</span> 2:</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        mask = 0x03 &lt;&lt; ((block &amp; 0x03) &lt;&lt; 1);</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        <span class="keywordflow">return</span> (*<a class="code" href="ufs_2util_8h.html#a51208b25d4717f23c48d71ec4446ce2e">ubh_get_addr</a> (ubh, begin + (block &gt;&gt; 2)) &amp; mask) == <a class="code" href="cifspdu_8h.html#a12b1ee8c5efcba4a2341cc1d49f58b71">mask</a>;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="keywordflow">case</span> 1:</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        mask = 0x01 &lt;&lt; (block &amp; 0x07);</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <span class="keywordflow">return</span> (*<a class="code" href="ufs_2util_8h.html#a51208b25d4717f23c48d71ec4446ce2e">ubh_get_addr</a> (ubh, begin + (block &gt;&gt; 3)) &amp; mask) == <a class="code" href="cifspdu_8h.html#a12b1ee8c5efcba4a2341cc1d49f58b71">mask</a>;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    }</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keywordflow">return</span> 0;   </div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;}</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div><div class="line"><a name="l00489"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a920583024884e3fb87a24f72d57f3ac3">  489</a></span>&#160;<span class="preprocessor">#define ubh_clrblock(ubh,begin,block) _ubh_clrblock_(uspi,ubh,begin,block)</span></div><div class="line"><a name="l00490"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a2542fe20c407249981805683c53e51ff">  490</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="ufs_2util_8h.html#a2542fe20c407249981805683c53e51ff">_ubh_clrblock_</a>(<span class="keyword">struct</span> <a class="code" href="structufs__sb__private__info.html">ufs_sb_private_info</a> * uspi,</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structufs__buffer__head.html">ufs_buffer_head</a> * ubh, <span class="keywordtype">unsigned</span> begin, <span class="keywordtype">unsigned</span> <a class="code" href="sysv_2super_8c.html#a6f5f3480b66f3cc414fd0d6dfcf54046">block</a>)</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;{</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keywordflow">switch</span> (uspi-&gt;<a class="code" href="structufs__sb__private__info.html#a3b58769381e73c3a5b14ba772f1c689f">s_fpb</a>) {</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordflow">case</span> 8:</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            *<a class="code" href="ufs_2util_8h.html#a51208b25d4717f23c48d71ec4446ce2e">ubh_get_addr</a> (ubh, begin + block) = 0x00;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            <span class="keywordflow">return</span>; </div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keywordflow">case</span> 4:</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        *<a class="code" href="ufs_2util_8h.html#a51208b25d4717f23c48d71ec4446ce2e">ubh_get_addr</a> (ubh, begin + (block &gt;&gt; 1)) &amp;= ~(0x0f &lt;&lt; ((block &amp; 0x01) &lt;&lt; 2));</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keywordflow">case</span> 2:</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        *<a class="code" href="ufs_2util_8h.html#a51208b25d4717f23c48d71ec4446ce2e">ubh_get_addr</a> (ubh, begin + (block &gt;&gt; 2)) &amp;= ~(0x03 &lt;&lt; ((block &amp; 0x03) &lt;&lt; 1));</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="keywordflow">case</span> 1:</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        *<a class="code" href="ufs_2util_8h.html#a51208b25d4717f23c48d71ec4446ce2e">ubh_get_addr</a> (ubh, begin + (block &gt;&gt; 3)) &amp;= ~(0x01 &lt;&lt; ((block &amp; 0x07)));</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    }</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;}</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div><div class="line"><a name="l00509"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a992a1829b9dff842a0e8728e8ac6507b">  509</a></span>&#160;<span class="preprocessor">#define ubh_setblock(ubh,begin,block) _ubh_setblock_(uspi,ubh,begin,block)</span></div><div class="line"><a name="l00510"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#ae0bf4861e0b5ebacea0569820193521a">  510</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="ufs_2util_8h.html#ae0bf4861e0b5ebacea0569820193521a">_ubh_setblock_</a>(<span class="keyword">struct</span> <a class="code" href="structufs__sb__private__info.html">ufs_sb_private_info</a> * uspi,</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structufs__buffer__head.html">ufs_buffer_head</a> * ubh, <span class="keywordtype">unsigned</span> begin, <span class="keywordtype">unsigned</span> <a class="code" href="sysv_2super_8c.html#a6f5f3480b66f3cc414fd0d6dfcf54046">block</a>)</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;{</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="keywordflow">switch</span> (uspi-&gt;<a class="code" href="structufs__sb__private__info.html#a3b58769381e73c3a5b14ba772f1c689f">s_fpb</a>) {</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keywordflow">case</span> 8:</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            *<a class="code" href="ufs_2util_8h.html#a51208b25d4717f23c48d71ec4446ce2e">ubh_get_addr</a>(ubh, begin + block) = 0xff;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="keywordflow">case</span> 4:</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        *<a class="code" href="ufs_2util_8h.html#a51208b25d4717f23c48d71ec4446ce2e">ubh_get_addr</a>(ubh, begin + (block &gt;&gt; 1)) |= (0x0f &lt;&lt; ((block &amp; 0x01) &lt;&lt; 2));</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keywordflow">case</span> 2:</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        *<a class="code" href="ufs_2util_8h.html#a51208b25d4717f23c48d71ec4446ce2e">ubh_get_addr</a>(ubh, begin + (block &gt;&gt; 2)) |= (0x03 &lt;&lt; ((block &amp; 0x03) &lt;&lt; 1));</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="keywordflow">case</span> 1:</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        *<a class="code" href="ufs_2util_8h.html#a51208b25d4717f23c48d71ec4446ce2e">ubh_get_addr</a>(ubh, begin + (block &gt;&gt; 3)) |= (0x01 &lt;&lt; ((block &amp; 0x07)));</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    }</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;}</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div><div class="line"><a name="l00529"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a1d38ac49c91582906f8ae25bc9135f48">  529</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="ufs_2util_8h.html#a1d38ac49c91582906f8ae25bc9135f48">ufs_fragacct</a> (<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> * <a class="code" href="ntfs_2debug_8h.html#a65b1b0602e37268ec9bc2c240a676c39">sb</a>, <span class="keywordtype">unsigned</span> blockmap,</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <a class="code" href="vxfs_8h.html#ab97cbd5e70d7575725483965767262c8">__fs32</a> * fraglist, <span class="keywordtype">int</span> cnt)</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;{</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keyword">struct </span><a class="code" href="structufs__sb__private__info.html">ufs_sb_private_info</a> * uspi;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <span class="keywordtype">unsigned</span> fragsize, pos;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    </div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    uspi = <a class="code" href="ufs_8h.html#abeb63dc517629bd2f7833215c463946e">UFS_SB</a>(sb)-&gt;<a class="code" href="structufs__sb__info.html#a3acb25b492392d9700f437dda8edafc2">s_uspi</a>;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    </div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    fragsize = 0;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordflow">for</span> (pos = 0; pos &lt; uspi-&gt;<a class="code" href="structufs__sb__private__info.html#a3b58769381e73c3a5b14ba772f1c689f">s_fpb</a>; pos++) {</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <span class="keywordflow">if</span> (blockmap &amp; (1 &lt;&lt; pos)) {</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;            fragsize++;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        }</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fragsize &gt; 0) {</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            <a class="code" href="sysv_8h.html#aa12492d428066ff04beb3b068ddae54d">fs32_add</a>(sb, &amp;fraglist[fragsize], cnt);</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;            fragsize = 0;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        }</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    }</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="keywordflow">if</span> (fragsize &gt; 0 &amp;&amp; fragsize &lt; uspi-&gt;<a class="code" href="structufs__sb__private__info.html#a3b58769381e73c3a5b14ba772f1c689f">s_fpb</a>)</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <a class="code" href="sysv_8h.html#aa12492d428066ff04beb3b068ddae54d">fs32_add</a>(sb, &amp;fraglist[fragsize], cnt);</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;}</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div><div class="line"><a name="l00551"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#acf70572ce2bb3f382a07d13f11af3ab9">  551</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> *<a class="code" href="ufs_2util_8h.html#acf70572ce2bb3f382a07d13f11af3ab9">ufs_get_direct_data_ptr</a>(<span class="keyword">struct</span> <a class="code" href="structufs__sb__private__info.html">ufs_sb_private_info</a> *uspi,</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                        <span class="keyword">struct</span> <a class="code" href="structufs__inode__info.html">ufs_inode_info</a> *ufsi,</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                        <span class="keywordtype">unsigned</span> blk)</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;{</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    BUG_ON(blk &gt; <a class="code" href="ufs__fs_8h.html#ab0de3bd93f9e1c4609bbb416f109655e">UFS_TIND_BLOCK</a>);</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="keywordflow">return</span> uspi-&gt;<a class="code" href="structufs__sb__private__info.html#a2c539ff343eeda464cf807e9d1630121">fs_magic</a> == <a class="code" href="ufs__fs_8h.html#a4e9c3a91c1d68aeb1e4c2ebc98522d2c">UFS2_MAGIC</a> ?</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        (<span class="keywordtype">void</span> *)&amp;ufsi-&gt;<a class="code" href="structufs__inode__info.html#a72197a78b9a9a330e3dfd78061bd984c">i_u1</a>.<a class="code" href="structufs__inode__info.html#afca68f2a9b908068ecfb75bde38779d7">u2_i_data</a>[blk] :</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        (<span class="keywordtype">void</span> *)&amp;ufsi-&gt;<a class="code" href="structufs__inode__info.html#a72197a78b9a9a330e3dfd78061bd984c">i_u1</a>.<a class="code" href="structufs__inode__info.html#af9d16e95046bac9a3a1dc053ca9d170f">i_data</a>[blk];</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;}</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div><div class="line"><a name="l00561"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#acc0d90edb524b152c123b0392d9aff85">  561</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> u64 <a class="code" href="ufs_2util_8h.html#acc0d90edb524b152c123b0392d9aff85">ufs_data_ptr_to_cpu</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *<a class="code" href="ntfs_2debug_8h.html#a65b1b0602e37268ec9bc2c240a676c39">sb</a>, <span class="keywordtype">void</span> *p)</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;{</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="ufs_8h.html#abeb63dc517629bd2f7833215c463946e">UFS_SB</a>(sb)-&gt;<a class="code" href="structufs__sb__info.html#a3acb25b492392d9700f437dda8edafc2">s_uspi</a>-&gt;<a class="code" href="structufs__sb__private__info.html#a2c539ff343eeda464cf807e9d1630121">fs_magic</a> == <a class="code" href="ufs__fs_8h.html#a4e9c3a91c1d68aeb1e4c2ebc98522d2c">UFS2_MAGIC</a> ?</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <a class="code" href="befs_2endian_8h.html#a4e097a2d44726a7d174f21d830a2d693">fs64_to_cpu</a>(sb, *(<a class="code" href="vxfs_8h.html#a5b8093831df5a3cca747f86b41c5392b">__fs64</a> *)p) :</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <a class="code" href="befs_2endian_8h.html#ae07ba9050b95e781e7d8925d1cab379a">fs32_to_cpu</a>(sb, *(<a class="code" href="vxfs_8h.html#ab97cbd5e70d7575725483965767262c8">__fs32</a> *)p);</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;}</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;</div><div class="line"><a name="l00568"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a3ba21c4533b34fe37e15934aa7d042d4">  568</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="ufs_2util_8h.html#a3ba21c4533b34fe37e15934aa7d042d4">ufs_cpu_to_data_ptr</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *<a class="code" href="ntfs_2debug_8h.html#a65b1b0602e37268ec9bc2c240a676c39">sb</a>, <span class="keywordtype">void</span> *p, u64 val)</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;{</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ufs_8h.html#abeb63dc517629bd2f7833215c463946e">UFS_SB</a>(sb)-&gt;s_uspi-&gt;fs_magic == <a class="code" href="ufs__fs_8h.html#a4e9c3a91c1d68aeb1e4c2ebc98522d2c">UFS2_MAGIC</a>)</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        *(<a class="code" href="vxfs_8h.html#a5b8093831df5a3cca747f86b41c5392b">__fs64</a> *)p = <a class="code" href="befs_2endian_8h.html#aa78895521c3339d2a04c356a35a87ddd">cpu_to_fs64</a>(sb, val);</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        *(<a class="code" href="vxfs_8h.html#ab97cbd5e70d7575725483965767262c8">__fs32</a> *)p = <a class="code" href="befs_2endian_8h.html#a3c45c2c14dbfede22ed2dc98eae7276f">cpu_to_fs32</a>(sb, val);</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;}</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div><div class="line"><a name="l00576"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a5f4fe1e4d009226f14c9b5725d2b8cb5">  576</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="ufs_2util_8h.html#a5f4fe1e4d009226f14c9b5725d2b8cb5">ufs_data_ptr_clear</a>(<span class="keyword">struct</span> <a class="code" href="structufs__sb__private__info.html">ufs_sb_private_info</a> *uspi,</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                      <span class="keywordtype">void</span> *p)</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;{</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="keywordflow">if</span> (uspi-&gt;<a class="code" href="structufs__sb__private__info.html#a2c539ff343eeda464cf807e9d1630121">fs_magic</a> == <a class="code" href="ufs__fs_8h.html#a4e9c3a91c1d68aeb1e4c2ebc98522d2c">UFS2_MAGIC</a>)</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        *(<a class="code" href="vxfs_8h.html#a5b8093831df5a3cca747f86b41c5392b">__fs64</a> *)p = 0;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        *(<a class="code" href="vxfs_8h.html#ab97cbd5e70d7575725483965767262c8">__fs32</a> *)p = 0;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;}</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div><div class="line"><a name="l00585"></a><span class="lineno"><a class="line" href="ufs_2util_8h.html#a0ee543a87af2dfc46d882b28ef52011f">  585</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="ufs_2util_8h.html#a0ee543a87af2dfc46d882b28ef52011f">ufs_is_data_ptr_zero</a>(<span class="keyword">struct</span> <a class="code" href="structufs__sb__private__info.html">ufs_sb_private_info</a> *uspi,</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                       <span class="keywordtype">void</span> *p)</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;{</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="keywordflow">if</span> (uspi-&gt;<a class="code" href="structufs__sb__private__info.html#a2c539ff343eeda464cf807e9d1630121">fs_magic</a> == <a class="code" href="ufs__fs_8h.html#a4e9c3a91c1d68aeb1e4c2ebc98522d2c">UFS2_MAGIC</a>)</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <span class="keywordflow">return</span> *(<a class="code" href="vxfs_8h.html#a5b8093831df5a3cca747f86b41c5392b">__fs64</a> *)p == 0;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <span class="keywordflow">return</span> *(<a class="code" href="vxfs_8h.html#ab97cbd5e70d7575725483965767262c8">__fs32</a> *)p == 0;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;}</div><div class="ttc" id="ufs_2util_8h_html_ae09d3cdad984a6e41d17ca719f07fc4d"><div class="ttname"><a href="ufs_2util_8h.html#ae09d3cdad984a6e41d17ca719f07fc4d">ubh_get_addr64</a></div><div class="ttdeci">#define ubh_get_addr64(ubh, begin)</div><div class="ttdef"><b>Definition:</b> util.h:335</div></div>
<div class="ttc" id="cifspdu_8h_html_a12b1ee8c5efcba4a2341cc1d49f58b71"><div class="ttname"><a href="cifspdu_8h.html#a12b1ee8c5efcba4a2341cc1d49f58b71">mask</a></div><div class="ttdeci">__u32 mask</div><div class="ttdef"><b>Definition:</b> cifspdu.h:458</div></div>
<div class="ttc" id="ufs__fs_8h_html_a30ed00df50f976ba1c9abd3f4e9f3705"><div class="ttname"><a href="ufs__fs_8h.html#a30ed00df50f976ba1c9abd3f4e9f3705">UFS_UID_44BSD</a></div><div class="ttdeci">#define UFS_UID_44BSD</div><div class="ttdef"><b>Definition:</b> ufs_fs.h:165</div></div>
<div class="ttc" id="ufs_2util_8h_html_a2089a171c4fe3f852ede23da6ae7be47"><div class="ttname"><a href="ufs_2util_8h.html#a2089a171c4fe3f852ede23da6ae7be47">ufs_get_fs_qfmask</a></div><div class="ttdeci">static u64 ufs_get_fs_qfmask(struct super_block *sb, struct ufs_super_block_third *usb3)</div><div class="ttdef"><b>Definition:</b> util.h:114</div></div>
<div class="ttc" id="ufs__fs_8h_html_a6f1474b84eaf0f452bafd27ec230bd07"><div class="ttname"><a href="ufs__fs_8h.html#a6f1474b84eaf0f452bafd27ec230bd07">UFS_UID_MASK</a></div><div class="ttdeci">#define UFS_UID_MASK</div><div class="ttdef"><b>Definition:</b> ufs_fs.h:163</div></div>
<div class="ttc" id="ufs_8h_html_abeb63dc517629bd2f7833215c463946e"><div class="ttname"><a href="ufs_8h.html#abeb63dc517629bd2f7833215c463946e">UFS_SB</a></div><div class="ttdeci">static struct ufs_sb_info * UFS_SB(struct super_block *sb)</div><div class="ttdef"><b>Definition:</b> ufs.h:140</div></div>
<div class="ttc" id="ufs_2util_8h_html_a0b08ccf1101e199b415a0db5b5864434"><div class="ttname"><a href="ufs_2util_8h.html#a0b08ccf1101e199b415a0db5b5864434">_ubh_find_next_zero_bit_</a></div><div class="ttdeci">static unsigned _ubh_find_next_zero_bit_(struct ufs_sb_private_info *uspi, struct ufs_buffer_head *ubh, unsigned begin, unsigned size, unsigned offset)</div><div class="ttdef"><b>Definition:</b> util.h:393</div></div>
<div class="ttc" id="structufs__buffer__head_html"><div class="ttname"><a href="structufs__buffer__head.html">ufs_buffer_head</a></div><div class="ttdef"><b>Definition:</b> ufs_fs.h:702</div></div>
<div class="ttc" id="ufs_2util_8h_html_a5b7d8cb99f41318776466aff5fd2be22"><div class="ttname"><a href="ufs_2util_8h.html#a5b7d8cb99f41318776466aff5fd2be22">_ubh_bread_</a></div><div class="ttdeci">struct ufs_buffer_head * _ubh_bread_(struct ufs_sb_private_info *, struct super_block *, u64, u64)</div><div class="ttdef"><b>Definition:</b> util.c:19</div></div>
<div class="ttc" id="ufs_2util_8h_html_adb38a7be9956e3bc0d81590633963d6e"><div class="ttname"><a href="ufs_2util_8h.html#adb38a7be9956e3bc0d81590633963d6e">ufs_get_fs_state</a></div><div class="ttdeci">static s32 ufs_get_fs_state(struct super_block *sb, struct ufs_super_block_first *usb1, struct ufs_super_block_third *usb3)</div><div class="ttdef"><b>Definition:</b> util.h:38</div></div>
<div class="ttc" id="structufs__sb__private__info_html_a3b58769381e73c3a5b14ba772f1c689f"><div class="ttname"><a href="structufs__sb__private__info.html#a3b58769381e73c3a5b14ba772f1c689f">ufs_sb_private_info::s_fpb</a></div><div class="ttdeci">__u32 s_fpb</div><div class="ttdef"><b>Definition:</b> ufs_fs.h:742</div></div>
<div class="ttc" id="structufs__sb__private__info_html_a8803792ad26bf565eb3869e230ce15fc"><div class="ttname"><a href="structufs__sb__private__info.html#a8803792ad26bf565eb3869e230ce15fc">ufs_sb_private_info::s_bpfshift</a></div><div class="ttdeci">__u32 s_bpfshift</div><div class="ttdef"><b>Definition:</b> ufs_fs.h:789</div></div>
<div class="ttc" id="structufs__super__block__third_html_aefc939a11584841b9b34acdc7728a1e4"><div class="ttname"><a href="structufs__super__block__third.html#aefc939a11584841b9b34acdc7728a1e4">ufs_super_block_third::fs_44</a></div><div class="ttdeci">struct ufs_super_block_third::@609::@614 fs_44</div></div>
<div class="ttc" id="ufs_2util_8h_html_a25a6704c62c033a15d859f666a21a63e"><div class="ttname"><a href="ufs_2util_8h.html#a25a6704c62c033a15d859f666a21a63e">ufs_get_fs_npsect</a></div><div class="ttdeci">static u32 ufs_get_fs_npsect(struct super_block *sb, struct ufs_super_block_first *usb1, struct ufs_super_block_third *usb3)</div><div class="ttdef"><b>Definition:</b> util.h:80</div></div>
<div class="ttc" id="befs_2endian_8h_html_aaa8c79959db5e2ef0095b801e89a0416"><div class="ttname"><a href="befs_2endian_8h.html#aaa8c79959db5e2ef0095b801e89a0416">fs16_to_cpu</a></div><div class="ttdeci">static u16 fs16_to_cpu(const struct super_block *sb, fs16 n)</div><div class="ttdef"><b>Definition:</b> endian.h:52</div></div>
<div class="ttc" id="ufs_2util_8h_html_a4764800956914ac7ba0c78ff27c9149f"><div class="ttname"><a href="ufs_2util_8h.html#a4764800956914ac7ba0c78ff27c9149f">ubh_brelse</a></div><div class="ttdeci">void ubh_brelse(struct ufs_buffer_head *)</div><div class="ttdef"><b>Definition:</b> util.c:72</div></div>
<div class="ttc" id="ufs_2util_8h_html_ac742e9eae43657deaa08afafdda5291d"><div class="ttname"><a href="ufs_2util_8h.html#ac742e9eae43657deaa08afafdda5291d">ubh_bread_uspi</a></div><div class="ttdeci">struct ufs_buffer_head * ubh_bread_uspi(struct ufs_sb_private_info *, struct super_block *, u64, u64)</div><div class="ttdef"><b>Definition:</b> util.c:48</div></div>
<div class="ttc" id="structufs__cg__private__info_html_ae0ed4eccb496c948e329a38eed8b12fd"><div class="ttname"><a href="structufs__cg__private__info.html#ae0ed4eccb496c948e329a38eed8b12fd">ufs_cg_private_info::c_ubh</a></div><div class="ttdeci">struct ufs_buffer_head c_ubh</div><div class="ttdef"><b>Definition:</b> ufs_fs.h:709</div></div>
<div class="ttc" id="ufs_2util_8h_html_abe69f232d2ab4a452c277d278597cb34"><div class="ttname"><a href="ufs_2util_8h.html#abe69f232d2ab4a452c277d278597cb34">ubh_bforget</a></div><div class="ttdeci">void ubh_bforget(struct ufs_buffer_head *)</div><div class="ttdef"><b>Definition:</b> util.c:129</div></div>
<div class="ttc" id="ufs__fs_8h_html_ab0de3bd93f9e1c4609bbb416f109655e"><div class="ttname"><a href="ufs__fs_8h.html#ab0de3bd93f9e1c4609bbb416f109655e">UFS_TIND_BLOCK</a></div><div class="ttdeci">#define UFS_TIND_BLOCK</div><div class="ttdef"><b>Definition:</b> ufs_fs.h:132</div></div>
<div class="ttc" id="vxfs_8h_html_a5b8093831df5a3cca747f86b41c5392b"><div class="ttname"><a href="vxfs_8h.html#a5b8093831df5a3cca747f86b41c5392b">__fs64</a></div><div class="ttdeci">__u64 __bitwise __fs64</div><div class="ttdef"><b>Definition:</b> vxfs.h:64</div></div>
<div class="ttc" id="structsuper__block_html"><div class="ttname"><a href="structsuper__block.html">super_block</a></div><div class="ttdef"><b>Definition:</b> ubifs.h:968</div></div>
<div class="ttc" id="ufs_2util_8h_html_a7a51302f5a4781f88396a0b1e9353b03"><div class="ttname"><a href="ufs_2util_8h.html#a7a51302f5a4781f88396a0b1e9353b03">ufs_get_fs_qbmask</a></div><div class="ttdeci">static u64 ufs_get_fs_qbmask(struct super_block *sb, struct ufs_super_block_third *usb3)</div><div class="ttdef"><b>Definition:</b> util.h:90</div></div>
<div class="ttc" id="structufs__super__block__third_html_afb98c9645ea98dcd0ab3f3a4b2af1711"><div class="ttname"><a href="structufs__super__block__third.html#afb98c9645ea98dcd0ab3f3a4b2af1711">ufs_super_block_third::fs_un2</a></div><div class="ttdeci">union ufs_super_block_third::@609 fs_un2</div></div>
<div class="ttc" id="ufs_2util_8h_html_a73e5f57b60b896639b277abe53c7fd9e"><div class="ttname"><a href="ufs_2util_8h.html#a73e5f57b60b896639b277abe53c7fd9e">USPI_UBH</a></div><div class="ttdeci">static struct ufs_buffer_head * USPI_UBH(struct ufs_sb_private_info *spi)</div><div class="ttdef"><b>Definition:</b> util.h:27</div></div>
<div class="ttc" id="structufs__super__block__third_html_a07e77f7dc5f3c2352f2e6b998c538135"><div class="ttname"><a href="structufs__super__block__third.html#a07e77f7dc5f3c2352f2e6b998c538135">ufs_super_block_third::fs_sunx86</a></div><div class="ttdeci">struct ufs_super_block_third::@609::@613 fs_sunx86</div></div>
<div class="ttc" id="ufs__fs_8h_html_ab212677180e80f928ba41d0562a5c0d5"><div class="ttname"><a href="ufs__fs_8h.html#ab212677180e80f928ba41d0562a5c0d5">UFS_DE_44BSD</a></div><div class="ttdeci">#define UFS_DE_44BSD</div><div class="ttdef"><b>Definition:</b> ufs_fs.h:161</div></div>
<div class="ttc" id="structufs__buffer__head_html_a79a6d8b2f0e4fccbedab85c0262ecaf2"><div class="ttname"><a href="structufs__buffer__head.html#a79a6d8b2f0e4fccbedab85c0262ecaf2">ufs_buffer_head::bh</a></div><div class="ttdeci">struct buffer_head * bh[UFS_MAXFRAG]</div><div class="ttdef"><b>Definition:</b> ufs_fs.h:705</div></div>
<div class="ttc" id="structufs__csum__core_html_ab028e5b65b8934470a83b335ced3d031"><div class="ttname"><a href="structufs__csum__core.html#ab028e5b65b8934470a83b335ced3d031">ufs_csum_core::cs_nffree</a></div><div class="ttdeci">__u64 cs_nffree</div><div class="ttdef"><b>Definition:</b> ufs_fs.h:323</div></div>
<div class="ttc" id="structufs__sb__private__info_html_a6598f4c370e0e7ceb1bdca86e8e4c9cd"><div class="ttname"><a href="structufs__sb__private__info.html#a6598f4c370e0e7ceb1bdca86e8e4c9cd">ufs_sb_private_info::s_bpf</a></div><div class="ttdeci">__u32 s_bpf</div><div class="ttdef"><b>Definition:</b> ufs_fs.h:788</div></div>
<div class="ttc" id="ufs_2util_8h_html_a8cf45a3cb4167ccf3661aea54e6e28a7"><div class="ttname"><a href="ufs_2util_8h.html#a8cf45a3cb4167ccf3661aea54e6e28a7">ufs_prepare_chunk</a></div><div class="ttdeci">int ufs_prepare_chunk(struct page *page, loff_t pos, unsigned len)</div><div class="ttdef"><b>Definition:</b> inode.c:480</div></div>
<div class="ttc" id="ufs_2util_8h_html_aabe8213b0e9c802b9bc821d5347067ea"><div class="ttname"><a href="ufs_2util_8h.html#aabe8213b0e9c802b9bc821d5347067ea">ubh_get_data_ptr</a></div><div class="ttdeci">static void * ubh_get_data_ptr(struct ufs_sb_private_info *uspi, struct ufs_buffer_head *ubh, u64 blk)</div><div class="ttdef"><b>Definition:</b> util.h:341</div></div>
<div class="ttc" id="structufs__sb__private__info_html"><div class="ttname"><a href="structufs__sb__private__info.html">ufs_sb_private_info</a></div><div class="ttdef"><b>Definition:</b> ufs_fs.h:728</div></div>
<div class="ttc" id="ctree_8h_html_a370d10a726e7596cd6c17d656fa8c8ad"><div class="ttname"><a href="ctree_8h.html#a370d10a726e7596cd6c17d656fa8c8ad">size</a></div><div class="ttdeci">__le32 size</div><div class="ttdef"><b>Definition:</b> ctree.h:107</div></div>
<div class="ttc" id="structufs__super__block__first_html_a6dac6f288eb9901cb324e6f2887ad92d"><div class="ttname"><a href="structufs__super__block__first.html#a6dac6f288eb9901cb324e6f2887ad92d">ufs_super_block_first::fs_u1</a></div><div class="ttdeci">union ufs_super_block_first::@600 fs_u1</div></div>
<div class="ttc" id="reiserfs_8h_html_a50db69d969858eaf7616d95432491eb1"><div class="ttname"><a href="reiserfs_8h.html#a50db69d969858eaf7616d95432491eb1">s_flags</a></div><div class="ttdeci">__le32 s_flags</div><div class="ttdef"><b>Definition:</b> reiserfs.h:907</div></div>
<div class="ttc" id="structufs__super__block__third_html"><div class="ttname"><a href="structufs__super__block__third.html">ufs_super_block_third</a></div><div class="ttdef"><b>Definition:</b> ufs_fs.h:908</div></div>
<div class="ttc" id="structufs__csum__core_html_af5293470e5a75fae801a0702135f53d0"><div class="ttname"><a href="structufs__csum__core.html#af5293470e5a75fae801a0702135f53d0">ufs_csum_core::cs_nbfree</a></div><div class="ttdeci">__u64 cs_nbfree</div><div class="ttdef"><b>Definition:</b> ufs_fs.h:321</div></div>
<div class="ttc" id="structufs__inode_html_a7a6e588c03788d1734a7294b9cc76efa"><div class="ttname"><a href="structufs__inode.html#a7a6e588c03788d1734a7294b9cc76efa">ufs_inode::ui_sun</a></div><div class="ttdeci">struct ufs_inode::@591::@594 ui_sun</div></div>
<div class="ttc" id="ufs_2util_8h_html_a1a9043b09da51ac77146eab5607fc49b"><div class="ttname"><a href="ufs_2util_8h.html#a1a9043b09da51ac77146eab5607fc49b">ubh_get_addr32</a></div><div class="ttdeci">#define ubh_get_addr32(ubh, begin)</div><div class="ttdef"><b>Definition:</b> util.h:331</div></div>
<div class="ttc" id="structufs__super__block__first_html"><div class="ttname"><a href="structufs__super__block__first.html">ufs_super_block_first</a></div><div class="ttdef"><b>Definition:</b> ufs_fs.h:806</div></div>
<div class="ttc" id="ufs_2util_8h_html_a968577291a5c472bf29d4726ba770006"><div class="ttname"><a href="ufs_2util_8h.html#a968577291a5c472bf29d4726ba770006">get_usb_offset</a></div><div class="ttdeci">static void * get_usb_offset(struct ufs_sb_private_info *uspi, unsigned int offset)</div><div class="ttdef"><b>Definition:</b> util.h:295</div></div>
<div class="ttc" id="structufs__dir__entry_html_a879d28f5cff3233d5bf220f1eab241fd"><div class="ttname"><a href="structufs__dir__entry.html#a879d28f5cff3233d5bf220f1eab241fd">ufs_dir_entry::d_u</a></div><div class="ttdeci">union ufs_dir_entry::@584 d_u</div></div>
<div class="ttc" id="ufs__fs_8h_html_af70ea0ec3bded695bc9a3d23eec34a72"><div class="ttname"><a href="ufs__fs_8h.html#af70ea0ec3bded695bc9a3d23eec34a72">ufs_blkstofrags</a></div><div class="ttdeci">#define ufs_blkstofrags(blks)</div><div class="ttdef"><b>Definition:</b> ufs_fs.h:263</div></div>
<div class="ttc" id="structufs__sb__private__info_html_a985a74e1d1d6acf4be770b3e9c5f1479"><div class="ttname"><a href="structufs__sb__private__info.html#a985a74e1d1d6acf4be770b3e9c5f1479">ufs_sb_private_info::s_fmask</a></div><div class="ttdeci">__u32 s_fmask</div><div class="ttdef"><b>Definition:</b> ufs_fs.h:745</div></div>
<div class="ttc" id="befs_2endian_8h_html_a4e097a2d44726a7d174f21d830a2d693"><div class="ttname"><a href="befs_2endian_8h.html#a4e097a2d44726a7d174f21d830a2d693">fs64_to_cpu</a></div><div class="ttdeci">static u64 fs64_to_cpu(const struct super_block *sb, fs64 n)</div><div class="ttdef"><b>Definition:</b> endian.h:16</div></div>
<div class="ttc" id="ufs_2util_8h_html_a890e8a217e010eebf7e8e4abfd1702b3"><div class="ttname"><a href="ufs_2util_8h.html#a890e8a217e010eebf7e8e4abfd1702b3">ufs_set_de_namlen</a></div><div class="ttdeci">static void ufs_set_de_namlen(struct super_block *sb, struct ufs_dir_entry *de, u16 value)</div><div class="ttdef"><b>Definition:</b> util.h:147</div></div>
<div class="ttc" id="ufs__fs_8h_html_abe35808274b6eab50ff2171c4e067874"><div class="ttname"><a href="ufs__fs_8h.html#abe35808274b6eab50ff2171c4e067874">UFS_ST_SUNx86</a></div><div class="ttdeci">#define UFS_ST_SUNx86</div><div class="ttdef"><b>Definition:</b> ufs_fs.h:173</div></div>
<div class="ttc" id="ufs__fs_8h_html_a92f838876feb94e65c52465eea4ae73e"><div class="ttname"><a href="ufs__fs_8h.html#a92f838876feb94e65c52465eea4ae73e">UFS_DE_OLD</a></div><div class="ttdeci">#define UFS_DE_OLD</div><div class="ttdef"><b>Definition:</b> ufs_fs.h:160</div></div>
<div class="ttc" id="structufs__super__block__third_html_a5cbbed34ad3d54b732bd95bf2ecfea90"><div class="ttname"><a href="structufs__super__block__third.html#a5cbbed34ad3d54b732bd95bf2ecfea90">ufs_super_block_third::fs_postblformat</a></div><div class="ttdeci">__fs32 fs_postblformat</div><div class="ttdef"><b>Definition:</b> ufs_fs.h:954</div></div>
<div class="ttc" id="ufs_2util_8h_html_a4903ccc8c070c631db844c56b699c75b"><div class="ttname"><a href="ufs_2util_8h.html#a4903ccc8c070c631db844c56b699c75b">ufs_put_locked_page</a></div><div class="ttdeci">static void ufs_put_locked_page(struct page *page)</div><div class="ttdef"><b>Definition:</b> util.h:284</div></div>
<div class="ttc" id="structufs__inode_html_a1691d9e92e3484496919a35bca232e8b"><div class="ttname"><a href="structufs__inode.html#a1691d9e92e3484496919a35bca232e8b">ufs_inode::ui_u3</a></div><div class="ttdeci">union ufs_inode::@591 ui_u3</div></div>
<div class="ttc" id="ufs_2util_8h_html_a5f4fe1e4d009226f14c9b5725d2b8cb5"><div class="ttname"><a href="ufs_2util_8h.html#a5f4fe1e4d009226f14c9b5725d2b8cb5">ufs_data_ptr_clear</a></div><div class="ttdeci">static void ufs_data_ptr_clear(struct ufs_sb_private_info *uspi, void *p)</div><div class="ttdef"><b>Definition:</b> util.h:576</div></div>
<div class="ttc" id="ufs_2util_8h_html_a53ae611805f3852752cab1d19d50e81d"><div class="ttname"><a href="ufs_2util_8h.html#a53ae611805f3852752cab1d19d50e81d">ubh_brelse_uspi</a></div><div class="ttdeci">void ubh_brelse_uspi(struct ufs_sb_private_info *)</div><div class="ttdef"><b>Definition:</b> util.c:82</div></div>
<div class="ttc" id="ufs_2util_8h_html_a53c2c06d2586358837b203e31705487f"><div class="ttname"><a href="ufs_2util_8h.html#a53c2c06d2586358837b203e31705487f">ufs_set_inode_uid</a></div><div class="ttdeci">static void ufs_set_inode_uid(struct super_block *sb, struct ufs_inode *inode, u32 value)</div><div class="ttdef"><b>Definition:</b> util.h:207</div></div>
<div class="ttc" id="structufs__super__block__third_html_ae73495098b5cd79314f7e31ccc934eb8"><div class="ttname"><a href="structufs__super__block__third.html#ae73495098b5cd79314f7e31ccc934eb8">ufs_super_block_third::fs_sun</a></div><div class="ttdeci">struct ufs_super_block_third::@609::@612 fs_sun</div></div>
<div class="ttc" id="structufs__inode__info_html_afca68f2a9b908068ecfb75bde38779d7"><div class="ttname"><a href="structufs__inode__info.html#afca68f2a9b908068ecfb75bde38779d7">ufs_inode_info::u2_i_data</a></div><div class="ttdeci">__fs64 u2_i_data[15]</div><div class="ttdef"><b>Definition:</b> ufs.h:39</div></div>
<div class="ttc" id="ufs_2util_8h_html_a0f34c1ff323a1107a93fdd0192283dbe"><div class="ttname"><a href="ufs_2util_8h.html#a0f34c1ff323a1107a93fdd0192283dbe">_ubh_isblockset_</a></div><div class="ttdeci">static int _ubh_isblockset_(struct ufs_sb_private_info *uspi, struct ufs_buffer_head *ubh, unsigned begin, unsigned block)</div><div class="ttdef"><b>Definition:</b> util.h:469</div></div>
<div class="ttc" id="ufs__fs_8h_html_a4e9c3a91c1d68aeb1e4c2ebc98522d2c"><div class="ttname"><a href="ufs__fs_8h.html#a4e9c3a91c1d68aeb1e4c2ebc98522d2c">UFS2_MAGIC</a></div><div class="ttdeci">#define UFS2_MAGIC</div><div class="ttdef"><b>Definition:</b> ufs_fs.h:54</div></div>
<div class="ttc" id="ufs__fs_8h_html_a70eba5da1f466bd142ca680ca03ee122"><div class="ttname"><a href="ufs__fs_8h.html#a70eba5da1f466bd142ca680ca03ee122">UFS_42POSTBLFMT</a></div><div class="ttdeci">#define UFS_42POSTBLFMT</div><div class="ttdef"><b>Definition:</b> ufs_fs.h:507</div></div>
<div class="ttc" id="ufs_2util_8h_html_a68db33ce780b72958a142eefa2f2621e"><div class="ttname"><a href="ufs_2util_8h.html#a68db33ce780b72958a142eefa2f2621e">ufs_set_inode_gid</a></div><div class="ttdeci">static void ufs_set_inode_gid(struct super_block *sb, struct ufs_inode *inode, u32 value)</div><div class="ttdef"><b>Definition:</b> util.h:241</div></div>
<div class="ttc" id="ufs_2util_8h_html_acc0d90edb524b152c123b0392d9aff85"><div class="ttname"><a href="ufs_2util_8h.html#acc0d90edb524b152c123b0392d9aff85">ufs_data_ptr_to_cpu</a></div><div class="ttdeci">static u64 ufs_data_ptr_to_cpu(struct super_block *sb, void *p)</div><div class="ttdef"><b>Definition:</b> util.h:561</div></div>
<div class="ttc" id="ufs_2util_8h_html_a1d38ac49c91582906f8ae25bc9135f48"><div class="ttname"><a href="ufs_2util_8h.html#a1d38ac49c91582906f8ae25bc9135f48">ufs_fragacct</a></div><div class="ttdeci">static void ufs_fragacct(struct super_block *sb, unsigned blockmap, __fs32 *fraglist, int cnt)</div><div class="ttdef"><b>Definition:</b> util.h:529</div></div>
<div class="ttc" id="ufs_2util_8h_html_ae903f016308b1d7aee5e9481f34043fb"><div class="ttname"><a href="ufs_2util_8h.html#ae903f016308b1d7aee5e9481f34043fb">UCPI_UBH</a></div><div class="ttdeci">static struct ufs_buffer_head * UCPI_UBH(struct ufs_cg_private_info *cpi)</div><div class="ttdef"><b>Definition:</b> util.h:23</div></div>
<div class="ttc" id="ufs__fs_8h_html_a13c230fc890cc6d0a856b3265d3dfc30"><div class="ttname"><a href="ufs__fs_8h.html#a13c230fc890cc6d0a856b3265d3dfc30">UFS_ST_SUNOS</a></div><div class="ttdeci">#define UFS_ST_SUNOS</div><div class="ttdef"><b>Definition:</b> ufs_fs.h:172</div></div>
<div class="ttc" id="sysv_8h_html_aa12492d428066ff04beb3b068ddae54d"><div class="ttname"><a href="sysv_8h.html#aa12492d428066ff04beb3b068ddae54d">fs32_add</a></div><div class="ttdeci">static __fs32 fs32_add(struct sysv_sb_info *sbi, __fs32 *n, int d)</div><div class="ttdef"><b>Definition:</b> sysv.h:211</div></div>
<div class="ttc" id="structufs__cg__private__info_html"><div class="ttname"><a href="structufs__cg__private__info.html">ufs_cg_private_info</a></div><div class="ttdef"><b>Definition:</b> ufs_fs.h:708</div></div>
<div class="ttc" id="ufs_2util_8h_html_af881dc6a624951cb6ef086e0b9cbd037"><div class="ttname"><a href="ufs_2util_8h.html#af881dc6a624951cb6ef086e0b9cbd037">_ubh_ubhcpymem_</a></div><div class="ttdeci">void _ubh_ubhcpymem_(struct ufs_sb_private_info *, unsigned char *, struct ufs_buffer_head *, unsigned)</div><div class="ttdef"><b>Definition:</b> util.c:149</div></div>
<div class="ttc" id="summary_8h_html_a63c41f9614ee9a4e1beb75eabad72f22"><div class="ttname"><a href="summary_8h.html#a63c41f9614ee9a4e1beb75eabad72f22">inode</a></div><div class="ttdeci">jint32_t inode</div><div class="ttdef"><b>Definition:</b> summary.h:848</div></div>
<div class="ttc" id="ufs_2util_8h_html_a7d62193bde70e8c8b9e8509fd3f8bf9a"><div class="ttname"><a href="ufs_2util_8h.html#a7d62193bde70e8c8b9e8509fd3f8bf9a">find_last_zero_bit</a></div><div class="ttdeci">static unsigned find_last_zero_bit(unsigned char *bitmap, unsigned size, unsigned offset)</div><div class="ttdef"><b>Definition:</b> util.h:416</div></div>
<div class="ttc" id="structufs__inode_html_a54a150031edfbdf655031bac109277bc"><div class="ttname"><a href="structufs__inode.html#a54a150031edfbdf655031bac109277bc">ufs_inode::oldids</a></div><div class="ttdeci">struct ufs_inode::@589::@592 oldids</div></div>
<div class="ttc" id="ufs_2util_8h_html_afedded0cf13a36acbb4e42d748eba8fe"><div class="ttname"><a href="ufs_2util_8h.html#afedded0cf13a36acbb4e42d748eba8fe">ufs_freefrags</a></div><div class="ttdeci">static u64 ufs_freefrags(struct ufs_sb_private_info *uspi)</div><div class="ttdef"><b>Definition:</b> util.h:355</div></div>
<div class="ttc" id="cifssmb_8c_html_a750b5d744c39a06bfb13e6eb010e35d0"><div class="ttname"><a href="cifssmb_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a></div><div class="ttdeci">int index</div><div class="ttdef"><b>Definition:</b> cifssmb.c:63</div></div>
<div class="ttc" id="structufs__inode__info_html"><div class="ttname"><a href="structufs__inode__info.html">ufs_inode_info</a></div><div class="ttdef"><b>Definition:</b> ufs.h:35</div></div>
<div class="ttc" id="structufs__sb__private__info_html_acfe643cf1a9f3c0f82cb3f2b8c26df3a"><div class="ttname"><a href="structufs__sb__private__info.html#acfe643cf1a9f3c0f82cb3f2b8c26df3a">ufs_sb_private_info::cs_total</a></div><div class="ttdeci">struct ufs_csum_core cs_total</div><div class="ttdef"><b>Definition:</b> ufs_fs.h:730</div></div>
<div class="ttc" id="befs_2endian_8h_html_a3c45c2c14dbfede22ed2dc98eae7276f"><div class="ttname"><a href="befs_2endian_8h.html#a3c45c2c14dbfede22ed2dc98eae7276f">cpu_to_fs32</a></div><div class="ttdeci">static fs32 cpu_to_fs32(const struct super_block *sb, u32 n)</div><div class="ttdef"><b>Definition:</b> endian.h:43</div></div>
<div class="ttc" id="structufs__super__block__first_html_a6c23cec090e02130968e1996e6b5877c"><div class="ttname"><a href="structufs__super__block__first.html#a6c23cec090e02130968e1996e6b5877c">ufs_super_block_first::fs_u0</a></div><div class="ttdeci">union ufs_super_block_first::@599 fs_u0</div></div>
<div class="ttc" id="structufs__sb__private__info_html_a2c539ff343eeda464cf807e9d1630121"><div class="ttname"><a href="structufs__sb__private__info.html#a2c539ff343eeda464cf807e9d1630121">ufs_sb_private_info::fs_magic</a></div><div class="ttdeci">__s32 fs_magic</div><div class="ttdef"><b>Definition:</b> ufs_fs.h:793</div></div>
<div class="ttc" id="ntfs_2debug_8h_html_a65b1b0602e37268ec9bc2c240a676c39"><div class="ttname"><a href="ntfs_2debug_8h.html#a65b1b0602e37268ec9bc2c240a676c39">sb</a></div><div class="ttdeci">const struct super_block * sb</div><div class="ttdef"><b>Definition:</b> debug.h:62</div></div>
<div class="ttc" id="ufs_2util_8h_html_a2542fe20c407249981805683c53e51ff"><div class="ttname"><a href="ufs_2util_8h.html#a2542fe20c407249981805683c53e51ff">_ubh_clrblock_</a></div><div class="ttdeci">static void _ubh_clrblock_(struct ufs_sb_private_info *uspi, struct ufs_buffer_head *ubh, unsigned begin, unsigned block)</div><div class="ttdef"><b>Definition:</b> util.h:490</div></div>
<div class="ttc" id="cifspdu_8h_html_a94f8d852c02921f3079f6987b4a5d7d0"><div class="ttname"><a href="cifspdu_8h.html#a94f8d852c02921f3079f6987b4a5d7d0">start</a></div><div class="ttdeci">__le64 start</div><div class="ttdef"><b>Definition:</b> cifspdu.h:460</div></div>
<div class="ttc" id="ufs_2util_8h_html_acf70572ce2bb3f382a07d13f11af3ab9"><div class="ttname"><a href="ufs_2util_8h.html#acf70572ce2bb3f382a07d13f11af3ab9">ufs_get_direct_data_ptr</a></div><div class="ttdeci">static void * ufs_get_direct_data_ptr(struct ufs_sb_private_info *uspi, struct ufs_inode_info *ufsi, unsigned blk)</div><div class="ttdef"><b>Definition:</b> util.h:551</div></div>
<div class="ttc" id="befs_2endian_8h_html_aa78895521c3339d2a04c356a35a87ddd"><div class="ttname"><a href="befs_2endian_8h.html#aa78895521c3339d2a04c356a35a87ddd">cpu_to_fs64</a></div><div class="ttdeci">static fs64 cpu_to_fs64(const struct super_block *sb, u64 n)</div><div class="ttdef"><b>Definition:</b> endian.h:25</div></div>
<div class="ttc" id="structufs__inode__info_html_af9d16e95046bac9a3a1dc053ca9d170f"><div class="ttname"><a href="structufs__inode__info.html#af9d16e95046bac9a3a1dc053ca9d170f">ufs_inode_info::i_data</a></div><div class="ttdeci">__fs32 i_data[15]</div><div class="ttdef"><b>Definition:</b> ufs.h:37</div></div>
<div class="ttc" id="ufs_2util_8h_html_a7e077bf8b9ad724c0cf2fa3c40de481d"><div class="ttname"><a href="ufs_2util_8h.html#a7e077bf8b9ad724c0cf2fa3c40de481d">_ubh_find_last_zero_bit_</a></div><div class="ttdeci">static unsigned _ubh_find_last_zero_bit_(struct ufs_sb_private_info *uspi, struct ufs_buffer_head *ubh, unsigned begin, unsigned start, unsigned end)</div><div class="ttdef"><b>Definition:</b> util.h:440</div></div>
<div class="ttc" id="ufs_2util_8h_html_ade5d18e3fa7cd71765c37e005a1adb31"><div class="ttname"><a href="ufs_2util_8h.html#ade5d18e3fa7cd71765c37e005a1adb31">ubh_buffer_dirty</a></div><div class="ttdeci">int ubh_buffer_dirty(struct ufs_buffer_head *)</div><div class="ttdef"><b>Definition:</b> util.c:138</div></div>
<div class="ttc" id="structufs__sb__info_html_a3acb25b492392d9700f437dda8edafc2"><div class="ttname"><a href="structufs__sb__info.html#a3acb25b492392d9700f437dda8edafc2">ufs_sb_info::s_uspi</a></div><div class="ttdeci">struct ufs_sb_private_info * s_uspi</div><div class="ttdef"><b>Definition:</b> ufs.h:19</div></div>
<div class="ttc" id="ufs_2util_8h_html_a9886ab44f8d9d497eade92f48f5a5ca4"><div class="ttname"><a href="ufs_2util_8h.html#a9886ab44f8d9d497eade92f48f5a5ca4">ubh_sync_block</a></div><div class="ttdeci">void ubh_sync_block(struct ufs_buffer_head *)</div><div class="ttdef"><b>Definition:</b> util.c:116</div></div>
<div class="ttc" id="exec_8c_html_a36dcaf63ad8fe9783c81b418943e2346"><div class="ttname"><a href="exec_8c.html#a36dcaf63ad8fe9783c81b418943e2346">count</a></div><div class="ttdeci">static int count(struct user_arg_ptr argv, int max)</div><div class="ttdef"><b>Definition:</b> exec.c:470</div></div>
<div class="ttc" id="structufs__sb__private__info_html_a8ff59f60a1dd4f01454b46590315a652"><div class="ttname"><a href="structufs__sb__private__info.html#a8ff59f60a1dd4f01454b46590315a652">ufs_sb_private_info::s_bpfmask</a></div><div class="ttdeci">__u32 s_bpfmask</div><div class="ttdef"><b>Definition:</b> ufs_fs.h:790</div></div>
<div class="ttc" id="ufs_2util_8h_html_a3ba21c4533b34fe37e15934aa7d042d4"><div class="ttname"><a href="ufs_2util_8h.html#a3ba21c4533b34fe37e15934aa7d042d4">ufs_cpu_to_data_ptr</a></div><div class="ttdeci">static void ufs_cpu_to_data_ptr(struct super_block *sb, void *p, u64 val)</div><div class="ttdef"><b>Definition:</b> util.h:568</div></div>
<div class="ttc" id="structufs__sb__private__info_html_a66da309a27cf894564dd735bb6c40417"><div class="ttname"><a href="structufs__sb__private__info.html#a66da309a27cf894564dd735bb6c40417">ufs_sb_private_info::s_ubh</a></div><div class="ttdeci">struct ufs_buffer_head s_ubh</div><div class="ttdef"><b>Definition:</b> ufs_fs.h:729</div></div>
<div class="ttc" id="ufs_2util_8h_html_a51208b25d4717f23c48d71ec4446ce2e"><div class="ttname"><a href="ufs_2util_8h.html#a51208b25d4717f23c48d71ec4446ce2e">ubh_get_addr</a></div><div class="ttdeci">#define ubh_get_addr</div><div class="ttdef"><b>Definition:</b> util.h:339</div></div>
<div class="ttc" id="sysv_2super_8c_html_a6f5f3480b66f3cc414fd0d6dfcf54046"><div class="ttname"><a href="sysv_2super_8c.html#a6f5f3480b66f3cc414fd0d6dfcf54046">block</a></div><div class="ttdeci">int block</div><div class="ttdef"><b>Definition:</b> super.c:273</div></div>
<div class="ttc" id="structufs__inode__info_html_a72197a78b9a9a330e3dfd78061bd984c"><div class="ttname"><a href="structufs__inode__info.html#a72197a78b9a9a330e3dfd78061bd984c">ufs_inode_info::i_u1</a></div><div class="ttdeci">union ufs_inode_info::@583 i_u1</div></div>
<div class="ttc" id="structufs__super__block__first_html_a42d176b8c8ff943bab60b179ced2a181"><div class="ttname"><a href="structufs__super__block__first.html#a42d176b8c8ff943bab60b179ced2a181">ufs_super_block_first::fs_sun</a></div><div class="ttdeci">struct ufs_super_block_first::@599::@602 fs_sun</div></div>
<div class="ttc" id="send_8h_html_ac6c61fc2d54b5e017432ab28daf5a7a9"><div class="ttname"><a href="send_8h.html#ac6c61fc2d54b5e017432ab28daf5a7a9">len</a></div><div class="ttdeci">__le32 len</div><div class="ttdef"><b>Definition:</b> send.h:4583</div></div>
<div class="ttc" id="ufs_2util_8h_html_a07b506a23b96c560c89be7d0eb5720f5"><div class="ttname"><a href="ufs_2util_8h.html#a07b506a23b96c560c89be7d0eb5720f5">ubh_mark_buffer_uptodate</a></div><div class="ttdeci">void ubh_mark_buffer_uptodate(struct ufs_buffer_head *, int)</div><div class="ttdef"><b>Definition:</b> util.c:102</div></div>
<div class="ttc" id="ufs_2util_8h_html_af3066e34394a75c2ee1602ac77dc9f27"><div class="ttname"><a href="ufs_2util_8h.html#af3066e34394a75c2ee1602ac77dc9f27">ufs_get_locked_page</a></div><div class="ttdeci">struct page * ufs_get_locked_page(struct address_space *mapping, pgoff_t index)</div><div class="ttdef"><b>Definition:</b> util.c:244</div></div>
<div class="ttc" id="ufs_2util_8h_html_ae0bf4861e0b5ebacea0569820193521a"><div class="ttname"><a href="ufs_2util_8h.html#ae0bf4861e0b5ebacea0569820193521a">_ubh_setblock_</a></div><div class="ttdeci">static void _ubh_setblock_(struct ufs_sb_private_info *uspi, struct ufs_buffer_head *ubh, unsigned begin, unsigned block)</div><div class="ttdef"><b>Definition:</b> util.h:510</div></div>
<div class="ttc" id="ufs__fs_8h_html_a987da573af8be6b625c75b855b806267"><div class="ttname"><a href="ufs__fs_8h.html#a987da573af8be6b625c75b855b806267">UFS_UID_EFT</a></div><div class="ttdeci">#define UFS_UID_EFT</div><div class="ttdef"><b>Definition:</b> ufs_fs.h:166</div></div>
<div class="ttc" id="ufs_2util_8h_html_a0e8a5960ff189fed813c5b2fd9198d77"><div class="ttname"><a href="ufs_2util_8h.html#a0e8a5960ff189fed813c5b2fd9198d77">ufs_set_de_type</a></div><div class="ttdeci">static void ufs_set_de_type(struct super_block *sb, struct ufs_dir_entry *de, int mode)</div><div class="ttdef"><b>Definition:</b> util.h:156</div></div>
<div class="ttc" id="ufs_2util_8h_html_af288d798df4bfbe1fc41eec1e47d4b25"><div class="ttname"><a href="ufs_2util_8h.html#af288d798df4bfbe1fc41eec1e47d4b25">ufs_get_inode_dev</a></div><div class="ttdeci">dev_t ufs_get_inode_dev(struct super_block *, struct ufs_inode_info *)</div><div class="ttdef"><b>Definition:</b> util.c:182</div></div>
<div class="ttc" id="ufs__fs_8h_html_a5bdb1f3ac3a964e6ccfc0d27049a88b3"><div class="ttname"><a href="ufs__fs_8h.html#a5bdb1f3ac3a964e6ccfc0d27049a88b3">UFS_DE_MASK</a></div><div class="ttdeci">#define UFS_DE_MASK</div><div class="ttdef"><b>Definition:</b> ufs_fs.h:159</div></div>
<div class="ttc" id="ufs_2util_8h_html_a60777ca13a8b08b579f280af1549a917"><div class="ttname"><a href="ufs_2util_8h.html#a60777ca13a8b08b579f280af1549a917">ufs_set_fs_state</a></div><div class="ttdeci">static void ufs_set_fs_state(struct super_block *sb, struct ufs_super_block_first *usb1, struct ufs_super_block_third *usb3, s32 value)</div><div class="ttdef"><b>Definition:</b> util.h:57</div></div>
<div class="ttc" id="ufs_2util_8h_html_a51092ff8276845745f0f8ac9d5b5a98a"><div class="ttname"><a href="ufs_2util_8h.html#a51092ff8276845745f0f8ac9d5b5a98a">ufs_set_inode_dev</a></div><div class="ttdeci">void ufs_set_inode_dev(struct super_block *, struct ufs_inode_info *, dev_t)</div><div class="ttdef"><b>Definition:</b> util.c:209</div></div>
<div class="ttc" id="befs_2endian_8h_html_ae07ba9050b95e781e7d8925d1cab379a"><div class="ttname"><a href="befs_2endian_8h.html#ae07ba9050b95e781e7d8925d1cab379a">fs32_to_cpu</a></div><div class="ttdeci">static u32 fs32_to_cpu(const struct super_block *sb, fs32 n)</div><div class="ttdef"><b>Definition:</b> endian.h:34</div></div>
<div class="ttc" id="structufs__super__block__first_html_a4cbca10a44efea41245bbc14e17592e0"><div class="ttname"><a href="structufs__super__block__first.html#a4cbca10a44efea41245bbc14e17592e0">ufs_super_block_first::fs_sunx86</a></div><div class="ttdeci">struct ufs_super_block_first::@600::@604 fs_sunx86</div></div>
<div class="ttc" id="structufs__dir__entry_html"><div class="ttname"><a href="structufs__dir__entry.html">ufs_dir_entry</a></div><div class="ttdef"><b>Definition:</b> ufs_fs.h:291</div></div>
<div class="ttc" id="befs_2endian_8h_html_a3220c033bf495e76bbdbec2253053825"><div class="ttname"><a href="befs_2endian_8h.html#a3220c033bf495e76bbdbec2253053825">cpu_to_fs16</a></div><div class="ttdeci">static fs16 cpu_to_fs16(const struct super_block *sb, u16 n)</div><div class="ttdef"><b>Definition:</b> endian.h:61</div></div>
<div class="ttc" id="structufs__sb__private__info_html_aee3193a911a948a0a438277c5f1525a6"><div class="ttname"><a href="structufs__sb__private__info.html#aee3193a911a948a0a438277c5f1525a6">ufs_sb_private_info::s_fshift</a></div><div class="ttdeci">__u32 s_fshift</div><div class="ttdef"><b>Definition:</b> ufs_fs.h:747</div></div>
<div class="ttc" id="ufs__fs_8h_html_a410e53db958cb0018ac32364041afd93"><div class="ttname"><a href="ufs__fs_8h.html#a410e53db958cb0018ac32364041afd93">UFS_ST_MASK</a></div><div class="ttdeci">#define UFS_ST_MASK</div><div class="ttdef"><b>Definition:</b> ufs_fs.h:168</div></div>
<div class="ttc" id="structufs__inode_html_a7822efb2d20ea51341eb24bf47b55160"><div class="ttname"><a href="structufs__inode.html#a7822efb2d20ea51341eb24bf47b55160">ufs_inode::ui_u1</a></div><div class="ttdeci">union ufs_inode::@589 ui_u1</div></div>
<div class="ttc" id="structufs__dir__entry_html_aabad90b50880cdaa626fcb0b38a0e3b6"><div class="ttname"><a href="structufs__dir__entry.html#aabad90b50880cdaa626fcb0b38a0e3b6">ufs_dir_entry::d_namlen</a></div><div class="ttdeci">__fs16 d_namlen</div><div class="ttdef"><b>Definition:</b> ufs_fs.h:295</div></div>
<div class="ttc" id="structufs__inode_html"><div class="ttname"><a href="structufs__inode.html">ufs_inode</a></div><div class="ttdef"><b>Definition:</b> ufs_fs.h:603</div></div>
<div class="ttc" id="vxfs_8h_html_ab97cbd5e70d7575725483965767262c8"><div class="ttname"><a href="vxfs_8h.html#ab97cbd5e70d7575725483965767262c8">__fs32</a></div><div class="ttdeci">__u32 __bitwise __fs32</div><div class="ttdef"><b>Definition:</b> vxfs.h:63</div></div>
<div class="ttc" id="ufs_2util_8h_html_a04e50c0da80d55ec8299f9be2c4ddc6e"><div class="ttname"><a href="ufs_2util_8h.html#a04e50c0da80d55ec8299f9be2c4ddc6e">ufs_get_inode_gid</a></div><div class="ttdeci">static u32 ufs_get_inode_gid(struct super_block *sb, struct ufs_inode *inode)</div><div class="ttdef"><b>Definition:</b> util.h:226</div></div>
<div class="ttc" id="ufs__fs_8h_html_a85d734b26960961790ce58caac31b26c"><div class="ttname"><a href="ufs__fs_8h.html#a85d734b26960961790ce58caac31b26c">UFS_ST_SUN</a></div><div class="ttdeci">#define UFS_ST_SUN</div><div class="ttdef"><b>Definition:</b> ufs_fs.h:171</div></div>
<div class="ttc" id="ufs_2util_8h_html_ae681a84a06a5a39de8c7f76277108e88"><div class="ttname"><a href="ufs_2util_8h.html#ae681a84a06a5a39de8c7f76277108e88">ufs_get_de_namlen</a></div><div class="ttdeci">static u16 ufs_get_de_namlen(struct super_block *sb, struct ufs_dir_entry *de)</div><div class="ttdef"><b>Definition:</b> util.h:138</div></div>
<div class="ttc" id="swab_8h_html"><div class="ttname"><a href="swab_8h.html">swab.h</a></div></div>
<div class="ttc" id="ufs_2util_8h_html_a0ee543a87af2dfc46d882b28ef52011f"><div class="ttname"><a href="ufs_2util_8h.html#a0ee543a87af2dfc46d882b28ef52011f">ufs_is_data_ptr_zero</a></div><div class="ttdeci">static int ufs_is_data_ptr_zero(struct ufs_sb_private_info *uspi, void *p)</div><div class="ttdef"><b>Definition:</b> util.h:585</div></div>
<div class="ttc" id="structufs__dir__entry_html_a1940bb43bfa3f5d66c3ec8009c173d52"><div class="ttname"><a href="structufs__dir__entry.html#a1940bb43bfa3f5d66c3ec8009c173d52">ufs_dir_entry::d_44</a></div><div class="ttdeci">struct ufs_dir_entry::@584::@585 d_44</div></div>
<div class="ttc" id="ufs_2util_8h_html_added0fce07e1d88dd7f2c414b3daaa66"><div class="ttname"><a href="ufs_2util_8h.html#added0fce07e1d88dd7f2c414b3daaa66">_ubh_memcpyubh_</a></div><div class="ttdeci">void _ubh_memcpyubh_(struct ufs_sb_private_info *, struct ufs_buffer_head *, unsigned char *, unsigned)</div><div class="ttdef"><b>Definition:</b> util.c:165</div></div>
<div class="ttc" id="ufs_2util_8h_html_aa24124b68a54cf70383fffe0b44018cc"><div class="ttname"><a href="ufs_2util_8h.html#aa24124b68a54cf70383fffe0b44018cc">ufs_get_inode_uid</a></div><div class="ttdeci">static u32 ufs_get_inode_uid(struct super_block *sb, struct ufs_inode *inode)</div><div class="ttdef"><b>Definition:</b> util.h:192</div></div>
<div class="ttc" id="ctree_8h_html_a3875b4f2ee8a9d27ac3b3b145f934f86"><div class="ttname"><a href="ctree_8h.html#a3875b4f2ee8a9d27ac3b3b145f934f86">offset</a></div><div class="ttdeci">__le32 offset</div><div class="ttdef"><b>Definition:</b> ctree.h:106</div></div>
<div class="ttc" id="structufs__inode_html_aee85cc4724605c1d4910a4cc6d9e7116"><div class="ttname"><a href="structufs__inode.html#aee85cc4724605c1d4910a4cc6d9e7116">ufs_inode::ui_44</a></div><div class="ttdeci">struct ufs_inode::@591::@595 ui_44</div></div>
<div class="ttc" id="ufs_2util_8h_html_a29a46db75fd999398c5dcd6332c4d545"><div class="ttname"><a href="ufs_2util_8h.html#a29a46db75fd999398c5dcd6332c4d545">ubh_mark_buffer_dirty</a></div><div class="ttdeci">void ubh_mark_buffer_dirty(struct ufs_buffer_head *)</div><div class="ttdef"><b>Definition:</b> util.c:93</div></div>
<div class="ttc" id="ufs__fs_8h_html_ac861af589ad9ed49d81a65790f874ffc"><div class="ttname"><a href="ufs__fs_8h.html#ac861af589ad9ed49d81a65790f874ffc">UFS_ST_44BSD</a></div><div class="ttdeci">#define UFS_ST_44BSD</div><div class="ttdef"><b>Definition:</b> ufs_fs.h:170</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_0fe68c8baeee5492f62a64d9e69eb546.html">ufs</a></li><li class="navelem"><a class="el" href="ufs_2util_8h.html">util.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>

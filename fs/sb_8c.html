<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>linux/fs: ubifs/sb.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">linux/fs
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('sb_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">sb.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="ubifs_8h_source.html">ubifs.h</a>&quot;</code><br />
<code>#include &lt;linux/slab.h&gt;</code><br />
<code>#include &lt;linux/math64.h&gt;</code><br />
<code>#include &lt;linux/uuid.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for sb.c:</div>
<div class="dyncontent">
<div class="center"><img src="sb_8c__incl.png" border="0" usemap="#ubifs_2sb_8c" alt=""/></div>
<map name="ubifs_2sb_8c" id="ubifs_2sb_8c">
<area shape="rect" id="node2" href="ubifs_8h.html" title="ubifs.h" alt="" coords="1160,80,1221,107"/>
<area shape="rect" id="node20" href="ubifs-media_8h.html" title="ubifs&#45;media.h" alt="" coords="2143,155,2243,181"/>
<area shape="rect" id="node21" href="ubifs_2debug_8h.html" title="debug.h" alt="" coords="2267,155,2335,181"/>
<area shape="rect" id="node22" href="misc_8h.html" title="misc.h" alt="" coords="2360,155,2421,181"/>
<area shape="rect" id="node23" href="key_8h.html" title="key.h" alt="" coords="2446,155,2501,181"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ab318c938d5aa20d1338765763c7e7ef1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sb_8c.html#ab318c938d5aa20d1338765763c7e7ef1">DEFAULT_JNL_PERCENT</a>&#160;&#160;&#160;5</td></tr>
<tr class="separator:ab318c938d5aa20d1338765763c7e7ef1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6705fabeacdfce5d8cf6734908f58104"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sb_8c.html#a6705fabeacdfce5d8cf6734908f58104">DEFAULT_MAX_JNL</a>&#160;&#160;&#160;(32*1024*1024)</td></tr>
<tr class="separator:a6705fabeacdfce5d8cf6734908f58104"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84a16fcf4e903c0d41efc9a7c8a4fa53"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sb_8c.html#a84a16fcf4e903c0d41efc9a7c8a4fa53">DEFAULT_FANOUT</a>&#160;&#160;&#160;8</td></tr>
<tr class="separator:a84a16fcf4e903c0d41efc9a7c8a4fa53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acccb90257c867f7e3d8f143b06d25a3a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sb_8c.html#acccb90257c867f7e3d8f143b06d25a3a">DEFAULT_JHEADS_CNT</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:acccb90257c867f7e3d8f143b06d25a3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77ab51433012065b412e07ec9a0224f0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sb_8c.html#a77ab51433012065b412e07ec9a0224f0">DEFAULT_IDX_LEB</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a77ab51433012065b412e07ec9a0224f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe45d651d5b02cf51311535d7be3428a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sb_8c.html#abe45d651d5b02cf51311535d7be3428a">DEFAULT_DATA_LEB</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:abe45d651d5b02cf51311535d7be3428a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1994b23b1c370e7a0ae075326115bf98"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sb_8c.html#a1994b23b1c370e7a0ae075326115bf98">DEFAULT_GC_LEB</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a1994b23b1c370e7a0ae075326115bf98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a093098dc84099b65da46a0ea56cf7e1b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sb_8c.html#a093098dc84099b65da46a0ea56cf7e1b">DEFAULT_LSAVE_CNT</a>&#160;&#160;&#160;256</td></tr>
<tr class="separator:a093098dc84099b65da46a0ea56cf7e1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e320b0a51096976800e65aa743a9fbd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sb_8c.html#a7e320b0a51096976800e65aa743a9fbd">DEFAULT_RP_PERCENT</a>&#160;&#160;&#160;5</td></tr>
<tr class="separator:a7e320b0a51096976800e65aa743a9fbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3666874f7f8e0e841ef095b824d1fad7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sb_8c.html#a3666874f7f8e0e841ef095b824d1fad7">DEFAULT_MAX_RP_SIZE</a>&#160;&#160;&#160;(5*1024*1024)</td></tr>
<tr class="separator:a3666874f7f8e0e841ef095b824d1fad7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99707af6a32c737198d8cf419413de7b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sb_8c.html#a99707af6a32c737198d8cf419413de7b">DEFAULT_TIME_GRAN</a>&#160;&#160;&#160;1000000000</td></tr>
<tr class="separator:a99707af6a32c737198d8cf419413de7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a040c1c48545e70934b5e832f59366339"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sb_8c.html#a040c1c48545e70934b5e832f59366339">create_default_filesystem</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:a040c1c48545e70934b5e832f59366339"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab18bf5d265fdb376ea8e8d8c0f77af4a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sb_8c.html#ab18bf5d265fdb376ea8e8d8c0f77af4a">validate_sb</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, struct <a class="el" href="structubifs__sb__node.html">ubifs_sb_node</a> *sup)</td></tr>
<tr class="separator:ab18bf5d265fdb376ea8e8d8c0f77af4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5aea8a0dedc50e5d3693a4961c3c494d"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structubifs__sb__node.html">ubifs_sb_node</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sb_8c.html#a5aea8a0dedc50e5d3693a4961c3c494d">ubifs_read_sb_node</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:a5aea8a0dedc50e5d3693a4961c3c494d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9695fcc75ffa07efff2111b02ebd89c3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sb_8c.html#a9695fcc75ffa07efff2111b02ebd89c3">ubifs_write_sb_node</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, struct <a class="el" href="structubifs__sb__node.html">ubifs_sb_node</a> *sup)</td></tr>
<tr class="separator:a9695fcc75ffa07efff2111b02ebd89c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92995d9363effd044b46c432911fd7c6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sb_8c.html#a92995d9363effd044b46c432911fd7c6">ubifs_read_superblock</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:a92995d9363effd044b46c432911fd7c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab008935d2aab585efbb16fe4de3f2fef"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sb_8c.html#ab008935d2aab585efbb16fe4de3f2fef">fixup_leb</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, int lnum, int <a class="el" href="rock_8h.html#aa1460ec7ef11d3c3a91c8ee9fb6380d5">len</a>)</td></tr>
<tr class="separator:ab008935d2aab585efbb16fe4de3f2fef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1a6d690124262b3f3c382e9596c6963"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sb_8c.html#aa1a6d690124262b3f3c382e9596c6963">fixup_free_space</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:aa1a6d690124262b3f3c382e9596c6963"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bacccbb99ed3d3f67a20cac2ac99990"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sb_8c.html#a7bacccbb99ed3d3f67a20cac2ac99990">ubifs_fixup_free_space</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:a7bacccbb99ed3d3f67a20cac2ac99990"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79b22b1f088c88c40e019e23efb61e0a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sb_8c.html#a79b22b1f088c88c40e019e23efb61e0a">ubifs_enable_encryption</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:a79b22b1f088c88c40e019e23efb61e0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="abe45d651d5b02cf51311535d7be3428a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe45d651d5b02cf51311535d7be3428a">&#9670;&nbsp;</a></span>DEFAULT_DATA_LEB</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_DATA_LEB&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a84a16fcf4e903c0d41efc9a7c8a4fa53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84a16fcf4e903c0d41efc9a7c8a4fa53">&#9670;&nbsp;</a></span>DEFAULT_FANOUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_FANOUT&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a1994b23b1c370e7a0ae075326115bf98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1994b23b1c370e7a0ae075326115bf98">&#9670;&nbsp;</a></span>DEFAULT_GC_LEB</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_GC_LEB&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a77ab51433012065b412e07ec9a0224f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77ab51433012065b412e07ec9a0224f0">&#9670;&nbsp;</a></span>DEFAULT_IDX_LEB</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_IDX_LEB&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="acccb90257c867f7e3d8f143b06d25a3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acccb90257c867f7e3d8f143b06d25a3a">&#9670;&nbsp;</a></span>DEFAULT_JHEADS_CNT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_JHEADS_CNT&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab318c938d5aa20d1338765763c7e7ef1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab318c938d5aa20d1338765763c7e7ef1">&#9670;&nbsp;</a></span>DEFAULT_JNL_PERCENT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_JNL_PERCENT&#160;&#160;&#160;5</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a093098dc84099b65da46a0ea56cf7e1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a093098dc84099b65da46a0ea56cf7e1b">&#9670;&nbsp;</a></span>DEFAULT_LSAVE_CNT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_LSAVE_CNT&#160;&#160;&#160;256</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a6705fabeacdfce5d8cf6734908f58104"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6705fabeacdfce5d8cf6734908f58104">&#9670;&nbsp;</a></span>DEFAULT_MAX_JNL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_MAX_JNL&#160;&#160;&#160;(32*1024*1024)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3666874f7f8e0e841ef095b824d1fad7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3666874f7f8e0e841ef095b824d1fad7">&#9670;&nbsp;</a></span>DEFAULT_MAX_RP_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_MAX_RP_SIZE&#160;&#160;&#160;(5*1024*1024)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a7e320b0a51096976800e65aa743a9fbd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e320b0a51096976800e65aa743a9fbd">&#9670;&nbsp;</a></span>DEFAULT_RP_PERCENT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_RP_PERCENT&#160;&#160;&#160;5</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a99707af6a32c737198d8cf419413de7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99707af6a32c737198d8cf419413de7b">&#9670;&nbsp;</a></span>DEFAULT_TIME_GRAN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_TIME_GRAN&#160;&#160;&#160;1000000000</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a040c1c48545e70934b5e832f59366339"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a040c1c48545e70934b5e832f59366339">&#9670;&nbsp;</a></span>create_default_filesystem()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int create_default_filesystem </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>create_default_filesystem - format empty UBI volume. <code></code>: UBIFS file-system description object</p>
<p>This function creates default empty file-system. Returns zero in case of success and a negative error code in case of failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sb_8c_a040c1c48545e70934b5e832f59366339_cgraph.png" border="0" usemap="#sb_8c_a040c1c48545e70934b5e832f59366339_cgraph" alt=""/></div>
<map name="sb_8c_a040c1c48545e70934b5e832f59366339_cgraph" id="sb_8c_a040c1c48545e70934b5e832f59366339_cgraph">
<area shape="rect" id="node2" href="lpt_8c.html#a2c22b57dd8b454ef3308f2f5b558763c" title="ubifs_create_dflt_lpt" alt="" coords="224,1081,363,1108"/>
<area shape="rect" id="node6" href="misc_8h.html#ac7a685691e935bc3ef4a7918e107c8de" title="ubifs_idx_node_sz" alt="" coords="413,1284,543,1311"/>
<area shape="rect" id="node23" href="ubifs_2io_8c.html#a5e156b540025dd2266e7f4c6c302356e" title="ubifs_write_node" alt="" coords="233,563,353,589"/>
<area shape="rect" id="node43" href="misc_8h.html#a1598cadb907a20f9e5dc3e7ee74edb1d" title="ubifs_idx_branch" alt="" coords="597,473,717,500"/>
<area shape="rect" id="node44" href="key_8h.html#a9a10b02d73a5a824000f371a20d70ee7" title="key_r5_hash" alt="" coords="245,1183,341,1209"/>
<area shape="rect" id="node47" href="key_8h.html#a60df8426bc46e1074661d077542ea933" title="ino_key_init" alt="" coords="248,1233,339,1260"/>
<area shape="rect" id="node48" href="key_8h.html#a6a23a0657894a1a52a8a3046007995b3" title="key_write_idx" alt="" coords="242,1284,345,1311"/>
<area shape="rect" id="node49" href="key_8h.html#a0eb1cf0ecc00556383b326058c65f846" title="ino_key_init_flash" alt="" coords="230,1335,357,1361"/>
<area shape="rect" id="node50" href="ubifs_2misc_8c.html#a49c185988382ac9b2f28935dd44a0441" title="ubifs_msg" alt="" coords="252,1385,335,1412"/>
<area shape="rect" id="node3" href="lpt_8c.html#ac2ee8aabdad7db3026557a3b8fe1fffa" title="calc_dflt_lpt_geom" alt="" coords="413,980,543,1007"/>
<area shape="rect" id="node7" href="lpt_8c.html#a574e2659deacbc27b7d7738b336c32b0" title="ubifs_pack_pnode" alt="" coords="415,1183,541,1209"/>
<area shape="rect" id="node9" href="lpt_8c.html#a837361d188d5f97c2d8deb5c23714c4f" title="set_ltab" alt="" coords="444,1233,512,1260"/>
<area shape="rect" id="node10" href="ubifs_2io_8c.html#ac70865809ab5c33c55274560e453f535" title="ubifs_leb_change" alt="" coords="417,929,539,956"/>
<area shape="rect" id="node19" href="lpt_8c.html#ac83cbadb13b2425b8928e931848faf33" title="calc_nnode_num" alt="" coords="418,879,538,905"/>
<area shape="rect" id="node20" href="lpt_8c.html#afbec92ddd1b0c9598e498a10d859500b" title="ubifs_pack_nnode" alt="" coords="415,1031,541,1057"/>
<area shape="rect" id="node21" href="lpt_8c.html#ac11db630f1593b785cd612588586aeae" title="ubifs_pack_lsave" alt="" coords="417,1081,539,1108"/>
<area shape="rect" id="node22" href="lpt_8c.html#abad99814ae0b31a6bfee2356440bf809" title="ubifs_pack_ltab" alt="" coords="421,1132,535,1159"/>
<area shape="rect" id="node4" href="lpt_8c.html#a8b4d1e481e3c2afa2d9d7a3b334bba6c" title="do_calc_lpt_geom" alt="" coords="593,1081,720,1108"/>
<area shape="rect" id="node5" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="803,904,875,931"/>
<area shape="rect" id="node8" href="lpt_8c.html#ad94505f044e0e8c15f8d952701803027" title="pack_bits" alt="" coords="617,1132,696,1159"/>
<area shape="rect" id="node11" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="971,828,1090,855"/>
<area shape="rect" id="node12" href="ubifs_2debug_8c.html#af2ad985422103ec5e3e13776002d6ceb" title="dbg_leb_change" alt="" coords="599,777,715,804"/>
<area shape="rect" id="node18" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="786,575,893,601"/>
<area shape="rect" id="node13" href="ubifs_2debug_8h.html#ab599356d6c84ddd2c7b9001b452c30bd" title="dbg_is_power_cut" alt="" coords="776,777,903,804"/>
<area shape="rect" id="node16" href="ubifs_2debug_8c.html#a67b6fc23cfbf882431d33323a03ef74c" title="power_cut_emulated" alt="" coords="768,727,911,753"/>
<area shape="rect" id="node14" href="ubifs_2debug_8h.html#aed9c32fd77ce70a2d917ab58c56189c2" title="ubifs_debugging_init" alt="" coords="961,727,1101,753"/>
<area shape="rect" id="node15" href="ubifs_2debug_8h.html#a1e62d7c391f555902a25f8060eb6f1ec" title="ubifs_debugging_exit" alt="" coords="959,777,1103,804"/>
<area shape="rect" id="node17" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="988,625,1073,652"/>
<area shape="rect" id="node24" href="ubifs_2debug_8c.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="798,259,881,285"/>
<area shape="rect" id="node25" href="ubifs_2io_8c.html#acfc2ca3ffa8d094855c2e59551f3a767" title="ubifs_prepare_node" alt="" coords="411,563,545,589"/>
<area shape="rect" id="node28" href="ubifs_2io_8c.html#a02909cfc9d3a0100f549390c7d464632" title="ubifs_leb_write" alt="" coords="423,727,533,753"/>
<area shape="rect" id="node31" href="ubifs_2debug_8c.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="416,372,540,399"/>
<area shape="rect" id="node26" href="ubifs_2io_8c.html#a0b3f089c430db97bbc68e362dc7867c8" title="next_sqnum" alt="" coords="610,524,703,551"/>
<area shape="rect" id="node27" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="617,575,696,601"/>
<area shape="rect" id="node29" href="ubifs_2debug_8c.html#af929a6951e19c79f1235738386005c06" title="dbg_leb_write" alt="" coords="605,727,708,753"/>
<area shape="rect" id="node30" href="ubifs_2debug_8c.html#a90853c3e5be760b8c7d76c2d39fdb28c" title="corrupt_data" alt="" coords="792,625,887,652"/>
<area shape="rect" id="node32" href="ubifs_2debug_8c.html#a40190f9f60ac94040c30dbd97c73a3ca" title="dump_ch" alt="" coords="619,271,694,297"/>
<area shape="rect" id="node34" href="ubifs_2debug_8c.html#a4b30ad73e46b72b5043aa4efa7fb8d9a" title="get_key_hash" alt="" coords="605,321,708,348"/>
<area shape="rect" id="node35" href="ubifs_2debug_8c.html#af1196269cd9c24affacc60e33f960f49" title="get_key_fmt" alt="" coords="609,372,704,399"/>
<area shape="rect" id="node36" href="key_8h.html#a5611c13d648e672825da064c90c8903a" title="key_read" alt="" coords="619,423,694,449"/>
<area shape="rect" id="node37" href="ubifs_2debug_8c.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="596,144,717,171"/>
<area shape="rect" id="node33" href="ubifs_2debug_8c.html#a0137ecd738390d71f938f27be78c4477" title="dbg_gtype" alt="" coords="798,309,881,336"/>
<area shape="rect" id="node38" href="key_8h.html#a06f47822510ef850cb7065778115453c" title="key_type" alt="" coords="802,208,877,235"/>
<area shape="rect" id="node39" href="key_8h.html#a4a12b97ed78e138baf7886a6df7ed50f" title="key_inum" alt="" coords="800,5,879,32"/>
<area shape="rect" id="node40" href="ubifs_2debug_8c.html#ad6af0af711fdb082f6df4eaeb4d82fe6" title="get_key_type" alt="" coords="789,56,889,83"/>
<area shape="rect" id="node41" href="key_8h.html#acddf1ca88d72a37e06c5c608cd084656" title="key_hash" alt="" coords="800,107,879,133"/>
<area shape="rect" id="node42" href="key_8h.html#a10c13375b52dbb12be6f9b685d1d1ba7" title="key_block" alt="" coords="799,157,880,184"/>
<area shape="rect" id="node45" href="key_8h.html#af21b1399812ffc4f132af4b47381ae5c" title="key_mask_hash" alt="" coords="419,1335,537,1361"/>
<area shape="rect" id="node46" href="block__dev_8c.html#a79868b6f75989a03b1ad72c771d39cc1" title="hash" alt="" coords="631,1335,682,1361"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sb_8c_a040c1c48545e70934b5e832f59366339_icgraph.png" border="0" usemap="#sb_8c_a040c1c48545e70934b5e832f59366339_icgraph" alt=""/></div>
<map name="sb_8c_a040c1c48545e70934b5e832f59366339_icgraph" id="sb_8c_a040c1c48545e70934b5e832f59366339_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#a92995d9363effd044b46c432911fd7c6" title="ubifs_read_superblock" alt="" coords="224,5,376,32"/>
<area shape="rect" id="node3" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="424,5,517,32"/>
<area shape="rect" id="node4" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="565,5,675,32"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="723,5,816,32"/>
</map>
</div>

</div>
</div>
<a id="aa1a6d690124262b3f3c382e9596c6963"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1a6d690124262b3f3c382e9596c6963">&#9670;&nbsp;</a></span>fixup_free_space()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int fixup_free_space </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>fixup_free_space - find &amp; remap all LEBs containing free space. <code></code>: UBIFS file-system description object</p>
<p>This function walks through all LEBs in the filesystem and fiexes up those containing free/empty space. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sb_8c_aa1a6d690124262b3f3c382e9596c6963_cgraph.png" border="0" usemap="#sb_8c_aa1a6d690124262b3f3c382e9596c6963_cgraph" alt=""/></div>
<map name="sb_8c_aa1a6d690124262b3f3c382e9596c6963_cgraph" id="sb_8c_aa1a6d690124262b3f3c382e9596c6963_cgraph">
<area shape="rect" id="node2" href="misc_8h.html#aa89c2768eb94f129c6afbe47420b44ba" title="ubifs_get_lprops" alt="" coords="187,954,304,981"/>
<area shape="rect" id="node3" href="sb_8c.html#ab008935d2aab585efbb16fe4de3f2fef" title="fixup_leb" alt="" coords="208,1005,283,1031"/>
<area shape="rect" id="node30" href="misc_8h.html#abf53e0ff9d9f9f6fefb9a9efbf709496" title="ubifs_next_log_lnum" alt="" coords="175,1106,316,1133"/>
<area shape="rect" id="node31" href="lpt_8c.html#af1c4868152bb6ea9ae7c87e7dad9cede" title="ubifs_lpt_lookup" alt="" coords="187,1055,303,1082"/>
<area shape="rect" id="node50" href="misc_8h.html#a6dce2c34ec97d74cf4be59e0201bdb3e" title="ubifs_release_lprops" alt="" coords="175,1157,316,1183"/>
<area shape="rect" id="node4" href="ubifs_2io_8c.html#ad9d3a62a61d21e1faa60cd6e630c41ac" title="ubifs_leb_unmap" alt="" coords="365,878,485,905"/>
<area shape="rect" id="node27" href="ubifs_2io_8c.html#ab6a2a3c4a79d6d4c52350540437d3cb3" title="ubifs_leb_read" alt="" coords="725,1030,831,1057"/>
<area shape="rect" id="node28" href="ubifs_2io_8c.html#ac70865809ab5c33c55274560e453f535" title="ubifs_leb_change" alt="" coords="364,726,487,753"/>
<area shape="rect" id="node5" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="918,827,1037,854"/>
<area shape="rect" id="node6" href="ubifs_2debug_8c.html#a6ba17156289f8b8ecaed40dbafc04858" title="dbg_leb_unmap" alt="" coords="540,777,653,803"/>
<area shape="rect" id="node22" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1133,1005,1205,1031"/>
<area shape="rect" id="node26" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="543,878,650,905"/>
<area shape="rect" id="node7" href="ubifs_2debug_8h.html#ab599356d6c84ddd2c7b9001b452c30bd" title="dbg_is_power_cut" alt="" coords="715,473,841,499"/>
<area shape="rect" id="node24" href="ubifs_2debug_8c.html#a67b6fc23cfbf882431d33323a03ef74c" title="power_cut_emulated" alt="" coords="707,777,849,803"/>
<area shape="rect" id="node8" href="ubifs_2debug_8h.html#aed9c32fd77ce70a2d917ab58c56189c2" title="ubifs_debugging_init" alt="" coords="907,118,1047,145"/>
<area shape="rect" id="node9" href="ubifs_2debug_8h.html#a1e62d7c391f555902a25f8060eb6f1ec" title="ubifs_debugging_exit" alt="" coords="905,169,1049,195"/>
<area shape="rect" id="node10" href="ubifs_2debug_8h.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="936,219,1019,246"/>
<area shape="rect" id="node11" href="ubifs_2debug_8h.html#a615a670f26d4407b52175ce5f3faf594" title="dbg_cstate" alt="" coords="934,270,1021,297"/>
<area shape="rect" id="node12" href="ubifs_2debug_8h.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="937,321,1018,347"/>
<area shape="rect" id="node13" href="ubifs_2debug_8h.html#a4184d82b0b2ff0fffc6ab3d4de4a1e7a" title="dbg_get_key_dump" alt="" coords="910,371,1045,398"/>
<area shape="rect" id="node14" href="ubifs_2debug_8h.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="917,422,1038,449"/>
<area shape="rect" id="node15" href="ubifs_2debug_8h.html#a6ecc9bff59f14d28615ed14fa5323681" title="ubifs_dump_inode" alt="" coords="914,473,1041,499"/>
<area shape="rect" id="node16" href="ubifs_2debug_8h.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="915,523,1039,550"/>
<area shape="rect" id="node17" href="ubifs_2debug_8h.html#acfcbe45894b3b41385c1f9891d57bb97" title="ubifs_dump_budget_req" alt="" coords="897,574,1057,601"/>
<area shape="rect" id="node18" href="ubifs_2debug_8h.html#ab351e7abb59edb97d57bd44dd83b0484" title="ubifs_dump_lstats" alt="" coords="913,625,1041,651"/>
<area shape="rect" id="node19" href="ubifs_2debug_8h.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="915,675,1039,702"/>
<area shape="rect" id="node20" href="ubifs_2debug_8h.html#ad04e55858b69b78f20ea8b0fb79f9f27" title="ubifs_dump_lprop" alt="" coords="915,726,1039,753"/>
<area shape="rect" id="node21" href="ubifs_2debug_8h.html#a2fa0aeaaa556f0b13d098456ef7d86d4" title="ubifs_dump_lprops" alt="" coords="912,67,1043,94"/>
<area shape="rect" id="node23" href="ubifs_2debug_8h.html#afc25fcc00c516fab54a12303d87bc100" title="ubifs_dump_lpt_info" alt="" coords="908,777,1047,803"/>
<area shape="rect" id="node25" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="935,878,1020,905"/>
<area shape="rect" id="node29" href="ubifs_2debug_8c.html#af2ad985422103ec5e3e13776002d6ceb" title="dbg_leb_change" alt="" coords="539,726,655,753"/>
<area shape="rect" id="node32" href="lpt_8c.html#a6d9ea5f42b955fdb68064bc37bd9540d" title="ubifs_read_nnode" alt="" coords="535,1081,659,1107"/>
<area shape="rect" id="node39" href="lpt_8c.html#a7fd536e4a29b47a6485fc3931f91857b" title="ubifs_get_nnode" alt="" coords="367,1106,484,1133"/>
<area shape="rect" id="node40" href="lpt_8c.html#ad8f891756dae6c6dceeb51fb917b023b" title="ubifs_get_pnode" alt="" coords="367,1283,484,1310"/>
<area shape="rect" id="node33" href="lpt_8c.html#a9f9e5388fe8c2966b4517e0b243b9ce6" title="calc_nnode_num_from\l_parent" alt="" coords="901,1081,1054,1123"/>
<area shape="rect" id="node34" href="lpt_8c.html#a0d29b2eba67308c09e6c7e05ad2b63b1" title="ubifs_unpack_nnode" alt="" coords="707,1233,849,1259"/>
<area shape="rect" id="node38" href="lpt_8c.html#ad905cc71245ecfb3152a844c581d3e12" title="validate_nnode" alt="" coords="723,1131,833,1158"/>
<area shape="rect" id="node35" href="lpt_8c.html#a96436eaf7459ebef6525d09761a38d2c" title="check_lpt_type" alt="" coords="922,1299,1033,1326"/>
<area shape="rect" id="node36" href="lpt_8c.html#af769280c22d887914ee95e9c2e4cc7de" title="ubifs_unpack_bits" alt="" coords="1105,1274,1232,1301"/>
<area shape="rect" id="node37" href="lpt_8c.html#ac0dcb63535a53346f5364a21cd948dec" title="check_lpt_crc" alt="" coords="926,1198,1029,1225"/>
<area shape="rect" id="node41" href="lpt_8c.html#a1e838b76fdfdb8c75cbd35ed51bad53c" title="read_pnode" alt="" coords="552,1385,641,1411"/>
<area shape="rect" id="node48" href="lpt_8c.html#a50862af12cdded0c2e3be8cea516be8e" title="update_cats" alt="" coords="550,1283,643,1310"/>
<area shape="rect" id="node42" href="lpt_8c.html#afaa9919aea45f990f706d5a19a7de403" title="calc_pnode_num_from\l_parent" alt="" coords="901,1465,1054,1507"/>
<area shape="rect" id="node43" href="lprops_8c.html#a7a2c9edc0537908ba98fe9a7ab5659d8" title="ubifs_categorize_lprops" alt="" coords="898,1401,1057,1427"/>
<area shape="rect" id="node44" href="lpt_8c.html#a7d13c8b402e5a787d5f689a01f01725d" title="unpack_pnode" alt="" coords="725,1334,831,1361"/>
<area shape="rect" id="node45" href="lpt_8c.html#aa9b770e270a9dd0d3fa430bcca3eb9b1" title="validate_pnode" alt="" coords="723,1486,833,1513"/>
<area shape="rect" id="node46" href="lpt_8c.html#a60013b08dd0072dd2a70f499427a67d0" title="set_pnode_lnum" alt="" coords="719,1537,837,1563"/>
<area shape="rect" id="node47" href="ubifs_2debug_8c.html#ab2224f946272a25cfacf2607c6502818" title="ubifs_dump_pnode" alt="" coords="713,1587,843,1614"/>
<area shape="rect" id="node49" href="lprops_8c.html#a664f531f8332b3c53d93e25c4e688e09" title="ubifs_add_to_cat" alt="" coords="717,1283,839,1310"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sb_8c_aa1a6d690124262b3f3c382e9596c6963_icgraph.png" border="0" usemap="#sb_8c_aa1a6d690124262b3f3c382e9596c6963_icgraph" alt=""/></div>
<map name="sb_8c_aa1a6d690124262b3f3c382e9596c6963_icgraph" id="sb_8c_aa1a6d690124262b3f3c382e9596c6963_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#a7bacccbb99ed3d3f67a20cac2ac99990" title="ubifs_fixup_free_space" alt="" coords="175,31,331,57"/>
<area shape="rect" id="node3" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="395,5,488,32"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="379,56,504,83"/>
<area shape="rect" id="node4" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="559,5,668,32"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="723,5,816,32"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="552,56,675,83"/>
</map>
</div>

</div>
</div>
<a id="ab008935d2aab585efbb16fe4de3f2fef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab008935d2aab585efbb16fe4de3f2fef">&#9670;&nbsp;</a></span>fixup_leb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int fixup_leb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>fixup_leb - fixup/unmap an LEB containing free space. <code></code>: UBIFS file-system description object : the LEB number to fix up : number of used bytes in LEB (starting at offset 0)</p>
<p>This function reads the contents of the given LEB number , then fixes it up, so that empty min. I/O units in the end of LEB are actually erased on flash (rather than being just all-0xff real data). If the LEB is completely empty, it is simply unmapped. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sb_8c_ab008935d2aab585efbb16fe4de3f2fef_cgraph.png" border="0" usemap="#sb_8c_ab008935d2aab585efbb16fe4de3f2fef_cgraph" alt=""/></div>
<map name="sb_8c_ab008935d2aab585efbb16fe4de3f2fef_cgraph" id="sb_8c_ab008935d2aab585efbb16fe4de3f2fef_cgraph">
<area shape="rect" id="node2" href="ubifs_2io_8c.html#ad9d3a62a61d21e1faa60cd6e630c41ac" title="ubifs_leb_unmap" alt="" coords="129,1912,249,1939"/>
<area shape="rect" id="node48" href="ubifs_2io_8c.html#ab6a2a3c4a79d6d4c52350540437d3cb3" title="ubifs_leb_read" alt="" coords="481,12,587,39"/>
<area shape="rect" id="node49" href="ubifs_2io_8c.html#ac70865809ab5c33c55274560e453f535" title="ubifs_leb_change" alt="" coords="128,1988,251,2015"/>
<area shape="rect" id="node3" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="681,2090,800,2116"/>
<area shape="rect" id="node4" href="ubifs_2debug_8c.html#a6ba17156289f8b8ecaed40dbafc04858" title="dbg_leb_unmap" alt="" coords="300,1887,413,1914"/>
<area shape="rect" id="node20" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="876,899,948,926"/>
<area shape="rect" id="node47" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="303,1938,410,1964"/>
<area shape="rect" id="node5" href="ubifs_2debug_8h.html#ab599356d6c84ddd2c7b9001b452c30bd" title="dbg_is_power_cut" alt="" coords="471,1102,597,1128"/>
<area shape="rect" id="node45" href="ubifs_2debug_8c.html#a67b6fc23cfbf882431d33323a03ef74c" title="power_cut_emulated" alt="" coords="463,1988,605,2015"/>
<area shape="rect" id="node6" href="ubifs_2debug_8h.html#aed9c32fd77ce70a2d917ab58c56189c2" title="ubifs_debugging_init" alt="" coords="671,1178,811,1204"/>
<area shape="rect" id="node7" href="ubifs_2debug_8h.html#a1e62d7c391f555902a25f8060eb6f1ec" title="ubifs_debugging_exit" alt="" coords="669,1228,813,1255"/>
<area shape="rect" id="node8" href="ubifs_2debug_8h.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="699,1279,782,1306"/>
<area shape="rect" id="node9" href="ubifs_2debug_8h.html#a615a670f26d4407b52175ce5f3faf594" title="dbg_cstate" alt="" coords="697,1330,784,1356"/>
<area shape="rect" id="node10" href="ubifs_2debug_8h.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="700,1380,781,1407"/>
<area shape="rect" id="node11" href="ubifs_2debug_8h.html#a4184d82b0b2ff0fffc6ab3d4de4a1e7a" title="dbg_get_key_dump" alt="" coords="673,1431,808,1458"/>
<area shape="rect" id="node12" href="ubifs_2debug_8h.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="680,1482,801,1508"/>
<area shape="rect" id="node13" href="ubifs_2debug_8h.html#a6ecc9bff59f14d28615ed14fa5323681" title="ubifs_dump_inode" alt="" coords="677,1532,804,1559"/>
<area shape="rect" id="node14" href="ubifs_2debug_8h.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="679,1583,803,1610"/>
<area shape="rect" id="node15" href="ubifs_2debug_8h.html#acfcbe45894b3b41385c1f9891d57bb97" title="ubifs_dump_budget_req" alt="" coords="661,1634,821,1660"/>
<area shape="rect" id="node16" href="ubifs_2debug_8h.html#ab351e7abb59edb97d57bd44dd83b0484" title="ubifs_dump_lstats" alt="" coords="677,1684,805,1711"/>
<area shape="rect" id="node17" href="ubifs_2debug_8h.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="679,1735,803,1762"/>
<area shape="rect" id="node18" href="ubifs_2debug_8h.html#ad04e55858b69b78f20ea8b0fb79f9f27" title="ubifs_dump_lprop" alt="" coords="679,1786,803,1812"/>
<area shape="rect" id="node19" href="ubifs_2debug_8h.html#a2fa0aeaaa556f0b13d098456ef7d86d4" title="ubifs_dump_lprops" alt="" coords="675,468,806,495"/>
<area shape="rect" id="node21" href="ubifs_2debug_8h.html#afc25fcc00c516fab54a12303d87bc100" title="ubifs_dump_lpt_info" alt="" coords="671,1836,810,1863"/>
<area shape="rect" id="node22" href="ubifs_2debug_8h.html#afa1952f7d3c2c791a330e3dc245c5a83" title="ubifs_dump_leb" alt="" coords="684,772,797,799"/>
<area shape="rect" id="node23" href="ubifs_2debug_8h.html#a454a80414a371832b3f68f828f6a6353" title="ubifs_dump_sleb" alt="" coords="681,114,801,140"/>
<area shape="rect" id="node24" href="ubifs_2debug_8h.html#a56365d730ac6932bf3163a8ba7279779" title="ubifs_dump_znode" alt="" coords="675,164,806,191"/>
<area shape="rect" id="node25" href="ubifs_2debug_8h.html#a5600b63b8362df17ed46c4e20784fb6c" title="ubifs_dump_heap" alt="" coords="679,215,803,242"/>
<area shape="rect" id="node26" href="ubifs_2debug_8h.html#ab2224f946272a25cfacf2607c6502818" title="ubifs_dump_pnode" alt="" coords="675,266,806,292"/>
<area shape="rect" id="node27" href="ubifs_2debug_8h.html#a6ad4e8a10c442517164e350787696d9d" title="ubifs_dump_tnc" alt="" coords="683,519,798,546"/>
<area shape="rect" id="node28" href="ubifs_2debug_8h.html#a1988de032288d9afc418a9f36c0e1a38" title="ubifs_dump_index" alt="" coords="677,570,804,596"/>
<area shape="rect" id="node29" href="ubifs_2debug_8h.html#a2dad580c9c3f21053039a854eb81bed2" title="ubifs_dump_lpt_lebs" alt="" coords="670,620,811,647"/>
<area shape="rect" id="node30" href="ubifs_2debug_8h.html#ac9540eb544441fb116e86f4799b55265" title="dbg_walk_index" alt="" coords="683,823,798,850"/>
<area shape="rect" id="node31" href="ubifs_2debug_8h.html#a42a0e664e63f651533d2a5abc23bf4da" title="dbg_save_space_info" alt="" coords="667,671,815,698"/>
<area shape="rect" id="node32" href="ubifs_2debug_8h.html#ace23cd2189dd2d7a9435ddd891e9beaa" title="dbg_check_space_info" alt="" coords="663,874,818,900"/>
<area shape="rect" id="node33" href="ubifs_2debug_8h.html#a69534405790cc12f492343243bc539a4" title="dbg_check_lprops" alt="" coords="677,924,804,951"/>
<area shape="rect" id="node34" href="ubifs_2debug_8h.html#a725dc62445ba29e272e4ccb5b10fbc61" title="dbg_old_index_check_init" alt="" coords="655,722,826,748"/>
<area shape="rect" id="node35" href="ubifs_2debug_8h.html#a23369147b6e2214867a8a650ad50ebaf" title="dbg_check_old_index" alt="" coords="667,975,814,1002"/>
<area shape="rect" id="node36" href="ubifs_2debug_8h.html#a4d24d720745a25e26d273dc892c703eb" title="dbg_check_cats" alt="" coords="682,1026,799,1052"/>
<area shape="rect" id="node37" href="ubifs_2debug_8h.html#a0326c90a004af4486c5ad1dbc25baf29" title="dbg_check_ltab" alt="" coords="684,1076,797,1103"/>
<area shape="rect" id="node38" href="ubifs_2debug_8h.html#ab2f0c34c5385c6b4af6f326fac750a70" title="dbg_chk_lpt_free_spc" alt="" coords="666,1127,815,1154"/>
<area shape="rect" id="node39" href="ubifs_2debug_8h.html#a8743b404fd4536a6f2212846f55854d0" title="dbg_chk_lpt_sz" alt="" coords="684,1887,797,1914"/>
<area shape="rect" id="node40" href="ubifs_2debug_8h.html#ad20ad974aa8f10603e2468787760af65" title="dbg_check_synced_i_size" alt="" coords="653,1938,828,1964"/>
<area shape="rect" id="node41" href="ubifs_2debug_8h.html#ae64cd5f4e9b71d0d2167e1f8dafd9cd0" title="dbg_check_dir" alt="" coords="687,1988,794,2015"/>
<area shape="rect" id="node42" href="ubifs_2debug_8h.html#a8e749de733b483ca979984b8aa078aa6" title="dbg_check_tnc" alt="" coords="685,316,796,343"/>
<area shape="rect" id="node43" href="ubifs_2debug_8h.html#a6f442c5e8d297e33d3bdaea0887419e6" title="dbg_check_idx_size" alt="" coords="671,367,811,394"/>
<area shape="rect" id="node44" href="ubifs_2debug_8h.html#a731d5cfe8b5dfa819687b4924a384a35" title="dbg_check_filesystem" alt="" coords="665,418,817,444"/>
<area shape="rect" id="node46" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="698,2039,783,2066"/>
<area shape="rect" id="node50" href="ubifs_2debug_8c.html#af2ad985422103ec5e3e13776002d6ceb" title="dbg_leb_change" alt="" coords="299,1988,415,2015"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sb_8c_ab008935d2aab585efbb16fe4de3f2fef_icgraph.png" border="0" usemap="#sb_8c_ab008935d2aab585efbb16fe4de3f2fef_icgraph" alt=""/></div>
<map name="sb_8c_ab008935d2aab585efbb16fe4de3f2fef_icgraph" id="sb_8c_ab008935d2aab585efbb16fe4de3f2fef_icgraph">
<area shape="rect" id="node2" href="sb_8c.html#aa1a6d690124262b3f3c382e9596c6963" title="fixup_free_space" alt="" coords="128,31,249,57"/>
<area shape="rect" id="node3" href="ubifs_8h.html#a7bacccbb99ed3d3f67a20cac2ac99990" title="ubifs_fixup_free_space" alt="" coords="297,31,453,57"/>
<area shape="rect" id="node4" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="517,5,611,32"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="501,56,627,83"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="681,5,791,32"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="845,5,939,32"/>
<area shape="rect" id="node8" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="675,56,797,83"/>
</map>
</div>

</div>
</div>
<a id="a79b22b1f088c88c40e019e23efb61e0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79b22b1f088c88c40e019e23efb61e0a">&#9670;&nbsp;</a></span>ubifs_enable_encryption()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ubifs_enable_encryption </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sb_8c_a79b22b1f088c88c40e019e23efb61e0a_cgraph.png" border="0" usemap="#sb_8c_a79b22b1f088c88c40e019e23efb61e0a_cgraph" alt=""/></div>
<map name="sb_8c_a79b22b1f088c88c40e019e23efb61e0a_cgraph" id="sb_8c_a79b22b1f088c88c40e019e23efb61e0a_cgraph">
<area shape="rect" id="node2" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1180,245,1252,272"/>
<area shape="rect" id="node3" href="sb_8c.html#a5aea8a0dedc50e5d3693a4961c3c494d" title="ubifs_read_sb_node" alt="" coords="217,119,356,145"/>
<area shape="rect" id="node21" href="sb_8c.html#a9695fcc75ffa07efff2111b02ebd89c3" title="ubifs_write_sb_node" alt="" coords="216,220,357,247"/>
<area shape="rect" id="node4" href="ubifs_2io_8c.html#ab1c29d586db30bacfa2c9a73369a8870" title="ubifs_read_node" alt="" coords="765,119,882,145"/>
<area shape="rect" id="node5" href="ubifs_2debug_8c.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="1507,372,1590,399"/>
<area shape="rect" id="node6" href="ubifs_2io_8c.html#ab6a2a3c4a79d6d4c52350540437d3cb3" title="ubifs_leb_read" alt="" coords="969,93,1076,120"/>
<area shape="rect" id="node7" href="ubifs_2io_8c.html#ab9b2f0cc24eff9f69bd606979eb3a53e" title="ubifs_check_node" alt="" coords="959,144,1086,171"/>
<area shape="rect" id="node8" href="ubifs_2debug_8c.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="1154,828,1278,855"/>
<area shape="rect" id="node9" href="ubifs_2debug_8c.html#a40190f9f60ac94040c30dbd97c73a3ca" title="dump_ch" alt="" coords="1353,752,1427,779"/>
<area shape="rect" id="node11" href="ubifs_2debug_8c.html#a4b30ad73e46b72b5043aa4efa7fb8d9a" title="get_key_hash" alt="" coords="1339,803,1441,829"/>
<area shape="rect" id="node12" href="ubifs_2debug_8c.html#af1196269cd9c24affacc60e33f960f49" title="get_key_fmt" alt="" coords="1343,853,1437,880"/>
<area shape="rect" id="node13" href="key_8h.html#a5611c13d648e672825da064c90c8903a" title="key_read" alt="" coords="1353,955,1427,981"/>
<area shape="rect" id="node14" href="ubifs_2debug_8c.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="1329,1157,1451,1184"/>
<area shape="rect" id="node20" href="misc_8h.html#a1598cadb907a20f9e5dc3e7ee74edb1d" title="ubifs_idx_branch" alt="" coords="1330,904,1450,931"/>
<area shape="rect" id="node10" href="ubifs_2debug_8c.html#a0137ecd738390d71f938f27be78c4477" title="dbg_gtype" alt="" coords="1507,752,1590,779"/>
<area shape="rect" id="node15" href="key_8h.html#a06f47822510ef850cb7065778115453c" title="key_type" alt="" coords="1511,1183,1586,1209"/>
<area shape="rect" id="node16" href="key_8h.html#a4a12b97ed78e138baf7886a6df7ed50f" title="key_inum" alt="" coords="1509,1233,1588,1260"/>
<area shape="rect" id="node17" href="ubifs_2debug_8c.html#ad6af0af711fdb082f6df4eaeb4d82fe6" title="get_key_type" alt="" coords="1499,1284,1599,1311"/>
<area shape="rect" id="node18" href="key_8h.html#acddf1ca88d72a37e06c5c608cd084656" title="key_hash" alt="" coords="1509,1081,1588,1108"/>
<area shape="rect" id="node19" href="key_8h.html#a10c13375b52dbb12be6f9b685d1d1ba7" title="key_block" alt="" coords="1508,1132,1589,1159"/>
<area shape="rect" id="node22" href="ubifs_2io_8c.html#acfc2ca3ffa8d094855c2e59551f3a767" title="ubifs_prepare_node" alt="" coords="405,220,540,247"/>
<area shape="rect" id="node27" href="ubifs_2io_8c.html#ac70865809ab5c33c55274560e453f535" title="ubifs_leb_change" alt="" coords="411,347,534,373"/>
<area shape="rect" id="node23" href="ubifs_2io_8c.html#a0b3f089c430db97bbc68e362dc7867c8" title="next_sqnum" alt="" coords="599,195,693,221"/>
<area shape="rect" id="node26" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="607,245,685,272"/>
<area shape="rect" id="node24" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="770,347,877,373"/>
<area shape="rect" id="node25" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="980,347,1065,373"/>
<area shape="rect" id="node28" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="963,397,1082,424"/>
<area shape="rect" id="node29" href="ubifs_2debug_8c.html#af2ad985422103ec5e3e13776002d6ceb" title="dbg_leb_change" alt="" coords="588,397,704,424"/>
<area shape="rect" id="node30" href="ubifs_2debug_8h.html#ab599356d6c84ddd2c7b9001b452c30bd" title="dbg_is_power_cut" alt="" coords="760,879,887,905"/>
<area shape="rect" id="node50" href="ubifs_2debug_8c.html#a67b6fc23cfbf882431d33323a03ef74c" title="power_cut_emulated" alt="" coords="752,397,895,424"/>
<area shape="rect" id="node31" href="ubifs_2debug_8h.html#aed9c32fd77ce70a2d917ab58c56189c2" title="ubifs_debugging_init" alt="" coords="953,1005,1093,1032"/>
<area shape="rect" id="node32" href="ubifs_2debug_8h.html#a1e62d7c391f555902a25f8060eb6f1ec" title="ubifs_debugging_exit" alt="" coords="951,1056,1095,1083"/>
<area shape="rect" id="node33" href="ubifs_2debug_8h.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="981,1107,1064,1133"/>
<area shape="rect" id="node34" href="ubifs_2debug_8h.html#a615a670f26d4407b52175ce5f3faf594" title="dbg_cstate" alt="" coords="979,1157,1066,1184"/>
<area shape="rect" id="node35" href="ubifs_2debug_8h.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="982,1208,1063,1235"/>
<area shape="rect" id="node36" href="ubifs_2debug_8h.html#a4184d82b0b2ff0fffc6ab3d4de4a1e7a" title="dbg_get_key_dump" alt="" coords="955,1259,1090,1285"/>
<area shape="rect" id="node37" href="ubifs_2debug_8h.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="1329,1208,1451,1235"/>
<area shape="rect" id="node38" href="ubifs_2debug_8h.html#a6ecc9bff59f14d28615ed14fa5323681" title="ubifs_dump_inode" alt="" coords="1153,955,1279,981"/>
<area shape="rect" id="node39" href="ubifs_2debug_8h.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="1154,904,1278,931"/>
<area shape="rect" id="node40" href="ubifs_2debug_8h.html#acfcbe45894b3b41385c1f9891d57bb97" title="ubifs_dump_budget_req" alt="" coords="943,448,1103,475"/>
<area shape="rect" id="node41" href="ubifs_2debug_8h.html#ab351e7abb59edb97d57bd44dd83b0484" title="ubifs_dump_lstats" alt="" coords="959,499,1087,525"/>
<area shape="rect" id="node42" href="ubifs_2debug_8h.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="961,549,1085,576"/>
<area shape="rect" id="node43" href="ubifs_2debug_8h.html#ad04e55858b69b78f20ea8b0fb79f9f27" title="ubifs_dump_lprop" alt="" coords="961,600,1085,627"/>
<area shape="rect" id="node44" href="ubifs_2debug_8h.html#a2fa0aeaaa556f0b13d098456ef7d86d4" title="ubifs_dump_lprops" alt="" coords="957,701,1088,728"/>
<area shape="rect" id="node45" href="ubifs_2debug_8h.html#afc25fcc00c516fab54a12303d87bc100" title="ubifs_dump_lpt_info" alt="" coords="953,651,1092,677"/>
<area shape="rect" id="node46" href="ubifs_2debug_8h.html#afa1952f7d3c2c791a330e3dc245c5a83" title="ubifs_dump_leb" alt="" coords="966,803,1079,829"/>
<area shape="rect" id="node47" href="ubifs_2debug_8h.html#a454a80414a371832b3f68f828f6a6353" title="ubifs_dump_sleb" alt="" coords="963,853,1083,880"/>
<area shape="rect" id="node48" href="ubifs_2debug_8h.html#a56365d730ac6932bf3163a8ba7279779" title="ubifs_dump_znode" alt="" coords="1151,1157,1281,1184"/>
<area shape="rect" id="node49" href="ubifs_2debug_8h.html#a5600b63b8362df17ed46c4e20784fb6c" title="ubifs_dump_heap" alt="" coords="961,752,1085,779"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sb_8c_a79b22b1f088c88c40e019e23efb61e0a_icgraph.png" border="0" usemap="#sb_8c_a79b22b1f088c88c40e019e23efb61e0a_icgraph" alt=""/></div>
<map name="sb_8c_a79b22b1f088c88c40e019e23efb61e0a_icgraph" id="sb_8c_a79b22b1f088c88c40e019e23efb61e0a_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#a9831447969acb35c927f7530bc47158e" title="ubifs_ioctl" alt="" coords="216,132,297,159"/>
<area shape="rect" id="node3" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="345,132,472,159"/>
<area shape="rect" id="node4" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="520,5,653,32"/>
<area shape="rect" id="node6" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="540,56,633,83"/>
<area shape="rect" id="node7" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="545,107,628,133"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="542,157,631,184"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="539,208,635,235"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="535,259,638,285"/>
<area shape="rect" id="node5" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="713,5,786,32"/>
<area shape="rect" id="node8" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="701,81,797,108"/>
<area shape="rect" id="node9" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="706,132,793,159"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="845,132,945,159"/>
</map>
</div>

</div>
</div>
<a id="a7bacccbb99ed3d3f67a20cac2ac99990"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bacccbb99ed3d3f67a20cac2ac99990">&#9670;&nbsp;</a></span>ubifs_fixup_free_space()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ubifs_fixup_free_space </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_fixup_free_space - find &amp; fix all LEBs with free space. <code></code>: UBIFS file-system description object</p>
<p>This function fixes up LEBs containing free space on first mount, if the appropriate flag was set when the FS was created. Each LEB with one or more empty min. I/O unit (i.e. free-space-count &gt; 0) is re-written, to make sure the free space is actually erased. E.g., this is necessary for some NAND chips, since the free space may have been programmed like real "0xff" data (generating a non-0xff ECC), causing future writes to the not-really-erased NAND pages to behave badly. After the space is fixed up, the superblock flag is cleared, so that this is skipped for all future mounts. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sb_8c_a7bacccbb99ed3d3f67a20cac2ac99990_cgraph.png" border="0" usemap="#sb_8c_a7bacccbb99ed3d3f67a20cac2ac99990_cgraph" alt=""/></div>
<map name="sb_8c_a7bacccbb99ed3d3f67a20cac2ac99990_cgraph" id="sb_8c_a7bacccbb99ed3d3f67a20cac2ac99990_cgraph">
<area shape="rect" id="node2" href="ubifs_2misc_8c.html#a49c185988382ac9b2f28935dd44a0441" title="ubifs_msg" alt="" coords="237,287,320,313"/>
<area shape="rect" id="node3" href="sb_8c.html#aa1a6d690124262b3f3c382e9596c6963" title="fixup_free_space" alt="" coords="218,464,339,491"/>
<area shape="rect" id="node36" href="sb_8c.html#a5aea8a0dedc50e5d3693a4961c3c494d" title="ubifs_read_sb_node" alt="" coords="209,768,348,795"/>
<area shape="rect" id="node47" href="sb_8c.html#a9695fcc75ffa07efff2111b02ebd89c3" title="ubifs_write_sb_node" alt="" coords="751,259,892,285"/>
<area shape="rect" id="node4" href="misc_8h.html#aa89c2768eb94f129c6afbe47420b44ba" title="ubifs_get_lprops" alt="" coords="408,439,525,465"/>
<area shape="rect" id="node5" href="sb_8c.html#ab008935d2aab585efbb16fe4de3f2fef" title="fixup_leb" alt="" coords="784,451,859,477"/>
<area shape="rect" id="node17" href="misc_8h.html#abf53e0ff9d9f9f6fefb9a9efbf709496" title="ubifs_next_log_lnum" alt="" coords="396,388,537,415"/>
<area shape="rect" id="node18" href="lpt_8c.html#af1c4868152bb6ea9ae7c87e7dad9cede" title="ubifs_lpt_lookup" alt="" coords="409,591,525,617"/>
<area shape="rect" id="node35" href="misc_8h.html#a6dce2c34ec97d74cf4be59e0201bdb3e" title="ubifs_release_lprops" alt="" coords="396,540,537,567"/>
<area shape="rect" id="node6" href="ubifs_2io_8c.html#ad9d3a62a61d21e1faa60cd6e630c41ac" title="ubifs_leb_unmap" alt="" coords="951,360,1071,387"/>
<area shape="rect" id="node14" href="ubifs_2io_8c.html#ab6a2a3c4a79d6d4c52350540437d3cb3" title="ubifs_leb_read" alt="" coords="957,641,1064,668"/>
<area shape="rect" id="node15" href="ubifs_2io_8c.html#ac70865809ab5c33c55274560e453f535" title="ubifs_leb_change" alt="" coords="949,259,1072,285"/>
<area shape="rect" id="node7" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="1527,259,1645,285"/>
<area shape="rect" id="node8" href="ubifs_2debug_8c.html#a6ba17156289f8b8ecaed40dbafc04858" title="dbg_leb_unmap" alt="" coords="1152,309,1265,336"/>
<area shape="rect" id="node12" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1371,629,1443,656"/>
<area shape="rect" id="node13" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="1354,107,1461,133"/>
<area shape="rect" id="node9" href="ubifs_2debug_8h.html#ab599356d6c84ddd2c7b9001b452c30bd" title="dbg_is_power_cut" alt="" coords="1344,309,1471,336"/>
<area shape="rect" id="node10" href="ubifs_2debug_8c.html#a67b6fc23cfbf882431d33323a03ef74c" title="power_cut_emulated" alt="" coords="1336,259,1479,285"/>
<area shape="rect" id="node11" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="1543,107,1629,133"/>
<area shape="rect" id="node16" href="ubifs_2debug_8c.html#af2ad985422103ec5e3e13776002d6ceb" title="dbg_leb_change" alt="" coords="1151,259,1267,285"/>
<area shape="rect" id="node19" href="lpt_8c.html#a6d9ea5f42b955fdb68064bc37bd9540d" title="ubifs_read_nnode" alt="" coords="759,591,883,617"/>
<area shape="rect" id="node26" href="lpt_8c.html#a7fd536e4a29b47a6485fc3931f91857b" title="ubifs_get_nnode" alt="" coords="585,616,703,643"/>
<area shape="rect" id="node27" href="lpt_8c.html#ad8f891756dae6c6dceeb51fb917b023b" title="ubifs_get_pnode" alt="" coords="585,819,703,845"/>
<area shape="rect" id="node20" href="lpt_8c.html#a9f9e5388fe8c2966b4517e0b243b9ce6" title="calc_nnode_num_from\l_parent" alt="" coords="1132,563,1285,605"/>
<area shape="rect" id="node21" href="lpt_8c.html#a0d29b2eba67308c09e6c7e05ad2b63b1" title="ubifs_unpack_nnode" alt="" coords="940,743,1081,769"/>
<area shape="rect" id="node25" href="lpt_8c.html#ad905cc71245ecfb3152a844c581d3e12" title="validate_nnode" alt="" coords="956,591,1065,617"/>
<area shape="rect" id="node22" href="lpt_8c.html#a96436eaf7459ebef6525d09761a38d2c" title="check_lpt_type" alt="" coords="1153,832,1264,859"/>
<area shape="rect" id="node23" href="lpt_8c.html#af769280c22d887914ee95e9c2e4cc7de" title="ubifs_unpack_bits" alt="" coords="1344,807,1471,833"/>
<area shape="rect" id="node24" href="lpt_8c.html#ac0dcb63535a53346f5364a21cd948dec" title="check_lpt_crc" alt="" coords="1157,731,1260,757"/>
<area shape="rect" id="node28" href="lpt_8c.html#a1e838b76fdfdb8c75cbd35ed51bad53c" title="read_pnode" alt="" coords="777,819,866,845"/>
<area shape="rect" id="node34" href="lpt_8c.html#a50862af12cdded0c2e3be8cea516be8e" title="update_cats" alt="" coords="775,869,868,896"/>
<area shape="rect" id="node29" href="lpt_8c.html#afaa9919aea45f990f706d5a19a7de403" title="calc_pnode_num_from\l_parent" alt="" coords="1132,985,1285,1026"/>
<area shape="rect" id="node30" href="lprops_8c.html#a7a2c9edc0537908ba98fe9a7ab5659d8" title="ubifs_categorize_lprops" alt="" coords="1129,933,1288,960"/>
<area shape="rect" id="node31" href="lpt_8c.html#a7d13c8b402e5a787d5f689a01f01725d" title="unpack_pnode" alt="" coords="957,844,1064,871"/>
<area shape="rect" id="node32" href="lpt_8c.html#aa9b770e270a9dd0d3fa430bcca3eb9b1" title="validate_pnode" alt="" coords="956,945,1065,972"/>
<area shape="rect" id="node33" href="lpt_8c.html#a60013b08dd0072dd2a70f499427a67d0" title="set_pnode_lnum" alt="" coords="952,793,1069,820"/>
<area shape="rect" id="node37" href="ubifs_2io_8c.html#ab1c29d586db30bacfa2c9a73369a8870" title="ubifs_read_node" alt="" coords="763,1051,880,1077"/>
<area shape="rect" id="node38" href="ubifs_2debug_8c.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="1545,1101,1627,1128"/>
<area shape="rect" id="node39" href="ubifs_2io_8c.html#ab9b2f0cc24eff9f69bd606979eb3a53e" title="ubifs_check_node" alt="" coords="947,1051,1074,1077"/>
<area shape="rect" id="node40" href="ubifs_2debug_8c.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="1147,1101,1271,1128"/>
<area shape="rect" id="node41" href="ubifs_2debug_8c.html#a40190f9f60ac94040c30dbd97c73a3ca" title="dump_ch" alt="" coords="1370,949,1445,976"/>
<area shape="rect" id="node42" href="ubifs_2debug_8c.html#a4b30ad73e46b72b5043aa4efa7fb8d9a" title="get_key_hash" alt="" coords="1356,1152,1459,1179"/>
<area shape="rect" id="node43" href="ubifs_2debug_8c.html#af1196269cd9c24affacc60e33f960f49" title="get_key_fmt" alt="" coords="1360,1203,1455,1229"/>
<area shape="rect" id="node44" href="key_8h.html#a5611c13d648e672825da064c90c8903a" title="key_read" alt="" coords="1370,1000,1445,1027"/>
<area shape="rect" id="node45" href="ubifs_2debug_8c.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="1347,1051,1468,1077"/>
<area shape="rect" id="node46" href="misc_8h.html#a1598cadb907a20f9e5dc3e7ee74edb1d" title="ubifs_idx_branch" alt="" coords="1347,1101,1467,1128"/>
<area shape="rect" id="node48" href="ubifs_2io_8c.html#acfc2ca3ffa8d094855c2e59551f3a767" title="ubifs_prepare_node" alt="" coords="943,56,1078,83"/>
<area shape="rect" id="node49" href="ubifs_2io_8c.html#a0b3f089c430db97bbc68e362dc7867c8" title="next_sqnum" alt="" coords="1162,56,1255,83"/>
<area shape="rect" id="node50" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="1169,5,1248,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sb_8c_a7bacccbb99ed3d3f67a20cac2ac99990_icgraph.png" border="0" usemap="#sb_8c_a7bacccbb99ed3d3f67a20cac2ac99990_icgraph" alt=""/></div>
<map name="sb_8c_a7bacccbb99ed3d3f67a20cac2ac99990_icgraph" id="sb_8c_a7bacccbb99ed3d3f67a20cac2ac99990_icgraph">
<area shape="rect" id="node2" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="225,5,319,32"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="209,56,335,83"/>
<area shape="rect" id="node3" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="389,5,499,32"/>
<area shape="rect" id="node4" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="553,5,647,32"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="383,56,505,83"/>
</map>
</div>

</div>
</div>
<a id="a5aea8a0dedc50e5d3693a4961c3c494d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5aea8a0dedc50e5d3693a4961c3c494d">&#9670;&nbsp;</a></span>ubifs_read_sb_node()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structubifs__sb__node.html">ubifs_sb_node</a>* ubifs_read_sb_node </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_read_sb_node - read superblock node. <code></code>: UBIFS file-system description object</p>
<p>This function returns a pointer to the superblock node or a negative error code. Note, the user of this function is responsible of kfree()'ing the returned superblock buffer. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sb_8c_a5aea8a0dedc50e5d3693a4961c3c494d_cgraph.png" border="0" usemap="#sb_8c_a5aea8a0dedc50e5d3693a4961c3c494d_cgraph" alt=""/></div>
<map name="sb_8c_a5aea8a0dedc50e5d3693a4961c3c494d_cgraph" id="sb_8c_a5aea8a0dedc50e5d3693a4961c3c494d_cgraph">
<area shape="rect" id="node2" href="ubifs_2io_8c.html#ab1c29d586db30bacfa2c9a73369a8870" title="ubifs_read_node" alt="" coords="192,81,309,108"/>
<area shape="rect" id="node3" href="ubifs_2debug_8c.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="882,5,965,32"/>
<area shape="rect" id="node4" href="ubifs_2io_8c.html#ab6a2a3c4a79d6d4c52350540437d3cb3" title="ubifs_leb_read" alt="" coords="367,56,474,83"/>
<area shape="rect" id="node6" href="ubifs_2io_8c.html#ab9b2f0cc24eff9f69bd606979eb3a53e" title="ubifs_check_node" alt="" coords="357,107,484,133"/>
<area shape="rect" id="node7" href="ubifs_2debug_8c.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="532,157,656,184"/>
<area shape="rect" id="node5" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="558,81,630,108"/>
<area shape="rect" id="node8" href="ubifs_2debug_8c.html#a40190f9f60ac94040c30dbd97c73a3ca" title="dump_ch" alt="" coords="727,56,802,83"/>
<area shape="rect" id="node10" href="ubifs_2debug_8c.html#a4b30ad73e46b72b5043aa4efa7fb8d9a" title="get_key_hash" alt="" coords="713,107,816,133"/>
<area shape="rect" id="node11" href="ubifs_2debug_8c.html#af1196269cd9c24affacc60e33f960f49" title="get_key_fmt" alt="" coords="717,157,812,184"/>
<area shape="rect" id="node12" href="key_8h.html#a5611c13d648e672825da064c90c8903a" title="key_read" alt="" coords="727,208,802,235"/>
<area shape="rect" id="node13" href="ubifs_2debug_8c.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="704,259,825,285"/>
<area shape="rect" id="node19" href="misc_8h.html#a1598cadb907a20f9e5dc3e7ee74edb1d" title="ubifs_idx_branch" alt="" coords="705,309,825,336"/>
<area shape="rect" id="node9" href="ubifs_2debug_8c.html#a0137ecd738390d71f938f27be78c4477" title="dbg_gtype" alt="" coords="882,56,965,83"/>
<area shape="rect" id="node14" href="key_8h.html#a06f47822510ef850cb7065778115453c" title="key_type" alt="" coords="886,157,961,184"/>
<area shape="rect" id="node15" href="key_8h.html#a4a12b97ed78e138baf7886a6df7ed50f" title="key_inum" alt="" coords="884,208,963,235"/>
<area shape="rect" id="node16" href="ubifs_2debug_8c.html#ad6af0af711fdb082f6df4eaeb4d82fe6" title="get_key_type" alt="" coords="873,259,973,285"/>
<area shape="rect" id="node17" href="key_8h.html#acddf1ca88d72a37e06c5c608cd084656" title="key_hash" alt="" coords="884,309,963,336"/>
<area shape="rect" id="node18" href="key_8h.html#a10c13375b52dbb12be6f9b685d1d1ba7" title="key_block" alt="" coords="883,360,964,387"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sb_8c_a5aea8a0dedc50e5d3693a4961c3c494d_icgraph.png" border="0" usemap="#sb_8c_a5aea8a0dedc50e5d3693a4961c3c494d_icgraph" alt=""/></div>
<map name="sb_8c_a5aea8a0dedc50e5d3693a4961c3c494d_icgraph" id="sb_8c_a5aea8a0dedc50e5d3693a4961c3c494d_icgraph">
<area shape="rect" id="node2" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="403,5,528,32"/>
<area shape="rect" id="node4" href="ubifs_8h.html#a92995d9363effd044b46c432911fd7c6" title="ubifs_read_superblock" alt="" coords="197,107,349,133"/>
<area shape="rect" id="node8" href="ubifs_8h.html#a7bacccbb99ed3d3f67a20cac2ac99990" title="ubifs_fixup_free_space" alt="" coords="195,56,351,83"/>
<area shape="rect" id="node9" href="ubifs_8h.html#a79b22b1f088c88c40e019e23efb61e0a" title="ubifs_enable_encryption" alt="" coords="192,164,355,191"/>
<area shape="rect" id="node3" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="578,5,701,32"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="419,56,512,83"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="585,56,694,83"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="771,49,864,76"/>
<area shape="rect" id="node10" href="ubifs_8h.html#a9831447969acb35c927f7530bc47158e" title="ubifs_ioctl" alt="" coords="425,176,506,203"/>
<area shape="rect" id="node11" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="576,201,703,228"/>
<area shape="rect" id="node12" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="751,100,884,127"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="771,151,864,177"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="776,201,859,228"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="773,252,862,279"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="769,303,865,329"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="766,353,869,380"/>
<area shape="rect" id="node13" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="943,100,1017,127"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="932,176,1028,203"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="937,227,1023,253"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="1076,227,1176,253"/>
</map>
</div>

</div>
</div>
<a id="a92995d9363effd044b46c432911fd7c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92995d9363effd044b46c432911fd7c6">&#9670;&nbsp;</a></span>ubifs_read_superblock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ubifs_read_superblock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_read_superblock - read superblock. <code></code>: UBIFS file-system description object</p>
<p>This function finds, reads and checks the superblock. If an empty UBI volume is being mounted, this function creates default superblock. Returns zero in case of success, and a negative error code in case of failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sb_8c_a92995d9363effd044b46c432911fd7c6_cgraph.png" border="0" usemap="#sb_8c_a92995d9363effd044b46c432911fd7c6_cgraph" alt=""/></div>
<map name="sb_8c_a92995d9363effd044b46c432911fd7c6_cgraph" id="sb_8c_a92995d9363effd044b46c432911fd7c6_cgraph">
<area shape="rect" id="node2" href="sb_8c.html#a040c1c48545e70934b5e832f59366339" title="create_default_filesystem" alt="" coords="205,828,376,855"/>
<area shape="rect" id="node6" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1006,588,1078,615"/>
<area shape="rect" id="node37" href="key_8h.html#a9a10b02d73a5a824000f371a20d70ee7" title="key_r5_hash" alt="" coords="447,1019,543,1045"/>
<area shape="rect" id="node43" href="ubifs_2misc_8c.html#a49c185988382ac9b2f28935dd44a0441" title="ubifs_msg" alt="" coords="453,1069,536,1096"/>
<area shape="rect" id="node44" href="sb_8c.html#a5aea8a0dedc50e5d3693a4961c3c494d" title="ubifs_read_sb_node" alt="" coords="221,424,360,451"/>
<area shape="rect" id="node48" href="key_8h.html#ace0b36f7e7792eb4c92ca3e735137908" title="key_test_hash" alt="" coords="237,1159,344,1185"/>
<area shape="rect" id="node49" href="sb_8c.html#a9695fcc75ffa07efff2111b02ebd89c3" title="ubifs_write_sb_node" alt="" coords="424,917,565,944"/>
<area shape="rect" id="node50" href="sb_8c.html#ab18bf5d265fdb376ea8e8d8c0f77af4a" title="validate_sb" alt="" coords="451,524,539,551"/>
<area shape="rect" id="node3" href="lpt_8c.html#a2c22b57dd8b454ef3308f2f5b558763c" title="ubifs_create_dflt_lpt" alt="" coords="425,968,564,995"/>
<area shape="rect" id="node7" href="misc_8h.html#ac7a685691e935bc3ef4a7918e107c8de" title="ubifs_idx_node_sz" alt="" coords="615,715,746,741"/>
<area shape="rect" id="node22" href="ubifs_2io_8c.html#a5e156b540025dd2266e7f4c6c302356e" title="ubifs_write_node" alt="" coords="435,664,555,691"/>
<area shape="rect" id="node36" href="misc_8h.html#a1598cadb907a20f9e5dc3e7ee74edb1d" title="ubifs_idx_branch" alt="" coords="982,259,1102,285"/>
<area shape="rect" id="node40" href="key_8h.html#a60df8426bc46e1074661d077542ea933" title="ino_key_init" alt="" coords="449,867,540,893"/>
<area shape="rect" id="node41" href="key_8h.html#a6a23a0657894a1a52a8a3046007995b3" title="key_write_idx" alt="" coords="443,715,546,741"/>
<area shape="rect" id="node42" href="key_8h.html#a0eb1cf0ecc00556383b326058c65f846" title="ino_key_init_flash" alt="" coords="431,765,558,792"/>
<area shape="rect" id="node4" href="lpt_8c.html#ac2ee8aabdad7db3026557a3b8fe1fffa" title="calc_dflt_lpt_geom" alt="" coords="615,816,746,843"/>
<area shape="rect" id="node8" href="lpt_8c.html#a574e2659deacbc27b7d7738b336c32b0" title="ubifs_pack_pnode" alt="" coords="617,1069,744,1096"/>
<area shape="rect" id="node10" href="lpt_8c.html#a837361d188d5f97c2d8deb5c23714c4f" title="set_ltab" alt="" coords="647,1019,715,1045"/>
<area shape="rect" id="node11" href="ubifs_2io_8c.html#ac70865809ab5c33c55274560e453f535" title="ubifs_leb_change" alt="" coords="619,917,742,944"/>
<area shape="rect" id="node18" href="lpt_8c.html#ac83cbadb13b2425b8928e931848faf33" title="calc_nnode_num" alt="" coords="621,1120,741,1147"/>
<area shape="rect" id="node19" href="lpt_8c.html#afbec92ddd1b0c9598e498a10d859500b" title="ubifs_pack_nnode" alt="" coords="617,1171,744,1197"/>
<area shape="rect" id="node20" href="lpt_8c.html#ac11db630f1593b785cd612588586aeae" title="ubifs_pack_lsave" alt="" coords="619,1221,742,1248"/>
<area shape="rect" id="node21" href="lpt_8c.html#abad99814ae0b31a6bfee2356440bf809" title="ubifs_pack_ltab" alt="" coords="624,968,737,995"/>
<area shape="rect" id="node5" href="lpt_8c.html#a8b4d1e481e3c2afa2d9d7a3b334bba6c" title="do_calc_lpt_geom" alt="" coords="796,867,923,893"/>
<area shape="rect" id="node9" href="lpt_8c.html#ad94505f044e0e8c15f8d952701803027" title="pack_bits" alt="" coords="820,1221,899,1248"/>
<area shape="rect" id="node12" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="1161,1120,1280,1147"/>
<area shape="rect" id="node13" href="ubifs_2debug_8c.html#af2ad985422103ec5e3e13776002d6ceb" title="dbg_leb_change" alt="" coords="801,1069,917,1096"/>
<area shape="rect" id="node17" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="989,917,1095,944"/>
<area shape="rect" id="node14" href="ubifs_2debug_8h.html#ab599356d6c84ddd2c7b9001b452c30bd" title="dbg_is_power_cut" alt="" coords="979,1019,1105,1045"/>
<area shape="rect" id="node15" href="ubifs_2debug_8c.html#a67b6fc23cfbf882431d33323a03ef74c" title="power_cut_emulated" alt="" coords="971,1069,1113,1096"/>
<area shape="rect" id="node16" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="1178,943,1263,969"/>
<area shape="rect" id="node23" href="ubifs_2debug_8c.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="1179,309,1262,336"/>
<area shape="rect" id="node24" href="ubifs_2io_8c.html#acfc2ca3ffa8d094855c2e59551f3a767" title="ubifs_prepare_node" alt="" coords="613,765,748,792"/>
<area shape="rect" id="node27" href="ubifs_2io_8c.html#a02909cfc9d3a0100f549390c7d464632" title="ubifs_leb_write" alt="" coords="626,867,735,893"/>
<area shape="rect" id="node29" href="ubifs_2debug_8c.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="797,157,921,184"/>
<area shape="rect" id="node25" href="ubifs_2io_8c.html#a0b3f089c430db97bbc68e362dc7867c8" title="next_sqnum" alt="" coords="813,765,906,792"/>
<area shape="rect" id="node26" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="820,816,899,843"/>
<area shape="rect" id="node28" href="ubifs_2debug_8c.html#af929a6951e19c79f1235738386005c06" title="dbg_leb_write" alt="" coords="808,1019,911,1045"/>
<area shape="rect" id="node30" href="ubifs_2debug_8c.html#a40190f9f60ac94040c30dbd97c73a3ca" title="dump_ch" alt="" coords="1005,5,1079,32"/>
<area shape="rect" id="node32" href="ubifs_2debug_8c.html#a4b30ad73e46b72b5043aa4efa7fb8d9a" title="get_key_hash" alt="" coords="991,56,1093,83"/>
<area shape="rect" id="node33" href="ubifs_2debug_8c.html#af1196269cd9c24affacc60e33f960f49" title="get_key_fmt" alt="" coords="995,107,1089,133"/>
<area shape="rect" id="node34" href="key_8h.html#a5611c13d648e672825da064c90c8903a" title="key_read" alt="" coords="1005,157,1079,184"/>
<area shape="rect" id="node35" href="ubifs_2debug_8c.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="981,208,1103,235"/>
<area shape="rect" id="node31" href="ubifs_2debug_8c.html#a0137ecd738390d71f938f27be78c4477" title="dbg_gtype" alt="" coords="1179,5,1262,32"/>
<area shape="rect" id="node38" href="key_8h.html#af21b1399812ffc4f132af4b47381ae5c" title="key_mask_hash" alt="" coords="622,1272,739,1299"/>
<area shape="rect" id="node39" href="block__dev_8c.html#a79868b6f75989a03b1ad72c771d39cc1" title="hash" alt="" coords="834,1272,885,1299"/>
<area shape="rect" id="node45" href="ubifs_2io_8c.html#ab1c29d586db30bacfa2c9a73369a8870" title="ubifs_read_node" alt="" coords="436,360,553,387"/>
<area shape="rect" id="node46" href="ubifs_2io_8c.html#ab6a2a3c4a79d6d4c52350540437d3cb3" title="ubifs_leb_read" alt="" coords="806,461,913,488"/>
<area shape="rect" id="node47" href="ubifs_2io_8c.html#ab9b2f0cc24eff9f69bd606979eb3a53e" title="ubifs_check_node" alt="" coords="617,360,744,387"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sb_8c_a92995d9363effd044b46c432911fd7c6_icgraph.png" border="0" usemap="#sb_8c_a92995d9363effd044b46c432911fd7c6_icgraph" alt=""/></div>
<map name="sb_8c_a92995d9363effd044b46c432911fd7c6_icgraph" id="sb_8c_a92995d9363effd044b46c432911fd7c6_icgraph">
<area shape="rect" id="node2" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="205,5,299,32"/>
<area shape="rect" id="node3" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="347,5,456,32"/>
<area shape="rect" id="node4" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="504,5,597,32"/>
</map>
</div>

</div>
</div>
<a id="a9695fcc75ffa07efff2111b02ebd89c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9695fcc75ffa07efff2111b02ebd89c3">&#9670;&nbsp;</a></span>ubifs_write_sb_node()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ubifs_write_sb_node </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structubifs__sb__node.html">ubifs_sb_node</a> *&#160;</td>
          <td class="paramname"><em>sup</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_write_sb_node - write superblock node. <code></code>: UBIFS file-system description object : superblock node read with '<a class="el" href="sb_8c.html#a5aea8a0dedc50e5d3693a4961c3c494d">ubifs_read_sb_node()</a>'</p>
<p>This function returns %0 on success and a negative error code on failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sb_8c_a9695fcc75ffa07efff2111b02ebd89c3_cgraph.png" border="0" usemap="#sb_8c_a9695fcc75ffa07efff2111b02ebd89c3_cgraph" alt=""/></div>
<map name="sb_8c_a9695fcc75ffa07efff2111b02ebd89c3_cgraph" id="sb_8c_a9695fcc75ffa07efff2111b02ebd89c3_cgraph">
<area shape="rect" id="node2" href="ubifs_2io_8c.html#acfc2ca3ffa8d094855c2e59551f3a767" title="ubifs_prepare_node" alt="" coords="195,58,329,84"/>
<area shape="rect" id="node8" href="ubifs_2io_8c.html#ac70865809ab5c33c55274560e453f535" title="ubifs_leb_change" alt="" coords="201,159,323,186"/>
<area shape="rect" id="node3" href="ubifs_2io_8c.html#a0b3f089c430db97bbc68e362dc7867c8" title="next_sqnum" alt="" coords="389,58,482,84"/>
<area shape="rect" id="node7" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="396,7,475,34"/>
<area shape="rect" id="node4" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="955,1654,1027,1680"/>
<area shape="rect" id="node5" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="559,108,666,135"/>
<area shape="rect" id="node6" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="777,83,862,110"/>
<area shape="rect" id="node9" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="760,134,879,160"/>
<area shape="rect" id="node10" href="ubifs_2debug_8c.html#af2ad985422103ec5e3e13776002d6ceb" title="dbg_leb_change" alt="" coords="377,210,493,236"/>
<area shape="rect" id="node11" href="ubifs_2debug_8h.html#ab599356d6c84ddd2c7b9001b452c30bd" title="dbg_is_power_cut" alt="" coords="549,1096,676,1123"/>
<area shape="rect" id="node50" href="ubifs_2debug_8c.html#a67b6fc23cfbf882431d33323a03ef74c" title="power_cut_emulated" alt="" coords="541,210,684,236"/>
<area shape="rect" id="node12" href="ubifs_2debug_8h.html#aed9c32fd77ce70a2d917ab58c56189c2" title="ubifs_debugging_init" alt="" coords="749,438,889,464"/>
<area shape="rect" id="node13" href="ubifs_2debug_8h.html#a1e62d7c391f555902a25f8060eb6f1ec" title="ubifs_debugging_exit" alt="" coords="747,488,891,515"/>
<area shape="rect" id="node14" href="ubifs_2debug_8h.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="778,539,861,566"/>
<area shape="rect" id="node15" href="ubifs_2debug_8h.html#a615a670f26d4407b52175ce5f3faf594" title="dbg_cstate" alt="" coords="776,590,863,616"/>
<area shape="rect" id="node16" href="ubifs_2debug_8h.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="779,640,860,667"/>
<area shape="rect" id="node17" href="ubifs_2debug_8h.html#a4184d82b0b2ff0fffc6ab3d4de4a1e7a" title="dbg_get_key_dump" alt="" coords="752,691,887,718"/>
<area shape="rect" id="node18" href="ubifs_2debug_8h.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="759,742,880,768"/>
<area shape="rect" id="node19" href="ubifs_2debug_8h.html#a6ecc9bff59f14d28615ed14fa5323681" title="ubifs_dump_inode" alt="" coords="756,792,883,819"/>
<area shape="rect" id="node20" href="ubifs_2debug_8h.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="757,843,881,870"/>
<area shape="rect" id="node21" href="ubifs_2debug_8h.html#acfcbe45894b3b41385c1f9891d57bb97" title="ubifs_dump_budget_req" alt="" coords="739,894,899,920"/>
<area shape="rect" id="node22" href="ubifs_2debug_8h.html#ab351e7abb59edb97d57bd44dd83b0484" title="ubifs_dump_lstats" alt="" coords="755,944,883,971"/>
<area shape="rect" id="node23" href="ubifs_2debug_8h.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="757,995,881,1022"/>
<area shape="rect" id="node24" href="ubifs_2debug_8h.html#ad04e55858b69b78f20ea8b0fb79f9f27" title="ubifs_dump_lprop" alt="" coords="757,1046,881,1072"/>
<area shape="rect" id="node25" href="ubifs_2debug_8h.html#a2fa0aeaaa556f0b13d098456ef7d86d4" title="ubifs_dump_lprops" alt="" coords="754,1907,885,1934"/>
<area shape="rect" id="node26" href="ubifs_2debug_8h.html#afc25fcc00c516fab54a12303d87bc100" title="ubifs_dump_lpt_info" alt="" coords="750,1147,889,1174"/>
<area shape="rect" id="node27" href="ubifs_2debug_8h.html#afa1952f7d3c2c791a330e3dc245c5a83" title="ubifs_dump_leb" alt="" coords="763,1958,876,1984"/>
<area shape="rect" id="node28" href="ubifs_2debug_8h.html#a454a80414a371832b3f68f828f6a6353" title="ubifs_dump_sleb" alt="" coords="759,1248,879,1275"/>
<area shape="rect" id="node29" href="ubifs_2debug_8h.html#a56365d730ac6932bf3163a8ba7279779" title="ubifs_dump_znode" alt="" coords="754,1299,885,1326"/>
<area shape="rect" id="node30" href="ubifs_2debug_8h.html#a5600b63b8362df17ed46c4e20784fb6c" title="ubifs_dump_heap" alt="" coords="757,1350,881,1376"/>
<area shape="rect" id="node31" href="ubifs_2debug_8h.html#ab2224f946272a25cfacf2607c6502818" title="ubifs_dump_pnode" alt="" coords="754,1400,885,1427"/>
<area shape="rect" id="node32" href="ubifs_2debug_8h.html#a6ad4e8a10c442517164e350787696d9d" title="ubifs_dump_tnc" alt="" coords="762,1451,877,1478"/>
<area shape="rect" id="node33" href="ubifs_2debug_8h.html#a1988de032288d9afc418a9f36c0e1a38" title="ubifs_dump_index" alt="" coords="756,1502,883,1528"/>
<area shape="rect" id="node34" href="ubifs_2debug_8h.html#a2dad580c9c3f21053039a854eb81bed2" title="ubifs_dump_lpt_lebs" alt="" coords="749,1552,890,1579"/>
<area shape="rect" id="node35" href="ubifs_2debug_8h.html#ac9540eb544441fb116e86f4799b55265" title="dbg_walk_index" alt="" coords="762,2008,877,2035"/>
<area shape="rect" id="node36" href="ubifs_2debug_8h.html#a42a0e664e63f651533d2a5abc23bf4da" title="dbg_save_space_info" alt="" coords="745,1603,893,1630"/>
<area shape="rect" id="node37" href="ubifs_2debug_8h.html#ace23cd2189dd2d7a9435ddd891e9beaa" title="dbg_check_space_info" alt="" coords="742,2059,897,2086"/>
<area shape="rect" id="node38" href="ubifs_2debug_8h.html#a69534405790cc12f492343243bc539a4" title="dbg_check_lprops" alt="" coords="756,184,883,211"/>
<area shape="rect" id="node39" href="ubifs_2debug_8h.html#a725dc62445ba29e272e4ccb5b10fbc61" title="dbg_old_index_check_init" alt="" coords="734,1704,905,1731"/>
<area shape="rect" id="node40" href="ubifs_2debug_8h.html#a23369147b6e2214867a8a650ad50ebaf" title="dbg_check_old_index" alt="" coords="746,235,893,262"/>
<area shape="rect" id="node41" href="ubifs_2debug_8h.html#a4d24d720745a25e26d273dc892c703eb" title="dbg_check_cats" alt="" coords="761,286,878,312"/>
<area shape="rect" id="node42" href="ubifs_2debug_8h.html#a0326c90a004af4486c5ad1dbc25baf29" title="dbg_check_ltab" alt="" coords="763,336,876,363"/>
<area shape="rect" id="node43" href="ubifs_2debug_8h.html#ab2f0c34c5385c6b4af6f326fac750a70" title="dbg_chk_lpt_free_spc" alt="" coords="745,387,894,414"/>
<area shape="rect" id="node44" href="ubifs_2debug_8h.html#a8743b404fd4536a6f2212846f55854d0" title="dbg_chk_lpt_sz" alt="" coords="763,1096,876,1123"/>
<area shape="rect" id="node45" href="ubifs_2debug_8h.html#ad20ad974aa8f10603e2468787760af65" title="dbg_check_synced_i_size" alt="" coords="732,1198,907,1224"/>
<area shape="rect" id="node46" href="ubifs_2debug_8h.html#ae64cd5f4e9b71d0d2167e1f8dafd9cd0" title="dbg_check_dir" alt="" coords="766,1654,873,1680"/>
<area shape="rect" id="node47" href="ubifs_2debug_8h.html#a8e749de733b483ca979984b8aa078aa6" title="dbg_check_tnc" alt="" coords="764,1755,875,1782"/>
<area shape="rect" id="node48" href="ubifs_2debug_8h.html#a6f442c5e8d297e33d3bdaea0887419e6" title="dbg_check_idx_size" alt="" coords="749,1806,889,1832"/>
<area shape="rect" id="node49" href="ubifs_2debug_8h.html#a731d5cfe8b5dfa819687b4924a384a35" title="dbg_check_filesystem" alt="" coords="743,1856,895,1883"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sb_8c_a9695fcc75ffa07efff2111b02ebd89c3_icgraph.png" border="0" usemap="#sb_8c_a9695fcc75ffa07efff2111b02ebd89c3_icgraph" alt=""/></div>
<map name="sb_8c_a9695fcc75ffa07efff2111b02ebd89c3_icgraph" id="sb_8c_a9695fcc75ffa07efff2111b02ebd89c3_icgraph">
<area shape="rect" id="node2" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="405,5,531,32"/>
<area shape="rect" id="node4" href="ubifs_8h.html#a92995d9363effd044b46c432911fd7c6" title="ubifs_read_superblock" alt="" coords="200,107,352,133"/>
<area shape="rect" id="node8" href="ubifs_8h.html#a7bacccbb99ed3d3f67a20cac2ac99990" title="ubifs_fixup_free_space" alt="" coords="198,56,354,83"/>
<area shape="rect" id="node9" href="ubifs_8h.html#a79b22b1f088c88c40e019e23efb61e0a" title="ubifs_enable_encryption" alt="" coords="195,164,357,191"/>
<area shape="rect" id="node3" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="581,5,703,32"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="421,56,515,83"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="587,56,697,83"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="773,49,867,76"/>
<area shape="rect" id="node10" href="ubifs_8h.html#a9831447969acb35c927f7530bc47158e" title="ubifs_ioctl" alt="" coords="427,176,509,203"/>
<area shape="rect" id="node11" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="579,201,705,228"/>
<area shape="rect" id="node12" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="753,100,887,127"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="773,151,867,177"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="779,201,861,228"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="775,252,865,279"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="772,303,868,329"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="769,353,871,380"/>
<area shape="rect" id="node13" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="946,100,1019,127"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="935,176,1031,203"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="939,227,1026,253"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="1079,227,1179,253"/>
</map>
</div>

</div>
</div>
<a id="ab18bf5d265fdb376ea8e8d8c0f77af4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab18bf5d265fdb376ea8e8d8c0f77af4a">&#9670;&nbsp;</a></span>validate_sb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int validate_sb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structubifs__sb__node.html">ubifs_sb_node</a> *&#160;</td>
          <td class="paramname"><em>sup</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>validate_sb - validate superblock node. <code></code>: UBIFS file-system description object : superblock node</p>
<p>This function validates superblock node . Since most of data was read from the superblock and stored in <code></code>, the function validates fields in <code>instead</code>. Returns zero in case of success and %-EINVAL in case of validation failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sb_8c_ab18bf5d265fdb376ea8e8d8c0f77af4a_cgraph.png" border="0" usemap="#sb_8c_ab18bf5d265fdb376ea8e8d8c0f77af4a_cgraph" alt=""/></div>
<map name="sb_8c_ab18bf5d265fdb376ea8e8d8c0f77af4a_cgraph" id="sb_8c_ab18bf5d265fdb376ea8e8d8c0f77af4a_cgraph">
<area shape="rect" id="node2" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="171,56,243,83"/>
<area shape="rect" id="node3" href="misc_8h.html#ac7a685691e935bc3ef4a7918e107c8de" title="ubifs_idx_node_sz" alt="" coords="141,107,272,133"/>
<area shape="rect" id="node4" href="ubifs_2debug_8c.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="145,157,269,184"/>
<area shape="rect" id="node5" href="ubifs_2debug_8c.html#a40190f9f60ac94040c30dbd97c73a3ca" title="dump_ch" alt="" coords="343,31,418,57"/>
<area shape="rect" id="node8" href="ubifs_2debug_8c.html#a4b30ad73e46b72b5043aa4efa7fb8d9a" title="get_key_hash" alt="" coords="329,81,432,108"/>
<area shape="rect" id="node9" href="ubifs_2debug_8c.html#af1196269cd9c24affacc60e33f960f49" title="get_key_fmt" alt="" coords="333,132,428,159"/>
<area shape="rect" id="node10" href="key_8h.html#a5611c13d648e672825da064c90c8903a" title="key_read" alt="" coords="343,183,418,209"/>
<area shape="rect" id="node11" href="ubifs_2debug_8c.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="320,233,441,260"/>
<area shape="rect" id="node17" href="misc_8h.html#a1598cadb907a20f9e5dc3e7ee74edb1d" title="ubifs_idx_branch" alt="" coords="321,284,441,311"/>
<area shape="rect" id="node6" href="ubifs_2debug_8c.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="498,5,581,32"/>
<area shape="rect" id="node7" href="ubifs_2debug_8c.html#a0137ecd738390d71f938f27be78c4477" title="dbg_gtype" alt="" coords="498,56,581,83"/>
<area shape="rect" id="node12" href="key_8h.html#a06f47822510ef850cb7065778115453c" title="key_type" alt="" coords="502,132,577,159"/>
<area shape="rect" id="node13" href="key_8h.html#a4a12b97ed78e138baf7886a6df7ed50f" title="key_inum" alt="" coords="500,183,579,209"/>
<area shape="rect" id="node14" href="ubifs_2debug_8c.html#ad6af0af711fdb082f6df4eaeb4d82fe6" title="get_key_type" alt="" coords="489,233,589,260"/>
<area shape="rect" id="node15" href="key_8h.html#acddf1ca88d72a37e06c5c608cd084656" title="key_hash" alt="" coords="500,284,579,311"/>
<area shape="rect" id="node16" href="key_8h.html#a10c13375b52dbb12be6f9b685d1d1ba7" title="key_block" alt="" coords="499,335,580,361"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sb_8c_ab18bf5d265fdb376ea8e8d8c0f77af4a_icgraph.png" border="0" usemap="#sb_8c_ab18bf5d265fdb376ea8e8d8c0f77af4a_icgraph" alt=""/></div>
<map name="sb_8c_ab18bf5d265fdb376ea8e8d8c0f77af4a_icgraph" id="sb_8c_ab18bf5d265fdb376ea8e8d8c0f77af4a_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#a92995d9363effd044b46c432911fd7c6" title="ubifs_read_superblock" alt="" coords="141,5,293,32"/>
<area shape="rect" id="node3" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="341,5,435,32"/>
<area shape="rect" id="node4" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="483,5,592,32"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="640,5,733,32"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_fbbc61eb3235ac15a35746d00bf5db85.html">ubifs</a></li><li class="navelem"><a class="el" href="sb_8c.html">sb.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>

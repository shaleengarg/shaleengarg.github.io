<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>linux/fs: ntfs/namei.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">linux/fs
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('ntfs_2namei_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">namei.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;linux/dcache.h&gt;</code><br />
<code>#include &lt;linux/exportfs.h&gt;</code><br />
<code>#include &lt;linux/security.h&gt;</code><br />
<code>#include &lt;linux/slab.h&gt;</code><br />
<code>#include &quot;<a class="el" href="attrib_8h_source.html">attrib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ntfs_2debug_8h_source.html">debug.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ntfs_2dir_8h_source.html">dir.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mft_8h_source.html">mft.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ntfs_8h_source.html">ntfs.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for namei.c:</div>
<div class="dyncontent">
<div class="center"><img src="ntfs_2namei_8c__incl.png" border="0" usemap="#ntfs_2namei_8c" alt=""/></div>
<map name="ntfs_2namei_8c" id="ntfs_2namei_8c">
<area shape="rect" id="node6" href="attrib_8h.html" title="attrib.h" alt="" coords="519,80,582,107"/>
<area shape="rect" id="node24" href="ntfs_2debug_8h.html" title="debug.h" alt="" coords="1177,229,1245,256"/>
<area shape="rect" id="node25" href="ntfs_2dir_8h.html" title="dir.h" alt="" coords="637,80,683,107"/>
<area shape="rect" id="node26" href="mft_8h.html" title="mft.h" alt="" coords="1314,80,1366,107"/>
<area shape="rect" id="node29" href="ntfs_8h.html" title="ntfs.h" alt="" coords="1615,229,1670,256"/>
<area shape="rect" id="node7" href="ntfs_2endian_8h.html" title="endian.h" alt="" coords="34,453,105,480"/>
<area shape="rect" id="node9" href="types_8h.html" title="types.h" alt="" coords="658,528,723,555"/>
<area shape="rect" id="node11" href="layout_8h.html" title="layout.h" alt="" coords="283,453,351,480"/>
<area shape="rect" id="node14" href="ntfs_2inode_8h.html" title="inode.h" alt="" coords="659,155,723,181"/>
<area shape="rect" id="node20" href="volume_8h.html" title="volume.h" alt="" coords="497,379,572,405"/>
<area shape="rect" id="node23" href="runlist_8h.html" title="runlist.h" alt="" coords="505,304,573,331"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0ffa88e6d3aa875d3313c7b039c61bf8"><td class="memItemLeft" align="right" valign="top">static struct dentry *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ntfs_2namei_8c.html#a0ffa88e6d3aa875d3313c7b039c61bf8">ntfs_lookup</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *dir_ino, struct dentry *dent, unsigned int <a class="el" href="structflags.html">flags</a>)</td></tr>
<tr class="separator:a0ffa88e6d3aa875d3313c7b039c61bf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7fb2735edcadcdb47d7a21a99cc782e"><td class="memItemLeft" align="right" valign="top">static struct dentry *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ntfs_2namei_8c.html#ab7fb2735edcadcdb47d7a21a99cc782e">ntfs_get_parent</a> (struct dentry *child_dent)</td></tr>
<tr class="separator:ab7fb2735edcadcdb47d7a21a99cc782e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a165e61fa447531537b45b1f149919e90"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ntfs_2namei_8c.html#a165e61fa447531537b45b1f149919e90">ntfs_nfs_get_inode</a> (struct <a class="el" href="structsuper__block.html">super_block</a> *<a class="el" href="ntfs_2debug_8h.html#a65b1b0602e37268ec9bc2c240a676c39">sb</a>, u64 <a class="el" href="xfs__export_8h.html#ace6b53078098dab03e74e0bc1eab5eb8">ino</a>, u32 <a class="el" href="ctree_8h.html#a44bc5fcd579c05c8ced09f3c7c0ef1ac">generation</a>)</td></tr>
<tr class="separator:a165e61fa447531537b45b1f149919e90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad17f9e2b817c67072d09bb98eea5fff6"><td class="memItemLeft" align="right" valign="top">static struct dentry *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ntfs_2namei_8c.html#ad17f9e2b817c67072d09bb98eea5fff6">ntfs_fh_to_dentry</a> (struct <a class="el" href="structsuper__block.html">super_block</a> *<a class="el" href="ntfs_2debug_8h.html#a65b1b0602e37268ec9bc2c240a676c39">sb</a>, struct fid *fid, int fh_len, int fh_type)</td></tr>
<tr class="separator:ad17f9e2b817c67072d09bb98eea5fff6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9439d6466934893029b39ef861d97d4e"><td class="memItemLeft" align="right" valign="top">static struct dentry *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ntfs_2namei_8c.html#a9439d6466934893029b39ef861d97d4e">ntfs_fh_to_parent</a> (struct <a class="el" href="structsuper__block.html">super_block</a> *<a class="el" href="ntfs_2debug_8h.html#a65b1b0602e37268ec9bc2c240a676c39">sb</a>, struct fid *fid, int fh_len, int fh_type)</td></tr>
<tr class="separator:a9439d6466934893029b39ef861d97d4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:adaea4bd00243e143331fe3b54666cfe7"><td class="memItemLeft" align="right" valign="top">const struct inode_operations&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ntfs_2namei_8c.html#adaea4bd00243e143331fe3b54666cfe7">ntfs_dir_inode_ops</a></td></tr>
<tr class="separator:adaea4bd00243e143331fe3b54666cfe7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1203ae54c9a457a9ff116b7ed0f54496"><td class="memItemLeft" align="right" valign="top">const struct export_operations&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ntfs_2namei_8c.html#a1203ae54c9a457a9ff116b7ed0f54496">ntfs_export_ops</a></td></tr>
<tr class="separator:a1203ae54c9a457a9ff116b7ed0f54496"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ad17f9e2b817c67072d09bb98eea5fff6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad17f9e2b817c67072d09bb98eea5fff6">&#9670;&nbsp;</a></span>ntfs_fh_to_dentry()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct dentry* ntfs_fh_to_dentry </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structsuper__block.html">super_block</a> *&#160;</td>
          <td class="paramname"><em>sb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct fid *&#160;</td>
          <td class="paramname"><em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fh_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fh_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ntfs_2namei_8c_ad17f9e2b817c67072d09bb98eea5fff6_cgraph.png" border="0" usemap="#ntfs_2namei_8c_ad17f9e2b817c67072d09bb98eea5fff6_cgraph" alt=""/></div>
<map name="ntfs_2namei_8c_ad17f9e2b817c67072d09bb98eea5fff6_cgraph" id="ntfs_2namei_8c_ad17f9e2b817c67072d09bb98eea5fff6_cgraph">
<area shape="rect" id="node2" href="libfs_8c.html#aba14ff92af6da728f9072ae1319140ac" title="generic_fh_to_dentry" alt="" coords="356,76,499,102"/>
<area shape="rect" id="node19" href="ntfs_2namei_8c.html#a165e61fa447531537b45b1f149919e90" title="ntfs_nfs_get_inode" alt="" coords="176,253,308,280"/>
<area shape="rect" id="node3" href="dcache_8c.html#a03ce2f4be5be80d88172bfcb3dd2e81b" title="d_obtain_alias" alt="" coords="580,25,685,52"/>
<area shape="rect" id="node18" href="libfs_8c.html#a9bade89b22c1168f5c45b579caa2b48e" title="EXPORT_SYMBOL_GPL" alt="" coords="547,76,719,102"/>
<area shape="rect" id="node4" href="dcache_8c.html#a68d05e67717c32cddd6708619209a86b" title="__d_obtain_alias" alt="" coords="805,76,923,102"/>
<area shape="rect" id="node7" href="dcache_8c.html#aeb5ec7bdf3301140d66dd18ae638685c" title="EXPORT_SYMBOL" alt="" coords="1233,25,1372,52"/>
<area shape="rect" id="node5" href="dcache_8c.html#a12f52b8fa0d189193e7462423ca292ac" title="d_find_any_alias" alt="" coords="1038,76,1157,102"/>
<area shape="rect" id="node8" href="dcache_8c.html#a999805f127eec9cad9629421138453eb" title="d_alloc_anon" alt="" coords="1048,25,1147,52"/>
<area shape="rect" id="node9" href="dcache_8c.html#afe49d54c2443493391c7f5421af9a10f" title="__d_instantiate_anon" alt="" coords="1025,126,1170,153"/>
<area shape="rect" id="node10" href="inode_8c.html#a378733dcbf0fb08359b9a02145ac8fc3" title="iput" alt="" coords="1281,734,1324,761"/>
<area shape="rect" id="node6" href="dcache_8c.html#a5e704be755f5ac21f56b378ea48f989e" title="__d_find_any_alias" alt="" coords="1236,101,1369,128"/>
<area shape="rect" id="node11" href="inode_8c.html#a7e99b25ac29d19bc82fbddcb773c4f25" title="iput_final" alt="" coords="1452,684,1527,710"/>
<area shape="rect" id="node17" href="debugfs_2inode_8c.html#a16e485b5debd4cd96a200844c38df190" title="EXPORT_SYMBOL" alt="" coords="1420,582,1559,609"/>
<area shape="rect" id="node12" href="inode_8c.html#a943dee860d20f57552f168683dcb4b5d" title="inode_add_lru" alt="" coords="1617,582,1719,609"/>
<area shape="rect" id="node13" href="fs-writeback_8c.html#aceeba3df6a433f68c665086a2ee53faa" title="write_inode_now" alt="" coords="1609,633,1727,660"/>
<area shape="rect" id="node14" href="inode_8c.html#a1f2fe8883e70882e845560b2ccf4ab16" title="inode_lru_list_del" alt="" coords="1607,684,1729,710"/>
<area shape="rect" id="node15" href="inode_8c.html#a4b62e1e360840615442b8ad6a9f16bc7" title="evict" alt="" coords="1643,734,1693,761"/>
<area shape="rect" id="node16" href="inode_8c.html#a076b86296ed39596f96ef03ea8aa74d7" title="destroy_inode" alt="" coords="1777,633,1880,660"/>
<area shape="rect" id="node20" href="ntfs_2inode_8c.html#aa96c9ef81adffe095044a53a49d5d581" title="ntfs_iget" alt="" coords="391,380,463,406"/>
<area shape="rect" id="node32" href="bad__inode_8c.html#a7db3c62ffb9390ef7191a63e19073333" title="is_bad_inode" alt="" coords="1048,228,1147,254"/>
<area shape="rect" id="node21" href="inode_8c.html#a0e9a0440646ab0424be87f1ee6387c64" title="iget5_locked" alt="" coords="1050,532,1145,558"/>
<area shape="rect" id="node26" href="ntfs_2inode_8c.html#a6d8b96cf26fa5d3d90420acd32a57453" title="ntfs_test_inode" alt="" coords="1042,329,1153,356"/>
<area shape="rect" id="node28" href="ntfs_2inode_8c.html#a7a81decedcd1c604395899479ed81c7b" title="ntfs_init_locked_inode" alt="" coords="1022,380,1173,406"/>
<area shape="rect" id="node29" href="ntfs_2inode_8c.html#abb7b69ff7b1ae5e34a80a17ec6bb0f87" title="ntfs_read_locked_inode" alt="" coords="553,886,712,913"/>
<area shape="rect" id="node48" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="1033,481,1162,508"/>
<area shape="rect" id="node22" href="inode_8c.html#aa1822403d896f1040c371de082022045" title="hash" alt="" coords="1277,684,1328,710"/>
<area shape="rect" id="node23" href="inode_8c.html#af827e753dda790b4b798f86e933bb380" title="find_inode" alt="" coords="1262,532,1343,558"/>
<area shape="rect" id="node24" href="inode_8c.html#a6328f7a2621c5365a1df969e8c7ab998" title="alloc_inode" alt="" coords="1259,582,1346,609"/>
<area shape="rect" id="node25" href="inode_8c.html#a1871c58d9c393006e24f7fea1bcc288d" title="inode_sb_list_add" alt="" coords="1239,633,1366,660"/>
<area shape="rect" id="node27" href="ntfs_2inode_8h.html#a6efd5f611b35ed752fdf15917c707e6d" title="NTFS_I" alt="" coords="1269,329,1337,356"/>
<area shape="rect" id="node30" href="ntfs_8h.html#a7bd82112df01116e1297aa8165d02ff2" title="NTFS_SB" alt="" coords="823,836,905,862"/>
<area shape="rect" id="node31" href="ntfs_2inode_8h.html#aeea6b534f12d270732818f1335215630" title="ntfs_init_big_inode" alt="" coords="799,228,929,254"/>
<area shape="rect" id="node34" href="mft_8c.html#aab879cd658d486f45345e08fa15f276c" title="map_mft_record" alt="" coords="1039,848,1155,874"/>
<area shape="rect" id="node35" href="attrib_8c.html#a790cab56d5e72fa613e5ac57c74d000d" title="ntfs_attr_get_search_ctx" alt="" coords="1014,904,1181,930"/>
<area shape="rect" id="node36" href="inode_8c.html#a01ed868f59230449a75b85f7157efd95" title="set_nlink" alt="" coords="827,633,901,660"/>
<area shape="rect" id="node37" href="attrib_8c.html#ad0fa0a5955dbd1e17a84b12d3dc3e5d2" title="ntfs_attr_lookup" alt="" coords="1040,1062,1155,1089"/>
<area shape="rect" id="node38" href="time_8h.html#accce553a225e57452d2b2f653739bfa6" title="ntfs2utc" alt="" coords="829,1316,899,1342"/>
<area shape="rect" id="node39" href="ntfs_2endian_8h.html#a2e96c421837ca8d7008130e9d8bdcfdb" title="sle64_to_cpu" alt="" coords="1253,1316,1352,1342"/>
<area shape="rect" id="node40" href="attrib_8c.html#ae39c510288e49f68010493e93cf02ab8" title="ntfs_attr_reinit_search_ctx" alt="" coords="1009,1012,1185,1038"/>
<area shape="rect" id="node41" href="attrib_8h.html#a5b3c6da7b30052eb909742ccb604568a" title="ntfs_attr_size" alt="" coords="813,1214,915,1241"/>
<area shape="rect" id="node42" href="malloc_8h.html#a0ec96764a4b9b46c2cd4a78abea5ed5d" title="ntfs_malloc_nofs" alt="" coords="1242,1454,1363,1481"/>
<area shape="rect" id="node43" href="runlist_8c.html#ac2497788c7a1fae2c52dbca08330804c" title="ntfs_mapping_pairs\l_decompress" alt="" coords="1030,1418,1165,1459"/>
<area shape="rect" id="node44" href="attrib_8c.html#af974b43c7fc0a8cdacfce631af06d0bb" title="load_attribute_list" alt="" coords="802,684,926,710"/>
<area shape="rect" id="node45" href="attrib_8c.html#a4959e9081ff22f6912010201efcc1c0b" title="ntfs_attr_put_search_ctx" alt="" coords="781,961,947,988"/>
<area shape="rect" id="node46" href="mft_8c.html#acdca69e797b129f8be7643ed91f691bd" title="unmap_mft_record" alt="" coords="1032,1138,1163,1165"/>
<area shape="rect" id="node47" href="ntfs_2inode_8c.html#a5cbfd09234c5615f6dbf757587558bd3" title="ntfs_attr_iget" alt="" coords="815,481,913,508"/>
<area shape="rect" id="node49" href="ntfs_2inode_8c.html#a95369e929e520667ddb68d49c9e4bde4" title="ntfs_is_extended_system_file" alt="" coords="767,1062,961,1089"/>
<area shape="rect" id="node50" href="bad__inode_8c.html#ab9cc2af6161530b35e5f86e29f977033" title="make_bad_inode" alt="" coords="804,177,924,204"/>
<area shape="rect" id="node33" href="bad__inode_8c.html#a74ff3566c64350315f12163f4ddfdae7" title="EXPORT_SYMBOL" alt="" coords="1233,202,1372,229"/>
</map>
</div>

</div>
</div>
<a id="a9439d6466934893029b39ef861d97d4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9439d6466934893029b39ef861d97d4e">&#9670;&nbsp;</a></span>ntfs_fh_to_parent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct dentry* ntfs_fh_to_parent </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structsuper__block.html">super_block</a> *&#160;</td>
          <td class="paramname"><em>sb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct fid *&#160;</td>
          <td class="paramname"><em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fh_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fh_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ntfs_2namei_8c_a9439d6466934893029b39ef861d97d4e_cgraph.png" border="0" usemap="#ntfs_2namei_8c_a9439d6466934893029b39ef861d97d4e_cgraph" alt=""/></div>
<map name="ntfs_2namei_8c_a9439d6466934893029b39ef861d97d4e_cgraph" id="ntfs_2namei_8c_a9439d6466934893029b39ef861d97d4e_cgraph">
<area shape="rect" id="node2" href="libfs_8c.html#ab1339e196d1f245422e95e73e64e9ec5" title="generic_fh_to_parent" alt="" coords="356,76,499,102"/>
<area shape="rect" id="node19" href="ntfs_2namei_8c.html#a165e61fa447531537b45b1f149919e90" title="ntfs_nfs_get_inode" alt="" coords="176,253,308,280"/>
<area shape="rect" id="node3" href="dcache_8c.html#a03ce2f4be5be80d88172bfcb3dd2e81b" title="d_obtain_alias" alt="" coords="580,25,685,52"/>
<area shape="rect" id="node18" href="libfs_8c.html#a9bade89b22c1168f5c45b579caa2b48e" title="EXPORT_SYMBOL_GPL" alt="" coords="547,76,719,102"/>
<area shape="rect" id="node4" href="dcache_8c.html#a68d05e67717c32cddd6708619209a86b" title="__d_obtain_alias" alt="" coords="805,76,923,102"/>
<area shape="rect" id="node7" href="dcache_8c.html#aeb5ec7bdf3301140d66dd18ae638685c" title="EXPORT_SYMBOL" alt="" coords="1233,25,1372,52"/>
<area shape="rect" id="node5" href="dcache_8c.html#a12f52b8fa0d189193e7462423ca292ac" title="d_find_any_alias" alt="" coords="1038,76,1157,102"/>
<area shape="rect" id="node8" href="dcache_8c.html#a999805f127eec9cad9629421138453eb" title="d_alloc_anon" alt="" coords="1048,25,1147,52"/>
<area shape="rect" id="node9" href="dcache_8c.html#afe49d54c2443493391c7f5421af9a10f" title="__d_instantiate_anon" alt="" coords="1025,126,1170,153"/>
<area shape="rect" id="node10" href="inode_8c.html#a378733dcbf0fb08359b9a02145ac8fc3" title="iput" alt="" coords="1281,734,1324,761"/>
<area shape="rect" id="node6" href="dcache_8c.html#a5e704be755f5ac21f56b378ea48f989e" title="__d_find_any_alias" alt="" coords="1236,101,1369,128"/>
<area shape="rect" id="node11" href="inode_8c.html#a7e99b25ac29d19bc82fbddcb773c4f25" title="iput_final" alt="" coords="1452,684,1527,710"/>
<area shape="rect" id="node17" href="debugfs_2inode_8c.html#a16e485b5debd4cd96a200844c38df190" title="EXPORT_SYMBOL" alt="" coords="1420,582,1559,609"/>
<area shape="rect" id="node12" href="inode_8c.html#a943dee860d20f57552f168683dcb4b5d" title="inode_add_lru" alt="" coords="1617,582,1719,609"/>
<area shape="rect" id="node13" href="fs-writeback_8c.html#aceeba3df6a433f68c665086a2ee53faa" title="write_inode_now" alt="" coords="1609,633,1727,660"/>
<area shape="rect" id="node14" href="inode_8c.html#a1f2fe8883e70882e845560b2ccf4ab16" title="inode_lru_list_del" alt="" coords="1607,684,1729,710"/>
<area shape="rect" id="node15" href="inode_8c.html#a4b62e1e360840615442b8ad6a9f16bc7" title="evict" alt="" coords="1643,734,1693,761"/>
<area shape="rect" id="node16" href="inode_8c.html#a076b86296ed39596f96ef03ea8aa74d7" title="destroy_inode" alt="" coords="1777,633,1880,660"/>
<area shape="rect" id="node20" href="ntfs_2inode_8c.html#aa96c9ef81adffe095044a53a49d5d581" title="ntfs_iget" alt="" coords="391,380,463,406"/>
<area shape="rect" id="node32" href="bad__inode_8c.html#a7db3c62ffb9390ef7191a63e19073333" title="is_bad_inode" alt="" coords="1048,228,1147,254"/>
<area shape="rect" id="node21" href="inode_8c.html#a0e9a0440646ab0424be87f1ee6387c64" title="iget5_locked" alt="" coords="1050,532,1145,558"/>
<area shape="rect" id="node26" href="ntfs_2inode_8c.html#a6d8b96cf26fa5d3d90420acd32a57453" title="ntfs_test_inode" alt="" coords="1042,329,1153,356"/>
<area shape="rect" id="node28" href="ntfs_2inode_8c.html#a7a81decedcd1c604395899479ed81c7b" title="ntfs_init_locked_inode" alt="" coords="1022,380,1173,406"/>
<area shape="rect" id="node29" href="ntfs_2inode_8c.html#abb7b69ff7b1ae5e34a80a17ec6bb0f87" title="ntfs_read_locked_inode" alt="" coords="553,886,712,913"/>
<area shape="rect" id="node48" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="1033,481,1162,508"/>
<area shape="rect" id="node22" href="inode_8c.html#aa1822403d896f1040c371de082022045" title="hash" alt="" coords="1277,684,1328,710"/>
<area shape="rect" id="node23" href="inode_8c.html#af827e753dda790b4b798f86e933bb380" title="find_inode" alt="" coords="1262,532,1343,558"/>
<area shape="rect" id="node24" href="inode_8c.html#a6328f7a2621c5365a1df969e8c7ab998" title="alloc_inode" alt="" coords="1259,582,1346,609"/>
<area shape="rect" id="node25" href="inode_8c.html#a1871c58d9c393006e24f7fea1bcc288d" title="inode_sb_list_add" alt="" coords="1239,633,1366,660"/>
<area shape="rect" id="node27" href="ntfs_2inode_8h.html#a6efd5f611b35ed752fdf15917c707e6d" title="NTFS_I" alt="" coords="1269,329,1337,356"/>
<area shape="rect" id="node30" href="ntfs_8h.html#a7bd82112df01116e1297aa8165d02ff2" title="NTFS_SB" alt="" coords="823,836,905,862"/>
<area shape="rect" id="node31" href="ntfs_2inode_8h.html#aeea6b534f12d270732818f1335215630" title="ntfs_init_big_inode" alt="" coords="799,228,929,254"/>
<area shape="rect" id="node34" href="mft_8c.html#aab879cd658d486f45345e08fa15f276c" title="map_mft_record" alt="" coords="1039,848,1155,874"/>
<area shape="rect" id="node35" href="attrib_8c.html#a790cab56d5e72fa613e5ac57c74d000d" title="ntfs_attr_get_search_ctx" alt="" coords="1014,904,1181,930"/>
<area shape="rect" id="node36" href="inode_8c.html#a01ed868f59230449a75b85f7157efd95" title="set_nlink" alt="" coords="827,633,901,660"/>
<area shape="rect" id="node37" href="attrib_8c.html#ad0fa0a5955dbd1e17a84b12d3dc3e5d2" title="ntfs_attr_lookup" alt="" coords="1040,1062,1155,1089"/>
<area shape="rect" id="node38" href="time_8h.html#accce553a225e57452d2b2f653739bfa6" title="ntfs2utc" alt="" coords="829,1316,899,1342"/>
<area shape="rect" id="node39" href="ntfs_2endian_8h.html#a2e96c421837ca8d7008130e9d8bdcfdb" title="sle64_to_cpu" alt="" coords="1253,1316,1352,1342"/>
<area shape="rect" id="node40" href="attrib_8c.html#ae39c510288e49f68010493e93cf02ab8" title="ntfs_attr_reinit_search_ctx" alt="" coords="1009,1012,1185,1038"/>
<area shape="rect" id="node41" href="attrib_8h.html#a5b3c6da7b30052eb909742ccb604568a" title="ntfs_attr_size" alt="" coords="813,1214,915,1241"/>
<area shape="rect" id="node42" href="malloc_8h.html#a0ec96764a4b9b46c2cd4a78abea5ed5d" title="ntfs_malloc_nofs" alt="" coords="1242,1454,1363,1481"/>
<area shape="rect" id="node43" href="runlist_8c.html#ac2497788c7a1fae2c52dbca08330804c" title="ntfs_mapping_pairs\l_decompress" alt="" coords="1030,1418,1165,1459"/>
<area shape="rect" id="node44" href="attrib_8c.html#af974b43c7fc0a8cdacfce631af06d0bb" title="load_attribute_list" alt="" coords="802,684,926,710"/>
<area shape="rect" id="node45" href="attrib_8c.html#a4959e9081ff22f6912010201efcc1c0b" title="ntfs_attr_put_search_ctx" alt="" coords="781,961,947,988"/>
<area shape="rect" id="node46" href="mft_8c.html#acdca69e797b129f8be7643ed91f691bd" title="unmap_mft_record" alt="" coords="1032,1138,1163,1165"/>
<area shape="rect" id="node47" href="ntfs_2inode_8c.html#a5cbfd09234c5615f6dbf757587558bd3" title="ntfs_attr_iget" alt="" coords="815,481,913,508"/>
<area shape="rect" id="node49" href="ntfs_2inode_8c.html#a95369e929e520667ddb68d49c9e4bde4" title="ntfs_is_extended_system_file" alt="" coords="767,1062,961,1089"/>
<area shape="rect" id="node50" href="bad__inode_8c.html#ab9cc2af6161530b35e5f86e29f977033" title="make_bad_inode" alt="" coords="804,177,924,204"/>
<area shape="rect" id="node33" href="bad__inode_8c.html#a74ff3566c64350315f12163f4ddfdae7" title="EXPORT_SYMBOL" alt="" coords="1233,202,1372,229"/>
</map>
</div>

</div>
</div>
<a id="ab7fb2735edcadcdb47d7a21a99cc782e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7fb2735edcadcdb47d7a21a99cc782e">&#9670;&nbsp;</a></span>ntfs_get_parent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct dentry* ntfs_get_parent </td>
          <td>(</td>
          <td class="paramtype">struct dentry *&#160;</td>
          <td class="paramname"><em>child_dent</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>ntfs_get_parent - find the dentry of the parent of a given directory dentry : dentry of the directory whose parent directory to find</p>
<p>Find the dentry for the parent directory of the directory specified by the dentry . This function is called from <a class="el" href="expfs_8c.html">fs/exportfs/expfs.c</a>::find_exported_dentry() which in turn is called from the default -&gt;<a class="el" href="callback__xdr_8c.html#aa4554ab57769084d9ee14ae13339fdd2">decode_fh()</a> which is export_decode_fh() in the same file.</p>
<p>The code is based on the ext3 -&gt;get_parent() implementation found in fs/ext3/namei.c::ext3_get_parent().</p>
<p>Note: <a class="el" href="ntfs_2namei_8c.html#ab7fb2735edcadcdb47d7a21a99cc782e">ntfs_get_parent()</a> is called with (child_dent)-&gt;i_mutex down.</p>
<p>Return the dentry of the parent directory on success or the error code on error (IS_ERR() is true). </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ntfs_2namei_8c_ab7fb2735edcadcdb47d7a21a99cc782e_cgraph.png" border="0" usemap="#ntfs_2namei_8c_ab7fb2735edcadcdb47d7a21a99cc782e_cgraph" alt=""/></div>
<map name="ntfs_2namei_8c_ab7fb2735edcadcdb47d7a21a99cc782e_cgraph" id="ntfs_2namei_8c_ab7fb2735edcadcdb47d7a21a99cc782e_cgraph">
<area shape="rect" id="node2" href="ntfs_2inode_8h.html#a6efd5f611b35ed752fdf15917c707e6d" title="NTFS_I" alt="" coords="1329,1485,1397,1512"/>
<area shape="rect" id="node3" href="mft_8c.html#aab879cd658d486f45345e08fa15f276c" title="map_mft_record" alt="" coords="1305,93,1421,120"/>
<area shape="rect" id="node7" href="attrib_8c.html#a790cab56d5e72fa613e5ac57c74d000d" title="ntfs_attr_get_search_ctx" alt="" coords="1279,347,1446,373"/>
<area shape="rect" id="node9" href="mft_8c.html#acdca69e797b129f8be7643ed91f691bd" title="unmap_mft_record" alt="" coords="1297,436,1428,463"/>
<area shape="rect" id="node11" href="attrib_8c.html#ad0fa0a5955dbd1e17a84b12d3dc3e5d2" title="ntfs_attr_lookup" alt="" coords="492,1029,607,1056"/>
<area shape="rect" id="node36" href="attrib_8c.html#a4959e9081ff22f6912010201efcc1c0b" title="ntfs_attr_put_search_ctx" alt="" coords="1060,675,1227,701"/>
<area shape="rect" id="node38" href="dcache_8c.html#a03ce2f4be5be80d88172bfcb3dd2e81b" title="d_obtain_alias" alt="" coords="497,1941,602,1968"/>
<area shape="rect" id="node44" href="ntfs_2inode_8c.html#aa96c9ef81adffe095044a53a49d5d581" title="ntfs_iget" alt="" coords="165,1637,237,1664"/>
<area shape="rect" id="node4" href="mft_8c.html#ae88ce25e1f8572300849e75a5e157e5b" title="map_mft_record_page" alt="" coords="1510,195,1661,221"/>
<area shape="rect" id="node5" href="ntfs_2aops_8h.html#addce11ccc5af85679488fa76ccc6b622" title="ntfs_map_page" alt="" coords="1730,245,1841,272"/>
<area shape="rect" id="node6" href="ntfs_2aops_8h.html#a1598f6a34c91644e4e765b5b04080784" title="ntfs_unmap_page" alt="" coords="2112,373,2237,400"/>
<area shape="rect" id="node8" href="attrib_8c.html#abc2c6bb40d94683fcee382267c2db928" title="ntfs_attr_init_search_ctx" alt="" coords="1503,372,1668,399"/>
<area shape="rect" id="node10" href="mft_8c.html#a7f853eae19270e8962f1d1e7a910f9b5" title="unmap_mft_record_page" alt="" coords="1899,436,2064,463"/>
<area shape="rect" id="node12" href="attrib_8c.html#aea2c048b3faf9c5f3b5e3838a5f8b55d" title="ntfs_attr_find" alt="" coords="883,1232,982,1259"/>
<area shape="rect" id="node16" href="attrib_8c.html#aa1ca8eef91a0f2e47720a6e8fafe53c1" title="ntfs_external_attr_find" alt="" coords="655,1105,805,1132"/>
<area shape="rect" id="node13" href="name_8c.html#a6f3e259198a4231f3429f98f2bf02b23" title="upcase" alt="" coords="1111,1232,1175,1259"/>
<area shape="rect" id="node14" href="ntfs_8h.html#aa9de56ad5f4ccba2f91e7bbf3c873910" title="ntfs_are_names_equal" alt="" coords="1067,1181,1220,1208"/>
<area shape="rect" id="node15" href="ntfs_8h.html#a7abc16b0931427fa8b0500dc0f316f0f" title="ntfs_collate_names" alt="" coords="1076,1131,1211,1157"/>
<area shape="rect" id="node17" href="ntfs_2endian_8h.html#a2e96c421837ca8d7008130e9d8bdcfdb" title="sle64_to_cpu" alt="" coords="1536,1333,1635,1360"/>
<area shape="rect" id="node18" href="mft_8h.html#a811ffb1e431fb1a2eb8646378b4cebe4" title="unmap_extent_mft_record" alt="" coords="1499,573,1672,600"/>
<area shape="rect" id="node20" href="mft_8c.html#abf9229d5b335c334e2fc0a9a33eef54b" title="map_extent_mft_record" alt="" coords="853,852,1012,879"/>
<area shape="rect" id="node35" href="attrib_8c.html#ae39c510288e49f68010493e93cf02ab8" title="ntfs_attr_reinit_search_ctx" alt="" coords="1275,523,1451,549"/>
<area shape="rect" id="node19" href="mft_8h.html#acdca69e797b129f8be7643ed91f691bd" title="unmap_mft_record" alt="" coords="1720,524,1851,551"/>
<area shape="rect" id="node21" href="ntfs_2inode_8h.html#ade15d2f33de0865b12ce2a4623dbf58c" title="VFS_I" alt="" coords="1333,776,1392,803"/>
<area shape="rect" id="node22" href="ntfs_2inode_8c.html#a6d8b96cf26fa5d3d90420acd32a57453" title="ntfs_test_inode" alt="" coords="1088,1435,1199,1461"/>
<area shape="rect" id="node23" href="inode_8c.html#a378733dcbf0fb08359b9a02145ac8fc3" title="iput" alt="" coords="1122,1764,1165,1791"/>
<area shape="rect" id="node24" href="runlist_8c.html#a88bf16d765cbf410f22d562dcdd92213" title="ntfs_runlists_merge" alt="" coords="1517,1029,1653,1056"/>
<area shape="rect" id="node27" href="malloc_8h.html#ab6824be4d6e004aa075b1fe66fd0d737" title="ntfs_free" alt="" coords="2138,852,2211,879"/>
<area shape="rect" id="node34" href="ntfs_2endian_8h.html#a32083373aca4ead974dd8f68ff3374eb" title="cpu_to_sle64" alt="" coords="1313,725,1412,752"/>
<area shape="rect" id="node25" href="runlist_8c.html#a7597afce0c5c77abf6cea59dd4c42117" title="ntfs_rl_realloc" alt="" coords="1930,1080,2033,1107"/>
<area shape="rect" id="node28" href="runlist_8c.html#ad42df4c2ba6ae221ea8b478739d8c793" title="ntfs_rl_mm" alt="" coords="1938,1029,2025,1056"/>
<area shape="rect" id="node29" href="runlist_8c.html#afc45c65b1869d9ee3040061160244c55" title="ntfs_rl_replace" alt="" coords="1732,1131,1839,1157"/>
<area shape="rect" id="node30" href="runlist_8c.html#abe25ac97a94bad6afd92c060025790bd" title="ntfs_rl_insert" alt="" coords="1737,979,1834,1005"/>
<area shape="rect" id="node31" href="runlist_8c.html#ab577964ec6fef984755f055188bb06a7" title="ntfs_rl_append" alt="" coords="1732,1029,1839,1056"/>
<area shape="rect" id="node32" href="runlist_8c.html#ae141990f8ba871617c536c6d239331de" title="ntfs_rl_split" alt="" coords="1741,1080,1830,1107"/>
<area shape="rect" id="node33" href="runlist_8c.html#abf236f92d80fcbb0d32ce6b97d949379" title="ntfs_rl_realloc_nofail" alt="" coords="1911,827,2052,853"/>
<area shape="rect" id="node26" href="malloc_8h.html#a0ec96764a4b9b46c2cd4a78abea5ed5d" title="ntfs_malloc_nofs" alt="" coords="2114,1283,2235,1309"/>
<area shape="rect" id="node37" href="runlist_8c.html#ac2497788c7a1fae2c52dbca08330804c" title="ntfs_mapping_pairs\l_decompress" alt="" coords="1295,1081,1430,1122"/>
<area shape="rect" id="node39" href="dcache_8c.html#a68d05e67717c32cddd6708619209a86b" title="__d_obtain_alias" alt="" coords="671,1941,789,1968"/>
<area shape="rect" id="node41" href="dcache_8c.html#aeb5ec7bdf3301140d66dd18ae638685c" title="EXPORT_SYMBOL" alt="" coords="1074,1992,1213,2019"/>
<area shape="rect" id="node40" href="dcache_8c.html#a12f52b8fa0d189193e7462423ca292ac" title="d_find_any_alias" alt="" coords="873,1941,992,1968"/>
<area shape="rect" id="node42" href="dcache_8c.html#a999805f127eec9cad9629421138453eb" title="d_alloc_anon" alt="" coords="883,1992,982,2019"/>
<area shape="rect" id="node43" href="dcache_8c.html#afe49d54c2443493391c7f5421af9a10f" title="__d_instantiate_anon" alt="" coords="860,1840,1005,1867"/>
<area shape="rect" id="node45" href="inode_8c.html#a0e9a0440646ab0424be87f1ee6387c64" title="iget5_locked" alt="" coords="317,1815,412,1841"/>
<area shape="rect" id="node48" href="ntfs_2inode_8c.html#a7a81decedcd1c604395899479ed81c7b" title="ntfs_init_locked_inode" alt="" coords="655,1663,805,1689"/>
<area shape="rect" id="node49" href="ntfs_2inode_8c.html#abb7b69ff7b1ae5e34a80a17ec6bb0f87" title="ntfs_read_locked_inode" alt="" coords="285,1145,444,1172"/>
<area shape="rect" id="node50" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="300,1688,429,1715"/>
<area shape="rect" id="node46" href="inode_8c.html#aa1822403d896f1040c371de082022045" title="hash" alt="" coords="524,1891,575,1917"/>
<area shape="rect" id="node47" href="inode_8c.html#af827e753dda790b4b798f86e933bb380" title="find_inode" alt="" coords="509,1840,590,1867"/>
</map>
</div>

</div>
</div>
<a id="a0ffa88e6d3aa875d3313c7b039c61bf8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ffa88e6d3aa875d3313c7b039c61bf8">&#9670;&nbsp;</a></span>ntfs_lookup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct dentry* ntfs_lookup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>dir_ino</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct dentry *&#160;</td>
          <td class="paramname"><em>dent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>ntfs_lookup - find the inode represented by a dentry in a directory inode : directory inode in which to look for the inode : dentry representing the inode to look for : lookup flags</p>
<p>In short, <a class="el" href="ntfs_2namei_8c.html#a0ffa88e6d3aa875d3313c7b039c61bf8">ntfs_lookup()</a> looks for the inode represented by the dentry  in the directory inode  and if found attaches the inode to the dentry .</p>
<p>In more detail, the dentry  specifies which inode to look for by supplying the name of the inode in -&gt;d_name.name. <a class="el" href="ntfs_2namei_8c.html#a0ffa88e6d3aa875d3313c7b039c61bf8">ntfs_lookup()</a> converts the name to Unicode and walks the contents of the directory inode  looking for the converted Unicode name. If the name is found in the directory, the corresponding inode is loaded by calling <a class="el" href="ntfs_2inode_8c.html#aa96c9ef81adffe095044a53a49d5d581">ntfs_iget()</a> on its inode number and the inode is associated with the dentry  via a call to <a class="el" href="dcache_8c.html#a019b5d8fa7fbe67008d3403153450edd">d_splice_alias()</a>.</p>
<p>If the name is not found in the directory, a NULL inode is inserted into the dentry  via a call to <a class="el" href="dcache_8c.html#aeab27370546d71c098fb7a85a990f98a">d_add()</a>. The dentry is then termed a negative dentry.</p>
<p>Only if an actual error occurs, do we return an error via ERR_PTR().</p>
<p>In order to handle the case insensitivity issues of NTFS with regards to the dcache and the dcache requiring only one dentry per directory, we deal with dentry aliases that only differ in case in -&gt;<a class="el" href="ntfs_2namei_8c.html#a0ffa88e6d3aa875d3313c7b039c61bf8">ntfs_lookup()</a> while maintaining a case sensitive dcache. This means that we get the full benefit of dcache speed when the file/directory is looked up with the same case as returned by -&gt;<a class="el" href="ntfs_2dir_8c.html#ab1bc16b9eb8282df6442679416ef57fe">ntfs_readdir()</a> but that a lookup for any other case (or for the short file name) will not find anything in dcache and will enter -&gt;<a class="el" href="ntfs_2namei_8c.html#a0ffa88e6d3aa875d3313c7b039c61bf8">ntfs_lookup()</a> instead, where we search the directory for a fully matching file name (including case) and if that is not found, we search for a file name that matches with different case and if that has non-POSIX semantics we return that. We actually do only one search (case sensitive) and keep tabs on whether we have found a case insensitive match in the process.</p>
<p>To simplify matters for us, we do not treat the short vs long filenames as two hard links but instead if the lookup matches a short filename, we return the dentry for the corresponding long filename instead.</p>
<p>There are three cases we need to distinguish here:</p>
<p>1)  perfectly matches (i.e. including case) a directory entry with a file name in the WIN32 or POSIX namespaces. In this case <a class="el" href="ntfs_2dir_8c.html#a9e749d316c242a247306a9c23a468396">ntfs_lookup_inode_by_name()</a> will return with name set to NULL and we just <a class="el" href="dcache_8c.html#a019b5d8fa7fbe67008d3403153450edd">d_splice_alias()</a> . 2)  matches (not including case) a directory entry with a file name in the WIN32 namespace. In this case <a class="el" href="ntfs_2dir_8c.html#a9e749d316c242a247306a9c23a468396">ntfs_lookup_inode_by_name()</a> will return with name set to point to a kmalloc()ed ntfs_name structure containing the properly cased little endian Unicode name. We convert the name to the current NLS code page, search if a dentry with this name already exists and if so return that instead of . At this point things are complicated by the possibility of 'disconnected' dentries due to NFS which we deal with appropriately (see the code comments). The VFS will then destroy the old  and use the one we returned. If a dentry is not found, we allocate a new one, <a class="el" href="dcache_8c.html#a019b5d8fa7fbe67008d3403153450edd">d_splice_alias()</a> it, and return it as above. 3)  matches either perfectly or not (i.e. we don't care about case) a directory entry with a file name in the DOS namespace. In this case <a class="el" href="ntfs_2dir_8c.html#a9e749d316c242a247306a9c23a468396">ntfs_lookup_inode_by_name()</a> will return with name set to point to a kmalloc()ed ntfs_name structure containing the mft reference (cpu endian) of the inode. We use the mft reference to read the inode and to find the file name in the WIN32 namespace corresponding to the matched short file name. We then convert the name to the current NLS code page, and proceed searching for a dentry with this name, etc, as in case 2), above.</p>
<p>Locking: Caller must hold i_mutex on the directory. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ntfs_2namei_8c_a0ffa88e6d3aa875d3313c7b039c61bf8_cgraph.png" border="0" usemap="#ntfs_2namei_8c_a0ffa88e6d3aa875d3313c7b039c61bf8_cgraph" alt=""/></div>
<map name="ntfs_2namei_8c_a0ffa88e6d3aa875d3313c7b039c61bf8_cgraph" id="ntfs_2namei_8c_a0ffa88e6d3aa875d3313c7b039c61bf8_cgraph">
<area shape="rect" id="node2" href="ntfs_8h.html#a7bd82112df01116e1297aa8165d02ff2" title="NTFS_SB" alt="" coords="581,1034,663,1060"/>
<area shape="rect" id="node4" href="ntfs_2inode_8h.html#a6efd5f611b35ed752fdf15917c707e6d" title="NTFS_I" alt="" coords="1022,1186,1090,1212"/>
<area shape="rect" id="node8" href="ntfs_8h.html#ac2003ddbc0204bd1684b7bfe3a9531ed" title="ntfs_nlstoucs" alt="" coords="149,503,249,530"/>
<area shape="rect" id="node9" href="ntfs_2dir_8c.html#a9e749d316c242a247306a9c23a468396" title="ntfs_lookup_inode_by_name" alt="" coords="304,326,491,352"/>
<area shape="rect" id="node10" href="mft_8c.html#aab879cd658d486f45345e08fa15f276c" title="map_mft_record" alt="" coords="781,98,897,124"/>
<area shape="rect" id="node14" href="attrib_8c.html#a790cab56d5e72fa613e5ac57c74d000d" title="ntfs_attr_get_search_ctx" alt="" coords="756,596,923,623"/>
<area shape="rect" id="node16" href="attrib_8c.html#ad0fa0a5955dbd1e17a84b12d3dc3e5d2" title="ntfs_attr_lookup" alt="" coords="782,499,897,526"/>
<area shape="rect" id="node23" href="attrib_8c.html#a4959e9081ff22f6912010201efcc1c0b" title="ntfs_attr_put_search_ctx" alt="" coords="539,831,705,858"/>
<area shape="rect" id="node25" href="mft_8c.html#acdca69e797b129f8be7643ed91f691bd" title="unmap_mft_record" alt="" coords="774,850,905,876"/>
<area shape="rect" id="node28" href="ntfs_2inode_8c.html#aa96c9ef81adffe095044a53a49d5d581" title="ntfs_iget" alt="" coords="163,1186,235,1212"/>
<area shape="rect" id="node30" href="inode_8c.html#a378733dcbf0fb08359b9a02145ac8fc3" title="iput" alt="" coords="601,1439,643,1466"/>
<area shape="rect" id="node37" href="bad__inode_8c.html#a7db3c62ffb9390ef7191a63e19073333" title="is_bad_inode" alt="" coords="150,1300,249,1327"/>
<area shape="rect" id="node39" href="dcache_8c.html#a019b5d8fa7fbe67008d3403153450edd" title="d_splice_alias" alt="" coords="345,1655,449,1682"/>
<area shape="rect" id="node47" href="dcache_8c.html#aeab27370546d71c098fb7a85a990f98a" title="d_add" alt="" coords="369,1540,426,1567"/>
<area shape="rect" id="node48" href="ntfs_8h.html#a67e1ba3443809f2cab41ca4f61966471" title="ntfs_ucstonls" alt="" coords="149,1579,249,1606"/>
<area shape="rect" id="node49" href="namei_8c.html#a6d05465ea29cfacd10ee6473e3879f3c" title="full_name_hash" alt="" coords="143,1630,256,1656"/>
<area shape="rect" id="node50" href="dcache_8c.html#a532706f46f80262c6ebce30298f97fa1" title="d_add_ci" alt="" coords="162,1680,237,1707"/>
<area shape="rect" id="node3" href="ntfs_8h.html#a6f4a2644da3c2e4ce52b8aa1bd836b56" title="ntfs_read_compressed\l_block" alt="" coords="762,901,917,942"/>
<area shape="rect" id="node6" href="ntfs_8h.html#a99985ea0f81bd70c39de9a3958576f03" title="allocate_compression\l_buffers" alt="" coords="765,1018,913,1060"/>
<area shape="rect" id="node7" href="ntfs_8h.html#a1f976e5ac1853d6990f2601819fbb26b" title="free_compression_buffers" alt="" coords="753,967,925,994"/>
<area shape="rect" id="node5" href="ntfs_2inode_8h.html#ade15d2f33de0865b12ce2a4623dbf58c" title="VFS_I" alt="" coords="1027,698,1085,724"/>
<area shape="rect" id="node12" href="ntfs_2aops_8h.html#addce11ccc5af85679488fa76ccc6b622" title="ntfs_map_page" alt="" coords="1218,47,1329,74"/>
<area shape="rect" id="node13" href="ntfs_2aops_8h.html#a1598f6a34c91644e4e765b5b04080784" title="ntfs_unmap_page" alt="" coords="1422,47,1547,74"/>
<area shape="rect" id="node18" href="ntfs_8h.html#aa9de56ad5f4ccba2f91e7bbf3c873910" title="ntfs_are_names_equal" alt="" coords="1408,351,1561,378"/>
<area shape="rect" id="node19" href="ntfs_8h.html#a7abc16b0931427fa8b0500dc0f316f0f" title="ntfs_collate_names" alt="" coords="1417,402,1552,428"/>
<area shape="rect" id="node21" href="ntfs_2endian_8h.html#a2e96c421837ca8d7008130e9d8bdcfdb" title="sle64_to_cpu" alt="" coords="1224,676,1323,703"/>
<area shape="rect" id="node26" href="jfs_2xattr_8c.html#af1ece20cee207d0ca5d84fb3a473dd92" title="name_size" alt="" coords="579,199,665,226"/>
<area shape="rect" id="node27" href="ntfs_2endian_8h.html#a5004b105857d79fd08e67bd1f5896d88" title="sle64_to_cpup" alt="" coords="569,250,675,276"/>
<area shape="rect" id="node11" href="mft_8c.html#ae88ce25e1f8572300849e75a5e157e5b" title="map_mft_record_page" alt="" coords="981,98,1131,124"/>
<area shape="rect" id="node15" href="attrib_8c.html#abc2c6bb40d94683fcee382267c2db928" title="ntfs_attr_init_search_ctx" alt="" coords="973,596,1139,623"/>
<area shape="rect" id="node17" href="attrib_8c.html#aea2c048b3faf9c5f3b5e3838a5f8b55d" title="ntfs_attr_find" alt="" coords="1224,402,1323,428"/>
<area shape="rect" id="node20" href="attrib_8c.html#aa1ca8eef91a0f2e47720a6e8fafe53c1" title="ntfs_external_attr_find" alt="" coords="981,452,1131,479"/>
<area shape="rect" id="node22" href="mft_8h.html#a811ffb1e431fb1a2eb8646378b4cebe4" title="unmap_extent_mft_record" alt="" coords="1187,575,1360,602"/>
<area shape="rect" id="node24" href="ntfs_2endian_8h.html#a32083373aca4ead974dd8f68ff3374eb" title="cpu_to_sle64" alt="" coords="790,748,889,775"/>
<area shape="rect" id="node29" href="inode_8c.html#a0e9a0440646ab0424be87f1ee6387c64" title="iget5_locked" alt="" coords="350,1287,445,1314"/>
<area shape="rect" id="node33" href="ntfs_2inode_8c.html#a6d8b96cf26fa5d3d90420acd32a57453" title="ntfs_test_inode" alt="" coords="342,1186,453,1212"/>
<area shape="rect" id="node34" href="ntfs_2inode_8c.html#a7a81decedcd1c604395899479ed81c7b" title="ntfs_init_locked_inode" alt="" coords="322,1135,473,1162"/>
<area shape="rect" id="node35" href="ntfs_2inode_8c.html#abb7b69ff7b1ae5e34a80a17ec6bb0f87" title="ntfs_read_locked_inode" alt="" coords="318,983,477,1010"/>
<area shape="rect" id="node36" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="333,1236,462,1263"/>
<area shape="rect" id="node32" href="debugfs_2inode_8c.html#a16e485b5debd4cd96a200844c38df190" title="EXPORT_SYMBOL" alt="" coords="770,1388,909,1415"/>
<area shape="rect" id="node31" href="inode_8c.html#a7e99b25ac29d19bc82fbddcb773c4f25" title="iput_final" alt="" coords="802,1439,877,1466"/>
<area shape="rect" id="node38" href="bad__inode_8c.html#a74ff3566c64350315f12163f4ddfdae7" title="EXPORT_SYMBOL" alt="" coords="328,1388,467,1415"/>
<area shape="rect" id="node40" href="dcache_8c.html#a5e704be755f5ac21f56b378ea48f989e" title="__d_find_any_alias" alt="" coords="555,1743,689,1770"/>
<area shape="rect" id="node41" href="dcache_8c.html#a78a7eb061b29a6d57e820bb12f3aa327" title="d_ancestor" alt="" coords="1013,1616,1099,1643"/>
<area shape="rect" id="node42" href="dcache_8c.html#aebcca358185b5176b69b97e7eab12dfd" title="dput" alt="" coords="599,1844,645,1871"/>
<area shape="rect" id="node43" href="dcache_8c.html#aeb5ec7bdf3301140d66dd18ae638685c" title="EXPORT_SYMBOL" alt="" coords="770,1819,909,1846"/>
<area shape="rect" id="node44" href="dcache_8c.html#aaad61d8a17eed26d77e6125c54d161a3" title="__d_unalias" alt="" coords="577,1642,667,1668"/>
<area shape="rect" id="node45" href="dcache_8c.html#ad93fc9d8e3cc5c6ce3663cc7d473fb92" title="__d_move" alt="" coords="798,1642,881,1668"/>
<area shape="rect" id="node46" href="dcache_8c.html#abb6a3303d1974ff6c85fff733082b373" title="__d_add" alt="" coords="587,1540,657,1567"/>
</map>
</div>

</div>
</div>
<a id="a165e61fa447531537b45b1f149919e90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a165e61fa447531537b45b1f149919e90">&#9670;&nbsp;</a></span>ntfs_nfs_get_inode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a>* ntfs_nfs_get_inode </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structsuper__block.html">super_block</a> *&#160;</td>
          <td class="paramname"><em>sb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>ino</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>generation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ntfs_2namei_8c_a165e61fa447531537b45b1f149919e90_cgraph.png" border="0" usemap="#ntfs_2namei_8c_a165e61fa447531537b45b1f149919e90_cgraph" alt=""/></div>
<map name="ntfs_2namei_8c_a165e61fa447531537b45b1f149919e90_cgraph" id="ntfs_2namei_8c_a165e61fa447531537b45b1f149919e90_cgraph">
<area shape="rect" id="node2" href="ntfs_2inode_8c.html#aa96c9ef81adffe095044a53a49d5d581" title="ntfs_iget" alt="" coords="185,348,257,375"/>
<area shape="rect" id="node8" href="inode_8c.html#a378733dcbf0fb08359b9a02145ac8fc3" title="iput" alt="" coords="1027,348,1069,375"/>
<area shape="rect" id="node32" href="bad__inode_8c.html#a7db3c62ffb9390ef7191a63e19073333" title="is_bad_inode" alt="" coords="793,1284,892,1311"/>
<area shape="rect" id="node3" href="inode_8c.html#a0e9a0440646ab0424be87f1ee6387c64" title="iget5_locked" alt="" coords="795,196,890,223"/>
<area shape="rect" id="node22" href="ntfs_2inode_8c.html#a6d8b96cf26fa5d3d90420acd32a57453" title="ntfs_test_inode" alt="" coords="787,449,898,476"/>
<area shape="rect" id="node24" href="ntfs_2inode_8c.html#a7a81decedcd1c604395899479ed81c7b" title="ntfs_init_locked_inode" alt="" coords="767,399,918,425"/>
<area shape="rect" id="node25" href="ntfs_2inode_8c.html#abb7b69ff7b1ae5e34a80a17ec6bb0f87" title="ntfs_read_locked_inode" alt="" coords="305,905,464,932"/>
<area shape="rect" id="node48" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="778,145,907,172"/>
<area shape="rect" id="node4" href="inode_8c.html#aa1822403d896f1040c371de082022045" title="hash" alt="" coords="1023,196,1073,223"/>
<area shape="rect" id="node5" href="inode_8c.html#af827e753dda790b4b798f86e933bb380" title="find_inode" alt="" coords="1007,247,1089,273"/>
<area shape="rect" id="node14" href="inode_8c.html#a076b86296ed39596f96ef03ea8aa74d7" title="destroy_inode" alt="" coords="1567,247,1670,273"/>
<area shape="rect" id="node16" href="debugfs_2inode_8c.html#a16e485b5debd4cd96a200844c38df190" title="EXPORT_SYMBOL" alt="" coords="1895,171,2033,197"/>
<area shape="rect" id="node18" href="inode_8c.html#a6328f7a2621c5365a1df969e8c7ab998" title="alloc_inode" alt="" coords="1403,44,1490,71"/>
<area shape="rect" id="node20" href="inode_8c.html#a1871c58d9c393006e24f7fea1bcc288d" title="inode_sb_list_add" alt="" coords="985,145,1111,172"/>
<area shape="rect" id="node6" href="inode_8c.html#a6bdbb5661dff23968a2a67170a4ffccf" title="__wait_on_freeing_inode" alt="" coords="1169,247,1334,273"/>
<area shape="rect" id="node7" href="inode_8c.html#ab5747108c3d9a3f113b72a10a9be6a2f" title="__iget" alt="" coords="1223,196,1280,223"/>
<area shape="rect" id="node9" href="inode_8c.html#a7e99b25ac29d19bc82fbddcb773c4f25" title="iput_final" alt="" coords="1214,348,1289,375"/>
<area shape="rect" id="node10" href="inode_8c.html#a943dee860d20f57552f168683dcb4b5d" title="inode_add_lru" alt="" coords="1395,297,1498,324"/>
<area shape="rect" id="node11" href="fs-writeback_8c.html#aceeba3df6a433f68c665086a2ee53faa" title="write_inode_now" alt="" coords="1387,348,1506,375"/>
<area shape="rect" id="node12" href="inode_8c.html#a1f2fe8883e70882e845560b2ccf4ab16" title="inode_lru_list_del" alt="" coords="1385,399,1508,425"/>
<area shape="rect" id="node13" href="inode_8c.html#a4b62e1e360840615442b8ad6a9f16bc7" title="evict" alt="" coords="1421,449,1472,476"/>
<area shape="rect" id="node15" href="inode_8c.html#acc59c5a81bf40ee903f9feb03ac7b7fa" title="__destroy_inode" alt="" coords="1729,247,1847,273"/>
<area shape="rect" id="node17" href="inode_8c.html#af3846da666673695a3040ee40b92bf0e" title="i_callback" alt="" coords="1748,196,1828,223"/>
<area shape="rect" id="node19" href="inode_8c.html#a844185001176cf3da6e2195a24931015" title="inode_init_always" alt="" coords="1556,44,1681,71"/>
<area shape="rect" id="node21" href="debugfs_2inode_8c.html#ab0e32a685998ab4f1be52f66ddedfca1" title="EXPORT_SYMBOL_GPL" alt="" coords="1165,145,1337,172"/>
<area shape="rect" id="node23" href="ntfs_2inode_8h.html#a6efd5f611b35ed752fdf15917c707e6d" title="NTFS_I" alt="" coords="1413,821,1481,848"/>
<area shape="rect" id="node26" href="ntfs_8h.html#a7bd82112df01116e1297aa8165d02ff2" title="NTFS_SB" alt="" coords="1007,931,1089,957"/>
<area shape="rect" id="node30" href="ntfs_2inode_8h.html#aeea6b534f12d270732818f1335215630" title="ntfs_init_big_inode" alt="" coords="544,855,675,881"/>
<area shape="rect" id="node34" href="mft_8c.html#aab879cd658d486f45345e08fa15f276c" title="map_mft_record" alt="" coords="785,975,901,1001"/>
<area shape="rect" id="node35" href="attrib_8c.html#a790cab56d5e72fa613e5ac57c74d000d" title="ntfs_attr_get_search_ctx" alt="" coords="759,1081,926,1108"/>
<area shape="rect" id="node36" href="inode_8c.html#a01ed868f59230449a75b85f7157efd95" title="set_nlink" alt="" coords="1581,892,1656,919"/>
<area shape="rect" id="node37" href="attrib_8c.html#ad0fa0a5955dbd1e17a84b12d3dc3e5d2" title="ntfs_attr_lookup" alt="" coords="785,1335,900,1361"/>
<area shape="rect" id="node38" href="time_8h.html#accce553a225e57452d2b2f653739bfa6" title="ntfs2utc" alt="" coords="575,652,644,679"/>
<area shape="rect" id="node39" href="ntfs_2endian_8h.html#a2e96c421837ca8d7008130e9d8bdcfdb" title="sle64_to_cpu" alt="" coords="999,652,1097,679"/>
<area shape="rect" id="node40" href="attrib_8c.html#ae39c510288e49f68010493e93cf02ab8" title="ntfs_attr_reinit_search_ctx" alt="" coords="755,1385,931,1412"/>
<area shape="rect" id="node41" href="attrib_8h.html#a5b3c6da7b30052eb909742ccb604568a" title="ntfs_attr_size" alt="" coords="559,551,660,577"/>
<area shape="rect" id="node42" href="malloc_8h.html#a0ec96764a4b9b46c2cd4a78abea5ed5d" title="ntfs_malloc_nofs" alt="" coords="987,740,1109,767"/>
<area shape="rect" id="node43" href="runlist_8c.html#ac2497788c7a1fae2c52dbca08330804c" title="ntfs_mapping_pairs\l_decompress" alt="" coords="775,703,910,745"/>
<area shape="rect" id="node44" href="attrib_8c.html#af974b43c7fc0a8cdacfce631af06d0bb" title="load_attribute_list" alt="" coords="547,804,671,831"/>
<area shape="rect" id="node45" href="attrib_8c.html#a4959e9081ff22f6912010201efcc1c0b" title="ntfs_attr_put_search_ctx" alt="" coords="526,1031,693,1057"/>
<area shape="rect" id="node46" href="mft_8c.html#acdca69e797b129f8be7643ed91f691bd" title="unmap_mft_record" alt="" coords="777,923,908,949"/>
<area shape="rect" id="node47" href="ntfs_2inode_8c.html#a5cbfd09234c5615f6dbf757587558bd3" title="ntfs_attr_iget" alt="" coords="560,348,659,375"/>
<area shape="rect" id="node49" href="ntfs_2inode_8c.html#a95369e929e520667ddb68d49c9e4bde4" title="ntfs_is_extended_system_file" alt="" coords="512,1385,707,1412"/>
<area shape="rect" id="node50" href="bad__inode_8c.html#ab9cc2af6161530b35e5f86e29f977033" title="make_bad_inode" alt="" coords="549,1487,669,1513"/>
<area shape="rect" id="node27" href="ntfs_8h.html#a6f4a2644da3c2e4ce52b8aa1bd836b56" title="ntfs_read_compressed\l_block" alt="" coords="1174,989,1329,1030"/>
<area shape="rect" id="node28" href="ntfs_8h.html#a99985ea0f81bd70c39de9a3958576f03" title="allocate_compression\l_buffers" alt="" coords="1177,923,1325,965"/>
<area shape="rect" id="node29" href="ntfs_8h.html#a1f976e5ac1853d6990f2601819fbb26b" title="free_compression_buffers" alt="" coords="1165,872,1337,899"/>
<area shape="rect" id="node31" href="ntfs_2inode_8h.html#ab985cfa10772115a5f42ef4dc97ce719" title="__ntfs_init_inode" alt="" coords="783,872,903,899"/>
<area shape="rect" id="node33" href="bad__inode_8c.html#a74ff3566c64350315f12163f4ddfdae7" title="EXPORT_SYMBOL" alt="" coords="979,1372,1117,1399"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ntfs_2namei_8c_a165e61fa447531537b45b1f149919e90_icgraph.png" border="0" usemap="#ntfs_2namei_8c_a165e61fa447531537b45b1f149919e90_icgraph" alt=""/></div>
<map name="ntfs_2namei_8c_a165e61fa447531537b45b1f149919e90_icgraph" id="ntfs_2namei_8c_a165e61fa447531537b45b1f149919e90_icgraph">
<area shape="rect" id="node2" href="ntfs_2namei_8c.html#ad17f9e2b817c67072d09bb98eea5fff6" title="ntfs_fh_to_dentry" alt="" coords="185,5,308,32"/>
<area shape="rect" id="node3" href="ntfs_2namei_8c.html#a9439d6466934893029b39ef861d97d4e" title="ntfs_fh_to_parent" alt="" coords="185,56,308,83"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="adaea4bd00243e143331fe3b54666cfe7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adaea4bd00243e143331fe3b54666cfe7">&#9670;&nbsp;</a></span>ntfs_dir_inode_ops</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const struct inode_operations ntfs_dir_inode_ops</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">    .lookup = <a class="code" href="ntfs_2namei_8c.html#a0ffa88e6d3aa875d3313c7b039c61bf8">ntfs_lookup</a>,  </div><div class="line">}</div><div class="ttc" id="ntfs_2namei_8c_html_a0ffa88e6d3aa875d3313c7b039c61bf8"><div class="ttname"><a href="ntfs_2namei_8c.html#a0ffa88e6d3aa875d3313c7b039c61bf8">ntfs_lookup</a></div><div class="ttdeci">static struct dentry * ntfs_lookup(struct inode *dir_ino, struct dentry *dent, unsigned int flags)</div><div class="ttdef"><b>Definition:</b> namei.c:103</div></div>
</div><!-- fragment --><p>Inode operations for directories. </p>

</div>
</div>
<a id="a1203ae54c9a457a9ff116b7ed0f54496"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1203ae54c9a457a9ff116b7ed0f54496">&#9670;&nbsp;</a></span>ntfs_export_ops</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const struct export_operations ntfs_export_ops</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">    .get_parent = <a class="code" href="ntfs_2namei_8c.html#ab7fb2735edcadcdb47d7a21a99cc782e">ntfs_get_parent</a>,  </div><div class="line">    .fh_to_dentry   = <a class="code" href="ntfs_2namei_8c.html#ad17f9e2b817c67072d09bb98eea5fff6">ntfs_fh_to_dentry</a>,</div><div class="line">    .fh_to_parent   = <a class="code" href="ntfs_2namei_8c.html#a9439d6466934893029b39ef861d97d4e">ntfs_fh_to_parent</a>,</div><div class="line">}</div><div class="ttc" id="ntfs_2namei_8c_html_ad17f9e2b817c67072d09bb98eea5fff6"><div class="ttname"><a href="ntfs_2namei_8c.html#ad17f9e2b817c67072d09bb98eea5fff6">ntfs_fh_to_dentry</a></div><div class="ttdeci">static struct dentry * ntfs_fh_to_dentry(struct super_block *sb, struct fid *fid, int fh_len, int fh_type)</div><div class="ttdef"><b>Definition:</b> namei.c:367</div></div>
<div class="ttc" id="ntfs_2namei_8c_html_a9439d6466934893029b39ef861d97d4e"><div class="ttname"><a href="ntfs_2namei_8c.html#a9439d6466934893029b39ef861d97d4e">ntfs_fh_to_parent</a></div><div class="ttdeci">static struct dentry * ntfs_fh_to_parent(struct super_block *sb, struct fid *fid, int fh_len, int fh_type)</div><div class="ttdef"><b>Definition:</b> namei.c:374</div></div>
<div class="ttc" id="ntfs_2namei_8c_html_ab7fb2735edcadcdb47d7a21a99cc782e"><div class="ttname"><a href="ntfs_2namei_8c.html#ab7fb2735edcadcdb47d7a21a99cc782e">ntfs_get_parent</a></div><div class="ttdeci">static struct dentry * ntfs_get_parent(struct dentry *child_dent)</div><div class="ttdef"><b>Definition:</b> namei.c:300</div></div>
</div><!-- fragment --><p>Export operations allowing NFS exporting of mounted NTFS partitions.</p>
<p>We use the default -&gt;<a class="el" href="clnt4xdr_8c.html#accdae8e927e6bccdde1a51974d048995">encode_fh()</a> for now. Note that they use 32 bits to store the inode number which is an unsigned long so on 64-bit architectures is usually 64 bits so it would all fail horribly on huge volumes. I guess we need to define our own encode and decode fh functions that store 64-bit inode numbers at some point but for now we will ignore the problem...</p>
<p>We also use the default -&gt;<a class="el" href="expfs_8c.html#ab864bb266959cf2f758193427c706078">get_name()</a> helper (used by -&gt;<a class="el" href="callback__xdr_8c.html#aa4554ab57769084d9ee14ae13339fdd2">decode_fh()</a> via <a class="el" href="expfs_8c.html">fs/exportfs/expfs.c</a>::find_exported_dentry()) as that is completely fs independent.</p>
<p>The default -&gt;get_parent() just returns -EACCES so we have to provide our own and the default -&gt;get_dentry() is incompatible with NTFS due to not allowing the inode number 0 which is used in NTFS for the system file $MFT and due to using iget() whereas NTFS needs <a class="el" href="ntfs_2inode_8c.html#aa96c9ef81adffe095044a53a49d5d581">ntfs_iget()</a>. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_99323eb50d8b7f308e54c5b64a386026.html">ntfs</a></li><li class="navelem"><a class="el" href="ntfs_2namei_8c.html">namei.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>

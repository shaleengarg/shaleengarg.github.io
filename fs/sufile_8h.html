<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>linux/fs: nilfs2/sufile.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">linux/fs
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('sufile_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">sufile.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;linux/fs.h&gt;</code><br />
<code>#include &lt;linux/buffer_head.h&gt;</code><br />
<code>#include &quot;<a class="el" href="mdt_8h_source.html">mdt.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for sufile.h:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h__incl.png" border="0" usemap="#nilfs2_2sufile_8h" alt=""/></div>
<map name="nilfs2_2sufile_8h" id="nilfs2_2sufile_8h">
<area shape="rect" id="node4" href="mdt_8h.html" title="mdt.h" alt="" coords="246,80,301,107"/>
<area shape="rect" id="node6" href="nilfs_8h.html" title="nilfs.h" alt="" coords="543,229,601,256"/>
<area shape="rect" id="node21" href="page_8h.html" title="page.h" alt="" coords="277,155,339,181"/>
<area shape="rect" id="node12" href="the__nilfs_8h.html" title="the_nilfs.h" alt="" coords="1049,379,1132,405"/>
<area shape="rect" id="node18" href="nilfs2_2bmap_8h.html" title="bmap.h" alt="" coords="574,304,639,331"/>
<area shape="rect" id="node19" href="nilfs2_2alloc_8h.html" title="alloc.h" alt="" coords="753,379,813,405"/>
<area shape="rect" id="node20" href="dat_8h.html" title="dat.h" alt="" coords="627,379,677,405"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h__dep__incl.png" border="0" usemap="#nilfs2_2sufile_8hdep" alt=""/></div>
<map name="nilfs2_2sufile_8hdep" id="nilfs2_2sufile_8hdep">
<area shape="rect" id="node2" href="nilfs2_2ioctl_8c.html" title="nilfs2/ioctl.c" alt="" coords="5,80,97,107"/>
<area shape="rect" id="node3" href="nilfs2_2recovery_8c.html" title="nilfs2/recovery.c" alt="" coords="121,80,240,107"/>
<area shape="rect" id="node4" href="nilfs2_2segment_8c.html" title="nilfs2/segment.c" alt="" coords="264,80,383,107"/>
<area shape="rect" id="node5" href="sufile_8c.html" title="nilfs2/sufile.c" alt="" coords="407,80,506,107"/>
<area shape="rect" id="node6" href="nilfs2_2super_8c.html" title="nilfs2/super.c" alt="" coords="531,80,631,107"/>
<area shape="rect" id="node7" href="nilfs2_2sysfs_8c.html" title="nilfs2/sysfs.c" alt="" coords="655,80,755,107"/>
<area shape="rect" id="node8" href="the__nilfs_8c.html" title="nilfs2/the_nilfs.c" alt="" coords="778,80,895,107"/>
</map>
</div>
</div>
<p><a href="sufile_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9c732ab29452414325bd9a1e70fe3978"><td class="memItemLeft" align="right" valign="top">static unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978">nilfs_sufile_get_nsegments</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile)</td></tr>
<tr class="separator:a9c732ab29452414325bd9a1e70fe3978"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50c0d7ff8c8bf821d281286007c39cd5"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8h.html#a50c0d7ff8c8bf821d281286007c39cd5">nilfs_sufile_get_ncleansegs</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile)</td></tr>
<tr class="separator:a50c0d7ff8c8bf821d281286007c39cd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0bd62c3d3681b821085c55c413aa1bb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb">nilfs_sufile_set_alloc_range</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile, __u64 <a class="el" href="cifspdu_8h.html#a94f8d852c02921f3079f6987b4a5d7d0">start</a>, __u64 end)</td></tr>
<tr class="separator:ac0bd62c3d3681b821085c55c413aa1bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae43422797775f081a1fe1fe6abef686f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f">nilfs_sufile_alloc</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *, __u64 *)</td></tr>
<tr class="separator:ae43422797775f081a1fe1fe6abef686f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5c9db186be6baf07d66e049a0fd9b9b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8h.html#ae5c9db186be6baf07d66e049a0fd9b9b">nilfs_sufile_mark_dirty</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile, __u64 segnum)</td></tr>
<tr class="separator:ae5c9db186be6baf07d66e049a0fd9b9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6379742426c30d02072b1a5b0f527f8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8h.html#ac6379742426c30d02072b1a5b0f527f8">nilfs_sufile_set_segment_usage</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile, __u64 segnum, unsigned long <a class="el" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033">nblocks</a>, time64_t modtime)</td></tr>
<tr class="separator:ac6379742426c30d02072b1a5b0f527f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fef1b4dbdae6f60e2dc3b703969a3dd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd">nilfs_sufile_get_stat</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *, struct nilfs_sustat *)</td></tr>
<tr class="separator:a3fef1b4dbdae6f60e2dc3b703969a3dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a479c51cdecafad05d22942c107b00c4f"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f">nilfs_sufile_get_suinfo</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *, __u64, void *, unsigned int, size_t)</td></tr>
<tr class="separator:a479c51cdecafad05d22942c107b00c4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc30bf95562e00949a44b244e3088687"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687">nilfs_sufile_set_suinfo</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *, void *, unsigned int, size_t)</td></tr>
<tr class="separator:abc30bf95562e00949a44b244e3088687"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f79159d2c1037184f20a9ed3a5f410a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a">nilfs_sufile_updatev</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *, __u64 *, size_t, int, size_t *, void(*dofunc)(struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *, __u64, struct buffer_head *, struct buffer_head *))</td></tr>
<tr class="separator:a4f79159d2c1037184f20a9ed3a5f410a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a954be8e038b533c82c78cf5250e56cbe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe">nilfs_sufile_update</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *, __u64, int, void(*dofunc)(struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *, __u64, struct buffer_head *, struct buffer_head *))</td></tr>
<tr class="separator:a954be8e038b533c82c78cf5250e56cbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acad60c93c0f7f6c3a8a9dc843107f1ed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8h.html#acad60c93c0f7f6c3a8a9dc843107f1ed">nilfs_sufile_do_scrap</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *, __u64, struct buffer_head *, struct buffer_head *)</td></tr>
<tr class="separator:acad60c93c0f7f6c3a8a9dc843107f1ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a577d0d35a7907909b6c0a139d8cc1704"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8h.html#a577d0d35a7907909b6c0a139d8cc1704">nilfs_sufile_do_free</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *, __u64, struct buffer_head *, struct buffer_head *)</td></tr>
<tr class="separator:a577d0d35a7907909b6c0a139d8cc1704"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff87ff4257115842ff3c7940e5f8e769"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8h.html#aff87ff4257115842ff3c7940e5f8e769">nilfs_sufile_do_cancel_free</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *, __u64, struct buffer_head *, struct buffer_head *)</td></tr>
<tr class="separator:aff87ff4257115842ff3c7940e5f8e769"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e943e59486cd6176a3317bed589b7c9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8h.html#a7e943e59486cd6176a3317bed589b7c9">nilfs_sufile_do_set_error</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *, __u64, struct buffer_head *, struct buffer_head *)</td></tr>
<tr class="separator:a7e943e59486cd6176a3317bed589b7c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9feb3258026bbd1136c545e911c5d91"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91">nilfs_sufile_resize</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile, __u64 newnsegs)</td></tr>
<tr class="separator:ac9feb3258026bbd1136c545e911c5d91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ad0af8131357596ac729f04c3009e15"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15">nilfs_sufile_read</a> (struct <a class="el" href="structsuper__block.html">super_block</a> *<a class="el" href="ntfs_2debug_8h.html#a65b1b0602e37268ec9bc2c240a676c39">sb</a>, size_t susize, struct nilfs_inode *raw_inode, struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> **inodep)</td></tr>
<tr class="separator:a3ad0af8131357596ac729f04c3009e15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a202058a1d5a7ee3658e8e7cda1ffee37"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8h.html#a202058a1d5a7ee3658e8e7cda1ffee37">nilfs_sufile_trim_fs</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile, struct fstrim_range *range)</td></tr>
<tr class="separator:a202058a1d5a7ee3658e8e7cda1ffee37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdd3e828fa8ffde5856b483f0c32c6f4"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4">nilfs_sufile_scrap</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile, __u64 segnum)</td></tr>
<tr class="separator:afdd3e828fa8ffde5856b483f0c32c6f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67f76a7b0da53a061147b4a7f48e082d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d">nilfs_sufile_free</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile, __u64 segnum)</td></tr>
<tr class="separator:a67f76a7b0da53a061147b4a7f48e082d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af210832d1efe1b482aa7522fc34e4372"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372">nilfs_sufile_freev</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile, __u64 *segnumv, size_t nsegs, size_t *ndone)</td></tr>
<tr class="separator:af210832d1efe1b482aa7522fc34e4372"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9da8122c97b0bb9b56f5a85dbdad019b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b">nilfs_sufile_cancel_freev</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile, __u64 *segnumv, size_t nsegs, size_t *ndone)</td></tr>
<tr class="separator:a9da8122c97b0bb9b56f5a85dbdad019b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5623f31382355a7f576224994d7e571"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571">nilfs_sufile_set_error</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile, __u64 segnum)</td></tr>
<tr class="separator:aa5623f31382355a7f576224994d7e571"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ae43422797775f081a1fe1fe6abef686f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae43422797775f081a1fe1fe6abef686f">&#9670;&nbsp;</a></span>nilfs_sufile_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nilfs_sufile_alloc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64 *&#160;</td>
          <td class="paramname"><em>segnump</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>nilfs_sufile_alloc - allocate a segment : inode of segment usage file : pointer to segment number</p>
<p>Description: <a class="el" href="sufile_8c.html#a6af95c8f1e6b7fedd7f95421e2eeafe6">nilfs_sufile_alloc()</a> allocates a clean segment.</p>
<p>Return Value: On success, 0 is returned and the segment number of the allocated segment is stored in the place pointed by . On error, one of the following negative error codes is returned.</p>
<p>%-EIO - I/O error.</p>
<p>%-ENOMEM - Insufficient amount of memory available.</p>
<p>%-ENOSPC - No clean segment left. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_ae43422797775f081a1fe1fe6abef686f_cgraph.png" border="0" usemap="#sufile_8h_ae43422797775f081a1fe1fe6abef686f_cgraph" alt=""/></div>
<map name="sufile_8h_ae43422797775f081a1fe1fe6abef686f_cgraph" id="sufile_8h_ae43422797775f081a1fe1fe6abef686f_cgraph">
<area shape="rect" id="node2" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="899,2251,989,2277"/>
<area shape="rect" id="node3" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1497,936,1593,963"/>
<area shape="rect" id="node4" href="sufile_8c.html#a7df3cdff37c5aa00cca3458f1d7d400e" title="nilfs_sufile_get_header\l_block" alt="" coords="867,550,1021,591"/>
<area shape="rect" id="node8" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="172,1231,352,1257"/>
<area shape="rect" id="node12" href="sufile_8c.html#a38f2abf7ef7577b1af4b9e8fc9316727" title="nilfs_sufile_get_segment\l_usage_block" alt="" coords="861,718,1027,759"/>
<area shape="rect" id="node15" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1101,2048,1223,2075"/>
<area shape="rect" id="node19" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="873,1677,1015,1704"/>
<area shape="rect" id="node22" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="871,1779,1017,1821"/>
<area shape="rect" id="node49" href="sufile_8c.html#a34ecb984fd0f57101d2ee0b4bde4bf95" title="nilfs_sufile_segment\l_usages_in_block" alt="" coords="873,1459,1015,1501"/>
<area shape="rect" id="node5" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="1093,683,1231,709"/>
<area shape="rect" id="node6" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="1299,632,1444,659"/>
<area shape="rect" id="node7" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="1293,683,1449,709"/>
<area shape="rect" id="node9" href="sufile_8h.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="400,1829,583,1856"/>
<area shape="rect" id="node10" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="420,2083,563,2125"/>
<area shape="rect" id="node11" href="sufile_8h.html#ae5c9db186be6baf07d66e049a0fd9b9b" title="nilfs_sufile_mark_dirty" alt="" coords="644,1041,796,1068"/>
<area shape="rect" id="node21" href="sufile_8h.html#ac6379742426c30d02072b1a5b0f527f8" title="nilfs_sufile_set_segment\l_usage" alt="" coords="637,946,803,987"/>
<area shape="rect" id="node24" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033" title="nblocks" alt="" coords="911,1205,977,1232"/>
<area shape="rect" id="node25" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="422,920,561,947"/>
<area shape="rect" id="node26" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="645,1097,795,1124"/>
<area shape="rect" id="node28" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687" title="nilfs_sufile_set_suinfo" alt="" coords="645,1728,795,1755"/>
<area shape="rect" id="node30" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="651,500,789,527"/>
<area shape="rect" id="node31" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="655,727,785,753"/>
<area shape="rect" id="node32" href="sufile_8h.html#acad60c93c0f7f6c3a8a9dc843107f1ed" title="nilfs_sufile_do_scrap" alt="" coords="648,1997,792,2024"/>
<area shape="rect" id="node33" href="sufile_8h.html#a577d0d35a7907909b6c0a139d8cc1704" title="nilfs_sufile_do_free" alt="" coords="653,2048,787,2075"/>
<area shape="rect" id="node34" href="sufile_8h.html#aff87ff4257115842ff3c7940e5f8e769" title="nilfs_sufile_do_cancel_free" alt="" coords="631,2099,809,2125"/>
<area shape="rect" id="node35" href="sufile_8h.html#a7e943e59486cd6176a3317bed589b7c9" title="nilfs_sufile_do_set\l_error" alt="" coords="655,1931,785,1973"/>
<area shape="rect" id="node36" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="428,1525,555,1552"/>
<area shape="rect" id="node40" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="662,296,778,323"/>
<area shape="rect" id="node47" href="sufile_8h.html#a202058a1d5a7ee3658e8e7cda1ffee37" title="nilfs_sufile_trim_fs" alt="" coords="655,1172,785,1199"/>
<area shape="rect" id="node13" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="1088,835,1236,861"/>
<area shape="rect" id="node14" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="1301,1358,1442,1399"/>
<area shape="rect" id="node16" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1311,2048,1432,2075"/>
<area shape="rect" id="node17" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1304,2099,1439,2125"/>
<area shape="rect" id="node18" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1302,1997,1441,2024"/>
<area shape="rect" id="node20" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1127,632,1197,659"/>
<area shape="rect" id="node23" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="1087,1464,1237,1491"/>
<area shape="rect" id="node27" href="the__nilfs_8h.html#a51bb53199a62a87f269e03404136d00f" title="nilfs_segment_is_active" alt="" coords="863,1256,1025,1283"/>
<area shape="rect" id="node29" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="861,2099,1027,2125"/>
<area shape="rect" id="node37" href="the__nilfs_8c.html#aa7bf85e7bb9022b3680b22d945d17f91" title="nilfs_nrsvsegs" alt="" coords="891,1627,997,1653"/>
<area shape="rect" id="node38" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="651,1434,789,1475"/>
<area shape="rect" id="node39" href="the__nilfs_8c.html#a38632ac69509070865038bf0120a1509" title="nilfs_set_nsegments" alt="" coords="649,1627,791,1653"/>
<area shape="rect" id="node41" href="nilfs2_2inode_8c.html#ae758d8edf633a8af3535ac0af248f1d1" title="nilfs_iget_locked" alt="" coords="885,144,1003,171"/>
<area shape="rect" id="node42" href="mdt_8c.html#a9d24c6e56a98e581fc30fd8a65841e2a" title="nilfs_mdt_init" alt="" coords="895,195,993,221"/>
<area shape="rect" id="node43" href="mdt_8c.html#ae0d853ce1775f22eb93823f6423e6fac" title="nilfs_mdt_set_entry_size" alt="" coords="1079,245,1245,272"/>
<area shape="rect" id="node44" href="nilfs2_2inode_8c.html#affec0e84c605c1d9028332974ba58cd3" title="nilfs_read_inode_common" alt="" coords="857,347,1031,373"/>
<area shape="rect" id="node45" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="1097,68,1227,95"/>
<area shape="rect" id="node46" href="bad__inode_8c.html#a8c027cf52e2b7669b11b0bfa09bbcd45" title="iget_failed" alt="" coords="903,43,985,69"/>
<area shape="rect" id="node48" href="the__nilfs_8h.html#acbe15a8b57f8ecf5e4777294c2f7303d" title="nilfs_get_segnum_of\l_block" alt="" coords="873,1139,1015,1181"/>
<area shape="rect" id="node50" href="the__nilfs_8h.html#a0dc161eb6c4f6bad9212b67517b46a37" title="nilfs_get_segment_range" alt="" coords="861,1088,1027,1115"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_ae43422797775f081a1fe1fe6abef686f_icgraph.png" border="0" usemap="#sufile_8h_ae43422797775f081a1fe1fe6abef686f_icgraph" alt=""/></div>
<map name="sufile_8h_ae43422797775f081a1fe1fe6abef686f_icgraph" id="sufile_8h_ae43422797775f081a1fe1fe6abef686f_icgraph">
<area shape="rect" id="node2" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="801,172,954,213"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="195,5,329,47"/>
<area shape="rect" id="node24" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="806,107,949,148"/>
<area shape="rect" id="node26" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="172,523,352,550"/>
<area shape="rect" id="node3" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1013,271,1188,298"/>
<area shape="rect" id="node4" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1287,466,1364,493"/>
<area shape="rect" id="node5" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1502,515,1607,542"/>
<area shape="rect" id="node7" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1496,465,1613,491"/>
<area shape="rect" id="node6" href="nilfs2_2super_8c.html#a6f69bb47bb8193c95863dfa7858e0556" title="nilfs_mount" alt="" coords="1729,515,1818,542"/>
<area shape="rect" id="node8" href="nilfs2_2super_8c.html#aa52d92dd32f84052f43449918f769c15" title="nilfs_sync_fs" alt="" coords="1724,465,1823,491"/>
<area shape="rect" id="node9" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1695,313,1852,339"/>
<area shape="rect" id="node10" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1904,271,2052,298"/>
<area shape="rect" id="node14" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1909,323,2047,364"/>
<area shape="rect" id="node15" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1900,389,2056,415"/>
<area shape="rect" id="node11" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096" title="nilfs_ioctl_clean_segments" alt="" coords="2104,334,2283,361"/>
<area shape="rect" id="node12" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="2345,591,2422,618"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="2484,554,2604,581"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1236,283,1415,310"/>
<area shape="rect" id="node18" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1903,440,2053,481"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1463,247,1647,288"/>
<area shape="rect" id="node19" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="2331,482,2436,509"/>
<area shape="rect" id="node20" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="2135,498,2251,525"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8h.html#a1907ac7b54882bbf06019eaf6d03c21c" title="nilfs_relax_pressure\l_in_lock" alt="" coords="1704,247,1843,288"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8c.html#a8b69f4181745f44662620421e0f88ab0" title="nilfs_transaction_lock" alt="" coords="1699,363,1847,390"/>
<area shape="rect" id="node25" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1030,322,1171,349"/>
<area shape="rect" id="node27" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="407,418,544,445"/>
<area shape="rect" id="node32" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="410,281,541,307"/>
<area shape="rect" id="node38" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="404,627,547,668"/>
<area shape="rect" id="node42" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="406,523,545,550"/>
<area shape="rect" id="node45" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="406,776,545,817"/>
<area shape="rect" id="node46" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="607,785,733,811"/>
<area shape="rect" id="node47" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="400,574,551,601"/>
<area shape="rect" id="node49" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="417,473,533,499"/>
<area shape="rect" id="node28" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="610,414,730,441"/>
<area shape="rect" id="node30" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="605,348,735,389"/>
<area shape="rect" id="node29" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="807,407,948,448"/>
<area shape="rect" id="node31" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1035,205,1167,247"/>
<area shape="rect" id="node33" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="609,281,731,307"/>
<area shape="rect" id="node34" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="613,179,727,206"/>
<area shape="rect" id="node37" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="599,129,741,155"/>
<area shape="rect" id="node35" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="789,55,965,82"/>
<area shape="rect" id="node36" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="802,289,953,331"/>
<area shape="rect" id="node39" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="824,734,931,761"/>
<area shape="rect" id="node41" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="2125,668,2261,709"/>
<area shape="rect" id="node40" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="1266,734,1385,761"/>
<area shape="rect" id="node43" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="1028,574,1173,601"/>
<area shape="rect" id="node44" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="599,516,741,557"/>
<area shape="rect" id="node48" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="1264,617,1387,659"/>
<area shape="rect" id="node50" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="1028,470,1173,497"/>
</map>
</div>

</div>
</div>
<a id="a9da8122c97b0bb9b56f5a85dbdad019b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9da8122c97b0bb9b56f5a85dbdad019b">&#9670;&nbsp;</a></span>nilfs_sufile_cancel_freev()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_sufile_cancel_freev </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64 *&#160;</td>
          <td class="paramname"><em>segnumv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nsegs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>ndone</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_sufile_cancel_freev - reallocate freeing segments : inode of segment usage file : array of segment numbers : size of  array : place to store the number of cancelled segments</p>
<p>Return Value: On success, 0 is returned. On error, a negative error codes is returned. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_a9da8122c97b0bb9b56f5a85dbdad019b_cgraph.png" border="0" usemap="#sufile_8h_a9da8122c97b0bb9b56f5a85dbdad019b_cgraph" alt=""/></div>
<map name="sufile_8h_a9da8122c97b0bb9b56f5a85dbdad019b_cgraph" id="sufile_8h_a9da8122c97b0bb9b56f5a85dbdad019b_cgraph">
<area shape="rect" id="node2" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="183,1216,320,1243"/>
<area shape="rect" id="node36" href="sufile_8h.html#aff87ff4257115842ff3c7940e5f8e769" title="nilfs_sufile_do_cancel_free" alt="" coords="827,752,1005,779"/>
<area shape="rect" id="node3" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1693,1325,1789,1352"/>
<area shape="rect" id="node4" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="368,1216,548,1243"/>
<area shape="rect" id="node9" href="sufile_8c.html#a7df3cdff37c5aa00cca3458f1d7d400e" title="nilfs_sufile_get_header\l_block" alt="" coords="1063,1914,1217,1955"/>
<area shape="rect" id="node10" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="1289,1812,1427,1839"/>
<area shape="rect" id="node14" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="1284,1380,1432,1407"/>
<area shape="rect" id="node5" href="sufile_8h.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="596,1028,779,1055"/>
<area shape="rect" id="node7" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="616,1238,759,1279"/>
<area shape="rect" id="node8" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="857,1321,975,1348"/>
<area shape="rect" id="node25" href="sufile_8h.html#ae5c9db186be6baf07d66e049a0fd9b9b" title="nilfs_sufile_mark_dirty" alt="" coords="840,1123,992,1149"/>
<area shape="rect" id="node26" href="sufile_8h.html#ac6379742426c30d02072b1a5b0f527f8" title="nilfs_sufile_set_segment\l_usage" alt="" coords="833,686,999,727"/>
<area shape="rect" id="node27" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033" title="nblocks" alt="" coords="1107,2199,1173,2225"/>
<area shape="rect" id="node28" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="618,1908,757,1935"/>
<area shape="rect" id="node29" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="841,1629,991,1656"/>
<area shape="rect" id="node31" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687" title="nilfs_sufile_set_suinfo" alt="" coords="841,1173,991,1200"/>
<area shape="rect" id="node33" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="851,1781,981,1808"/>
<area shape="rect" id="node34" href="sufile_8h.html#acad60c93c0f7f6c3a8a9dc843107f1ed" title="nilfs_sufile_do_scrap" alt="" coords="844,853,988,880"/>
<area shape="rect" id="node35" href="sufile_8h.html#a577d0d35a7907909b6c0a139d8cc1704" title="nilfs_sufile_do_free" alt="" coords="849,803,983,829"/>
<area shape="rect" id="node37" href="sufile_8h.html#a7e943e59486cd6176a3317bed589b7c9" title="nilfs_sufile_do_set\l_error" alt="" coords="851,905,981,946"/>
<area shape="rect" id="node38" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="624,643,751,669"/>
<area shape="rect" id="node42" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="858,271,974,297"/>
<area shape="rect" id="node49" href="sufile_8h.html#a202058a1d5a7ee3658e8e7cda1ffee37" title="nilfs_sufile_trim_fs" alt="" coords="851,1731,981,1757"/>
<area shape="rect" id="node6" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="1095,904,1185,931"/>
<area shape="rect" id="node13" href="sufile_8c.html#a38f2abf7ef7577b1af4b9e8fc9316727" title="nilfs_sufile_get_segment\l_usage_block" alt="" coords="1057,1681,1223,1722"/>
<area shape="rect" id="node16" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="1067,1057,1213,1098"/>
<area shape="rect" id="node18" href="sufile_8c.html#a34ecb984fd0f57101d2ee0b4bde4bf95" title="nilfs_sufile_segment\l_usages_in_block" alt="" coords="1069,1746,1211,1787"/>
<area shape="rect" id="node19" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1297,803,1419,829"/>
<area shape="rect" id="node23" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="1069,752,1211,779"/>
<area shape="rect" id="node11" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="1495,1812,1640,1839"/>
<area shape="rect" id="node12" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="1489,1761,1645,1788"/>
<area shape="rect" id="node15" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="1497,1427,1638,1469"/>
<area shape="rect" id="node17" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="1283,1329,1433,1356"/>
<area shape="rect" id="node20" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1507,752,1628,779"/>
<area shape="rect" id="node21" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1500,803,1635,829"/>
<area shape="rect" id="node22" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1498,853,1637,880"/>
<area shape="rect" id="node24" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1323,423,1393,449"/>
<area shape="rect" id="node30" href="the__nilfs_8h.html#a51bb53199a62a87f269e03404136d00f" title="nilfs_segment_is_active" alt="" coords="1059,1528,1221,1555"/>
<area shape="rect" id="node32" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="1057,803,1223,829"/>
<area shape="rect" id="node39" href="the__nilfs_8c.html#aa7bf85e7bb9022b3680b22d945d17f91" title="nilfs_nrsvsegs" alt="" coords="1087,397,1193,424"/>
<area shape="rect" id="node40" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="847,1225,985,1266"/>
<area shape="rect" id="node41" href="the__nilfs_8c.html#a38632ac69509070865038bf0120a1509" title="nilfs_set_nsegments" alt="" coords="845,397,987,424"/>
<area shape="rect" id="node43" href="nilfs2_2inode_8c.html#ae758d8edf633a8af3535ac0af248f1d1" title="nilfs_iget_locked" alt="" coords="1081,144,1199,171"/>
<area shape="rect" id="node44" href="mdt_8c.html#a9d24c6e56a98e581fc30fd8a65841e2a" title="nilfs_mdt_init" alt="" coords="1091,195,1189,221"/>
<area shape="rect" id="node45" href="mdt_8c.html#ae0d853ce1775f22eb93823f6423e6fac" title="nilfs_mdt_set_entry_size" alt="" coords="1275,271,1441,297"/>
<area shape="rect" id="node46" href="nilfs2_2inode_8c.html#affec0e84c605c1d9028332974ba58cd3" title="nilfs_read_inode_common" alt="" coords="1053,296,1227,323"/>
<area shape="rect" id="node47" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="1293,68,1423,95"/>
<area shape="rect" id="node48" href="bad__inode_8c.html#a8c027cf52e2b7669b11b0bfa09bbcd45" title="iget_failed" alt="" coords="1099,43,1181,69"/>
<area shape="rect" id="node50" href="the__nilfs_8h.html#acbe15a8b57f8ecf5e4777294c2f7303d" title="nilfs_get_segnum_of\l_block" alt="" coords="1069,2031,1211,2073"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_a9da8122c97b0bb9b56f5a85dbdad019b_icgraph.png" border="0" usemap="#sufile_8h_a9da8122c97b0bb9b56f5a85dbdad019b_icgraph" alt=""/></div>
<map name="sufile_8h_a9da8122c97b0bb9b56f5a85dbdad019b_icgraph" id="sufile_8h_a9da8122c97b0bb9b56f5a85dbdad019b_icgraph">
<area shape="rect" id="node2" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="183,315,324,357"/>
<area shape="rect" id="node3" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="372,323,513,349"/>
<area shape="rect" id="node45" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="377,374,509,415"/>
<area shape="rect" id="node4" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="561,352,740,379"/>
<area shape="rect" id="node5" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1415,286,1565,327"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1207,411,1364,437"/>
<area shape="rect" id="node34" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="788,345,972,386"/>
<area shape="rect" id="node6" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="1637,200,1742,227"/>
<area shape="rect" id="node15" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="1631,301,1747,328"/>
<area shape="rect" id="node7" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1840,149,1960,176"/>
<area shape="rect" id="node8" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2056,107,2171,133"/>
<area shape="rect" id="node13" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2048,208,2179,235"/>
<area shape="rect" id="node9" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="2280,157,2369,184"/>
<area shape="rect" id="node10" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="2279,5,2371,32"/>
<area shape="rect" id="node11" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="2275,56,2374,83"/>
<area shape="rect" id="node12" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="2282,107,2367,133"/>
<area shape="rect" id="node14" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="2286,232,2363,259"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1416,352,1564,379"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1421,403,1559,445"/>
<area shape="rect" id="node30" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1412,469,1568,496"/>
<area shape="rect" id="node18" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096" title="nilfs_ioctl_clean_segments" alt="" coords="1811,352,1989,379"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8c.html#a39d3b93661aea1ce6d75d52641a734f7" title="nilfs_segctor_thread" alt="" coords="1620,411,1759,437"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#accb2af3cf720ef8a382baa244f770a64" title="nilfs_segctor_start\l_thread" alt="" coords="1835,403,1965,445"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8h.html#accc0b22d29c5e0dc0550492c2814845f" title="nilfs_attach_log_writer" alt="" coords="2037,411,2189,437"/>
<area shape="rect" id="node23" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="2591,436,2697,463"/>
<area shape="rect" id="node25" href="nilfs2_2super_8c.html#abaf12a9facc571b7e4e46389a440b694" title="nilfs_remount" alt="" coords="2275,512,2375,539"/>
<area shape="rect" id="node26" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="2237,461,2412,488"/>
<area shape="rect" id="node24" href="nilfs2_2super_8c.html#a6f69bb47bb8193c95863dfa7858e0556" title="nilfs_mount" alt="" coords="2755,499,2845,525"/>
<area shape="rect" id="node27" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="2460,461,2537,488"/>
<area shape="rect" id="node28" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="2585,575,2703,601"/>
<area shape="rect" id="node29" href="nilfs2_2super_8c.html#aa52d92dd32f84052f43449918f769c15" title="nilfs_sync_fs" alt="" coords="2751,575,2849,601"/>
<area shape="rect" id="node31" href="nilfs2_2segment_8c.html#a53eace4b3351e7a47d95a83e02257fda" title="nilfs_segctor_destroy" alt="" coords="1616,469,1763,496"/>
<area shape="rect" id="node32" href="nilfs2_2segment_8h.html#a86ad97768e43fb1c81c962ab7f895fb0" title="nilfs_detach_log_writer" alt="" coords="1823,469,1977,496"/>
<area shape="rect" id="node33" href="nilfs2_2super_8c.html#aa48b8ba2014d88aac606b97a2b09d0ef" title="nilfs_put_super" alt="" coords="2058,563,2169,589"/>
<area shape="rect" id="node35" href="nilfs2_2segment_8h.html#a1907ac7b54882bbf06019eaf6d03c21c" title="nilfs_relax_pressure\l_in_lock" alt="" coords="1020,185,1159,226"/>
<area shape="rect" id="node44" href="nilfs2_2segment_8c.html#a8b69f4181745f44662620421e0f88ab0" title="nilfs_transaction_lock" alt="" coords="1211,352,1359,379"/>
<area shape="rect" id="node36" href="nilfs2_2inode_8c.html#a8a5d71f4673d9c2189dbab1207a8ed89" title="nilfs_truncate_bmap" alt="" coords="1216,149,1355,176"/>
<area shape="rect" id="node37" href="nilfs_8h.html#a09611eebbba5a083ef8bc7e99be0f4a1" title="nilfs_truncate" alt="" coords="1440,99,1540,125"/>
<area shape="rect" id="node43" href="nilfs_8h.html#a83b6688ab0aed44d51559794d660c5ca" title="nilfs_evict_inode" alt="" coords="1431,149,1549,176"/>
<area shape="rect" id="node38" href="nilfs_8h.html#a5c3f5e67f9f8c1d512363b1b93f23d3a" title="nilfs_write_failed" alt="" coords="1630,251,1749,277"/>
<area shape="rect" id="node42" href="nilfs_8h.html#a6397167aefce0988e92601bcc79770d6" title="nilfs_setattr" alt="" coords="1644,99,1735,125"/>
<area shape="rect" id="node39" href="nilfs2_2inode_8c.html#a312da46a81f7b2935058b894b07c327a" title="nilfs_write_begin" alt="" coords="1841,235,1959,261"/>
<area shape="rect" id="node40" href="nilfs2_2recovery_8c.html#a2ee5a3a12c87c9cd4363d28a2c6edb73" title="nilfs_recover_dsync\l_blocks" alt="" coords="1831,286,1969,327"/>
<area shape="rect" id="node41" href="nilfs2_2recovery_8c.html#a2a17f874531cf68d55aecb35d5e54fff" title="nilfs_do_roll_forward" alt="" coords="2043,309,2184,336"/>
</map>
</div>

</div>
</div>
<a id="aff87ff4257115842ff3c7940e5f8e769"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff87ff4257115842ff3c7940e5f8e769">&#9670;&nbsp;</a></span>nilfs_sufile_do_cancel_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nilfs_sufile_do_cancel_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct buffer_head *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct buffer_head *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_aff87ff4257115842ff3c7940e5f8e769_cgraph.png" border="0" usemap="#sufile_8h_aff87ff4257115842ff3c7940e5f8e769_cgraph" alt=""/></div>
<map name="sufile_8h_aff87ff4257115842ff3c7940e5f8e769_cgraph" id="sufile_8h_aff87ff4257115842ff3c7940e5f8e769_cgraph">
<area shape="rect" id="node2" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="242,107,389,148"/>
<area shape="rect" id="node6" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="232,274,399,301"/>
<area shape="rect" id="node7" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="460,274,583,301"/>
<area shape="rect" id="node48" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="476,173,567,199"/>
<area shape="rect" id="node49" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="244,325,387,351"/>
<area shape="rect" id="node3" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="447,71,596,98"/>
<area shape="rect" id="node4" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="875,97,971,123"/>
<area shape="rect" id="node5" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="644,5,785,47"/>
<area shape="rect" id="node8" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="654,274,775,301"/>
<area shape="rect" id="node10" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="647,361,782,387"/>
<area shape="rect" id="node47" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="645,223,784,250"/>
<area shape="rect" id="node9" href="buffer_8c.html#ae236845de65ed065f74eecf8f6ee9742" title="EXPORT_SYMBOL_GPL" alt="" coords="837,237,1009,263"/>
<area shape="rect" id="node11" href="fs-writeback_8c.html#af5890cdc0a937a4f944928bd1880d49b" title="block_dump___mark_inode\l_dirty" alt="" coords="833,419,1013,460"/>
<area shape="rect" id="node34" href="fs-writeback_8c.html#a044f1d7ff09b03f639232ec0e6a88ee1" title="EXPORT_SYMBOL" alt="" coords="2324,327,2463,354"/>
<area shape="rect" id="node43" href="fs-writeback_8c.html#ad0ca24311e1c0ba76d3810d240f72b08" title="locked_inode_to_wb\l_and_lock_list" alt="" coords="853,288,993,329"/>
<area shape="rect" id="node44" href="fs-writeback_8c.html#a2a36a21e075aa2a912f5c3cb027692cf" title="inode_io_list_move\l_locked" alt="" coords="857,353,990,395"/>
<area shape="rect" id="node12" href="dcache_8c.html#a9f042046c19f277000ddfc09b02e3633" title="d_find_alias" alt="" coords="1098,487,1189,514"/>
<area shape="rect" id="node16" href="dcache_8c.html#aebcca358185b5176b69b97e7eab12dfd" title="dput" alt="" coords="1120,411,1167,438"/>
<area shape="rect" id="node13" href="dcache_8c.html#a3eb221591429fdc67dec907c0d09d26a" title="__d_find_alias" alt="" coords="1273,538,1379,565"/>
<area shape="rect" id="node15" href="dcache_8c.html#aeb5ec7bdf3301140d66dd18ae638685c" title="EXPORT_SYMBOL" alt="" coords="1759,437,1897,463"/>
<area shape="rect" id="node14" href="dcache_8c.html#ab9c0fece5c680f2c592413b6d3239ae9" title="__dget_dlock" alt="" coords="1427,538,1525,565"/>
<area shape="rect" id="node17" href="dcache_8c.html#a364a93ebd8b57977a5a90f2076dd8f59" title="fast_dput" alt="" coords="1288,335,1364,362"/>
<area shape="rect" id="node18" href="dcache_8c.html#a689bf4f6109300b7bc021f1641052f99" title="retain_dentry" alt="" coords="1427,386,1525,413"/>
<area shape="rect" id="node20" href="dcache_8c.html#a4a5ea078fab8f6527abb7f44aa88efd3" title="dentry_kill" alt="" coords="1285,285,1367,311"/>
<area shape="rect" id="node19" href="dcache_8c.html#a3b177069d047c319ff2309aa5be9342e" title="d_lru_add" alt="" coords="1603,386,1681,413"/>
<area shape="rect" id="node21" href="dcache_8c.html#aa89b23ccc5b34160480a5b0541255a2e" title="__lock_parent" alt="" coords="1591,335,1693,362"/>
<area shape="rect" id="node22" href="dcache_8c.html#a051b3970369269b3c6fcc1a19be37bed" title="__dentry_kill" alt="" coords="1429,209,1523,235"/>
<area shape="rect" id="node42" href="dcache_8c.html#a6a36af9be383e7cbabb89162ff8af440" title="lock_parent" alt="" coords="1431,285,1521,311"/>
<area shape="rect" id="node23" href="dcache_8c.html#aa69465ec94d92f14786fdce2f5bfb175" title="d_lru_del" alt="" coords="1605,82,1679,109"/>
<area shape="rect" id="node24" href="dcache_8c.html#ae4904480d16c7850ae6994e92d110f96" title="__d_drop" alt="" coords="1605,285,1679,311"/>
<area shape="rect" id="node27" href="dcache_8c.html#ae2050a139fbd1eb7bfc238686e1b2e0b" title="dentry_unlist" alt="" coords="1594,133,1690,159"/>
<area shape="rect" id="node28" href="dcache_8c.html#acad4e66a4f8cc5a5bce5cb90bc5d6279" title="dentry_unlink_inode" alt="" coords="1573,183,1711,210"/>
<area shape="rect" id="node36" href="dcache_8c.html#ad8b0a5de190038ed843fa392d181c8a5" title="dentry_free" alt="" coords="1599,234,1685,261"/>
<area shape="rect" id="node25" href="dcache_8c.html#afe7718ea6372af4edd41d375be2b7755" title="___d_drop" alt="" coords="1787,386,1869,413"/>
<area shape="rect" id="node26" href="dcache_8c.html#ad0da24b939325fb96de67394f99b2766" title="d_hash" alt="" coords="1995,386,2059,413"/>
<area shape="rect" id="node29" href="dcache_8c.html#a0858bd86148196ec3ef3606f8f0de24f" title="__d_clear_type_and\l_inode" alt="" coords="1759,117,1897,159"/>
<area shape="rect" id="node30" href="inode_8c.html#a378733dcbf0fb08359b9a02145ac8fc3" title="iput" alt="" coords="1807,66,1849,93"/>
<area shape="rect" id="node31" href="inode_8c.html#a7e99b25ac29d19bc82fbddcb773c4f25" title="iput_final" alt="" coords="1990,66,2065,93"/>
<area shape="rect" id="node35" href="debugfs_2inode_8c.html#a16e485b5debd4cd96a200844c38df190" title="EXPORT_SYMBOL" alt="" coords="1958,117,2097,143"/>
<area shape="rect" id="node32" href="inode_8c.html#a943dee860d20f57552f168683dcb4b5d" title="inode_add_lru" alt="" coords="2165,117,2268,143"/>
<area shape="rect" id="node33" href="fs-writeback_8c.html#aceeba3df6a433f68c665086a2ee53faa" title="write_inode_now" alt="" coords="2157,66,2276,93"/>
<area shape="rect" id="node37" href="dcache_8c.html#a230d6245e3962408f039e2e33a251d98" title="dname_external" alt="" coords="1771,234,1885,261"/>
<area shape="rect" id="node38" href="dcache_8c.html#a1cda4f5743f52a426fe40cc5cf933675" title="external_name" alt="" coords="1974,285,2081,311"/>
<area shape="rect" id="node39" href="dcache_8c.html#a9017dd31269b4b6d79821de35551ae41" title="__d_free_external" alt="" coords="1765,335,1891,362"/>
<area shape="rect" id="node41" href="dcache_8c.html#a7d181ee17b4a49e02eac0f247fd484a9" title="__d_free" alt="" coords="1792,183,1864,210"/>
<area shape="rect" id="node40" href="dcache_8c.html#a711826e19d5ad53c7b0bbe26a878cfff" title="__d_free_external_name" alt="" coords="1945,335,2109,362"/>
<area shape="rect" id="node45" href="fs-writeback_8c.html#ad9e6fcccf4baffa8e6c91881c6e428a9" title="wb_io_lists_populated" alt="" coords="1068,361,1219,387"/>
<area shape="rect" id="node46" href="fs-writeback_8c.html#aa31b94b7a70c8c8d396a5f0f3e8ef1ec" title="wb_io_lists_depopulated" alt="" coords="1061,310,1225,337"/>
<area shape="rect" id="node50" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="486,325,557,351"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_aff87ff4257115842ff3c7940e5f8e769_icgraph.png" border="0" usemap="#sufile_8h_aff87ff4257115842ff3c7940e5f8e769_icgraph" alt=""/></div>
<map name="sufile_8h_aff87ff4257115842ff3c7940e5f8e769_icgraph" id="sufile_8h_aff87ff4257115842ff3c7940e5f8e769_icgraph">
<area shape="rect" id="node2" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="232,367,412,393"/>
<area shape="rect" id="node22" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="665,450,795,491"/>
<area shape="rect" id="node3" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="467,367,604,393"/>
<area shape="rect" id="node24" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="470,316,601,343"/>
<area shape="rect" id="node36" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="464,418,607,459"/>
<area shape="rect" id="node40" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="671,183,789,209"/>
<area shape="rect" id="node42" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="466,676,605,703"/>
<area shape="rect" id="node45" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="466,610,605,651"/>
<area shape="rect" id="node46" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="667,617,793,644"/>
<area shape="rect" id="node47" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="460,140,611,167"/>
<area shape="rect" id="node49" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="477,191,593,217"/>
<area shape="rect" id="node4" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="670,391,790,417"/>
<area shape="rect" id="node5" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="867,393,1008,434"/>
<area shape="rect" id="node6" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1090,288,1231,315"/>
<area shape="rect" id="node7" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1296,289,1475,316"/>
<area shape="rect" id="node8" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1963,343,2113,385"/>
<area shape="rect" id="node15" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1755,183,1912,209"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1523,282,1707,323"/>
<area shape="rect" id="node9" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="2184,403,2289,429"/>
<area shape="rect" id="node14" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="2179,351,2295,377"/>
<area shape="rect" id="node10" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="2359,404,2479,431"/>
<area shape="rect" id="node11" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2536,404,2651,431"/>
<area shape="rect" id="node12" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2528,505,2659,532"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="2707,531,2784,557"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1964,292,2112,319"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1969,175,2107,217"/>
<area shape="rect" id="node18" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1960,241,2116,268"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8h.html#a1907ac7b54882bbf06019eaf6d03c21c" title="nilfs_relax_pressure\l_in_lock" alt="" coords="1764,234,1903,275"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a8b69f4181745f44662620421e0f88ab0" title="nilfs_transaction_lock" alt="" coords="1759,300,1907,327"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1095,339,1227,381"/>
<area shape="rect" id="node25" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="669,233,791,260"/>
<area shape="rect" id="node31" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="673,284,787,311"/>
<area shape="rect" id="node35" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="659,339,801,365"/>
<area shape="rect" id="node26" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="861,145,1014,186"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1073,144,1248,171"/>
<area shape="rect" id="node28" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1347,140,1424,167"/>
<area shape="rect" id="node29" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1562,180,1667,207"/>
<area shape="rect" id="node30" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1556,129,1673,156"/>
<area shape="rect" id="node32" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="866,210,1009,251"/>
<area shape="rect" id="node33" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="849,341,1025,368"/>
<area shape="rect" id="node34" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="862,275,1013,317"/>
<area shape="rect" id="node37" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="884,615,991,641"/>
<area shape="rect" id="node39" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1317,549,1453,590"/>
<area shape="rect" id="node38" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="2359,612,2478,639"/>
<area shape="rect" id="node41" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1093,217,1228,258"/>
<area shape="rect" id="node43" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="2164,697,2309,724"/>
<area shape="rect" id="node44" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="659,669,801,710"/>
<area shape="rect" id="node48" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="2357,162,2480,203"/>
<area shape="rect" id="node50" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="1088,57,1233,84"/>
</map>
</div>

</div>
</div>
<a id="a577d0d35a7907909b6c0a139d8cc1704"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a577d0d35a7907909b6c0a139d8cc1704">&#9670;&nbsp;</a></span>nilfs_sufile_do_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nilfs_sufile_do_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct buffer_head *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct buffer_head *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_a577d0d35a7907909b6c0a139d8cc1704_cgraph.png" border="0" usemap="#sufile_8h_a577d0d35a7907909b6c0a139d8cc1704_cgraph" alt=""/></div>
<map name="sufile_8h_a577d0d35a7907909b6c0a139d8cc1704_cgraph" id="sufile_8h_a577d0d35a7907909b6c0a139d8cc1704_cgraph">
<area shape="rect" id="node2" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="198,107,345,148"/>
<area shape="rect" id="node6" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="416,274,539,301"/>
<area shape="rect" id="node47" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="188,274,355,301"/>
<area shape="rect" id="node48" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="432,173,523,199"/>
<area shape="rect" id="node49" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="200,325,343,351"/>
<area shape="rect" id="node3" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="403,71,552,98"/>
<area shape="rect" id="node4" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="831,97,927,123"/>
<area shape="rect" id="node5" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="600,5,741,47"/>
<area shape="rect" id="node7" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="610,274,731,301"/>
<area shape="rect" id="node9" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="603,361,738,387"/>
<area shape="rect" id="node46" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="601,223,740,250"/>
<area shape="rect" id="node8" href="buffer_8c.html#ae236845de65ed065f74eecf8f6ee9742" title="EXPORT_SYMBOL_GPL" alt="" coords="793,237,965,263"/>
<area shape="rect" id="node10" href="fs-writeback_8c.html#af5890cdc0a937a4f944928bd1880d49b" title="block_dump___mark_inode\l_dirty" alt="" coords="789,419,969,460"/>
<area shape="rect" id="node33" href="fs-writeback_8c.html#a044f1d7ff09b03f639232ec0e6a88ee1" title="EXPORT_SYMBOL" alt="" coords="2280,327,2419,354"/>
<area shape="rect" id="node42" href="fs-writeback_8c.html#ad0ca24311e1c0ba76d3810d240f72b08" title="locked_inode_to_wb\l_and_lock_list" alt="" coords="809,288,949,329"/>
<area shape="rect" id="node43" href="fs-writeback_8c.html#a2a36a21e075aa2a912f5c3cb027692cf" title="inode_io_list_move\l_locked" alt="" coords="813,353,946,395"/>
<area shape="rect" id="node11" href="dcache_8c.html#a9f042046c19f277000ddfc09b02e3633" title="d_find_alias" alt="" coords="1054,487,1145,514"/>
<area shape="rect" id="node15" href="dcache_8c.html#aebcca358185b5176b69b97e7eab12dfd" title="dput" alt="" coords="1076,411,1123,438"/>
<area shape="rect" id="node12" href="dcache_8c.html#a3eb221591429fdc67dec907c0d09d26a" title="__d_find_alias" alt="" coords="1229,538,1335,565"/>
<area shape="rect" id="node14" href="dcache_8c.html#aeb5ec7bdf3301140d66dd18ae638685c" title="EXPORT_SYMBOL" alt="" coords="1715,437,1853,463"/>
<area shape="rect" id="node13" href="dcache_8c.html#ab9c0fece5c680f2c592413b6d3239ae9" title="__dget_dlock" alt="" coords="1383,538,1481,565"/>
<area shape="rect" id="node16" href="dcache_8c.html#a364a93ebd8b57977a5a90f2076dd8f59" title="fast_dput" alt="" coords="1244,335,1320,362"/>
<area shape="rect" id="node17" href="dcache_8c.html#a689bf4f6109300b7bc021f1641052f99" title="retain_dentry" alt="" coords="1383,386,1481,413"/>
<area shape="rect" id="node19" href="dcache_8c.html#a4a5ea078fab8f6527abb7f44aa88efd3" title="dentry_kill" alt="" coords="1241,285,1323,311"/>
<area shape="rect" id="node18" href="dcache_8c.html#a3b177069d047c319ff2309aa5be9342e" title="d_lru_add" alt="" coords="1559,386,1637,413"/>
<area shape="rect" id="node20" href="dcache_8c.html#aa89b23ccc5b34160480a5b0541255a2e" title="__lock_parent" alt="" coords="1547,335,1649,362"/>
<area shape="rect" id="node21" href="dcache_8c.html#a051b3970369269b3c6fcc1a19be37bed" title="__dentry_kill" alt="" coords="1385,209,1479,235"/>
<area shape="rect" id="node41" href="dcache_8c.html#a6a36af9be383e7cbabb89162ff8af440" title="lock_parent" alt="" coords="1387,285,1477,311"/>
<area shape="rect" id="node22" href="dcache_8c.html#aa69465ec94d92f14786fdce2f5bfb175" title="d_lru_del" alt="" coords="1561,82,1635,109"/>
<area shape="rect" id="node23" href="dcache_8c.html#ae4904480d16c7850ae6994e92d110f96" title="__d_drop" alt="" coords="1561,285,1635,311"/>
<area shape="rect" id="node26" href="dcache_8c.html#ae2050a139fbd1eb7bfc238686e1b2e0b" title="dentry_unlist" alt="" coords="1550,133,1646,159"/>
<area shape="rect" id="node27" href="dcache_8c.html#acad4e66a4f8cc5a5bce5cb90bc5d6279" title="dentry_unlink_inode" alt="" coords="1529,183,1667,210"/>
<area shape="rect" id="node35" href="dcache_8c.html#ad8b0a5de190038ed843fa392d181c8a5" title="dentry_free" alt="" coords="1555,234,1641,261"/>
<area shape="rect" id="node24" href="dcache_8c.html#afe7718ea6372af4edd41d375be2b7755" title="___d_drop" alt="" coords="1743,386,1825,413"/>
<area shape="rect" id="node25" href="dcache_8c.html#ad0da24b939325fb96de67394f99b2766" title="d_hash" alt="" coords="1951,386,2015,413"/>
<area shape="rect" id="node28" href="dcache_8c.html#a0858bd86148196ec3ef3606f8f0de24f" title="__d_clear_type_and\l_inode" alt="" coords="1715,117,1853,159"/>
<area shape="rect" id="node29" href="inode_8c.html#a378733dcbf0fb08359b9a02145ac8fc3" title="iput" alt="" coords="1763,66,1805,93"/>
<area shape="rect" id="node30" href="inode_8c.html#a7e99b25ac29d19bc82fbddcb773c4f25" title="iput_final" alt="" coords="1946,66,2021,93"/>
<area shape="rect" id="node34" href="debugfs_2inode_8c.html#a16e485b5debd4cd96a200844c38df190" title="EXPORT_SYMBOL" alt="" coords="1914,117,2053,143"/>
<area shape="rect" id="node31" href="inode_8c.html#a943dee860d20f57552f168683dcb4b5d" title="inode_add_lru" alt="" coords="2121,117,2224,143"/>
<area shape="rect" id="node32" href="fs-writeback_8c.html#aceeba3df6a433f68c665086a2ee53faa" title="write_inode_now" alt="" coords="2113,66,2232,93"/>
<area shape="rect" id="node36" href="dcache_8c.html#a230d6245e3962408f039e2e33a251d98" title="dname_external" alt="" coords="1727,234,1841,261"/>
<area shape="rect" id="node37" href="dcache_8c.html#a1cda4f5743f52a426fe40cc5cf933675" title="external_name" alt="" coords="1930,285,2037,311"/>
<area shape="rect" id="node38" href="dcache_8c.html#a9017dd31269b4b6d79821de35551ae41" title="__d_free_external" alt="" coords="1721,335,1847,362"/>
<area shape="rect" id="node40" href="dcache_8c.html#a7d181ee17b4a49e02eac0f247fd484a9" title="__d_free" alt="" coords="1748,183,1820,210"/>
<area shape="rect" id="node39" href="dcache_8c.html#a711826e19d5ad53c7b0bbe26a878cfff" title="__d_free_external_name" alt="" coords="1901,335,2065,362"/>
<area shape="rect" id="node44" href="fs-writeback_8c.html#ad9e6fcccf4baffa8e6c91881c6e428a9" title="wb_io_lists_populated" alt="" coords="1024,361,1175,387"/>
<area shape="rect" id="node45" href="fs-writeback_8c.html#aa31b94b7a70c8c8d396a5f0f3e8ef1ec" title="wb_io_lists_depopulated" alt="" coords="1017,310,1181,337"/>
<area shape="rect" id="node50" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="442,325,513,351"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_a577d0d35a7907909b6c0a139d8cc1704_icgraph.png" border="0" usemap="#sufile_8h_a577d0d35a7907909b6c0a139d8cc1704_icgraph" alt=""/></div>
<map name="sufile_8h_a577d0d35a7907909b6c0a139d8cc1704_icgraph" id="sufile_8h_a577d0d35a7907909b6c0a139d8cc1704_icgraph">
<area shape="rect" id="node2" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="188,450,368,477"/>
<area shape="rect" id="node4" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="626,63,746,90"/>
<area shape="rect" id="node31" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="629,243,743,270"/>
<area shape="rect" id="node3" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="423,249,560,275"/>
<area shape="rect" id="node24" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="426,299,557,326"/>
<area shape="rect" id="node36" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="420,719,563,760"/>
<area shape="rect" id="node40" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="627,362,745,389"/>
<area shape="rect" id="node42" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="422,475,561,502"/>
<area shape="rect" id="node45" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="422,577,561,619"/>
<area shape="rect" id="node46" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="623,651,749,678"/>
<area shape="rect" id="node47" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="416,526,567,553"/>
<area shape="rect" id="node49" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="433,425,549,451"/>
<area shape="rect" id="node22" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="621,115,751,156"/>
<area shape="rect" id="node5" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="823,5,964,47"/>
<area shape="rect" id="node6" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1046,231,1187,258"/>
<area shape="rect" id="node7" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1252,301,1431,327"/>
<area shape="rect" id="node8" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1919,311,2069,352"/>
<area shape="rect" id="node15" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1711,442,1868,469"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1479,323,1663,364"/>
<area shape="rect" id="node9" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="2140,379,2245,406"/>
<area shape="rect" id="node14" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="2135,318,2251,345"/>
<area shape="rect" id="node10" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="2315,389,2435,415"/>
<area shape="rect" id="node11" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2492,389,2607,415"/>
<area shape="rect" id="node12" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2484,439,2615,466"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="2663,566,2740,593"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1920,493,2068,519"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1925,376,2063,417"/>
<area shape="rect" id="node18" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1916,442,2072,469"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8h.html#a1907ac7b54882bbf06019eaf6d03c21c" title="nilfs_relax_pressure\l_in_lock" alt="" coords="1720,323,1859,364"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a8b69f4181745f44662620421e0f88ab0" title="nilfs_transaction_lock" alt="" coords="1715,389,1863,415"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1051,165,1183,207"/>
<area shape="rect" id="node25" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="625,306,747,333"/>
<area shape="rect" id="node35" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="615,186,757,213"/>
<area shape="rect" id="node26" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="817,355,970,396"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1029,358,1204,385"/>
<area shape="rect" id="node28" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1303,455,1380,482"/>
<area shape="rect" id="node29" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1518,439,1623,466"/>
<area shape="rect" id="node30" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1512,490,1629,517"/>
<area shape="rect" id="node32" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="822,289,965,331"/>
<area shape="rect" id="node33" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="805,173,981,199"/>
<area shape="rect" id="node34" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="818,224,969,265"/>
<area shape="rect" id="node37" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="840,658,947,685"/>
<area shape="rect" id="node39" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1273,728,1409,769"/>
<area shape="rect" id="node38" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="2315,658,2434,685"/>
<area shape="rect" id="node41" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1049,409,1184,451"/>
<area shape="rect" id="node43" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="2120,542,2265,569"/>
<area shape="rect" id="node44" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="615,479,757,520"/>
<area shape="rect" id="node48" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="2313,592,2436,633"/>
<area shape="rect" id="node50" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="1044,475,1189,502"/>
</map>
</div>

</div>
</div>
<a id="acad60c93c0f7f6c3a8a9dc843107f1ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acad60c93c0f7f6c3a8a9dc843107f1ed">&#9670;&nbsp;</a></span>nilfs_sufile_do_scrap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nilfs_sufile_do_scrap </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct buffer_head *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct buffer_head *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_acad60c93c0f7f6c3a8a9dc843107f1ed_cgraph.png" border="0" usemap="#sufile_8h_acad60c93c0f7f6c3a8a9dc843107f1ed_cgraph" alt=""/></div>
<map name="sufile_8h_acad60c93c0f7f6c3a8a9dc843107f1ed_cgraph" id="sufile_8h_acad60c93c0f7f6c3a8a9dc843107f1ed_cgraph">
<area shape="rect" id="node2" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="207,107,354,148"/>
<area shape="rect" id="node6" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="197,274,364,301"/>
<area shape="rect" id="node7" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="425,274,548,301"/>
<area shape="rect" id="node48" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="441,173,532,199"/>
<area shape="rect" id="node49" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="209,325,352,351"/>
<area shape="rect" id="node3" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="412,71,561,98"/>
<area shape="rect" id="node4" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="841,97,937,123"/>
<area shape="rect" id="node5" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="609,5,751,47"/>
<area shape="rect" id="node8" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="619,274,741,301"/>
<area shape="rect" id="node10" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="613,361,747,387"/>
<area shape="rect" id="node47" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="611,223,749,250"/>
<area shape="rect" id="node9" href="buffer_8c.html#ae236845de65ed065f74eecf8f6ee9742" title="EXPORT_SYMBOL_GPL" alt="" coords="803,237,975,263"/>
<area shape="rect" id="node11" href="fs-writeback_8c.html#af5890cdc0a937a4f944928bd1880d49b" title="block_dump___mark_inode\l_dirty" alt="" coords="799,419,979,460"/>
<area shape="rect" id="node34" href="fs-writeback_8c.html#a044f1d7ff09b03f639232ec0e6a88ee1" title="EXPORT_SYMBOL" alt="" coords="2289,327,2428,354"/>
<area shape="rect" id="node43" href="fs-writeback_8c.html#ad0ca24311e1c0ba76d3810d240f72b08" title="locked_inode_to_wb\l_and_lock_list" alt="" coords="819,288,959,329"/>
<area shape="rect" id="node44" href="fs-writeback_8c.html#a2a36a21e075aa2a912f5c3cb027692cf" title="inode_io_list_move\l_locked" alt="" coords="822,353,955,395"/>
<area shape="rect" id="node12" href="dcache_8c.html#a9f042046c19f277000ddfc09b02e3633" title="d_find_alias" alt="" coords="1063,487,1154,514"/>
<area shape="rect" id="node16" href="dcache_8c.html#aebcca358185b5176b69b97e7eab12dfd" title="dput" alt="" coords="1085,411,1132,438"/>
<area shape="rect" id="node13" href="dcache_8c.html#a3eb221591429fdc67dec907c0d09d26a" title="__d_find_alias" alt="" coords="1239,538,1344,565"/>
<area shape="rect" id="node15" href="dcache_8c.html#aeb5ec7bdf3301140d66dd18ae638685c" title="EXPORT_SYMBOL" alt="" coords="1724,437,1863,463"/>
<area shape="rect" id="node14" href="dcache_8c.html#ab9c0fece5c680f2c592413b6d3239ae9" title="__dget_dlock" alt="" coords="1392,538,1491,565"/>
<area shape="rect" id="node17" href="dcache_8c.html#a364a93ebd8b57977a5a90f2076dd8f59" title="fast_dput" alt="" coords="1253,335,1329,362"/>
<area shape="rect" id="node18" href="dcache_8c.html#a689bf4f6109300b7bc021f1641052f99" title="retain_dentry" alt="" coords="1393,386,1490,413"/>
<area shape="rect" id="node20" href="dcache_8c.html#a4a5ea078fab8f6527abb7f44aa88efd3" title="dentry_kill" alt="" coords="1251,285,1332,311"/>
<area shape="rect" id="node19" href="dcache_8c.html#a3b177069d047c319ff2309aa5be9342e" title="d_lru_add" alt="" coords="1568,386,1647,413"/>
<area shape="rect" id="node21" href="dcache_8c.html#aa89b23ccc5b34160480a5b0541255a2e" title="__lock_parent" alt="" coords="1556,335,1659,362"/>
<area shape="rect" id="node22" href="dcache_8c.html#a051b3970369269b3c6fcc1a19be37bed" title="__dentry_kill" alt="" coords="1394,209,1489,235"/>
<area shape="rect" id="node42" href="dcache_8c.html#a6a36af9be383e7cbabb89162ff8af440" title="lock_parent" alt="" coords="1397,285,1486,311"/>
<area shape="rect" id="node23" href="dcache_8c.html#aa69465ec94d92f14786fdce2f5bfb175" title="d_lru_del" alt="" coords="1570,82,1645,109"/>
<area shape="rect" id="node24" href="dcache_8c.html#ae4904480d16c7850ae6994e92d110f96" title="__d_drop" alt="" coords="1570,285,1645,311"/>
<area shape="rect" id="node27" href="dcache_8c.html#ae2050a139fbd1eb7bfc238686e1b2e0b" title="dentry_unlist" alt="" coords="1559,133,1655,159"/>
<area shape="rect" id="node28" href="dcache_8c.html#acad4e66a4f8cc5a5bce5cb90bc5d6279" title="dentry_unlink_inode" alt="" coords="1539,183,1676,210"/>
<area shape="rect" id="node36" href="dcache_8c.html#ad8b0a5de190038ed843fa392d181c8a5" title="dentry_free" alt="" coords="1564,234,1651,261"/>
<area shape="rect" id="node25" href="dcache_8c.html#afe7718ea6372af4edd41d375be2b7755" title="___d_drop" alt="" coords="1752,386,1835,413"/>
<area shape="rect" id="node26" href="dcache_8c.html#ad0da24b939325fb96de67394f99b2766" title="d_hash" alt="" coords="1961,386,2025,413"/>
<area shape="rect" id="node29" href="dcache_8c.html#a0858bd86148196ec3ef3606f8f0de24f" title="__d_clear_type_and\l_inode" alt="" coords="1724,117,1863,159"/>
<area shape="rect" id="node30" href="inode_8c.html#a378733dcbf0fb08359b9a02145ac8fc3" title="iput" alt="" coords="1772,66,1815,93"/>
<area shape="rect" id="node31" href="inode_8c.html#a7e99b25ac29d19bc82fbddcb773c4f25" title="iput_final" alt="" coords="1955,66,2030,93"/>
<area shape="rect" id="node35" href="debugfs_2inode_8c.html#a16e485b5debd4cd96a200844c38df190" title="EXPORT_SYMBOL" alt="" coords="1923,117,2062,143"/>
<area shape="rect" id="node32" href="inode_8c.html#a943dee860d20f57552f168683dcb4b5d" title="inode_add_lru" alt="" coords="2131,117,2233,143"/>
<area shape="rect" id="node33" href="fs-writeback_8c.html#aceeba3df6a433f68c665086a2ee53faa" title="write_inode_now" alt="" coords="2123,66,2241,93"/>
<area shape="rect" id="node37" href="dcache_8c.html#a230d6245e3962408f039e2e33a251d98" title="dname_external" alt="" coords="1736,234,1851,261"/>
<area shape="rect" id="node38" href="dcache_8c.html#a1cda4f5743f52a426fe40cc5cf933675" title="external_name" alt="" coords="1939,285,2046,311"/>
<area shape="rect" id="node39" href="dcache_8c.html#a9017dd31269b4b6d79821de35551ae41" title="__d_free_external" alt="" coords="1731,335,1856,362"/>
<area shape="rect" id="node41" href="dcache_8c.html#a7d181ee17b4a49e02eac0f247fd484a9" title="__d_free" alt="" coords="1757,183,1829,210"/>
<area shape="rect" id="node40" href="dcache_8c.html#a711826e19d5ad53c7b0bbe26a878cfff" title="__d_free_external_name" alt="" coords="1911,335,2075,362"/>
<area shape="rect" id="node45" href="fs-writeback_8c.html#ad9e6fcccf4baffa8e6c91881c6e428a9" title="wb_io_lists_populated" alt="" coords="1033,361,1184,387"/>
<area shape="rect" id="node46" href="fs-writeback_8c.html#aa31b94b7a70c8c8d396a5f0f3e8ef1ec" title="wb_io_lists_depopulated" alt="" coords="1027,310,1191,337"/>
<area shape="rect" id="node50" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="451,325,522,351"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_acad60c93c0f7f6c3a8a9dc843107f1ed_icgraph.png" border="0" usemap="#sufile_8h_acad60c93c0f7f6c3a8a9dc843107f1ed_icgraph" alt=""/></div>
<map name="sufile_8h_acad60c93c0f7f6c3a8a9dc843107f1ed_icgraph" id="sufile_8h_acad60c93c0f7f6c3a8a9dc843107f1ed_icgraph">
<area shape="rect" id="node2" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="197,368,377,395"/>
<area shape="rect" id="node25" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="634,116,757,143"/>
<area shape="rect" id="node3" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="432,394,569,420"/>
<area shape="rect" id="node24" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="435,343,566,370"/>
<area shape="rect" id="node36" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="429,446,572,488"/>
<area shape="rect" id="node40" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="636,219,755,246"/>
<area shape="rect" id="node42" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="431,670,570,696"/>
<area shape="rect" id="node45" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="431,514,570,556"/>
<area shape="rect" id="node46" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="632,612,759,639"/>
<area shape="rect" id="node47" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="425,167,576,194"/>
<area shape="rect" id="node49" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="443,218,559,244"/>
<area shape="rect" id="node4" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="635,394,755,420"/>
<area shape="rect" id="node22" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="631,445,760,486"/>
<area shape="rect" id="node5" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="832,394,973,436"/>
<area shape="rect" id="node6" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1055,284,1197,311"/>
<area shape="rect" id="node7" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1261,284,1440,311"/>
<area shape="rect" id="node8" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1929,338,2078,380"/>
<area shape="rect" id="node15" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1720,178,1877,204"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1488,277,1672,318"/>
<area shape="rect" id="node9" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="2149,400,2255,427"/>
<area shape="rect" id="node14" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="2144,346,2260,372"/>
<area shape="rect" id="node10" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="2324,402,2444,428"/>
<area shape="rect" id="node11" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2501,402,2616,428"/>
<area shape="rect" id="node12" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2493,503,2624,530"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="2672,528,2749,555"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1929,287,2077,314"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1934,170,2073,212"/>
<area shape="rect" id="node18" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1925,236,2081,263"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8h.html#a1907ac7b54882bbf06019eaf6d03c21c" title="nilfs_relax_pressure\l_in_lock" alt="" coords="1729,229,1868,270"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a8b69f4181745f44662620421e0f88ab0" title="nilfs_transaction_lock" alt="" coords="1725,295,1873,322"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1060,336,1192,377"/>
<area shape="rect" id="node31" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="639,284,752,311"/>
<area shape="rect" id="node35" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="624,343,767,370"/>
<area shape="rect" id="node26" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="826,94,979,136"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1039,102,1213,128"/>
<area shape="rect" id="node28" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1312,102,1389,128"/>
<area shape="rect" id="node29" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1527,152,1633,179"/>
<area shape="rect" id="node30" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1521,102,1639,128"/>
<area shape="rect" id="node32" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="831,212,974,253"/>
<area shape="rect" id="node33" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="815,343,991,370"/>
<area shape="rect" id="node34" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="827,277,978,318"/>
<area shape="rect" id="node37" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="849,612,956,639"/>
<area shape="rect" id="node39" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1283,546,1419,588"/>
<area shape="rect" id="node38" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="2325,608,2443,635"/>
<area shape="rect" id="node41" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1059,185,1193,226"/>
<area shape="rect" id="node43" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="2129,696,2275,723"/>
<area shape="rect" id="node44" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="624,664,767,705"/>
<area shape="rect" id="node48" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="2323,161,2445,202"/>
<area shape="rect" id="node50" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="1053,47,1199,74"/>
</map>
</div>

</div>
</div>
<a id="a7e943e59486cd6176a3317bed589b7c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e943e59486cd6176a3317bed589b7c9">&#9670;&nbsp;</a></span>nilfs_sufile_do_set_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nilfs_sufile_do_set_error </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct buffer_head *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct buffer_head *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_a7e943e59486cd6176a3317bed589b7c9_cgraph.png" border="0" usemap="#sufile_8h_a7e943e59486cd6176a3317bed589b7c9_cgraph" alt=""/></div>
<map name="sufile_8h_a7e943e59486cd6176a3317bed589b7c9_cgraph" id="sufile_8h_a7e943e59486cd6176a3317bed589b7c9_cgraph">
<area shape="rect" id="node2" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="194,107,341,148"/>
<area shape="rect" id="node6" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="184,274,351,301"/>
<area shape="rect" id="node7" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="412,274,535,301"/>
<area shape="rect" id="node48" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="428,173,519,199"/>
<area shape="rect" id="node49" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="196,325,339,351"/>
<area shape="rect" id="node3" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="399,71,548,98"/>
<area shape="rect" id="node4" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="827,97,923,123"/>
<area shape="rect" id="node5" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="596,5,737,47"/>
<area shape="rect" id="node8" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="606,274,727,301"/>
<area shape="rect" id="node10" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="599,361,734,387"/>
<area shape="rect" id="node47" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="597,223,736,250"/>
<area shape="rect" id="node9" href="buffer_8c.html#ae236845de65ed065f74eecf8f6ee9742" title="EXPORT_SYMBOL_GPL" alt="" coords="789,237,961,263"/>
<area shape="rect" id="node11" href="fs-writeback_8c.html#af5890cdc0a937a4f944928bd1880d49b" title="block_dump___mark_inode\l_dirty" alt="" coords="785,419,965,460"/>
<area shape="rect" id="node34" href="fs-writeback_8c.html#a044f1d7ff09b03f639232ec0e6a88ee1" title="EXPORT_SYMBOL" alt="" coords="2276,327,2415,354"/>
<area shape="rect" id="node43" href="fs-writeback_8c.html#ad0ca24311e1c0ba76d3810d240f72b08" title="locked_inode_to_wb\l_and_lock_list" alt="" coords="805,288,945,329"/>
<area shape="rect" id="node44" href="fs-writeback_8c.html#a2a36a21e075aa2a912f5c3cb027692cf" title="inode_io_list_move\l_locked" alt="" coords="809,353,942,395"/>
<area shape="rect" id="node12" href="dcache_8c.html#a9f042046c19f277000ddfc09b02e3633" title="d_find_alias" alt="" coords="1050,487,1141,514"/>
<area shape="rect" id="node16" href="dcache_8c.html#aebcca358185b5176b69b97e7eab12dfd" title="dput" alt="" coords="1072,411,1119,438"/>
<area shape="rect" id="node13" href="dcache_8c.html#a3eb221591429fdc67dec907c0d09d26a" title="__d_find_alias" alt="" coords="1225,538,1331,565"/>
<area shape="rect" id="node15" href="dcache_8c.html#aeb5ec7bdf3301140d66dd18ae638685c" title="EXPORT_SYMBOL" alt="" coords="1711,437,1849,463"/>
<area shape="rect" id="node14" href="dcache_8c.html#ab9c0fece5c680f2c592413b6d3239ae9" title="__dget_dlock" alt="" coords="1379,538,1477,565"/>
<area shape="rect" id="node17" href="dcache_8c.html#a364a93ebd8b57977a5a90f2076dd8f59" title="fast_dput" alt="" coords="1240,335,1316,362"/>
<area shape="rect" id="node18" href="dcache_8c.html#a689bf4f6109300b7bc021f1641052f99" title="retain_dentry" alt="" coords="1379,386,1477,413"/>
<area shape="rect" id="node20" href="dcache_8c.html#a4a5ea078fab8f6527abb7f44aa88efd3" title="dentry_kill" alt="" coords="1237,285,1319,311"/>
<area shape="rect" id="node19" href="dcache_8c.html#a3b177069d047c319ff2309aa5be9342e" title="d_lru_add" alt="" coords="1555,386,1633,413"/>
<area shape="rect" id="node21" href="dcache_8c.html#aa89b23ccc5b34160480a5b0541255a2e" title="__lock_parent" alt="" coords="1543,335,1645,362"/>
<area shape="rect" id="node22" href="dcache_8c.html#a051b3970369269b3c6fcc1a19be37bed" title="__dentry_kill" alt="" coords="1381,209,1475,235"/>
<area shape="rect" id="node42" href="dcache_8c.html#a6a36af9be383e7cbabb89162ff8af440" title="lock_parent" alt="" coords="1383,285,1473,311"/>
<area shape="rect" id="node23" href="dcache_8c.html#aa69465ec94d92f14786fdce2f5bfb175" title="d_lru_del" alt="" coords="1557,82,1631,109"/>
<area shape="rect" id="node24" href="dcache_8c.html#ae4904480d16c7850ae6994e92d110f96" title="__d_drop" alt="" coords="1557,285,1631,311"/>
<area shape="rect" id="node27" href="dcache_8c.html#ae2050a139fbd1eb7bfc238686e1b2e0b" title="dentry_unlist" alt="" coords="1546,133,1642,159"/>
<area shape="rect" id="node28" href="dcache_8c.html#acad4e66a4f8cc5a5bce5cb90bc5d6279" title="dentry_unlink_inode" alt="" coords="1525,183,1663,210"/>
<area shape="rect" id="node36" href="dcache_8c.html#ad8b0a5de190038ed843fa392d181c8a5" title="dentry_free" alt="" coords="1551,234,1637,261"/>
<area shape="rect" id="node25" href="dcache_8c.html#afe7718ea6372af4edd41d375be2b7755" title="___d_drop" alt="" coords="1739,386,1821,413"/>
<area shape="rect" id="node26" href="dcache_8c.html#ad0da24b939325fb96de67394f99b2766" title="d_hash" alt="" coords="1947,386,2011,413"/>
<area shape="rect" id="node29" href="dcache_8c.html#a0858bd86148196ec3ef3606f8f0de24f" title="__d_clear_type_and\l_inode" alt="" coords="1711,117,1849,159"/>
<area shape="rect" id="node30" href="inode_8c.html#a378733dcbf0fb08359b9a02145ac8fc3" title="iput" alt="" coords="1759,66,1801,93"/>
<area shape="rect" id="node31" href="inode_8c.html#a7e99b25ac29d19bc82fbddcb773c4f25" title="iput_final" alt="" coords="1942,66,2017,93"/>
<area shape="rect" id="node35" href="debugfs_2inode_8c.html#a16e485b5debd4cd96a200844c38df190" title="EXPORT_SYMBOL" alt="" coords="1910,117,2049,143"/>
<area shape="rect" id="node32" href="inode_8c.html#a943dee860d20f57552f168683dcb4b5d" title="inode_add_lru" alt="" coords="2117,117,2220,143"/>
<area shape="rect" id="node33" href="fs-writeback_8c.html#aceeba3df6a433f68c665086a2ee53faa" title="write_inode_now" alt="" coords="2109,66,2228,93"/>
<area shape="rect" id="node37" href="dcache_8c.html#a230d6245e3962408f039e2e33a251d98" title="dname_external" alt="" coords="1723,234,1837,261"/>
<area shape="rect" id="node38" href="dcache_8c.html#a1cda4f5743f52a426fe40cc5cf933675" title="external_name" alt="" coords="1926,285,2033,311"/>
<area shape="rect" id="node39" href="dcache_8c.html#a9017dd31269b4b6d79821de35551ae41" title="__d_free_external" alt="" coords="1717,335,1843,362"/>
<area shape="rect" id="node41" href="dcache_8c.html#a7d181ee17b4a49e02eac0f247fd484a9" title="__d_free" alt="" coords="1744,183,1816,210"/>
<area shape="rect" id="node40" href="dcache_8c.html#a711826e19d5ad53c7b0bbe26a878cfff" title="__d_free_external_name" alt="" coords="1897,335,2061,362"/>
<area shape="rect" id="node45" href="fs-writeback_8c.html#ad9e6fcccf4baffa8e6c91881c6e428a9" title="wb_io_lists_populated" alt="" coords="1020,361,1171,387"/>
<area shape="rect" id="node46" href="fs-writeback_8c.html#aa31b94b7a70c8c8d396a5f0f3e8ef1ec" title="wb_io_lists_depopulated" alt="" coords="1013,310,1177,337"/>
<area shape="rect" id="node50" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="438,325,509,351"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_a7e943e59486cd6176a3317bed589b7c9_icgraph.png" border="0" usemap="#sufile_8h_a7e943e59486cd6176a3317bed589b7c9_icgraph" alt=""/></div>
<map name="sufile_8h_a7e943e59486cd6176a3317bed589b7c9_icgraph" id="sufile_8h_a7e943e59486cd6176a3317bed589b7c9_icgraph">
<area shape="rect" id="node2" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="184,310,364,337"/>
<area shape="rect" id="node35" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="611,566,753,593"/>
<area shape="rect" id="node3" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="419,515,556,542"/>
<area shape="rect" id="node24" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="422,465,553,491"/>
<area shape="rect" id="node36" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="416,273,559,315"/>
<area shape="rect" id="node40" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="623,402,741,429"/>
<area shape="rect" id="node42" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="418,82,557,109"/>
<area shape="rect" id="node45" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="418,208,557,249"/>
<area shape="rect" id="node46" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="619,161,745,187"/>
<area shape="rect" id="node47" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="412,31,563,58"/>
<area shape="rect" id="node49" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="429,339,545,366"/>
<area shape="rect" id="node4" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="622,626,742,653"/>
<area shape="rect" id="node22" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="617,696,747,737"/>
<area shape="rect" id="node5" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="819,663,960,704"/>
<area shape="rect" id="node6" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1042,553,1183,579"/>
<area shape="rect" id="node7" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1248,525,1427,551"/>
<area shape="rect" id="node8" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1915,488,2065,529"/>
<area shape="rect" id="node15" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1707,386,1864,413"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1475,488,1659,529"/>
<area shape="rect" id="node9" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="2136,379,2241,406"/>
<area shape="rect" id="node14" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="2131,495,2247,522"/>
<area shape="rect" id="node10" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="2311,323,2431,350"/>
<area shape="rect" id="node11" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2488,273,2603,299"/>
<area shape="rect" id="node12" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2480,374,2611,401"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="2659,197,2736,223"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1916,437,2064,463"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1921,320,2059,361"/>
<area shape="rect" id="node18" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1912,386,2068,413"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8h.html#a1907ac7b54882bbf06019eaf6d03c21c" title="nilfs_relax_pressure\l_in_lock" alt="" coords="1716,488,1855,529"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a8b69f4181745f44662620421e0f88ab0" title="nilfs_transaction_lock" alt="" coords="1711,437,1859,463"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1047,604,1179,645"/>
<area shape="rect" id="node25" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="621,453,743,479"/>
<area shape="rect" id="node31" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="625,503,739,530"/>
<area shape="rect" id="node26" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="813,415,966,456"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1025,430,1200,457"/>
<area shape="rect" id="node28" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1299,361,1376,387"/>
<area shape="rect" id="node29" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1514,386,1619,413"/>
<area shape="rect" id="node30" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1508,335,1625,362"/>
<area shape="rect" id="node32" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="818,480,961,521"/>
<area shape="rect" id="node33" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="801,611,977,638"/>
<area shape="rect" id="node34" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="814,545,965,587"/>
<area shape="rect" id="node37" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="836,171,943,198"/>
<area shape="rect" id="node39" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1269,233,1405,275"/>
<area shape="rect" id="node38" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="2311,171,2430,198"/>
<area shape="rect" id="node41" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1045,364,1180,405"/>
<area shape="rect" id="node43" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="2116,47,2261,74"/>
<area shape="rect" id="node44" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="611,95,753,136"/>
<area shape="rect" id="node48" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="2309,5,2432,47"/>
<area shape="rect" id="node50" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="1040,313,1185,339"/>
</map>
</div>

</div>
</div>
<a id="a67f76a7b0da53a061147b4a7f48e082d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67f76a7b0da53a061147b4a7f48e082d">&#9670;&nbsp;</a></span>nilfs_sufile_free()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_sufile_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64&#160;</td>
          <td class="paramname"><em>segnum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_sufile_free - free segment : inode of segment usage file : segment number to be freed </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_a67f76a7b0da53a061147b4a7f48e082d_cgraph.png" border="0" usemap="#sufile_8h_a67f76a7b0da53a061147b4a7f48e082d_cgraph" alt=""/></div>
<map name="sufile_8h_a67f76a7b0da53a061147b4a7f48e082d_cgraph" id="sufile_8h_a67f76a7b0da53a061147b4a7f48e082d_cgraph">
<area shape="rect" id="node2" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="167,1205,297,1232"/>
<area shape="rect" id="node34" href="sufile_8h.html#a577d0d35a7907909b6c0a139d8cc1704" title="nilfs_sufile_do_free" alt="" coords="826,1029,961,1056"/>
<area shape="rect" id="node3" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="345,1205,525,1232"/>
<area shape="rect" id="node6" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1664,995,1760,1021"/>
<area shape="rect" id="node9" href="sufile_8c.html#a7df3cdff37c5aa00cca3458f1d7d400e" title="nilfs_sufile_get_header\l_block" alt="" coords="1040,1931,1195,1973"/>
<area shape="rect" id="node12" href="sufile_8c.html#a38f2abf7ef7577b1af4b9e8fc9316727" title="nilfs_sufile_get_segment\l_usage_block" alt="" coords="1034,1358,1201,1399"/>
<area shape="rect" id="node4" href="sufile_8h.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="573,1307,756,1333"/>
<area shape="rect" id="node7" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="593,987,736,1029"/>
<area shape="rect" id="node8" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="834,1568,953,1595"/>
<area shape="rect" id="node24" href="sufile_8h.html#ae5c9db186be6baf07d66e049a0fd9b9b" title="nilfs_sufile_mark_dirty" alt="" coords="817,1619,969,1645"/>
<area shape="rect" id="node25" href="sufile_8h.html#ac6379742426c30d02072b1a5b0f527f8" title="nilfs_sufile_set_segment\l_usage" alt="" coords="810,1249,977,1290"/>
<area shape="rect" id="node26" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033" title="nblocks" alt="" coords="1084,43,1151,69"/>
<area shape="rect" id="node27" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="595,1827,734,1853"/>
<area shape="rect" id="node28" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="818,632,969,659"/>
<area shape="rect" id="node30" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687" title="nilfs_sufile_set_suinfo" alt="" coords="818,1673,969,1700"/>
<area shape="rect" id="node32" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="825,1831,962,1857"/>
<area shape="rect" id="node33" href="sufile_8h.html#acad60c93c0f7f6c3a8a9dc843107f1ed" title="nilfs_sufile_do_scrap" alt="" coords="821,1147,965,1173"/>
<area shape="rect" id="node35" href="sufile_8h.html#aff87ff4257115842ff3c7940e5f8e769" title="nilfs_sufile_do_cancel_free" alt="" coords="804,1197,983,1224"/>
<area shape="rect" id="node36" href="sufile_8h.html#a7e943e59486cd6176a3317bed589b7c9" title="nilfs_sufile_do_set\l_error" alt="" coords="828,1081,959,1122"/>
<area shape="rect" id="node37" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="601,835,728,861"/>
<area shape="rect" id="node41" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="835,2200,951,2227"/>
<area shape="rect" id="node48" href="sufile_8h.html#a202058a1d5a7ee3658e8e7cda1ffee37" title="nilfs_sufile_trim_fs" alt="" coords="828,211,959,237"/>
<area shape="rect" id="node5" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="1072,1475,1163,1501"/>
<area shape="rect" id="node15" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="1044,987,1191,1029"/>
<area shape="rect" id="node17" href="sufile_8c.html#a34ecb984fd0f57101d2ee0b4bde4bf95" title="nilfs_sufile_segment\l_usages_in_block" alt="" coords="1047,566,1188,607"/>
<area shape="rect" id="node18" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1265,1155,1388,1181"/>
<area shape="rect" id="node22" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="1046,1424,1189,1451"/>
<area shape="rect" id="node10" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="1257,1909,1396,1936"/>
<area shape="rect" id="node11" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="1460,1909,1605,1936"/>
<area shape="rect" id="node13" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="1253,1365,1401,1392"/>
<area shape="rect" id="node14" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="1462,697,1603,738"/>
<area shape="rect" id="node16" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="1252,531,1401,557"/>
<area shape="rect" id="node19" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1472,1104,1593,1131"/>
<area shape="rect" id="node20" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1465,1155,1600,1181"/>
<area shape="rect" id="node21" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1463,1205,1602,1232"/>
<area shape="rect" id="node23" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1291,2019,1362,2045"/>
<area shape="rect" id="node29" href="the__nilfs_8h.html#a51bb53199a62a87f269e03404136d00f" title="nilfs_segment_is_active" alt="" coords="1036,733,1199,760"/>
<area shape="rect" id="node31" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="1034,1104,1201,1131"/>
<area shape="rect" id="node38" href="the__nilfs_8c.html#aa7bf85e7bb9022b3680b22d945d17f91" title="nilfs_nrsvsegs" alt="" coords="1064,312,1171,339"/>
<area shape="rect" id="node39" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="824,878,963,919"/>
<area shape="rect" id="node40" href="the__nilfs_8c.html#a38632ac69509070865038bf0120a1509" title="nilfs_set_nsegments" alt="" coords="822,363,965,389"/>
<area shape="rect" id="node42" href="nilfs2_2inode_8c.html#ae758d8edf633a8af3535ac0af248f1d1" title="nilfs_iget_locked" alt="" coords="1058,2403,1177,2429"/>
<area shape="rect" id="node43" href="mdt_8c.html#a9d24c6e56a98e581fc30fd8a65841e2a" title="nilfs_mdt_init" alt="" coords="1068,2251,1167,2277"/>
<area shape="rect" id="node44" href="mdt_8c.html#ae0d853ce1775f22eb93823f6423e6fac" title="nilfs_mdt_set_entry_size" alt="" coords="1449,2200,1616,2227"/>
<area shape="rect" id="node45" href="nilfs2_2inode_8c.html#affec0e84c605c1d9028332974ba58cd3" title="nilfs_read_inode_common" alt="" coords="1031,2048,1204,2075"/>
<area shape="rect" id="node46" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="1262,2327,1391,2353"/>
<area shape="rect" id="node47" href="bad__inode_8c.html#a8c027cf52e2b7669b11b0bfa09bbcd45" title="iget_failed" alt="" coords="1077,2352,1158,2379"/>
<area shape="rect" id="node49" href="the__nilfs_8h.html#acbe15a8b57f8ecf5e4777294c2f7303d" title="nilfs_get_segnum_of\l_block" alt="" coords="1046,145,1189,186"/>
<area shape="rect" id="node50" href="the__nilfs_8h.html#a0dc161eb6c4f6bad9212b67517b46a37" title="nilfs_get_segment_range" alt="" coords="1034,93,1201,120"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_a67f76a7b0da53a061147b4a7f48e082d_icgraph.png" border="0" usemap="#sufile_8h_a67f76a7b0da53a061147b4a7f48e082d_icgraph" alt=""/></div>
<map name="sufile_8h_a67f76a7b0da53a061147b4a7f48e082d_icgraph" id="sufile_8h_a67f76a7b0da53a061147b4a7f48e082d_icgraph">
<area shape="rect" id="node2" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="593,115,746,157"/>
<area shape="rect" id="node29" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="183,174,326,215"/>
<area shape="rect" id="node46" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="167,305,343,332"/>
<area shape="rect" id="node48" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="179,239,330,281"/>
<area shape="rect" id="node3" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="2103,123,2277,149"/>
<area shape="rect" id="node4" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="2325,93,2403,120"/>
<area shape="rect" id="node5" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="3667,93,3773,120"/>
<area shape="rect" id="node7" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="2451,93,2568,120"/>
<area shape="rect" id="node6" href="nilfs2_2super_8c.html#a6f69bb47bb8193c95863dfa7858e0556" title="nilfs_mount" alt="" coords="3838,119,3927,145"/>
<area shape="rect" id="node8" href="nilfs2_2super_8c.html#aa52d92dd32f84052f43449918f769c15" title="nilfs_sync_fs" alt="" coords="2645,93,2744,120"/>
<area shape="rect" id="node9" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="2616,203,2773,229"/>
<area shape="rect" id="node10" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="2825,312,2973,339"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="2830,195,2969,237"/>
<area shape="rect" id="node25" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="2821,261,2977,288"/>
<area shape="rect" id="node11" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096" title="nilfs_ioctl_clean_segments" alt="" coords="3025,312,3204,339"/>
<area shape="rect" id="node12" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="3291,312,3368,339"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="3471,464,3591,491"/>
<area shape="rect" id="node14" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="3663,464,3777,491"/>
<area shape="rect" id="node19" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="3655,388,3785,415"/>
<area shape="rect" id="node15" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="3838,388,3927,415"/>
<area shape="rect" id="node16" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="3837,439,3929,465"/>
<area shape="rect" id="node17" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="3833,489,3932,516"/>
<area shape="rect" id="node18" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="3840,540,3925,567"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a39d3b93661aea1ce6d75d52641a734f7" title="nilfs_segctor_thread" alt="" coords="3045,93,3184,120"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8c.html#accb2af3cf720ef8a382baa244f770a64" title="nilfs_segctor_start\l_thread" alt="" coords="3265,94,3394,135"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8h.html#accc0b22d29c5e0dc0550492c2814845f" title="nilfs_attach_log_writer" alt="" coords="3455,93,3607,120"/>
<area shape="rect" id="node24" href="nilfs2_2super_8c.html#abaf12a9facc571b7e4e46389a440b694" title="nilfs_remount" alt="" coords="3670,144,3770,171"/>
<area shape="rect" id="node26" href="nilfs2_2segment_8c.html#a53eace4b3351e7a47d95a83e02257fda" title="nilfs_segctor_destroy" alt="" coords="3041,228,3188,255"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8h.html#a86ad97768e43fb1c81c962ab7f895fb0" title="nilfs_detach_log_writer" alt="" coords="3252,177,3407,204"/>
<area shape="rect" id="node28" href="nilfs2_2super_8c.html#aa48b8ba2014d88aac606b97a2b09d0ef" title="nilfs_put_super" alt="" coords="3475,195,3586,221"/>
<area shape="rect" id="node30" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="391,247,532,273"/>
<area shape="rect" id="node31" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="580,276,759,303"/>
<area shape="rect" id="node32" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="2825,617,2974,658"/>
<area shape="rect" id="node35" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="807,269,991,310"/>
<area shape="rect" id="node33" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="3277,616,3382,643"/>
<area shape="rect" id="node34" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="3057,667,3173,693"/>
<area shape="rect" id="node36" href="nilfs2_2segment_8h.html#a1907ac7b54882bbf06019eaf6d03c21c" title="nilfs_relax_pressure\l_in_lock" alt="" coords="1039,326,1177,367"/>
<area shape="rect" id="node45" href="nilfs2_2segment_8c.html#a8b69f4181745f44662620421e0f88ab0" title="nilfs_transaction_lock" alt="" coords="2621,261,2769,288"/>
<area shape="rect" id="node37" href="nilfs2_2inode_8c.html#a8a5d71f4673d9c2189dbab1207a8ed89" title="nilfs_truncate_bmap" alt="" coords="1225,363,1364,389"/>
<area shape="rect" id="node38" href="nilfs_8h.html#a09611eebbba5a083ef8bc7e99be0f4a1" title="nilfs_truncate" alt="" coords="1412,476,1512,503"/>
<area shape="rect" id="node44" href="nilfs_8h.html#a83b6688ab0aed44d51559794d660c5ca" title="nilfs_evict_inode" alt="" coords="1560,363,1679,389"/>
<area shape="rect" id="node39" href="nilfs_8h.html#a5c3f5e67f9f8c1d512363b1b93f23d3a" title="nilfs_write_failed" alt="" coords="1560,439,1679,465"/>
<area shape="rect" id="node43" href="nilfs_8h.html#a6397167aefce0988e92601bcc79770d6" title="nilfs_setattr" alt="" coords="1939,565,2029,592"/>
<area shape="rect" id="node40" href="nilfs2_2inode_8c.html#a312da46a81f7b2935058b894b07c327a" title="nilfs_write_begin" alt="" coords="1737,413,1855,440"/>
<area shape="rect" id="node41" href="nilfs2_2recovery_8c.html#a2ee5a3a12c87c9cd4363d28a2c6edb73" title="nilfs_recover_dsync\l_blocks" alt="" coords="1727,297,1865,338"/>
<area shape="rect" id="node42" href="nilfs2_2recovery_8c.html#a2a17f874531cf68d55aecb35d5e54fff" title="nilfs_do_roll_forward" alt="" coords="1913,300,2055,327"/>
<area shape="rect" id="node47" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="395,298,527,339"/>
</map>
</div>

</div>
</div>
<a id="af210832d1efe1b482aa7522fc34e4372"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af210832d1efe1b482aa7522fc34e4372">&#9670;&nbsp;</a></span>nilfs_sufile_freev()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_sufile_freev </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64 *&#160;</td>
          <td class="paramname"><em>segnumv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nsegs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>ndone</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_sufile_freev - free segments : inode of segment usage file : array of segment numbers : size of  array : place to store the number of freed segments </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_af210832d1efe1b482aa7522fc34e4372_cgraph.png" border="0" usemap="#sufile_8h_af210832d1efe1b482aa7522fc34e4372_cgraph" alt=""/></div>
<map name="sufile_8h_af210832d1efe1b482aa7522fc34e4372_cgraph" id="sufile_8h_af210832d1efe1b482aa7522fc34e4372_cgraph">
<area shape="rect" id="node2" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="173,1216,311,1243"/>
<area shape="rect" id="node35" href="sufile_8h.html#a577d0d35a7907909b6c0a139d8cc1704" title="nilfs_sufile_do_free" alt="" coords="839,752,974,779"/>
<area shape="rect" id="node3" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1684,1325,1780,1352"/>
<area shape="rect" id="node4" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="359,1216,539,1243"/>
<area shape="rect" id="node9" href="sufile_8c.html#a7df3cdff37c5aa00cca3458f1d7d400e" title="nilfs_sufile_get_header\l_block" alt="" coords="1053,1914,1208,1955"/>
<area shape="rect" id="node10" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="1279,1812,1418,1839"/>
<area shape="rect" id="node14" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="1275,1380,1423,1407"/>
<area shape="rect" id="node5" href="sufile_8h.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="587,1028,769,1055"/>
<area shape="rect" id="node7" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="607,1238,749,1279"/>
<area shape="rect" id="node8" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="847,1321,966,1348"/>
<area shape="rect" id="node25" href="sufile_8h.html#ae5c9db186be6baf07d66e049a0fd9b9b" title="nilfs_sufile_mark_dirty" alt="" coords="831,1123,983,1149"/>
<area shape="rect" id="node26" href="sufile_8h.html#ac6379742426c30d02072b1a5b0f527f8" title="nilfs_sufile_set_segment\l_usage" alt="" coords="823,686,990,727"/>
<area shape="rect" id="node27" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033" title="nblocks" alt="" coords="1097,2199,1164,2225"/>
<area shape="rect" id="node28" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="609,1908,747,1935"/>
<area shape="rect" id="node29" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="831,1629,982,1656"/>
<area shape="rect" id="node31" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687" title="nilfs_sufile_set_suinfo" alt="" coords="831,1173,982,1200"/>
<area shape="rect" id="node33" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="841,1781,972,1808"/>
<area shape="rect" id="node34" href="sufile_8h.html#acad60c93c0f7f6c3a8a9dc843107f1ed" title="nilfs_sufile_do_scrap" alt="" coords="835,853,979,880"/>
<area shape="rect" id="node36" href="sufile_8h.html#aff87ff4257115842ff3c7940e5f8e769" title="nilfs_sufile_do_cancel_free" alt="" coords="817,803,996,829"/>
<area shape="rect" id="node37" href="sufile_8h.html#a7e943e59486cd6176a3317bed589b7c9" title="nilfs_sufile_do_set\l_error" alt="" coords="841,905,972,946"/>
<area shape="rect" id="node38" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="615,643,741,669"/>
<area shape="rect" id="node42" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="849,271,965,297"/>
<area shape="rect" id="node49" href="sufile_8h.html#a202058a1d5a7ee3658e8e7cda1ffee37" title="nilfs_sufile_trim_fs" alt="" coords="841,1731,972,1757"/>
<area shape="rect" id="node6" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="1085,904,1176,931"/>
<area shape="rect" id="node13" href="sufile_8c.html#a38f2abf7ef7577b1af4b9e8fc9316727" title="nilfs_sufile_get_segment\l_usage_block" alt="" coords="1047,1681,1214,1722"/>
<area shape="rect" id="node16" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="1057,1057,1204,1098"/>
<area shape="rect" id="node18" href="sufile_8c.html#a34ecb984fd0f57101d2ee0b4bde4bf95" title="nilfs_sufile_segment\l_usages_in_block" alt="" coords="1060,1746,1201,1787"/>
<area shape="rect" id="node19" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1287,803,1410,829"/>
<area shape="rect" id="node23" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="1059,752,1202,779"/>
<area shape="rect" id="node11" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="1485,1812,1631,1839"/>
<area shape="rect" id="node12" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="1480,1761,1636,1788"/>
<area shape="rect" id="node15" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="1487,1427,1629,1469"/>
<area shape="rect" id="node17" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="1274,1329,1423,1356"/>
<area shape="rect" id="node20" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1497,752,1619,779"/>
<area shape="rect" id="node21" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1491,803,1625,829"/>
<area shape="rect" id="node22" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1489,853,1627,880"/>
<area shape="rect" id="node24" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1313,423,1384,449"/>
<area shape="rect" id="node30" href="the__nilfs_8h.html#a51bb53199a62a87f269e03404136d00f" title="nilfs_segment_is_active" alt="" coords="1049,1528,1212,1555"/>
<area shape="rect" id="node32" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="1047,803,1214,829"/>
<area shape="rect" id="node39" href="the__nilfs_8c.html#aa7bf85e7bb9022b3680b22d945d17f91" title="nilfs_nrsvsegs" alt="" coords="1077,397,1184,424"/>
<area shape="rect" id="node40" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="837,1225,976,1266"/>
<area shape="rect" id="node41" href="the__nilfs_8c.html#a38632ac69509070865038bf0120a1509" title="nilfs_set_nsegments" alt="" coords="835,397,978,424"/>
<area shape="rect" id="node43" href="nilfs2_2inode_8c.html#ae758d8edf633a8af3535ac0af248f1d1" title="nilfs_iget_locked" alt="" coords="1071,144,1190,171"/>
<area shape="rect" id="node44" href="mdt_8c.html#a9d24c6e56a98e581fc30fd8a65841e2a" title="nilfs_mdt_init" alt="" coords="1081,195,1180,221"/>
<area shape="rect" id="node45" href="mdt_8c.html#ae0d853ce1775f22eb93823f6423e6fac" title="nilfs_mdt_set_entry_size" alt="" coords="1265,271,1432,297"/>
<area shape="rect" id="node46" href="nilfs2_2inode_8c.html#affec0e84c605c1d9028332974ba58cd3" title="nilfs_read_inode_common" alt="" coords="1044,296,1217,323"/>
<area shape="rect" id="node47" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="1284,68,1413,95"/>
<area shape="rect" id="node48" href="bad__inode_8c.html#a8c027cf52e2b7669b11b0bfa09bbcd45" title="iget_failed" alt="" coords="1090,43,1171,69"/>
<area shape="rect" id="node50" href="the__nilfs_8h.html#acbe15a8b57f8ecf5e4777294c2f7303d" title="nilfs_get_segnum_of\l_block" alt="" coords="1059,2031,1202,2073"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_af210832d1efe1b482aa7522fc34e4372_icgraph.png" border="0" usemap="#sufile_8h_af210832d1efe1b482aa7522fc34e4372_icgraph" alt=""/></div>
<map name="sufile_8h_af210832d1efe1b482aa7522fc34e4372_icgraph" id="sufile_8h_af210832d1efe1b482aa7522fc34e4372_icgraph">
<area shape="rect" id="node2" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="173,345,315,386"/>
<area shape="rect" id="node3" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="363,352,504,379"/>
<area shape="rect" id="node4" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="552,352,731,379"/>
<area shape="rect" id="node5" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1406,286,1555,327"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1197,411,1355,437"/>
<area shape="rect" id="node34" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="779,345,963,386"/>
<area shape="rect" id="node6" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="1627,200,1733,227"/>
<area shape="rect" id="node15" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="1622,301,1738,328"/>
<area shape="rect" id="node7" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1831,149,1951,176"/>
<area shape="rect" id="node8" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2047,107,2161,133"/>
<area shape="rect" id="node13" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2039,208,2169,235"/>
<area shape="rect" id="node9" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="2271,157,2360,184"/>
<area shape="rect" id="node10" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="2269,5,2361,32"/>
<area shape="rect" id="node11" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="2266,56,2365,83"/>
<area shape="rect" id="node12" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="2273,107,2358,133"/>
<area shape="rect" id="node14" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="2277,232,2354,259"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1407,352,1555,379"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1411,403,1550,445"/>
<area shape="rect" id="node30" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1403,469,1559,496"/>
<area shape="rect" id="node18" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096" title="nilfs_ioctl_clean_segments" alt="" coords="1801,352,1980,379"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8c.html#a39d3b93661aea1ce6d75d52641a734f7" title="nilfs_segctor_thread" alt="" coords="1611,411,1749,437"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#accb2af3cf720ef8a382baa244f770a64" title="nilfs_segctor_start\l_thread" alt="" coords="1826,403,1955,445"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8h.html#accc0b22d29c5e0dc0550492c2814845f" title="nilfs_attach_log_writer" alt="" coords="2028,411,2180,437"/>
<area shape="rect" id="node23" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="2582,436,2687,463"/>
<area shape="rect" id="node25" href="nilfs2_2super_8c.html#abaf12a9facc571b7e4e46389a440b694" title="nilfs_remount" alt="" coords="2265,512,2365,539"/>
<area shape="rect" id="node26" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="2228,461,2403,488"/>
<area shape="rect" id="node24" href="nilfs2_2super_8c.html#a6f69bb47bb8193c95863dfa7858e0556" title="nilfs_mount" alt="" coords="2746,499,2835,525"/>
<area shape="rect" id="node27" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="2451,461,2528,488"/>
<area shape="rect" id="node28" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="2576,575,2693,601"/>
<area shape="rect" id="node29" href="nilfs2_2super_8c.html#aa52d92dd32f84052f43449918f769c15" title="nilfs_sync_fs" alt="" coords="2741,575,2840,601"/>
<area shape="rect" id="node31" href="nilfs2_2segment_8c.html#a53eace4b3351e7a47d95a83e02257fda" title="nilfs_segctor_destroy" alt="" coords="1607,469,1753,496"/>
<area shape="rect" id="node32" href="nilfs2_2segment_8h.html#a86ad97768e43fb1c81c962ab7f895fb0" title="nilfs_detach_log_writer" alt="" coords="1813,469,1968,496"/>
<area shape="rect" id="node33" href="nilfs2_2super_8c.html#aa48b8ba2014d88aac606b97a2b09d0ef" title="nilfs_put_super" alt="" coords="2049,563,2159,589"/>
<area shape="rect" id="node35" href="nilfs2_2segment_8h.html#a1907ac7b54882bbf06019eaf6d03c21c" title="nilfs_relax_pressure\l_in_lock" alt="" coords="1011,185,1149,226"/>
<area shape="rect" id="node44" href="nilfs2_2segment_8c.html#a8b69f4181745f44662620421e0f88ab0" title="nilfs_transaction_lock" alt="" coords="1202,352,1350,379"/>
<area shape="rect" id="node36" href="nilfs2_2inode_8c.html#a8a5d71f4673d9c2189dbab1207a8ed89" title="nilfs_truncate_bmap" alt="" coords="1207,149,1345,176"/>
<area shape="rect" id="node37" href="nilfs_8h.html#a09611eebbba5a083ef8bc7e99be0f4a1" title="nilfs_truncate" alt="" coords="1431,99,1531,125"/>
<area shape="rect" id="node43" href="nilfs_8h.html#a83b6688ab0aed44d51559794d660c5ca" title="nilfs_evict_inode" alt="" coords="1421,149,1540,176"/>
<area shape="rect" id="node38" href="nilfs_8h.html#a5c3f5e67f9f8c1d512363b1b93f23d3a" title="nilfs_write_failed" alt="" coords="1621,251,1739,277"/>
<area shape="rect" id="node42" href="nilfs_8h.html#a6397167aefce0988e92601bcc79770d6" title="nilfs_setattr" alt="" coords="1635,99,1725,125"/>
<area shape="rect" id="node39" href="nilfs2_2inode_8c.html#a312da46a81f7b2935058b894b07c327a" title="nilfs_write_begin" alt="" coords="1831,235,1950,261"/>
<area shape="rect" id="node40" href="nilfs2_2recovery_8c.html#a2ee5a3a12c87c9cd4363d28a2c6edb73" title="nilfs_recover_dsync\l_blocks" alt="" coords="1821,286,1960,327"/>
<area shape="rect" id="node41" href="nilfs2_2recovery_8c.html#a2a17f874531cf68d55aecb35d5e54fff" title="nilfs_do_roll_forward" alt="" coords="2033,309,2175,336"/>
</map>
</div>

</div>
</div>
<a id="a50c0d7ff8c8bf821d281286007c39cd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50c0d7ff8c8bf821d281286007c39cd5">&#9670;&nbsp;</a></span>nilfs_sufile_get_ncleansegs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long nilfs_sufile_get_ncleansegs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>nilfs_sufile_get_ncleansegs - return the number of clean segments : inode of segment usage file </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_a50c0d7ff8c8bf821d281286007c39cd5_cgraph.png" border="0" usemap="#sufile_8h_a50c0d7ff8c8bf821d281286007c39cd5_cgraph" alt=""/></div>
<map name="sufile_8h_a50c0d7ff8c8bf821d281286007c39cd5_cgraph" id="sufile_8h_a50c0d7ff8c8bf821d281286007c39cd5_cgraph">
<area shape="rect" id="node2" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="236,5,327,32"/>
<area shape="rect" id="node3" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="375,5,471,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_a50c0d7ff8c8bf821d281286007c39cd5_icgraph.png" border="0" usemap="#sufile_8h_a50c0d7ff8c8bf821d281286007c39cd5_icgraph" alt=""/></div>
<map name="sufile_8h_a50c0d7ff8c8bf821d281286007c39cd5_icgraph" id="sufile_8h_a50c0d7ff8c8bf821d281286007c39cd5_icgraph">
<area shape="rect" id="node2" href="nilfs2_2sysfs_8c.html#ad6b551fbfd9a694cf672480de0c6df9d" title="nilfs_segments_clean\l_segments_show" alt="" coords="252,443,400,484"/>
<area shape="rect" id="node3" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="236,509,416,535"/>
<area shape="rect" id="node27" href="the__nilfs_8h.html#a6d64c6b82e4107f17097d08e4f2b933b" title="nilfs_count_free_blocks" alt="" coords="247,895,405,922"/>
<area shape="rect" id="node35" href="the__nilfs_8h.html#a90dd6a38fbbe4af1b07031036a6ee500" title="nilfs_near_disk_full" alt="" coords="259,1022,393,1049"/>
<area shape="rect" id="node4" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="489,559,626,586"/>
<area shape="rect" id="node7" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="492,391,623,418"/>
<area shape="rect" id="node13" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="486,615,629,656"/>
<area shape="rect" id="node16" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="498,122,617,149"/>
<area shape="rect" id="node18" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="488,286,627,313"/>
<area shape="rect" id="node21" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="488,687,627,728"/>
<area shape="rect" id="node22" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="714,794,841,821"/>
<area shape="rect" id="node23" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="482,458,633,485"/>
<area shape="rect" id="node25" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="499,509,615,535"/>
<area shape="rect" id="node5" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="717,559,837,586"/>
<area shape="rect" id="node6" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="713,611,842,652"/>
<area shape="rect" id="node8" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="716,341,839,367"/>
<area shape="rect" id="node10" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="721,290,834,317"/>
<area shape="rect" id="node12" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="706,391,849,418"/>
<area shape="rect" id="node9" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="904,283,1057,324"/>
<area shape="rect" id="node11" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="909,141,1052,183"/>
<area shape="rect" id="node14" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="927,794,1034,821"/>
<area shape="rect" id="node15" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="709,728,845,769"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="710,5,845,47"/>
<area shape="rect" id="node19" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="705,173,850,199"/>
<area shape="rect" id="node20" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="706,224,849,265"/>
<area shape="rect" id="node24" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="716,443,839,484"/>
<area shape="rect" id="node26" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="705,509,850,535"/>
<area shape="rect" id="node28" href="nilfs2_2super_8c.html#a6cb8ff08bb40fc6f664e18570efacb50" title="nilfs_set_log_cursor" alt="" coords="488,845,627,871"/>
<area shape="rect" id="node32" href="nilfs2_2super_8c.html#a11ed86135bdf32d65de6a5ec47e23783" title="nilfs_statfs" alt="" coords="514,895,601,922"/>
<area shape="rect" id="node33" href="nilfs2_2sysfs_8c.html#af7c911663115a102ca0afffeb63820ec" title="nilfs_dev_free_blocks_show" alt="" coords="464,946,651,973"/>
<area shape="rect" id="node34" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="499,997,616,1023"/>
<area shape="rect" id="node29" href="nilfs2_2super_8c.html#a8fc44d93b832ec3180c5936e4b2b623d" title="nilfs_cleanup_super" alt="" coords="709,895,846,922"/>
<area shape="rect" id="node30" href="nilfs2_2super_8c.html#aa52d92dd32f84052f43449918f769c15" title="nilfs_sync_fs" alt="" coords="728,997,827,1023"/>
<area shape="rect" id="node31" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="699,946,856,973"/>
<area shape="rect" id="node36" href="nilfs2_2file_8c.html#afcd58fb7c6b35bfcc8fbc7bb056ada6a" title="nilfs_page_mkwrite" alt="" coords="913,1402,1048,1429"/>
<area shape="rect" id="node37" href="nilfs2_2segment_8c.html#ae4a012a0fc0026d060aa426f15cfb8a7" title="nilfs_transaction_begin" alt="" coords="480,1402,635,1429"/>
<area shape="rect" id="node38" href="nilfs_8h.html#ac6f027abd7712740e465f16c41e7d69e" title="nilfs_get_block" alt="" coords="723,1453,832,1479"/>
<area shape="rect" id="node39" href="nilfs2_2inode_8c.html#a312da46a81f7b2935058b894b07c327a" title="nilfs_write_begin" alt="" coords="921,1478,1040,1505"/>
<area shape="rect" id="node40" href="nilfs_8h.html#a09611eebbba5a083ef8bc7e99be0f4a1" title="nilfs_truncate" alt="" coords="931,1554,1031,1581"/>
<area shape="rect" id="node41" href="nilfs_8h.html#a6397167aefce0988e92601bcc79770d6" title="nilfs_setattr" alt="" coords="1105,1655,1196,1682"/>
<area shape="rect" id="node42" href="nilfs_8h.html#a83b6688ab0aed44d51559794d660c5ca" title="nilfs_evict_inode" alt="" coords="718,1605,837,1631"/>
<area shape="rect" id="node43" href="nilfs_8h.html#a427f81f381729712183a50be32eec24c" title="nilfs_dirty_inode" alt="" coords="719,1655,835,1682"/>
<area shape="rect" id="node44" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="733,1706,822,1733"/>
<area shape="rect" id="node45" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="731,1098,823,1125"/>
<area shape="rect" id="node46" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="728,1149,827,1175"/>
<area shape="rect" id="node47" href="nilfs2_2namei_8c.html#a58c2145f412579c3d56691a02664b765" title="nilfs_link" alt="" coords="741,1199,814,1226"/>
<area shape="rect" id="node48" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="735,1250,820,1277"/>
<area shape="rect" id="node49" href="nilfs2_2namei_8c.html#a2d87a38f1671f1e8162939d34f52abd9" title="nilfs_unlink" alt="" coords="734,1301,821,1327"/>
<area shape="rect" id="node50" href="nilfs2_2namei_8c.html#aa26376eec3ac46f8addd4a5f6f7ca1e2" title="nilfs_rmdir" alt="" coords="736,1351,819,1378"/>
</map>
</div>

</div>
</div>
<a id="a9c732ab29452414325bd9a1e70fe3978"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c732ab29452414325bd9a1e70fe3978">&#9670;&nbsp;</a></span>nilfs_sufile_get_nsegments()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned long nilfs_sufile_get_nsegments </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_a9c732ab29452414325bd9a1e70fe3978_cgraph.png" border="0" usemap="#sufile_8h_a9c732ab29452414325bd9a1e70fe3978_cgraph" alt=""/></div>
<map name="sufile_8h_a9c732ab29452414325bd9a1e70fe3978_cgraph" id="sufile_8h_a9c732ab29452414325bd9a1e70fe3978_cgraph">
<area shape="rect" id="node2" href="sufile_8h.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="233,232,416,259"/>
<area shape="rect" id="node5" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="253,150,396,191"/>
<area shape="rect" id="node6" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="494,1037,613,1064"/>
<area shape="rect" id="node23" href="sufile_8h.html#ae5c9db186be6baf07d66e049a0fd9b9b" title="nilfs_sufile_mark_dirty" alt="" coords="477,975,629,1001"/>
<area shape="rect" id="node24" href="sufile_8h.html#ac6379742426c30d02072b1a5b0f527f8" title="nilfs_sufile_set_segment\l_usage" alt="" coords="470,749,637,790"/>
<area shape="rect" id="node25" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033" title="nblocks" alt="" coords="744,2401,811,2428"/>
<area shape="rect" id="node26" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="255,772,394,799"/>
<area shape="rect" id="node27" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="478,1247,629,1273"/>
<area shape="rect" id="node29" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687" title="nilfs_sufile_set_suinfo" alt="" coords="478,588,629,615"/>
<area shape="rect" id="node31" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="485,1449,622,1476"/>
<area shape="rect" id="node32" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="488,1500,619,1527"/>
<area shape="rect" id="node33" href="sufile_8h.html#acad60c93c0f7f6c3a8a9dc843107f1ed" title="nilfs_sufile_do_scrap" alt="" coords="481,413,625,440"/>
<area shape="rect" id="node34" href="sufile_8h.html#a577d0d35a7907909b6c0a139d8cc1704" title="nilfs_sufile_do_free" alt="" coords="486,464,621,491"/>
<area shape="rect" id="node35" href="sufile_8h.html#aff87ff4257115842ff3c7940e5f8e769" title="nilfs_sufile_do_cancel_free" alt="" coords="464,296,643,323"/>
<area shape="rect" id="node36" href="sufile_8h.html#a7e943e59486cd6176a3317bed589b7c9" title="nilfs_sufile_do_set\l_error" alt="" coords="488,347,619,389"/>
<area shape="rect" id="node37" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="261,1100,388,1127"/>
<area shape="rect" id="node41" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="495,1563,611,1589"/>
<area shape="rect" id="node48" href="sufile_8h.html#a202058a1d5a7ee3658e8e7cda1ffee37" title="nilfs_sufile_trim_fs" alt="" coords="488,1627,619,1653"/>
<area shape="rect" id="node3" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="732,195,823,221"/>
<area shape="rect" id="node4" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1331,1123,1427,1149"/>
<area shape="rect" id="node7" href="sufile_8c.html#a7df3cdff37c5aa00cca3458f1d7d400e" title="nilfs_sufile_get_header\l_block" alt="" coords="700,1442,855,1483"/>
<area shape="rect" id="node11" href="sufile_8c.html#a38f2abf7ef7577b1af4b9e8fc9316727" title="nilfs_sufile_get_segment\l_usage_block" alt="" coords="694,1377,861,1418"/>
<area shape="rect" id="node14" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="704,651,851,693"/>
<area shape="rect" id="node16" href="sufile_8c.html#a34ecb984fd0f57101d2ee0b4bde4bf95" title="nilfs_sufile_segment\l_usages_in_block" alt="" coords="707,1610,848,1651"/>
<area shape="rect" id="node17" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="934,397,1057,424"/>
<area shape="rect" id="node21" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="706,549,849,576"/>
<area shape="rect" id="node8" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="926,1279,1065,1305"/>
<area shape="rect" id="node9" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="1132,1275,1277,1301"/>
<area shape="rect" id="node10" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="1127,1224,1283,1251"/>
<area shape="rect" id="node12" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="921,1384,1069,1411"/>
<area shape="rect" id="node13" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="1134,1326,1275,1367"/>
<area shape="rect" id="node15" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="921,1173,1070,1200"/>
<area shape="rect" id="node18" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1144,397,1265,424"/>
<area shape="rect" id="node19" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1137,448,1272,475"/>
<area shape="rect" id="node20" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1135,347,1274,373"/>
<area shape="rect" id="node22" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="960,608,1031,635"/>
<area shape="rect" id="node28" href="the__nilfs_8h.html#a51bb53199a62a87f269e03404136d00f" title="nilfs_segment_is_active" alt="" coords="696,1275,859,1301"/>
<area shape="rect" id="node30" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="694,296,861,323"/>
<area shape="rect" id="node38" href="the__nilfs_8c.html#aa7bf85e7bb9022b3680b22d945d17f91" title="nilfs_nrsvsegs" alt="" coords="724,1508,831,1535"/>
<area shape="rect" id="node39" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="484,909,623,950"/>
<area shape="rect" id="node40" href="the__nilfs_8c.html#a38632ac69509070865038bf0120a1509" title="nilfs_set_nsegments" alt="" coords="482,1399,625,1425"/>
<area shape="rect" id="node42" href="nilfs2_2inode_8c.html#ae758d8edf633a8af3535ac0af248f1d1" title="nilfs_iget_locked" alt="" coords="718,2031,837,2057"/>
<area shape="rect" id="node43" href="mdt_8c.html#a9d24c6e56a98e581fc30fd8a65841e2a" title="nilfs_mdt_init" alt="" coords="728,2081,827,2108"/>
<area shape="rect" id="node44" href="mdt_8c.html#ae0d853ce1775f22eb93823f6423e6fac" title="nilfs_mdt_set_entry_size" alt="" coords="912,1980,1079,2007"/>
<area shape="rect" id="node45" href="nilfs2_2inode_8c.html#affec0e84c605c1d9028332974ba58cd3" title="nilfs_read_inode_common" alt="" coords="691,1559,864,1585"/>
<area shape="rect" id="node46" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="931,2157,1060,2184"/>
<area shape="rect" id="node47" href="bad__inode_8c.html#a8c027cf52e2b7669b11b0bfa09bbcd45" title="iget_failed" alt="" coords="737,2132,818,2159"/>
<area shape="rect" id="node49" href="the__nilfs_8h.html#acbe15a8b57f8ecf5e4777294c2f7303d" title="nilfs_get_segnum_of\l_block" alt="" coords="706,2285,849,2326"/>
<area shape="rect" id="node50" href="the__nilfs_8h.html#a0dc161eb6c4f6bad9212b67517b46a37" title="nilfs_get_segment_range" alt="" coords="694,2351,861,2377"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_a9c732ab29452414325bd9a1e70fe3978_icgraph.png" border="0" usemap="#sufile_8h_a9c732ab29452414325bd9a1e70fe3978_icgraph" alt=""/></div>
<map name="sufile_8h_a9c732ab29452414325bd9a1e70fe3978_icgraph" id="sufile_8h_a9c732ab29452414325bd9a1e70fe3978_icgraph">
<area shape="rect" id="node2" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="240,177,377,204"/>
<area shape="rect" id="node23" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="243,297,374,324"/>
<area shape="rect" id="node36" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="237,575,380,617"/>
<area shape="rect" id="node40" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="444,353,563,380"/>
<area shape="rect" id="node42" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="239,473,378,500"/>
<area shape="rect" id="node45" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="239,641,378,682"/>
<area shape="rect" id="node46" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="440,724,567,751"/>
<area shape="rect" id="node47" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="233,524,384,551"/>
<area shape="rect" id="node49" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="251,423,367,449"/>
<area shape="rect" id="node3" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="443,119,563,145"/>
<area shape="rect" id="node21" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="439,23,568,65"/>
<area shape="rect" id="node4" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="640,81,781,122"/>
<area shape="rect" id="node5" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="863,205,1005,232"/>
<area shape="rect" id="node6" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1069,247,1248,273"/>
<area shape="rect" id="node7" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1737,254,1886,295"/>
<area shape="rect" id="node14" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1528,379,1685,405"/>
<area shape="rect" id="node18" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1296,262,1480,303"/>
<area shape="rect" id="node8" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="1957,337,2063,364"/>
<area shape="rect" id="node13" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="1952,261,2068,288"/>
<area shape="rect" id="node9" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="2132,361,2252,388"/>
<area shape="rect" id="node10" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2309,361,2424,388"/>
<area shape="rect" id="node11" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2301,463,2432,489"/>
<area shape="rect" id="node12" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="2480,539,2557,565"/>
<area shape="rect" id="node15" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1737,320,1885,347"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1742,371,1881,413"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1733,437,1889,464"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8h.html#a1907ac7b54882bbf06019eaf6d03c21c" title="nilfs_relax_pressure\l_in_lock" alt="" coords="1537,262,1676,303"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8c.html#a8b69f4181745f44662620421e0f88ab0" title="nilfs_transaction_lock" alt="" coords="1533,328,1681,355"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="868,139,1000,181"/>
<area shape="rect" id="node24" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="442,303,565,329"/>
<area shape="rect" id="node31" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="447,252,560,279"/>
<area shape="rect" id="node35" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="432,173,575,200"/>
<area shape="rect" id="node25" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="634,329,787,370"/>
<area shape="rect" id="node26" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="847,332,1021,359"/>
<area shape="rect" id="node27" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1120,404,1197,431"/>
<area shape="rect" id="node28" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1335,429,1441,456"/>
<area shape="rect" id="node30" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1329,379,1447,405"/>
<area shape="rect" id="node29" href="nilfs2_2super_8c.html#a6f69bb47bb8193c95863dfa7858e0556" title="nilfs_mount" alt="" coords="1562,429,1651,456"/>
<area shape="rect" id="node32" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="639,263,782,305"/>
<area shape="rect" id="node33" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="623,147,799,173"/>
<area shape="rect" id="node34" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="635,198,786,239"/>
<area shape="rect" id="node37" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="657,689,764,716"/>
<area shape="rect" id="node39" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1091,623,1227,665"/>
<area shape="rect" id="node38" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="2133,685,2251,712"/>
<area shape="rect" id="node41" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="867,383,1001,425"/>
<area shape="rect" id="node43" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="1937,517,2083,544"/>
<area shape="rect" id="node44" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="432,455,575,497"/>
<area shape="rect" id="node48" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="2131,565,2253,606"/>
<area shape="rect" id="node50" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="861,449,1007,476"/>
</map>
</div>

</div>
</div>
<a id="a3fef1b4dbdae6f60e2dc3b703969a3dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fef1b4dbdae6f60e2dc3b703969a3dd">&#9670;&nbsp;</a></span>nilfs_sufile_get_stat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nilfs_sufile_get_stat </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct nilfs_sustat *&#160;</td>
          <td class="paramname"><em>sustat</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>nilfs_sufile_get_stat - get segment usage statistics : inode of segment usage file : pointer to a structure of segment usage statistics</p>
<p>Description: <a class="el" href="sufile_8c.html#a9e2abc1d2040e49935a1448ce3c3c43e">nilfs_sufile_get_stat()</a> returns information about segment usage.</p>
<p>Return Value: On success, 0 is returned, and segment usage information is stored in the place pointed by . On error, one of the following negative error codes is returned.</p>
<p>%-EIO - I/O error.</p>
<p>%-ENOMEM - Insufficient amount of memory available. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_a3fef1b4dbdae6f60e2dc3b703969a3dd_cgraph.png" border="0" usemap="#sufile_8h_a3fef1b4dbdae6f60e2dc3b703969a3dd_cgraph" alt=""/></div>
<map name="sufile_8h_a3fef1b4dbdae6f60e2dc3b703969a3dd_cgraph" id="sufile_8h_a3fef1b4dbdae6f60e2dc3b703969a3dd_cgraph">
<area shape="rect" id="node2" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1542,1201,1638,1228"/>
<area shape="rect" id="node3" href="sufile_8c.html#a7df3cdff37c5aa00cca3458f1d7d400e" title="nilfs_sufile_get_header\l_block" alt="" coords="887,765,1041,806"/>
<area shape="rect" id="node13" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="192,1404,372,1431"/>
<area shape="rect" id="node4" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="1104,393,1243,420"/>
<area shape="rect" id="node5" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="1307,5,1452,32"/>
<area shape="rect" id="node8" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="1301,191,1457,217"/>
<area shape="rect" id="node6" href="mdt_8c.html#a43ded315f7122596d14b88c43fe9c98d" title="nilfs_mdt_submit_block" alt="" coords="1511,5,1669,32"/>
<area shape="rect" id="node7" href="nilfs2_2page_8c.html#aa4a24cc5a684ba71b9e4423f2ea38970" title="nilfs_grab_buffer" alt="" coords="1729,56,1848,83"/>
<area shape="rect" id="node9" href="nilfs_8h.html#aacff7fe9750a849356475b2063b69e3b" title="nilfs_transaction_begin" alt="" coords="1513,275,1667,301"/>
<area shape="rect" id="node10" href="mdt_8c.html#a759ca943427ead8bb22ecdc82a9338ee" title="nilfs_mdt_insert_new\l_block" alt="" coords="1517,209,1663,250"/>
<area shape="rect" id="node11" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1727,2056,1850,2083"/>
<area shape="rect" id="node12" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="1717,1740,1860,1767"/>
<area shape="rect" id="node14" href="sufile_8h.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="420,1685,603,1712"/>
<area shape="rect" id="node16" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="440,2126,583,2167"/>
<area shape="rect" id="node17" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="681,1121,799,1148"/>
<area shape="rect" id="node24" href="sufile_8h.html#ae5c9db186be6baf07d66e049a0fd9b9b" title="nilfs_sufile_mark_dirty" alt="" coords="664,267,816,293"/>
<area shape="rect" id="node25" href="sufile_8h.html#ac6379742426c30d02072b1a5b0f527f8" title="nilfs_sufile_set_segment\l_usage" alt="" coords="657,470,823,511"/>
<area shape="rect" id="node26" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033" title="nblocks" alt="" coords="931,1353,997,1380"/>
<area shape="rect" id="node27" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="665,895,815,921"/>
<area shape="rect" id="node29" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687" title="nilfs_sufile_set_suinfo" alt="" coords="665,1237,815,1264"/>
<area shape="rect" id="node31" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="671,591,809,617"/>
<area shape="rect" id="node32" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="675,772,805,799"/>
<area shape="rect" id="node33" href="sufile_8h.html#acad60c93c0f7f6c3a8a9dc843107f1ed" title="nilfs_sufile_do_scrap" alt="" coords="668,1876,812,1903"/>
<area shape="rect" id="node34" href="sufile_8h.html#a577d0d35a7907909b6c0a139d8cc1704" title="nilfs_sufile_do_free" alt="" coords="673,1927,807,1953"/>
<area shape="rect" id="node35" href="sufile_8h.html#aff87ff4257115842ff3c7940e5f8e769" title="nilfs_sufile_do_cancel_free" alt="" coords="651,2028,829,2055"/>
<area shape="rect" id="node36" href="sufile_8h.html#a7e943e59486cd6176a3317bed589b7c9" title="nilfs_sufile_do_set\l_error" alt="" coords="675,2079,805,2121"/>
<area shape="rect" id="node37" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="448,2239,575,2265"/>
<area shape="rect" id="node41" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="682,2703,798,2729"/>
<area shape="rect" id="node48" href="sufile_8h.html#a202058a1d5a7ee3658e8e7cda1ffee37" title="nilfs_sufile_trim_fs" alt="" coords="675,1404,805,1431"/>
<area shape="rect" id="node15" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="919,2145,1009,2172"/>
<area shape="rect" id="node18" href="sufile_8c.html#a38f2abf7ef7577b1af4b9e8fc9316727" title="nilfs_sufile_get_segment\l_usage_block" alt="" coords="881,546,1047,587"/>
<area shape="rect" id="node21" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="891,1573,1037,1614"/>
<area shape="rect" id="node23" href="sufile_8c.html#a34ecb984fd0f57101d2ee0b4bde4bf95" title="nilfs_sufile_segment\l_usages_in_block" alt="" coords="893,1135,1035,1177"/>
<area shape="rect" id="node19" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="1099,596,1247,623"/>
<area shape="rect" id="node20" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="1309,1085,1450,1126"/>
<area shape="rect" id="node22" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="1099,1147,1248,1173"/>
<area shape="rect" id="node28" href="the__nilfs_8h.html#a51bb53199a62a87f269e03404136d00f" title="nilfs_segment_is_active" alt="" coords="883,1252,1045,1279"/>
<area shape="rect" id="node30" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="881,2044,1047,2071"/>
<area shape="rect" id="node38" href="the__nilfs_8c.html#aa7bf85e7bb9022b3680b22d945d17f91" title="nilfs_nrsvsegs" alt="" coords="911,2601,1017,2628"/>
<area shape="rect" id="node39" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="671,1682,809,1723"/>
<area shape="rect" id="node40" href="the__nilfs_8c.html#a38632ac69509070865038bf0120a1509" title="nilfs_set_nsegments" alt="" coords="669,2601,811,2628"/>
<area shape="rect" id="node42" href="nilfs2_2inode_8c.html#ae758d8edf633a8af3535ac0af248f1d1" title="nilfs_iget_locked" alt="" coords="905,2703,1023,2729"/>
<area shape="rect" id="node43" href="mdt_8c.html#a9d24c6e56a98e581fc30fd8a65841e2a" title="nilfs_mdt_init" alt="" coords="915,2753,1013,2780"/>
<area shape="rect" id="node44" href="mdt_8c.html#ae0d853ce1775f22eb93823f6423e6fac" title="nilfs_mdt_set_entry_size" alt="" coords="1296,1841,1463,1868"/>
<area shape="rect" id="node45" href="nilfs2_2inode_8c.html#affec0e84c605c1d9028332974ba58cd3" title="nilfs_read_inode_common" alt="" coords="877,2804,1051,2831"/>
<area shape="rect" id="node46" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="1109,2867,1238,2893"/>
<area shape="rect" id="node47" href="bad__inode_8c.html#a8c027cf52e2b7669b11b0bfa09bbcd45" title="iget_failed" alt="" coords="923,2905,1005,2932"/>
<area shape="rect" id="node49" href="the__nilfs_8h.html#acbe15a8b57f8ecf5e4777294c2f7303d" title="nilfs_get_segnum_of\l_block" alt="" coords="893,1455,1035,1497"/>
<area shape="rect" id="node50" href="the__nilfs_8h.html#a0dc161eb6c4f6bad9212b67517b46a37" title="nilfs_get_segment_range" alt="" coords="881,1521,1047,1548"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_a3fef1b4dbdae6f60e2dc3b703969a3dd_icgraph.png" border="0" usemap="#sufile_8h_a3fef1b4dbdae6f60e2dc3b703969a3dd_icgraph" alt=""/></div>
<map name="sufile_8h_a3fef1b4dbdae6f60e2dc3b703969a3dd_icgraph" id="sufile_8h_a3fef1b4dbdae6f60e2dc3b703969a3dd_icgraph">
<area shape="rect" id="node2" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="209,572,355,599"/>
<area shape="rect" id="node11" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="211,437,353,478"/>
<area shape="rect" id="node12" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="192,385,372,412"/>
<area shape="rect" id="node3" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1307,559,1384,585"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1934,508,2054,535"/>
<area shape="rect" id="node5" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2124,508,2239,535"/>
<area shape="rect" id="node10" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2116,559,2247,585"/>
<area shape="rect" id="node6" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="2299,432,2389,459"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="2298,483,2390,509"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="2295,533,2393,560"/>
<area shape="rect" id="node9" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="2301,584,2387,611"/>
<area shape="rect" id="node13" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="427,360,564,387"/>
<area shape="rect" id="node27" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="430,296,561,323"/>
<area shape="rect" id="node39" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="424,462,567,503"/>
<area shape="rect" id="node43" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="631,121,749,148"/>
<area shape="rect" id="node45" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="426,527,565,569"/>
<area shape="rect" id="node46" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="627,616,753,643"/>
<area shape="rect" id="node47" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="420,411,571,437"/>
<area shape="rect" id="node49" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="437,171,553,197"/>
<area shape="rect" id="node14" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="630,335,750,361"/>
<area shape="rect" id="node25" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="625,386,755,427"/>
<area shape="rect" id="node15" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="827,327,968,369"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1050,232,1191,259"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1256,233,1435,260"/>
<area shape="rect" id="node18" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1500,321,1649,362"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1715,156,1872,183"/>
<area shape="rect" id="node24" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1483,233,1667,274"/>
<area shape="rect" id="node19" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="1741,425,1846,452"/>
<area shape="rect" id="node20" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="1735,328,1851,355"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1920,127,2068,153"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1925,178,2063,219"/>
<area shape="rect" id="node26" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1055,283,1187,325"/>
<area shape="rect" id="node28" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="629,172,751,199"/>
<area shape="rect" id="node34" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="633,223,747,249"/>
<area shape="rect" id="node38" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="619,280,761,307"/>
<area shape="rect" id="node29" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="821,79,974,121"/>
<area shape="rect" id="node30" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1033,85,1208,112"/>
<area shape="rect" id="node31" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1307,84,1384,111"/>
<area shape="rect" id="node32" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1522,80,1627,107"/>
<area shape="rect" id="node33" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1516,131,1633,157"/>
<area shape="rect" id="node35" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="826,145,969,186"/>
<area shape="rect" id="node36" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="809,276,985,303"/>
<area shape="rect" id="node37" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="822,210,973,251"/>
<area shape="rect" id="node40" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="844,616,951,643"/>
<area shape="rect" id="node42" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1053,551,1189,593"/>
<area shape="rect" id="node41" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="1061,617,1180,644"/>
<area shape="rect" id="node44" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1053,143,1188,185"/>
<area shape="rect" id="node48" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="836,495,959,537"/>
<area shape="rect" id="node50" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="1048,5,1193,32"/>
</map>
</div>

</div>
</div>
<a id="a479c51cdecafad05d22942c107b00c4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a479c51cdecafad05d22942c107b00c4f">&#9670;&nbsp;</a></span>nilfs_sufile_get_suinfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t nilfs_sufile_get_suinfo </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64&#160;</td>
          <td class="paramname"><em>segnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>sisz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nsi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>nilfs_sufile_get_suinfo - : inode of segment usage file : segment number to start looking : array of suinfo : byte size of suinfo : size of suinfo array</p>
<p>Description:</p>
<p>Return Value: On success, 0 is returned and .... On error, one of the following negative error codes is returned.</p>
<p>%-EIO - I/O error.</p>
<p>%-ENOMEM - Insufficient amount of memory available. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_a479c51cdecafad05d22942c107b00c4f_cgraph.png" border="0" usemap="#sufile_8h_a479c51cdecafad05d22942c107b00c4f_cgraph" alt=""/></div>
<map name="sufile_8h_a479c51cdecafad05d22942c107b00c4f_cgraph" id="sufile_8h_a479c51cdecafad05d22942c107b00c4f_cgraph">
<area shape="rect" id="node2" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1529,1613,1625,1640"/>
<area shape="rect" id="node3" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="1333,1766,1474,1807"/>
<area shape="rect" id="node4" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="204,1229,384,1256"/>
<area shape="rect" id="node13" href="sufile_8c.html#a38f2abf7ef7577b1af4b9e8fc9316727" title="nilfs_sufile_get_segment\l_usage_block" alt="" coords="893,1646,1059,1687"/>
<area shape="rect" id="node15" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="903,1209,1049,1250"/>
<area shape="rect" id="node16" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="1119,1715,1269,1741"/>
<area shape="rect" id="node39" href="the__nilfs_8h.html#a51bb53199a62a87f269e03404136d00f" title="nilfs_segment_is_active" alt="" coords="895,1763,1057,1789"/>
<area shape="rect" id="node5" href="sufile_8h.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="432,988,615,1015"/>
<area shape="rect" id="node7" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="452,1222,595,1263"/>
<area shape="rect" id="node8" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="693,1552,811,1579"/>
<area shape="rect" id="node24" href="sufile_8h.html#ae5c9db186be6baf07d66e049a0fd9b9b" title="nilfs_sufile_mark_dirty" alt="" coords="676,643,828,669"/>
<area shape="rect" id="node25" href="sufile_8h.html#ac6379742426c30d02072b1a5b0f527f8" title="nilfs_sufile_set_segment\l_usage" alt="" coords="669,1334,835,1375"/>
<area shape="rect" id="node26" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033" title="nblocks" alt="" coords="943,2251,1009,2277"/>
<area shape="rect" id="node27" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="454,1288,593,1315"/>
<area shape="rect" id="node28" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687" title="nilfs_sufile_set_suinfo" alt="" coords="677,1064,827,1091"/>
<area shape="rect" id="node30" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="683,1603,821,1629"/>
<area shape="rect" id="node31" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="687,1653,817,1680"/>
<area shape="rect" id="node32" href="sufile_8h.html#acad60c93c0f7f6c3a8a9dc843107f1ed" title="nilfs_sufile_do_scrap" alt="" coords="680,811,824,837"/>
<area shape="rect" id="node33" href="sufile_8h.html#a577d0d35a7907909b6c0a139d8cc1704" title="nilfs_sufile_do_free" alt="" coords="685,861,819,888"/>
<area shape="rect" id="node34" href="sufile_8h.html#aff87ff4257115842ff3c7940e5f8e769" title="nilfs_sufile_do_cancel_free" alt="" coords="663,760,841,787"/>
<area shape="rect" id="node35" href="sufile_8h.html#a7e943e59486cd6176a3317bed589b7c9" title="nilfs_sufile_do_set\l_error" alt="" coords="687,694,817,735"/>
<area shape="rect" id="node36" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="460,607,587,633"/>
<area shape="rect" id="node41" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="694,372,810,399"/>
<area shape="rect" id="node48" href="sufile_8h.html#a202058a1d5a7ee3658e8e7cda1ffee37" title="nilfs_sufile_trim_fs" alt="" coords="687,1860,817,1887"/>
<area shape="rect" id="node6" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="931,853,1021,880"/>
<area shape="rect" id="node9" href="sufile_8c.html#a7df3cdff37c5aa00cca3458f1d7d400e" title="nilfs_sufile_get_header\l_block" alt="" coords="899,1529,1053,1570"/>
<area shape="rect" id="node17" href="sufile_8c.html#a34ecb984fd0f57101d2ee0b4bde4bf95" title="nilfs_sufile_segment\l_usages_in_block" alt="" coords="905,1915,1047,1957"/>
<area shape="rect" id="node18" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1133,752,1255,779"/>
<area shape="rect" id="node22" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="905,651,1047,677"/>
<area shape="rect" id="node10" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="1125,1557,1263,1584"/>
<area shape="rect" id="node11" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="1331,1512,1476,1539"/>
<area shape="rect" id="node12" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="1325,1563,1481,1589"/>
<area shape="rect" id="node14" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="1120,1613,1268,1640"/>
<area shape="rect" id="node19" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1343,701,1464,728"/>
<area shape="rect" id="node20" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1336,752,1471,779"/>
<area shape="rect" id="node21" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1334,803,1473,829"/>
<area shape="rect" id="node23" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1159,575,1229,601"/>
<area shape="rect" id="node29" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="893,752,1059,779"/>
<area shape="rect" id="node37" href="the__nilfs_8c.html#aa7bf85e7bb9022b3680b22d945d17f91" title="nilfs_nrsvsegs" alt="" coords="923,43,1029,69"/>
<area shape="rect" id="node38" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="683,1150,821,1191"/>
<area shape="rect" id="node40" href="the__nilfs_8c.html#a38632ac69509070865038bf0120a1509" title="nilfs_set_nsegments" alt="" coords="681,43,823,69"/>
<area shape="rect" id="node42" href="nilfs2_2inode_8c.html#ae758d8edf633a8af3535ac0af248f1d1" title="nilfs_iget_locked" alt="" coords="917,347,1035,373"/>
<area shape="rect" id="node43" href="mdt_8c.html#a9d24c6e56a98e581fc30fd8a65841e2a" title="nilfs_mdt_init" alt="" coords="927,195,1025,221"/>
<area shape="rect" id="node44" href="mdt_8c.html#ae0d853ce1775f22eb93823f6423e6fac" title="nilfs_mdt_set_entry_size" alt="" coords="1111,397,1277,424"/>
<area shape="rect" id="node45" href="nilfs2_2inode_8c.html#affec0e84c605c1d9028332974ba58cd3" title="nilfs_read_inode_common" alt="" coords="889,397,1063,424"/>
<area shape="rect" id="node46" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="1129,195,1259,221"/>
<area shape="rect" id="node47" href="bad__inode_8c.html#a8c027cf52e2b7669b11b0bfa09bbcd45" title="iget_failed" alt="" coords="935,144,1017,171"/>
<area shape="rect" id="node49" href="the__nilfs_8h.html#acbe15a8b57f8ecf5e4777294c2f7303d" title="nilfs_get_segnum_of\l_block" alt="" coords="905,2134,1047,2175"/>
<area shape="rect" id="node50" href="the__nilfs_8h.html#a0dc161eb6c4f6bad9212b67517b46a37" title="nilfs_get_segment_range" alt="" coords="893,2200,1059,2227"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_a479c51cdecafad05d22942c107b00c4f_icgraph.png" border="0" usemap="#sufile_8h_a479c51cdecafad05d22942c107b00c4f_icgraph" alt=""/></div>
<map name="sufile_8h_a479c51cdecafad05d22942c107b00c4f_icgraph" id="sufile_8h_a479c51cdecafad05d22942c107b00c4f_icgraph">
<area shape="rect" id="node2" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="233,555,355,597"/>
<area shape="rect" id="node11" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="204,391,384,417"/>
<area shape="rect" id="node3" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1311,583,1388,609"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1938,532,2058,559"/>
<area shape="rect" id="node5" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2128,532,2243,559"/>
<area shape="rect" id="node10" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2120,583,2251,609"/>
<area shape="rect" id="node6" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="2303,456,2393,483"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="2302,507,2394,533"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="2299,557,2397,584"/>
<area shape="rect" id="node9" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="2305,608,2391,635"/>
<area shape="rect" id="node12" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="435,365,572,392"/>
<area shape="rect" id="node26" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="438,291,569,317"/>
<area shape="rect" id="node38" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="432,607,575,649"/>
<area shape="rect" id="node42" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="635,120,753,147"/>
<area shape="rect" id="node44" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="434,416,573,443"/>
<area shape="rect" id="node47" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="434,542,573,583"/>
<area shape="rect" id="node48" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="631,556,757,583"/>
<area shape="rect" id="node49" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="445,165,561,192"/>
<area shape="rect" id="node13" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="634,323,754,349"/>
<area shape="rect" id="node24" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="629,374,759,415"/>
<area shape="rect" id="node14" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="831,361,972,402"/>
<area shape="rect" id="node15" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1054,259,1195,285"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1260,260,1439,287"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1504,354,1653,395"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1719,192,1876,219"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1487,269,1671,310"/>
<area shape="rect" id="node18" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="1745,452,1850,479"/>
<area shape="rect" id="node19" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="1739,361,1855,388"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1924,163,2072,189"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1929,214,2067,255"/>
<area shape="rect" id="node25" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1059,310,1191,351"/>
<area shape="rect" id="node27" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="633,171,755,197"/>
<area shape="rect" id="node33" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="637,221,751,248"/>
<area shape="rect" id="node37" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="623,272,765,299"/>
<area shape="rect" id="node28" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="825,113,978,154"/>
<area shape="rect" id="node29" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1037,123,1212,149"/>
<area shape="rect" id="node30" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1311,120,1388,147"/>
<area shape="rect" id="node31" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1526,116,1631,143"/>
<area shape="rect" id="node32" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1520,167,1637,193"/>
<area shape="rect" id="node34" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="830,178,973,219"/>
<area shape="rect" id="node35" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="813,309,989,336"/>
<area shape="rect" id="node36" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="826,243,977,285"/>
<area shape="rect" id="node39" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="848,583,955,609"/>
<area shape="rect" id="node41" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1057,637,1193,678"/>
<area shape="rect" id="node40" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="1065,583,1184,609"/>
<area shape="rect" id="node43" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1057,57,1192,98"/>
<area shape="rect" id="node45" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="829,529,974,556"/>
<area shape="rect" id="node46" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="623,439,765,481"/>
<area shape="rect" id="node50" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="1052,5,1197,32"/>
</map>
</div>

</div>
</div>
<a id="ae5c9db186be6baf07d66e049a0fd9b9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5c9db186be6baf07d66e049a0fd9b9b">&#9670;&nbsp;</a></span>nilfs_sufile_mark_dirty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nilfs_sufile_mark_dirty </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64&#160;</td>
          <td class="paramname"><em>segnum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>nilfs_sufile_mark_dirty - mark the buffer having a segment usage dirty : inode of segment usage file : segment number </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_ae5c9db186be6baf07d66e049a0fd9b9b_cgraph.png" border="0" usemap="#sufile_8h_ae5c9db186be6baf07d66e049a0fd9b9b_cgraph" alt=""/></div>
<map name="sufile_8h_ae5c9db186be6baf07d66e049a0fd9b9b_cgraph" id="sufile_8h_ae5c9db186be6baf07d66e049a0fd9b9b_cgraph">
<area shape="rect" id="node2" href="sufile_8c.html#a38f2abf7ef7577b1af4b9e8fc9316727" title="nilfs_sufile_get_segment\l_usage_block" alt="" coords="205,721,372,762"/>
<area shape="rect" id="node25" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1065,293,1188,320"/>
<area shape="rect" id="node42" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="1055,344,1198,371"/>
<area shape="rect" id="node3" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="425,728,563,755"/>
<area shape="rect" id="node48" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="420,833,568,860"/>
<area shape="rect" id="node4" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="621,759,767,785"/>
<area shape="rect" id="node18" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="616,697,772,724"/>
<area shape="rect" id="node5" href="mdt_8c.html#a43ded315f7122596d14b88c43fe9c98d" title="nilfs_mdt_submit_block" alt="" coords="824,841,983,868"/>
<area shape="rect" id="node6" href="nilfs2_2page_8c.html#aa4a24cc5a684ba71b9e4423f2ea38970" title="nilfs_grab_buffer" alt="" coords="1067,816,1186,843"/>
<area shape="rect" id="node8" href="buffer_8c.html#a5fc92b2c44523c64e98193eaa4f46541" title="unlock_buffer" alt="" coords="1537,1023,1637,1049"/>
<area shape="rect" id="node10" href="nilfs2_2bmap_8h.html#a282d60470960949277ac67e31c97f05b" title="nilfs_bmap_lookup" alt="" coords="1061,867,1192,893"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1323,395,1393,421"/>
<area shape="rect" id="node14" href="buffer_8c.html#ade60786fa99b4fbb4cf607434af395db" title="end_buffer_read_sync" alt="" coords="1051,1073,1202,1100"/>
<area shape="rect" id="node16" href="buffer_8c.html#ab65df498c54845f497bae7afe9222c91" title="submit_bh" alt="" coords="1085,921,1168,948"/>
<area shape="rect" id="node7" href="nilfs2_2page_8c.html#a051d0268f3af219ba3e2a9ca79a8843c" title="__nilfs_get_page_block" alt="" coords="1279,753,1437,780"/>
<area shape="rect" id="node9" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1738,997,1877,1024"/>
<area shape="rect" id="node11" href="nilfs2_2bmap_8h.html#a47e39e91829ba28e44d1b0913f5ef480" title="nilfs_bmap_lookup_at\l_level" alt="" coords="1284,855,1432,897"/>
<area shape="rect" id="node12" href="nilfs2_2bmap_8h.html#abd107e6c373b3d12d3817a32d403001b" title="nilfs_bmap_get_dat" alt="" coords="1291,804,1425,831"/>
<area shape="rect" id="node15" href="buffer_8c.html#a85e290b32d9599acd25df3b159392ab7" title="__end_buffer_read_notouch" alt="" coords="1267,1073,1449,1100"/>
<area shape="rect" id="node17" href="buffer_8c.html#a5fd6f01c5f9cff0945cb999cbefa412d" title="submit_bh_wbc" alt="" coords="1301,921,1415,948"/>
<area shape="rect" id="node19" href="nilfs_8h.html#aacff7fe9750a849356475b2063b69e3b" title="nilfs_transaction_begin" alt="" coords="826,676,981,703"/>
<area shape="rect" id="node23" href="mdt_8c.html#a759ca943427ead8bb22ecdc82a9338ee" title="nilfs_mdt_insert_new\l_block" alt="" coords="831,395,976,437"/>
<area shape="rect" id="node43" href="nilfs_8h.html#a576ee8d20fe7a5d7c5889cb118fe0533" title="nilfs_transaction_commit" alt="" coords="820,588,987,615"/>
<area shape="rect" id="node47" href="nilfs_8h.html#a155140033fba0977ed043367001c3384" title="nilfs_transaction_abort" alt="" coords="827,777,980,804"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8c.html#ada0ba1bf162679380f6096c9f83b94ea" title="nilfs_prepare_segment_lock" alt="" coords="1035,664,1219,691"/>
<area shape="rect" id="node21" href="the__nilfs_8c.html#a137faca9117bfef2a2264ccf3a9aa809" title="nilfs_near_disk_full" alt="" coords="1060,715,1193,741"/>
<area shape="rect" id="node22" href="sufile_8c.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="1267,703,1449,729"/>
<area shape="rect" id="node24" href="nilfs2_2bmap_8c.html#a4e7fd87b553f99a5d10b2f1d0cbbec0b" title="nilfs_bmap_insert" alt="" coords="1065,445,1189,472"/>
<area shape="rect" id="node26" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1297,344,1419,371"/>
<area shape="rect" id="node28" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1291,176,1425,203"/>
<area shape="rect" id="node27" href="buffer_8c.html#ae236845de65ed065f74eecf8f6ee9742" title="EXPORT_SYMBOL_GPL" alt="" coords="1501,344,1673,371"/>
<area shape="rect" id="node29" href="fs-writeback_8c.html#af5890cdc0a937a4f944928bd1880d49b" title="block_dump___mark_inode\l_dirty" alt="" coords="1497,110,1677,151"/>
<area shape="rect" id="node37" href="fs-writeback_8c.html#ad0ca24311e1c0ba76d3810d240f72b08" title="locked_inode_to_wb\l_and_lock_list" alt="" coords="1517,227,1657,269"/>
<area shape="rect" id="node38" href="fs-writeback_8c.html#a2a36a21e075aa2a912f5c3cb027692cf" title="inode_io_list_move\l_locked" alt="" coords="1521,45,1654,86"/>
<area shape="rect" id="node41" href="fs-writeback_8c.html#a044f1d7ff09b03f639232ec0e6a88ee1" title="EXPORT_SYMBOL" alt="" coords="1518,176,1657,203"/>
<area shape="rect" id="node30" href="dcache_8c.html#a9f042046c19f277000ddfc09b02e3633" title="d_find_alias" alt="" coords="1762,164,1853,191"/>
<area shape="rect" id="node33" href="dcache_8c.html#aebcca358185b5176b69b97e7eab12dfd" title="dput" alt="" coords="1784,113,1831,140"/>
<area shape="rect" id="node31" href="dcache_8c.html#a3eb221591429fdc67dec907c0d09d26a" title="__d_find_alias" alt="" coords="1954,215,2059,241"/>
<area shape="rect" id="node32" href="dcache_8c.html#aeb5ec7bdf3301140d66dd18ae638685c" title="EXPORT_SYMBOL" alt="" coords="1937,164,2076,191"/>
<area shape="rect" id="node34" href="dcache_8c.html#a364a93ebd8b57977a5a90f2076dd8f59" title="fast_dput" alt="" coords="1969,63,2045,89"/>
<area shape="rect" id="node35" href="dcache_8c.html#a689bf4f6109300b7bc021f1641052f99" title="retain_dentry" alt="" coords="2124,63,2221,89"/>
<area shape="rect" id="node36" href="dcache_8c.html#a4a5ea078fab8f6527abb7f44aa88efd3" title="dentry_kill" alt="" coords="1966,113,2047,140"/>
<area shape="rect" id="node39" href="fs-writeback_8c.html#ad9e6fcccf4baffa8e6c91881c6e428a9" title="wb_io_lists_populated" alt="" coords="1732,56,1883,83"/>
<area shape="rect" id="node40" href="fs-writeback_8c.html#aa31b94b7a70c8c8d396a5f0f3e8ef1ec" title="wb_io_lists_depopulated" alt="" coords="1725,5,1889,32"/>
<area shape="rect" id="node44" href="nilfs2_2segment_8c.html#aa55509ef3ea01cc74488f916f1d551f3" title="nilfs_segctor_start\l_timer" alt="" coords="1062,497,1191,538"/>
<area shape="rect" id="node45" href="nilfs2_2segment_8c.html#a23c179e5f28f728a442e31641f71c795" title="nilfs_segctor_do_flush" alt="" coords="1051,563,1203,589"/>
<area shape="rect" id="node46" href="nilfs2_2segment_8c.html#ad8bab60b16b37c93e180e1ea3e1580ad" title="nilfs_construct_segment" alt="" coords="1045,613,1209,640"/>
<area shape="rect" id="node49" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="855,892,951,919"/>
<area shape="rect" id="node50" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="623,885,765,926"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_ae5c9db186be6baf07d66e049a0fd9b9b_icgraph.png" border="0" usemap="#sufile_8h_ae5c9db186be6baf07d66e049a0fd9b9b_icgraph" alt=""/></div>
<map name="sufile_8h_ae5c9db186be6baf07d66e049a0fd9b9b_icgraph" id="sufile_8h_ae5c9db186be6baf07d66e049a0fd9b9b_icgraph">
<area shape="rect" id="node2" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="636,5,771,47"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="839,83,982,124"/>
<area shape="rect" id="node22" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="205,482,385,509"/>
<area shape="rect" id="node3" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1269,358,1448,385"/>
<area shape="rect" id="node4" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1937,296,2086,337"/>
<area shape="rect" id="node8" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1728,421,1885,447"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1496,355,1680,396"/>
<area shape="rect" id="node5" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="2364,402,2469,429"/>
<area shape="rect" id="node7" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="2169,323,2285,350"/>
<area shape="rect" id="node6" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="2517,569,2637,595"/>
<area shape="rect" id="node9" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1937,362,2085,389"/>
<area shape="rect" id="node12" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1942,413,2081,455"/>
<area shape="rect" id="node14" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1933,479,2089,506"/>
<area shape="rect" id="node10" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096" title="nilfs_ioctl_clean_segments" alt="" coords="2137,374,2316,401"/>
<area shape="rect" id="node11" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="2378,606,2455,633"/>
<area shape="rect" id="node13" href="nilfs2_2segment_8c.html#a39d3b93661aea1ce6d75d52641a734f7" title="nilfs_segctor_thread" alt="" coords="2157,425,2296,451"/>
<area shape="rect" id="node15" href="nilfs2_2segment_8c.html#a53eace4b3351e7a47d95a83e02257fda" title="nilfs_segctor_destroy" alt="" coords="2153,479,2300,506"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8h.html#a1907ac7b54882bbf06019eaf6d03c21c" title="nilfs_relax_pressure\l_in_lock" alt="" coords="1737,493,1876,535"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8c.html#a8b69f4181745f44662620421e0f88ab0" title="nilfs_transaction_lock" alt="" coords="1733,362,1881,389"/>
<area shape="rect" id="node18" href="nilfs2_2inode_8c.html#a8a5d71f4673d9c2189dbab1207a8ed89" title="nilfs_truncate_bmap" alt="" coords="1942,530,2081,557"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1063,358,1205,385"/>
<area shape="rect" id="node23" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="440,402,577,429"/>
<area shape="rect" id="node28" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="443,325,574,351"/>
<area shape="rect" id="node37" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="437,504,580,545"/>
<area shape="rect" id="node41" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="449,274,568,301"/>
<area shape="rect" id="node42" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="439,762,578,789"/>
<area shape="rect" id="node45" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="439,645,578,687"/>
<area shape="rect" id="node46" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="640,653,767,679"/>
<area shape="rect" id="node47" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="433,711,584,738"/>
<area shape="rect" id="node49" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="451,453,567,479"/>
<area shape="rect" id="node24" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="643,442,763,469"/>
<area shape="rect" id="node26" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="639,376,768,417"/>
<area shape="rect" id="node25" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="840,435,981,476"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1068,241,1200,283"/>
<area shape="rect" id="node29" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="642,325,765,351"/>
<area shape="rect" id="node33" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="647,223,760,250"/>
<area shape="rect" id="node36" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="632,173,775,199"/>
<area shape="rect" id="node30" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="834,200,987,241"/>
<area shape="rect" id="node31" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1047,307,1221,334"/>
<area shape="rect" id="node32" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1320,450,1397,477"/>
<area shape="rect" id="node34" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="823,149,999,175"/>
<area shape="rect" id="node35" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="835,317,986,359"/>
<area shape="rect" id="node38" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="857,631,964,658"/>
<area shape="rect" id="node40" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1291,555,1427,596"/>
<area shape="rect" id="node39" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="1529,631,1647,658"/>
<area shape="rect" id="node43" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="1286,791,1431,818"/>
<area shape="rect" id="node44" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="632,755,775,796"/>
<area shape="rect" id="node48" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="1527,691,1649,732"/>
<area shape="rect" id="node50" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="1061,475,1207,502"/>
</map>
</div>

</div>
</div>
<a id="a3ad0af8131357596ac729f04c3009e15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ad0af8131357596ac729f04c3009e15">&#9670;&nbsp;</a></span>nilfs_sufile_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nilfs_sufile_read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structsuper__block.html">super_block</a> *&#160;</td>
          <td class="paramname"><em>sb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>susize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct nilfs_inode *&#160;</td>
          <td class="paramname"><em>raw_inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> **&#160;</td>
          <td class="paramname"><em>inodep</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>nilfs_sufile_read - read or get sufile inode : super block instance : size of a segment usage entry : on-disk sufile inode : buffer to store the inode </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_a3ad0af8131357596ac729f04c3009e15_cgraph.png" border="0" usemap="#sufile_8h_a3ad0af8131357596ac729f04c3009e15_cgraph" alt=""/></div>
<map name="sufile_8h_a3ad0af8131357596ac729f04c3009e15_cgraph" id="sufile_8h_a3ad0af8131357596ac729f04c3009e15_cgraph">
<area shape="rect" id="node2" href="nilfs2_2inode_8c.html#ae758d8edf633a8af3535ac0af248f1d1" title="nilfs_iget_locked" alt="" coords="200,385,319,412"/>
<area shape="rect" id="node15" href="mdt_8c.html#a9d24c6e56a98e581fc30fd8a65841e2a" title="nilfs_mdt_init" alt="" coords="210,765,309,792"/>
<area shape="rect" id="node16" href="mdt_8c.html#ae0d853ce1775f22eb93823f6423e6fac" title="nilfs_mdt_set_entry_size" alt="" coords="176,816,343,843"/>
<area shape="rect" id="node18" href="nilfs2_2inode_8c.html#affec0e84c605c1d9028332974ba58cd3" title="nilfs_read_inode_common" alt="" coords="173,549,346,576"/>
<area shape="rect" id="node25" href="sufile_8c.html#a7df3cdff37c5aa00cca3458f1d7d400e" title="nilfs_sufile_get_header\l_block" alt="" coords="634,1599,789,1641"/>
<area shape="rect" id="node28" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="666,1353,757,1380"/>
<area shape="rect" id="node29" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="169,1328,349,1355"/>
<area shape="rect" id="node47" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="424,664,553,691"/>
<area shape="rect" id="node48" href="bad__inode_8c.html#a8c027cf52e2b7669b11b0bfa09bbcd45" title="iget_failed" alt="" coords="219,715,300,741"/>
<area shape="rect" id="node3" href="inode_8c.html#a0e9a0440646ab0424be87f1ee6387c64" title="iget5_locked" alt="" coords="441,183,536,209"/>
<area shape="rect" id="node11" href="nilfs2_2inode_8c.html#a42350b0b59e53776755f5a0b17efd97f" title="nilfs_iget_test" alt="" coords="437,411,540,437"/>
<area shape="rect" id="node13" href="nilfs2_2inode_8c.html#ab596c6b27b262ff881fb811a5d25990a" title="nilfs_iget_set" alt="" coords="439,360,538,387"/>
<area shape="rect" id="node4" href="inode_8c.html#aa1822403d896f1040c371de082022045" title="hash" alt="" coords="686,157,737,184"/>
<area shape="rect" id="node5" href="inode_8c.html#af827e753dda790b4b798f86e933bb380" title="find_inode" alt="" coords="671,208,752,235"/>
<area shape="rect" id="node6" href="inode_8c.html#a378733dcbf0fb08359b9a02145ac8fc3" title="iput" alt="" coords="690,309,733,336"/>
<area shape="rect" id="node7" href="debugfs_2inode_8c.html#a16e485b5debd4cd96a200844c38df190" title="EXPORT_SYMBOL" alt="" coords="843,461,981,488"/>
<area shape="rect" id="node8" href="inode_8c.html#a6328f7a2621c5365a1df969e8c7ab998" title="alloc_inode" alt="" coords="668,5,755,32"/>
<area shape="rect" id="node9" href="inode_8c.html#a1871c58d9c393006e24f7fea1bcc288d" title="inode_sb_list_add" alt="" coords="648,56,775,83"/>
<area shape="rect" id="node10" href="inode_8c.html#a076b86296ed39596f96ef03ea8aa74d7" title="destroy_inode" alt="" coords="660,107,763,133"/>
<area shape="rect" id="node12" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="676,411,747,437"/>
<area shape="rect" id="node14" href="the__nilfs_8h.html#a4af5a977af148ee222180ae10226f487" title="nilfs_get_root" alt="" coords="661,360,761,387"/>
<area shape="rect" id="node17" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="864,1315,960,1341"/>
<area shape="rect" id="node19" href="inode_8c.html#a01ed868f59230449a75b85f7157efd95" title="set_nlink" alt="" coords="451,512,526,539"/>
<area shape="rect" id="node21" href="nilfs2_2bmap_8c.html#a1dab812b511c175bcc95dd9221f82172" title="nilfs_bmap_read" alt="" coords="430,588,547,615"/>
<area shape="rect" id="node20" href="inode_8c.html#a3988783ee2de89674d83e4e86080d792" title="clear_nlink" alt="" coords="669,512,753,539"/>
<area shape="rect" id="node22" href="nilfs_8h.html#ab02aecb562f6c74a04aad6d769ac9f1e" title="NILFS_BMAP_I" alt="" coords="653,613,769,640"/>
<area shape="rect" id="node23" href="nilfs2_2btree_8c.html#a8e12be4abec0ec1530a707fea17e7298" title="nilfs_btree_init" alt="" coords="658,664,765,691"/>
<area shape="rect" id="node24" href="nilfs2_2direct_8c.html#aeecaf45244f88e4286516e9b26ff6afd" title="nilfs_direct_init" alt="" coords="657,563,766,589"/>
<area shape="rect" id="node26" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="843,1716,981,1743"/>
<area shape="rect" id="node27" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="1029,1716,1175,1743"/>
<area shape="rect" id="node30" href="sufile_8h.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="397,1455,580,1481"/>
<area shape="rect" id="node31" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="417,1121,560,1162"/>
<area shape="rect" id="node32" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="429,1252,548,1279"/>
<area shape="rect" id="node33" href="sufile_8h.html#ae5c9db186be6baf07d66e049a0fd9b9b" title="nilfs_sufile_mark_dirty" alt="" coords="413,1303,565,1329"/>
<area shape="rect" id="node34" href="sufile_8h.html#ac6379742426c30d02072b1a5b0f527f8" title="nilfs_sufile_set_segment\l_usage" alt="" coords="628,1031,795,1073"/>
<area shape="rect" id="node35" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033" title="nblocks" alt="" coords="678,892,745,919"/>
<area shape="rect" id="node36" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="419,1708,558,1735"/>
<area shape="rect" id="node37" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="413,1069,564,1096"/>
<area shape="rect" id="node38" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687" title="nilfs_sufile_set_suinfo" alt="" coords="413,1657,564,1684"/>
<area shape="rect" id="node39" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="420,1809,557,1836"/>
<area shape="rect" id="node40" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="423,1607,554,1633"/>
<area shape="rect" id="node41" href="sufile_8h.html#acad60c93c0f7f6c3a8a9dc843107f1ed" title="nilfs_sufile_do_scrap" alt="" coords="417,1353,561,1380"/>
<area shape="rect" id="node42" href="sufile_8h.html#a577d0d35a7907909b6c0a139d8cc1704" title="nilfs_sufile_do_free" alt="" coords="421,1404,556,1431"/>
<area shape="rect" id="node43" href="sufile_8h.html#aff87ff4257115842ff3c7940e5f8e769" title="nilfs_sufile_do_cancel_free" alt="" coords="399,1505,578,1532"/>
<area shape="rect" id="node44" href="sufile_8h.html#a7e943e59486cd6176a3317bed589b7c9" title="nilfs_sufile_do_set\l_error" alt="" coords="423,1186,554,1227"/>
<area shape="rect" id="node45" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="425,1556,552,1583"/>
<area shape="rect" id="node46" href="sufile_8h.html#a202058a1d5a7ee3658e8e7cda1ffee37" title="nilfs_sufile_trim_fs" alt="" coords="423,917,554,944"/>
<area shape="rect" id="node49" href="bad__inode_8c.html#ab9cc2af6161530b35e5f86e29f977033" title="make_bad_inode" alt="" coords="429,765,549,792"/>
<area shape="rect" id="node50" href="bad__inode_8c.html#a74ff3566c64350315f12163f4ddfdae7" title="EXPORT_SYMBOL" alt="" coords="642,765,781,792"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_a3ad0af8131357596ac729f04c3009e15_icgraph.png" border="0" usemap="#sufile_8h_a3ad0af8131357596ac729f04c3009e15_icgraph" alt=""/></div>
<map name="sufile_8h_a3ad0af8131357596ac729f04c3009e15_icgraph" id="sufile_8h_a3ad0af8131357596ac729f04c3009e15_icgraph">
<area shape="rect" id="node2" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="169,508,349,535"/>
<area shape="rect" id="node50" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="187,225,332,252"/>
<area shape="rect" id="node3" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="404,452,541,479"/>
<area shape="rect" id="node23" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="407,305,538,332"/>
<area shape="rect" id="node37" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="401,559,544,601"/>
<area shape="rect" id="node41" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="608,149,727,176"/>
<area shape="rect" id="node43" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="403,625,542,652"/>
<area shape="rect" id="node46" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="403,777,542,818"/>
<area shape="rect" id="node47" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="604,793,731,820"/>
<area shape="rect" id="node48" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="397,508,548,535"/>
<area shape="rect" id="node4" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="607,372,727,399"/>
<area shape="rect" id="node21" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="603,441,732,482"/>
<area shape="rect" id="node5" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="804,357,945,398"/>
<area shape="rect" id="node6" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1027,253,1169,280"/>
<area shape="rect" id="node7" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1233,255,1412,281"/>
<area shape="rect" id="node8" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1477,262,1627,303"/>
<area shape="rect" id="node15" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1692,211,1849,237"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1460,347,1644,389"/>
<area shape="rect" id="node9" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="1718,316,1823,343"/>
<area shape="rect" id="node14" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="1713,265,1829,292"/>
<area shape="rect" id="node10" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1915,520,2035,547"/>
<area shape="rect" id="node11" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2109,520,2224,547"/>
<area shape="rect" id="node12" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2101,571,2232,597"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1284,571,1361,597"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1901,211,2049,237"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1906,262,2045,303"/>
<area shape="rect" id="node18" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1897,160,2053,187"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8h.html#a1907ac7b54882bbf06019eaf6d03c21c" title="nilfs_relax_pressure\l_in_lock" alt="" coords="1701,367,1840,409"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1032,305,1164,346"/>
<area shape="rect" id="node24" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="606,200,729,227"/>
<area shape="rect" id="node32" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="611,251,724,277"/>
<area shape="rect" id="node36" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="596,305,739,332"/>
<area shape="rect" id="node25" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="798,109,951,150"/>
<area shape="rect" id="node26" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1011,115,1185,141"/>
<area shape="rect" id="node27" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1284,113,1361,140"/>
<area shape="rect" id="node28" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1499,109,1605,136"/>
<area shape="rect" id="node30" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1493,160,1611,187"/>
<area shape="rect" id="node29" href="nilfs2_2super_8c.html#a6f69bb47bb8193c95863dfa7858e0556" title="nilfs_mount" alt="" coords="1726,109,1815,136"/>
<area shape="rect" id="node31" href="nilfs2_2super_8c.html#aa52d92dd32f84052f43449918f769c15" title="nilfs_sync_fs" alt="" coords="1721,160,1820,187"/>
<area shape="rect" id="node33" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="803,174,946,215"/>
<area shape="rect" id="node34" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="787,305,963,332"/>
<area shape="rect" id="node35" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="799,239,950,281"/>
<area shape="rect" id="node38" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="821,680,928,707"/>
<area shape="rect" id="node40" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1030,563,1166,605"/>
<area shape="rect" id="node39" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="1039,680,1157,707"/>
<area shape="rect" id="node42" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="807,43,942,85"/>
<area shape="rect" id="node44" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="1025,629,1171,656"/>
<area shape="rect" id="node45" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="596,727,739,769"/>
<area shape="rect" id="node49" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="1037,498,1159,539"/>
</map>
</div>

</div>
</div>
<a id="ac9feb3258026bbd1136c545e911c5d91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9feb3258026bbd1136c545e911c5d91">&#9670;&nbsp;</a></span>nilfs_sufile_resize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nilfs_sufile_resize </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64&#160;</td>
          <td class="paramname"><em>newnsegs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>nilfs_sufile_resize - resize segment array : inode of segment usage file : new number of segments</p>
<p>Return Value: On success, 0 is returned. On error, one of the following negative error codes is returned.</p>
<p>%-EIO - I/O error.</p>
<p>%-ENOMEM - Insufficient amount of memory available.</p>
<p>%-ENOSPC - Enough free space is not left for shrinking</p>
<p>%-EBUSY - Dirty or active segments exist in the region to be truncated </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_ac9feb3258026bbd1136c545e911c5d91_cgraph.png" border="0" usemap="#sufile_8h_ac9feb3258026bbd1136c545e911c5d91_cgraph" alt=""/></div>
<map name="sufile_8h_ac9feb3258026bbd1136c545e911c5d91_cgraph" id="sufile_8h_ac9feb3258026bbd1136c545e911c5d91_cgraph">
<area shape="rect" id="node2" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="871,245,961,272"/>
<area shape="rect" id="node3" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1463,1173,1559,1200"/>
<area shape="rect" id="node4" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="371,1123,551,1149"/>
<area shape="rect" id="node8" href="sufile_8c.html#a7df3cdff37c5aa00cca3458f1d7d400e" title="nilfs_sufile_get_header\l_block" alt="" coords="839,1275,993,1317"/>
<area shape="rect" id="node17" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1064,397,1187,424"/>
<area shape="rect" id="node21" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="845,499,987,525"/>
<area shape="rect" id="node47" href="the__nilfs_8c.html#aa7bf85e7bb9022b3680b22d945d17f91" title="nilfs_nrsvsegs" alt="" coords="407,2453,514,2480"/>
<area shape="rect" id="node48" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="182,1275,321,1317"/>
<area shape="rect" id="node50" href="the__nilfs_8c.html#a38632ac69509070865038bf0120a1509" title="nilfs_set_nsegments" alt="" coords="180,2188,323,2215"/>
<area shape="rect" id="node5" href="sufile_8h.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="599,331,781,357"/>
<area shape="rect" id="node6" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="619,265,761,306"/>
<area shape="rect" id="node7" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="631,1047,749,1073"/>
<area shape="rect" id="node23" href="sufile_8h.html#ae5c9db186be6baf07d66e049a0fd9b9b" title="nilfs_sufile_mark_dirty" alt="" coords="614,853,766,880"/>
<area shape="rect" id="node24" href="sufile_8h.html#ac6379742426c30d02072b1a5b0f527f8" title="nilfs_sufile_set_segment\l_usage" alt="" coords="607,905,773,946"/>
<area shape="rect" id="node25" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033" title="nblocks" alt="" coords="883,1763,949,1789"/>
<area shape="rect" id="node26" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="621,1173,759,1200"/>
<area shape="rect" id="node27" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="615,1956,765,1983"/>
<area shape="rect" id="node29" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687" title="nilfs_sufile_set_suinfo" alt="" coords="615,803,765,829"/>
<area shape="rect" id="node31" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="621,1123,759,1149"/>
<area shape="rect" id="node32" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="625,1392,755,1419"/>
<area shape="rect" id="node33" href="sufile_8h.html#acad60c93c0f7f6c3a8a9dc843107f1ed" title="nilfs_sufile_do_scrap" alt="" coords="618,499,762,525"/>
<area shape="rect" id="node34" href="sufile_8h.html#a577d0d35a7907909b6c0a139d8cc1704" title="nilfs_sufile_do_free" alt="" coords="623,549,757,576"/>
<area shape="rect" id="node35" href="sufile_8h.html#aff87ff4257115842ff3c7940e5f8e769" title="nilfs_sufile_do_cancel_free" alt="" coords="601,600,779,627"/>
<area shape="rect" id="node36" href="sufile_8h.html#a7e943e59486cd6176a3317bed589b7c9" title="nilfs_sufile_do_set\l_error" alt="" coords="625,433,755,474"/>
<area shape="rect" id="node37" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="632,1341,748,1368"/>
<area shape="rect" id="node44" href="sufile_8h.html#a202058a1d5a7ee3658e8e7cda1ffee37" title="nilfs_sufile_trim_fs" alt="" coords="625,1788,755,1815"/>
<area shape="rect" id="node11" href="sufile_8c.html#a38f2abf7ef7577b1af4b9e8fc9316727" title="nilfs_sufile_get_segment\l_usage_block" alt="" coords="833,1646,999,1687"/>
<area shape="rect" id="node14" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="843,905,989,946"/>
<area shape="rect" id="node16" href="sufile_8c.html#a34ecb984fd0f57101d2ee0b4bde4bf95" title="nilfs_sufile_segment\l_usages_in_block" alt="" coords="845,1982,987,2023"/>
<area shape="rect" id="node9" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="1056,1253,1195,1280"/>
<area shape="rect" id="node10" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="1259,1253,1404,1280"/>
<area shape="rect" id="node12" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="1051,1456,1199,1483"/>
<area shape="rect" id="node13" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="1261,1982,1402,2023"/>
<area shape="rect" id="node15" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="1051,2044,1200,2071"/>
<area shape="rect" id="node18" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1271,347,1392,373"/>
<area shape="rect" id="node19" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1264,397,1399,424"/>
<area shape="rect" id="node20" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1262,448,1401,475"/>
<area shape="rect" id="node22" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1090,861,1161,888"/>
<area shape="rect" id="node28" href="the__nilfs_8h.html#a51bb53199a62a87f269e03404136d00f" title="nilfs_segment_is_active" alt="" coords="835,2251,997,2277"/>
<area shape="rect" id="node30" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="833,347,999,373"/>
<area shape="rect" id="node38" href="nilfs2_2inode_8c.html#ae758d8edf633a8af3535ac0af248f1d1" title="nilfs_iget_locked" alt="" coords="857,1595,975,1621"/>
<area shape="rect" id="node39" href="mdt_8c.html#a9d24c6e56a98e581fc30fd8a65841e2a" title="nilfs_mdt_init" alt="" coords="867,1443,965,1469"/>
<area shape="rect" id="node40" href="mdt_8c.html#ae0d853ce1775f22eb93823f6423e6fac" title="nilfs_mdt_set_entry_size" alt="" coords="1248,1348,1415,1375"/>
<area shape="rect" id="node41" href="nilfs2_2inode_8c.html#affec0e84c605c1d9028332974ba58cd3" title="nilfs_read_inode_common" alt="" coords="829,1341,1003,1368"/>
<area shape="rect" id="node42" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="1061,1532,1190,1559"/>
<area shape="rect" id="node43" href="bad__inode_8c.html#a8c027cf52e2b7669b11b0bfa09bbcd45" title="iget_failed" alt="" coords="875,1493,957,1520"/>
<area shape="rect" id="node45" href="the__nilfs_8h.html#acbe15a8b57f8ecf5e4777294c2f7303d" title="nilfs_get_segnum_of\l_block" alt="" coords="845,1865,987,1906"/>
<area shape="rect" id="node46" href="the__nilfs_8h.html#a0dc161eb6c4f6bad9212b67517b46a37" title="nilfs_get_segment_range" alt="" coords="833,1813,999,1840"/>
<area shape="rect" id="node49" href="sufile_8c.html#a6c6906f2fa7470c98e36fadfed86c294" title="nilfs_sufile_delete\l_segment_usage_block" alt="" coords="381,1985,540,2026"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_ac9feb3258026bbd1136c545e911c5d91_icgraph.png" border="0" usemap="#sufile_8h_ac9feb3258026bbd1136c545e911c5d91_icgraph" alt=""/></div>
<map name="sufile_8h_ac9feb3258026bbd1136c545e911c5d91_icgraph" id="sufile_8h_ac9feb3258026bbd1136c545e911c5d91_icgraph">
<area shape="rect" id="node2" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="625,24,731,51"/>
<area shape="rect" id="node12" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="180,301,360,328"/>
<area shape="rect" id="node3" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="826,5,945,32"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1070,123,1147,149"/>
<area shape="rect" id="node5" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1922,173,2042,200"/>
<area shape="rect" id="node6" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2112,173,2227,200"/>
<area shape="rect" id="node11" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2104,224,2235,251"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="2287,97,2377,124"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="2286,148,2378,175"/>
<area shape="rect" id="node9" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="2283,199,2381,225"/>
<area shape="rect" id="node10" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="2289,249,2375,276"/>
<area shape="rect" id="node13" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="415,301,552,328"/>
<area shape="rect" id="node27" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="418,427,549,453"/>
<area shape="rect" id="node39" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="412,93,555,134"/>
<area shape="rect" id="node41" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="619,484,737,511"/>
<area shape="rect" id="node43" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="414,187,553,213"/>
<area shape="rect" id="node46" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="414,529,553,570"/>
<area shape="rect" id="node47" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="408,251,559,277"/>
<area shape="rect" id="node49" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="425,477,541,504"/>
<area shape="rect" id="node14" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="618,293,738,320"/>
<area shape="rect" id="node25" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="613,345,743,386"/>
<area shape="rect" id="node15" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="815,239,956,281"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1038,364,1179,391"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1244,437,1423,464"/>
<area shape="rect" id="node18" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1488,315,1637,357"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1703,511,1860,537"/>
<area shape="rect" id="node24" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1471,489,1655,530"/>
<area shape="rect" id="node19" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="1729,173,1834,200"/>
<area shape="rect" id="node20" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="1723,323,1839,349"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1908,481,2056,508"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1913,533,2051,574"/>
<area shape="rect" id="node26" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1043,430,1175,471"/>
<area shape="rect" id="node28" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="617,620,739,647"/>
<area shape="rect" id="node34" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="621,433,735,460"/>
<area shape="rect" id="node38" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="607,539,749,565"/>
<area shape="rect" id="node29" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="809,642,962,683"/>
<area shape="rect" id="node30" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1021,649,1196,676"/>
<area shape="rect" id="node31" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1295,649,1372,676"/>
<area shape="rect" id="node32" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1510,649,1615,676"/>
<area shape="rect" id="node33" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1504,584,1621,611"/>
<area shape="rect" id="node35" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="814,474,957,515"/>
<area shape="rect" id="node36" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="797,540,973,567"/>
<area shape="rect" id="node37" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="810,357,961,398"/>
<area shape="rect" id="node40" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="817,57,953,98"/>
<area shape="rect" id="node42" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1041,546,1176,587"/>
<area shape="rect" id="node44" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="813,123,958,149"/>
<area shape="rect" id="node45" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="607,177,749,218"/>
<area shape="rect" id="node48" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="824,174,947,215"/>
<area shape="rect" id="node50" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="1036,704,1181,731"/>
</map>
</div>

</div>
</div>
<a id="afdd3e828fa8ffde5856b483f0c32c6f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdd3e828fa8ffde5856b483f0c32c6f4">&#9670;&nbsp;</a></span>nilfs_sufile_scrap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_sufile_scrap </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64&#160;</td>
          <td class="paramname"><em>segnum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_sufile_scrap - make a segment garbage : inode of segment usage file : segment number to be freed </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_afdd3e828fa8ffde5856b483f0c32c6f4_cgraph.png" border="0" usemap="#sufile_8h_afdd3e828fa8ffde5856b483f0c32c6f4_cgraph" alt=""/></div>
<map name="sufile_8h_afdd3e828fa8ffde5856b483f0c32c6f4_cgraph" id="sufile_8h_afdd3e828fa8ffde5856b483f0c32c6f4_cgraph">
<area shape="rect" id="node2" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="176,857,307,884"/>
<area shape="rect" id="node33" href="sufile_8h.html#acad60c93c0f7f6c3a8a9dc843107f1ed" title="nilfs_sufile_do_scrap" alt="" coords="831,499,975,525"/>
<area shape="rect" id="node3" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="355,857,535,884"/>
<area shape="rect" id="node6" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1673,1224,1769,1251"/>
<area shape="rect" id="node9" href="sufile_8c.html#a7df3cdff37c5aa00cca3458f1d7d400e" title="nilfs_sufile_get_header\l_block" alt="" coords="1049,1427,1204,1469"/>
<area shape="rect" id="node12" href="sufile_8c.html#a38f2abf7ef7577b1af4b9e8fc9316727" title="nilfs_sufile_get_segment\l_usage_block" alt="" coords="1043,1595,1210,1637"/>
<area shape="rect" id="node4" href="sufile_8h.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="583,445,765,472"/>
<area shape="rect" id="node7" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="603,225,745,266"/>
<area shape="rect" id="node8" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="843,1123,962,1149"/>
<area shape="rect" id="node24" href="sufile_8h.html#ae5c9db186be6baf07d66e049a0fd9b9b" title="nilfs_sufile_mark_dirty" alt="" coords="827,853,979,880"/>
<area shape="rect" id="node25" href="sufile_8h.html#ac6379742426c30d02072b1a5b0f527f8" title="nilfs_sufile_set_segment\l_usage" alt="" coords="819,1174,986,1215"/>
<area shape="rect" id="node26" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033" title="nblocks" alt="" coords="1093,2235,1160,2261"/>
<area shape="rect" id="node27" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="605,705,743,732"/>
<area shape="rect" id="node28" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="827,1679,978,1705"/>
<area shape="rect" id="node30" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687" title="nilfs_sufile_set_suinfo" alt="" coords="827,803,978,829"/>
<area shape="rect" id="node32" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="834,971,971,997"/>
<area shape="rect" id="node34" href="sufile_8h.html#a577d0d35a7907909b6c0a139d8cc1704" title="nilfs_sufile_do_free" alt="" coords="835,616,970,643"/>
<area shape="rect" id="node35" href="sufile_8h.html#aff87ff4257115842ff3c7940e5f8e769" title="nilfs_sufile_do_cancel_free" alt="" coords="813,667,992,693"/>
<area shape="rect" id="node36" href="sufile_8h.html#a7e943e59486cd6176a3317bed589b7c9" title="nilfs_sufile_do_set\l_error" alt="" coords="837,550,968,591"/>
<area shape="rect" id="node37" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="611,379,737,405"/>
<area shape="rect" id="node41" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="845,1628,961,1655"/>
<area shape="rect" id="node48" href="sufile_8h.html#a202058a1d5a7ee3658e8e7cda1ffee37" title="nilfs_sufile_trim_fs" alt="" coords="837,2079,968,2105"/>
<area shape="rect" id="node5" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="1081,397,1172,424"/>
<area shape="rect" id="node15" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="1053,1006,1200,1047"/>
<area shape="rect" id="node17" href="sufile_8c.html#a34ecb984fd0f57101d2ee0b4bde4bf95" title="nilfs_sufile_segment\l_usages_in_block" alt="" coords="1056,1915,1197,1957"/>
<area shape="rect" id="node18" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1275,549,1397,576"/>
<area shape="rect" id="node22" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="1055,651,1198,677"/>
<area shape="rect" id="node10" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="1267,1325,1405,1352"/>
<area shape="rect" id="node11" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="1469,1325,1615,1352"/>
<area shape="rect" id="node13" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="1262,1376,1410,1403"/>
<area shape="rect" id="node14" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="1471,1697,1613,1738"/>
<area shape="rect" id="node16" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="1261,1645,1411,1672"/>
<area shape="rect" id="node19" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1481,499,1603,525"/>
<area shape="rect" id="node20" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1475,549,1609,576"/>
<area shape="rect" id="node21" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1473,600,1611,627"/>
<area shape="rect" id="node23" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1301,853,1371,880"/>
<area shape="rect" id="node29" href="the__nilfs_8h.html#a51bb53199a62a87f269e03404136d00f" title="nilfs_segment_is_active" alt="" coords="1045,1763,1208,1789"/>
<area shape="rect" id="node31" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="1043,499,1210,525"/>
<area shape="rect" id="node38" href="the__nilfs_8c.html#aa7bf85e7bb9022b3680b22d945d17f91" title="nilfs_nrsvsegs" alt="" coords="1073,93,1180,120"/>
<area shape="rect" id="node39" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="833,905,972,946"/>
<area shape="rect" id="node40" href="the__nilfs_8c.html#a38632ac69509070865038bf0120a1509" title="nilfs_set_nsegments" alt="" coords="831,93,974,120"/>
<area shape="rect" id="node42" href="nilfs2_2inode_8c.html#ae758d8edf633a8af3535ac0af248f1d1" title="nilfs_iget_locked" alt="" coords="1067,1712,1186,1739"/>
<area shape="rect" id="node43" href="mdt_8c.html#a9d24c6e56a98e581fc30fd8a65841e2a" title="nilfs_mdt_init" alt="" coords="1077,1813,1176,1840"/>
<area shape="rect" id="node44" href="mdt_8c.html#ae0d853ce1775f22eb93823f6423e6fac" title="nilfs_mdt_set_entry_size" alt="" coords="1459,1923,1625,1949"/>
<area shape="rect" id="node45" href="nilfs2_2inode_8c.html#affec0e84c605c1d9028332974ba58cd3" title="nilfs_read_inode_common" alt="" coords="1040,1493,1213,1520"/>
<area shape="rect" id="node46" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="1271,2007,1401,2033"/>
<area shape="rect" id="node47" href="bad__inode_8c.html#a8c027cf52e2b7669b11b0bfa09bbcd45" title="iget_failed" alt="" coords="1086,2032,1167,2059"/>
<area shape="rect" id="node49" href="the__nilfs_8h.html#acbe15a8b57f8ecf5e4777294c2f7303d" title="nilfs_get_segnum_of\l_block" alt="" coords="1055,2387,1198,2429"/>
<area shape="rect" id="node50" href="the__nilfs_8h.html#a0dc161eb6c4f6bad9212b67517b46a37" title="nilfs_get_segment_range" alt="" coords="1043,2336,1210,2363"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_afdd3e828fa8ffde5856b483f0c32c6f4_icgraph.png" border="0" usemap="#sufile_8h_afdd3e828fa8ffde5856b483f0c32c6f4_icgraph" alt=""/></div>
<map name="sufile_8h_afdd3e828fa8ffde5856b483f0c32c6f4_icgraph" id="sufile_8h_afdd3e828fa8ffde5856b483f0c32c6f4_icgraph">
<area shape="rect" id="node2" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="176,343,329,385"/>
<area shape="rect" id="node3" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="377,351,552,377"/>
<area shape="rect" id="node4" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="600,208,677,235"/>
<area shape="rect" id="node5" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1942,241,2047,268"/>
<area shape="rect" id="node7" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="725,208,843,235"/>
<area shape="rect" id="node6" href="nilfs2_2super_8c.html#a6f69bb47bb8193c95863dfa7858e0556" title="nilfs_mount" alt="" coords="2113,279,2202,305"/>
<area shape="rect" id="node8" href="nilfs2_2super_8c.html#aa52d92dd32f84052f43449918f769c15" title="nilfs_sync_fs" alt="" coords="920,183,1019,209"/>
<area shape="rect" id="node9" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="891,233,1048,260"/>
<area shape="rect" id="node10" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1100,183,1248,209"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1105,285,1243,326"/>
<area shape="rect" id="node25" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1096,233,1252,260"/>
<area shape="rect" id="node11" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096" title="nilfs_ioctl_clean_segments" alt="" coords="1300,81,1479,108"/>
<area shape="rect" id="node12" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1565,81,1643,108"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1745,81,1865,108"/>
<area shape="rect" id="node14" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="1937,81,2052,108"/>
<area shape="rect" id="node19" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="1929,31,2060,57"/>
<area shape="rect" id="node15" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="2113,157,2202,184"/>
<area shape="rect" id="node16" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="2111,5,2203,32"/>
<area shape="rect" id="node17" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="2108,56,2207,83"/>
<area shape="rect" id="node18" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="2115,107,2200,133"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a39d3b93661aea1ce6d75d52641a734f7" title="nilfs_segctor_thread" alt="" coords="1320,376,1459,403"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8c.html#accb2af3cf720ef8a382baa244f770a64" title="nilfs_segctor_start\l_thread" alt="" coords="1539,361,1669,402"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8h.html#accc0b22d29c5e0dc0550492c2814845f" title="nilfs_attach_log_writer" alt="" coords="1729,368,1881,395"/>
<area shape="rect" id="node24" href="nilfs2_2super_8c.html#abaf12a9facc571b7e4e46389a440b694" title="nilfs_remount" alt="" coords="1945,317,2045,344"/>
<area shape="rect" id="node26" href="nilfs2_2segment_8c.html#a53eace4b3351e7a47d95a83e02257fda" title="nilfs_segctor_destroy" alt="" coords="1316,237,1463,264"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8h.html#a86ad97768e43fb1c81c962ab7f895fb0" title="nilfs_detach_log_writer" alt="" coords="1527,288,1681,315"/>
<area shape="rect" id="node28" href="nilfs2_2super_8c.html#aa48b8ba2014d88aac606b97a2b09d0ef" title="nilfs_put_super" alt="" coords="1750,267,1861,293"/>
</map>
</div>

</div>
</div>
<a id="ac0bd62c3d3681b821085c55c413aa1bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0bd62c3d3681b821085c55c413aa1bb">&#9670;&nbsp;</a></span>nilfs_sufile_set_alloc_range()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nilfs_sufile_set_alloc_range </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64&#160;</td>
          <td class="paramname"><em>end</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>nilfs_sufile_set_alloc_range - limit range of segment to be allocated : inode of segment usage file : minimum segment number of allocatable region (inclusive) : maximum segment number of allocatable region (inclusive)</p>
<p>Return Value: On success, 0 is returned. On error, one of the following negative error codes is returned.</p>
<p>%-ERANGE - invalid segment region </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_ac0bd62c3d3681b821085c55c413aa1bb_cgraph.png" border="0" usemap="#sufile_8h_ac0bd62c3d3681b821085c55c413aa1bb_cgraph" alt=""/></div>
<map name="sufile_8h_ac0bd62c3d3681b821085c55c413aa1bb_cgraph" id="sufile_8h_ac0bd62c3d3681b821085c55c413aa1bb_cgraph">
<area shape="rect" id="node2" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="923,397,1013,424"/>
<area shape="rect" id="node3" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1521,1429,1617,1456"/>
<area shape="rect" id="node4" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="196,1115,376,1141"/>
<area shape="rect" id="node5" href="sufile_8h.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="424,565,607,592"/>
<area shape="rect" id="node6" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="685,1180,803,1207"/>
<area shape="rect" id="node23" href="sufile_8h.html#ae5c9db186be6baf07d66e049a0fd9b9b" title="nilfs_sufile_mark_dirty" alt="" coords="668,879,820,905"/>
<area shape="rect" id="node24" href="sufile_8h.html#ac6379742426c30d02072b1a5b0f527f8" title="nilfs_sufile_set_segment\l_usage" alt="" coords="661,1234,827,1275"/>
<area shape="rect" id="node25" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033" title="nblocks" alt="" coords="935,2285,1001,2312"/>
<area shape="rect" id="node26" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="446,861,585,888"/>
<area shape="rect" id="node27" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="669,1491,819,1517"/>
<area shape="rect" id="node29" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687" title="nilfs_sufile_set_suinfo" alt="" coords="669,760,819,787"/>
<area shape="rect" id="node31" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="675,1315,813,1341"/>
<area shape="rect" id="node32" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="679,1377,809,1404"/>
<area shape="rect" id="node33" href="sufile_8h.html#acad60c93c0f7f6c3a8a9dc843107f1ed" title="nilfs_sufile_do_scrap" alt="" coords="672,473,816,500"/>
<area shape="rect" id="node34" href="sufile_8h.html#a577d0d35a7907909b6c0a139d8cc1704" title="nilfs_sufile_do_free" alt="" coords="677,524,811,551"/>
<area shape="rect" id="node35" href="sufile_8h.html#aff87ff4257115842ff3c7940e5f8e769" title="nilfs_sufile_do_cancel_free" alt="" coords="655,575,833,601"/>
<area shape="rect" id="node36" href="sufile_8h.html#a7e943e59486cd6176a3317bed589b7c9" title="nilfs_sufile_do_set\l_error" alt="" coords="679,626,809,667"/>
<area shape="rect" id="node37" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="452,499,579,525"/>
<area shape="rect" id="node41" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="686,1868,802,1895"/>
<area shape="rect" id="node48" href="sufile_8h.html#a202058a1d5a7ee3658e8e7cda1ffee37" title="nilfs_sufile_trim_fs" alt="" coords="679,2232,809,2259"/>
<area shape="rect" id="node7" href="sufile_8c.html#a7df3cdff37c5aa00cca3458f1d7d400e" title="nilfs_sufile_get_header\l_block" alt="" coords="891,1174,1045,1215"/>
<area shape="rect" id="node11" href="sufile_8c.html#a38f2abf7ef7577b1af4b9e8fc9316727" title="nilfs_sufile_get_segment\l_usage_block" alt="" coords="885,1494,1051,1535"/>
<area shape="rect" id="node14" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="895,1006,1041,1047"/>
<area shape="rect" id="node16" href="sufile_8c.html#a34ecb984fd0f57101d2ee0b4bde4bf95" title="nilfs_sufile_segment\l_usages_in_block" alt="" coords="897,1814,1039,1855"/>
<area shape="rect" id="node17" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1125,549,1247,576"/>
<area shape="rect" id="node21" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="897,600,1039,627"/>
<area shape="rect" id="node8" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="1117,1197,1255,1224"/>
<area shape="rect" id="node9" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="1323,1223,1468,1249"/>
<area shape="rect" id="node10" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="1317,1172,1473,1199"/>
<area shape="rect" id="node12" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="1112,1531,1260,1557"/>
<area shape="rect" id="node13" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="1325,1713,1466,1754"/>
<area shape="rect" id="node15" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="1111,1712,1261,1739"/>
<area shape="rect" id="node18" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1335,549,1456,576"/>
<area shape="rect" id="node19" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1328,600,1463,627"/>
<area shape="rect" id="node20" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1326,499,1465,525"/>
<area shape="rect" id="node22" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1151,1661,1221,1688"/>
<area shape="rect" id="node28" href="the__nilfs_8h.html#a51bb53199a62a87f269e03404136d00f" title="nilfs_segment_is_active" alt="" coords="887,1443,1049,1469"/>
<area shape="rect" id="node30" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="885,499,1051,525"/>
<area shape="rect" id="node38" href="the__nilfs_8c.html#aa7bf85e7bb9022b3680b22d945d17f91" title="nilfs_nrsvsegs" alt="" coords="915,68,1021,95"/>
<area shape="rect" id="node39" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="675,1006,813,1047"/>
<area shape="rect" id="node40" href="the__nilfs_8c.html#a38632ac69509070865038bf0120a1509" title="nilfs_set_nsegments" alt="" coords="673,43,815,69"/>
<area shape="rect" id="node42" href="nilfs2_2inode_8c.html#ae758d8edf633a8af3535ac0af248f1d1" title="nilfs_iget_locked" alt="" coords="909,2184,1027,2211"/>
<area shape="rect" id="node43" href="mdt_8c.html#a9d24c6e56a98e581fc30fd8a65841e2a" title="nilfs_mdt_init" alt="" coords="919,2235,1017,2261"/>
<area shape="rect" id="node44" href="mdt_8c.html#ae0d853ce1775f22eb93823f6423e6fac" title="nilfs_mdt_set_entry_size" alt="" coords="1103,2032,1269,2059"/>
<area shape="rect" id="node45" href="nilfs2_2inode_8c.html#affec0e84c605c1d9028332974ba58cd3" title="nilfs_read_inode_common" alt="" coords="881,1763,1055,1789"/>
<area shape="rect" id="node46" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="1121,2108,1251,2135"/>
<area shape="rect" id="node47" href="bad__inode_8c.html#a8c027cf52e2b7669b11b0bfa09bbcd45" title="iget_failed" alt="" coords="927,2083,1009,2109"/>
<area shape="rect" id="node49" href="the__nilfs_8h.html#acbe15a8b57f8ecf5e4777294c2f7303d" title="nilfs_get_segnum_of\l_block" alt="" coords="897,2438,1039,2479"/>
<area shape="rect" id="node50" href="the__nilfs_8h.html#a0dc161eb6c4f6bad9212b67517b46a37" title="nilfs_get_segment_range" alt="" coords="885,2387,1051,2413"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_ac0bd62c3d3681b821085c55c413aa1bb_icgraph.png" border="0" usemap="#sufile_8h_ac0bd62c3d3681b821085c55c413aa1bb_icgraph" alt=""/></div>
<map name="sufile_8h_ac0bd62c3d3681b821085c55c413aa1bb_icgraph" id="sufile_8h_ac0bd62c3d3681b821085c55c413aa1bb_icgraph">
<area shape="rect" id="node2" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="848,702,955,729"/>
<area shape="rect" id="node12" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="218,793,354,835"/>
<area shape="rect" id="node13" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="196,499,376,526"/>
<area shape="rect" id="node3" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="1065,698,1184,725"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1311,643,1388,670"/>
<area shape="rect" id="node5" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1938,643,2058,670"/>
<area shape="rect" id="node6" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2128,643,2243,670"/>
<area shape="rect" id="node11" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2120,593,2251,619"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="2303,567,2393,594"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="2302,618,2394,645"/>
<area shape="rect" id="node9" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="2299,669,2397,695"/>
<area shape="rect" id="node10" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="2305,719,2391,746"/>
<area shape="rect" id="node14" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="431,182,568,209"/>
<area shape="rect" id="node28" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="434,398,565,425"/>
<area shape="rect" id="node40" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="635,265,753,291"/>
<area shape="rect" id="node42" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="430,499,569,526"/>
<area shape="rect" id="node45" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="430,601,569,643"/>
<area shape="rect" id="node46" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="631,686,757,713"/>
<area shape="rect" id="node47" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="424,550,575,577"/>
<area shape="rect" id="node49" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="441,449,557,475"/>
<area shape="rect" id="node15" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="634,63,754,90"/>
<area shape="rect" id="node26" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="629,140,759,181"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="831,5,972,47"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1054,209,1195,235"/>
<area shape="rect" id="node18" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1260,255,1439,282"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1504,385,1653,427"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1719,275,1876,302"/>
<area shape="rect" id="node25" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1487,268,1671,309"/>
<area shape="rect" id="node20" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="1745,483,1850,510"/>
<area shape="rect" id="node21" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="1739,393,1855,419"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1924,246,2072,273"/>
<area shape="rect" id="node24" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1929,297,2067,339"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1059,260,1191,301"/>
<area shape="rect" id="node29" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="633,366,755,393"/>
<area shape="rect" id="node35" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="637,315,751,342"/>
<area shape="rect" id="node39" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="623,417,765,443"/>
<area shape="rect" id="node30" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="825,355,978,396"/>
<area shape="rect" id="node31" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1037,378,1212,405"/>
<area shape="rect" id="node32" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1311,417,1388,443"/>
<area shape="rect" id="node33" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1526,451,1631,478"/>
<area shape="rect" id="node34" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1520,334,1637,361"/>
<area shape="rect" id="node36" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="830,224,973,265"/>
<area shape="rect" id="node37" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="813,421,989,447"/>
<area shape="rect" id="node38" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="826,289,977,331"/>
<area shape="rect" id="node41" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1057,92,1192,133"/>
<area shape="rect" id="node43" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="1052,589,1197,615"/>
<area shape="rect" id="node44" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="623,519,765,560"/>
<area shape="rect" id="node48" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="840,636,963,677"/>
<area shape="rect" id="node50" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="1052,455,1197,482"/>
</map>
</div>

</div>
</div>
<a id="aa5623f31382355a7f576224994d7e571"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5623f31382355a7f576224994d7e571">&#9670;&nbsp;</a></span>nilfs_sufile_set_error()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_sufile_set_error </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64&#160;</td>
          <td class="paramname"><em>segnum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_sufile_set_error - mark a segment as erroneous : inode of segment usage file : segment number</p>
<p>Description: <a class="el" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571">nilfs_sufile_set_error()</a> marks the segment specified by  as erroneous. The error segment will never be used again.</p>
<p>Return Value: On success, 0 is returned. On error, one of the following negative error codes is returned.</p>
<p>%-EIO - I/O error.</p>
<p>%-ENOMEM - Insufficient amount of memory available.</p>
<p>%-EINVAL - Invalid segment usage number. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_aa5623f31382355a7f576224994d7e571_cgraph.png" border="0" usemap="#sufile_8h_aa5623f31382355a7f576224994d7e571_cgraph" alt=""/></div>
<map name="sufile_8h_aa5623f31382355a7f576224994d7e571_cgraph" id="sufile_8h_aa5623f31382355a7f576224994d7e571_cgraph">
<area shape="rect" id="node2" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="196,1207,327,1233"/>
<area shape="rect" id="node36" href="sufile_8h.html#a7e943e59486cd6176a3317bed589b7c9" title="nilfs_sufile_do_set\l_error" alt="" coords="857,1435,988,1477"/>
<area shape="rect" id="node3" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="375,1232,555,1259"/>
<area shape="rect" id="node6" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1693,1443,1789,1469"/>
<area shape="rect" id="node9" href="sufile_8c.html#a7df3cdff37c5aa00cca3458f1d7d400e" title="nilfs_sufile_get_header\l_block" alt="" coords="1069,601,1224,642"/>
<area shape="rect" id="node12" href="sufile_8c.html#a38f2abf7ef7577b1af4b9e8fc9316727" title="nilfs_sufile_get_segment\l_usage_block" alt="" coords="1063,1174,1230,1215"/>
<area shape="rect" id="node4" href="sufile_8h.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="603,1509,785,1536"/>
<area shape="rect" id="node7" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="623,1737,765,1778"/>
<area shape="rect" id="node8" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="863,1501,982,1528"/>
<area shape="rect" id="node24" href="sufile_8h.html#ae5c9db186be6baf07d66e049a0fd9b9b" title="nilfs_sufile_mark_dirty" alt="" coords="847,1064,999,1091"/>
<area shape="rect" id="node25" href="sufile_8h.html#ac6379742426c30d02072b1a5b0f527f8" title="nilfs_sufile_set_segment\l_usage" alt="" coords="839,1115,1006,1157"/>
<area shape="rect" id="node26" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033" title="nblocks" alt="" coords="1113,2184,1180,2211"/>
<area shape="rect" id="node27" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="625,888,763,915"/>
<area shape="rect" id="node28" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="847,1720,998,1747"/>
<area shape="rect" id="node30" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687" title="nilfs_sufile_set_suinfo" alt="" coords="847,940,998,967"/>
<area shape="rect" id="node32" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="854,477,991,504"/>
<area shape="rect" id="node33" href="sufile_8h.html#acad60c93c0f7f6c3a8a9dc843107f1ed" title="nilfs_sufile_do_scrap" alt="" coords="851,1232,995,1259"/>
<area shape="rect" id="node34" href="sufile_8h.html#a577d0d35a7907909b6c0a139d8cc1704" title="nilfs_sufile_do_free" alt="" coords="855,1283,990,1309"/>
<area shape="rect" id="node35" href="sufile_8h.html#aff87ff4257115842ff3c7940e5f8e769" title="nilfs_sufile_do_cancel_free" alt="" coords="833,1333,1012,1360"/>
<area shape="rect" id="node37" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="631,976,757,1003"/>
<area shape="rect" id="node41" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="865,347,981,373"/>
<area shape="rect" id="node48" href="sufile_8h.html#a202058a1d5a7ee3658e8e7cda1ffee37" title="nilfs_sufile_trim_fs" alt="" coords="857,2028,988,2055"/>
<area shape="rect" id="node5" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="1101,1443,1192,1469"/>
<area shape="rect" id="node15" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="1073,1545,1220,1586"/>
<area shape="rect" id="node17" href="sufile_8c.html#a34ecb984fd0f57101d2ee0b4bde4bf95" title="nilfs_sufile_segment\l_usages_in_block" alt="" coords="1076,1865,1217,1906"/>
<area shape="rect" id="node18" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1295,1291,1417,1317"/>
<area shape="rect" id="node22" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="1075,1123,1218,1149"/>
<area shape="rect" id="node10" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="1287,663,1425,689"/>
<area shape="rect" id="node11" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="1489,663,1635,689"/>
<area shape="rect" id="node13" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="1282,1181,1430,1208"/>
<area shape="rect" id="node14" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="1491,1847,1633,1889"/>
<area shape="rect" id="node16" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="1281,1801,1431,1828"/>
<area shape="rect" id="node19" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1501,1341,1623,1368"/>
<area shape="rect" id="node20" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1495,1240,1629,1267"/>
<area shape="rect" id="node21" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1493,1291,1631,1317"/>
<area shape="rect" id="node23" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1321,397,1391,424"/>
<area shape="rect" id="node29" href="the__nilfs_8h.html#a51bb53199a62a87f269e03404136d00f" title="nilfs_segment_is_active" alt="" coords="1065,2032,1228,2059"/>
<area shape="rect" id="node31" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="1063,1341,1230,1368"/>
<area shape="rect" id="node38" href="the__nilfs_8c.html#aa7bf85e7bb9022b3680b22d945d17f91" title="nilfs_nrsvsegs" alt="" coords="1093,667,1200,693"/>
<area shape="rect" id="node39" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="853,1603,992,1645"/>
<area shape="rect" id="node40" href="the__nilfs_8c.html#a38632ac69509070865038bf0120a1509" title="nilfs_set_nsegments" alt="" coords="851,781,994,808"/>
<area shape="rect" id="node42" href="nilfs2_2inode_8c.html#ae758d8edf633a8af3535ac0af248f1d1" title="nilfs_iget_locked" alt="" coords="1087,245,1206,272"/>
<area shape="rect" id="node43" href="mdt_8c.html#a9d24c6e56a98e581fc30fd8a65841e2a" title="nilfs_mdt_init" alt="" coords="1097,296,1196,323"/>
<area shape="rect" id="node44" href="mdt_8c.html#ae0d853ce1775f22eb93823f6423e6fac" title="nilfs_mdt_set_entry_size" alt="" coords="1479,245,1645,272"/>
<area shape="rect" id="node45" href="nilfs2_2inode_8c.html#affec0e84c605c1d9028332974ba58cd3" title="nilfs_read_inode_common" alt="" coords="1060,397,1233,424"/>
<area shape="rect" id="node46" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="1291,119,1421,145"/>
<area shape="rect" id="node47" href="bad__inode_8c.html#a8c027cf52e2b7669b11b0bfa09bbcd45" title="iget_failed" alt="" coords="1106,144,1187,171"/>
<area shape="rect" id="node49" href="the__nilfs_8h.html#acbe15a8b57f8ecf5e4777294c2f7303d" title="nilfs_get_segnum_of\l_block" alt="" coords="1075,2235,1218,2277"/>
<area shape="rect" id="node50" href="the__nilfs_8h.html#a0dc161eb6c4f6bad9212b67517b46a37" title="nilfs_get_segment_range" alt="" coords="1063,2301,1230,2328"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_aa5623f31382355a7f576224994d7e571_icgraph.png" border="0" usemap="#sufile_8h_aa5623f31382355a7f576224994d7e571_icgraph" alt=""/></div>
<map name="sufile_8h_aa5623f31382355a7f576224994d7e571_icgraph" id="sufile_8h_aa5623f31382355a7f576224994d7e571_icgraph">
<area shape="rect" id="node2" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="196,352,372,379"/>
<area shape="rect" id="node3" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="420,345,552,386"/>
<area shape="rect" id="node4" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="600,352,779,379"/>
<area shape="rect" id="node5" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1454,286,1603,327"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1245,411,1403,437"/>
<area shape="rect" id="node34" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="827,345,1011,386"/>
<area shape="rect" id="node6" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="1675,200,1781,227"/>
<area shape="rect" id="node15" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="1670,301,1786,328"/>
<area shape="rect" id="node7" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1879,149,1999,176"/>
<area shape="rect" id="node8" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2095,107,2209,133"/>
<area shape="rect" id="node13" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2087,208,2217,235"/>
<area shape="rect" id="node9" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="2319,157,2408,184"/>
<area shape="rect" id="node10" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="2317,5,2409,32"/>
<area shape="rect" id="node11" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="2314,56,2413,83"/>
<area shape="rect" id="node12" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="2321,107,2406,133"/>
<area shape="rect" id="node14" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="2325,232,2402,259"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1455,352,1603,379"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1459,403,1598,445"/>
<area shape="rect" id="node30" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1451,469,1607,496"/>
<area shape="rect" id="node18" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096" title="nilfs_ioctl_clean_segments" alt="" coords="1849,352,2028,379"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8c.html#a39d3b93661aea1ce6d75d52641a734f7" title="nilfs_segctor_thread" alt="" coords="1659,411,1797,437"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#accb2af3cf720ef8a382baa244f770a64" title="nilfs_segctor_start\l_thread" alt="" coords="1874,403,2003,445"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8h.html#accc0b22d29c5e0dc0550492c2814845f" title="nilfs_attach_log_writer" alt="" coords="2076,411,2228,437"/>
<area shape="rect" id="node23" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="2630,436,2735,463"/>
<area shape="rect" id="node25" href="nilfs2_2super_8c.html#abaf12a9facc571b7e4e46389a440b694" title="nilfs_remount" alt="" coords="2313,512,2413,539"/>
<area shape="rect" id="node26" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="2276,461,2451,488"/>
<area shape="rect" id="node24" href="nilfs2_2super_8c.html#a6f69bb47bb8193c95863dfa7858e0556" title="nilfs_mount" alt="" coords="2794,499,2883,525"/>
<area shape="rect" id="node27" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="2499,461,2576,488"/>
<area shape="rect" id="node28" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="2624,575,2741,601"/>
<area shape="rect" id="node29" href="nilfs2_2super_8c.html#aa52d92dd32f84052f43449918f769c15" title="nilfs_sync_fs" alt="" coords="2789,575,2888,601"/>
<area shape="rect" id="node31" href="nilfs2_2segment_8c.html#a53eace4b3351e7a47d95a83e02257fda" title="nilfs_segctor_destroy" alt="" coords="1655,469,1801,496"/>
<area shape="rect" id="node32" href="nilfs2_2segment_8h.html#a86ad97768e43fb1c81c962ab7f895fb0" title="nilfs_detach_log_writer" alt="" coords="1861,469,2016,496"/>
<area shape="rect" id="node33" href="nilfs2_2super_8c.html#aa48b8ba2014d88aac606b97a2b09d0ef" title="nilfs_put_super" alt="" coords="2097,563,2207,589"/>
<area shape="rect" id="node35" href="nilfs2_2segment_8h.html#a1907ac7b54882bbf06019eaf6d03c21c" title="nilfs_relax_pressure\l_in_lock" alt="" coords="1059,185,1197,226"/>
<area shape="rect" id="node44" href="nilfs2_2segment_8c.html#a8b69f4181745f44662620421e0f88ab0" title="nilfs_transaction_lock" alt="" coords="1250,352,1398,379"/>
<area shape="rect" id="node36" href="nilfs2_2inode_8c.html#a8a5d71f4673d9c2189dbab1207a8ed89" title="nilfs_truncate_bmap" alt="" coords="1255,149,1393,176"/>
<area shape="rect" id="node37" href="nilfs_8h.html#a09611eebbba5a083ef8bc7e99be0f4a1" title="nilfs_truncate" alt="" coords="1479,99,1579,125"/>
<area shape="rect" id="node43" href="nilfs_8h.html#a83b6688ab0aed44d51559794d660c5ca" title="nilfs_evict_inode" alt="" coords="1469,149,1588,176"/>
<area shape="rect" id="node38" href="nilfs_8h.html#a5c3f5e67f9f8c1d512363b1b93f23d3a" title="nilfs_write_failed" alt="" coords="1669,251,1787,277"/>
<area shape="rect" id="node42" href="nilfs_8h.html#a6397167aefce0988e92601bcc79770d6" title="nilfs_setattr" alt="" coords="1683,99,1773,125"/>
<area shape="rect" id="node39" href="nilfs2_2inode_8c.html#a312da46a81f7b2935058b894b07c327a" title="nilfs_write_begin" alt="" coords="1879,235,1998,261"/>
<area shape="rect" id="node40" href="nilfs2_2recovery_8c.html#a2ee5a3a12c87c9cd4363d28a2c6edb73" title="nilfs_recover_dsync\l_blocks" alt="" coords="1869,286,2008,327"/>
<area shape="rect" id="node41" href="nilfs2_2recovery_8c.html#a2a17f874531cf68d55aecb35d5e54fff" title="nilfs_do_roll_forward" alt="" coords="2081,309,2223,336"/>
</map>
</div>

</div>
</div>
<a id="ac6379742426c30d02072b1a5b0f527f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6379742426c30d02072b1a5b0f527f8">&#9670;&nbsp;</a></span>nilfs_sufile_set_segment_usage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nilfs_sufile_set_segment_usage </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64&#160;</td>
          <td class="paramname"><em>segnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>nblocks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time64_t&#160;</td>
          <td class="paramname"><em>modtime</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>nilfs_sufile_set_segment_usage - set usage of a segment : inode of segment usage file : segment number : number of live blocks in the segment : modification time (option) </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_ac6379742426c30d02072b1a5b0f527f8_cgraph.png" border="0" usemap="#sufile_8h_ac6379742426c30d02072b1a5b0f527f8_cgraph" alt=""/></div>
<map name="sufile_8h_ac6379742426c30d02072b1a5b0f527f8_cgraph" id="sufile_8h_ac6379742426c30d02072b1a5b0f527f8_cgraph">
<area shape="rect" id="node2" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="871,591,967,617"/>
<area shape="rect" id="node3" href="sufile_8c.html#a38f2abf7ef7577b1af4b9e8fc9316727" title="nilfs_sufile_get_segment\l_usage_block" alt="" coords="220,489,387,530"/>
<area shape="rect" id="node24" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1081,173,1204,200"/>
<area shape="rect" id="node41" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="1071,224,1214,251"/>
<area shape="rect" id="node49" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="230,423,377,465"/>
<area shape="rect" id="node4" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="440,380,579,407"/>
<area shape="rect" id="node47" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="435,540,583,567"/>
<area shape="rect" id="node5" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="637,380,783,407"/>
<area shape="rect" id="node18" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="632,329,788,356"/>
<area shape="rect" id="node6" href="mdt_8c.html#a43ded315f7122596d14b88c43fe9c98d" title="nilfs_mdt_submit_block" alt="" coords="840,540,999,567"/>
<area shape="rect" id="node7" href="nilfs2_2page_8c.html#aa4a24cc5a684ba71b9e4423f2ea38970" title="nilfs_grab_buffer" alt="" coords="1083,477,1202,504"/>
<area shape="rect" id="node9" href="buffer_8c.html#a5fc92b2c44523c64e98193eaa4f46541" title="unlock_buffer" alt="" coords="1553,747,1653,773"/>
<area shape="rect" id="node11" href="nilfs2_2bmap_8h.html#a282d60470960949277ac67e31c97f05b" title="nilfs_bmap_lookup" alt="" coords="1077,629,1208,656"/>
<area shape="rect" id="node14" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1339,377,1409,404"/>
<area shape="rect" id="node15" href="buffer_8c.html#ade60786fa99b4fbb4cf607434af395db" title="end_buffer_read_sync" alt="" coords="1067,797,1218,824"/>
<area shape="rect" id="node17" href="buffer_8c.html#ab65df498c54845f497bae7afe9222c91" title="submit_bh" alt="" coords="1562,620,1645,647"/>
<area shape="rect" id="node8" href="nilfs2_2page_8c.html#a051d0268f3af219ba3e2a9ca79a8843c" title="__nilfs_get_page_block" alt="" coords="1295,477,1453,504"/>
<area shape="rect" id="node10" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1754,663,1893,689"/>
<area shape="rect" id="node12" href="nilfs2_2bmap_8h.html#a47e39e91829ba28e44d1b0913f5ef480" title="nilfs_bmap_lookup_at\l_level" alt="" coords="1300,681,1448,722"/>
<area shape="rect" id="node13" href="nilfs2_2bmap_8h.html#abd107e6c373b3d12d3817a32d403001b" title="nilfs_bmap_get_dat" alt="" coords="1307,629,1441,656"/>
<area shape="rect" id="node16" href="buffer_8c.html#a85e290b32d9599acd25df3b159392ab7" title="__end_buffer_read_notouch" alt="" coords="1283,797,1465,824"/>
<area shape="rect" id="node19" href="nilfs_8h.html#aacff7fe9750a849356475b2063b69e3b" title="nilfs_transaction_begin" alt="" coords="842,388,997,415"/>
<area shape="rect" id="node22" href="mdt_8c.html#a759ca943427ead8bb22ecdc82a9338ee" title="nilfs_mdt_insert_new\l_block" alt="" coords="847,322,992,363"/>
<area shape="rect" id="node42" href="nilfs_8h.html#a576ee8d20fe7a5d7c5889cb118fe0533" title="nilfs_transaction_commit" alt="" coords="836,85,1003,112"/>
<area shape="rect" id="node46" href="nilfs_8h.html#a155140033fba0977ed043367001c3384" title="nilfs_transaction_abort" alt="" coords="843,271,996,297"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8c.html#ada0ba1bf162679380f6096c9f83b94ea" title="nilfs_prepare_segment_lock" alt="" coords="1051,376,1235,403"/>
<area shape="rect" id="node21" href="the__nilfs_8c.html#a137faca9117bfef2a2264ccf3a9aa809" title="nilfs_near_disk_full" alt="" coords="1076,427,1209,453"/>
<area shape="rect" id="node23" href="nilfs2_2bmap_8c.html#a4e7fd87b553f99a5d10b2f1d0cbbec0b" title="nilfs_bmap_insert" alt="" coords="1081,275,1205,301"/>
<area shape="rect" id="node25" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1313,60,1435,87"/>
<area shape="rect" id="node27" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1307,173,1441,200"/>
<area shape="rect" id="node26" href="buffer_8c.html#ae236845de65ed065f74eecf8f6ee9742" title="EXPORT_SYMBOL_GPL" alt="" coords="1517,27,1689,53"/>
<area shape="rect" id="node28" href="fs-writeback_8c.html#af5890cdc0a937a4f944928bd1880d49b" title="block_dump___mark_inode\l_dirty" alt="" coords="1513,261,1693,302"/>
<area shape="rect" id="node36" href="fs-writeback_8c.html#ad0ca24311e1c0ba76d3810d240f72b08" title="locked_inode_to_wb\l_and_lock_list" alt="" coords="1533,195,1673,237"/>
<area shape="rect" id="node37" href="fs-writeback_8c.html#a2a36a21e075aa2a912f5c3cb027692cf" title="inode_io_list_move\l_locked" alt="" coords="1537,78,1670,119"/>
<area shape="rect" id="node40" href="fs-writeback_8c.html#a044f1d7ff09b03f639232ec0e6a88ee1" title="EXPORT_SYMBOL" alt="" coords="1534,144,1673,171"/>
<area shape="rect" id="node29" href="dcache_8c.html#a9f042046c19f277000ddfc09b02e3633" title="d_find_alias" alt="" coords="1778,243,1869,269"/>
<area shape="rect" id="node32" href="dcache_8c.html#aebcca358185b5176b69b97e7eab12dfd" title="dput" alt="" coords="1800,293,1847,320"/>
<area shape="rect" id="node30" href="dcache_8c.html#a3eb221591429fdc67dec907c0d09d26a" title="__d_find_alias" alt="" coords="1970,192,2075,219"/>
<area shape="rect" id="node31" href="dcache_8c.html#aeb5ec7bdf3301140d66dd18ae638685c" title="EXPORT_SYMBOL" alt="" coords="1953,243,2092,269"/>
<area shape="rect" id="node33" href="dcache_8c.html#a364a93ebd8b57977a5a90f2076dd8f59" title="fast_dput" alt="" coords="1985,344,2061,371"/>
<area shape="rect" id="node34" href="dcache_8c.html#a689bf4f6109300b7bc021f1641052f99" title="retain_dentry" alt="" coords="2140,344,2237,371"/>
<area shape="rect" id="node35" href="dcache_8c.html#a4a5ea078fab8f6527abb7f44aa88efd3" title="dentry_kill" alt="" coords="1982,293,2063,320"/>
<area shape="rect" id="node38" href="fs-writeback_8c.html#ad9e6fcccf4baffa8e6c91881c6e428a9" title="wb_io_lists_populated" alt="" coords="1748,60,1899,87"/>
<area shape="rect" id="node39" href="fs-writeback_8c.html#aa31b94b7a70c8c8d396a5f0f3e8ef1ec" title="wb_io_lists_depopulated" alt="" coords="1741,111,1905,137"/>
<area shape="rect" id="node43" href="nilfs2_2segment_8c.html#aa55509ef3ea01cc74488f916f1d551f3" title="nilfs_segctor_start\l_timer" alt="" coords="1078,107,1207,149"/>
<area shape="rect" id="node44" href="nilfs2_2segment_8c.html#a23c179e5f28f728a442e31641f71c795" title="nilfs_segctor_do_flush" alt="" coords="1067,5,1219,32"/>
<area shape="rect" id="node45" href="nilfs2_2segment_8c.html#ad8bab60b16b37c93e180e1ea3e1580ad" title="nilfs_construct_segment" alt="" coords="1061,56,1225,83"/>
<area shape="rect" id="node48" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="639,533,781,574"/>
<area shape="rect" id="node50" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="435,481,584,508"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_ac6379742426c30d02072b1a5b0f527f8_icgraph.png" border="0" usemap="#sufile_8h_ac6379742426c30d02072b1a5b0f527f8_icgraph" alt=""/></div>
<map name="sufile_8h_ac6379742426c30d02072b1a5b0f527f8_icgraph" id="sufile_8h_ac6379742426c30d02072b1a5b0f527f8_icgraph">
<area shape="rect" id="node2" href="nilfs2_2segment_8c.html#a5e55835a8c7bac0db60b81df4d707d4e" title="nilfs_segctor_update\l_segusage" alt="" coords="239,889,381,931"/>
<area shape="rect" id="node18" href="nilfs2_2segment_8c.html#a2ad2a278dd41af2f12f1e28a0b61ec8c" title="nilfs_cancel_segusage" alt="" coords="233,838,387,865"/>
<area shape="rect" id="node20" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="220,389,400,415"/>
<area shape="rect" id="node3" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1284,505,1463,531"/>
<area shape="rect" id="node4" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1951,457,2101,499"/>
<area shape="rect" id="node8" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1743,333,1900,359"/>
<area shape="rect" id="node15" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1511,439,1695,480"/>
<area shape="rect" id="node5" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="2379,309,2484,335"/>
<area shape="rect" id="node7" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="2183,482,2299,509"/>
<area shape="rect" id="node6" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="2532,283,2652,310"/>
<area shape="rect" id="node9" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1952,281,2100,307"/>
<area shape="rect" id="node12" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1957,383,2095,424"/>
<area shape="rect" id="node14" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1948,331,2104,358"/>
<area shape="rect" id="node10" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096" title="nilfs_ioctl_clean_segments" alt="" coords="2152,238,2331,265"/>
<area shape="rect" id="node11" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="2393,162,2470,189"/>
<area shape="rect" id="node13" href="nilfs2_2segment_8c.html#a39d3b93661aea1ce6d75d52641a734f7" title="nilfs_segctor_thread" alt="" coords="2172,381,2311,407"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8h.html#a1907ac7b54882bbf06019eaf6d03c21c" title="nilfs_relax_pressure\l_in_lock" alt="" coords="1752,439,1891,480"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8c.html#a8b69f4181745f44662620421e0f88ab0" title="nilfs_transaction_lock" alt="" coords="1747,387,1895,414"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1083,704,1215,745"/>
<area shape="rect" id="node21" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="455,619,592,646"/>
<area shape="rect" id="node26" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="458,543,589,570"/>
<area shape="rect" id="node36" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="452,160,595,201"/>
<area shape="rect" id="node40" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="659,453,777,479"/>
<area shape="rect" id="node42" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="454,226,593,253"/>
<area shape="rect" id="node45" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="454,352,593,393"/>
<area shape="rect" id="node46" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="655,289,781,315"/>
<area shape="rect" id="node47" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="448,109,599,135"/>
<area shape="rect" id="node49" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="465,418,581,445"/>
<area shape="rect" id="node22" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="658,661,778,687"/>
<area shape="rect" id="node25" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="653,720,783,761"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="855,679,996,720"/>
<area shape="rect" id="node24" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1078,569,1219,595"/>
<area shape="rect" id="node27" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="657,503,779,530"/>
<area shape="rect" id="node31" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="661,554,775,581"/>
<area shape="rect" id="node35" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="647,606,789,633"/>
<area shape="rect" id="node28" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="849,431,1002,472"/>
<area shape="rect" id="node29" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1061,410,1236,437"/>
<area shape="rect" id="node30" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1335,379,1412,406"/>
<area shape="rect" id="node32" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="854,496,997,537"/>
<area shape="rect" id="node33" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="837,627,1013,654"/>
<area shape="rect" id="node34" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="850,561,1001,603"/>
<area shape="rect" id="node37" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="872,187,979,214"/>
<area shape="rect" id="node39" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1305,71,1441,112"/>
<area shape="rect" id="node38" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="1543,187,1662,214"/>
<area shape="rect" id="node41" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1081,483,1216,524"/>
<area shape="rect" id="node43" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="1301,137,1446,163"/>
<area shape="rect" id="node44" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="647,223,789,264"/>
<area shape="rect" id="node48" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="1541,15,1664,56"/>
<area shape="rect" id="node50" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="1076,349,1221,375"/>
</map>
</div>

</div>
</div>
<a id="abc30bf95562e00949a44b244e3088687"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc30bf95562e00949a44b244e3088687">&#9670;&nbsp;</a></span>nilfs_sufile_set_suinfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t nilfs_sufile_set_suinfo </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>supsz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nsup</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>nilfs_sufile_set_suinfo - sets segment usage info : inode of segment usage file : array of suinfo_update : byte size of suinfo_update : size of suinfo_update array</p>
<p>Description: Takes an array of nilfs_suinfo_update structs and updates segment usage accordingly. Only the fields indicated by the sup_flags are updated.</p>
<p>Return Value: On success, 0 is returned. On error, one of the following negative error codes is returned.</p>
<p>%-EIO - I/O error.</p>
<p>%-ENOMEM - Insufficient amount of memory available.</p>
<p>%-EINVAL - Invalid values in input (segment number, flags or nblocks) </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_abc30bf95562e00949a44b244e3088687_cgraph.png" border="0" usemap="#sufile_8h_abc30bf95562e00949a44b244e3088687_cgraph" alt=""/></div>
<map name="sufile_8h_abc30bf95562e00949a44b244e3088687_cgraph" id="sufile_8h_abc30bf95562e00949a44b244e3088687_cgraph">
<area shape="rect" id="node2" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1765,877,1861,904"/>
<area shape="rect" id="node3" href="sufile_8c.html#a7df3cdff37c5aa00cca3458f1d7d400e" title="nilfs_sufile_get_header\l_block" alt="" coords="204,563,359,604"/>
<area shape="rect" id="node4" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="421,570,559,597"/>
<area shape="rect" id="node25" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="1547,688,1638,714"/>
<area shape="rect" id="node28" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1071,969,1193,996"/>
<area shape="rect" id="node40" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="1061,629,1203,656"/>
<area shape="rect" id="node46" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="1289,840,1437,866"/>
<area shape="rect" id="node48" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="1059,895,1205,936"/>
<area shape="rect" id="node50" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="407,984,573,1010"/>
<area shape="rect" id="node5" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="627,364,772,390"/>
<area shape="rect" id="node20" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="621,570,777,597"/>
<area shape="rect" id="node6" href="mdt_8c.html#a43ded315f7122596d14b88c43fe9c98d" title="nilfs_mdt_submit_block" alt="" coords="829,208,988,234"/>
<area shape="rect" id="node7" href="nilfs2_2page_8c.html#aa4a24cc5a684ba71b9e4423f2ea38970" title="nilfs_grab_buffer" alt="" coords="1073,309,1191,336"/>
<area shape="rect" id="node11" href="buffer_8c.html#a5fc92b2c44523c64e98193eaa4f46541" title="unlock_buffer" alt="" coords="1543,30,1643,57"/>
<area shape="rect" id="node12" href="nilfs2_2bmap_8h.html#a282d60470960949277ac67e31c97f05b" title="nilfs_bmap_lookup" alt="" coords="1067,208,1197,234"/>
<area shape="rect" id="node15" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1328,578,1399,605"/>
<area shape="rect" id="node16" href="buffer_8c.html#ade60786fa99b4fbb4cf607434af395db" title="end_buffer_read_sync" alt="" coords="1057,81,1207,108"/>
<area shape="rect" id="node18" href="buffer_8c.html#ab65df498c54845f497bae7afe9222c91" title="submit_bh" alt="" coords="1091,157,1173,184"/>
<area shape="rect" id="node8" href="nilfs2_2page_8c.html#a051d0268f3af219ba3e2a9ca79a8843c" title="__nilfs_get_page_block" alt="" coords="1284,350,1443,377"/>
<area shape="rect" id="node9" href="buffer_8c.html#a4844b8163e94b4a214fbf85d86fe88d0" title="create_empty_buffers" alt="" coords="1519,266,1667,293"/>
<area shape="rect" id="node10" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1743,132,1882,158"/>
<area shape="rect" id="node13" href="nilfs2_2bmap_8h.html#a47e39e91829ba28e44d1b0913f5ef480" title="nilfs_bmap_lookup_at\l_level" alt="" coords="1289,284,1437,326"/>
<area shape="rect" id="node14" href="nilfs2_2bmap_8h.html#abd107e6c373b3d12d3817a32d403001b" title="nilfs_bmap_get_dat" alt="" coords="1296,233,1431,260"/>
<area shape="rect" id="node17" href="buffer_8c.html#a85e290b32d9599acd25df3b159392ab7" title="__end_buffer_read_notouch" alt="" coords="1272,30,1455,57"/>
<area shape="rect" id="node19" href="buffer_8c.html#a5fd6f01c5f9cff0945cb999cbefa412d" title="submit_bh_wbc" alt="" coords="1307,182,1420,209"/>
<area shape="rect" id="node21" href="nilfs_8h.html#aacff7fe9750a849356475b2063b69e3b" title="nilfs_transaction_begin" alt="" coords="831,730,986,757"/>
<area shape="rect" id="node26" href="mdt_8c.html#a759ca943427ead8bb22ecdc82a9338ee" title="nilfs_mdt_insert_new\l_block" alt="" coords="836,563,981,604"/>
<area shape="rect" id="node41" href="nilfs_8h.html#a576ee8d20fe7a5d7c5889cb118fe0533" title="nilfs_transaction_commit" alt="" coords="825,448,992,474"/>
<area shape="rect" id="node45" href="nilfs_8h.html#a155140033fba0977ed043367001c3384" title="nilfs_transaction_abort" alt="" coords="832,629,985,656"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8c.html#ada0ba1bf162679380f6096c9f83b94ea" title="nilfs_prepare_segment_lock" alt="" coords="1040,680,1224,706"/>
<area shape="rect" id="node23" href="the__nilfs_8c.html#a137faca9117bfef2a2264ccf3a9aa809" title="nilfs_near_disk_full" alt="" coords="1065,730,1199,757"/>
<area shape="rect" id="node24" href="sufile_8c.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="1272,688,1455,714"/>
<area shape="rect" id="node27" href="nilfs2_2bmap_8c.html#a4e7fd87b553f99a5d10b2f1d0cbbec0b" title="nilfs_bmap_insert" alt="" coords="1070,528,1194,554"/>
<area shape="rect" id="node29" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1303,1008,1424,1034"/>
<area shape="rect" id="node31" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1296,1176,1431,1202"/>
<area shape="rect" id="node30" href="buffer_8c.html#ae236845de65ed065f74eecf8f6ee9742" title="EXPORT_SYMBOL_GPL" alt="" coords="1507,1008,1679,1034"/>
<area shape="rect" id="node32" href="fs-writeback_8c.html#af5890cdc0a937a4f944928bd1880d49b" title="block_dump___mark_inode\l_dirty" alt="" coords="1503,1227,1683,1268"/>
<area shape="rect" id="node35" href="fs-writeback_8c.html#ad0ca24311e1c0ba76d3810d240f72b08" title="locked_inode_to_wb\l_and_lock_list" alt="" coords="1523,1110,1663,1151"/>
<area shape="rect" id="node36" href="fs-writeback_8c.html#a2a36a21e075aa2a912f5c3cb027692cf" title="inode_io_list_move\l_locked" alt="" coords="1526,1292,1659,1334"/>
<area shape="rect" id="node39" href="fs-writeback_8c.html#a044f1d7ff09b03f639232ec0e6a88ee1" title="EXPORT_SYMBOL" alt="" coords="1523,1176,1662,1202"/>
<area shape="rect" id="node33" href="dcache_8c.html#a9f042046c19f277000ddfc09b02e3633" title="d_find_alias" alt="" coords="1767,1188,1858,1214"/>
<area shape="rect" id="node34" href="dcache_8c.html#aebcca358185b5176b69b97e7eab12dfd" title="dput" alt="" coords="1789,1238,1836,1265"/>
<area shape="rect" id="node37" href="fs-writeback_8c.html#ad9e6fcccf4baffa8e6c91881c6e428a9" title="wb_io_lists_populated" alt="" coords="1737,1296,1888,1322"/>
<area shape="rect" id="node38" href="fs-writeback_8c.html#aa31b94b7a70c8c8d396a5f0f3e8ef1ec" title="wb_io_lists_depopulated" alt="" coords="1731,1346,1895,1373"/>
<area shape="rect" id="node42" href="nilfs2_2segment_8c.html#aa55509ef3ea01cc74488f916f1d551f3" title="nilfs_segctor_start\l_timer" alt="" coords="1067,411,1197,452"/>
<area shape="rect" id="node43" href="nilfs2_2segment_8c.html#a23c179e5f28f728a442e31641f71c795" title="nilfs_segctor_do_flush" alt="" coords="1056,477,1208,504"/>
<area shape="rect" id="node44" href="nilfs2_2segment_8c.html#ad8bab60b16b37c93e180e1ea3e1580ad" title="nilfs_construct_segment" alt="" coords="1050,360,1214,386"/>
<area shape="rect" id="node47" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="1522,840,1663,882"/>
<area shape="rect" id="node49" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="1289,902,1438,929"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_abc30bf95562e00949a44b244e3088687_icgraph.png" border="0" usemap="#sufile_8h_abc30bf95562e00949a44b244e3088687_icgraph" alt=""/></div>
<map name="sufile_8h_abc30bf95562e00949a44b244e3088687_icgraph" id="sufile_8h_abc30bf95562e00949a44b244e3088687_icgraph">
<area shape="rect" id="node2" href="nilfs2_2ioctl_8c.html#a879fc213e33210988660173aec449143" title="nilfs_ioctl_set_suinfo" alt="" coords="222,140,366,167"/>
<area shape="rect" id="node11" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="204,331,384,358"/>
<area shape="rect" id="node3" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1319,144,1396,171"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1932,195,2052,222"/>
<area shape="rect" id="node5" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2108,195,2223,222"/>
<area shape="rect" id="node10" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2100,246,2231,272"/>
<area shape="rect" id="node6" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="2283,119,2373,146"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="2282,170,2374,196"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="2279,220,2377,247"/>
<area shape="rect" id="node9" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="2285,271,2371,298"/>
<area shape="rect" id="node12" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="439,382,576,408"/>
<area shape="rect" id="node24" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="442,507,573,534"/>
<area shape="rect" id="node36" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="436,73,579,114"/>
<area shape="rect" id="node40" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="643,544,761,571"/>
<area shape="rect" id="node42" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="438,280,577,307"/>
<area shape="rect" id="node45" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="438,214,577,256"/>
<area shape="rect" id="node46" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="639,151,765,178"/>
<area shape="rect" id="node47" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="432,331,583,358"/>
<area shape="rect" id="node49" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="449,558,565,584"/>
<area shape="rect" id="node13" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="642,370,762,396"/>
<area shape="rect" id="node22" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="637,421,767,462"/>
<area shape="rect" id="node14" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="839,293,980,334"/>
<area shape="rect" id="node15" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1062,418,1203,444"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1268,491,1447,518"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1512,338,1661,380"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1727,564,1884,591"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1495,542,1679,584"/>
<area shape="rect" id="node18" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="1753,195,1858,222"/>
<area shape="rect" id="node19" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="1747,346,1863,372"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1067,484,1199,525"/>
<area shape="rect" id="node25" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="641,659,763,686"/>
<area shape="rect" id="node31" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="645,494,759,520"/>
<area shape="rect" id="node35" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="631,595,773,622"/>
<area shape="rect" id="node26" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="833,696,986,737"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1045,703,1220,730"/>
<area shape="rect" id="node28" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1319,703,1396,730"/>
<area shape="rect" id="node29" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1534,703,1639,730"/>
<area shape="rect" id="node30" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1528,638,1645,664"/>
<area shape="rect" id="node32" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="838,528,981,569"/>
<area shape="rect" id="node33" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="821,594,997,620"/>
<area shape="rect" id="node34" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="834,410,985,452"/>
<area shape="rect" id="node37" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="856,50,963,76"/>
<area shape="rect" id="node39" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1065,105,1201,146"/>
<area shape="rect" id="node38" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="1073,51,1192,78"/>
<area shape="rect" id="node41" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1065,600,1200,641"/>
<area shape="rect" id="node43" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="837,183,982,210"/>
<area shape="rect" id="node44" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="631,253,773,294"/>
<area shape="rect" id="node48" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="1071,234,1194,276"/>
<area shape="rect" id="node50" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="837,762,982,788"/>
</map>
</div>

</div>
</div>
<a id="a202058a1d5a7ee3658e8e7cda1ffee37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a202058a1d5a7ee3658e8e7cda1ffee37">&#9670;&nbsp;</a></span>nilfs_sufile_trim_fs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nilfs_sufile_trim_fs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct fstrim_range *&#160;</td>
          <td class="paramname"><em>range</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="sufile_8c.html#a202058a1d5a7ee3658e8e7cda1ffee37">nilfs_sufile_trim_fs()</a> - trim ioctl handle function : inode of segment usage file : fstrim_range structure</p>
<p>start: First Byte to trim len: number of Bytes to trim from start minlen: minimum extent length in Bytes</p>
<p>Decription: nilfs_sufile_trim_fs goes through all segments containing bytes from start to start+len. start is rounded up to the next block boundary and start+len is rounded down. For each clean segment blkdev_issue_discard function is invoked.</p>
<p>Return Value: On success, 0 is returned or negative error code, otherwise. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_a202058a1d5a7ee3658e8e7cda1ffee37_cgraph.png" border="0" usemap="#sufile_8h_a202058a1d5a7ee3658e8e7cda1ffee37_cgraph" alt=""/></div>
<map name="sufile_8h_a202058a1d5a7ee3658e8e7cda1ffee37_cgraph" id="sufile_8h_a202058a1d5a7ee3658e8e7cda1ffee37_cgraph">
<area shape="rect" id="node2" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="821,195,917,222"/>
<area shape="rect" id="node3" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033" title="nblocks" alt="" coords="234,71,301,98"/>
<area shape="rect" id="node4" href="the__nilfs_8h.html#acbe15a8b57f8ecf5e4777294c2f7303d" title="nilfs_get_segnum_of\l_block" alt="" coords="196,123,339,164"/>
<area shape="rect" id="node5" href="sufile_8c.html#a34ecb984fd0f57101d2ee0b4bde4bf95" title="nilfs_sufile_segment\l_usages_in_block" alt="" coords="197,188,338,229"/>
<area shape="rect" id="node8" href="sufile_8c.html#a38f2abf7ef7577b1af4b9e8fc9316727" title="nilfs_sufile_get_segment\l_usage_block" alt="" coords="184,305,351,347"/>
<area shape="rect" id="node49" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="194,5,341,47"/>
<area shape="rect" id="node50" href="the__nilfs_8h.html#a0dc161eb6c4f6bad9212b67517b46a37" title="nilfs_get_segment_range" alt="" coords="184,371,351,398"/>
<area shape="rect" id="node6" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="598,188,739,229"/>
<area shape="rect" id="node7" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="399,139,548,166"/>
<area shape="rect" id="node9" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="404,355,543,382"/>
<area shape="rect" id="node48" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="399,305,547,331"/>
<area shape="rect" id="node10" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="596,485,741,511"/>
<area shape="rect" id="node30" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="791,301,947,327"/>
<area shape="rect" id="node11" href="mdt_8c.html#a43ded315f7122596d14b88c43fe9c98d" title="nilfs_mdt_submit_block" alt="" coords="789,689,948,715"/>
<area shape="rect" id="node12" href="nilfs2_2page_8c.html#aa4a24cc5a684ba71b9e4423f2ea38970" title="nilfs_grab_buffer" alt="" coords="1020,399,1139,426"/>
<area shape="rect" id="node18" href="buffer_8c.html#a5fc92b2c44523c64e98193eaa4f46541" title="unlock_buffer" alt="" coords="1484,882,1584,909"/>
<area shape="rect" id="node19" href="nilfs2_2bmap_8h.html#a282d60470960949277ac67e31c97f05b" title="nilfs_bmap_lookup" alt="" coords="1014,773,1145,799"/>
<area shape="rect" id="node25" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1499,391,1569,418"/>
<area shape="rect" id="node26" href="buffer_8c.html#ade60786fa99b4fbb4cf607434af395db" title="end_buffer_read_sync" alt="" coords="1004,933,1155,959"/>
<area shape="rect" id="node28" href="buffer_8c.html#ab65df498c54845f497bae7afe9222c91" title="submit_bh" alt="" coords="1038,689,1121,715"/>
<area shape="rect" id="node13" href="nilfs2_2page_8c.html#a051d0268f3af219ba3e2a9ca79a8843c" title="__nilfs_get_page_block" alt="" coords="1223,551,1382,578"/>
<area shape="rect" id="node14" href="buffer_8c.html#a4844b8163e94b4a214fbf85d86fe88d0" title="create_empty_buffers" alt="" coords="1460,675,1608,702"/>
<area shape="rect" id="node16" href="page_8h.html#aaad58f68fa9675f7e9803744d0e3f414" title="nilfs_page_get_nth\l_block" alt="" coords="1469,544,1599,585"/>
<area shape="rect" id="node17" href="buffer_8c.html#a59a45ba914a951c36f0cabe79be9756b" title="touch_buffer" alt="" coords="1487,493,1581,519"/>
<area shape="rect" id="node15" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1673,701,1812,727"/>
<area shape="rect" id="node20" href="nilfs2_2bmap_8h.html#a47e39e91829ba28e44d1b0913f5ef480" title="nilfs_bmap_lookup_at\l_level" alt="" coords="1229,765,1377,807"/>
<area shape="rect" id="node24" href="nilfs2_2bmap_8h.html#abd107e6c373b3d12d3817a32d403001b" title="nilfs_bmap_get_dat" alt="" coords="1235,831,1370,858"/>
<area shape="rect" id="node21" href="nilfs2_2bmap_8c.html#a7a7ea41075313d317e5036ebc1fbbe3b" title="nilfs_bmap_convert\l_error" alt="" coords="1467,609,1601,651"/>
<area shape="rect" id="node22" href="dat_8c.html#a1641d48ed89a1de35dda5513abd31cc3" title="nilfs_dat_translate" alt="" coords="1470,827,1598,854"/>
<area shape="rect" id="node23" href="nilfs2_2bmap_8c.html#aef6e9d2acff7b7d161389bb790483d06" title="nilfs_bmap_get_dat" alt="" coords="1467,777,1601,803"/>
<area shape="rect" id="node27" href="buffer_8c.html#a85e290b32d9599acd25df3b159392ab7" title="__end_buffer_read_notouch" alt="" coords="1211,933,1394,959"/>
<area shape="rect" id="node29" href="buffer_8c.html#a5fd6f01c5f9cff0945cb999cbefa412d" title="submit_bh_wbc" alt="" coords="1246,663,1359,690"/>
<area shape="rect" id="node31" href="nilfs_8h.html#aacff7fe9750a849356475b2063b69e3b" title="nilfs_transaction_begin" alt="" coords="1002,250,1157,277"/>
<area shape="rect" id="node35" href="mdt_8c.html#a759ca943427ead8bb22ecdc82a9338ee" title="nilfs_mdt_insert_new\l_block" alt="" coords="1007,333,1152,375"/>
<area shape="rect" id="node42" href="nilfs_8h.html#a576ee8d20fe7a5d7c5889cb118fe0533" title="nilfs_transaction_commit" alt="" coords="996,127,1163,154"/>
<area shape="rect" id="node47" href="nilfs_8h.html#a155140033fba0977ed043367001c3384" title="nilfs_transaction_abort" alt="" coords="1003,199,1156,226"/>
<area shape="rect" id="node32" href="nilfs2_2segment_8c.html#ada0ba1bf162679380f6096c9f83b94ea" title="nilfs_prepare_segment_lock" alt="" coords="1211,239,1395,266"/>
<area shape="rect" id="node33" href="the__nilfs_8c.html#a137faca9117bfef2a2264ccf3a9aa809" title="nilfs_near_disk_full" alt="" coords="1236,189,1369,215"/>
<area shape="rect" id="node34" href="sufile_8c.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="1443,189,1625,215"/>
<area shape="rect" id="node36" href="nilfs2_2bmap_8c.html#a4e7fd87b553f99a5d10b2f1d0cbbec0b" title="nilfs_bmap_insert" alt="" coords="1241,501,1365,527"/>
<area shape="rect" id="node38" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1241,290,1364,317"/>
<area shape="rect" id="node41" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="1231,391,1374,418"/>
<area shape="rect" id="node37" href="nilfs2_2bmap_8c.html#ac5f71baa604f8d2043ceb4c11aa72ff3" title="nilfs_bmap_do_insert" alt="" coords="1461,442,1607,469"/>
<area shape="rect" id="node39" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1473,239,1595,266"/>
<area shape="rect" id="node40" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1467,290,1601,317"/>
<area shape="rect" id="node43" href="nilfs2_2segment_8c.html#aa55509ef3ea01cc74488f916f1d551f3" title="nilfs_segctor_start\l_timer" alt="" coords="1238,21,1367,63"/>
<area shape="rect" id="node44" href="nilfs2_2segment_8c.html#a23c179e5f28f728a442e31641f71c795" title="nilfs_segctor_do_flush" alt="" coords="1227,87,1379,114"/>
<area shape="rect" id="node45" href="nilfs2_2segment_8c.html#ad8bab60b16b37c93e180e1ea3e1580ad" title="nilfs_construct_segment" alt="" coords="1221,138,1385,165"/>
<area shape="rect" id="node46" href="nilfs2_2segment_8c.html#aece5ba8b7c1a8df29083370bfb0f3aad" title="nilfs_segctor_sync" alt="" coords="1469,138,1599,165"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_a202058a1d5a7ee3658e8e7cda1ffee37_icgraph.png" border="0" usemap="#sufile_8h_a202058a1d5a7ee3658e8e7cda1ffee37_icgraph" alt=""/></div>
<map name="sufile_8h_a202058a1d5a7ee3658e8e7cda1ffee37_icgraph" id="sufile_8h_a202058a1d5a7ee3658e8e7cda1ffee37_icgraph">
<area shape="rect" id="node2" href="nilfs2_2ioctl_8c.html#a8913a80e32e55bd55c20461949a3e6b6" title="nilfs_ioctl_trim_fs" alt="" coords="212,140,336,167"/>
<area shape="rect" id="node11" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="184,331,364,358"/>
<area shape="rect" id="node3" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1299,144,1376,171"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1912,195,2032,222"/>
<area shape="rect" id="node5" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2088,195,2203,222"/>
<area shape="rect" id="node10" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2080,246,2211,272"/>
<area shape="rect" id="node6" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="2263,119,2353,146"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="2262,170,2354,196"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="2259,220,2357,247"/>
<area shape="rect" id="node9" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="2265,271,2351,298"/>
<area shape="rect" id="node12" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="419,382,556,408"/>
<area shape="rect" id="node24" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="422,507,553,534"/>
<area shape="rect" id="node36" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="416,73,559,114"/>
<area shape="rect" id="node40" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="623,544,741,571"/>
<area shape="rect" id="node42" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="418,280,557,307"/>
<area shape="rect" id="node45" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="418,214,557,256"/>
<area shape="rect" id="node46" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="619,151,745,178"/>
<area shape="rect" id="node47" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="412,331,563,358"/>
<area shape="rect" id="node49" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="429,558,545,584"/>
<area shape="rect" id="node13" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="622,370,742,396"/>
<area shape="rect" id="node22" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="617,421,747,462"/>
<area shape="rect" id="node14" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="819,293,960,334"/>
<area shape="rect" id="node15" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1042,418,1183,444"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1248,491,1427,518"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1492,338,1641,380"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1707,564,1864,591"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1475,542,1659,584"/>
<area shape="rect" id="node18" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="1733,195,1838,222"/>
<area shape="rect" id="node19" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="1727,346,1843,372"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1047,484,1179,525"/>
<area shape="rect" id="node25" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="621,659,743,686"/>
<area shape="rect" id="node31" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="625,494,739,520"/>
<area shape="rect" id="node35" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="611,595,753,622"/>
<area shape="rect" id="node26" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="813,696,966,737"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1025,703,1200,730"/>
<area shape="rect" id="node28" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1299,703,1376,730"/>
<area shape="rect" id="node29" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1514,703,1619,730"/>
<area shape="rect" id="node30" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1508,638,1625,664"/>
<area shape="rect" id="node32" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="818,528,961,569"/>
<area shape="rect" id="node33" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="801,594,977,620"/>
<area shape="rect" id="node34" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="814,410,965,452"/>
<area shape="rect" id="node37" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="836,50,943,76"/>
<area shape="rect" id="node39" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1045,105,1181,146"/>
<area shape="rect" id="node38" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="1053,51,1172,78"/>
<area shape="rect" id="node41" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1045,600,1180,641"/>
<area shape="rect" id="node43" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="817,183,962,210"/>
<area shape="rect" id="node44" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="611,253,753,294"/>
<area shape="rect" id="node48" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="1051,234,1174,276"/>
<area shape="rect" id="node50" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="817,762,962,788"/>
</map>
</div>

</div>
</div>
<a id="a954be8e038b533c82c78cf5250e56cbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a954be8e038b533c82c78cf5250e56cbe">&#9670;&nbsp;</a></span>nilfs_sufile_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nilfs_sufile_update </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *, __u64, struct buffer_head *, struct buffer_head *)&#160;</td>
          <td class="paramname"><em>dofunc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_a954be8e038b533c82c78cf5250e56cbe_cgraph.png" border="0" usemap="#sufile_8h_a954be8e038b533c82c78cf5250e56cbe_cgraph" alt=""/></div>
<map name="sufile_8h_a954be8e038b533c82c78cf5250e56cbe_cgraph" id="sufile_8h_a954be8e038b533c82c78cf5250e56cbe_cgraph">
<area shape="rect" id="node2" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="184,1041,364,1068"/>
<area shape="rect" id="node5" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1509,971,1605,997"/>
<area shape="rect" id="node8" href="sufile_8c.html#a7df3cdff37c5aa00cca3458f1d7d400e" title="nilfs_sufile_get_header\l_block" alt="" coords="879,550,1033,591"/>
<area shape="rect" id="node12" href="sufile_8c.html#a38f2abf7ef7577b1af4b9e8fc9316727" title="nilfs_sufile_get_segment\l_usage_block" alt="" coords="873,1915,1039,1957"/>
<area shape="rect" id="node3" href="sufile_8h.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="412,895,595,921"/>
<area shape="rect" id="node6" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="432,826,575,867"/>
<area shape="rect" id="node7" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="673,920,791,947"/>
<area shape="rect" id="node24" href="sufile_8h.html#ae5c9db186be6baf07d66e049a0fd9b9b" title="nilfs_sufile_mark_dirty" alt="" coords="656,1759,808,1785"/>
<area shape="rect" id="node25" href="sufile_8h.html#ac6379742426c30d02072b1a5b0f527f8" title="nilfs_sufile_set_segment\l_usage" alt="" coords="649,1625,815,1666"/>
<area shape="rect" id="node26" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033" title="nblocks" alt="" coords="923,2235,989,2261"/>
<area shape="rect" id="node27" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="434,947,573,973"/>
<area shape="rect" id="node28" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="657,1843,807,1869"/>
<area shape="rect" id="node30" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687" title="nilfs_sufile_set_suinfo" alt="" coords="657,768,807,795"/>
<area shape="rect" id="node32" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="663,505,801,532"/>
<area shape="rect" id="node33" href="sufile_8h.html#acad60c93c0f7f6c3a8a9dc843107f1ed" title="nilfs_sufile_do_scrap" alt="" coords="660,1240,804,1267"/>
<area shape="rect" id="node34" href="sufile_8h.html#a577d0d35a7907909b6c0a139d8cc1704" title="nilfs_sufile_do_free" alt="" coords="665,1072,799,1099"/>
<area shape="rect" id="node35" href="sufile_8h.html#aff87ff4257115842ff3c7940e5f8e769" title="nilfs_sufile_do_cancel_free" alt="" coords="643,1123,821,1149"/>
<area shape="rect" id="node36" href="sufile_8h.html#a7e943e59486cd6176a3317bed589b7c9" title="nilfs_sufile_do_set\l_error" alt="" coords="667,1174,797,1215"/>
<area shape="rect" id="node37" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="440,1295,567,1321"/>
<area shape="rect" id="node41" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="674,271,790,297"/>
<area shape="rect" id="node48" href="sufile_8h.html#a202058a1d5a7ee3658e8e7cda1ffee37" title="nilfs_sufile_trim_fs" alt="" coords="667,2125,797,2152"/>
<area shape="rect" id="node4" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="911,920,1001,947"/>
<area shape="rect" id="node15" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="883,1326,1029,1367"/>
<area shape="rect" id="node17" href="sufile_8c.html#a34ecb984fd0f57101d2ee0b4bde4bf95" title="nilfs_sufile_segment\l_usages_in_block" alt="" coords="885,1747,1027,1789"/>
<area shape="rect" id="node18" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1113,1173,1235,1200"/>
<area shape="rect" id="node22" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="885,1224,1027,1251"/>
<area shape="rect" id="node9" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="1105,561,1243,588"/>
<area shape="rect" id="node10" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="1311,587,1456,613"/>
<area shape="rect" id="node11" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="1305,536,1461,563"/>
<area shape="rect" id="node13" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="1100,869,1248,896"/>
<area shape="rect" id="node14" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="1313,1710,1454,1751"/>
<area shape="rect" id="node16" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="1099,1797,1249,1824"/>
<area shape="rect" id="node19" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1323,1123,1444,1149"/>
<area shape="rect" id="node20" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1316,1173,1451,1200"/>
<area shape="rect" id="node21" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1314,1224,1453,1251"/>
<area shape="rect" id="node23" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1139,296,1209,323"/>
<area shape="rect" id="node29" href="the__nilfs_8h.html#a51bb53199a62a87f269e03404136d00f" title="nilfs_segment_is_active" alt="" coords="875,1864,1037,1891"/>
<area shape="rect" id="node31" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="873,1123,1039,1149"/>
<area shape="rect" id="node38" href="the__nilfs_8c.html#aa7bf85e7bb9022b3680b22d945d17f91" title="nilfs_nrsvsegs" alt="" coords="903,1443,1009,1469"/>
<area shape="rect" id="node39" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="663,1545,801,1586"/>
<area shape="rect" id="node40" href="the__nilfs_8c.html#a38632ac69509070865038bf0120a1509" title="nilfs_set_nsegments" alt="" coords="661,1392,803,1419"/>
<area shape="rect" id="node42" href="nilfs2_2inode_8c.html#ae758d8edf633a8af3535ac0af248f1d1" title="nilfs_iget_locked" alt="" coords="897,195,1015,221"/>
<area shape="rect" id="node43" href="mdt_8c.html#a9d24c6e56a98e581fc30fd8a65841e2a" title="nilfs_mdt_init" alt="" coords="907,144,1005,171"/>
<area shape="rect" id="node44" href="mdt_8c.html#ae0d853ce1775f22eb93823f6423e6fac" title="nilfs_mdt_set_entry_size" alt="" coords="1091,245,1257,272"/>
<area shape="rect" id="node45" href="nilfs2_2inode_8c.html#affec0e84c605c1d9028332974ba58cd3" title="nilfs_read_inode_common" alt="" coords="869,296,1043,323"/>
<area shape="rect" id="node46" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="1109,68,1239,95"/>
<area shape="rect" id="node47" href="bad__inode_8c.html#a8c027cf52e2b7669b11b0bfa09bbcd45" title="iget_failed" alt="" coords="915,93,997,120"/>
<area shape="rect" id="node49" href="the__nilfs_8h.html#acbe15a8b57f8ecf5e4777294c2f7303d" title="nilfs_get_segnum_of\l_block" alt="" coords="885,2337,1027,2378"/>
<area shape="rect" id="node50" href="the__nilfs_8h.html#a0dc161eb6c4f6bad9212b67517b46a37" title="nilfs_get_segment_range" alt="" coords="873,2285,1039,2312"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_a954be8e038b533c82c78cf5250e56cbe_icgraph.png" border="0" usemap="#sufile_8h_a954be8e038b533c82c78cf5250e56cbe_icgraph" alt=""/></div>
<map name="sufile_8h_a954be8e038b533c82c78cf5250e56cbe_icgraph" id="sufile_8h_a954be8e038b533c82c78cf5250e56cbe_icgraph">
<area shape="rect" id="node2" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="184,470,364,497"/>
<area shape="rect" id="node46" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="213,181,335,207"/>
<area shape="rect" id="node47" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="431,115,544,142"/>
<area shape="rect" id="node50" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="203,69,345,95"/>
<area shape="rect" id="node3" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="419,369,556,395"/>
<area shape="rect" id="node24" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="416,572,559,613"/>
<area shape="rect" id="node28" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="428,318,547,345"/>
<area shape="rect" id="node37" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="418,470,557,497"/>
<area shape="rect" id="node40" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="418,717,557,759"/>
<area shape="rect" id="node41" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="635,726,762,753"/>
<area shape="rect" id="node42" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="412,521,563,547"/>
<area shape="rect" id="node44" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="429,419,545,446"/>
<area shape="rect" id="node4" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="639,305,759,331"/>
<area shape="rect" id="node22" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="634,239,763,280"/>
<area shape="rect" id="node5" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="851,289,993,331"/>
<area shape="rect" id="node6" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1057,238,1199,265"/>
<area shape="rect" id="node7" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1247,258,1425,285"/>
<area shape="rect" id="node8" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1914,269,2063,311"/>
<area shape="rect" id="node15" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1705,386,1863,413"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1473,269,1657,311"/>
<area shape="rect" id="node9" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="2123,346,2229,373"/>
<area shape="rect" id="node14" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="2118,277,2234,303"/>
<area shape="rect" id="node10" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="2285,363,2405,390"/>
<area shape="rect" id="node11" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2461,363,2576,390"/>
<area shape="rect" id="node12" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2453,414,2584,441"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="2632,541,2709,567"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1915,386,2063,413"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1919,437,2058,479"/>
<area shape="rect" id="node18" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1911,335,2067,362"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8h.html#a1907ac7b54882bbf06019eaf6d03c21c" title="nilfs_relax_pressure\l_in_lock" alt="" coords="1715,269,1853,311"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a8b69f4181745f44662620421e0f88ab0" title="nilfs_transaction_lock" alt="" coords="1710,335,1858,362"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="856,5,988,47"/>
<area shape="rect" id="node25" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="869,691,975,718"/>
<area shape="rect" id="node27" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1060,625,1196,667"/>
<area shape="rect" id="node26" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="2286,690,2405,717"/>
<area shape="rect" id="node29" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="622,173,775,215"/>
<area shape="rect" id="node35" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1061,311,1195,352"/>
<area shape="rect" id="node36" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="627,108,770,149"/>
<area shape="rect" id="node30" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="835,187,1009,214"/>
<area shape="rect" id="node31" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1089,390,1167,417"/>
<area shape="rect" id="node32" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1283,437,1389,463"/>
<area shape="rect" id="node34" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1277,386,1395,413"/>
<area shape="rect" id="node33" href="nilfs2_2super_8c.html#a6f69bb47bb8193c95863dfa7858e0556" title="nilfs_mount" alt="" coords="1521,437,1610,463"/>
<area shape="rect" id="node38" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="1493,519,1638,546"/>
<area shape="rect" id="node39" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="627,457,770,499"/>
<area shape="rect" id="node43" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="2115,567,2237,608"/>
<area shape="rect" id="node45" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="849,406,995,433"/>
<area shape="rect" id="node48" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="611,6,787,33"/>
<area shape="rect" id="node49" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="847,71,997,112"/>
</map>
</div>

</div>
</div>
<a id="a4f79159d2c1037184f20a9ed3a5f410a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f79159d2c1037184f20a9ed3a5f410a">&#9670;&nbsp;</a></span>nilfs_sufile_updatev()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nilfs_sufile_updatev </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64 *&#160;</td>
          <td class="paramname"><em>segnumv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nsegs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>create</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>ndone</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *, __u64, struct buffer_head *, struct buffer_head *)&#160;</td>
          <td class="paramname"><em>dofunc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>nilfs_sufile_updatev - modify multiple segment usages at a time : inode of segment usage file : array of segment numbers : size of  array : creation flag : place to store number of modified segments on  : primitive operation for the update</p>
<p>Description: <a class="el" href="sufile_8c.html#ab23fa738fd953c9957776612e1317492">nilfs_sufile_updatev()</a> repeatedly calls  against the given array of segments. The  is called with buffers of a header block and the sufile block in which the target segment usage entry is contained. If  is given, the number of successfully modified segments from the head is stored in the place  points to.</p>
<p>Return Value: On success, zero is returned. On error, one of the following negative error codes is returned.</p>
<p>%-EIO - I/O error.</p>
<p>%-ENOMEM - Insufficient amount of memory available.</p>
<p>%-ENOENT - Given segment usage is in hole block (may be returned if  is zero)</p>
<p>%-EINVAL - Invalid segment usage number </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_a4f79159d2c1037184f20a9ed3a5f410a_cgraph.png" border="0" usemap="#sufile_8h_a4f79159d2c1037184f20a9ed3a5f410a_cgraph" alt=""/></div>
<map name="sufile_8h_a4f79159d2c1037184f20a9ed3a5f410a_cgraph" id="sufile_8h_a4f79159d2c1037184f20a9ed3a5f410a_cgraph">
<area shape="rect" id="node2" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1541,1483,1637,1510"/>
<area shape="rect" id="node3" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="191,1311,371,1338"/>
<area shape="rect" id="node8" href="sufile_8c.html#a7df3cdff37c5aa00cca3458f1d7d400e" title="nilfs_sufile_get_header\l_block" alt="" coords="885,676,1040,717"/>
<area shape="rect" id="node9" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="1103,724,1241,751"/>
<area shape="rect" id="node19" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="1098,1984,1246,2011"/>
<area shape="rect" id="node4" href="sufile_8h.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="419,1640,601,1667"/>
<area shape="rect" id="node6" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="439,1425,581,1466"/>
<area shape="rect" id="node7" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="679,1347,798,1374"/>
<area shape="rect" id="node24" href="sufile_8h.html#ae5c9db186be6baf07d66e049a0fd9b9b" title="nilfs_sufile_mark_dirty" alt="" coords="663,726,815,752"/>
<area shape="rect" id="node25" href="sufile_8h.html#ac6379742426c30d02072b1a5b0f527f8" title="nilfs_sufile_set_segment\l_usage" alt="" coords="655,1230,822,1272"/>
<area shape="rect" id="node26" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033" title="nblocks" alt="" coords="929,843,996,870"/>
<area shape="rect" id="node27" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="441,943,579,970"/>
<area shape="rect" id="node28" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="663,1840,814,1867"/>
<area shape="rect" id="node30" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687" title="nilfs_sufile_set_suinfo" alt="" coords="663,2076,814,2103"/>
<area shape="rect" id="node32" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="673,1120,804,1147"/>
<area shape="rect" id="node33" href="sufile_8h.html#acad60c93c0f7f6c3a8a9dc843107f1ed" title="nilfs_sufile_do_scrap" alt="" coords="667,2323,811,2350"/>
<area shape="rect" id="node34" href="sufile_8h.html#a577d0d35a7907909b6c0a139d8cc1704" title="nilfs_sufile_do_free" alt="" coords="671,2471,806,2498"/>
<area shape="rect" id="node35" href="sufile_8h.html#aff87ff4257115842ff3c7940e5f8e769" title="nilfs_sufile_do_cancel_free" alt="" coords="649,2266,828,2292"/>
<area shape="rect" id="node36" href="sufile_8h.html#a7e943e59486cd6176a3317bed589b7c9" title="nilfs_sufile_do_set\l_error" alt="" coords="673,2152,804,2193"/>
<area shape="rect" id="node37" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="447,650,573,676"/>
<area shape="rect" id="node41" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="681,270,797,296"/>
<area shape="rect" id="node48" href="sufile_8h.html#a202058a1d5a7ee3658e8e7cda1ffee37" title="nilfs_sufile_trim_fs" alt="" coords="673,1171,804,1198"/>
<area shape="rect" id="node5" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="917,1904,1008,1931"/>
<area shape="rect" id="node16" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1726,2503,1849,2530"/>
<area shape="rect" id="node17" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="1716,1011,1859,1038"/>
<area shape="rect" id="node18" href="sufile_8c.html#a38f2abf7ef7577b1af4b9e8fc9316727" title="nilfs_sufile_get_segment\l_usage_block" alt="" coords="879,1164,1046,1205"/>
<area shape="rect" id="node21" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="889,2057,1036,2098"/>
<area shape="rect" id="node23" href="sufile_8c.html#a34ecb984fd0f57101d2ee0b4bde4bf95" title="nilfs_sufile_segment\l_usages_in_block" alt="" coords="892,1585,1033,1626"/>
<area shape="rect" id="node10" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="1305,652,1451,679"/>
<area shape="rect" id="node13" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="1300,728,1456,755"/>
<area shape="rect" id="node11" href="mdt_8c.html#a43ded315f7122596d14b88c43fe9c98d" title="nilfs_mdt_submit_block" alt="" coords="1509,640,1668,667"/>
<area shape="rect" id="node12" href="nilfs2_2page_8c.html#aa4a24cc5a684ba71b9e4423f2ea38970" title="nilfs_grab_buffer" alt="" coords="1728,666,1847,692"/>
<area shape="rect" id="node14" href="nilfs_8h.html#aacff7fe9750a849356475b2063b69e3b" title="nilfs_transaction_begin" alt="" coords="1511,742,1666,768"/>
<area shape="rect" id="node15" href="mdt_8c.html#a759ca943427ead8bb22ecdc82a9338ee" title="nilfs_mdt_insert_new\l_block" alt="" coords="1516,793,1661,834"/>
<area shape="rect" id="node20" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="1307,1693,1449,1734"/>
<area shape="rect" id="node22" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="1097,1755,1247,1782"/>
<area shape="rect" id="node29" href="the__nilfs_8h.html#a51bb53199a62a87f269e03404136d00f" title="nilfs_segment_is_active" alt="" coords="881,1803,1044,1830"/>
<area shape="rect" id="node31" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="879,2478,1046,2504"/>
<area shape="rect" id="node38" href="the__nilfs_8c.html#aa7bf85e7bb9022b3680b22d945d17f91" title="nilfs_nrsvsegs" alt="" coords="909,422,1016,448"/>
<area shape="rect" id="node39" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="669,1526,808,1568"/>
<area shape="rect" id="node40" href="the__nilfs_8c.html#a38632ac69509070865038bf0120a1509" title="nilfs_set_nsegments" alt="" coords="667,371,810,398"/>
<area shape="rect" id="node42" href="nilfs2_2inode_8c.html#ae758d8edf633a8af3535ac0af248f1d1" title="nilfs_iget_locked" alt="" coords="903,168,1022,195"/>
<area shape="rect" id="node43" href="mdt_8c.html#a9d24c6e56a98e581fc30fd8a65841e2a" title="nilfs_mdt_init" alt="" coords="913,219,1012,246"/>
<area shape="rect" id="node44" href="mdt_8c.html#ae0d853ce1775f22eb93823f6423e6fac" title="nilfs_mdt_set_entry_size" alt="" coords="1295,960,1461,987"/>
<area shape="rect" id="node45" href="nilfs2_2inode_8c.html#affec0e84c605c1d9028332974ba58cd3" title="nilfs_read_inode_common" alt="" coords="876,270,1049,296"/>
<area shape="rect" id="node46" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="1107,92,1237,119"/>
<area shape="rect" id="node47" href="bad__inode_8c.html#a8c027cf52e2b7669b11b0bfa09bbcd45" title="iget_failed" alt="" coords="922,67,1003,94"/>
<area shape="rect" id="node49" href="the__nilfs_8h.html#acbe15a8b57f8ecf5e4777294c2f7303d" title="nilfs_get_segnum_of\l_block" alt="" coords="891,894,1034,936"/>
<area shape="rect" id="node50" href="the__nilfs_8h.html#a0dc161eb6c4f6bad9212b67517b46a37" title="nilfs_get_segment_range" alt="" coords="879,960,1046,987"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8h_a4f79159d2c1037184f20a9ed3a5f410a_icgraph.png" border="0" usemap="#sufile_8h_a4f79159d2c1037184f20a9ed3a5f410a_icgraph" alt=""/></div>
<map name="sufile_8h_a4f79159d2c1037184f20a9ed3a5f410a_icgraph" id="sufile_8h_a4f79159d2c1037184f20a9ed3a5f410a_icgraph">
<area shape="rect" id="node2" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="191,495,371,522"/>
<area shape="rect" id="node48" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="221,174,341,201"/>
<area shape="rect" id="node50" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="624,28,753,69"/>
<area shape="rect" id="node3" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="429,319,559,346"/>
<area shape="rect" id="node33" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="423,737,565,779"/>
<area shape="rect" id="node37" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="629,382,748,409"/>
<area shape="rect" id="node39" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="425,546,563,573"/>
<area shape="rect" id="node42" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="425,672,563,713"/>
<area shape="rect" id="node43" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="625,663,752,690"/>
<area shape="rect" id="node44" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="419,495,569,522"/>
<area shape="rect" id="node46" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="436,445,552,471"/>
<area shape="rect" id="node4" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="627,326,750,353"/>
<area shape="rect" id="node15" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="632,270,745,297"/>
<area shape="rect" id="node32" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="617,195,760,222"/>
<area shape="rect" id="node5" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="819,328,973,369"/>
<area shape="rect" id="node6" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1032,327,1207,354"/>
<area shape="rect" id="node7" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1305,379,1383,406"/>
<area shape="rect" id="node8" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1521,405,1626,431"/>
<area shape="rect" id="node10" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1515,354,1632,381"/>
<area shape="rect" id="node9" href="nilfs2_2super_8c.html#a6f69bb47bb8193c95863dfa7858e0556" title="nilfs_mount" alt="" coords="1747,405,1837,431"/>
<area shape="rect" id="node11" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1713,354,1871,381"/>
<area shape="rect" id="node12" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1923,241,2071,267"/>
<area shape="rect" id="node13" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1927,292,2066,333"/>
<area shape="rect" id="node14" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1919,358,2075,385"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="825,263,967,304"/>
<area shape="rect" id="node29" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="808,146,984,173"/>
<area shape="rect" id="node31" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="821,197,971,239"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1049,205,1190,231"/>
<area shape="rect" id="node18" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1255,223,1433,250"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1922,175,2071,216"/>
<area shape="rect" id="node26" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1481,233,1665,275"/>
<area shape="rect" id="node20" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="2143,293,2248,319"/>
<area shape="rect" id="node25" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="2137,182,2253,209"/>
<area shape="rect" id="node21" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="2317,351,2437,378"/>
<area shape="rect" id="node22" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2495,351,2609,378"/>
<area shape="rect" id="node23" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2487,402,2617,429"/>
<area shape="rect" id="node24" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="2665,529,2743,555"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8h.html#a1907ac7b54882bbf06019eaf6d03c21c" title="nilfs_relax_pressure\l_in_lock" alt="" coords="1723,288,1861,329"/>
<area shape="rect" id="node28" href="nilfs2_2segment_8c.html#a8b69f4181745f44662620421e0f88ab0" title="nilfs_transaction_lock" alt="" coords="1718,237,1866,263"/>
<area shape="rect" id="node30" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1053,139,1185,180"/>
<area shape="rect" id="node34" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="843,663,949,690"/>
<area shape="rect" id="node36" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1276,744,1412,785"/>
<area shape="rect" id="node35" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="2318,617,2437,643"/>
<area shape="rect" id="node38" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1052,379,1187,420"/>
<area shape="rect" id="node40" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="2123,550,2268,577"/>
<area shape="rect" id="node41" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="617,597,760,639"/>
<area shape="rect" id="node45" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="2316,488,2439,529"/>
<area shape="rect" id="node47" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="1047,445,1192,471"/>
<area shape="rect" id="node49" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="825,80,967,121"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_8fac9e178a1e3eec5aa774d52dddfbee.html">nilfs2</a></li><li class="navelem"><a class="el" href="sufile_8h.html">sufile.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>

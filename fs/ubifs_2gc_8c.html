<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>linux/fs: ubifs/gc.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">linux/fs
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('ubifs_2gc_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">gc.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;linux/slab.h&gt;</code><br />
<code>#include &lt;linux/pagemap.h&gt;</code><br />
<code>#include &lt;linux/list_sort.h&gt;</code><br />
<code>#include &quot;<a class="el" href="ubifs_8h_source.html">ubifs.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for gc.c:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2gc_8c__incl.png" border="0" usemap="#ubifs_2gc_8c" alt=""/></div>
<map name="ubifs_2gc_8c" id="ubifs_2gc_8c">
<area shape="rect" id="node5" href="ubifs_8h.html" title="ubifs.h" alt="" coords="1208,80,1269,107"/>
<area shape="rect" id="node21" href="ubifs-media_8h.html" title="ubifs&#45;media.h" alt="" coords="1445,155,1545,181"/>
<area shape="rect" id="node22" href="ubifs_2debug_8h.html" title="debug.h" alt="" coords="1569,155,1637,181"/>
<area shape="rect" id="node23" href="misc_8h.html" title="misc.h" alt="" coords="1661,155,1723,181"/>
<area shape="rect" id="node24" href="key_8h.html" title="key.h" alt="" coords="1747,155,1802,181"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a1b14ccdab46ecf4d66e6ab9599c02c67"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2gc_8c.html#a1b14ccdab46ecf4d66e6ab9599c02c67">SOFT_LEBS_LIMIT</a>&#160;&#160;&#160;4</td></tr>
<tr class="separator:a1b14ccdab46ecf4d66e6ab9599c02c67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55a1df37e7d6f96d43201bcd612d6f3f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2gc_8c.html#a55a1df37e7d6f96d43201bcd612d6f3f">HARD_LEBS_LIMIT</a>&#160;&#160;&#160;32</td></tr>
<tr class="separator:a55a1df37e7d6f96d43201bcd612d6f3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac8af282d626a91c08e5e158b8e55ec20"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2gc_8c.html#ac8af282d626a91c08e5e158b8e55ec20">switch_gc_head</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:ac8af282d626a91c08e5e158b8e55ec20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac95933275626e324cdaf46ebb4cac9e2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2gc_8c.html#ac95933275626e324cdaf46ebb4cac9e2">data_nodes_cmp</a> (void *priv, struct list_head *a, struct list_head *b)</td></tr>
<tr class="separator:ac95933275626e324cdaf46ebb4cac9e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8280bb51ca0d10d6918bc0dc630a1ef1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2gc_8c.html#a8280bb51ca0d10d6918bc0dc630a1ef1">nondata_nodes_cmp</a> (void *priv, struct list_head *a, struct list_head *b)</td></tr>
<tr class="separator:a8280bb51ca0d10d6918bc0dc630a1ef1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ac9c370cb72439015edcddf81470d28"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2gc_8c.html#a4ac9c370cb72439015edcddf81470d28">sort_nodes</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, struct <a class="el" href="structubifs__scan__leb.html">ubifs_scan_leb</a> *sleb, struct list_head *nondata, int *min)</td></tr>
<tr class="separator:a4ac9c370cb72439015edcddf81470d28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a007c1b86e6d577ada4c13e4f6f2307d3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2gc_8c.html#a007c1b86e6d577ada4c13e4f6f2307d3">move_node</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, struct <a class="el" href="structubifs__scan__leb.html">ubifs_scan_leb</a> *sleb, struct <a class="el" href="structubifs__scan__node.html">ubifs_scan_node</a> *snod, struct <a class="el" href="structubifs__wbuf.html">ubifs_wbuf</a> *wbuf)</td></tr>
<tr class="separator:a007c1b86e6d577ada4c13e4f6f2307d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0088bd16e6b85c2c28124046ab839d7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2gc_8c.html#ad0088bd16e6b85c2c28124046ab839d7">move_nodes</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, struct <a class="el" href="structubifs__scan__leb.html">ubifs_scan_leb</a> *sleb)</td></tr>
<tr class="separator:ad0088bd16e6b85c2c28124046ab839d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f4daf5146e689ec3841b9a9840658f4"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2gc_8c.html#a2f4daf5146e689ec3841b9a9840658f4">gc_sync_wbufs</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:a2f4daf5146e689ec3841b9a9840658f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29dd378f4b22d45580bff155cbb275cd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2gc_8c.html#a29dd378f4b22d45580bff155cbb275cd">ubifs_garbage_collect_leb</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, struct <a class="el" href="structubifs__lprops.html">ubifs_lprops</a> *lp)</td></tr>
<tr class="separator:a29dd378f4b22d45580bff155cbb275cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6aba86bcae816613915e10318fdf6b83"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2gc_8c.html#a6aba86bcae816613915e10318fdf6b83">ubifs_garbage_collect</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, int anyway)</td></tr>
<tr class="separator:a6aba86bcae816613915e10318fdf6b83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ff584f97bf8a1783fc9fecde0a87b1e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2gc_8c.html#a1ff584f97bf8a1783fc9fecde0a87b1e">ubifs_gc_start_commit</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:a1ff584f97bf8a1783fc9fecde0a87b1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd8f539c87c6fbdd3a73195b54dd9995"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2gc_8c.html#abd8f539c87c6fbdd3a73195b54dd9995">ubifs_gc_end_commit</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:abd8f539c87c6fbdd3a73195b54dd9995"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6784f1871dcccddfaa64cc9ad74c3ea"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2gc_8c.html#af6784f1871dcccddfaa64cc9ad74c3ea">ubifs_destroy_idx_gc</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:af6784f1871dcccddfaa64cc9ad74c3ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e83b83738924a4b92576798c5409df2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2gc_8c.html#a2e83b83738924a4b92576798c5409df2">ubifs_get_idx_gc_leb</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:a2e83b83738924a4b92576798c5409df2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a55a1df37e7d6f96d43201bcd612d6f3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55a1df37e7d6f96d43201bcd612d6f3f">&#9670;&nbsp;</a></span>HARD_LEBS_LIMIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HARD_LEBS_LIMIT&#160;&#160;&#160;32</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a1b14ccdab46ecf4d66e6ab9599c02c67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b14ccdab46ecf4d66e6ab9599c02c67">&#9670;&nbsp;</a></span>SOFT_LEBS_LIMIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SOFT_LEBS_LIMIT&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ac95933275626e324cdaf46ebb4cac9e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac95933275626e324cdaf46ebb4cac9e2">&#9670;&nbsp;</a></span>data_nodes_cmp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int data_nodes_cmp </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>priv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct list_head *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct list_head *&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>data_nodes_cmp - compare 2 data nodes. : UBIFS file-system description object <em></em>: first data node <b></b>: second data node</p>
<p>This function compares data nodes <em>and</em> <b></b>. Returns %1 if <em>has</em> greater inode or block number, and %-1 otherwise. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2gc_8c_ac95933275626e324cdaf46ebb4cac9e2_cgraph.png" border="0" usemap="#ubifs_2gc_8c_ac95933275626e324cdaf46ebb4cac9e2_cgraph" alt=""/></div>
<map name="ubifs_2gc_8c_ac95933275626e324cdaf46ebb4cac9e2_cgraph" id="ubifs_2gc_8c_ac95933275626e324cdaf46ebb4cac9e2_cgraph">
<area shape="rect" id="node2" href="key_8h.html#a06f47822510ef850cb7065778115453c" title="key_type" alt="" coords="178,5,253,32"/>
<area shape="rect" id="node3" href="key_8h.html#a4a12b97ed78e138baf7886a6df7ed50f" title="key_inum" alt="" coords="176,56,255,83"/>
<area shape="rect" id="node4" href="key_8h.html#a10c13375b52dbb12be6f9b685d1d1ba7" title="key_block" alt="" coords="175,107,256,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2gc_8c_ac95933275626e324cdaf46ebb4cac9e2_icgraph.png" border="0" usemap="#ubifs_2gc_8c_ac95933275626e324cdaf46ebb4cac9e2_icgraph" alt=""/></div>
<map name="ubifs_2gc_8c_ac95933275626e324cdaf46ebb4cac9e2_icgraph" id="ubifs_2gc_8c_ac95933275626e324cdaf46ebb4cac9e2_icgraph">
<area shape="rect" id="node2" href="ubifs_2gc_8c.html#a4ac9c370cb72439015edcddf81470d28" title="sort_nodes" alt="" coords="175,931,261,958"/>
<area shape="rect" id="node3" href="ubifs_2gc_8c.html#ad0088bd16e6b85c2c28124046ab839d7" title="move_nodes" alt="" coords="309,931,405,958"/>
<area shape="rect" id="node4" href="ubifs_8h.html#a29dd378f4b22d45580bff155cbb275cd" title="ubifs_garbage_collect_leb" alt="" coords="453,931,625,958"/>
<area shape="rect" id="node5" href="ubifs_8h.html#a6aba86bcae816613915e10318fdf6b83" title="ubifs_garbage_collect" alt="" coords="673,728,821,755"/>
<area shape="rect" id="node44" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="1024,1159,1181,1186"/>
<area shape="rect" id="node6" href="ubifs_2journal_8c.html#a920088cf70f88cbb1142294e99e688d6" title="reserve_space" alt="" coords="869,450,976,476"/>
<area shape="rect" id="node36" href="budget_8c.html#a5ccd81c906fb851139ba3da031d26f12" title="run_gc" alt="" coords="892,728,953,755"/>
<area shape="rect" id="node7" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="1040,247,1165,274"/>
<area shape="rect" id="node8" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="1247,931,1363,958"/>
<area shape="rect" id="node20" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="1237,196,1374,223"/>
<area shape="rect" id="node23" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="1234,95,1377,122"/>
<area shape="rect" id="node26" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="1242,146,1369,172"/>
<area shape="rect" id="node28" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="1245,247,1365,274"/>
<area shape="rect" id="node29" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="1243,19,1367,46"/>
<area shape="rect" id="node30" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="1233,399,1378,426"/>
<area shape="rect" id="node34" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="1229,298,1381,324"/>
<area shape="rect" id="node9" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1464,906,1555,932"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1463,1058,1556,1084"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1468,956,1551,983"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1471,754,1548,780"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1464,804,1555,831"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1466,855,1553,882"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1465,1108,1554,1135"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1461,1159,1557,1186"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1458,1007,1561,1034"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="1656,956,1752,983"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1661,602,1747,628"/>
<area shape="rect" id="node21" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="1460,196,1559,223"/>
<area shape="rect" id="node22" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1654,196,1754,223"/>
<area shape="rect" id="node24" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="1448,95,1571,122"/>
<area shape="rect" id="node25" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="1434,44,1585,71"/>
<area shape="rect" id="node27" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1456,146,1563,172"/>
<area shape="rect" id="node31" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="1460,450,1559,476"/>
<area shape="rect" id="node32" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1637,1108,1771,1135"/>
<area shape="rect" id="node33" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="1819,1108,1892,1135"/>
<area shape="rect" id="node35" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="1461,298,1558,324"/>
<area shape="rect" id="node37" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="1040,728,1165,755"/>
<area shape="rect" id="node38" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="1236,728,1375,755"/>
<area shape="rect" id="node39" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="1448,652,1571,679"/>
<area shape="rect" id="node40" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="1453,703,1566,730"/>
<area shape="rect" id="node41" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="1469,500,1549,527"/>
<area shape="rect" id="node42" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="1429,399,1589,426"/>
<area shape="rect" id="node43" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="1649,475,1759,502"/>
<area shape="rect" id="node45" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="1259,1210,1352,1236"/>
<area shape="rect" id="node48" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="1243,1286,1368,1312"/>
<area shape="rect" id="node50" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="1242,1108,1369,1135"/>
<area shape="rect" id="node46" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1455,1260,1564,1287"/>
<area shape="rect" id="node47" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="1657,1260,1751,1287"/>
<area shape="rect" id="node49" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="1448,1311,1571,1338"/>
</map>
</div>

</div>
</div>
<a id="a2f4daf5146e689ec3841b9a9840658f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f4daf5146e689ec3841b9a9840658f4">&#9670;&nbsp;</a></span>gc_sync_wbufs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int gc_sync_wbufs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>gc_sync_wbufs - sync write-buffers for GC. <code></code>: UBIFS file-system description object</p>
<p>We must guarantee that obsoleting nodes are on flash. Unfortunately they may be in a write-buffer instead. That is, a node could be written to a write-buffer, obsoleting another node in a LEB that is GC'd. If that LEB is erased before the write-buffer is sync'd and then there is an unclean unmount, then an existing node is lost. To avoid this, we sync all write-buffers.</p>
<p>This function returns %0 on success or a negative error code on failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2gc_8c_a2f4daf5146e689ec3841b9a9840658f4_cgraph.png" border="0" usemap="#ubifs_2gc_8c_a2f4daf5146e689ec3841b9a9840658f4_cgraph" alt=""/></div>
<map name="ubifs_2gc_8c_a2f4daf5146e689ec3841b9a9840658f4_cgraph" id="ubifs_2gc_8c_a2f4daf5146e689ec3841b9a9840658f4_cgraph">
<area shape="rect" id="node2" href="misc_8h.html#af8fd16c04f42f2a56d86f0f7a4924ecc" title="ubifs_wbuf_sync" alt="" coords="167,841,287,868"/>
<area shape="rect" id="node3" href="ubifs_2io_8c.html#a3e6d29ad192528c05f246cd31a1732fb" title="ubifs_wbuf_sync_nolock" alt="" coords="335,107,500,133"/>
<area shape="rect" id="node4" href="ubifs_2io_8c.html#aeef91391de4e0f46023ab0afac3a2335" title="cancel_wbuf_timer_nolock" alt="" coords="548,56,724,83"/>
<area shape="rect" id="node5" href="ubifs_2debug_8c.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="1340,259,1421,285"/>
<area shape="rect" id="node6" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="597,5,675,32"/>
<area shape="rect" id="node7" href="ubifs_2io_8c.html#a02909cfc9d3a0100f549390c7d464632" title="ubifs_leb_write" alt="" coords="581,284,691,311"/>
<area shape="rect" id="node8" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="1145,157,1264,184"/>
<area shape="rect" id="node9" href="ubifs_2debug_8c.html#af929a6951e19c79f1235738386005c06" title="dbg_leb_write" alt="" coords="774,284,877,311"/>
<area shape="rect" id="node25" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1345,816,1417,843"/>
<area shape="rect" id="node50" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="772,347,879,373"/>
<area shape="rect" id="node10" href="ubifs_2debug_8h.html#ab599356d6c84ddd2c7b9001b452c30bd" title="dbg_is_power_cut" alt="" coords="935,1095,1061,1121"/>
<area shape="rect" id="node47" href="ubifs_2debug_8c.html#a67b6fc23cfbf882431d33323a03ef74c" title="power_cut_emulated" alt="" coords="927,208,1069,235"/>
<area shape="rect" id="node48" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="1162,208,1247,235"/>
<area shape="rect" id="node49" href="ubifs_2debug_8c.html#a90853c3e5be760b8c7d76c2d39fdb28c" title="corrupt_data" alt="" coords="951,259,1045,285"/>
<area shape="rect" id="node11" href="ubifs_2debug_8h.html#aed9c32fd77ce70a2d917ab58c56189c2" title="ubifs_debugging_init" alt="" coords="1135,1221,1275,1248"/>
<area shape="rect" id="node12" href="ubifs_2debug_8h.html#a1e62d7c391f555902a25f8060eb6f1ec" title="ubifs_debugging_exit" alt="" coords="1133,1272,1277,1299"/>
<area shape="rect" id="node13" href="ubifs_2debug_8h.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="1163,1323,1246,1349"/>
<area shape="rect" id="node14" href="ubifs_2debug_8h.html#a615a670f26d4407b52175ce5f3faf594" title="dbg_cstate" alt="" coords="1161,1373,1248,1400"/>
<area shape="rect" id="node15" href="ubifs_2debug_8h.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="1164,1424,1245,1451"/>
<area shape="rect" id="node16" href="ubifs_2debug_8h.html#a4184d82b0b2ff0fffc6ab3d4de4a1e7a" title="dbg_get_key_dump" alt="" coords="1137,1475,1272,1501"/>
<area shape="rect" id="node17" href="ubifs_2debug_8h.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="1144,1525,1265,1552"/>
<area shape="rect" id="node18" href="ubifs_2debug_8h.html#a6ecc9bff59f14d28615ed14fa5323681" title="ubifs_dump_inode" alt="" coords="1141,1576,1268,1603"/>
<area shape="rect" id="node19" href="ubifs_2debug_8h.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="1143,1627,1267,1653"/>
<area shape="rect" id="node20" href="ubifs_2debug_8h.html#acfcbe45894b3b41385c1f9891d57bb97" title="ubifs_dump_budget_req" alt="" coords="1125,1677,1285,1704"/>
<area shape="rect" id="node21" href="ubifs_2debug_8h.html#ab351e7abb59edb97d57bd44dd83b0484" title="ubifs_dump_lstats" alt="" coords="1141,1728,1269,1755"/>
<area shape="rect" id="node22" href="ubifs_2debug_8h.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="1143,259,1267,285"/>
<area shape="rect" id="node23" href="ubifs_2debug_8h.html#ad04e55858b69b78f20ea8b0fb79f9f27" title="ubifs_dump_lprop" alt="" coords="1143,309,1267,336"/>
<area shape="rect" id="node24" href="ubifs_2debug_8h.html#a2fa0aeaaa556f0b13d098456ef7d86d4" title="ubifs_dump_lprops" alt="" coords="1139,1779,1270,1805"/>
<area shape="rect" id="node26" href="ubifs_2debug_8h.html#afc25fcc00c516fab54a12303d87bc100" title="ubifs_dump_lpt_info" alt="" coords="1135,563,1274,589"/>
<area shape="rect" id="node27" href="ubifs_2debug_8h.html#afa1952f7d3c2c791a330e3dc245c5a83" title="ubifs_dump_leb" alt="" coords="1148,1880,1261,1907"/>
<area shape="rect" id="node28" href="ubifs_2debug_8h.html#a454a80414a371832b3f68f828f6a6353" title="ubifs_dump_sleb" alt="" coords="1145,613,1265,640"/>
<area shape="rect" id="node29" href="ubifs_2debug_8h.html#a56365d730ac6932bf3163a8ba7279779" title="ubifs_dump_znode" alt="" coords="1139,765,1270,792"/>
<area shape="rect" id="node30" href="ubifs_2debug_8h.html#a5600b63b8362df17ed46c4e20784fb6c" title="ubifs_dump_heap" alt="" coords="1143,867,1267,893"/>
<area shape="rect" id="node31" href="ubifs_2debug_8h.html#ab2224f946272a25cfacf2607c6502818" title="ubifs_dump_pnode" alt="" coords="1139,917,1270,944"/>
<area shape="rect" id="node32" href="ubifs_2debug_8h.html#a6ad4e8a10c442517164e350787696d9d" title="ubifs_dump_tnc" alt="" coords="1147,968,1262,995"/>
<area shape="rect" id="node33" href="ubifs_2debug_8h.html#a1988de032288d9afc418a9f36c0e1a38" title="ubifs_dump_index" alt="" coords="1141,1019,1268,1045"/>
<area shape="rect" id="node34" href="ubifs_2debug_8h.html#a2dad580c9c3f21053039a854eb81bed2" title="ubifs_dump_lpt_lebs" alt="" coords="1134,1069,1275,1096"/>
<area shape="rect" id="node35" href="ubifs_2debug_8h.html#ac9540eb544441fb116e86f4799b55265" title="dbg_walk_index" alt="" coords="1147,1931,1262,1957"/>
<area shape="rect" id="node36" href="ubifs_2debug_8h.html#a42a0e664e63f651533d2a5abc23bf4da" title="dbg_save_space_info" alt="" coords="1131,1120,1279,1147"/>
<area shape="rect" id="node37" href="ubifs_2debug_8h.html#ace23cd2189dd2d7a9435ddd891e9beaa" title="dbg_check_space_info" alt="" coords="1127,360,1282,387"/>
<area shape="rect" id="node38" href="ubifs_2debug_8h.html#a69534405790cc12f492343243bc539a4" title="dbg_check_lprops" alt="" coords="1141,1981,1268,2008"/>
<area shape="rect" id="node39" href="ubifs_2debug_8h.html#a725dc62445ba29e272e4ccb5b10fbc61" title="dbg_old_index_check_init" alt="" coords="1119,1171,1290,1197"/>
<area shape="rect" id="node40" href="ubifs_2debug_8h.html#a23369147b6e2214867a8a650ad50ebaf" title="dbg_check_old_index" alt="" coords="1131,411,1278,437"/>
<area shape="rect" id="node41" href="ubifs_2debug_8h.html#a4d24d720745a25e26d273dc892c703eb" title="dbg_check_cats" alt="" coords="1146,461,1263,488"/>
<area shape="rect" id="node42" href="ubifs_2debug_8h.html#a0326c90a004af4486c5ad1dbc25baf29" title="dbg_check_ltab" alt="" coords="1148,664,1261,691"/>
<area shape="rect" id="node43" href="ubifs_2debug_8h.html#ab2f0c34c5385c6b4af6f326fac750a70" title="dbg_chk_lpt_free_spc" alt="" coords="1130,512,1279,539"/>
<area shape="rect" id="node44" href="ubifs_2debug_8h.html#a8743b404fd4536a6f2212846f55854d0" title="dbg_chk_lpt_sz" alt="" coords="1148,715,1261,741"/>
<area shape="rect" id="node45" href="ubifs_2debug_8h.html#ad20ad974aa8f10603e2468787760af65" title="dbg_check_synced_i_size" alt="" coords="1117,816,1292,843"/>
<area shape="rect" id="node46" href="ubifs_2debug_8h.html#ae64cd5f4e9b71d0d2167e1f8dafd9cd0" title="dbg_check_dir" alt="" coords="1151,1829,1258,1856"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2gc_8c_a2f4daf5146e689ec3841b9a9840658f4_icgraph.png" border="0" usemap="#ubifs_2gc_8c_a2f4daf5146e689ec3841b9a9840658f4_icgraph" alt=""/></div>
<map name="ubifs_2gc_8c_a2f4daf5146e689ec3841b9a9840658f4_icgraph" id="ubifs_2gc_8c_a2f4daf5146e689ec3841b9a9840658f4_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#a29dd378f4b22d45580bff155cbb275cd" title="ubifs_garbage_collect_leb" alt="" coords="167,1019,339,1045"/>
<area shape="rect" id="node3" href="ubifs_8h.html#a6aba86bcae816613915e10318fdf6b83" title="ubifs_garbage_collect" alt="" coords="387,791,535,817"/>
<area shape="rect" id="node44" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="737,1272,895,1299"/>
<area shape="rect" id="node4" href="ubifs_2journal_8c.html#a920088cf70f88cbb1142294e99e688d6" title="reserve_space" alt="" coords="583,487,689,513"/>
<area shape="rect" id="node34" href="budget_8c.html#a5ccd81c906fb851139ba3da031d26f12" title="run_gc" alt="" coords="605,791,667,817"/>
<area shape="rect" id="node5" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="753,259,879,285"/>
<area shape="rect" id="node6" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="961,1044,1077,1071"/>
<area shape="rect" id="node18" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="950,31,1087,57"/>
<area shape="rect" id="node21" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="947,107,1090,133"/>
<area shape="rect" id="node24" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="955,157,1082,184"/>
<area shape="rect" id="node26" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="959,259,1079,285"/>
<area shape="rect" id="node27" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="957,208,1081,235"/>
<area shape="rect" id="node28" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="946,360,1091,387"/>
<area shape="rect" id="node32" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="943,309,1095,336"/>
<area shape="rect" id="node7" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1177,1019,1268,1045"/>
<area shape="rect" id="node8" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1176,1221,1269,1248"/>
<area shape="rect" id="node9" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1181,1120,1264,1147"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1184,867,1261,893"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1177,917,1268,944"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1179,968,1266,995"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1178,1069,1267,1096"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1175,1171,1271,1197"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1171,1272,1274,1299"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="1384,1120,1480,1147"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1389,461,1475,488"/>
<area shape="rect" id="node19" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="1173,5,1272,32"/>
<area shape="rect" id="node20" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1382,208,1482,235"/>
<area shape="rect" id="node22" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="1161,107,1284,133"/>
<area shape="rect" id="node23" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="1147,56,1298,83"/>
<area shape="rect" id="node25" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1169,157,1276,184"/>
<area shape="rect" id="node29" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="1173,360,1272,387"/>
<area shape="rect" id="node30" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1365,613,1499,640"/>
<area shape="rect" id="node31" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="1561,613,1635,640"/>
<area shape="rect" id="node33" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="1174,309,1271,336"/>
<area shape="rect" id="node35" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="753,791,879,817"/>
<area shape="rect" id="node36" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="949,791,1088,817"/>
<area shape="rect" id="node37" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="1161,563,1284,589"/>
<area shape="rect" id="node38" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="1166,613,1279,640"/>
<area shape="rect" id="node39" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="1183,664,1263,691"/>
<area shape="rect" id="node40" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="1143,715,1303,741"/>
<area shape="rect" id="node41" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="1377,765,1487,792"/>
<area shape="rect" id="node42" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="1351,537,1513,564"/>
<area shape="rect" id="node43" href="ubifs_2ioctl_8c.html#a06251cc4602342e44b5ed0a1b39f7e60" title="setflags" alt="" coords="1189,765,1257,792"/>
<area shape="rect" id="node45" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="972,1323,1065,1349"/>
<area shape="rect" id="node48" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="956,1399,1081,1425"/>
<area shape="rect" id="node50" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="955,1221,1082,1248"/>
<area shape="rect" id="node46" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1168,1373,1277,1400"/>
<area shape="rect" id="node47" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="1385,1373,1479,1400"/>
<area shape="rect" id="node49" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="1161,1424,1284,1451"/>
</map>
</div>

</div>
</div>
<a id="a007c1b86e6d577ada4c13e4f6f2307d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a007c1b86e6d577ada4c13e4f6f2307d3">&#9670;&nbsp;</a></span>move_node()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int move_node </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structubifs__scan__leb.html">ubifs_scan_leb</a> *&#160;</td>
          <td class="paramname"><em>sleb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structubifs__scan__node.html">ubifs_scan_node</a> *&#160;</td>
          <td class="paramname"><em>snod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structubifs__wbuf.html">ubifs_wbuf</a> *&#160;</td>
          <td class="paramname"><em>wbuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>move_node - move a node. <code></code>: UBIFS file-system description object : describes the LEB to move nodes from : the mode to move : write-buffer to move node to</p>
<p>This function moves node  to , changes TNC correspondingly, and destroys . Returns zero in case of success and a negative error code in case of failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2gc_8c_a007c1b86e6d577ada4c13e4f6f2307d3_cgraph.png" border="0" usemap="#ubifs_2gc_8c_a007c1b86e6d577ada4c13e4f6f2307d3_cgraph" alt=""/></div>
<map name="ubifs_2gc_8c_a007c1b86e6d577ada4c13e4f6f2307d3_cgraph" id="ubifs_2gc_8c_a007c1b86e6d577ada4c13e4f6f2307d3_cgraph">
<area shape="rect" id="node2" href="ubifs_2io_8c.html#a6ee6b209c593633d86570858d6e5ff51" title="ubifs_wbuf_write_nolock" alt="" coords="315,200,481,226"/>
<area shape="rect" id="node27" href="tnc_8c.html#a57909b33c6b9924633e733ac7dd4cfc7" title="ubifs_tnc_replace" alt="" coords="143,1365,267,1392"/>
<area shape="rect" id="node3" href="ubifs_2debug_8c.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="1311,200,1393,226"/>
<area shape="rect" id="node4" href="ubifs_2debug_8c.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="787,48,869,74"/>
<area shape="rect" id="node5" href="ubifs_2io_8c.html#aeef91391de4e0f46023ab0afac3a2335" title="cancel_wbuf_timer_nolock" alt="" coords="529,98,705,125"/>
<area shape="rect" id="node6" href="ubifs_2io_8c.html#a02909cfc9d3a0100f549390c7d464632" title="ubifs_leb_write" alt="" coords="563,200,672,226"/>
<area shape="rect" id="node13" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="986,580,1058,606"/>
<area shape="rect" id="node15" href="ubifs_2io_8c.html#a72790ff2f14d3cf772fc8e842ac0bff8" title="new_wbuf_timer_nolock" alt="" coords="536,149,699,176"/>
<area shape="rect" id="node16" href="ubifs_2debug_8c.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="960,402,1084,429"/>
<area shape="rect" id="node24" href="ubifs_2debug_8c.html#afa1952f7d3c2c791a330e3dc245c5a83" title="ubifs_dump_leb" alt="" coords="561,402,674,429"/>
<area shape="rect" id="node7" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="1143,149,1261,176"/>
<area shape="rect" id="node8" href="ubifs_2debug_8c.html#af929a6951e19c79f1235738386005c06" title="dbg_leb_write" alt="" coords="777,149,879,176"/>
<area shape="rect" id="node14" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="969,352,1075,378"/>
<area shape="rect" id="node9" href="ubifs_2debug_8h.html#ab599356d6c84ddd2c7b9001b452c30bd" title="dbg_is_power_cut" alt="" coords="959,149,1085,176"/>
<area shape="rect" id="node10" href="ubifs_2debug_8c.html#a67b6fc23cfbf882431d33323a03ef74c" title="power_cut_emulated" alt="" coords="951,200,1093,226"/>
<area shape="rect" id="node11" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="1159,250,1245,277"/>
<area shape="rect" id="node12" href="ubifs_2debug_8c.html#a90853c3e5be760b8c7d76c2d39fdb28c" title="corrupt_data" alt="" coords="975,301,1069,328"/>
<area shape="rect" id="node17" href="ubifs_2debug_8c.html#a40190f9f60ac94040c30dbd97c73a3ca" title="dump_ch" alt="" coords="1165,402,1239,429"/>
<area shape="rect" id="node18" href="ubifs_2debug_8c.html#a4b30ad73e46b72b5043aa4efa7fb8d9a" title="get_key_hash" alt="" coords="1151,453,1253,480"/>
<area shape="rect" id="node19" href="ubifs_2debug_8c.html#af1196269cd9c24affacc60e33f960f49" title="get_key_fmt" alt="" coords="1155,301,1249,328"/>
<area shape="rect" id="node20" href="key_8h.html#a5611c13d648e672825da064c90c8903a" title="key_read" alt="" coords="1165,604,1239,630"/>
<area shape="rect" id="node21" href="ubifs_2debug_8c.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="1141,906,1263,933"/>
<area shape="rect" id="node23" href="misc_8h.html#a1598cadb907a20f9e5dc3e7ee74edb1d" title="ubifs_idx_branch" alt="" coords="1142,352,1262,378"/>
<area shape="rect" id="node22" href="key_8h.html#a06f47822510ef850cb7065778115453c" title="key_type" alt="" coords="1315,1198,1389,1225"/>
<area shape="rect" id="node25" href="ubifs_2scan_8c.html#a1689915d09ec86f76b30ee598b10f34e" title="ubifs_scan" alt="" coords="785,453,871,480"/>
<area shape="rect" id="node26" href="ubifs_2scan_8c.html#a7e559a0c70f1f17d0886f600cd59a639" title="ubifs_scan_destroy" alt="" coords="955,453,1089,480"/>
<area shape="rect" id="node28" href="tnc_8c.html#af871df87e75b12ea907320baac2614d5" title="lookup_level0_dirty" alt="" coords="331,1365,465,1392"/>
<area shape="rect" id="node33" href="key_8h.html#a391b7c6e47045b125899fd494b93b2ed" title="is_hash_key" alt="" coords="781,1504,875,1530"/>
<area shape="rect" id="node35" href="misc_8h.html#abe5c86108a05199a899138767ca1f42a" title="ubifs_zn_dirty" alt="" coords="777,1212,879,1238"/>
<area shape="rect" id="node36" href="tnc_8c.html#a609646516a8a0f3fd9f2b2a1a1849737" title="dirty_cow_bottom_up" alt="" coords="544,1466,691,1493"/>
<area shape="rect" id="node37" href="tnc_8c.html#a48dcf7fc1db2312050ac0378020c802b" title="lnc_free" alt="" coords="364,1466,432,1493"/>
<area shape="rect" id="node38" href="misc_8h.html#ae4183603acbd9f727ecf1fae7617085b" title="ubifs_add_dirt" alt="" coords="347,732,449,758"/>
<area shape="rect" id="node40" href="tnc_8c.html#acb341a90edaa5dca2a3c232a5f4a5d67" title="resolve_collision_directly" alt="" coords="315,1618,481,1645"/>
<area shape="rect" id="node43" href="ubifs_2debug_8c.html#a8e749de733b483ca979984b8aa078aa6" title="dbg_check_tnc" alt="" coords="343,909,453,936"/>
<area shape="rect" id="node29" href="tnc__misc_8c.html#a59f2b6d42e83b9a23712bb251112eb1b" title="ubifs_load_znode" alt="" coords="556,1365,679,1392"/>
<area shape="rect" id="node30" href="tnc_8c.html#af6b2ffc67c87b26f8e48221449e1a2ec" title="dirty_cow_znode" alt="" coords="768,1428,888,1454"/>
<area shape="rect" id="node31" href="tnc__misc_8c.html#a795e1a9542770ea482f128ed03e6a87f" title="ubifs_search_zbranch" alt="" coords="753,1161,903,1188"/>
<area shape="rect" id="node32" href="key_8h.html#a6395510bfa3e62eff60652c9624180e1" title="keys_cmp" alt="" coords="981,1136,1063,1162"/>
<area shape="rect" id="node34" href="tnc_8c.html#ad078bd3a3bb09883e602d4c2add8267e" title="tnc_prev" alt="" coords="581,1568,653,1594"/>
<area shape="rect" id="node39" href="lprops_8c.html#ae3f8fc7da604fc1fbfa182c024679d42" title="ubifs_update_one_lp" alt="" coords="757,605,899,632"/>
<area shape="rect" id="node41" href="tnc_8c.html#a7f9cf8fc929db321a999947190bbbe2a" title="matches_position" alt="" coords="555,1720,679,1746"/>
<area shape="rect" id="node42" href="tnc_8c.html#aa6a0a93befc7348c0e11ee3a038d8d81" title="tnc_next" alt="" coords="581,1669,653,1696"/>
<area shape="rect" id="node44" href="ubifs_2debug_8h.html#aaccd583a761afebb452421d214607adb" title="dbg_is_chk_index" alt="" coords="554,858,681,885"/>
<area shape="rect" id="node45" href="tnc__misc_8c.html#a97a13645d24f27ca0f17eec920e0e6c5" title="ubifs_tnc_postorder\l_first" alt="" coords="760,711,896,752"/>
<area shape="rect" id="node46" href="ubifs_2debug_8c.html#a39ae5d2547e899a30e5f9bfe9acb40ba" title="dbg_check_znode" alt="" coords="554,1010,681,1037"/>
<area shape="rect" id="node47" href="ubifs_2debug_8c.html#a5ffffda90e7c954ece8261620b832623" title="dbg_check_key_order" alt="" coords="753,853,903,880"/>
<area shape="rect" id="node48" href="ubifs_2misc_8c.html#a49c185988382ac9b2f28935dd44a0441" title="ubifs_msg" alt="" coords="981,908,1063,934"/>
<area shape="rect" id="node49" href="ubifs_2debug_8c.html#a56365d730ac6932bf3163a8ba7279779" title="ubifs_dump_znode" alt="" coords="763,958,893,985"/>
<area shape="rect" id="node50" href="tnc__misc_8c.html#ab73fd13bf253a9f01d5ddeb1e6da16fc" title="ubifs_tnc_postorder_next" alt="" coords="533,757,701,784"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2gc_8c_a007c1b86e6d577ada4c13e4f6f2307d3_icgraph.png" border="0" usemap="#ubifs_2gc_8c_a007c1b86e6d577ada4c13e4f6f2307d3_icgraph" alt=""/></div>
<map name="ubifs_2gc_8c_a007c1b86e6d577ada4c13e4f6f2307d3_icgraph" id="ubifs_2gc_8c_a007c1b86e6d577ada4c13e4f6f2307d3_icgraph">
<area shape="rect" id="node2" href="ubifs_2gc_8c.html#ad0088bd16e6b85c2c28124046ab839d7" title="move_nodes" alt="" coords="143,960,239,986"/>
<area shape="rect" id="node3" href="ubifs_8h.html#a29dd378f4b22d45580bff155cbb275cd" title="ubifs_garbage_collect_leb" alt="" coords="287,960,459,986"/>
<area shape="rect" id="node4" href="ubifs_8h.html#a6aba86bcae816613915e10318fdf6b83" title="ubifs_garbage_collect" alt="" coords="507,757,655,784"/>
<area shape="rect" id="node44" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="857,1213,1015,1240"/>
<area shape="rect" id="node5" href="ubifs_2journal_8c.html#a920088cf70f88cbb1142294e99e688d6" title="reserve_space" alt="" coords="703,478,809,505"/>
<area shape="rect" id="node35" href="budget_8c.html#a5ccd81c906fb851139ba3da031d26f12" title="run_gc" alt="" coords="725,757,787,784"/>
<area shape="rect" id="node6" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="873,250,999,277"/>
<area shape="rect" id="node7" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="1081,934,1197,961"/>
<area shape="rect" id="node19" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="1070,301,1207,328"/>
<area shape="rect" id="node22" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="1067,98,1210,125"/>
<area shape="rect" id="node25" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="1075,149,1202,176"/>
<area shape="rect" id="node27" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="1079,200,1199,226"/>
<area shape="rect" id="node28" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="1077,22,1201,49"/>
<area shape="rect" id="node29" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="1066,352,1211,378"/>
<area shape="rect" id="node33" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="1063,250,1215,277"/>
<area shape="rect" id="node8" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1297,909,1388,936"/>
<area shape="rect" id="node9" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1296,960,1389,986"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1301,1010,1384,1037"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1304,757,1381,784"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1297,808,1388,834"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1299,858,1386,885"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1298,1112,1387,1138"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1295,1162,1391,1189"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1291,1213,1394,1240"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="1504,960,1600,986"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1509,706,1595,733"/>
<area shape="rect" id="node20" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="1293,301,1392,328"/>
<area shape="rect" id="node21" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1502,301,1602,328"/>
<area shape="rect" id="node23" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="1281,48,1404,74"/>
<area shape="rect" id="node24" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="1267,98,1418,125"/>
<area shape="rect" id="node26" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1289,149,1396,176"/>
<area shape="rect" id="node30" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="1293,352,1392,378"/>
<area shape="rect" id="node31" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1485,1188,1619,1214"/>
<area shape="rect" id="node32" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="1681,1188,1755,1214"/>
<area shape="rect" id="node34" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="1294,250,1391,277"/>
<area shape="rect" id="node36" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="873,757,999,784"/>
<area shape="rect" id="node37" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="1069,757,1208,784"/>
<area shape="rect" id="node38" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="1281,554,1404,581"/>
<area shape="rect" id="node39" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="1286,605,1399,632"/>
<area shape="rect" id="node40" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="1303,656,1383,682"/>
<area shape="rect" id="node41" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="1263,1061,1423,1088"/>
<area shape="rect" id="node42" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="1497,1061,1607,1088"/>
<area shape="rect" id="node43" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="1471,1010,1633,1037"/>
<area shape="rect" id="node45" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="1092,1264,1185,1290"/>
<area shape="rect" id="node48" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="1076,1340,1201,1366"/>
<area shape="rect" id="node50" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="1075,1162,1202,1189"/>
<area shape="rect" id="node46" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1288,1314,1397,1341"/>
<area shape="rect" id="node47" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="1505,1314,1599,1341"/>
<area shape="rect" id="node49" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="1281,1365,1404,1392"/>
</map>
</div>

</div>
</div>
<a id="ad0088bd16e6b85c2c28124046ab839d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0088bd16e6b85c2c28124046ab839d7">&#9670;&nbsp;</a></span>move_nodes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int move_nodes </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structubifs__scan__leb.html">ubifs_scan_leb</a> *&#160;</td>
          <td class="paramname"><em>sleb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>move_nodes - move nodes. <code></code>: UBIFS file-system description object : describes the LEB to move nodes from</p>
<p>This function moves valid nodes from data LEB described by  to the GC journal head. This function returns zero in case of success, %-EAGAIN if commit is required, and other negative error codes in case of other failures. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2gc_8c_ad0088bd16e6b85c2c28124046ab839d7_cgraph.png" border="0" usemap="#ubifs_2gc_8c_ad0088bd16e6b85c2c28124046ab839d7_cgraph" alt=""/></div>
<map name="ubifs_2gc_8c_ad0088bd16e6b85c2c28124046ab839d7_cgraph" id="ubifs_2gc_8c_ad0088bd16e6b85c2c28124046ab839d7_cgraph">
<area shape="rect" id="node2" href="v9fs_8c.html#a962ef1b35907bdda12de2cddce8bc638" title="LIST_HEAD" alt="" coords="160,402,255,429"/>
<area shape="rect" id="node3" href="ubifs_2gc_8c.html#ac8af282d626a91c08e5e158b8e55ec20" title="switch_gc_head" alt="" coords="149,453,265,479"/>
<area shape="rect" id="node25" href="ubifs_2gc_8c.html#a4ac9c370cb72439015edcddf81470d28" title="sort_nodes" alt="" coords="164,1625,251,1651"/>
<area shape="rect" id="node26" href="key_8h.html#a06f47822510ef850cb7065778115453c" title="key_type" alt="" coords="971,1821,1046,1847"/>
<area shape="rect" id="node41" href="ubifs_2gc_8c.html#a007c1b86e6d577ada4c13e4f6f2307d3" title="move_node" alt="" coords="163,1023,252,1050"/>
<area shape="rect" id="node4" href="ubifs_2io_8c.html#a3e6d29ad192528c05f246cd31a1732fb" title="ubifs_wbuf_sync_nolock" alt="" coords="313,503,479,530"/>
<area shape="rect" id="node12" href="ubifs_2io_8c.html#ad9d3a62a61d21e1faa60cd6e630c41ac" title="ubifs_leb_unmap" alt="" coords="768,466,888,493"/>
<area shape="rect" id="node14" href="ubifs_2log_8c.html#a8b30a0dc99186d8f07ee2f47693f11b7" title="ubifs_add_bud_to_log" alt="" coords="322,250,470,277"/>
<area shape="rect" id="node24" href="ubifs_2io_8c.html#a4bf09b0b677c1ca6d0b034d91281d2f3" title="ubifs_wbuf_seek_nolock" alt="" coords="313,427,479,454"/>
<area shape="rect" id="node5" href="ubifs_2io_8c.html#aeef91391de4e0f46023ab0afac3a2335" title="cancel_wbuf_timer_nolock" alt="" coords="529,605,705,631"/>
<area shape="rect" id="node6" href="ubifs_2debug_8c.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="787,567,869,594"/>
<area shape="rect" id="node7" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="577,503,656,530"/>
<area shape="rect" id="node8" href="ubifs_2io_8c.html#a02909cfc9d3a0100f549390c7d464632" title="ubifs_leb_write" alt="" coords="773,643,883,670"/>
<area shape="rect" id="node9" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="949,517,1068,543"/>
<area shape="rect" id="node10" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="973,909,1045,935"/>
<area shape="rect" id="node11" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="955,567,1062,594"/>
<area shape="rect" id="node13" href="ubifs_2debug_8c.html#a6ba17156289f8b8ecaed40dbafc04858" title="dbg_leb_unmap" alt="" coords="952,466,1065,493"/>
<area shape="rect" id="node15" href="ubifs_2log_8c.html#a3dd7859b83714ed7d9692cf92a391fd9" title="empty_log_bytes" alt="" coords="556,301,677,327"/>
<area shape="rect" id="node16" href="ubifs_2commit_8c.html#a6e9dcff4b0f768c14f6f8448f4b1343e" title="ubifs_commit_required" alt="" coords="540,351,693,378"/>
<area shape="rect" id="node17" href="ubifs_2commit_8c.html#a6c27328fd39184ba2e1bdfa1970275e7" title="ubifs_request_bg_commit" alt="" coords="531,47,702,74"/>
<area shape="rect" id="node18" href="misc_8h.html#abf53e0ff9d9f9f6fefb9a9efbf709496" title="ubifs_next_log_lnum" alt="" coords="546,98,687,125"/>
<area shape="rect" id="node19" href="ubifs_2io_8c.html#a8d3619a60498527530b0ed01ba5c6a82" title="ubifs_leb_map" alt="" coords="775,517,881,543"/>
<area shape="rect" id="node20" href="ubifs_2io_8c.html#a5e156b540025dd2266e7f4c6c302356e" title="ubifs_write_node" alt="" coords="557,807,677,834"/>
<area shape="rect" id="node23" href="ubifs_2log_8c.html#a3366b2b2350ca5e120af4be6f2e67b79" title="ubifs_add_bud" alt="" coords="563,250,670,277"/>
<area shape="rect" id="node21" href="ubifs_2debug_8c.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="787,833,869,859"/>
<area shape="rect" id="node22" href="ubifs_2debug_8c.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="766,1010,890,1037"/>
<area shape="rect" id="node27" href="tnc_8c.html#a6a4e198020559a2622dfb16bdc5b3b24" title="ubifs_tnc_has_node" alt="" coords="327,1466,465,1493"/>
<area shape="rect" id="node32" href="ubifs_2gc_8c.html#ac95933275626e324cdaf46ebb4cac9e2" title="data_nodes_cmp" alt="" coords="556,1710,677,1737"/>
<area shape="rect" id="node35" href="ubifs_2gc_8c.html#a8280bb51ca0d10d6918bc0dc630a1ef1" title="nondata_nodes_cmp" alt="" coords="545,1811,688,1838"/>
<area shape="rect" id="node37" href="ubifs_2debug_8c.html#aef8aeeebc06bad29c72d11b616907f36" title="dbg_check_data_nodes\l_order" alt="" coords="537,1617,696,1659"/>
<area shape="rect" id="node39" href="ubifs_2debug_8c.html#a6dc74d37bb2a8227e5152f5960f02606" title="dbg_check_nondata_nodes\l_order" alt="" coords="527,1552,707,1593"/>
<area shape="rect" id="node28" href="tnc_8c.html#af4a7fe7d3853972004012eaa58fc7d3f" title="is_idx_node_in_tnc" alt="" coords="761,1466,895,1493"/>
<area shape="rect" id="node30" href="tnc_8c.html#a3232f2796c5e91880eccb4bfcce63ce0" title="is_leaf_node_in_tnc" alt="" coords="548,1415,685,1442"/>
<area shape="rect" id="node29" href="misc_8h.html#abe5c86108a05199a899138767ca1f42a" title="ubifs_zn_dirty" alt="" coords="957,1289,1060,1315"/>
<area shape="rect" id="node31" href="key_8h.html#a391b7c6e47045b125899fd494b93b2ed" title="is_hash_key" alt="" coords="781,1365,875,1391"/>
<area shape="rect" id="node33" href="key_8h.html#a4a12b97ed78e138baf7886a6df7ed50f" title="key_inum" alt="" coords="789,1719,867,1746"/>
<area shape="rect" id="node34" href="key_8h.html#a10c13375b52dbb12be6f9b685d1d1ba7" title="key_block" alt="" coords="787,1618,869,1645"/>
<area shape="rect" id="node36" href="key_8h.html#acddf1ca88d72a37e06c5c608cd084656" title="key_hash" alt="" coords="789,1871,867,1898"/>
<area shape="rect" id="node38" href="ubifs_2debug_8h.html#ad9c4d68015fb8802b1553a53880d43cc" title="dbg_is_chk_gen" alt="" coords="770,1567,886,1594"/>
<area shape="rect" id="node40" href="ubifs_2misc_8c.html#a49c185988382ac9b2f28935dd44a0441" title="ubifs_msg" alt="" coords="787,1517,869,1543"/>
<area shape="rect" id="node42" href="ubifs_2io_8c.html#a6ee6b209c593633d86570858d6e5ff51" title="ubifs_wbuf_write_nolock" alt="" coords="313,858,479,885"/>
<area shape="rect" id="node45" href="tnc_8c.html#a57909b33c6b9924633e733ac7dd4cfc7" title="ubifs_tnc_replace" alt="" coords="334,1187,458,1214"/>
<area shape="rect" id="node43" href="ubifs_2io_8c.html#a72790ff2f14d3cf772fc8e842ac0bff8" title="new_wbuf_timer_nolock" alt="" coords="535,706,698,733"/>
<area shape="rect" id="node44" href="ubifs_2debug_8c.html#afa1952f7d3c2c791a330e3dc245c5a83" title="ubifs_dump_leb" alt="" coords="560,959,673,986"/>
<area shape="rect" id="node46" href="tnc_8c.html#af871df87e75b12ea907320baac2614d5" title="lookup_level0_dirty" alt="" coords="550,1263,683,1290"/>
<area shape="rect" id="node47" href="tnc_8c.html#a609646516a8a0f3fd9f2b2a1a1849737" title="dirty_cow_bottom_up" alt="" coords="755,1213,901,1239"/>
<area shape="rect" id="node48" href="tnc_8c.html#a48dcf7fc1db2312050ac0378020c802b" title="lnc_free" alt="" coords="583,1162,651,1189"/>
<area shape="rect" id="node49" href="misc_8h.html#ae4183603acbd9f727ecf1fae7617085b" title="ubifs_add_dirt" alt="" coords="565,1061,668,1087"/>
<area shape="rect" id="node50" href="tnc_8c.html#acb341a90edaa5dca2a3c232a5f4a5d67" title="resolve_collision_directly" alt="" coords="533,1111,700,1138"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2gc_8c_ad0088bd16e6b85c2c28124046ab839d7_icgraph.png" border="0" usemap="#ubifs_2gc_8c_ad0088bd16e6b85c2c28124046ab839d7_icgraph" alt=""/></div>
<map name="ubifs_2gc_8c_ad0088bd16e6b85c2c28124046ab839d7_icgraph" id="ubifs_2gc_8c_ad0088bd16e6b85c2c28124046ab839d7_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#a29dd378f4b22d45580bff155cbb275cd" title="ubifs_garbage_collect_leb" alt="" coords="149,1019,321,1045"/>
<area shape="rect" id="node3" href="ubifs_8h.html#a6aba86bcae816613915e10318fdf6b83" title="ubifs_garbage_collect" alt="" coords="369,791,517,817"/>
<area shape="rect" id="node44" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="720,1272,877,1299"/>
<area shape="rect" id="node4" href="ubifs_2journal_8c.html#a920088cf70f88cbb1142294e99e688d6" title="reserve_space" alt="" coords="565,487,672,513"/>
<area shape="rect" id="node34" href="budget_8c.html#a5ccd81c906fb851139ba3da031d26f12" title="run_gc" alt="" coords="588,791,649,817"/>
<area shape="rect" id="node5" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="736,259,861,285"/>
<area shape="rect" id="node6" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="943,1044,1059,1071"/>
<area shape="rect" id="node18" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="933,31,1070,57"/>
<area shape="rect" id="node21" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="930,107,1073,133"/>
<area shape="rect" id="node24" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="938,157,1065,184"/>
<area shape="rect" id="node26" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="941,259,1061,285"/>
<area shape="rect" id="node27" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="939,208,1063,235"/>
<area shape="rect" id="node28" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="929,360,1074,387"/>
<area shape="rect" id="node32" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="925,309,1077,336"/>
<area shape="rect" id="node7" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1160,1019,1251,1045"/>
<area shape="rect" id="node8" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1159,1221,1252,1248"/>
<area shape="rect" id="node9" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1164,1120,1247,1147"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1167,867,1244,893"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1160,917,1251,944"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1162,968,1249,995"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1161,1069,1250,1096"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1157,1171,1253,1197"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1154,1272,1257,1299"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="1367,1120,1463,1147"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1371,461,1458,488"/>
<area shape="rect" id="node19" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="1156,5,1255,32"/>
<area shape="rect" id="node20" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1365,208,1465,235"/>
<area shape="rect" id="node22" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="1144,107,1267,133"/>
<area shape="rect" id="node23" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="1130,56,1281,83"/>
<area shape="rect" id="node25" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1152,157,1259,184"/>
<area shape="rect" id="node29" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="1156,360,1255,387"/>
<area shape="rect" id="node30" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1348,613,1481,640"/>
<area shape="rect" id="node31" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="1544,613,1617,640"/>
<area shape="rect" id="node33" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="1157,309,1254,336"/>
<area shape="rect" id="node35" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="736,791,861,817"/>
<area shape="rect" id="node36" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="932,791,1071,817"/>
<area shape="rect" id="node37" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="1144,563,1267,589"/>
<area shape="rect" id="node38" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="1149,613,1262,640"/>
<area shape="rect" id="node39" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="1165,664,1245,691"/>
<area shape="rect" id="node40" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="1125,715,1285,741"/>
<area shape="rect" id="node41" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="1359,765,1470,792"/>
<area shape="rect" id="node42" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="1333,537,1496,564"/>
<area shape="rect" id="node43" href="ubifs_2ioctl_8c.html#a06251cc4602342e44b5ed0a1b39f7e60" title="setflags" alt="" coords="1171,765,1239,792"/>
<area shape="rect" id="node45" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="955,1323,1048,1349"/>
<area shape="rect" id="node48" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="939,1399,1064,1425"/>
<area shape="rect" id="node50" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="938,1221,1065,1248"/>
<area shape="rect" id="node46" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1151,1373,1260,1400"/>
<area shape="rect" id="node47" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="1368,1373,1461,1400"/>
<area shape="rect" id="node49" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="1144,1424,1267,1451"/>
</map>
</div>

</div>
</div>
<a id="a8280bb51ca0d10d6918bc0dc630a1ef1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8280bb51ca0d10d6918bc0dc630a1ef1">&#9670;&nbsp;</a></span>nondata_nodes_cmp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nondata_nodes_cmp </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>priv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct list_head *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct list_head *&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2gc_8c_a8280bb51ca0d10d6918bc0dc630a1ef1_cgraph.png" border="0" usemap="#ubifs_2gc_8c_a8280bb51ca0d10d6918bc0dc630a1ef1_cgraph" alt=""/></div>
<map name="ubifs_2gc_8c_a8280bb51ca0d10d6918bc0dc630a1ef1_cgraph" id="ubifs_2gc_8c_a8280bb51ca0d10d6918bc0dc630a1ef1_cgraph">
<area shape="rect" id="node2" href="key_8h.html#a06f47822510ef850cb7065778115453c" title="key_type" alt="" coords="198,5,273,32"/>
<area shape="rect" id="node3" href="key_8h.html#a4a12b97ed78e138baf7886a6df7ed50f" title="key_inum" alt="" coords="196,56,275,83"/>
<area shape="rect" id="node4" href="key_8h.html#acddf1ca88d72a37e06c5c608cd084656" title="key_hash" alt="" coords="196,107,275,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2gc_8c_a8280bb51ca0d10d6918bc0dc630a1ef1_icgraph.png" border="0" usemap="#ubifs_2gc_8c_a8280bb51ca0d10d6918bc0dc630a1ef1_icgraph" alt=""/></div>
<map name="ubifs_2gc_8c_a8280bb51ca0d10d6918bc0dc630a1ef1_icgraph" id="ubifs_2gc_8c_a8280bb51ca0d10d6918bc0dc630a1ef1_icgraph">
<area shape="rect" id="node2" href="ubifs_2gc_8c.html#a4ac9c370cb72439015edcddf81470d28" title="sort_nodes" alt="" coords="196,931,283,958"/>
<area shape="rect" id="node3" href="ubifs_2gc_8c.html#ad0088bd16e6b85c2c28124046ab839d7" title="move_nodes" alt="" coords="331,931,427,958"/>
<area shape="rect" id="node4" href="ubifs_8h.html#a29dd378f4b22d45580bff155cbb275cd" title="ubifs_garbage_collect_leb" alt="" coords="475,931,647,958"/>
<area shape="rect" id="node5" href="ubifs_8h.html#a6aba86bcae816613915e10318fdf6b83" title="ubifs_garbage_collect" alt="" coords="695,728,843,755"/>
<area shape="rect" id="node44" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="1045,1159,1203,1186"/>
<area shape="rect" id="node6" href="ubifs_2journal_8c.html#a920088cf70f88cbb1142294e99e688d6" title="reserve_space" alt="" coords="891,450,997,476"/>
<area shape="rect" id="node36" href="budget_8c.html#a5ccd81c906fb851139ba3da031d26f12" title="run_gc" alt="" coords="913,728,975,755"/>
<area shape="rect" id="node7" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="1061,247,1187,274"/>
<area shape="rect" id="node8" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="1269,931,1385,958"/>
<area shape="rect" id="node20" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="1258,196,1395,223"/>
<area shape="rect" id="node23" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="1255,95,1398,122"/>
<area shape="rect" id="node26" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="1263,146,1390,172"/>
<area shape="rect" id="node28" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="1267,247,1387,274"/>
<area shape="rect" id="node29" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="1265,19,1389,46"/>
<area shape="rect" id="node30" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="1254,399,1399,426"/>
<area shape="rect" id="node34" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="1251,298,1403,324"/>
<area shape="rect" id="node9" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1485,906,1576,932"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1484,1058,1577,1084"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1489,956,1572,983"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1492,754,1569,780"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1485,804,1576,831"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1487,855,1574,882"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1486,1108,1575,1135"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1483,1159,1579,1186"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1479,1007,1582,1034"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="1677,956,1773,983"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1682,602,1769,628"/>
<area shape="rect" id="node21" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="1481,196,1580,223"/>
<area shape="rect" id="node22" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1675,196,1775,223"/>
<area shape="rect" id="node24" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="1469,95,1592,122"/>
<area shape="rect" id="node25" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="1455,44,1606,71"/>
<area shape="rect" id="node27" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1477,146,1584,172"/>
<area shape="rect" id="node31" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="1481,450,1580,476"/>
<area shape="rect" id="node32" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1659,1108,1792,1135"/>
<area shape="rect" id="node33" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="1840,1108,1913,1135"/>
<area shape="rect" id="node35" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="1482,298,1579,324"/>
<area shape="rect" id="node37" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="1061,728,1187,755"/>
<area shape="rect" id="node38" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="1257,728,1396,755"/>
<area shape="rect" id="node39" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="1469,652,1592,679"/>
<area shape="rect" id="node40" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="1474,703,1587,730"/>
<area shape="rect" id="node41" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="1491,500,1571,527"/>
<area shape="rect" id="node42" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="1451,399,1611,426"/>
<area shape="rect" id="node43" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="1670,475,1781,502"/>
<area shape="rect" id="node45" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="1280,1210,1373,1236"/>
<area shape="rect" id="node48" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="1264,1286,1389,1312"/>
<area shape="rect" id="node50" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="1263,1108,1390,1135"/>
<area shape="rect" id="node46" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1476,1260,1585,1287"/>
<area shape="rect" id="node47" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="1679,1260,1772,1287"/>
<area shape="rect" id="node49" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="1469,1311,1592,1338"/>
</map>
</div>

</div>
</div>
<a id="a4ac9c370cb72439015edcddf81470d28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ac9c370cb72439015edcddf81470d28">&#9670;&nbsp;</a></span>sort_nodes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int sort_nodes </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structubifs__scan__leb.html">ubifs_scan_leb</a> *&#160;</td>
          <td class="paramname"><em>sleb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct list_head *&#160;</td>
          <td class="paramname"><em>nondata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>min</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>sort_nodes - sort nodes for GC. <code></code>: UBIFS file-system description object : describes nodes to sort and contains the result on exit : contains non-data nodes on exit : minimum node size is returned here</p>
<p>This function sorts the list of inodes to garbage collect. First of all, it kills obsolete nodes and separates data and non-data nodes to the -&gt;nodes and  lists correspondingly.</p>
<p>Data nodes are then sorted in block number order - this is important for bulk-read; data nodes with lower inode number go before data nodes with higher inode number, and data nodes with lower block number go before data nodes with higher block number;</p>
<p>Non-data nodes are sorted as follows. o First go inode nodes - they are sorted in descending length order. o Then go directory entry nodes - they are sorted in hash order, which should supposedly optimize 'readdir()'. Direntry nodes with lower parent inode number go before direntry nodes with higher parent inode number, and direntry nodes with lower name hash values go before direntry nodes with higher name hash values.</p>
<p>This function returns zero in case of success and a negative error code in case of failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2gc_8c_a4ac9c370cb72439015edcddf81470d28_cgraph.png" border="0" usemap="#ubifs_2gc_8c_a4ac9c370cb72439015edcddf81470d28_cgraph" alt=""/></div>
<map name="ubifs_2gc_8c_a4ac9c370cb72439015edcddf81470d28_cgraph" id="ubifs_2gc_8c_a4ac9c370cb72439015edcddf81470d28_cgraph">
<area shape="rect" id="node2" href="key_8h.html#a06f47822510ef850cb7065778115453c" title="key_type" alt="" coords="2101,599,2175,625"/>
<area shape="rect" id="node3" href="tnc_8c.html#a6a4e198020559a2622dfb16bdc5b3b24" title="ubifs_tnc_has_node" alt="" coords="140,664,279,691"/>
<area shape="rect" id="node36" href="ubifs_2gc_8c.html#ac95933275626e324cdaf46ebb4cac9e2" title="data_nodes_cmp" alt="" coords="1908,1060,2029,1087"/>
<area shape="rect" id="node37" href="ubifs_2gc_8c.html#a8280bb51ca0d10d6918bc0dc630a1ef1" title="nondata_nodes_cmp" alt="" coords="1897,857,2040,884"/>
<area shape="rect" id="node38" href="ubifs_2debug_8c.html#aef8aeeebc06bad29c72d11b616907f36" title="dbg_check_data_nodes\l_order" alt="" coords="1508,1057,1667,1098"/>
<area shape="rect" id="node40" href="ubifs_2debug_8c.html#a6dc74d37bb2a8227e5152f5960f02606" title="dbg_check_nondata_nodes\l_order" alt="" coords="1497,951,1677,993"/>
<area shape="rect" id="node4" href="tnc_8c.html#af4a7fe7d3853972004012eaa58fc7d3f" title="is_idx_node_in_tnc" alt="" coords="329,411,462,437"/>
<area shape="rect" id="node32" href="tnc_8c.html#a3232f2796c5e91880eccb4bfcce63ce0" title="is_leaf_node_in_tnc" alt="" coords="327,664,464,691"/>
<area shape="rect" id="node5" href="tnc_8c.html#a9a3d0b0e8f6fb62cd3fc14718c0971db" title="lookup_znode" alt="" coords="529,411,631,437"/>
<area shape="rect" id="node31" href="misc_8h.html#abe5c86108a05199a899138767ca1f42a" title="ubifs_zn_dirty" alt="" coords="529,157,631,184"/>
<area shape="rect" id="node6" href="tnc__misc_8c.html#a59f2b6d42e83b9a23712bb251112eb1b" title="ubifs_load_znode" alt="" coords="1024,539,1147,565"/>
<area shape="rect" id="node25" href="key_8h.html#a6395510bfa3e62eff60652c9624180e1" title="keys_cmp" alt="" coords="1349,796,1432,823"/>
<area shape="rect" id="node26" href="key_8h.html#a391b7c6e47045b125899fd494b93b2ed" title="is_hash_key" alt="" coords="1343,259,1438,285"/>
<area shape="rect" id="node27" href="tnc__misc_8c.html#a795e1a9542770ea482f128ed03e6a87f" title="ubifs_search_zbranch" alt="" coords="696,715,845,741"/>
<area shape="rect" id="node28" href="tnc_8c.html#a0411d12758cf4d8593fcc3d7c9b80a5d" title="left_znode" alt="" coords="729,461,812,488"/>
<area shape="rect" id="node29" href="tnc_8c.html#ad6989d53af75d6eb9a7b78f6335d3437" title="get_znode" alt="" coords="893,537,976,564"/>
<area shape="rect" id="node30" href="tnc_8c.html#aa498d8d889570756d93ad186764ab7e1" title="right_znode" alt="" coords="726,512,815,539"/>
<area shape="rect" id="node7" href="tnc__misc_8c.html#a8022243db51d1b7cef9ec4ff22bc0f3a" title="read_znode" alt="" coords="1195,541,1284,568"/>
<area shape="rect" id="node8" href="ubifs_2io_8c.html#ab1c29d586db30bacfa2c9a73369a8870" title="ubifs_read_node" alt="" coords="1332,541,1449,568"/>
<area shape="rect" id="node11" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1751,695,1823,721"/>
<area shape="rect" id="node13" href="ubifs_2debug_8c.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="1725,593,1849,620"/>
<area shape="rect" id="node18" href="key_8h.html#a5611c13d648e672825da064c90c8903a" title="key_read" alt="" coords="1931,720,2006,747"/>
<area shape="rect" id="node24" href="misc_8h.html#a1598cadb907a20f9e5dc3e7ee74edb1d" title="ubifs_idx_branch" alt="" coords="1909,644,2029,671"/>
<area shape="rect" id="node9" href="ubifs_2debug_8c.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="2097,5,2179,32"/>
<area shape="rect" id="node10" href="ubifs_2io_8c.html#ab6a2a3c4a79d6d4c52350540437d3cb3" title="ubifs_leb_read" alt="" coords="1534,593,1641,620"/>
<area shape="rect" id="node12" href="ubifs_2io_8c.html#ab9b2f0cc24eff9f69bd606979eb3a53e" title="ubifs_check_node" alt="" coords="1524,543,1651,569"/>
<area shape="rect" id="node14" href="ubifs_2debug_8c.html#a40190f9f60ac94040c30dbd97c73a3ca" title="dump_ch" alt="" coords="1931,56,2006,83"/>
<area shape="rect" id="node16" href="ubifs_2debug_8c.html#a4b30ad73e46b72b5043aa4efa7fb8d9a" title="get_key_hash" alt="" coords="1917,543,2020,569"/>
<area shape="rect" id="node17" href="ubifs_2debug_8c.html#af1196269cd9c24affacc60e33f960f49" title="get_key_fmt" alt="" coords="1921,593,2016,620"/>
<area shape="rect" id="node19" href="ubifs_2debug_8c.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="1908,908,2029,935"/>
<area shape="rect" id="node15" href="ubifs_2debug_8c.html#a0137ecd738390d71f938f27be78c4477" title="dbg_gtype" alt="" coords="2097,56,2179,83"/>
<area shape="rect" id="node20" href="key_8h.html#a4a12b97ed78e138baf7886a6df7ed50f" title="key_inum" alt="" coords="2099,959,2177,985"/>
<area shape="rect" id="node21" href="ubifs_2debug_8c.html#ad6af0af711fdb082f6df4eaeb4d82fe6" title="get_key_type" alt="" coords="2088,908,2188,935"/>
<area shape="rect" id="node22" href="key_8h.html#acddf1ca88d72a37e06c5c608cd084656" title="key_hash" alt="" coords="2099,857,2177,884"/>
<area shape="rect" id="node23" href="key_8h.html#a10c13375b52dbb12be6f9b685d1d1ba7" title="key_block" alt="" coords="2097,1085,2179,1112"/>
<area shape="rect" id="node33" href="tnc_8c.html#a2004703a60d098f1644d4f3e25338759" title="ubifs_lookup_level0" alt="" coords="512,715,648,741"/>
<area shape="rect" id="node34" href="tnc_8c.html#ad078bd3a3bb09883e602d4c2add8267e" title="tnc_prev" alt="" coords="735,664,807,691"/>
<area shape="rect" id="node35" href="tnc_8c.html#aa6a0a93befc7348c0e11ee3a038d8d81" title="tnc_next" alt="" coords="544,613,616,640"/>
<area shape="rect" id="node39" href="ubifs_2debug_8h.html#ad9c4d68015fb8802b1553a53880d43cc" title="dbg_is_chk_gen" alt="" coords="1729,1060,1845,1087"/>
<area shape="rect" id="node41" href="ubifs_2misc_8c.html#a49c185988382ac9b2f28935dd44a0441" title="ubifs_msg" alt="" coords="1746,908,1829,935"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2gc_8c_a4ac9c370cb72439015edcddf81470d28_icgraph.png" border="0" usemap="#ubifs_2gc_8c_a4ac9c370cb72439015edcddf81470d28_icgraph" alt=""/></div>
<map name="ubifs_2gc_8c_a4ac9c370cb72439015edcddf81470d28_icgraph" id="ubifs_2gc_8c_a4ac9c370cb72439015edcddf81470d28_icgraph">
<area shape="rect" id="node2" href="ubifs_2gc_8c.html#ad0088bd16e6b85c2c28124046ab839d7" title="move_nodes" alt="" coords="140,960,236,986"/>
<area shape="rect" id="node3" href="ubifs_8h.html#a29dd378f4b22d45580bff155cbb275cd" title="ubifs_garbage_collect_leb" alt="" coords="284,960,456,986"/>
<area shape="rect" id="node4" href="ubifs_8h.html#a6aba86bcae816613915e10318fdf6b83" title="ubifs_garbage_collect" alt="" coords="504,757,652,784"/>
<area shape="rect" id="node44" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="855,1213,1012,1240"/>
<area shape="rect" id="node5" href="ubifs_2journal_8c.html#a920088cf70f88cbb1142294e99e688d6" title="reserve_space" alt="" coords="700,478,807,505"/>
<area shape="rect" id="node35" href="budget_8c.html#a5ccd81c906fb851139ba3da031d26f12" title="run_gc" alt="" coords="723,757,784,784"/>
<area shape="rect" id="node6" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="871,250,996,277"/>
<area shape="rect" id="node7" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="1078,934,1194,961"/>
<area shape="rect" id="node19" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="1067,301,1205,328"/>
<area shape="rect" id="node22" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="1065,98,1207,125"/>
<area shape="rect" id="node25" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="1073,149,1199,176"/>
<area shape="rect" id="node27" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="1076,200,1196,226"/>
<area shape="rect" id="node28" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="1074,22,1198,49"/>
<area shape="rect" id="node29" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="1063,352,1209,378"/>
<area shape="rect" id="node33" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="1060,250,1212,277"/>
<area shape="rect" id="node8" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1295,909,1385,936"/>
<area shape="rect" id="node9" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1293,960,1387,986"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1299,1010,1381,1037"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1301,757,1379,784"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1295,808,1385,834"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1297,858,1383,885"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1295,1112,1385,1138"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1292,1162,1388,1189"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1289,1213,1391,1240"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="1501,960,1597,986"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1506,706,1593,733"/>
<area shape="rect" id="node20" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="1291,301,1389,328"/>
<area shape="rect" id="node21" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1499,301,1599,328"/>
<area shape="rect" id="node23" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="1279,48,1401,74"/>
<area shape="rect" id="node24" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="1265,98,1415,125"/>
<area shape="rect" id="node26" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1287,149,1393,176"/>
<area shape="rect" id="node30" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="1291,352,1389,378"/>
<area shape="rect" id="node31" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1483,1188,1616,1214"/>
<area shape="rect" id="node32" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="1679,1188,1752,1214"/>
<area shape="rect" id="node34" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="1291,250,1389,277"/>
<area shape="rect" id="node36" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="871,757,996,784"/>
<area shape="rect" id="node37" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="1067,757,1205,784"/>
<area shape="rect" id="node38" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="1279,554,1401,581"/>
<area shape="rect" id="node39" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="1283,605,1397,632"/>
<area shape="rect" id="node40" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="1300,656,1380,682"/>
<area shape="rect" id="node41" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="1260,1061,1420,1088"/>
<area shape="rect" id="node42" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="1494,1061,1605,1088"/>
<area shape="rect" id="node43" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="1468,1010,1631,1037"/>
<area shape="rect" id="node45" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="1089,1264,1183,1290"/>
<area shape="rect" id="node48" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="1073,1340,1199,1366"/>
<area shape="rect" id="node50" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="1073,1162,1199,1189"/>
<area shape="rect" id="node46" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1285,1314,1395,1341"/>
<area shape="rect" id="node47" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="1503,1314,1596,1341"/>
<area shape="rect" id="node49" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="1279,1365,1401,1392"/>
</map>
</div>

</div>
</div>
<a id="ac8af282d626a91c08e5e158b8e55ec20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8af282d626a91c08e5e158b8e55ec20">&#9670;&nbsp;</a></span>switch_gc_head()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int switch_gc_head </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>switch_gc_head - switch the garbage collection journal head. <code></code>: UBIFS file-system description object : buffer to write : length of the buffer to write : LEB number written is returned here : offset written is returned here</p>
<p>This function switch the GC head to the next LEB which is reserved in <code></code>-&gt;gc_lnum. Returns %0 in case of success, %-EAGAIN if commit is required, and other negative error code in case of failures. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2gc_8c_ac8af282d626a91c08e5e158b8e55ec20_cgraph.png" border="0" usemap="#ubifs_2gc_8c_ac8af282d626a91c08e5e158b8e55ec20_cgraph" alt=""/></div>
<map name="ubifs_2gc_8c_ac8af282d626a91c08e5e158b8e55ec20_cgraph" id="ubifs_2gc_8c_ac8af282d626a91c08e5e158b8e55ec20_cgraph">
<area shape="rect" id="node2" href="ubifs_2io_8c.html#a3e6d29ad192528c05f246cd31a1732fb" title="ubifs_wbuf_sync_nolock" alt="" coords="385,90,551,116"/>
<area shape="rect" id="node35" href="ubifs_2io_8c.html#ad9d3a62a61d21e1faa60cd6e630c41ac" title="ubifs_leb_unmap" alt="" coords="629,444,749,471"/>
<area shape="rect" id="node37" href="ubifs_2log_8c.html#a8b30a0dc99186d8f07ee2f47693f11b7" title="ubifs_add_bud_to_log" alt="" coords="178,520,326,547"/>
<area shape="rect" id="node50" href="ubifs_2io_8c.html#a4bf09b0b677c1ca6d0b034d91281d2f3" title="ubifs_wbuf_seek_nolock" alt="" coords="169,267,335,294"/>
<area shape="rect" id="node3" href="ubifs_2io_8c.html#aeef91391de4e0f46023ab0afac3a2335" title="cancel_wbuf_timer_nolock" alt="" coords="601,39,777,66"/>
<area shape="rect" id="node4" href="ubifs_2debug_8c.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="1407,191,1488,218"/>
<area shape="rect" id="node5" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="843,242,921,268"/>
<area shape="rect" id="node6" href="ubifs_2io_8c.html#a02909cfc9d3a0100f549390c7d464632" title="ubifs_leb_write" alt="" coords="635,343,744,370"/>
<area shape="rect" id="node7" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="1198,292,1317,319"/>
<area shape="rect" id="node8" href="ubifs_2debug_8c.html#af929a6951e19c79f1235738386005c06" title="dbg_leb_write" alt="" coords="831,292,933,319"/>
<area shape="rect" id="node24" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1411,1356,1483,1383"/>
<area shape="rect" id="node34" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="829,394,935,420"/>
<area shape="rect" id="node9" href="ubifs_2debug_8h.html#ab599356d6c84ddd2c7b9001b452c30bd" title="dbg_is_power_cut" alt="" coords="995,799,1121,826"/>
<area shape="rect" id="node31" href="ubifs_2debug_8c.html#a67b6fc23cfbf882431d33323a03ef74c" title="power_cut_emulated" alt="" coords="987,495,1129,522"/>
<area shape="rect" id="node32" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="1215,242,1300,268"/>
<area shape="rect" id="node33" href="ubifs_2debug_8c.html#a90853c3e5be760b8c7d76c2d39fdb28c" title="corrupt_data" alt="" coords="1011,242,1105,268"/>
<area shape="rect" id="node10" href="ubifs_2debug_8h.html#aed9c32fd77ce70a2d917ab58c56189c2" title="ubifs_debugging_init" alt="" coords="1187,951,1327,978"/>
<area shape="rect" id="node11" href="ubifs_2debug_8h.html#a1e62d7c391f555902a25f8060eb6f1ec" title="ubifs_debugging_exit" alt="" coords="1185,1002,1329,1028"/>
<area shape="rect" id="node12" href="ubifs_2debug_8h.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="1216,1052,1299,1079"/>
<area shape="rect" id="node13" href="ubifs_2debug_8h.html#a615a670f26d4407b52175ce5f3faf594" title="dbg_cstate" alt="" coords="1214,1103,1301,1130"/>
<area shape="rect" id="node14" href="ubifs_2debug_8h.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="1217,1154,1298,1180"/>
<area shape="rect" id="node15" href="ubifs_2debug_8h.html#a4184d82b0b2ff0fffc6ab3d4de4a1e7a" title="dbg_get_key_dump" alt="" coords="1190,1204,1325,1231"/>
<area shape="rect" id="node16" href="ubifs_2debug_8h.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="1197,495,1318,522"/>
<area shape="rect" id="node17" href="ubifs_2debug_8h.html#a6ecc9bff59f14d28615ed14fa5323681" title="ubifs_dump_inode" alt="" coords="1194,546,1321,572"/>
<area shape="rect" id="node18" href="ubifs_2debug_8h.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="1195,596,1319,623"/>
<area shape="rect" id="node19" href="ubifs_2debug_8h.html#acfcbe45894b3b41385c1f9891d57bb97" title="ubifs_dump_budget_req" alt="" coords="1177,647,1337,674"/>
<area shape="rect" id="node20" href="ubifs_2debug_8h.html#ab351e7abb59edb97d57bd44dd83b0484" title="ubifs_dump_lstats" alt="" coords="1193,698,1321,724"/>
<area shape="rect" id="node21" href="ubifs_2debug_8h.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="1195,343,1319,370"/>
<area shape="rect" id="node22" href="ubifs_2debug_8h.html#ad04e55858b69b78f20ea8b0fb79f9f27" title="ubifs_dump_lprop" alt="" coords="1195,394,1319,420"/>
<area shape="rect" id="node23" href="ubifs_2debug_8h.html#a2fa0aeaaa556f0b13d098456ef7d86d4" title="ubifs_dump_lprops" alt="" coords="1192,1255,1323,1282"/>
<area shape="rect" id="node25" href="ubifs_2debug_8h.html#afc25fcc00c516fab54a12303d87bc100" title="ubifs_dump_lpt_info" alt="" coords="1188,799,1327,826"/>
<area shape="rect" id="node26" href="ubifs_2debug_8h.html#afa1952f7d3c2c791a330e3dc245c5a83" title="ubifs_dump_leb" alt="" coords="1201,900,1314,927"/>
<area shape="rect" id="node28" href="ubifs_2debug_8h.html#a454a80414a371832b3f68f828f6a6353" title="ubifs_dump_sleb" alt="" coords="1197,444,1317,471"/>
<area shape="rect" id="node29" href="ubifs_2debug_8h.html#a56365d730ac6932bf3163a8ba7279779" title="ubifs_dump_znode" alt="" coords="1192,850,1323,876"/>
<area shape="rect" id="node30" href="ubifs_2debug_8h.html#a5600b63b8362df17ed46c4e20784fb6c" title="ubifs_dump_heap" alt="" coords="1195,748,1319,775"/>
<area shape="rect" id="node27" href="ubifs_2debug_8c.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="1385,900,1509,927"/>
<area shape="rect" id="node36" href="ubifs_2debug_8c.html#a6ba17156289f8b8ecaed40dbafc04858" title="dbg_leb_unmap" alt="" coords="825,495,939,522"/>
<area shape="rect" id="node38" href="ubifs_2log_8c.html#a3dd7859b83714ed7d9692cf92a391fd9" title="empty_log_bytes" alt="" coords="407,622,529,648"/>
<area shape="rect" id="node39" href="ubifs_2commit_8c.html#a6e9dcff4b0f768c14f6f8448f4b1343e" title="ubifs_commit_required" alt="" coords="391,1407,545,1434"/>
<area shape="rect" id="node41" href="ubifs_2commit_8c.html#a6c27328fd39184ba2e1bdfa1970275e7" title="ubifs_request_bg_commit" alt="" coords="383,1356,553,1383"/>
<area shape="rect" id="node43" href="misc_8h.html#abf53e0ff9d9f9f6fefb9a9efbf709496" title="ubifs_next_log_lnum" alt="" coords="397,520,539,547"/>
<area shape="rect" id="node44" href="ubifs_2io_8c.html#a8d3619a60498527530b0ed01ba5c6a82" title="ubifs_leb_map" alt="" coords="636,672,743,699"/>
<area shape="rect" id="node46" href="ubifs_2io_8c.html#a5e156b540025dd2266e7f4c6c302356e" title="ubifs_write_node" alt="" coords="408,368,528,395"/>
<area shape="rect" id="node49" href="ubifs_2log_8c.html#a3366b2b2350ca5e120af4be6f2e67b79" title="ubifs_add_bud" alt="" coords="1005,191,1111,218"/>
<area shape="rect" id="node40" href="ubifs_2debug_8c.html#a615a670f26d4407b52175ce5f3faf594" title="dbg_cstate" alt="" coords="646,1407,733,1434"/>
<area shape="rect" id="node42" href="misc_8h.html#adb074744f746423579a917e286726a65" title="ubifs_wake_up_bgt" alt="" coords="622,1356,757,1383"/>
<area shape="rect" id="node45" href="ubifs_2debug_8c.html#a56743d00da08f53b07b233e616378b33" title="dbg_leb_map" alt="" coords="833,672,931,699"/>
<area shape="rect" id="node47" href="ubifs_2debug_8c.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="648,394,731,420"/>
<area shape="rect" id="node48" href="ubifs_2io_8c.html#acfc2ca3ffa8d094855c2e59551f3a767" title="ubifs_prepare_node" alt="" coords="622,267,757,294"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2gc_8c_ac8af282d626a91c08e5e158b8e55ec20_icgraph.png" border="0" usemap="#ubifs_2gc_8c_ac8af282d626a91c08e5e158b8e55ec20_icgraph" alt=""/></div>
<map name="ubifs_2gc_8c_ac8af282d626a91c08e5e158b8e55ec20_icgraph" id="ubifs_2gc_8c_ac8af282d626a91c08e5e158b8e55ec20_icgraph">
<area shape="rect" id="node2" href="ubifs_2gc_8c.html#ad0088bd16e6b85c2c28124046ab839d7" title="move_nodes" alt="" coords="169,960,265,986"/>
<area shape="rect" id="node3" href="ubifs_8h.html#a29dd378f4b22d45580bff155cbb275cd" title="ubifs_garbage_collect_leb" alt="" coords="313,960,485,986"/>
<area shape="rect" id="node4" href="ubifs_8h.html#a6aba86bcae816613915e10318fdf6b83" title="ubifs_garbage_collect" alt="" coords="533,757,681,784"/>
<area shape="rect" id="node44" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="884,1213,1041,1240"/>
<area shape="rect" id="node5" href="ubifs_2journal_8c.html#a920088cf70f88cbb1142294e99e688d6" title="reserve_space" alt="" coords="729,478,836,505"/>
<area shape="rect" id="node35" href="budget_8c.html#a5ccd81c906fb851139ba3da031d26f12" title="run_gc" alt="" coords="752,757,813,784"/>
<area shape="rect" id="node6" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="900,250,1025,277"/>
<area shape="rect" id="node7" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="1107,934,1223,961"/>
<area shape="rect" id="node19" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="1097,301,1234,328"/>
<area shape="rect" id="node22" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="1094,98,1237,125"/>
<area shape="rect" id="node25" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="1102,149,1229,176"/>
<area shape="rect" id="node27" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="1105,200,1225,226"/>
<area shape="rect" id="node28" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="1103,22,1227,49"/>
<area shape="rect" id="node29" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="1093,352,1238,378"/>
<area shape="rect" id="node33" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="1089,250,1241,277"/>
<area shape="rect" id="node8" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1324,909,1415,936"/>
<area shape="rect" id="node9" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1323,960,1416,986"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1328,1010,1411,1037"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1331,757,1408,784"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1324,808,1415,834"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1326,858,1413,885"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1325,1112,1414,1138"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1321,1162,1417,1189"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1318,1213,1421,1240"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="1531,960,1627,986"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1535,706,1622,733"/>
<area shape="rect" id="node20" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="1320,301,1419,328"/>
<area shape="rect" id="node21" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1529,301,1629,328"/>
<area shape="rect" id="node23" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="1308,48,1431,74"/>
<area shape="rect" id="node24" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="1294,98,1445,125"/>
<area shape="rect" id="node26" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1316,149,1423,176"/>
<area shape="rect" id="node30" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="1320,352,1419,378"/>
<area shape="rect" id="node31" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1512,1188,1645,1214"/>
<area shape="rect" id="node32" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="1708,1188,1781,1214"/>
<area shape="rect" id="node34" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="1321,250,1418,277"/>
<area shape="rect" id="node36" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="900,757,1025,784"/>
<area shape="rect" id="node37" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="1096,757,1235,784"/>
<area shape="rect" id="node38" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="1308,554,1431,581"/>
<area shape="rect" id="node39" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="1313,605,1426,632"/>
<area shape="rect" id="node40" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="1329,656,1409,682"/>
<area shape="rect" id="node41" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="1289,1061,1449,1088"/>
<area shape="rect" id="node42" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="1523,1061,1634,1088"/>
<area shape="rect" id="node43" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="1497,1010,1660,1037"/>
<area shape="rect" id="node45" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="1119,1264,1212,1290"/>
<area shape="rect" id="node48" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="1103,1340,1228,1366"/>
<area shape="rect" id="node50" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="1102,1162,1229,1189"/>
<area shape="rect" id="node46" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1315,1314,1424,1341"/>
<area shape="rect" id="node47" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="1532,1314,1625,1341"/>
<area shape="rect" id="node49" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="1308,1365,1431,1392"/>
</map>
</div>

</div>
</div>
<a id="af6784f1871dcccddfaa64cc9ad74c3ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6784f1871dcccddfaa64cc9ad74c3ea">&#9670;&nbsp;</a></span>ubifs_destroy_idx_gc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ubifs_destroy_idx_gc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_destroy_idx_gc - destroy idx_gc list. <code></code>: UBIFS file-system description object</p>
<p>This function destroys the <code></code>-&gt;idx_gc list. It is called when unmounting so locks are not needed. Returns zero in case of success and a negative error code in case of failure. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2gc_8c_af6784f1871dcccddfaa64cc9ad74c3ea_icgraph.png" border="0" usemap="#ubifs_2gc_8c_af6784f1871dcccddfaa64cc9ad74c3ea_icgraph" alt=""/></div>
<map name="ubifs_2gc_8c_af6784f1871dcccddfaa64cc9ad74c3ea_icgraph" id="ubifs_2gc_8c_af6784f1871dcccddfaa64cc9ad74c3ea_icgraph">
<area shape="rect" id="node2" href="ubifs_2super_8c.html#aab65fe9d1f499e203abd72e1c7ddafc6" title="destroy_journal" alt="" coords="199,31,309,57"/>
<area shape="rect" id="node3" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="361,5,454,32"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a3e27f93e2785f1ef9580acc2fa8db34d" title="ubifs_umount" alt="" coords="357,56,457,83"/>
<area shape="rect" id="node4" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="508,5,617,32"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="668,5,761,32"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#ae2f59fbee4bf3523cc44fbe10cc38917" title="ubifs_put_super" alt="" coords="505,56,620,83"/>
</map>
</div>

</div>
</div>
<a id="a6aba86bcae816613915e10318fdf6b83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6aba86bcae816613915e10318fdf6b83">&#9670;&nbsp;</a></span>ubifs_garbage_collect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ubifs_garbage_collect </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>anyway</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_garbage_collect - UBIFS garbage collector. <code></code>: UBIFS file-system description object : do GC even if there are free LEBs</p>
<p>This function does out-of-place garbage collection. The return codes are: o positive LEB number if the LEB has been freed and may be used; o %-EAGAIN if the caller has to run commit; o %-ENOSPC if GC failed to make any progress; o other negative error codes in case of other errors.</p>
<p>Garbage collector writes data to the journal when GC'ing data LEBs, and just marking indexing nodes dirty when GC'ing indexing LEBs. Thus, at some point commit may be required. But commit cannot be run from inside GC, because the caller might be holding the commit lock, so %-EAGAIN is returned instead; And this error code means that the caller has to run commit, and re-run GC if there is still no free space.</p>
<p>There are many reasons why this function may return %-EAGAIN: o the log is full and there is no space to write an LEB reference for <code></code>-&gt;gc_lnum; o the journal is too large and exceeds size limitations; o GC moved indexing LEBs, but they can be used only after the commit; o the shrinker fails to find clean znodes to free and requests the commit; o etc.</p>
<p>Note, if the file-system is close to be full, this function may return %-EAGAIN infinitely, so the caller has to limit amount of re-invocations of the function. E.g., this happens if the limits on the journal size are too tough and GC writes too much to the journal before an LEB is freed. This might also mean that the journal is too large, and the TNC becomes to big, so that the shrinker is constantly called, finds not clean znodes to free, and requests commit. Well, this may also happen if the journal is all right, but another kernel process consumes too much memory. Anyway, infinite %-EAGAIN may happen, but in some extreme/misconfiguration cases. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2gc_8c_a6aba86bcae816613915e10318fdf6b83_cgraph.png" border="0" usemap="#ubifs_2gc_8c_a6aba86bcae816613915e10318fdf6b83_cgraph" alt=""/></div>
<map name="ubifs_2gc_8c_a6aba86bcae816613915e10318fdf6b83_cgraph" id="ubifs_2gc_8c_a6aba86bcae816613915e10318fdf6b83_cgraph">
<area shape="rect" id="node2" href="ubifs_2commit_8c.html#a18183f6ca9e5e865909aa32d50f4be4b" title="ubifs_gc_should_commit" alt="" coords="204,448,371,475"/>
<area shape="rect" id="node3" href="ubifs_2commit_8c.html#a6e9dcff4b0f768c14f6f8448f4b1343e" title="ubifs_commit_required" alt="" coords="211,499,364,525"/>
<area shape="rect" id="node5" href="find_8c.html#aa0e0f58e74f915d84712f6a1367b75d0" title="ubifs_find_dirty_leb" alt="" coords="426,183,561,209"/>
<area shape="rect" id="node18" href="ubifs_2gc_8c.html#a29dd378f4b22d45580bff155cbb275cd" title="ubifs_garbage_collect_leb" alt="" coords="201,651,373,677"/>
<area shape="rect" id="node21" href="ubifs_2io_8c.html#a3e6d29ad192528c05f246cd31a1732fb" title="ubifs_wbuf_sync_nolock" alt="" coords="821,904,987,931"/>
<area shape="rect" id="node28" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="1265,1132,1371,1159"/>
<area shape="rect" id="node31" href="ubifs_2io_8c.html#ad9d3a62a61d21e1faa60cd6e630c41ac" title="ubifs_leb_unmap" alt="" coords="844,1081,964,1108"/>
<area shape="rect" id="node50" href="misc_8h.html#a61ad06675d59063a2171172f8ba94c79" title="ubifs_return_leb" alt="" coords="230,600,345,627"/>
<area shape="rect" id="node4" href="ubifs_2debug_8c.html#a615a670f26d4407b52175ce5f3faf594" title="dbg_cstate" alt="" coords="450,132,537,159"/>
<area shape="rect" id="node6" href="misc_8h.html#aa89c2768eb94f129c6afbe47420b44ba" title="ubifs_get_lprops" alt="" coords="635,208,752,235"/>
<area shape="rect" id="node7" href="lprops_8c.html#af7bb5628372135952187c4c37b9a0a68" title="ubifs_fast_find_empty" alt="" coords="618,107,769,133"/>
<area shape="rect" id="node8" href="lprops_8c.html#af4f3f200dc1d36660281ec0282293308" title="ubifs_fast_find_freeable" alt="" coords="613,5,773,32"/>
<area shape="rect" id="node9" href="find_8c.html#a715c6a77d5e6922f0b465eaba93f3a99" title="scan_for_dirty" alt="" coords="641,56,745,83"/>
<area shape="rect" id="node13" href="lprops_8c.html#abfc4c6a75b37762f214cbc91f0ebe664" title="ubifs_change_lp" alt="" coords="635,309,751,336"/>
<area shape="rect" id="node17" href="misc_8h.html#a6dce2c34ec97d74cf4be59e0201bdb3e" title="ubifs_release_lprops" alt="" coords="623,157,764,184"/>
<area shape="rect" id="node10" href="lpt_8c.html#a34800df1b6052b492ca05c589dfec386" title="ubifs_lpt_scan_nolock" alt="" coords="829,81,979,108"/>
<area shape="rect" id="node11" href="find_8c.html#a15d8baed5e0f491f1c86cab2a049acb7" title="scan_for_dirty_cb" alt="" coords="841,31,967,57"/>
<area shape="rect" id="node12" href="lpt_8c.html#ade4e71b1fffa493cfb997feaff2c0638" title="ubifs_lpt_lookup_dirty" alt="" coords="830,157,978,184"/>
<area shape="rect" id="node14" href="lprops_8c.html#a911df1bb1dc58cf096c97ce547539153" title="is_lprops_dirty" alt="" coords="851,259,957,285"/>
<area shape="rect" id="node15" href="lprops_8c.html#a54fa4acd96a49b1bbe2baeac4dbd0c0b" title="ubifs_calc_dark" alt="" coords="847,309,961,336"/>
<area shape="rect" id="node16" href="lprops_8c.html#a2f083caeaebac06c1f51d7c7d34f5c13" title="change_category" alt="" coords="843,208,965,235"/>
<area shape="rect" id="node19" href="ubifs_2gc_8c.html#a2f4daf5146e689ec3841b9a9840658f4" title="gc_sync_wbufs" alt="" coords="437,904,550,931"/>
<area shape="rect" id="node30" href="lprops_8c.html#aeb3c0f6274cdeba0c778d57f29ab39bf" title="ubifs_change_one_lp" alt="" coords="421,309,565,336"/>
<area shape="rect" id="node33" href="ubifs_2scan_8c.html#a1689915d09ec86f76b30ee598b10f34e" title="ubifs_scan" alt="" coords="861,473,947,500"/>
<area shape="rect" id="node37" href="key_8h.html#a5611c13d648e672825da064c90c8903a" title="key_read" alt="" coords="1281,651,1355,677"/>
<area shape="rect" id="node40" href="ubifs_2scan_8c.html#a7e559a0c70f1f17d0886f600cd59a639" title="ubifs_scan_destroy" alt="" coords="1055,651,1190,677"/>
<area shape="rect" id="node41" href="misc_8h.html#ac244bb6ab2f45cd8b870edc621d20deb" title="ubifs_idx_key" alt="" coords="442,625,545,652"/>
<area shape="rect" id="node42" href="tnc_8c.html#a3a388ce018049e8a7da4da512f8e1dcf" title="ubifs_dirty_idx_node" alt="" coords="423,676,564,703"/>
<area shape="rect" id="node45" href="ubifs_2gc_8c.html#ad0088bd16e6b85c2c28124046ab839d7" title="move_nodes" alt="" coords="445,828,541,855"/>
<area shape="rect" id="node20" href="misc_8h.html#af8fd16c04f42f2a56d86f0f7a4924ecc" title="ubifs_wbuf_sync" alt="" coords="633,929,753,956"/>
<area shape="rect" id="node22" href="ubifs_2io_8c.html#aeef91391de4e0f46023ab0afac3a2335" title="cancel_wbuf_timer_nolock" alt="" coords="1035,777,1211,804"/>
<area shape="rect" id="node23" href="ubifs_2debug_8c.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="1082,828,1163,855"/>
<area shape="rect" id="node24" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="1083,879,1162,905"/>
<area shape="rect" id="node25" href="ubifs_2io_8c.html#a02909cfc9d3a0100f549390c7d464632" title="ubifs_leb_write" alt="" coords="1068,980,1177,1007"/>
<area shape="rect" id="node26" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="1259,1005,1377,1032"/>
<area shape="rect" id="node27" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1282,448,1354,475"/>
<area shape="rect" id="node29" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="1425,1132,1511,1159"/>
<area shape="rect" id="node32" href="ubifs_2debug_8c.html#a6ba17156289f8b8ecaed40dbafc04858" title="dbg_leb_unmap" alt="" coords="1066,1081,1179,1108"/>
<area shape="rect" id="node34" href="ubifs_2scan_8c.html#ac9e61563282a3ab80fa1947e24f1726e" title="ubifs_start_scan" alt="" coords="1063,397,1182,424"/>
<area shape="rect" id="node35" href="ubifs_2scan_8c.html#ab974ec909e594f54f7773880688a2334" title="ubifs_scan_a_node" alt="" coords="1055,448,1190,475"/>
<area shape="rect" id="node36" href="ubifs_2scan_8c.html#a582c1d1b35a0fe0cd1d73f2f88adaa67" title="ubifs_add_snod" alt="" coords="1066,600,1179,627"/>
<area shape="rect" id="node38" href="ubifs_2scan_8c.html#a7a20ae4d7200218e4b1b4ce3cd803b21" title="ubifs_end_scan" alt="" coords="1066,549,1179,576"/>
<area shape="rect" id="node39" href="ubifs_2scan_8c.html#a18197e05567059efbb981ebe037255bb" title="ubifs_scanned_corruption" alt="" coords="1037,499,1208,525"/>
<area shape="rect" id="node43" href="tnc_8c.html#a9a3d0b0e8f6fb62cd3fc14718c0971db" title="lookup_znode" alt="" coords="642,676,745,703"/>
<area shape="rect" id="node44" href="tnc_8c.html#a609646516a8a0f3fd9f2b2a1a1849737" title="dirty_cow_bottom_up" alt="" coords="620,625,767,652"/>
<area shape="rect" id="node46" href="v9fs_8c.html#a962ef1b35907bdda12de2cddce8bc638" title="LIST_HEAD" alt="" coords="646,879,741,905"/>
<area shape="rect" id="node47" href="ubifs_2gc_8c.html#ac8af282d626a91c08e5e158b8e55ec20" title="switch_gc_head" alt="" coords="635,1031,751,1057"/>
<area shape="rect" id="node48" href="ubifs_2gc_8c.html#a4ac9c370cb72439015edcddf81470d28" title="sort_nodes" alt="" coords="650,777,737,804"/>
<area shape="rect" id="node49" href="ubifs_2gc_8c.html#a007c1b86e6d577ada4c13e4f6f2307d3" title="move_node" alt="" coords="649,828,738,855"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2gc_8c_a6aba86bcae816613915e10318fdf6b83_icgraph.png" border="0" usemap="#ubifs_2gc_8c_a6aba86bcae816613915e10318fdf6b83_icgraph" alt=""/></div>
<map name="ubifs_2gc_8c_a6aba86bcae816613915e10318fdf6b83_icgraph" id="ubifs_2gc_8c_a6aba86bcae816613915e10318fdf6b83_icgraph">
<area shape="rect" id="node2" href="ubifs_2journal_8c.html#a920088cf70f88cbb1142294e99e688d6" title="reserve_space" alt="" coords="201,316,308,343"/>
<area shape="rect" id="node38" href="budget_8c.html#a5ccd81c906fb851139ba3da031d26f12" title="run_gc" alt="" coords="224,424,285,451"/>
<area shape="rect" id="node3" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="356,259,481,285"/>
<area shape="rect" id="node4" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="547,487,663,513"/>
<area shape="rect" id="node21" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="537,208,674,235"/>
<area shape="rect" id="node26" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="534,56,677,83"/>
<area shape="rect" id="node30" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="542,107,669,133"/>
<area shape="rect" id="node32" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="545,157,665,184"/>
<area shape="rect" id="node33" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="543,259,667,285"/>
<area shape="rect" id="node34" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="533,917,678,944"/>
<area shape="rect" id="node36" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="529,1044,681,1071"/>
<area shape="rect" id="node5" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="764,765,855,792"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="763,563,856,589"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="768,309,851,336"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="771,613,848,640"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="764,664,855,691"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="766,411,853,437"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="765,512,854,539"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="761,360,857,387"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="758,461,861,488"/>
<area shape="rect" id="node6" href="ubifs_2xattr_8c.html#a2c0f8e28d408b8e89b4ce7d6047af912" title="ubifs_xattr_set" alt="" coords="965,1069,1073,1096"/>
<area shape="rect" id="node7" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1162,1019,1295,1045"/>
<area shape="rect" id="node8" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="1357,1044,1431,1071"/>
<area shape="rect" id="node9" href="ubifs_2crypto_8c.html#a4984848c1f6ebc630f98d30a9bbf2ed3" title="ubifs_crypt_set_context" alt="" coords="1148,1120,1309,1147"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="971,348,1067,375"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="975,247,1062,273"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="1179,184,1279,211"/>
<area shape="rect" id="node22" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="760,208,859,235"/>
<area shape="rect" id="node23" href="ubifs_2file_8c.html#a2ad22c013a0dccfd9f49e114ed89dfa6" title="ubifs_writepage" alt="" coords="962,196,1075,223"/>
<area shape="rect" id="node24" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="969,297,1069,324"/>
<area shape="rect" id="node25" href="ubifs_8h.html#aaebf1c80e366c0f2702f58b91d7a9d38" title="ubifs_setattr" alt="" coords="1181,399,1276,425"/>
<area shape="rect" id="node27" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="748,56,871,83"/>
<area shape="rect" id="node28" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="734,5,885,32"/>
<area shape="rect" id="node29" href="ubifs_2super_8c.html#a063c51fb658c01f325e4a0744d2f28ce" title="ubifs_evict_inode" alt="" coords="957,5,1080,32"/>
<area shape="rect" id="node31" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="965,120,1072,147"/>
<area shape="rect" id="node35" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="760,1019,859,1045"/>
<area shape="rect" id="node37" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="761,1120,858,1147"/>
<area shape="rect" id="node39" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="356,537,481,564"/>
<area shape="rect" id="node40" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="536,765,675,792"/>
<area shape="rect" id="node41" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="748,917,871,944"/>
<area shape="rect" id="node43" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="753,968,866,995"/>
<area shape="rect" id="node44" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="979,627,1059,653"/>
<area shape="rect" id="node45" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="729,1171,889,1197"/>
<area shape="rect" id="node46" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="963,1191,1074,1217"/>
<area shape="rect" id="node48" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="937,1133,1100,1160"/>
<area shape="rect" id="node49" href="ubifs_2ioctl_8c.html#a06251cc4602342e44b5ed0a1b39f7e60" title="setflags" alt="" coords="775,1272,843,1299"/>
<area shape="rect" id="node42" href="ubifs_2file_8c.html#a63bbd02975453f3f42af79e561948912" title="ubifs_write_begin" alt="" coords="957,943,1080,969"/>
<area shape="rect" id="node47" href="ubifs_2file_8c.html#a8cca742dfff2189dce5332cb5f013793" title="ubifs_write_iter" alt="" coords="1173,1191,1284,1217"/>
<area shape="rect" id="node50" href="ubifs_8h.html#a9831447969acb35c927f7530bc47158e" title="ubifs_ioctl" alt="" coords="978,1272,1059,1299"/>
</map>
</div>

</div>
</div>
<a id="a29dd378f4b22d45580bff155cbb275cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29dd378f4b22d45580bff155cbb275cd">&#9670;&nbsp;</a></span>ubifs_garbage_collect_leb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ubifs_garbage_collect_leb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structubifs__lprops.html">ubifs_lprops</a> *&#160;</td>
          <td class="paramname"><em>lp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_garbage_collect_leb - garbage-collect a logical eraseblock. <code></code>: UBIFS file-system description object : describes the LEB to garbage collect</p>
<p>This function garbage-collects an LEB and returns one of the , , etc positive codes in case of success, %-EAGAIN if commit is required, and other negative error codes in case of failures. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2gc_8c_a29dd378f4b22d45580bff155cbb275cd_cgraph.png" border="0" usemap="#ubifs_2gc_8c_a29dd378f4b22d45580bff155cbb275cd_cgraph" alt=""/></div>
<map name="ubifs_2gc_8c_a29dd378f4b22d45580bff155cbb275cd_cgraph" id="ubifs_2gc_8c_a29dd378f4b22d45580bff155cbb275cd_cgraph">
<area shape="rect" id="node2" href="ubifs_2gc_8c.html#a2f4daf5146e689ec3841b9a9840658f4" title="gc_sync_wbufs" alt="" coords="241,107,354,133"/>
<area shape="rect" id="node4" href="ubifs_2io_8c.html#a3e6d29ad192528c05f246cd31a1732fb" title="ubifs_wbuf_sync_nolock" alt="" coords="612,107,777,133"/>
<area shape="rect" id="node13" href="lprops_8c.html#aeb3c0f6274cdeba0c778d57f29ab39bf" title="ubifs_change_one_lp" alt="" coords="225,385,369,412"/>
<area shape="rect" id="node27" href="ubifs_2io_8c.html#ad9d3a62a61d21e1faa60cd6e630c41ac" title="ubifs_leb_unmap" alt="" coords="635,625,755,652"/>
<area shape="rect" id="node31" href="ubifs_2scan_8c.html#a1689915d09ec86f76b30ee598b10f34e" title="ubifs_scan" alt="" coords="871,715,956,741"/>
<area shape="rect" id="node37" href="key_8h.html#a5611c13d648e672825da064c90c8903a" title="key_read" alt="" coords="1288,791,1363,817"/>
<area shape="rect" id="node40" href="ubifs_2scan_8c.html#a7e559a0c70f1f17d0886f600cd59a639" title="ubifs_scan_destroy" alt="" coords="1053,892,1188,919"/>
<area shape="rect" id="node41" href="misc_8h.html#ac244bb6ab2f45cd8b870edc621d20deb" title="ubifs_idx_key" alt="" coords="246,867,349,893"/>
<area shape="rect" id="node42" href="tnc_8c.html#a3a388ce018049e8a7da4da512f8e1dcf" title="ubifs_dirty_idx_node" alt="" coords="227,917,368,944"/>
<area shape="rect" id="node46" href="ubifs_2gc_8c.html#ad0088bd16e6b85c2c28124046ab839d7" title="move_nodes" alt="" coords="249,1044,345,1071"/>
<area shape="rect" id="node3" href="misc_8h.html#af8fd16c04f42f2a56d86f0f7a4924ecc" title="ubifs_wbuf_sync" alt="" coords="431,107,551,133"/>
<area shape="rect" id="node5" href="ubifs_2io_8c.html#aeef91391de4e0f46023ab0afac3a2335" title="cancel_wbuf_timer_nolock" alt="" coords="825,5,1001,32"/>
<area shape="rect" id="node6" href="ubifs_2debug_8c.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="873,56,954,83"/>
<area shape="rect" id="node7" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="874,107,953,133"/>
<area shape="rect" id="node8" href="ubifs_2io_8c.html#a02909cfc9d3a0100f549390c7d464632" title="ubifs_leb_write" alt="" coords="859,157,968,184"/>
<area shape="rect" id="node9" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="1266,183,1385,209"/>
<area shape="rect" id="node10" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1459,436,1531,463"/>
<area shape="rect" id="node11" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="1067,233,1174,260"/>
<area shape="rect" id="node12" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="1283,233,1368,260"/>
<area shape="rect" id="node14" href="misc_8h.html#aa89c2768eb94f129c6afbe47420b44ba" title="ubifs_get_lprops" alt="" coords="432,309,549,336"/>
<area shape="rect" id="node15" href="lpt_8c.html#ade4e71b1fffa493cfb997feaff2c0638" title="ubifs_lpt_lookup_dirty" alt="" coords="621,360,769,387"/>
<area shape="rect" id="node22" href="lprops_8c.html#abfc4c6a75b37762f214cbc91f0ebe664" title="ubifs_change_lp" alt="" coords="433,411,549,437"/>
<area shape="rect" id="node26" href="misc_8h.html#a6dce2c34ec97d74cf4be59e0201bdb3e" title="ubifs_release_lprops" alt="" coords="420,461,561,488"/>
<area shape="rect" id="node16" href="lpt_8c.html#a6d9ea5f42b955fdb68064bc37bd9540d" title="ubifs_read_nnode" alt="" coords="1059,335,1183,361"/>
<area shape="rect" id="node18" href="lpt_8c.html#accd7155d1f9997fb5e6a7fd577fdc0f2" title="dirty_cow_nnode" alt="" coords="853,309,973,336"/>
<area shape="rect" id="node19" href="lpt_8c.html#a7fd536e4a29b47a6485fc3931f91857b" title="ubifs_get_nnode" alt="" coords="855,360,972,387"/>
<area shape="rect" id="node20" href="lpt_8c.html#ad8f891756dae6c6dceeb51fb917b023b" title="ubifs_get_pnode" alt="" coords="855,411,972,437"/>
<area shape="rect" id="node21" href="lpt_8c.html#ac60e8c2b5dbc5ab11045f313bcc441a0" title="dirty_cow_pnode" alt="" coords="853,461,973,488"/>
<area shape="rect" id="node17" href="ubifs_2io_8c.html#ab6a2a3c4a79d6d4c52350540437d3cb3" title="ubifs_leb_read" alt="" coords="1272,385,1379,412"/>
<area shape="rect" id="node23" href="lprops_8c.html#a911df1bb1dc58cf096c97ce547539153" title="is_lprops_dirty" alt="" coords="641,411,748,437"/>
<area shape="rect" id="node24" href="lprops_8c.html#a54fa4acd96a49b1bbe2baeac4dbd0c0b" title="ubifs_calc_dark" alt="" coords="638,461,751,488"/>
<area shape="rect" id="node25" href="lprops_8c.html#a2f083caeaebac06c1f51d7c7d34f5c13" title="change_category" alt="" coords="634,512,755,539"/>
<area shape="rect" id="node28" href="ubifs_2debug_8c.html#a6ba17156289f8b8ecaed40dbafc04858" title="dbg_leb_unmap" alt="" coords="857,664,970,691"/>
<area shape="rect" id="node29" href="ubifs_2debug_8h.html#ab599356d6c84ddd2c7b9001b452c30bd" title="dbg_is_power_cut" alt="" coords="1057,487,1184,513"/>
<area shape="rect" id="node30" href="ubifs_2debug_8c.html#a67b6fc23cfbf882431d33323a03ef74c" title="power_cut_emulated" alt="" coords="1049,537,1192,564"/>
<area shape="rect" id="node32" href="ubifs_2scan_8c.html#ac9e61563282a3ab80fa1947e24f1726e" title="ubifs_start_scan" alt="" coords="1061,639,1180,665"/>
<area shape="rect" id="node33" href="ubifs_2scan_8c.html#ab974ec909e594f54f7773880688a2334" title="ubifs_scan_a_node" alt="" coords="1053,689,1188,716"/>
<area shape="rect" id="node36" href="ubifs_2scan_8c.html#a582c1d1b35a0fe0cd1d73f2f88adaa67" title="ubifs_add_snod" alt="" coords="1064,740,1177,767"/>
<area shape="rect" id="node38" href="ubifs_2scan_8c.html#a7a20ae4d7200218e4b1b4ce3cd803b21" title="ubifs_end_scan" alt="" coords="1064,791,1177,817"/>
<area shape="rect" id="node39" href="ubifs_2scan_8c.html#a18197e05567059efbb981ebe037255bb" title="ubifs_scanned_corruption" alt="" coords="1240,841,1411,868"/>
<area shape="rect" id="node34" href="ubifs_2scan_8c.html#a93a80ae9e3252efb52d991f4abc7152a" title="scan_padding_bytes" alt="" coords="1255,689,1396,716"/>
<area shape="rect" id="node35" href="ubifs_2debug_8c.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="1284,740,1367,767"/>
<area shape="rect" id="node43" href="tnc_8c.html#a9a3d0b0e8f6fb62cd3fc14718c0971db" title="lookup_znode" alt="" coords="439,867,542,893"/>
<area shape="rect" id="node45" href="tnc_8c.html#a609646516a8a0f3fd9f2b2a1a1849737" title="dirty_cow_bottom_up" alt="" coords="417,917,564,944"/>
<area shape="rect" id="node44" href="key_8h.html#a06f47822510ef850cb7065778115453c" title="key_type" alt="" coords="657,968,732,995"/>
<area shape="rect" id="node47" href="v9fs_8c.html#a962ef1b35907bdda12de2cddce8bc638" title="LIST_HEAD" alt="" coords="443,1019,538,1045"/>
<area shape="rect" id="node48" href="ubifs_2gc_8c.html#ac8af282d626a91c08e5e158b8e55ec20" title="switch_gc_head" alt="" coords="433,1069,549,1096"/>
<area shape="rect" id="node49" href="ubifs_2gc_8c.html#a4ac9c370cb72439015edcddf81470d28" title="sort_nodes" alt="" coords="447,1120,534,1147"/>
<area shape="rect" id="node50" href="ubifs_2gc_8c.html#a007c1b86e6d577ada4c13e4f6f2307d3" title="move_node" alt="" coords="446,1171,535,1197"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2gc_8c_a29dd378f4b22d45580bff155cbb275cd_icgraph.png" border="0" usemap="#ubifs_2gc_8c_a29dd378f4b22d45580bff155cbb275cd_icgraph" alt=""/></div>
<map name="ubifs_2gc_8c_a29dd378f4b22d45580bff155cbb275cd_icgraph" id="ubifs_2gc_8c_a29dd378f4b22d45580bff155cbb275cd_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#a6aba86bcae816613915e10318fdf6b83" title="ubifs_garbage_collect" alt="" coords="225,774,373,800"/>
<area shape="rect" id="node44" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="576,1255,733,1282"/>
<area shape="rect" id="node3" href="ubifs_2journal_8c.html#a920088cf70f88cbb1142294e99e688d6" title="reserve_space" alt="" coords="421,470,528,496"/>
<area shape="rect" id="node34" href="budget_8c.html#a5ccd81c906fb851139ba3da031d26f12" title="run_gc" alt="" coords="444,774,505,800"/>
<area shape="rect" id="node4" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="592,242,717,268"/>
<area shape="rect" id="node5" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="799,1027,915,1054"/>
<area shape="rect" id="node18" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="789,140,926,167"/>
<area shape="rect" id="node21" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="786,90,929,116"/>
<area shape="rect" id="node24" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="794,191,921,218"/>
<area shape="rect" id="node26" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="797,368,917,395"/>
<area shape="rect" id="node27" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="795,14,919,40"/>
<area shape="rect" id="node28" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="785,482,930,508"/>
<area shape="rect" id="node32" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="781,242,933,268"/>
<area shape="rect" id="node6" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1016,850,1107,876"/>
<area shape="rect" id="node7" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1015,1052,1108,1079"/>
<area shape="rect" id="node8" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1020,1204,1103,1231"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1023,900,1100,927"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1016,1002,1107,1028"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1018,951,1105,978"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1017,1103,1106,1130"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1013,1154,1109,1180"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1010,1255,1113,1282"/>
<area shape="rect" id="node9" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="1223,1204,1319,1231"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1227,596,1314,623"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="1400,419,1500,446"/>
<area shape="rect" id="node19" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="1012,140,1111,167"/>
<area shape="rect" id="node20" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1221,140,1321,167"/>
<area shape="rect" id="node22" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="1000,90,1123,116"/>
<area shape="rect" id="node23" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="986,39,1137,66"/>
<area shape="rect" id="node25" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1217,242,1324,268"/>
<area shape="rect" id="node29" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="1012,546,1111,572"/>
<area shape="rect" id="node30" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1204,1280,1337,1307"/>
<area shape="rect" id="node31" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="1413,1280,1487,1307"/>
<area shape="rect" id="node33" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="1013,242,1110,268"/>
<area shape="rect" id="node35" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="592,774,717,800"/>
<area shape="rect" id="node36" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="788,774,927,800"/>
<area shape="rect" id="node37" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="1000,596,1123,623"/>
<area shape="rect" id="node38" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="1005,647,1118,674"/>
<area shape="rect" id="node39" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="1021,698,1101,724"/>
<area shape="rect" id="node40" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="981,394,1141,420"/>
<area shape="rect" id="node41" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="1215,343,1326,370"/>
<area shape="rect" id="node42" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="1189,444,1352,471"/>
<area shape="rect" id="node43" href="ubifs_2ioctl_8c.html#a06251cc4602342e44b5ed0a1b39f7e60" title="setflags" alt="" coords="1027,799,1095,826"/>
<area shape="rect" id="node45" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="811,1306,904,1332"/>
<area shape="rect" id="node48" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="795,1382,920,1408"/>
<area shape="rect" id="node50" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="794,1204,921,1231"/>
<area shape="rect" id="node46" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1007,1356,1116,1383"/>
<area shape="rect" id="node47" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="1224,1356,1317,1383"/>
<area shape="rect" id="node49" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="1000,1407,1123,1434"/>
</map>
</div>

</div>
</div>
<a id="abd8f539c87c6fbdd3a73195b54dd9995"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd8f539c87c6fbdd3a73195b54dd9995">&#9670;&nbsp;</a></span>ubifs_gc_end_commit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ubifs_gc_end_commit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_gc_end_commit - garbage collection at end of commit. <code></code>: UBIFS file-system description object</p>
<p>This function completes out-of-place garbage collection of index LEBs. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2gc_8c_abd8f539c87c6fbdd3a73195b54dd9995_cgraph.png" border="0" usemap="#ubifs_2gc_8c_abd8f539c87c6fbdd3a73195b54dd9995_cgraph" alt=""/></div>
<map name="ubifs_2gc_8c_abd8f539c87c6fbdd3a73195b54dd9995_cgraph" id="ubifs_2gc_8c_abd8f539c87c6fbdd3a73195b54dd9995_cgraph">
<area shape="rect" id="node2" href="ubifs_2io_8c.html#ad9d3a62a61d21e1faa60cd6e630c41ac" title="ubifs_leb_unmap" alt="" coords="405,436,525,463"/>
<area shape="rect" id="node39" href="lprops_8c.html#aeb3c0f6274cdeba0c778d57f29ab39bf" title="ubifs_change_one_lp" alt="" coords="203,1601,347,1628"/>
<area shape="rect" id="node3" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="997,56,1115,83"/>
<area shape="rect" id="node4" href="ubifs_2debug_8c.html#a6ba17156289f8b8ecaed40dbafc04858" title="dbg_leb_unmap" alt="" coords="601,436,715,463"/>
<area shape="rect" id="node21" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1210,1323,1282,1349"/>
<area shape="rect" id="node38" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="605,5,711,32"/>
<area shape="rect" id="node5" href="ubifs_2debug_8h.html#ab599356d6c84ddd2c7b9001b452c30bd" title="dbg_is_power_cut" alt="" coords="788,765,915,792"/>
<area shape="rect" id="node36" href="ubifs_2debug_8c.html#a67b6fc23cfbf882431d33323a03ef74c" title="power_cut_emulated" alt="" coords="780,107,923,133"/>
<area shape="rect" id="node6" href="ubifs_2debug_8h.html#aed9c32fd77ce70a2d917ab58c56189c2" title="ubifs_debugging_init" alt="" coords="986,461,1126,488"/>
<area shape="rect" id="node7" href="ubifs_2debug_8h.html#a1e62d7c391f555902a25f8060eb6f1ec" title="ubifs_debugging_exit" alt="" coords="984,512,1128,539"/>
<area shape="rect" id="node8" href="ubifs_2debug_8h.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="1015,563,1097,589"/>
<area shape="rect" id="node9" href="ubifs_2debug_8h.html#a615a670f26d4407b52175ce5f3faf594" title="dbg_cstate" alt="" coords="1013,613,1099,640"/>
<area shape="rect" id="node10" href="ubifs_2debug_8h.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="1015,664,1097,691"/>
<area shape="rect" id="node11" href="ubifs_2debug_8h.html#a4184d82b0b2ff0fffc6ab3d4de4a1e7a" title="dbg_get_key_dump" alt="" coords="989,715,1123,741"/>
<area shape="rect" id="node12" href="ubifs_2debug_8h.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="995,765,1117,792"/>
<area shape="rect" id="node13" href="ubifs_2debug_8h.html#a6ecc9bff59f14d28615ed14fa5323681" title="ubifs_dump_inode" alt="" coords="993,816,1119,843"/>
<area shape="rect" id="node14" href="ubifs_2debug_8h.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="994,867,1118,893"/>
<area shape="rect" id="node15" href="ubifs_2debug_8h.html#acfcbe45894b3b41385c1f9891d57bb97" title="ubifs_dump_budget_req" alt="" coords="976,917,1136,944"/>
<area shape="rect" id="node16" href="ubifs_2debug_8h.html#ab351e7abb59edb97d57bd44dd83b0484" title="ubifs_dump_lstats" alt="" coords="992,968,1120,995"/>
<area shape="rect" id="node17" href="ubifs_2debug_8h.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="994,1019,1118,1045"/>
<area shape="rect" id="node18" href="ubifs_2debug_8h.html#ad04e55858b69b78f20ea8b0fb79f9f27" title="ubifs_dump_lprop" alt="" coords="994,1525,1118,1552"/>
<area shape="rect" id="node20" href="ubifs_2debug_8h.html#a2fa0aeaaa556f0b13d098456ef7d86d4" title="ubifs_dump_lprops" alt="" coords="991,1120,1121,1147"/>
<area shape="rect" id="node22" href="ubifs_2debug_8h.html#afc25fcc00c516fab54a12303d87bc100" title="ubifs_dump_lpt_info" alt="" coords="987,1272,1125,1299"/>
<area shape="rect" id="node23" href="ubifs_2debug_8h.html#afa1952f7d3c2c791a330e3dc245c5a83" title="ubifs_dump_leb" alt="" coords="999,1171,1113,1197"/>
<area shape="rect" id="node24" href="ubifs_2debug_8h.html#a454a80414a371832b3f68f828f6a6353" title="ubifs_dump_sleb" alt="" coords="996,1323,1116,1349"/>
<area shape="rect" id="node25" href="ubifs_2debug_8h.html#a56365d730ac6932bf3163a8ba7279779" title="ubifs_dump_znode" alt="" coords="991,1373,1121,1400"/>
<area shape="rect" id="node26" href="ubifs_2debug_8h.html#a5600b63b8362df17ed46c4e20784fb6c" title="ubifs_dump_heap" alt="" coords="994,107,1118,133"/>
<area shape="rect" id="node27" href="ubifs_2debug_8h.html#ab2224f946272a25cfacf2607c6502818" title="ubifs_dump_pnode" alt="" coords="991,157,1121,184"/>
<area shape="rect" id="node28" href="ubifs_2debug_8h.html#a6ad4e8a10c442517164e350787696d9d" title="ubifs_dump_tnc" alt="" coords="999,208,1113,235"/>
<area shape="rect" id="node29" href="ubifs_2debug_8h.html#a1988de032288d9afc418a9f36c0e1a38" title="ubifs_dump_index" alt="" coords="993,259,1119,285"/>
<area shape="rect" id="node30" href="ubifs_2debug_8h.html#a2dad580c9c3f21053039a854eb81bed2" title="ubifs_dump_lpt_lebs" alt="" coords="985,309,1127,336"/>
<area shape="rect" id="node31" href="ubifs_2debug_8h.html#ac9540eb544441fb116e86f4799b55265" title="dbg_walk_index" alt="" coords="999,1221,1113,1248"/>
<area shape="rect" id="node32" href="ubifs_2debug_8h.html#a42a0e664e63f651533d2a5abc23bf4da" title="dbg_save_space_info" alt="" coords="982,360,1130,387"/>
<area shape="rect" id="node33" href="ubifs_2debug_8h.html#ace23cd2189dd2d7a9435ddd891e9beaa" title="dbg_check_space_info" alt="" coords="979,1424,1133,1451"/>
<area shape="rect" id="node34" href="ubifs_2debug_8h.html#a69534405790cc12f492343243bc539a4" title="dbg_check_lprops" alt="" coords="993,1069,1119,1096"/>
<area shape="rect" id="node35" href="ubifs_2debug_8h.html#a725dc62445ba29e272e4ccb5b10fbc61" title="dbg_old_index_check_init" alt="" coords="971,411,1141,437"/>
<area shape="rect" id="node19" href="lprops_8c.html#a54fa4acd96a49b1bbe2baeac4dbd0c0b" title="ubifs_calc_dark" alt="" coords="1189,1703,1303,1729"/>
<area shape="rect" id="node37" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="1013,5,1099,32"/>
<area shape="rect" id="node40" href="misc_8h.html#aa89c2768eb94f129c6afbe47420b44ba" title="ubifs_get_lprops" alt="" coords="407,1525,524,1552"/>
<area shape="rect" id="node41" href="lpt_8c.html#ade4e71b1fffa493cfb997feaff2c0638" title="ubifs_lpt_lookup_dirty" alt="" coords="584,1703,732,1729"/>
<area shape="rect" id="node47" href="lprops_8c.html#abfc4c6a75b37762f214cbc91f0ebe664" title="ubifs_change_lp" alt="" coords="407,1753,523,1780"/>
<area shape="rect" id="node50" href="misc_8h.html#a6dce2c34ec97d74cf4be59e0201bdb3e" title="ubifs_release_lprops" alt="" coords="395,1627,536,1653"/>
<area shape="rect" id="node42" href="lpt_8c.html#a6d9ea5f42b955fdb68064bc37bd9540d" title="ubifs_read_nnode" alt="" coords="994,1627,1118,1653"/>
<area shape="rect" id="node43" href="lpt_8c.html#accd7155d1f9997fb5e6a7fd577fdc0f2" title="dirty_cow_nnode" alt="" coords="791,1779,911,1805"/>
<area shape="rect" id="node44" href="lpt_8c.html#a7fd536e4a29b47a6485fc3931f91857b" title="ubifs_get_nnode" alt="" coords="793,1677,910,1704"/>
<area shape="rect" id="node45" href="lpt_8c.html#ad8f891756dae6c6dceeb51fb917b023b" title="ubifs_get_pnode" alt="" coords="793,1829,910,1856"/>
<area shape="rect" id="node46" href="lpt_8c.html#ac60e8c2b5dbc5ab11045f313bcc441a0" title="dirty_cow_pnode" alt="" coords="791,1728,911,1755"/>
<area shape="rect" id="node48" href="lprops_8c.html#a911df1bb1dc58cf096c97ce547539153" title="is_lprops_dirty" alt="" coords="605,1804,711,1831"/>
<area shape="rect" id="node49" href="lprops_8c.html#a2f083caeaebac06c1f51d7c7d34f5c13" title="change_category" alt="" coords="597,1753,719,1780"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2gc_8c_abd8f539c87c6fbdd3a73195b54dd9995_icgraph.png" border="0" usemap="#ubifs_2gc_8c_abd8f539c87c6fbdd3a73195b54dd9995_icgraph" alt=""/></div>
<map name="ubifs_2gc_8c_abd8f539c87c6fbdd3a73195b54dd9995_icgraph" id="ubifs_2gc_8c_abd8f539c87c6fbdd3a73195b54dd9995_icgraph">
<area shape="rect" id="node2" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="203,247,289,273"/>
<area shape="rect" id="node3" href="ubifs_2commit_8c.html#a91c88ecee0c3d4a55bbe6669a0caa521" title="run_bg_commit" alt="" coords="345,184,455,211"/>
<area shape="rect" id="node10" href="ubifs_8h.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="337,272,463,299"/>
<area shape="rect" id="node4" href="ubifs_8h.html#ad1d2abb94e9ca171f253ba64fdbf7aa6" title="ubifs_bg_thread" alt="" coords="705,145,820,172"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="919,120,1012,147"/>
<area shape="rect" id="node8" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="903,171,1028,197"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1115,5,1224,32"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="1332,5,1425,32"/>
<area shape="rect" id="node9" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="1108,56,1231,83"/>
<area shape="rect" id="node11" href="ubifs_2super_8c.html#a5f9c4c32c42dc338c1b84b87b7098105" title="ubifs_sync_fs" alt="" coords="522,196,625,223"/>
<area shape="rect" id="node12" href="ubifs_2recovery_8c.html#acb6fbec748694453a2e4b3ed2be6cc6b" title="grab_empty_leb" alt="" coords="516,297,631,324"/>
<area shape="rect" id="node13" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="684,233,841,260"/>
<area shape="rect" id="node22" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="700,1171,825,1197"/>
<area shape="rect" id="node42" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="511,399,636,425"/>
<area shape="rect" id="node14" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="902,233,1029,260"/>
<area shape="rect" id="node15" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1312,436,1445,463"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1123,208,1216,235"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1128,157,1211,184"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1125,259,1214,285"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1121,309,1217,336"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1118,360,1221,387"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1335,816,1422,843"/>
<area shape="rect" id="node23" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="907,385,1023,412"/>
<area shape="rect" id="node28" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="897,1412,1034,1439"/>
<area shape="rect" id="node31" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="894,1272,1037,1299"/>
<area shape="rect" id="node34" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="902,1348,1029,1375"/>
<area shape="rect" id="node36" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="905,1171,1025,1197"/>
<area shape="rect" id="node37" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="903,1221,1027,1248"/>
<area shape="rect" id="node38" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="893,968,1038,995"/>
<area shape="rect" id="node40" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="889,1120,1041,1147"/>
<area shape="rect" id="node24" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1124,411,1215,437"/>
<area shape="rect" id="node25" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1131,461,1208,488"/>
<area shape="rect" id="node26" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1124,512,1215,539"/>
<area shape="rect" id="node27" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1126,563,1213,589"/>
<area shape="rect" id="node29" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="1120,1424,1219,1451"/>
<area shape="rect" id="node30" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1329,1221,1429,1248"/>
<area shape="rect" id="node32" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="1108,1323,1231,1349"/>
<area shape="rect" id="node33" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="1094,1272,1245,1299"/>
<area shape="rect" id="node35" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1116,1373,1223,1400"/>
<area shape="rect" id="node39" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="1120,867,1219,893"/>
<area shape="rect" id="node41" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="1121,1120,1218,1147"/>
<area shape="rect" id="node43" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="896,613,1035,640"/>
<area shape="rect" id="node44" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="1108,664,1231,691"/>
<area shape="rect" id="node45" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="1113,715,1226,741"/>
<area shape="rect" id="node46" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="1129,765,1209,792"/>
<area shape="rect" id="node47" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="1089,968,1249,995"/>
<area shape="rect" id="node48" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="1323,917,1434,944"/>
<area shape="rect" id="node49" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="1297,993,1460,1020"/>
<area shape="rect" id="node50" href="ubifs_2ioctl_8c.html#a06251cc4602342e44b5ed0a1b39f7e60" title="setflags" alt="" coords="1135,613,1203,640"/>
</map>
</div>

</div>
</div>
<a id="a1ff584f97bf8a1783fc9fecde0a87b1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ff584f97bf8a1783fc9fecde0a87b1e">&#9670;&nbsp;</a></span>ubifs_gc_start_commit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ubifs_gc_start_commit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_gc_start_commit - garbage collection at start of commit. <code></code>: UBIFS file-system description object</p>
<p>If a LEB has only dirty and free space, then we may safely unmap it and make it free. Note, we cannot do this with indexing LEBs because dirty space may correspond index nodes that are required for recovery. In that case, the LEB cannot be unmapped until after the next commit.</p>
<p>This function returns %0 upon success and a negative error code upon failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2gc_8c_a1ff584f97bf8a1783fc9fecde0a87b1e_cgraph.png" border="0" usemap="#ubifs_2gc_8c_a1ff584f97bf8a1783fc9fecde0a87b1e_cgraph" alt=""/></div>
<map name="ubifs_2gc_8c_a1ff584f97bf8a1783fc9fecde0a87b1e_cgraph" id="ubifs_2gc_8c_a1ff584f97bf8a1783fc9fecde0a87b1e_cgraph">
<area shape="rect" id="node2" href="misc_8h.html#aa89c2768eb94f129c6afbe47420b44ba" title="ubifs_get_lprops" alt="" coords="229,1150,347,1177"/>
<area shape="rect" id="node3" href="lprops_8c.html#af4f3f200dc1d36660281ec0282293308" title="ubifs_fast_find_freeable" alt="" coords="208,1201,368,1228"/>
<area shape="rect" id="node4" href="ubifs_2io_8c.html#ad9d3a62a61d21e1faa60cd6e630c41ac" title="ubifs_leb_unmap" alt="" coords="228,1252,348,1278"/>
<area shape="rect" id="node36" href="lprops_8c.html#abfc4c6a75b37762f214cbc91f0ebe664" title="ubifs_change_lp" alt="" coords="230,1302,346,1329"/>
<area shape="rect" id="node49" href="lprops_8c.html#ae7db0b84b9b4c7666f34dd1c6d78b0a0" title="ubifs_fast_find_frdi_idx" alt="" coords="210,1353,366,1380"/>
<area shape="rect" id="node50" href="misc_8h.html#a6dce2c34ec97d74cf4be59e0201bdb3e" title="ubifs_release_lprops" alt="" coords="217,1404,359,1430"/>
<area shape="rect" id="node5" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="839,10,958,37"/>
<area shape="rect" id="node6" href="ubifs_2debug_8c.html#a6ba17156289f8b8ecaed40dbafc04858" title="dbg_leb_unmap" alt="" coords="433,669,547,696"/>
<area shape="rect" id="node23" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1047,1290,1119,1317"/>
<area shape="rect" id="node35" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="437,948,543,974"/>
<area shape="rect" id="node7" href="ubifs_2debug_8h.html#ab599356d6c84ddd2c7b9001b452c30bd" title="dbg_is_power_cut" alt="" coords="628,669,755,696"/>
<area shape="rect" id="node33" href="ubifs_2debug_8c.html#a67b6fc23cfbf882431d33323a03ef74c" title="power_cut_emulated" alt="" coords="620,61,763,88"/>
<area shape="rect" id="node8" href="ubifs_2debug_8h.html#aed9c32fd77ce70a2d917ab58c56189c2" title="ubifs_debugging_init" alt="" coords="829,365,969,392"/>
<area shape="rect" id="node9" href="ubifs_2debug_8h.html#a1e62d7c391f555902a25f8060eb6f1ec" title="ubifs_debugging_exit" alt="" coords="827,416,971,442"/>
<area shape="rect" id="node10" href="ubifs_2debug_8h.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="857,466,940,493"/>
<area shape="rect" id="node11" href="ubifs_2debug_8h.html#a615a670f26d4407b52175ce5f3faf594" title="dbg_cstate" alt="" coords="855,517,942,544"/>
<area shape="rect" id="node12" href="ubifs_2debug_8h.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="858,568,939,594"/>
<area shape="rect" id="node13" href="ubifs_2debug_8h.html#a4184d82b0b2ff0fffc6ab3d4de4a1e7a" title="dbg_get_key_dump" alt="" coords="831,618,966,645"/>
<area shape="rect" id="node14" href="ubifs_2debug_8h.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="838,669,959,696"/>
<area shape="rect" id="node15" href="ubifs_2debug_8h.html#a6ecc9bff59f14d28615ed14fa5323681" title="ubifs_dump_inode" alt="" coords="835,720,962,746"/>
<area shape="rect" id="node16" href="ubifs_2debug_8h.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="837,770,961,797"/>
<area shape="rect" id="node17" href="ubifs_2debug_8h.html#acfcbe45894b3b41385c1f9891d57bb97" title="ubifs_dump_budget_req" alt="" coords="819,821,979,848"/>
<area shape="rect" id="node18" href="ubifs_2debug_8h.html#ab351e7abb59edb97d57bd44dd83b0484" title="ubifs_dump_lstats" alt="" coords="835,872,963,898"/>
<area shape="rect" id="node19" href="ubifs_2debug_8h.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="837,922,961,949"/>
<area shape="rect" id="node20" href="ubifs_2debug_8h.html#ad04e55858b69b78f20ea8b0fb79f9f27" title="ubifs_dump_lprop" alt="" coords="837,973,961,1000"/>
<area shape="rect" id="node22" href="ubifs_2debug_8h.html#a2fa0aeaaa556f0b13d098456ef7d86d4" title="ubifs_dump_lprops" alt="" coords="833,1277,964,1304"/>
<area shape="rect" id="node24" href="ubifs_2debug_8h.html#afc25fcc00c516fab54a12303d87bc100" title="ubifs_dump_lpt_info" alt="" coords="829,1024,968,1050"/>
<area shape="rect" id="node25" href="ubifs_2debug_8h.html#afa1952f7d3c2c791a330e3dc245c5a83" title="ubifs_dump_leb" alt="" coords="842,1176,955,1202"/>
<area shape="rect" id="node26" href="ubifs_2debug_8h.html#a454a80414a371832b3f68f828f6a6353" title="ubifs_dump_sleb" alt="" coords="839,1074,959,1101"/>
<area shape="rect" id="node27" href="ubifs_2debug_8h.html#a56365d730ac6932bf3163a8ba7279779" title="ubifs_dump_znode" alt="" coords="833,1125,964,1152"/>
<area shape="rect" id="node28" href="ubifs_2debug_8h.html#a5600b63b8362df17ed46c4e20784fb6c" title="ubifs_dump_heap" alt="" coords="837,112,961,138"/>
<area shape="rect" id="node29" href="ubifs_2debug_8h.html#ab2224f946272a25cfacf2607c6502818" title="ubifs_dump_pnode" alt="" coords="833,162,964,189"/>
<area shape="rect" id="node30" href="ubifs_2debug_8h.html#a6ad4e8a10c442517164e350787696d9d" title="ubifs_dump_tnc" alt="" coords="841,213,956,240"/>
<area shape="rect" id="node31" href="ubifs_2debug_8h.html#a1988de032288d9afc418a9f36c0e1a38" title="ubifs_dump_index" alt="" coords="835,264,962,290"/>
<area shape="rect" id="node32" href="ubifs_2debug_8h.html#a2dad580c9c3f21053039a854eb81bed2" title="ubifs_dump_lpt_lebs" alt="" coords="828,314,969,341"/>
<area shape="rect" id="node21" href="lprops_8c.html#a54fa4acd96a49b1bbe2baeac4dbd0c0b" title="ubifs_calc_dark" alt="" coords="1027,1214,1140,1241"/>
<area shape="rect" id="node34" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="856,61,941,88"/>
<area shape="rect" id="node37" href="lprops_8c.html#a911df1bb1dc58cf096c97ce547539153" title="is_lprops_dirty" alt="" coords="437,1353,543,1380"/>
<area shape="rect" id="node38" href="lpt_8c.html#ade4e71b1fffa493cfb997feaff2c0638" title="ubifs_lpt_lookup_dirty" alt="" coords="416,1429,564,1456"/>
<area shape="rect" id="node44" href="lprops_8c.html#a2f083caeaebac06c1f51d7c7d34f5c13" title="change_category" alt="" coords="429,1657,551,1684"/>
<area shape="rect" id="node39" href="lpt_8c.html#a6d9ea5f42b955fdb68064bc37bd9540d" title="ubifs_read_nnode" alt="" coords="837,1378,961,1405"/>
<area shape="rect" id="node40" href="lpt_8c.html#accd7155d1f9997fb5e6a7fd577fdc0f2" title="dirty_cow_nnode" alt="" coords="631,1404,751,1430"/>
<area shape="rect" id="node41" href="lpt_8c.html#a7fd536e4a29b47a6485fc3931f91857b" title="ubifs_get_nnode" alt="" coords="633,1353,750,1380"/>
<area shape="rect" id="node42" href="lpt_8c.html#ad8f891756dae6c6dceeb51fb917b023b" title="ubifs_get_pnode" alt="" coords="633,1505,750,1532"/>
<area shape="rect" id="node43" href="lpt_8c.html#ac60e8c2b5dbc5ab11045f313bcc441a0" title="dirty_cow_pnode" alt="" coords="631,1556,751,1582"/>
<area shape="rect" id="node45" href="lprops_8c.html#a7a2c9edc0537908ba98fe9a7ab5659d8" title="ubifs_categorize_lprops" alt="" coords="612,1758,771,1785"/>
<area shape="rect" id="node46" href="lprops_8c.html#a1b58cb9915dbbdf9ac60e7a1369d05ab" title="adjust_lpt_heap" alt="" coords="635,1606,748,1633"/>
<area shape="rect" id="node47" href="lprops_8c.html#a88d9d4b260ebb86abbc16675b951f2c1" title="ubifs_remove_from_cat" alt="" coords="612,1657,771,1684"/>
<area shape="rect" id="node48" href="lprops_8c.html#a664f531f8332b3c53d93e25c4e688e09" title="ubifs_add_to_cat" alt="" coords="631,1708,752,1734"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2gc_8c_a1ff584f97bf8a1783fc9fecde0a87b1e_icgraph.png" border="0" usemap="#ubifs_2gc_8c_a1ff584f97bf8a1783fc9fecde0a87b1e_icgraph" alt=""/></div>
<map name="ubifs_2gc_8c_a1ff584f97bf8a1783fc9fecde0a87b1e_icgraph" id="ubifs_2gc_8c_a1ff584f97bf8a1783fc9fecde0a87b1e_icgraph">
<area shape="rect" id="node2" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="208,247,295,273"/>
<area shape="rect" id="node3" href="ubifs_2commit_8c.html#a91c88ecee0c3d4a55bbe6669a0caa521" title="run_bg_commit" alt="" coords="350,184,461,211"/>
<area shape="rect" id="node10" href="ubifs_8h.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="343,272,468,299"/>
<area shape="rect" id="node4" href="ubifs_8h.html#ad1d2abb94e9ca171f253ba64fdbf7aa6" title="ubifs_bg_thread" alt="" coords="711,145,825,172"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="924,120,1017,147"/>
<area shape="rect" id="node8" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="908,171,1033,197"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1120,5,1229,32"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="1337,5,1431,32"/>
<area shape="rect" id="node9" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="1113,56,1236,83"/>
<area shape="rect" id="node11" href="ubifs_2super_8c.html#a5f9c4c32c42dc338c1b84b87b7098105" title="ubifs_sync_fs" alt="" coords="527,196,630,223"/>
<area shape="rect" id="node12" href="ubifs_2recovery_8c.html#acb6fbec748694453a2e4b3ed2be6cc6b" title="grab_empty_leb" alt="" coords="521,297,636,324"/>
<area shape="rect" id="node13" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="689,233,847,260"/>
<area shape="rect" id="node22" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="705,1171,831,1197"/>
<area shape="rect" id="node42" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="516,399,641,425"/>
<area shape="rect" id="node14" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="907,233,1034,260"/>
<area shape="rect" id="node15" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1317,436,1451,463"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1128,208,1221,235"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1133,157,1216,184"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1130,259,1219,285"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1127,309,1223,336"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1123,360,1226,387"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1341,816,1427,843"/>
<area shape="rect" id="node23" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="913,385,1029,412"/>
<area shape="rect" id="node28" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="902,1412,1039,1439"/>
<area shape="rect" id="node31" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="899,1272,1042,1299"/>
<area shape="rect" id="node34" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="907,1348,1034,1375"/>
<area shape="rect" id="node36" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="911,1171,1031,1197"/>
<area shape="rect" id="node37" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="909,1221,1033,1248"/>
<area shape="rect" id="node38" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="898,968,1043,995"/>
<area shape="rect" id="node40" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="895,1120,1047,1147"/>
<area shape="rect" id="node24" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1129,411,1220,437"/>
<area shape="rect" id="node25" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1136,461,1213,488"/>
<area shape="rect" id="node26" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1129,512,1220,539"/>
<area shape="rect" id="node27" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1131,563,1218,589"/>
<area shape="rect" id="node29" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="1125,1424,1224,1451"/>
<area shape="rect" id="node30" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1334,1221,1434,1248"/>
<area shape="rect" id="node32" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="1113,1323,1236,1349"/>
<area shape="rect" id="node33" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="1099,1272,1250,1299"/>
<area shape="rect" id="node35" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1121,1373,1228,1400"/>
<area shape="rect" id="node39" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="1125,867,1224,893"/>
<area shape="rect" id="node41" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="1126,1120,1223,1147"/>
<area shape="rect" id="node43" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="901,613,1040,640"/>
<area shape="rect" id="node44" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="1113,664,1236,691"/>
<area shape="rect" id="node45" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="1118,715,1231,741"/>
<area shape="rect" id="node46" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="1135,765,1215,792"/>
<area shape="rect" id="node47" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="1095,968,1255,995"/>
<area shape="rect" id="node48" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="1329,917,1439,944"/>
<area shape="rect" id="node49" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="1303,993,1465,1020"/>
<area shape="rect" id="node50" href="ubifs_2ioctl_8c.html#a06251cc4602342e44b5ed0a1b39f7e60" title="setflags" alt="" coords="1141,613,1209,640"/>
</map>
</div>

</div>
</div>
<a id="a2e83b83738924a4b92576798c5409df2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e83b83738924a4b92576798c5409df2">&#9670;&nbsp;</a></span>ubifs_get_idx_gc_leb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ubifs_get_idx_gc_leb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_get_idx_gc_leb - get a LEB from GC'd index LEB list. <code></code>: UBIFS file-system description object</p>
<p>Called during start commit so locks are not needed. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2gc_8c_a2e83b83738924a4b92576798c5409df2_icgraph.png" border="0" usemap="#ubifs_2gc_8c_a2e83b83738924a4b92576798c5409df2_icgraph" alt=""/></div>
<map name="ubifs_2gc_8c_a2e83b83738924a4b92576798c5409df2_icgraph" id="ubifs_2gc_8c_a2e83b83738924a4b92576798c5409df2_icgraph">
<area shape="rect" id="node2" href="find_8c.html#a173f9670c2518646a936453e0af21940" title="get_idx_gc_leb" alt="" coords="197,284,307,311"/>
<area shape="rect" id="node3" href="ubifs_8h.html#a9755efbbff945daa2e58b2c996976a29" title="ubifs_find_dirty_idx_leb" alt="" coords="355,284,513,311"/>
<area shape="rect" id="node4" href="tnc__commit_8c.html#ae35ab1b0e8a8676ac825941f36e77bdd" title="layout_leb_in_gaps" alt="" coords="561,284,695,311"/>
<area shape="rect" id="node5" href="tnc__commit_8c.html#aa94160dc8891f55de97cfb630b191ef2" title="layout_in_gaps" alt="" coords="743,284,852,311"/>
<area shape="rect" id="node6" href="tnc__commit_8c.html#a1f7210689e6f040c0b106db3e447e04b" title="layout_commit" alt="" coords="900,284,1007,311"/>
<area shape="rect" id="node7" href="ubifs_8h.html#ae1e7a24e81c4fa022a4065530bd77bff" title="ubifs_tnc_start_commit" alt="" coords="1055,284,1213,311"/>
<area shape="rect" id="node8" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="1261,284,1348,311"/>
<area shape="rect" id="node9" href="ubifs_2commit_8c.html#a91c88ecee0c3d4a55bbe6669a0caa521" title="run_bg_commit" alt="" coords="1403,221,1514,248"/>
<area shape="rect" id="node15" href="ubifs_8h.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="1396,309,1521,336"/>
<area shape="rect" id="node10" href="ubifs_8h.html#ad1d2abb94e9ca171f253ba64fdbf7aa6" title="ubifs_bg_thread" alt="" coords="1764,183,1879,209"/>
<area shape="rect" id="node11" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="1977,132,2071,159"/>
<area shape="rect" id="node13" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="1961,183,2087,209"/>
<area shape="rect" id="node12" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="2169,5,2278,32"/>
<area shape="rect" id="node14" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="2162,56,2285,83"/>
<area shape="rect" id="node16" href="ubifs_2super_8c.html#a5f9c4c32c42dc338c1b84b87b7098105" title="ubifs_sync_fs" alt="" coords="1581,335,1683,361"/>
<area shape="rect" id="node17" href="ubifs_2recovery_8c.html#acb6fbec748694453a2e4b3ed2be6cc6b" title="grab_empty_leb" alt="" coords="1575,284,1689,311"/>
<area shape="rect" id="node18" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="1743,233,1900,260"/>
<area shape="rect" id="node27" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="1759,917,1884,944"/>
<area shape="rect" id="node47" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="1569,397,1695,424"/>
<area shape="rect" id="node19" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="1961,233,2087,260"/>
<area shape="rect" id="node20" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="2347,385,2480,412"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="2177,157,2270,184"/>
<area shape="rect" id="node22" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="2182,259,2265,285"/>
<area shape="rect" id="node24" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="2179,208,2268,235"/>
<area shape="rect" id="node25" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="2175,309,2271,336"/>
<area shape="rect" id="node26" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="2172,360,2275,387"/>
<area shape="rect" id="node23" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="2370,715,2457,741"/>
<area shape="rect" id="node28" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="1966,385,2082,412"/>
<area shape="rect" id="node33" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="1955,1069,2093,1096"/>
<area shape="rect" id="node36" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="1953,1120,2095,1147"/>
<area shape="rect" id="node39" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="1961,1019,2087,1045"/>
<area shape="rect" id="node41" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="1964,917,2084,944"/>
<area shape="rect" id="node42" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="1962,968,2086,995"/>
<area shape="rect" id="node43" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="1951,791,2097,817"/>
<area shape="rect" id="node45" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="1948,867,2100,893"/>
<area shape="rect" id="node29" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="2178,512,2269,539"/>
<area shape="rect" id="node30" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="2185,563,2262,589"/>
<area shape="rect" id="node31" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="2178,411,2269,437"/>
<area shape="rect" id="node32" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="2180,461,2267,488"/>
<area shape="rect" id="node34" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="2174,1069,2273,1096"/>
<area shape="rect" id="node35" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="2363,968,2463,995"/>
<area shape="rect" id="node37" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="2162,1171,2285,1197"/>
<area shape="rect" id="node38" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="2148,1120,2299,1147"/>
<area shape="rect" id="node40" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="2170,1019,2277,1045"/>
<area shape="rect" id="node44" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="2174,765,2273,792"/>
<area shape="rect" id="node46" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="2175,867,2272,893"/>
<area shape="rect" id="node48" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="1955,487,2093,513"/>
<area shape="rect" id="node49" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="2162,613,2285,640"/>
<area shape="rect" id="node50" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="2167,664,2280,691"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_fbbc61eb3235ac15a35746d00bf5db85.html">ubifs</a></li><li class="navelem"><a class="el" href="ubifs_2gc_8c.html">gc.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>

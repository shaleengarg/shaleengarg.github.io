<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>linux/fs: ubifs/recovery.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">linux/fs
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('ubifs_2recovery_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">recovery.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;linux/crc32.h&gt;</code><br />
<code>#include &lt;linux/slab.h&gt;</code><br />
<code>#include &quot;<a class="el" href="ubifs_8h_source.html">ubifs.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for recovery.c:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c__incl.png" border="0" usemap="#ubifs_2recovery_8c" alt=""/></div>
<map name="ubifs_2recovery_8c" id="ubifs_2recovery_8c">
<area shape="rect" id="node4" href="ubifs_8h.html" title="ubifs.h" alt="" coords="1160,80,1221,107"/>
<area shape="rect" id="node21" href="ubifs-media_8h.html" title="ubifs&#45;media.h" alt="" coords="2143,155,2243,181"/>
<area shape="rect" id="node22" href="ubifs_2debug_8h.html" title="debug.h" alt="" coords="2267,155,2335,181"/>
<area shape="rect" id="node23" href="misc_8h.html" title="misc.h" alt="" coords="2360,155,2421,181"/>
<area shape="rect" id="node24" href="key_8h.html" title="key.h" alt="" coords="2446,155,2501,181"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsize__entry.html">size_entry</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ade5d36157779e5eb588cc94b1ea387b7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2recovery_8c.html#ade5d36157779e5eb588cc94b1ea387b7">is_empty</a> (void *buf, int <a class="el" href="rock_8h.html#aa1460ec7ef11d3c3a91c8ee9fb6380d5">len</a>)</td></tr>
<tr class="separator:ade5d36157779e5eb588cc94b1ea387b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a807fcfedd9f3b8440c4d19a2f8c31de3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2recovery_8c.html#a807fcfedd9f3b8440c4d19a2f8c31de3">first_non_ff</a> (void *buf, int <a class="el" href="rock_8h.html#aa1460ec7ef11d3c3a91c8ee9fb6380d5">len</a>)</td></tr>
<tr class="separator:a807fcfedd9f3b8440c4d19a2f8c31de3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a01d76e5a65d73c6c44c1171759a231"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2recovery_8c.html#a9a01d76e5a65d73c6c44c1171759a231">get_master_node</a> (const struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, int lnum, void **pbuf, struct <a class="el" href="structubifs__mst__node.html">ubifs_mst_node</a> **mst, void **cor)</td></tr>
<tr class="separator:a9a01d76e5a65d73c6c44c1171759a231"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecb3cf138b2d6e0039658a633e8a9d45"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2recovery_8c.html#aecb3cf138b2d6e0039658a633e8a9d45">write_rcvrd_mst_node</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, struct <a class="el" href="structubifs__mst__node.html">ubifs_mst_node</a> *mst)</td></tr>
<tr class="separator:aecb3cf138b2d6e0039658a633e8a9d45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11a5ff140312c68bb4c5e44593d11b90"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2recovery_8c.html#a11a5ff140312c68bb4c5e44593d11b90">ubifs_recover_master_node</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:a11a5ff140312c68bb4c5e44593d11b90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade432ff9351ac85efcb9cf0094d7b157"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2recovery_8c.html#ade432ff9351ac85efcb9cf0094d7b157">ubifs_write_rcvrd_mst_node</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:ade432ff9351ac85efcb9cf0094d7b157"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ecb90e06a084b7cad3a06a6231e16e4"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2recovery_8c.html#a8ecb90e06a084b7cad3a06a6231e16e4">is_last_write</a> (const struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, void *buf, int offs)</td></tr>
<tr class="separator:a8ecb90e06a084b7cad3a06a6231e16e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a159ee1c7bcae2070c7e9faf7c15ac7d5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2recovery_8c.html#a159ee1c7bcae2070c7e9faf7c15ac7d5">clean_buf</a> (const struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, void **buf, int lnum, int *offs, int *<a class="el" href="rock_8h.html#aa1460ec7ef11d3c3a91c8ee9fb6380d5">len</a>)</td></tr>
<tr class="separator:a159ee1c7bcae2070c7e9faf7c15ac7d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51a58f1633fe0fc0333795b1a9216aa0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2recovery_8c.html#a51a58f1633fe0fc0333795b1a9216aa0">no_more_nodes</a> (const struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, void *buf, int <a class="el" href="rock_8h.html#aa1460ec7ef11d3c3a91c8ee9fb6380d5">len</a>, int lnum, int offs)</td></tr>
<tr class="separator:a51a58f1633fe0fc0333795b1a9216aa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accaf4c7132be008366b00b1629c46842"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2recovery_8c.html#accaf4c7132be008366b00b1629c46842">fix_unclean_leb</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, struct <a class="el" href="structubifs__scan__leb.html">ubifs_scan_leb</a> *sleb, int <a class="el" href="cifspdu_8h.html#a94f8d852c02921f3079f6987b4a5d7d0">start</a>)</td></tr>
<tr class="separator:accaf4c7132be008366b00b1629c46842"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80a185873a2bf1d5961168d93883669a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2recovery_8c.html#a80a185873a2bf1d5961168d93883669a">drop_last_group</a> (struct <a class="el" href="structubifs__scan__leb.html">ubifs_scan_leb</a> *sleb, int *offs)</td></tr>
<tr class="separator:a80a185873a2bf1d5961168d93883669a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56c9553c0af0cde1ea496d78e0d5cc5e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2recovery_8c.html#a56c9553c0af0cde1ea496d78e0d5cc5e">drop_last_node</a> (struct <a class="el" href="structubifs__scan__leb.html">ubifs_scan_leb</a> *sleb, int *offs)</td></tr>
<tr class="separator:a56c9553c0af0cde1ea496d78e0d5cc5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d3dc4ff452e67e327b4ad2e8888ffa4"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structubifs__scan__leb.html">ubifs_scan_leb</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2recovery_8c.html#a1d3dc4ff452e67e327b4ad2e8888ffa4">ubifs_recover_leb</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, int lnum, int offs, void *sbuf, int jhead)</td></tr>
<tr class="separator:a1d3dc4ff452e67e327b4ad2e8888ffa4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ce17b89aee2271a22804d44fcc78aa6"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2recovery_8c.html#a9ce17b89aee2271a22804d44fcc78aa6">get_cs_sqnum</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, int lnum, int offs, unsigned long long *cs_sqnum)</td></tr>
<tr class="separator:a9ce17b89aee2271a22804d44fcc78aa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42393d54bbb6a1e25d5dde1f396b31f3"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structubifs__scan__leb.html">ubifs_scan_leb</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2recovery_8c.html#a42393d54bbb6a1e25d5dde1f396b31f3">ubifs_recover_log_leb</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, int lnum, int offs, void *sbuf)</td></tr>
<tr class="separator:a42393d54bbb6a1e25d5dde1f396b31f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa854cba2b9edc1a50c631dd212461ab9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2recovery_8c.html#aa854cba2b9edc1a50c631dd212461ab9">recover_head</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, int lnum, int offs, void *sbuf)</td></tr>
<tr class="separator:aa854cba2b9edc1a50c631dd212461ab9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0121bf0d3497aba350c96bbd431bea2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2recovery_8c.html#ab0121bf0d3497aba350c96bbd431bea2">ubifs_recover_inl_heads</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, void *sbuf)</td></tr>
<tr class="separator:ab0121bf0d3497aba350c96bbd431bea2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd1f4122259576c896b95cb623891ed1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2recovery_8c.html#abd1f4122259576c896b95cb623891ed1">clean_an_unclean_leb</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, struct <a class="el" href="structubifs__unclean__leb.html">ubifs_unclean_leb</a> *ucleb, void *sbuf)</td></tr>
<tr class="separator:abd1f4122259576c896b95cb623891ed1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a427d1842fd140c457b93e9d0f9c1e78d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2recovery_8c.html#a427d1842fd140c457b93e9d0f9c1e78d">ubifs_clean_lebs</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, void *sbuf)</td></tr>
<tr class="separator:a427d1842fd140c457b93e9d0f9c1e78d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb6fbec748694453a2e4b3ed2be6cc6b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2recovery_8c.html#acb6fbec748694453a2e4b3ed2be6cc6b">grab_empty_leb</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:acb6fbec748694453a2e4b3ed2be6cc6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae25afe7a337008e52b357558646ed71f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2recovery_8c.html#ae25afe7a337008e52b357558646ed71f">ubifs_rcvry_gc_commit</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:ae25afe7a337008e52b357558646ed71f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac39806a2c7eab3c00600eeb60b73daf0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2recovery_8c.html#ac39806a2c7eab3c00600eeb60b73daf0">add_ino</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, ino_t inum, loff_t i_size, loff_t d_size, int exists)</td></tr>
<tr class="separator:ac39806a2c7eab3c00600eeb60b73daf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a574f611c4294ffdb6ff758f549cd798e"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structsize__entry.html">size_entry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2recovery_8c.html#a574f611c4294ffdb6ff758f549cd798e">find_ino</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, ino_t inum)</td></tr>
<tr class="separator:a574f611c4294ffdb6ff758f549cd798e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93e3361d5b4ba48167d1aadf3a45e724"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2recovery_8c.html#a93e3361d5b4ba48167d1aadf3a45e724">remove_ino</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, ino_t inum)</td></tr>
<tr class="separator:a93e3361d5b4ba48167d1aadf3a45e724"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f091c7b064ca0a6d513bc580ad8c0fe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2recovery_8c.html#a4f091c7b064ca0a6d513bc580ad8c0fe">ubifs_destroy_size_tree</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:a4f091c7b064ca0a6d513bc580ad8c0fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88dd4e25e224557f93cba67c93532e0a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2recovery_8c.html#a88dd4e25e224557f93cba67c93532e0a">ubifs_recover_size_accum</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, union <a class="el" href="unionubifs__key.html">ubifs_key</a> *<a class="el" href="cifspdu_8h.html#a63d44da4c2019b7ae1dd3c4e15b887aa">key</a>, int deletion, loff_t new_size)</td></tr>
<tr class="separator:a88dd4e25e224557f93cba67c93532e0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d91d461205445e4f0500381ff4ffd82"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2recovery_8c.html#a9d91d461205445e4f0500381ff4ffd82">fix_size_in_place</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, struct <a class="el" href="structsize__entry.html">size_entry</a> *e)</td></tr>
<tr class="separator:a9d91d461205445e4f0500381ff4ffd82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20e75fbfb42bc7cfecf3b62ab3f12f8e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2recovery_8c.html#a20e75fbfb42bc7cfecf3b62ab3f12f8e">ubifs_recover_size</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:a20e75fbfb42bc7cfecf3b62ab3f12f8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ac39806a2c7eab3c00600eeb60b73daf0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac39806a2c7eab3c00600eeb60b73daf0">&#9670;&nbsp;</a></span>add_ino()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int add_ino </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ino_t&#160;</td>
          <td class="paramname"><em>inum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t&#160;</td>
          <td class="paramname"><em>i_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t&#160;</td>
          <td class="paramname"><em>d_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>exists</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>add_ino - add an entry to the size tree. <code></code>: UBIFS file-system description object : inode number : size on inode : maximum size based on data nodes : indicates whether the inode exists </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_ac39806a2c7eab3c00600eeb60b73daf0_icgraph.png" border="0" usemap="#ubifs_2recovery_8c_ac39806a2c7eab3c00600eeb60b73daf0_icgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_ac39806a2c7eab3c00600eeb60b73daf0_icgraph" id="ubifs_2recovery_8c_ac39806a2c7eab3c00600eeb60b73daf0_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#a88dd4e25e224557f93cba67c93532e0a" title="ubifs_recover_size\l_accum" alt="" coords="120,125,251,166"/>
<area shape="rect" id="node3" href="replay_8c.html#aed3ed0e13bec51f8343217fe9a6552fe" title="apply_replay_entry" alt="" coords="299,56,429,83"/>
<area shape="rect" id="node9" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="301,157,427,184"/>
<area shape="rect" id="node4" href="replay_8c.html#adc5456ddf590ac5979e20ff60b4cf06a" title="apply_replay_list" alt="" coords="485,5,603,32"/>
<area shape="rect" id="node5" href="ubifs_8h.html#af76f722fe22c9c52675c75c16369d414" title="ubifs_replay_journal" alt="" coords="659,5,796,32"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="847,5,941,32"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="992,5,1101,32"/>
<area shape="rect" id="node8" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="1149,5,1243,32"/>
<area shape="rect" id="node10" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="477,56,611,83"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="497,107,591,133"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="503,157,585,184"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="499,208,589,235"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="496,259,592,285"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="493,309,595,336"/>
<area shape="rect" id="node11" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="691,56,764,83"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="679,132,775,159"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="684,183,771,209"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="844,183,944,209"/>
</map>
</div>

</div>
</div>
<a id="abd1f4122259576c896b95cb623891ed1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd1f4122259576c896b95cb623891ed1">&#9670;&nbsp;</a></span>clean_an_unclean_leb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int clean_an_unclean_leb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structubifs__unclean__leb.html">ubifs_unclean_leb</a> *&#160;</td>
          <td class="paramname"><em>ucleb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>sbuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>clean_an_unclean_leb - read and write a LEB to remove corruption. <code></code>: UBIFS file-system description object : unclean LEB information : LEB-sized buffer to use</p>
<p>This function reads a LEB up to a point pre-determined by the mount recovery, checks the nodes, and writes the result back to the flash, thereby cleaning off any following corruption, or non-fatal ECC errors.</p>
<p>This function returns %0 on success and a negative error code on failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_abd1f4122259576c896b95cb623891ed1_cgraph.png" border="0" usemap="#ubifs_2recovery_8c_abd1f4122259576c896b95cb623891ed1_cgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_abd1f4122259576c896b95cb623891ed1_cgraph" id="ubifs_2recovery_8c_abd1f4122259576c896b95cb623891ed1_cgraph">
<area shape="rect" id="node2" href="ubifs_2io_8c.html#ad9d3a62a61d21e1faa60cd6e630c41ac" title="ubifs_leb_unmap" alt="" coords="205,1200,325,1226"/>
<area shape="rect" id="node27" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="995,1301,1067,1328"/>
<area shape="rect" id="node43" href="ubifs_2io_8c.html#ab6a2a3c4a79d6d4c52350540437d3cb3" title="ubifs_leb_read" alt="" coords="379,1504,486,1530"/>
<area shape="rect" id="node44" href="ubifs_2scan_8c.html#ab974ec909e594f54f7773880688a2334" title="ubifs_scan_a_node" alt="" coords="557,1681,691,1708"/>
<area shape="rect" id="node47" href="ubifs_2scan_8c.html#a18197e05567059efbb981ebe037255bb" title="ubifs_scanned_corruption" alt="" coords="539,1554,709,1581"/>
<area shape="rect" id="node48" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="226,1605,305,1632"/>
<area shape="rect" id="node49" href="ubifs_2io_8c.html#ac70865809ab5c33c55274560e453f535" title="ubifs_leb_change" alt="" coords="204,1352,327,1378"/>
<area shape="rect" id="node3" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="778,1352,897,1378"/>
<area shape="rect" id="node4" href="ubifs_2debug_8c.html#a6ba17156289f8b8ecaed40dbafc04858" title="dbg_leb_unmap" alt="" coords="376,1149,489,1176"/>
<area shape="rect" id="node42" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="379,1200,486,1226"/>
<area shape="rect" id="node5" href="ubifs_2debug_8h.html#ab599356d6c84ddd2c7b9001b452c30bd" title="dbg_is_power_cut" alt="" coords="561,693,687,720"/>
<area shape="rect" id="node40" href="ubifs_2debug_8c.html#a67b6fc23cfbf882431d33323a03ef74c" title="power_cut_emulated" alt="" coords="553,1250,695,1277"/>
<area shape="rect" id="node6" href="ubifs_2debug_8h.html#aed9c32fd77ce70a2d917ab58c56189c2" title="ubifs_debugging_init" alt="" coords="767,946,907,973"/>
<area shape="rect" id="node7" href="ubifs_2debug_8h.html#a1e62d7c391f555902a25f8060eb6f1ec" title="ubifs_debugging_exit" alt="" coords="765,997,909,1024"/>
<area shape="rect" id="node8" href="ubifs_2debug_8h.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="796,1048,879,1074"/>
<area shape="rect" id="node9" href="ubifs_2debug_8h.html#a615a670f26d4407b52175ce5f3faf594" title="dbg_cstate" alt="" coords="794,1098,881,1125"/>
<area shape="rect" id="node10" href="ubifs_2debug_8h.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="797,85,878,112"/>
<area shape="rect" id="node11" href="ubifs_2debug_8h.html#a4184d82b0b2ff0fffc6ab3d4de4a1e7a" title="dbg_get_key_dump" alt="" coords="770,136,905,162"/>
<area shape="rect" id="node12" href="ubifs_2debug_8h.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="777,186,898,213"/>
<area shape="rect" id="node13" href="ubifs_2debug_8h.html#a6ecc9bff59f14d28615ed14fa5323681" title="ubifs_dump_inode" alt="" coords="967,845,1094,872"/>
<area shape="rect" id="node15" href="ubifs_2debug_8h.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="969,1250,1093,1277"/>
<area shape="rect" id="node22" href="ubifs_2debug_8h.html#acfcbe45894b3b41385c1f9891d57bb97" title="ubifs_dump_budget_req" alt="" coords="757,237,917,264"/>
<area shape="rect" id="node23" href="ubifs_2debug_8h.html#ab351e7abb59edb97d57bd44dd83b0484" title="ubifs_dump_lstats" alt="" coords="773,288,901,314"/>
<area shape="rect" id="node24" href="ubifs_2debug_8h.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="775,338,899,365"/>
<area shape="rect" id="node25" href="ubifs_2debug_8h.html#ad04e55858b69b78f20ea8b0fb79f9f27" title="ubifs_dump_lprop" alt="" coords="775,389,899,416"/>
<area shape="rect" id="node26" href="ubifs_2debug_8h.html#a2fa0aeaaa556f0b13d098456ef7d86d4" title="ubifs_dump_lprops" alt="" coords="772,1149,903,1176"/>
<area shape="rect" id="node28" href="ubifs_2debug_8h.html#afc25fcc00c516fab54a12303d87bc100" title="ubifs_dump_lpt_info" alt="" coords="768,440,907,466"/>
<area shape="rect" id="node29" href="ubifs_2debug_8h.html#afa1952f7d3c2c791a330e3dc245c5a83" title="ubifs_dump_leb" alt="" coords="781,1200,894,1226"/>
<area shape="rect" id="node31" href="ubifs_2debug_8h.html#a454a80414a371832b3f68f828f6a6353" title="ubifs_dump_sleb" alt="" coords="777,1250,897,1277"/>
<area shape="rect" id="node32" href="ubifs_2debug_8h.html#a56365d730ac6932bf3163a8ba7279779" title="ubifs_dump_znode" alt="" coords="965,389,1096,416"/>
<area shape="rect" id="node33" href="ubifs_2debug_8h.html#a5600b63b8362df17ed46c4e20784fb6c" title="ubifs_dump_heap" alt="" coords="775,642,899,669"/>
<area shape="rect" id="node34" href="ubifs_2debug_8h.html#ab2224f946272a25cfacf2607c6502818" title="ubifs_dump_pnode" alt="" coords="772,693,903,720"/>
<area shape="rect" id="node35" href="ubifs_2debug_8h.html#a6ad4e8a10c442517164e350787696d9d" title="ubifs_dump_tnc" alt="" coords="780,744,895,770"/>
<area shape="rect" id="node36" href="ubifs_2debug_8h.html#a1988de032288d9afc418a9f36c0e1a38" title="ubifs_dump_index" alt="" coords="774,794,901,821"/>
<area shape="rect" id="node37" href="ubifs_2debug_8h.html#a2dad580c9c3f21053039a854eb81bed2" title="ubifs_dump_lpt_lebs" alt="" coords="767,845,908,872"/>
<area shape="rect" id="node38" href="ubifs_2debug_8h.html#ac9540eb544441fb116e86f4799b55265" title="dbg_walk_index" alt="" coords="780,592,895,618"/>
<area shape="rect" id="node39" href="ubifs_2debug_8h.html#a42a0e664e63f651533d2a5abc23bf4da" title="dbg_save_space_info" alt="" coords="763,896,911,922"/>
<area shape="rect" id="node14" href="key_8h.html#a5611c13d648e672825da064c90c8903a" title="key_read" alt="" coords="1167,1200,1242,1226"/>
<area shape="rect" id="node16" href="ubifs_2debug_8c.html#a40190f9f60ac94040c30dbd97c73a3ca" title="dump_ch" alt="" coords="1167,1352,1242,1378"/>
<area shape="rect" id="node18" href="ubifs_2debug_8c.html#a4b30ad73e46b72b5043aa4efa7fb8d9a" title="get_key_hash" alt="" coords="1153,1402,1256,1429"/>
<area shape="rect" id="node19" href="ubifs_2debug_8c.html#af1196269cd9c24affacc60e33f960f49" title="get_key_fmt" alt="" coords="1157,1250,1252,1277"/>
<area shape="rect" id="node20" href="ubifs_2debug_8c.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="1144,1149,1265,1176"/>
<area shape="rect" id="node21" href="misc_8h.html#a1598cadb907a20f9e5dc3e7ee74edb1d" title="ubifs_idx_branch" alt="" coords="1145,1301,1265,1328"/>
<area shape="rect" id="node17" href="ubifs_2debug_8c.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="1313,1630,1396,1657"/>
<area shape="rect" id="node30" href="ubifs_2debug_8c.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="969,1352,1093,1378"/>
<area shape="rect" id="node41" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="795,1301,880,1328"/>
<area shape="rect" id="node45" href="ubifs_2scan_8c.html#a93a80ae9e3252efb52d991f4abc7152a" title="scan_padding_bytes" alt="" coords="767,1757,908,1784"/>
<area shape="rect" id="node46" href="ubifs_2io_8c.html#ab9b2f0cc24eff9f69bd606979eb3a53e" title="ubifs_check_node" alt="" coords="774,1656,901,1682"/>
<area shape="rect" id="node50" href="ubifs_2debug_8c.html#af2ad985422103ec5e3e13776002d6ceb" title="dbg_leb_change" alt="" coords="375,1250,491,1277"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_abd1f4122259576c896b95cb623891ed1_icgraph.png" border="0" usemap="#ubifs_2recovery_8c_abd1f4122259576c896b95cb623891ed1_icgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_abd1f4122259576c896b95cb623891ed1_icgraph" id="ubifs_2recovery_8c_abd1f4122259576c896b95cb623891ed1_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#a427d1842fd140c457b93e9d0f9c1e78d" title="ubifs_clean_lebs" alt="" coords="204,132,323,159"/>
<area shape="rect" id="node3" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="371,56,497,83"/>
<area shape="rect" id="node5" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="371,157,497,184"/>
<area shape="rect" id="node4" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="551,5,673,32"/>
<area shape="rect" id="node6" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="545,56,679,83"/>
<area shape="rect" id="node8" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="565,107,659,133"/>
<area shape="rect" id="node9" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="571,157,653,184"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="567,208,657,235"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="564,259,660,285"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="561,309,663,336"/>
<area shape="rect" id="node7" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="738,56,811,83"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="727,132,823,159"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="731,183,818,209"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="871,183,971,209"/>
</map>
</div>

</div>
</div>
<a id="a159ee1c7bcae2070c7e9faf7c15ac7d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a159ee1c7bcae2070c7e9faf7c15ac7d5">&#9670;&nbsp;</a></span>clean_buf()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void clean_buf </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>offs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>clean_buf - clean the data from an LEB sitting in a buffer. <code></code>: UBIFS file-system description object : buffer to clean : LEB number to clean : offset from which to clean : length of buffer</p>
<p>This function pads up to the next min_io_size boundary (if there is one) and sets empty space to all 0xff. ,  and  are updated to the next <code></code>-&gt;min_io_size boundary. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_a159ee1c7bcae2070c7e9faf7c15ac7d5_cgraph.png" border="0" usemap="#ubifs_2recovery_8c_a159ee1c7bcae2070c7e9faf7c15ac7d5_cgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_a159ee1c7bcae2070c7e9faf7c15ac7d5_cgraph" id="ubifs_2recovery_8c_a159ee1c7bcae2070c7e9faf7c15ac7d5_cgraph">
<area shape="rect" id="node2" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="132,5,211,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_a159ee1c7bcae2070c7e9faf7c15ac7d5_icgraph.png" border="0" usemap="#ubifs_2recovery_8c_a159ee1c7bcae2070c7e9faf7c15ac7d5_icgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_a159ee1c7bcae2070c7e9faf7c15ac7d5_icgraph" id="ubifs_2recovery_8c_a159ee1c7bcae2070c7e9faf7c15ac7d5_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#a1d3dc4ff452e67e327b4ad2e8888ffa4" title="ubifs_recover_leb" alt="" coords="132,81,256,108"/>
<area shape="rect" id="node3" href="ubifs_2orphan_8c.html#a56d0d86cd1db3d34e52d5b91784d55da" title="kill_orphans" alt="" coords="333,5,423,32"/>
<area shape="rect" id="node8" href="ubifs_8h.html#a42393d54bbb6a1e25d5dde1f396b31f3" title="ubifs_recover_log_leb" alt="" coords="304,107,452,133"/>
<area shape="rect" id="node11" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="510,196,637,223"/>
<area shape="rect" id="node22" href="replay_8c.html#a08ca5de44800c3270db809cec539c7e2" title="replay_bud" alt="" coords="335,56,421,83"/>
<area shape="rect" id="node4" href="ubifs_8h.html#a2c245b49b58cf15dd381f99530af6807" title="ubifs_mount_orphans" alt="" coords="500,5,647,32"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="881,31,975,57"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1024,31,1133,57"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="1181,31,1275,57"/>
<area shape="rect" id="node9" href="replay_8c.html#afc69bf474cbe8a69ea2bfea0494745df" title="replay_log_leb" alt="" coords="521,107,626,133"/>
<area shape="rect" id="node10" href="ubifs_8h.html#af76f722fe22c9c52675c75c16369d414" title="ubifs_replay_journal" alt="" coords="695,56,832,83"/>
<area shape="rect" id="node12" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="697,208,830,235"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="717,259,810,285"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="722,309,805,336"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="719,360,808,387"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="715,107,811,133"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="712,157,815,184"/>
<area shape="rect" id="node13" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="891,208,965,235"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="880,284,976,311"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="885,335,971,361"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="1029,335,1129,361"/>
<area shape="rect" id="node23" href="replay_8c.html#aa341c5f3914165aaeb6b9e63130cbf98" title="replay_buds" alt="" coords="527,56,619,83"/>
</map>
</div>

</div>
</div>
<a id="a80a185873a2bf1d5961168d93883669a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80a185873a2bf1d5961168d93883669a">&#9670;&nbsp;</a></span>drop_last_group()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void drop_last_group </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__scan__leb.html">ubifs_scan_leb</a> *&#160;</td>
          <td class="paramname"><em>sleb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>offs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>drop_last_group - drop the last group of nodes. : scanned LEB information : offset of dropped nodes is returned here</p>
<p>This is a helper function for '<a class="el" href="ubifs_2recovery_8c.html#a1d3dc4ff452e67e327b4ad2e8888ffa4">ubifs_recover_leb()</a>' which drops the last group of nodes of the scanned LEB. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_a80a185873a2bf1d5961168d93883669a_icgraph.png" border="0" usemap="#ubifs_2recovery_8c_a80a185873a2bf1d5961168d93883669a_icgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_a80a185873a2bf1d5961168d93883669a_icgraph" id="ubifs_2recovery_8c_a80a185873a2bf1d5961168d93883669a_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#a1d3dc4ff452e67e327b4ad2e8888ffa4" title="ubifs_recover_leb" alt="" coords="168,81,292,108"/>
<area shape="rect" id="node3" href="ubifs_2orphan_8c.html#a56d0d86cd1db3d34e52d5b91784d55da" title="kill_orphans" alt="" coords="369,5,459,32"/>
<area shape="rect" id="node8" href="ubifs_8h.html#a42393d54bbb6a1e25d5dde1f396b31f3" title="ubifs_recover_log_leb" alt="" coords="340,107,488,133"/>
<area shape="rect" id="node11" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="546,196,673,223"/>
<area shape="rect" id="node22" href="replay_8c.html#a08ca5de44800c3270db809cec539c7e2" title="replay_bud" alt="" coords="371,56,457,83"/>
<area shape="rect" id="node4" href="ubifs_8h.html#a2c245b49b58cf15dd381f99530af6807" title="ubifs_mount_orphans" alt="" coords="536,5,683,32"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="917,31,1011,57"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1060,31,1169,57"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="1217,31,1311,57"/>
<area shape="rect" id="node9" href="replay_8c.html#afc69bf474cbe8a69ea2bfea0494745df" title="replay_log_leb" alt="" coords="557,107,662,133"/>
<area shape="rect" id="node10" href="ubifs_8h.html#af76f722fe22c9c52675c75c16369d414" title="ubifs_replay_journal" alt="" coords="731,56,868,83"/>
<area shape="rect" id="node12" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="733,208,866,235"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="753,259,846,285"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="758,309,841,336"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="755,360,844,387"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="751,107,847,133"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="748,157,851,184"/>
<area shape="rect" id="node13" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="927,208,1001,235"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="916,284,1012,311"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="921,335,1007,361"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="1065,335,1165,361"/>
<area shape="rect" id="node23" href="replay_8c.html#aa341c5f3914165aaeb6b9e63130cbf98" title="replay_buds" alt="" coords="563,56,655,83"/>
</map>
</div>

</div>
</div>
<a id="a56c9553c0af0cde1ea496d78e0d5cc5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56c9553c0af0cde1ea496d78e0d5cc5e">&#9670;&nbsp;</a></span>drop_last_node()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void drop_last_node </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__scan__leb.html">ubifs_scan_leb</a> *&#160;</td>
          <td class="paramname"><em>sleb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>offs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>drop_last_node - drop the last node. : scanned LEB information : offset of dropped nodes is returned here</p>
<p>This is a helper function for '<a class="el" href="ubifs_2recovery_8c.html#a1d3dc4ff452e67e327b4ad2e8888ffa4">ubifs_recover_leb()</a>' which drops the last node of the scanned LEB. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_a56c9553c0af0cde1ea496d78e0d5cc5e_icgraph.png" border="0" usemap="#ubifs_2recovery_8c_a56c9553c0af0cde1ea496d78e0d5cc5e_icgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_a56c9553c0af0cde1ea496d78e0d5cc5e_icgraph" id="ubifs_2recovery_8c_a56c9553c0af0cde1ea496d78e0d5cc5e_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#a1d3dc4ff452e67e327b4ad2e8888ffa4" title="ubifs_recover_leb" alt="" coords="164,81,288,108"/>
<area shape="rect" id="node3" href="ubifs_2orphan_8c.html#a56d0d86cd1db3d34e52d5b91784d55da" title="kill_orphans" alt="" coords="365,5,455,32"/>
<area shape="rect" id="node8" href="ubifs_8h.html#a42393d54bbb6a1e25d5dde1f396b31f3" title="ubifs_recover_log_leb" alt="" coords="336,107,484,133"/>
<area shape="rect" id="node11" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="542,196,669,223"/>
<area shape="rect" id="node22" href="replay_8c.html#a08ca5de44800c3270db809cec539c7e2" title="replay_bud" alt="" coords="367,56,453,83"/>
<area shape="rect" id="node4" href="ubifs_8h.html#a2c245b49b58cf15dd381f99530af6807" title="ubifs_mount_orphans" alt="" coords="532,5,679,32"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="913,31,1007,57"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1056,31,1165,57"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="1213,31,1307,57"/>
<area shape="rect" id="node9" href="replay_8c.html#afc69bf474cbe8a69ea2bfea0494745df" title="replay_log_leb" alt="" coords="553,107,658,133"/>
<area shape="rect" id="node10" href="ubifs_8h.html#af76f722fe22c9c52675c75c16369d414" title="ubifs_replay_journal" alt="" coords="727,56,864,83"/>
<area shape="rect" id="node12" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="729,208,862,235"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="749,259,842,285"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="754,309,837,336"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="751,360,840,387"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="747,107,843,133"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="744,157,847,184"/>
<area shape="rect" id="node13" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="923,208,997,235"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="912,284,1008,311"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="917,335,1003,361"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="1061,335,1161,361"/>
<area shape="rect" id="node23" href="replay_8c.html#aa341c5f3914165aaeb6b9e63130cbf98" title="replay_buds" alt="" coords="559,56,651,83"/>
</map>
</div>

</div>
</div>
<a id="a574f611c4294ffdb6ff758f549cd798e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a574f611c4294ffdb6ff758f549cd798e">&#9670;&nbsp;</a></span>find_ino()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structsize__entry.html">size_entry</a>* find_ino </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ino_t&#160;</td>
          <td class="paramname"><em>inum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>find_ino - find an entry on the size tree. <code></code>: UBIFS file-system description object : inode number </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_a574f611c4294ffdb6ff758f549cd798e_icgraph.png" border="0" usemap="#ubifs_2recovery_8c_a574f611c4294ffdb6ff758f549cd798e_icgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_a574f611c4294ffdb6ff758f549cd798e_icgraph" id="ubifs_2recovery_8c_a574f611c4294ffdb6ff758f549cd798e_icgraph">
<area shape="rect" id="node2" href="ubifs_2recovery_8c.html#a93e3361d5b4ba48167d1aadf3a45e724" title="remove_ino" alt="" coords="120,107,209,133"/>
<area shape="rect" id="node3" href="ubifs_8h.html#a88dd4e25e224557f93cba67c93532e0a" title="ubifs_recover_size\l_accum" alt="" coords="257,125,388,166"/>
<area shape="rect" id="node4" href="replay_8c.html#aed3ed0e13bec51f8343217fe9a6552fe" title="apply_replay_entry" alt="" coords="436,56,567,83"/>
<area shape="rect" id="node10" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="438,157,565,184"/>
<area shape="rect" id="node5" href="replay_8c.html#adc5456ddf590ac5979e20ff60b4cf06a" title="apply_replay_list" alt="" coords="622,5,741,32"/>
<area shape="rect" id="node6" href="ubifs_8h.html#af76f722fe22c9c52675c75c16369d414" title="ubifs_replay_journal" alt="" coords="796,5,933,32"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="985,5,1078,32"/>
<area shape="rect" id="node8" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1129,5,1239,32"/>
<area shape="rect" id="node9" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="1287,5,1380,32"/>
<area shape="rect" id="node11" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="615,56,748,83"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="635,107,728,133"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="640,157,723,184"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="637,208,726,235"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="633,259,729,285"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="630,309,733,336"/>
<area shape="rect" id="node12" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="828,56,901,83"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="817,132,913,159"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="821,183,908,209"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="981,183,1081,209"/>
</map>
</div>

</div>
</div>
<a id="a807fcfedd9f3b8440c4d19a2f8c31de3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a807fcfedd9f3b8440c4d19a2f8c31de3">&#9670;&nbsp;</a></span>first_non_ff()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int first_non_ff </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>first_non_ff - find offset of the first non-0xff byte. : buffer to search in : length of buffer</p>
<p>This function returns offset of the first non-0xff byte in  or %-1 if the buffer contains only 0xff bytes. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_a807fcfedd9f3b8440c4d19a2f8c31de3_icgraph.png" border="0" usemap="#ubifs_2recovery_8c_a807fcfedd9f3b8440c4d19a2f8c31de3_icgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_a807fcfedd9f3b8440c4d19a2f8c31de3_icgraph" id="ubifs_2recovery_8c_a807fcfedd9f3b8440c4d19a2f8c31de3_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#a1d3dc4ff452e67e327b4ad2e8888ffa4" title="ubifs_recover_leb" alt="" coords="140,81,264,108"/>
<area shape="rect" id="node3" href="ubifs_2orphan_8c.html#a56d0d86cd1db3d34e52d5b91784d55da" title="kill_orphans" alt="" coords="341,5,431,32"/>
<area shape="rect" id="node8" href="ubifs_8h.html#a42393d54bbb6a1e25d5dde1f396b31f3" title="ubifs_recover_log_leb" alt="" coords="312,107,460,133"/>
<area shape="rect" id="node11" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="518,196,645,223"/>
<area shape="rect" id="node22" href="replay_8c.html#a08ca5de44800c3270db809cec539c7e2" title="replay_bud" alt="" coords="343,56,429,83"/>
<area shape="rect" id="node4" href="ubifs_8h.html#a2c245b49b58cf15dd381f99530af6807" title="ubifs_mount_orphans" alt="" coords="508,5,655,32"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="889,31,983,57"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1032,31,1141,57"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="1189,31,1283,57"/>
<area shape="rect" id="node9" href="replay_8c.html#afc69bf474cbe8a69ea2bfea0494745df" title="replay_log_leb" alt="" coords="529,107,634,133"/>
<area shape="rect" id="node10" href="ubifs_8h.html#af76f722fe22c9c52675c75c16369d414" title="ubifs_replay_journal" alt="" coords="703,56,840,83"/>
<area shape="rect" id="node12" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="705,208,838,235"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="725,259,818,285"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="730,309,813,336"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="727,360,816,387"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="723,107,819,133"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="720,157,823,184"/>
<area shape="rect" id="node13" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="899,208,973,235"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="888,284,984,311"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="893,335,979,361"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="1037,335,1137,361"/>
<area shape="rect" id="node23" href="replay_8c.html#aa341c5f3914165aaeb6b9e63130cbf98" title="replay_buds" alt="" coords="535,56,627,83"/>
</map>
</div>

</div>
</div>
<a id="a9d91d461205445e4f0500381ff4ffd82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d91d461205445e4f0500381ff4ffd82">&#9670;&nbsp;</a></span>fix_size_in_place()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int fix_size_in_place </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structsize__entry.html">size_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>fix_size_in_place - fix inode size in place on flash. <code></code>: UBIFS file-system description object <em></em>: inode size information for recovery </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_a9d91d461205445e4f0500381ff4ffd82_cgraph.png" border="0" usemap="#ubifs_2recovery_8c_a9d91d461205445e4f0500381ff4ffd82_cgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_a9d91d461205445e4f0500381ff4ffd82_cgraph" id="ubifs_2recovery_8c_a9d91d461205445e4f0500381ff4ffd82_cgraph">
<area shape="rect" id="node2" href="key_8h.html#a60df8426bc46e1074661d077542ea933" title="ino_key_init" alt="" coords="189,360,280,387"/>
<area shape="rect" id="node3" href="tnc_8c.html#a93e762f5309412966e944b237a2c03c3" title="ubifs_tnc_locate" alt="" coords="176,993,293,1020"/>
<area shape="rect" id="node10" href="ubifs_2io_8c.html#ab6a2a3c4a79d6d4c52350540437d3cb3" title="ubifs_leb_read" alt="" coords="1501,360,1607,387"/>
<area shape="rect" id="node36" href="ubifs_2io_8c.html#ac70865809ab5c33c55274560e453f535" title="ubifs_leb_change" alt="" coords="1132,1512,1255,1539"/>
<area shape="rect" id="node49" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="1703,1753,1788,1780"/>
<area shape="rect" id="node4" href="tnc_8c.html#a2004703a60d098f1644d4f3e25338759" title="ubifs_lookup_level0" alt="" coords="341,1095,477,1121"/>
<area shape="rect" id="node21" href="key_8h.html#a391b7c6e47045b125899fd494b93b2ed" title="is_hash_key" alt="" coords="1329,1221,1423,1248"/>
<area shape="rect" id="node25" href="tnc_8c.html#add8ba6d4ce8281dbb79e417150da8e4e" title="tnc_read_hashed_node" alt="" coords="723,993,879,1020"/>
<area shape="rect" id="node26" href="tnc_8c.html#a74144891470c972de07b035100bdba69" title="fallible_read_node" alt="" coords="1130,943,1257,969"/>
<area shape="rect" id="node28" href="tnc__misc_8c.html#a9e631b2ac150afe245c06afae9abe5e4" title="ubifs_tnc_read_node" alt="" coords="927,588,1069,615"/>
<area shape="rect" id="node29" href="ubifs_2log_8c.html#adb9dc523cdf72cfa612382b02651778b" title="ubifs_get_wbuf" alt="" coords="1138,5,1249,32"/>
<area shape="rect" id="node35" href="tnc_8c.html#abd5f32bdeedb5786676c542035310ccc" title="maybe_leb_gced" alt="" coords="349,1044,469,1071"/>
<area shape="rect" id="node5" href="key_8h.html#a06f47822510ef850cb7065778115453c" title="key_type" alt="" coords="2039,1107,2113,1133"/>
<area shape="rect" id="node6" href="tnc__misc_8c.html#a59f2b6d42e83b9a23712bb251112eb1b" title="ubifs_load_znode" alt="" coords="937,892,1059,919"/>
<area shape="rect" id="node20" href="key_8h.html#a6395510bfa3e62eff60652c9624180e1" title="keys_cmp" alt="" coords="1335,1171,1417,1197"/>
<area shape="rect" id="node22" href="tnc__misc_8c.html#a795e1a9542770ea482f128ed03e6a87f" title="ubifs_search_zbranch" alt="" coords="525,1120,675,1147"/>
<area shape="rect" id="node23" href="tnc_8c.html#ad078bd3a3bb09883e602d4c2add8267e" title="tnc_prev" alt="" coords="564,943,636,969"/>
<area shape="rect" id="node7" href="tnc__misc_8c.html#a8022243db51d1b7cef9ec4ff22bc0f3a" title="read_znode" alt="" coords="1149,892,1238,919"/>
<area shape="rect" id="node8" href="ubifs_2io_8c.html#ab1c29d586db30bacfa2c9a73369a8870" title="ubifs_read_node" alt="" coords="1317,309,1435,336"/>
<area shape="rect" id="node11" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1709,588,1781,615"/>
<area shape="rect" id="node13" href="ubifs_2debug_8c.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="1683,309,1807,336"/>
<area shape="rect" id="node17" href="key_8h.html#a5611c13d648e672825da064c90c8903a" title="key_read" alt="" coords="1889,917,1963,944"/>
<area shape="rect" id="node19" href="misc_8h.html#a1598cadb907a20f9e5dc3e7ee74edb1d" title="ubifs_idx_branch" alt="" coords="1866,411,1986,437"/>
<area shape="rect" id="node9" href="ubifs_2debug_8c.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="2035,208,2117,235"/>
<area shape="rect" id="node12" href="ubifs_2io_8c.html#ab9b2f0cc24eff9f69bd606979eb3a53e" title="ubifs_check_node" alt="" coords="1491,309,1617,336"/>
<area shape="rect" id="node14" href="ubifs_2debug_8c.html#a40190f9f60ac94040c30dbd97c73a3ca" title="dump_ch" alt="" coords="1889,259,1963,285"/>
<area shape="rect" id="node15" href="ubifs_2debug_8c.html#a4b30ad73e46b72b5043aa4efa7fb8d9a" title="get_key_hash" alt="" coords="1875,309,1977,336"/>
<area shape="rect" id="node16" href="ubifs_2debug_8c.html#af1196269cd9c24affacc60e33f960f49" title="get_key_fmt" alt="" coords="1879,208,1973,235"/>
<area shape="rect" id="node18" href="ubifs_2debug_8c.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="1865,360,1987,387"/>
<area shape="rect" id="node24" href="tnc_8c.html#ad6989d53af75d6eb9a7b78f6335d3437" title="get_znode" alt="" coords="759,943,842,969"/>
<area shape="rect" id="node33" href="tnc_8c.html#a54dade5f765b017d5533820732fb00b5" title="lnc_add" alt="" coords="1160,993,1227,1020"/>
<area shape="rect" id="node27" href="tnc_8c.html#a4a07029bc1a7b847675eec1555f0b9e8" title="try_read_node" alt="" coords="1324,512,1428,539"/>
<area shape="rect" id="node30" href="ubifs_2io_8c.html#a602b7041efb930fbe55efc9b3b2ea270" title="ubifs_read_node_wbuf" alt="" coords="1117,259,1269,285"/>
<area shape="rect" id="node32" href="key_8h.html#a1196c105a3f68d6c67ce05c20b45066e" title="keys_eq" alt="" coords="1158,563,1229,589"/>
<area shape="rect" id="node31" href="ubifs_2debug_8c.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="1335,208,1417,235"/>
<area shape="rect" id="node34" href="replay_8c.html#a7b1ba80877b09e706904424df32d5ed3" title="ubifs_validate_entry" alt="" coords="1485,1019,1623,1045"/>
<area shape="rect" id="node37" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="1686,1703,1805,1729"/>
<area shape="rect" id="node38" href="ubifs_2debug_8c.html#af2ad985422103ec5e3e13776002d6ceb" title="dbg_leb_change" alt="" coords="1318,1512,1434,1539"/>
<area shape="rect" id="node50" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="1501,1703,1607,1729"/>
<area shape="rect" id="node39" href="ubifs_2debug_8h.html#ab599356d6c84ddd2c7b9001b452c30bd" title="dbg_is_power_cut" alt="" coords="1491,1500,1617,1527"/>
<area shape="rect" id="node48" href="ubifs_2debug_8c.html#a67b6fc23cfbf882431d33323a03ef74c" title="power_cut_emulated" alt="" coords="1483,1652,1625,1679"/>
<area shape="rect" id="node40" href="ubifs_2debug_8h.html#aed9c32fd77ce70a2d917ab58c56189c2" title="ubifs_debugging_init" alt="" coords="1675,1500,1815,1527"/>
<area shape="rect" id="node41" href="ubifs_2debug_8h.html#a1e62d7c391f555902a25f8060eb6f1ec" title="ubifs_debugging_exit" alt="" coords="1673,1551,1817,1577"/>
<area shape="rect" id="node42" href="ubifs_2debug_8h.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="1704,1601,1787,1628"/>
<area shape="rect" id="node43" href="ubifs_2debug_8h.html#a615a670f26d4407b52175ce5f3faf594" title="dbg_cstate" alt="" coords="1702,1652,1789,1679"/>
<area shape="rect" id="node44" href="ubifs_2debug_8h.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="1705,1399,1786,1425"/>
<area shape="rect" id="node45" href="ubifs_2debug_8h.html#a4184d82b0b2ff0fffc6ab3d4de4a1e7a" title="dbg_get_key_dump" alt="" coords="1678,1449,1813,1476"/>
<area shape="rect" id="node46" href="ubifs_2debug_8h.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="1865,1348,1987,1375"/>
<area shape="rect" id="node47" href="ubifs_2debug_8h.html#a6ecc9bff59f14d28615ed14fa5323681" title="ubifs_dump_inode" alt="" coords="1682,1247,1809,1273"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_a9d91d461205445e4f0500381ff4ffd82_icgraph.png" border="0" usemap="#ubifs_2recovery_8c_a9d91d461205445e4f0500381ff4ffd82_icgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_a9d91d461205445e4f0500381ff4ffd82_icgraph" id="ubifs_2recovery_8c_a9d91d461205445e4f0500381ff4ffd82_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#a20e75fbfb42bc7cfecf3b62ab3f12f8e" title="ubifs_recover_size" alt="" coords="176,56,307,83"/>
<area shape="rect" id="node3" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="371,5,465,32"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="355,56,481,83"/>
<area shape="rect" id="node8" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="355,208,481,235"/>
<area shape="rect" id="node4" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="541,5,651,32"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="712,5,805,32"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="535,56,657,83"/>
<area shape="rect" id="node9" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="529,107,663,133"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="549,157,643,184"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="555,208,637,235"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="551,259,641,285"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="548,309,644,336"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="545,360,647,387"/>
<area shape="rect" id="node10" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="722,107,795,133"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="711,183,807,209"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="715,233,802,260"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="855,233,955,260"/>
</map>
</div>

</div>
</div>
<a id="accaf4c7132be008366b00b1629c46842"></a>
<h2 class="memtitle"><span class="permalink"><a href="#accaf4c7132be008366b00b1629c46842">&#9670;&nbsp;</a></span>fix_unclean_leb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int fix_unclean_leb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structubifs__scan__leb.html">ubifs_scan_leb</a> *&#160;</td>
          <td class="paramname"><em>sleb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>start</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>fix_unclean_leb - fix an unclean LEB. <code></code>: UBIFS file-system description object : scanned LEB information : offset where scan started </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_accaf4c7132be008366b00b1629c46842_cgraph.png" border="0" usemap="#ubifs_2recovery_8c_accaf4c7132be008366b00b1629c46842_cgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_accaf4c7132be008366b00b1629c46842_cgraph" id="ubifs_2recovery_8c_accaf4c7132be008366b00b1629c46842_cgraph">
<area shape="rect" id="node2" href="ubifs_2io_8c.html#ad9d3a62a61d21e1faa60cd6e630c41ac" title="ubifs_leb_unmap" alt="" coords="167,1887,287,1914"/>
<area shape="rect" id="node47" href="ubifs_2io_8c.html#ab6a2a3c4a79d6d4c52350540437d3cb3" title="ubifs_leb_read" alt="" coords="518,12,625,39"/>
<area shape="rect" id="node48" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="187,1988,266,2015"/>
<area shape="rect" id="node49" href="ubifs_2io_8c.html#ac70865809ab5c33c55274560e453f535" title="ubifs_leb_change" alt="" coords="165,1938,288,1964"/>
<area shape="rect" id="node3" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="719,2039,837,2066"/>
<area shape="rect" id="node4" href="ubifs_2debug_8c.html#a6ba17156289f8b8ecaed40dbafc04858" title="dbg_leb_unmap" alt="" coords="337,1836,451,1863"/>
<area shape="rect" id="node20" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="913,874,985,900"/>
<area shape="rect" id="node46" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="341,1887,447,1914"/>
<area shape="rect" id="node5" href="ubifs_2debug_8h.html#ab599356d6c84ddd2c7b9001b452c30bd" title="dbg_is_power_cut" alt="" coords="508,1076,635,1103"/>
<area shape="rect" id="node44" href="ubifs_2debug_8c.html#a67b6fc23cfbf882431d33323a03ef74c" title="power_cut_emulated" alt="" coords="500,1938,643,1964"/>
<area shape="rect" id="node6" href="ubifs_2debug_8h.html#aed9c32fd77ce70a2d917ab58c56189c2" title="ubifs_debugging_init" alt="" coords="708,1127,848,1154"/>
<area shape="rect" id="node7" href="ubifs_2debug_8h.html#a1e62d7c391f555902a25f8060eb6f1ec" title="ubifs_debugging_exit" alt="" coords="706,1178,850,1204"/>
<area shape="rect" id="node8" href="ubifs_2debug_8h.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="737,1228,819,1255"/>
<area shape="rect" id="node9" href="ubifs_2debug_8h.html#a615a670f26d4407b52175ce5f3faf594" title="dbg_cstate" alt="" coords="735,1279,821,1306"/>
<area shape="rect" id="node10" href="ubifs_2debug_8h.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="737,1330,819,1356"/>
<area shape="rect" id="node11" href="ubifs_2debug_8h.html#a4184d82b0b2ff0fffc6ab3d4de4a1e7a" title="dbg_get_key_dump" alt="" coords="711,1380,845,1407"/>
<area shape="rect" id="node12" href="ubifs_2debug_8h.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="717,1431,839,1458"/>
<area shape="rect" id="node13" href="ubifs_2debug_8h.html#a6ecc9bff59f14d28615ed14fa5323681" title="ubifs_dump_inode" alt="" coords="715,1482,841,1508"/>
<area shape="rect" id="node14" href="ubifs_2debug_8h.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="716,1532,840,1559"/>
<area shape="rect" id="node15" href="ubifs_2debug_8h.html#acfcbe45894b3b41385c1f9891d57bb97" title="ubifs_dump_budget_req" alt="" coords="698,1583,858,1610"/>
<area shape="rect" id="node16" href="ubifs_2debug_8h.html#ab351e7abb59edb97d57bd44dd83b0484" title="ubifs_dump_lstats" alt="" coords="714,1634,842,1660"/>
<area shape="rect" id="node17" href="ubifs_2debug_8h.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="716,1684,840,1711"/>
<area shape="rect" id="node18" href="ubifs_2debug_8h.html#ad04e55858b69b78f20ea8b0fb79f9f27" title="ubifs_dump_lprop" alt="" coords="716,1735,840,1762"/>
<area shape="rect" id="node19" href="ubifs_2debug_8h.html#a2fa0aeaaa556f0b13d098456ef7d86d4" title="ubifs_dump_lprops" alt="" coords="713,924,843,951"/>
<area shape="rect" id="node21" href="ubifs_2debug_8h.html#afc25fcc00c516fab54a12303d87bc100" title="ubifs_dump_lpt_info" alt="" coords="709,1786,847,1812"/>
<area shape="rect" id="node22" href="ubifs_2debug_8h.html#afa1952f7d3c2c791a330e3dc245c5a83" title="ubifs_dump_leb" alt="" coords="721,975,835,1002"/>
<area shape="rect" id="node23" href="ubifs_2debug_8h.html#a454a80414a371832b3f68f828f6a6353" title="ubifs_dump_sleb" alt="" coords="718,114,838,140"/>
<area shape="rect" id="node24" href="ubifs_2debug_8h.html#a56365d730ac6932bf3163a8ba7279779" title="ubifs_dump_znode" alt="" coords="713,164,843,191"/>
<area shape="rect" id="node25" href="ubifs_2debug_8h.html#a5600b63b8362df17ed46c4e20784fb6c" title="ubifs_dump_heap" alt="" coords="716,215,840,242"/>
<area shape="rect" id="node26" href="ubifs_2debug_8h.html#ab2224f946272a25cfacf2607c6502818" title="ubifs_dump_pnode" alt="" coords="713,266,843,292"/>
<area shape="rect" id="node27" href="ubifs_2debug_8h.html#a6ad4e8a10c442517164e350787696d9d" title="ubifs_dump_tnc" alt="" coords="721,570,835,596"/>
<area shape="rect" id="node28" href="ubifs_2debug_8h.html#a1988de032288d9afc418a9f36c0e1a38" title="ubifs_dump_index" alt="" coords="715,620,841,647"/>
<area shape="rect" id="node29" href="ubifs_2debug_8h.html#a2dad580c9c3f21053039a854eb81bed2" title="ubifs_dump_lpt_lebs" alt="" coords="707,671,849,698"/>
<area shape="rect" id="node30" href="ubifs_2debug_8h.html#ac9540eb544441fb116e86f4799b55265" title="dbg_walk_index" alt="" coords="721,1026,835,1052"/>
<area shape="rect" id="node31" href="ubifs_2debug_8h.html#a42a0e664e63f651533d2a5abc23bf4da" title="dbg_save_space_info" alt="" coords="704,722,852,748"/>
<area shape="rect" id="node32" href="ubifs_2debug_8h.html#ace23cd2189dd2d7a9435ddd891e9beaa" title="dbg_check_space_info" alt="" coords="701,1076,855,1103"/>
<area shape="rect" id="node33" href="ubifs_2debug_8h.html#a69534405790cc12f492343243bc539a4" title="dbg_check_lprops" alt="" coords="715,1836,841,1863"/>
<area shape="rect" id="node34" href="ubifs_2debug_8h.html#a725dc62445ba29e272e4ccb5b10fbc61" title="dbg_old_index_check_init" alt="" coords="693,772,863,799"/>
<area shape="rect" id="node35" href="ubifs_2debug_8h.html#a23369147b6e2214867a8a650ad50ebaf" title="dbg_check_old_index" alt="" coords="705,1887,851,1914"/>
<area shape="rect" id="node36" href="ubifs_2debug_8h.html#a4d24d720745a25e26d273dc892c703eb" title="dbg_check_cats" alt="" coords="719,1938,837,1964"/>
<area shape="rect" id="node37" href="ubifs_2debug_8h.html#a0326c90a004af4486c5ad1dbc25baf29" title="dbg_check_ltab" alt="" coords="721,316,835,343"/>
<area shape="rect" id="node38" href="ubifs_2debug_8h.html#ab2f0c34c5385c6b4af6f326fac750a70" title="dbg_chk_lpt_free_spc" alt="" coords="703,367,853,394"/>
<area shape="rect" id="node39" href="ubifs_2debug_8h.html#a8743b404fd4536a6f2212846f55854d0" title="dbg_chk_lpt_sz" alt="" coords="721,418,835,444"/>
<area shape="rect" id="node40" href="ubifs_2debug_8h.html#ad20ad974aa8f10603e2468787760af65" title="dbg_check_synced_i_size" alt="" coords="691,468,865,495"/>
<area shape="rect" id="node41" href="ubifs_2debug_8h.html#ae64cd5f4e9b71d0d2167e1f8dafd9cd0" title="dbg_check_dir" alt="" coords="725,519,831,546"/>
<area shape="rect" id="node42" href="ubifs_2debug_8h.html#a8e749de733b483ca979984b8aa078aa6" title="dbg_check_tnc" alt="" coords="723,823,833,850"/>
<area shape="rect" id="node43" href="ubifs_2debug_8h.html#a6f442c5e8d297e33d3bdaea0887419e6" title="dbg_check_idx_size" alt="" coords="708,874,848,900"/>
<area shape="rect" id="node45" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="735,1988,821,2015"/>
<area shape="rect" id="node50" href="ubifs_2debug_8c.html#af2ad985422103ec5e3e13776002d6ceb" title="dbg_leb_change" alt="" coords="336,1938,452,1964"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_accaf4c7132be008366b00b1629c46842_icgraph.png" border="0" usemap="#ubifs_2recovery_8c_accaf4c7132be008366b00b1629c46842_icgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_accaf4c7132be008366b00b1629c46842_icgraph" id="ubifs_2recovery_8c_accaf4c7132be008366b00b1629c46842_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#a1d3dc4ff452e67e327b4ad2e8888ffa4" title="ubifs_recover_leb" alt="" coords="165,81,289,108"/>
<area shape="rect" id="node3" href="ubifs_2orphan_8c.html#a56d0d86cd1db3d34e52d5b91784d55da" title="kill_orphans" alt="" coords="366,5,457,32"/>
<area shape="rect" id="node8" href="ubifs_8h.html#a42393d54bbb6a1e25d5dde1f396b31f3" title="ubifs_recover_log_leb" alt="" coords="337,107,485,133"/>
<area shape="rect" id="node11" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="543,196,670,223"/>
<area shape="rect" id="node22" href="replay_8c.html#a08ca5de44800c3270db809cec539c7e2" title="replay_bud" alt="" coords="369,56,454,83"/>
<area shape="rect" id="node4" href="ubifs_8h.html#a2c245b49b58cf15dd381f99530af6807" title="ubifs_mount_orphans" alt="" coords="533,5,680,32"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="915,31,1008,57"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1057,31,1167,57"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="1215,31,1308,57"/>
<area shape="rect" id="node9" href="replay_8c.html#afc69bf474cbe8a69ea2bfea0494745df" title="replay_log_leb" alt="" coords="554,107,659,133"/>
<area shape="rect" id="node10" href="ubifs_8h.html#af76f722fe22c9c52675c75c16369d414" title="ubifs_replay_journal" alt="" coords="728,56,865,83"/>
<area shape="rect" id="node12" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="730,208,863,235"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="750,259,843,285"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="755,309,838,336"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="752,360,841,387"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="749,107,845,133"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="745,157,848,184"/>
<area shape="rect" id="node13" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="925,208,998,235"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="913,284,1009,311"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="918,335,1005,361"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="1062,335,1162,361"/>
<area shape="rect" id="node23" href="replay_8c.html#aa341c5f3914165aaeb6b9e63130cbf98" title="replay_buds" alt="" coords="561,56,653,83"/>
</map>
</div>

</div>
</div>
<a id="a9ce17b89aee2271a22804d44fcc78aa6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ce17b89aee2271a22804d44fcc78aa6">&#9670;&nbsp;</a></span>get_cs_sqnum()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int get_cs_sqnum </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long long *&#160;</td>
          <td class="paramname"><em>cs_sqnum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>get_cs_sqnum - get commit start sequence number. <code></code>: UBIFS file-system description object : LEB number of commit start node : offset of commit start node : commit start sequence number is returned here</p>
<p>This function returns %0 on success and a negative error code on failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_a9ce17b89aee2271a22804d44fcc78aa6_cgraph.png" border="0" usemap="#ubifs_2recovery_8c_a9ce17b89aee2271a22804d44fcc78aa6_cgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_a9ce17b89aee2271a22804d44fcc78aa6_cgraph" id="ubifs_2recovery_8c_a9ce17b89aee2271a22804d44fcc78aa6_cgraph">
<area shape="rect" id="node2" href="ubifs_2io_8c.html#ab6a2a3c4a79d6d4c52350540437d3cb3" title="ubifs_leb_read" alt="" coords="174,27,281,53"/>
<area shape="rect" id="node3" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="558,52,630,79"/>
<area shape="rect" id="node4" href="ubifs_2scan_8c.html#ab974ec909e594f54f7773880688a2334" title="ubifs_scan_a_node" alt="" coords="160,153,295,180"/>
<area shape="rect" id="node5" href="ubifs_2scan_8c.html#a93a80ae9e3252efb52d991f4abc7152a" title="scan_padding_bytes" alt="" coords="343,179,484,205"/>
<area shape="rect" id="node6" href="ubifs_2debug_8c.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="882,229,965,256"/>
<area shape="rect" id="node7" href="ubifs_2io_8c.html#ab9b2f0cc24eff9f69bd606979eb3a53e" title="ubifs_check_node" alt="" coords="350,128,477,155"/>
<area shape="rect" id="node8" href="ubifs_2debug_8c.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="532,356,656,383"/>
<area shape="rect" id="node9" href="ubifs_2debug_8c.html#a40190f9f60ac94040c30dbd97c73a3ca" title="dump_ch" alt="" coords="727,280,802,307"/>
<area shape="rect" id="node11" href="ubifs_2debug_8c.html#a4b30ad73e46b72b5043aa4efa7fb8d9a" title="get_key_hash" alt="" coords="713,331,816,357"/>
<area shape="rect" id="node12" href="ubifs_2debug_8c.html#af1196269cd9c24affacc60e33f960f49" title="get_key_fmt" alt="" coords="717,381,812,408"/>
<area shape="rect" id="node13" href="key_8h.html#a5611c13d648e672825da064c90c8903a" title="key_read" alt="" coords="727,432,802,459"/>
<area shape="rect" id="node14" href="ubifs_2debug_8c.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="704,483,825,509"/>
<area shape="rect" id="node20" href="misc_8h.html#a1598cadb907a20f9e5dc3e7ee74edb1d" title="ubifs_idx_branch" alt="" coords="705,533,825,560"/>
<area shape="rect" id="node10" href="ubifs_2debug_8c.html#a0137ecd738390d71f938f27be78c4477" title="dbg_gtype" alt="" coords="882,280,965,307"/>
<area shape="rect" id="node15" href="key_8h.html#a06f47822510ef850cb7065778115453c" title="key_type" alt="" coords="886,381,961,408"/>
<area shape="rect" id="node16" href="key_8h.html#a4a12b97ed78e138baf7886a6df7ed50f" title="key_inum" alt="" coords="884,432,963,459"/>
<area shape="rect" id="node17" href="ubifs_2debug_8c.html#ad6af0af711fdb082f6df4eaeb4d82fe6" title="get_key_type" alt="" coords="873,483,973,509"/>
<area shape="rect" id="node18" href="key_8h.html#acddf1ca88d72a37e06c5c608cd084656" title="key_hash" alt="" coords="884,533,963,560"/>
<area shape="rect" id="node19" href="key_8h.html#a10c13375b52dbb12be6f9b685d1d1ba7" title="key_block" alt="" coords="883,584,964,611"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_a9ce17b89aee2271a22804d44fcc78aa6_icgraph.png" border="0" usemap="#ubifs_2recovery_8c_a9ce17b89aee2271a22804d44fcc78aa6_icgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_a9ce17b89aee2271a22804d44fcc78aa6_icgraph" id="ubifs_2recovery_8c_a9ce17b89aee2271a22804d44fcc78aa6_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#a42393d54bbb6a1e25d5dde1f396b31f3" title="ubifs_recover_log_leb" alt="" coords="160,132,308,159"/>
<area shape="rect" id="node3" href="replay_8c.html#afc69bf474cbe8a69ea2bfea0494745df" title="replay_log_leb" alt="" coords="367,56,472,83"/>
<area shape="rect" id="node8" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="356,157,483,184"/>
<area shape="rect" id="node4" href="ubifs_8h.html#af76f722fe22c9c52675c75c16369d414" title="ubifs_replay_journal" alt="" coords="531,5,668,32"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="717,5,811,32"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="860,5,969,32"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="1017,5,1111,32"/>
<area shape="rect" id="node9" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="533,56,666,83"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="553,107,646,133"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="558,157,641,184"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="555,208,644,235"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="551,259,647,285"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="548,309,651,336"/>
<area shape="rect" id="node10" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="727,56,801,83"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="716,132,812,159"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="721,183,807,209"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="865,183,965,209"/>
</map>
</div>

</div>
</div>
<a id="a9a01d76e5a65d73c6c44c1171759a231"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a01d76e5a65d73c6c44c1171759a231">&#9670;&nbsp;</a></span>get_master_node()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int get_master_node </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>pbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structubifs__mst__node.html">ubifs_mst_node</a> **&#160;</td>
          <td class="paramname"><em>mst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>cor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>get_master_node - get the last valid master node allowing for corruption. <code></code>: UBIFS file-system description object : LEB number : buffer containing the LEB read, is returned here : master node, if found, is returned here : corruption, if found, is returned here</p>
<p>This function allocates a buffer, reads the LEB into it, and finds and returns the last valid master node allowing for one area of corruption. The corrupt area, if there is one, must be consistent with the assumption that it is the result of an unclean unmount while the master node was being written. Under those circumstances, it is valid to use the previously written master node.</p>
<p>This function returns %0 on success and a negative error code on failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_a9a01d76e5a65d73c6c44c1171759a231_cgraph.png" border="0" usemap="#ubifs_2recovery_8c_a9a01d76e5a65d73c6c44c1171759a231_cgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_a9a01d76e5a65d73c6c44c1171759a231_cgraph" id="ubifs_2recovery_8c_a9a01d76e5a65d73c6c44c1171759a231_cgraph">
<area shape="rect" id="node2" href="ubifs_2io_8c.html#ab6a2a3c4a79d6d4c52350540437d3cb3" title="ubifs_leb_read" alt="" coords="376,284,483,311"/>
<area shape="rect" id="node4" href="ubifs_2scan_8c.html#ab974ec909e594f54f7773880688a2334" title="ubifs_scan_a_node" alt="" coords="176,157,311,184"/>
<area shape="rect" id="node21" href="ubifs_2recovery_8c.html#ade5d36157779e5eb588cc94b1ea387b7" title="is_empty" alt="" coords="206,296,281,323"/>
<area shape="rect" id="node3" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="574,183,646,209"/>
<area shape="rect" id="node5" href="ubifs_2scan_8c.html#a93a80ae9e3252efb52d991f4abc7152a" title="scan_padding_bytes" alt="" coords="359,233,500,260"/>
<area shape="rect" id="node6" href="ubifs_2debug_8c.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="898,5,981,32"/>
<area shape="rect" id="node7" href="ubifs_2io_8c.html#ab9b2f0cc24eff9f69bd606979eb3a53e" title="ubifs_check_node" alt="" coords="366,132,493,159"/>
<area shape="rect" id="node8" href="ubifs_2debug_8c.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="548,132,672,159"/>
<area shape="rect" id="node9" href="ubifs_2debug_8c.html#a40190f9f60ac94040c30dbd97c73a3ca" title="dump_ch" alt="" coords="743,81,818,108"/>
<area shape="rect" id="node11" href="ubifs_2debug_8c.html#a4b30ad73e46b72b5043aa4efa7fb8d9a" title="get_key_hash" alt="" coords="729,132,832,159"/>
<area shape="rect" id="node12" href="ubifs_2debug_8c.html#af1196269cd9c24affacc60e33f960f49" title="get_key_fmt" alt="" coords="733,183,828,209"/>
<area shape="rect" id="node13" href="key_8h.html#a5611c13d648e672825da064c90c8903a" title="key_read" alt="" coords="743,233,818,260"/>
<area shape="rect" id="node14" href="ubifs_2debug_8c.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="720,284,841,311"/>
<area shape="rect" id="node20" href="misc_8h.html#a1598cadb907a20f9e5dc3e7ee74edb1d" title="ubifs_idx_branch" alt="" coords="721,31,841,57"/>
<area shape="rect" id="node10" href="ubifs_2debug_8c.html#a0137ecd738390d71f938f27be78c4477" title="dbg_gtype" alt="" coords="898,81,981,108"/>
<area shape="rect" id="node15" href="key_8h.html#a06f47822510ef850cb7065778115453c" title="key_type" alt="" coords="902,385,977,412"/>
<area shape="rect" id="node16" href="key_8h.html#a4a12b97ed78e138baf7886a6df7ed50f" title="key_inum" alt="" coords="900,183,979,209"/>
<area shape="rect" id="node17" href="ubifs_2debug_8c.html#ad6af0af711fdb082f6df4eaeb4d82fe6" title="get_key_type" alt="" coords="889,233,989,260"/>
<area shape="rect" id="node18" href="key_8h.html#acddf1ca88d72a37e06c5c608cd084656" title="key_hash" alt="" coords="900,284,979,311"/>
<area shape="rect" id="node19" href="key_8h.html#a10c13375b52dbb12be6f9b685d1d1ba7" title="key_block" alt="" coords="899,335,980,361"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_a9a01d76e5a65d73c6c44c1171759a231_icgraph.png" border="0" usemap="#ubifs_2recovery_8c_a9a01d76e5a65d73c6c44c1171759a231_icgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_a9a01d76e5a65d73c6c44c1171759a231_icgraph" id="ubifs_2recovery_8c_a9a01d76e5a65d73c6c44c1171759a231_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#a11a5ff140312c68bb4c5e44593d11b90" title="ubifs_recover_master_node" alt="" coords="176,132,359,159"/>
<area shape="rect" id="node3" href="ubifs_8h.html#ac45820de3d377c5a1f29a160f5fb0d77" title="ubifs_read_master" alt="" coords="407,56,536,83"/>
<area shape="rect" id="node7" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="408,157,535,184"/>
<area shape="rect" id="node4" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="604,5,697,32"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="765,5,875,32"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="926,5,1019,32"/>
<area shape="rect" id="node8" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="584,56,717,83"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="604,107,697,133"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="609,157,692,184"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="606,208,695,235"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="603,259,699,285"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="599,309,702,336"/>
<area shape="rect" id="node9" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="783,56,857,83"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="772,132,868,159"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="777,183,863,209"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="923,183,1023,209"/>
</map>
</div>

</div>
</div>
<a id="acb6fbec748694453a2e4b3ed2be6cc6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb6fbec748694453a2e4b3ed2be6cc6b">&#9670;&nbsp;</a></span>grab_empty_leb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int grab_empty_leb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>grab_empty_leb - grab an empty LEB to use as GC LEB and run commit. <code></code>: UBIFS file-system description object</p>
<p>This is a helper function for '<a class="el" href="ubifs_2recovery_8c.html#ae25afe7a337008e52b357558646ed71f">ubifs_rcvry_gc_commit()</a>' which grabs an empty LEB to be used as GC LEB (<code></code>-&gt;gc_lnum), and then runs the commit. Returns zero in case of success and a negative error code in case of failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_acb6fbec748694453a2e4b3ed2be6cc6b_cgraph.png" border="0" usemap="#ubifs_2recovery_8c_acb6fbec748694453a2e4b3ed2be6cc6b_cgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_acb6fbec748694453a2e4b3ed2be6cc6b_cgraph" id="ubifs_2recovery_8c_acb6fbec748694453a2e4b3ed2be6cc6b_cgraph">
<area shape="rect" id="node2" href="find_8c.html#a5dbeb2fbcdd3403f15e5d6ce214edcf9" title="ubifs_find_free_leb\l_for_idx" alt="" coords="341,238,472,279"/>
<area shape="rect" id="node9" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1475,625,1547,652"/>
<area shape="rect" id="node25" href="lprops_8c.html#aeb3c0f6274cdeba0c778d57f29ab39bf" title="ubifs_change_one_lp" alt="" coords="527,43,671,69"/>
<area shape="rect" id="node26" href="ubifs_2debug_8c.html#a2fa0aeaaa556f0b13d098456ef7d86d4" title="ubifs_dump_lprops" alt="" coords="341,625,472,652"/>
<area shape="rect" id="node33" href="ubifs_2debug_8c.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="345,1405,469,1432"/>
<area shape="rect" id="node38" href="ubifs_2commit_8c.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="168,840,293,867"/>
<area shape="rect" id="node3" href="misc_8h.html#aa89c2768eb94f129c6afbe47420b44ba" title="ubifs_get_lprops" alt="" coords="750,245,867,272"/>
<area shape="rect" id="node4" href="lprops_8c.html#af7bb5628372135952187c4c37b9a0a68" title="ubifs_fast_find_empty" alt="" coords="524,245,675,272"/>
<area shape="rect" id="node5" href="lprops_8c.html#af4f3f200dc1d36660281ec0282293308" title="ubifs_fast_find_freeable" alt="" coords="729,549,889,576"/>
<area shape="rect" id="node6" href="find_8c.html#ae53f61786f9fb4f68b3eb47770f97846" title="scan_for_leb_for_idx" alt="" coords="528,93,671,120"/>
<area shape="rect" id="node16" href="lprops_8c.html#abfc4c6a75b37762f214cbc91f0ebe664" title="ubifs_change_lp" alt="" coords="751,195,867,221"/>
<area shape="rect" id="node20" href="misc_8h.html#a6dce2c34ec97d74cf4be59e0201bdb3e" title="ubifs_release_lprops" alt="" coords="738,296,879,323"/>
<area shape="rect" id="node21" href="ubifs_2io_8c.html#ad9d3a62a61d21e1faa60cd6e630c41ac" title="ubifs_leb_unmap" alt="" coords="749,701,869,728"/>
<area shape="rect" id="node7" href="lpt_8c.html#a34800df1b6052b492ca05c589dfec386" title="ubifs_lpt_scan_nolock" alt="" coords="733,448,884,475"/>
<area shape="rect" id="node10" href="find_8c.html#a729b477660fd27cb7248516da9c558e1" title="scan_for_idx_cb" alt="" coords="750,93,867,120"/>
<area shape="rect" id="node11" href="lpt_8c.html#ade4e71b1fffa493cfb997feaff2c0638" title="ubifs_lpt_lookup_dirty" alt="" coords="939,169,1087,196"/>
<area shape="rect" id="node8" href="lpt_8c.html#a6d9ea5f42b955fdb68064bc37bd9540d" title="ubifs_read_nnode" alt="" coords="1303,393,1427,420"/>
<area shape="rect" id="node12" href="lpt_8c.html#accd7155d1f9997fb5e6a7fd577fdc0f2" title="dirty_cow_nnode" alt="" coords="1135,181,1255,208"/>
<area shape="rect" id="node13" href="lpt_8c.html#a7fd536e4a29b47a6485fc3931f91857b" title="ubifs_get_nnode" alt="" coords="1136,292,1253,319"/>
<area shape="rect" id="node14" href="lpt_8c.html#ad8f891756dae6c6dceeb51fb917b023b" title="ubifs_get_pnode" alt="" coords="1136,343,1253,369"/>
<area shape="rect" id="node15" href="lpt_8c.html#ac60e8c2b5dbc5ab11045f313bcc441a0" title="dirty_cow_pnode" alt="" coords="1135,131,1255,157"/>
<area shape="rect" id="node17" href="lprops_8c.html#a911df1bb1dc58cf096c97ce547539153" title="is_lprops_dirty" alt="" coords="959,271,1066,297"/>
<area shape="rect" id="node18" href="lprops_8c.html#a54fa4acd96a49b1bbe2baeac4dbd0c0b" title="ubifs_calc_dark" alt="" coords="956,395,1069,421"/>
<area shape="rect" id="node19" href="lprops_8c.html#a2f083caeaebac06c1f51d7c7d34f5c13" title="change_category" alt="" coords="952,220,1073,247"/>
<area shape="rect" id="node22" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="953,701,1072,728"/>
<area shape="rect" id="node23" href="ubifs_2debug_8c.html#a6ba17156289f8b8ecaed40dbafc04858" title="dbg_leb_unmap" alt="" coords="956,752,1069,779"/>
<area shape="rect" id="node24" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="959,887,1066,913"/>
<area shape="rect" id="node27" href="lprops_8c.html#a8a4a969b18d269964ff80d11eb94b8ab" title="ubifs_get_lp_stats" alt="" coords="535,701,663,728"/>
<area shape="rect" id="node28" href="ubifs_2debug_8c.html#ab351e7abb59edb97d57bd44dd83b0484" title="ubifs_dump_lstats" alt="" coords="535,600,663,627"/>
<area shape="rect" id="node29" href="lprops_8c.html#a1eb6fc2cca5a1e34192e3c54b90d3057" title="ubifs_read_one_lp" alt="" coords="536,347,663,373"/>
<area shape="rect" id="node31" href="ubifs_2debug_8c.html#ad04e55858b69b78f20ea8b0fb79f9f27" title="ubifs_dump_lprop" alt="" coords="537,651,661,677"/>
<area shape="rect" id="node30" href="lpt_8c.html#af1c4868152bb6ea9ae7c87e7dad9cede" title="ubifs_lpt_lookup" alt="" coords="955,344,1071,371"/>
<area shape="rect" id="node32" href="ubifs_2debug_8c.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="768,920,849,947"/>
<area shape="rect" id="node34" href="budget_8c.html#adaa1427281786d8bfca793236b5f0457" title="ubifs_calc_available" alt="" coords="739,1489,878,1516"/>
<area shape="rect" id="node35" href="budget_8c.html#a6323235e83f399d119f1deb54fa2f144" title="ubifs_get_free_space\l_nolock" alt="" coords="526,1427,673,1469"/>
<area shape="rect" id="node36" href="budget_8c.html#a6109e1d36eaa593c345944d0d4b30745" title="ubifs_calc_min_idx_lebs" alt="" coords="727,1355,891,1381"/>
<area shape="rect" id="node37" href="budget_8c.html#a66e49aaeea4680a7b2c9973ba0dde86c" title="ubifs_reported_space" alt="" coords="735,1435,882,1461"/>
<area shape="rect" id="node39" href="ubifs_2commit_8c.html#a8066477fd4d182a562575fec9c1460f9" title="wait_for_commit" alt="" coords="347,840,466,867"/>
<area shape="rect" id="node40" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="363,945,450,972"/>
<area shape="rect" id="node41" href="ubifs_2commit_8c.html#a349da7e934725810c922b20daec868ae" title="nothing_to_commit" alt="" coords="533,1173,665,1200"/>
<area shape="rect" id="node42" href="misc_8h.html#af8fd16c04f42f2a56d86f0f7a4924ecc" title="ubifs_wbuf_sync" alt="" coords="749,1199,869,1225"/>
<area shape="rect" id="node43" href="ubifs_2gc_8c.html#a1ff584f97bf8a1783fc9fecde0a87b1e" title="ubifs_gc_start_commit" alt="" coords="522,397,677,424"/>
<area shape="rect" id="node44" href="ubifs_2debug_8h.html#a69534405790cc12f492343243bc539a4" title="dbg_check_lprops" alt="" coords="536,1123,663,1149"/>
<area shape="rect" id="node45" href="ubifs_2log_8c.html#aabacb52b14ebf81d602c26b57622cd7a" title="ubifs_log_start_commit" alt="" coords="521,920,678,947"/>
<area shape="rect" id="node46" href="tnc__commit_8c.html#ae1e7a24e81c4fa022a4065530bd77bff" title="ubifs_tnc_start_commit" alt="" coords="520,1325,679,1352"/>
<area shape="rect" id="node47" href="lpt__commit_8c.html#ad0029b471c7e38ab8a4a1ab961ca25a4" title="ubifs_lpt_start_commit" alt="" coords="522,752,677,779"/>
<area shape="rect" id="node48" href="ubifs_2orphan_8c.html#a4644cfc76e621c7abb3683b063707f4e" title="ubifs_orphan_start\l_commit" alt="" coords="535,803,664,845"/>
<area shape="rect" id="node49" href="tnc__commit_8c.html#a3e11b3b283926c57ea7d7e7aaf6cabe1" title="ubifs_tnc_end_commit" alt="" coords="523,869,676,896"/>
<area shape="rect" id="node50" href="lpt__commit_8c.html#a2e84d4bec8fcf799eeb376d90f220efb" title="ubifs_lpt_end_commit" alt="" coords="525,1072,674,1099"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_acb6fbec748694453a2e4b3ed2be6cc6b_icgraph.png" border="0" usemap="#ubifs_2recovery_8c_acb6fbec748694453a2e4b3ed2be6cc6b_icgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_acb6fbec748694453a2e4b3ed2be6cc6b_icgraph" id="ubifs_2recovery_8c_acb6fbec748694453a2e4b3ed2be6cc6b_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="168,56,325,83"/>
<area shape="rect" id="node3" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="390,5,483,32"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="374,56,499,83"/>
<area shape="rect" id="node8" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="373,208,500,235"/>
<area shape="rect" id="node4" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="560,5,669,32"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="731,5,824,32"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="553,56,676,83"/>
<area shape="rect" id="node9" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="548,107,681,133"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="568,157,661,184"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="573,208,656,235"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="570,259,659,285"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="567,309,663,336"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="563,360,666,387"/>
<area shape="rect" id="node10" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="741,107,814,133"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="729,183,825,209"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="734,233,821,260"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="873,233,973,260"/>
</map>
</div>

</div>
</div>
<a id="ade5d36157779e5eb588cc94b1ea387b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade5d36157779e5eb588cc94b1ea387b7">&#9670;&nbsp;</a></span>is_empty()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int is_empty </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>is_empty - determine whether a buffer is empty (contains all 0xff). : buffer to clean : length of buffer</p>
<p>This function returns %1 if the buffer is empty (contains all 0xff) otherwise %0 is returned. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_ade5d36157779e5eb588cc94b1ea387b7_icgraph.png" border="0" usemap="#ubifs_2recovery_8c_ade5d36157779e5eb588cc94b1ea387b7_icgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_ade5d36157779e5eb588cc94b1ea387b7_icgraph" id="ubifs_2recovery_8c_ade5d36157779e5eb588cc94b1ea387b7_icgraph">
<area shape="rect" id="node2" href="ubifs_2recovery_8c.html#a9a01d76e5a65d73c6c44c1171759a231" title="get_master_node" alt="" coords="128,284,251,311"/>
<area shape="rect" id="node13" href="ubifs_2recovery_8c.html#a8ecb90e06a084b7cad3a06a6231e16e4" title="is_last_write" alt="" coords="142,183,237,209"/>
<area shape="rect" id="node14" href="ubifs_8h.html#a1d3dc4ff452e67e327b4ad2e8888ffa4" title="ubifs_recover_leb" alt="" coords="304,183,428,209"/>
<area shape="rect" id="node21" href="ubifs_2recovery_8c.html#a51a58f1633fe0fc0333795b1a9216aa0" title="no_more_nodes" alt="" coords="132,233,247,260"/>
<area shape="rect" id="node22" href="ubifs_2recovery_8c.html#aa854cba2b9edc1a50c631dd212461ab9" title="recover_head" alt="" coords="316,335,416,361"/>
<area shape="rect" id="node25" href="xfs__bmap_8c.html#aad016674f6f1f079cc3c117ddf10efbc" title="xfs_bmap_isaeof" alt="" coords="129,399,250,425"/>
<area shape="rect" id="node34" href="xfs__bmap_8h.html#add36570d978a352faca2bdd1463296ec" title="xfs_bmap_last_offset" alt="" coords="499,604,646,631"/>
<area shape="rect" id="node3" href="ubifs_8h.html#a11a5ff140312c68bb4c5e44593d11b90" title="ubifs_recover_master_node" alt="" coords="481,284,664,311"/>
<area shape="rect" id="node4" href="ubifs_8h.html#ac45820de3d377c5a1f29a160f5fb0d77" title="ubifs_read_master" alt="" coords="739,284,869,311"/>
<area shape="rect" id="node6" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="741,183,867,209"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="990,309,1083,336"/>
<area shape="rect" id="node7" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="970,5,1103,32"/>
<area shape="rect" id="node8" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="990,56,1083,83"/>
<area shape="rect" id="node9" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="995,107,1078,133"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="992,157,1081,184"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="989,208,1085,235"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="985,259,1088,285"/>
<area shape="rect" id="node15" href="ubifs_2orphan_8c.html#a56d0d86cd1db3d34e52d5b91784d55da" title="kill_orphans" alt="" coords="527,233,618,260"/>
<area shape="rect" id="node17" href="ubifs_8h.html#a42393d54bbb6a1e25d5dde1f396b31f3" title="ubifs_recover_log_leb" alt="" coords="499,132,647,159"/>
<area shape="rect" id="node19" href="replay_8c.html#a08ca5de44800c3270db809cec539c7e2" title="replay_bud" alt="" coords="530,81,615,108"/>
<area shape="rect" id="node16" href="ubifs_8h.html#a2c245b49b58cf15dd381f99530af6807" title="ubifs_mount_orphans" alt="" coords="731,233,877,260"/>
<area shape="rect" id="node18" href="replay_8c.html#afc69bf474cbe8a69ea2bfea0494745df" title="replay_log_leb" alt="" coords="751,132,857,159"/>
<area shape="rect" id="node20" href="replay_8c.html#aa341c5f3914165aaeb6b9e63130cbf98" title="replay_buds" alt="" coords="758,81,850,108"/>
<area shape="rect" id="node23" href="ubifs_8h.html#ab0121bf0d3497aba350c96bbd431bea2" title="ubifs_recover_inl_heads" alt="" coords="491,335,654,361"/>
<area shape="rect" id="node24" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="741,385,867,412"/>
<area shape="rect" id="node26" href="xfs__bmap_8c.html#afa8704beefe1cb7410d883d1244f2e37" title="xfs_bmapi_allocate" alt="" coords="299,424,433,451"/>
<area shape="rect" id="node27" href="xfs__bmap_8h.html#a4e19cbd5b34c86e0811c5e7f8428dcc4" title="xfs_bmapi_write" alt="" coords="514,436,631,463"/>
<area shape="rect" id="node28" href="xfs__bmap_8h.html#a8e3b9e8eca6692fd815214f8bbc772a8" title="xfs_bmap_is_real_extent" alt="" coords="721,487,887,513"/>
<area shape="rect" id="node33" href="xfs__iomap_8h.html#ad3c9ca59c123ce806cc2222557f36853" title="xfs_iomap_write_allocate" alt="" coords="719,436,889,463"/>
<area shape="rect" id="node29" href="xfs__aops_8c.html#ab6220b3f97d139ad21d89789d9104d83" title="xfs_get_blocks" alt="" coords="981,461,1092,488"/>
<area shape="rect" id="node30" href="xfs__reflink_8h.html#a55bcde20c85320ad2eaf44bb2195e43d" title="xfs_reflink_trim_around\l_shared" alt="" coords="958,513,1115,554"/>
<area shape="rect" id="node31" href="xfs__reflink_8c.html#a1c7a28b8814e728db2cf35b02f14f1f9" title="xfs_reflink_remap_extent" alt="" coords="953,360,1121,387"/>
<area shape="rect" id="node32" href="xfs__reflink_8c.html#a83a967c11172ce0733116bc950cdb2e4" title="xfs_reflink_dirty_extents" alt="" coords="955,411,1119,437"/>
<area shape="rect" id="node35" href="xfs_2scrub_2bmap_8c.html#ad507051d7103761fdb69e0fa26f9f807" title="xfs_scrub_bmap" alt="" coords="745,705,863,732"/>
<area shape="rect" id="node39" href="xfs__dir2_8h.html#abe575bbd66df3391f314f8fda72680b6" title="xfs_dir2_isblock" alt="" coords="979,832,1095,859"/>
<area shape="rect" id="node46" href="xfs__dir2_8h.html#a88322fb33438d07363a7f45617a97ade" title="xfs_dir2_isleaf" alt="" coords="983,629,1090,656"/>
<area shape="rect" id="node47" href="xfs__dir2__priv_8h.html#a4e5cb33f805ea5879cf9653c084bef09" title="xfs_dir2_node_to_leaf" alt="" coords="729,579,879,605"/>
<area shape="rect" id="node49" href="xfs__dir2__node_8c.html#af85af5d115622b2512b03bb0bf2fef5f" title="xfs_dir2_node_addname_int" alt="" coords="712,844,896,871"/>
<area shape="rect" id="node36" href="scrub_8h.html#af0fca61090342c08a14e93a08f5a59c8" title="xfs_scrub_bmap_data" alt="" coords="961,781,1112,808"/>
<area shape="rect" id="node37" href="scrub_8h.html#ab50208534e77cd39560b29700d9e3887" title="xfs_scrub_bmap_attr" alt="" coords="965,680,1109,707"/>
<area shape="rect" id="node38" href="scrub_8h.html#a09839a0df862dc5219a565d06363f249" title="xfs_scrub_bmap_cow" alt="" coords="962,731,1111,757"/>
<area shape="rect" id="node40" href="xfs_2scrub_2dir_8c.html#ad2928740682c17456430873f65e01b3d" title="xfs_scrub_directory\l_blocks" alt="" coords="1181,766,1317,807"/>
<area shape="rect" id="node41" href="xfs__dir2_8h.html#a2165915c6fa648c97a1e9623ddf570ad" title="xfs_dir_createname" alt="" coords="1181,883,1317,909"/>
<area shape="rect" id="node42" href="xfs__dir2_8h.html#a2bd604919a387c21a79f6a16b2bc1f34" title="xfs_dir_lookup" alt="" coords="1195,664,1302,691"/>
<area shape="rect" id="node43" href="xfs__dir2_8h.html#a0e57d4a25326f0ba23bb5c2092b96393" title="xfs_dir_removename" alt="" coords="1177,613,1320,640"/>
<area shape="rect" id="node44" href="xfs__dir2_8h.html#ad5edfdf2f0febecd320b95049653c3df" title="xfs_dir_replace" alt="" coords="1193,715,1304,741"/>
<area shape="rect" id="node45" href="xfs__dir2__readdir_8c.html#a293c582945cae0547e00839f16078513" title="xfs_readdir" alt="" coords="1205,832,1292,859"/>
<area shape="rect" id="node48" href="xfs__dir2__priv_8h.html#ae161ab159b4ad849884489e26046fa22" title="xfs_dir2_node_removename" alt="" coords="944,579,1129,605"/>
<area shape="rect" id="node50" href="xfs__dir2__priv_8h.html#ab2f2fbc81777d7a1b14b4e10df2f8d6a" title="xfs_dir2_node_addname" alt="" coords="955,883,1118,909"/>
</map>
</div>

</div>
</div>
<a id="a8ecb90e06a084b7cad3a06a6231e16e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ecb90e06a084b7cad3a06a6231e16e4">&#9670;&nbsp;</a></span>is_last_write()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int is_last_write </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>is_last_write - determine if an offset was in the last write to a LEB. <code></code>: UBIFS file-system description object : buffer to check : offset to check</p>
<p>This function returns %1 if  was in the last write to the LEB whose data is in , otherwise %0 is returned. The determination is made by checking for subsequent empty space starting from the next <code></code>-&gt;max_write_size boundary. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_a8ecb90e06a084b7cad3a06a6231e16e4_cgraph.png" border="0" usemap="#ubifs_2recovery_8c_a8ecb90e06a084b7cad3a06a6231e16e4_cgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_a8ecb90e06a084b7cad3a06a6231e16e4_cgraph" id="ubifs_2recovery_8c_a8ecb90e06a084b7cad3a06a6231e16e4_cgraph">
<area shape="rect" id="node2" href="ubifs_2recovery_8c.html#ade5d36157779e5eb588cc94b1ea387b7" title="is_empty" alt="" coords="148,5,223,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_a8ecb90e06a084b7cad3a06a6231e16e4_icgraph.png" border="0" usemap="#ubifs_2recovery_8c_a8ecb90e06a084b7cad3a06a6231e16e4_icgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_a8ecb90e06a084b7cad3a06a6231e16e4_icgraph" id="ubifs_2recovery_8c_a8ecb90e06a084b7cad3a06a6231e16e4_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#a1d3dc4ff452e67e327b4ad2e8888ffa4" title="ubifs_recover_leb" alt="" coords="148,81,272,108"/>
<area shape="rect" id="node3" href="ubifs_2orphan_8c.html#a56d0d86cd1db3d34e52d5b91784d55da" title="kill_orphans" alt="" coords="349,5,439,32"/>
<area shape="rect" id="node8" href="ubifs_8h.html#a42393d54bbb6a1e25d5dde1f396b31f3" title="ubifs_recover_log_leb" alt="" coords="320,107,468,133"/>
<area shape="rect" id="node11" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="526,196,653,223"/>
<area shape="rect" id="node22" href="replay_8c.html#a08ca5de44800c3270db809cec539c7e2" title="replay_bud" alt="" coords="351,56,437,83"/>
<area shape="rect" id="node4" href="ubifs_8h.html#a2c245b49b58cf15dd381f99530af6807" title="ubifs_mount_orphans" alt="" coords="516,5,663,32"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="897,31,991,57"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1040,31,1149,57"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="1197,31,1291,57"/>
<area shape="rect" id="node9" href="replay_8c.html#afc69bf474cbe8a69ea2bfea0494745df" title="replay_log_leb" alt="" coords="537,107,642,133"/>
<area shape="rect" id="node10" href="ubifs_8h.html#af76f722fe22c9c52675c75c16369d414" title="ubifs_replay_journal" alt="" coords="711,56,848,83"/>
<area shape="rect" id="node12" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="713,208,846,235"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="733,259,826,285"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="738,309,821,336"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="735,360,824,387"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="731,107,827,133"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="728,157,831,184"/>
<area shape="rect" id="node13" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="907,208,981,235"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="896,284,992,311"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="901,335,987,361"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="1045,335,1145,361"/>
<area shape="rect" id="node23" href="replay_8c.html#aa341c5f3914165aaeb6b9e63130cbf98" title="replay_buds" alt="" coords="543,56,635,83"/>
</map>
</div>

</div>
</div>
<a id="a51a58f1633fe0fc0333795b1a9216aa0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51a58f1633fe0fc0333795b1a9216aa0">&#9670;&nbsp;</a></span>no_more_nodes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int no_more_nodes </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>no_more_nodes - determine if there are no more nodes in a buffer. <code></code>: UBIFS file-system description object : buffer to check : length of buffer : LEB number of the LEB from which  was read : offset from which  was read</p>
<p>This function ensures that the corrupted node at  is the last thing written to a LEB. This function returns %1 if more data is not found and %0 if more data is found. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_a51a58f1633fe0fc0333795b1a9216aa0_cgraph.png" border="0" usemap="#ubifs_2recovery_8c_a51a58f1633fe0fc0333795b1a9216aa0_cgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_a51a58f1633fe0fc0333795b1a9216aa0_cgraph" id="ubifs_2recovery_8c_a51a58f1633fe0fc0333795b1a9216aa0_cgraph">
<area shape="rect" id="node2" href="ubifs_2recovery_8c.html#ade5d36157779e5eb588cc94b1ea387b7" title="is_empty" alt="" coords="194,81,269,108"/>
<area shape="rect" id="node3" href="ubifs_2io_8c.html#ab9b2f0cc24eff9f69bd606979eb3a53e" title="ubifs_check_node" alt="" coords="168,132,295,159"/>
<area shape="rect" id="node4" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="369,107,441,133"/>
<area shape="rect" id="node5" href="ubifs_2debug_8c.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="343,157,467,184"/>
<area shape="rect" id="node6" href="ubifs_2debug_8c.html#a40190f9f60ac94040c30dbd97c73a3ca" title="dump_ch" alt="" coords="538,31,613,57"/>
<area shape="rect" id="node9" href="ubifs_2debug_8c.html#a4b30ad73e46b72b5043aa4efa7fb8d9a" title="get_key_hash" alt="" coords="524,81,627,108"/>
<area shape="rect" id="node10" href="ubifs_2debug_8c.html#af1196269cd9c24affacc60e33f960f49" title="get_key_fmt" alt="" coords="528,132,623,159"/>
<area shape="rect" id="node11" href="key_8h.html#a5611c13d648e672825da064c90c8903a" title="key_read" alt="" coords="538,183,613,209"/>
<area shape="rect" id="node12" href="ubifs_2debug_8c.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="515,233,636,260"/>
<area shape="rect" id="node18" href="misc_8h.html#a1598cadb907a20f9e5dc3e7ee74edb1d" title="ubifs_idx_branch" alt="" coords="515,284,635,311"/>
<area shape="rect" id="node7" href="ubifs_2debug_8c.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="693,5,775,32"/>
<area shape="rect" id="node8" href="ubifs_2debug_8c.html#a0137ecd738390d71f938f27be78c4477" title="dbg_gtype" alt="" coords="693,56,775,83"/>
<area shape="rect" id="node13" href="key_8h.html#a06f47822510ef850cb7065778115453c" title="key_type" alt="" coords="697,132,771,159"/>
<area shape="rect" id="node14" href="key_8h.html#a4a12b97ed78e138baf7886a6df7ed50f" title="key_inum" alt="" coords="695,183,773,209"/>
<area shape="rect" id="node15" href="ubifs_2debug_8c.html#ad6af0af711fdb082f6df4eaeb4d82fe6" title="get_key_type" alt="" coords="684,233,784,260"/>
<area shape="rect" id="node16" href="key_8h.html#acddf1ca88d72a37e06c5c608cd084656" title="key_hash" alt="" coords="695,284,773,311"/>
<area shape="rect" id="node17" href="key_8h.html#a10c13375b52dbb12be6f9b685d1d1ba7" title="key_block" alt="" coords="693,335,775,361"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_a51a58f1633fe0fc0333795b1a9216aa0_icgraph.png" border="0" usemap="#ubifs_2recovery_8c_a51a58f1633fe0fc0333795b1a9216aa0_icgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_a51a58f1633fe0fc0333795b1a9216aa0_icgraph" id="ubifs_2recovery_8c_a51a58f1633fe0fc0333795b1a9216aa0_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#a1d3dc4ff452e67e327b4ad2e8888ffa4" title="ubifs_recover_leb" alt="" coords="168,81,292,108"/>
<area shape="rect" id="node3" href="ubifs_2orphan_8c.html#a56d0d86cd1db3d34e52d5b91784d55da" title="kill_orphans" alt="" coords="369,5,459,32"/>
<area shape="rect" id="node8" href="ubifs_8h.html#a42393d54bbb6a1e25d5dde1f396b31f3" title="ubifs_recover_log_leb" alt="" coords="340,107,488,133"/>
<area shape="rect" id="node11" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="546,196,673,223"/>
<area shape="rect" id="node22" href="replay_8c.html#a08ca5de44800c3270db809cec539c7e2" title="replay_bud" alt="" coords="371,56,457,83"/>
<area shape="rect" id="node4" href="ubifs_8h.html#a2c245b49b58cf15dd381f99530af6807" title="ubifs_mount_orphans" alt="" coords="536,5,683,32"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="917,31,1011,57"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1060,31,1169,57"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="1217,31,1311,57"/>
<area shape="rect" id="node9" href="replay_8c.html#afc69bf474cbe8a69ea2bfea0494745df" title="replay_log_leb" alt="" coords="557,107,662,133"/>
<area shape="rect" id="node10" href="ubifs_8h.html#af76f722fe22c9c52675c75c16369d414" title="ubifs_replay_journal" alt="" coords="731,56,868,83"/>
<area shape="rect" id="node12" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="733,208,866,235"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="753,259,846,285"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="758,309,841,336"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="755,360,844,387"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="751,107,847,133"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="748,157,851,184"/>
<area shape="rect" id="node13" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="927,208,1001,235"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="916,284,1012,311"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="921,335,1007,361"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="1065,335,1165,361"/>
<area shape="rect" id="node23" href="replay_8c.html#aa341c5f3914165aaeb6b9e63130cbf98" title="replay_buds" alt="" coords="563,56,655,83"/>
</map>
</div>

</div>
</div>
<a id="aa854cba2b9edc1a50c631dd212461ab9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa854cba2b9edc1a50c631dd212461ab9">&#9670;&nbsp;</a></span>recover_head()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int recover_head </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>sbuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>recover_head - recover a head. <code></code>: UBIFS file-system description object : LEB number of head to recover : offset of head to recover : LEB-sized buffer to use</p>
<p>This function ensures that there is no data on the flash at a head location.</p>
<p>This function returns %0 on success and a negative error code on failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_aa854cba2b9edc1a50c631dd212461ab9_cgraph.png" border="0" usemap="#ubifs_2recovery_8c_aa854cba2b9edc1a50c631dd212461ab9_cgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_aa854cba2b9edc1a50c631dd212461ab9_cgraph" id="ubifs_2recovery_8c_aa854cba2b9edc1a50c631dd212461ab9_cgraph">
<area shape="rect" id="node2" href="ubifs_2io_8c.html#ab6a2a3c4a79d6d4c52350540437d3cb3" title="ubifs_leb_read" alt="" coords="506,2134,613,2161"/>
<area shape="rect" id="node4" href="ubifs_2recovery_8c.html#ade5d36157779e5eb588cc94b1ea387b7" title="is_empty" alt="" coords="177,260,252,286"/>
<area shape="rect" id="node5" href="ubifs_2io_8c.html#ad9d3a62a61d21e1faa60cd6e630c41ac" title="ubifs_leb_unmap" alt="" coords="155,310,275,337"/>
<area shape="rect" id="node49" href="ubifs_2io_8c.html#ac70865809ab5c33c55274560e453f535" title="ubifs_leb_change" alt="" coords="153,209,276,236"/>
<area shape="rect" id="node3" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="901,1729,973,1756"/>
<area shape="rect" id="node6" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="707,108,825,134"/>
<area shape="rect" id="node7" href="ubifs_2debug_8c.html#a6ba17156289f8b8ecaed40dbafc04858" title="dbg_leb_unmap" alt="" coords="325,310,439,337"/>
<area shape="rect" id="node48" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="329,260,435,286"/>
<area shape="rect" id="node8" href="ubifs_2debug_8h.html#ab599356d6c84ddd2c7b9001b452c30bd" title="dbg_is_power_cut" alt="" coords="496,1070,623,1097"/>
<area shape="rect" id="node46" href="ubifs_2debug_8c.html#a67b6fc23cfbf882431d33323a03ef74c" title="power_cut_emulated" alt="" coords="488,209,631,236"/>
<area shape="rect" id="node9" href="ubifs_2debug_8h.html#aed9c32fd77ce70a2d917ab58c56189c2" title="ubifs_debugging_init" alt="" coords="696,412,836,438"/>
<area shape="rect" id="node10" href="ubifs_2debug_8h.html#a1e62d7c391f555902a25f8060eb6f1ec" title="ubifs_debugging_exit" alt="" coords="694,462,838,489"/>
<area shape="rect" id="node11" href="ubifs_2debug_8h.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="725,513,807,540"/>
<area shape="rect" id="node12" href="ubifs_2debug_8h.html#a615a670f26d4407b52175ce5f3faf594" title="dbg_cstate" alt="" coords="723,564,809,590"/>
<area shape="rect" id="node13" href="ubifs_2debug_8h.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="725,614,807,641"/>
<area shape="rect" id="node14" href="ubifs_2debug_8h.html#a4184d82b0b2ff0fffc6ab3d4de4a1e7a" title="dbg_get_key_dump" alt="" coords="699,665,833,692"/>
<area shape="rect" id="node15" href="ubifs_2debug_8h.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="705,716,827,742"/>
<area shape="rect" id="node16" href="ubifs_2debug_8h.html#a6ecc9bff59f14d28615ed14fa5323681" title="ubifs_dump_inode" alt="" coords="703,766,829,793"/>
<area shape="rect" id="node17" href="ubifs_2debug_8h.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="704,817,828,844"/>
<area shape="rect" id="node18" href="ubifs_2debug_8h.html#acfcbe45894b3b41385c1f9891d57bb97" title="ubifs_dump_budget_req" alt="" coords="686,868,846,894"/>
<area shape="rect" id="node19" href="ubifs_2debug_8h.html#ab351e7abb59edb97d57bd44dd83b0484" title="ubifs_dump_lstats" alt="" coords="702,918,830,945"/>
<area shape="rect" id="node20" href="ubifs_2debug_8h.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="704,969,828,996"/>
<area shape="rect" id="node21" href="ubifs_2debug_8h.html#ad04e55858b69b78f20ea8b0fb79f9f27" title="ubifs_dump_lprop" alt="" coords="704,1020,828,1046"/>
<area shape="rect" id="node22" href="ubifs_2debug_8h.html#a2fa0aeaaa556f0b13d098456ef7d86d4" title="ubifs_dump_lprops" alt="" coords="701,1830,831,1857"/>
<area shape="rect" id="node23" href="ubifs_2debug_8h.html#afc25fcc00c516fab54a12303d87bc100" title="ubifs_dump_lpt_info" alt="" coords="697,1121,835,1148"/>
<area shape="rect" id="node24" href="ubifs_2debug_8h.html#afa1952f7d3c2c791a330e3dc245c5a83" title="ubifs_dump_leb" alt="" coords="709,1881,823,1908"/>
<area shape="rect" id="node25" href="ubifs_2debug_8h.html#a454a80414a371832b3f68f828f6a6353" title="ubifs_dump_sleb" alt="" coords="706,1222,826,1249"/>
<area shape="rect" id="node26" href="ubifs_2debug_8h.html#a56365d730ac6932bf3163a8ba7279779" title="ubifs_dump_znode" alt="" coords="701,1273,831,1300"/>
<area shape="rect" id="node27" href="ubifs_2debug_8h.html#a5600b63b8362df17ed46c4e20784fb6c" title="ubifs_dump_heap" alt="" coords="704,1324,828,1350"/>
<area shape="rect" id="node28" href="ubifs_2debug_8h.html#ab2224f946272a25cfacf2607c6502818" title="ubifs_dump_pnode" alt="" coords="701,1374,831,1401"/>
<area shape="rect" id="node29" href="ubifs_2debug_8h.html#a6ad4e8a10c442517164e350787696d9d" title="ubifs_dump_tnc" alt="" coords="709,1425,823,1452"/>
<area shape="rect" id="node30" href="ubifs_2debug_8h.html#a1988de032288d9afc418a9f36c0e1a38" title="ubifs_dump_index" alt="" coords="703,1476,829,1502"/>
<area shape="rect" id="node31" href="ubifs_2debug_8h.html#a2dad580c9c3f21053039a854eb81bed2" title="ubifs_dump_lpt_lebs" alt="" coords="695,1526,837,1553"/>
<area shape="rect" id="node32" href="ubifs_2debug_8h.html#ac9540eb544441fb116e86f4799b55265" title="dbg_walk_index" alt="" coords="709,1932,823,1958"/>
<area shape="rect" id="node33" href="ubifs_2debug_8h.html#a42a0e664e63f651533d2a5abc23bf4da" title="dbg_save_space_info" alt="" coords="692,1628,840,1654"/>
<area shape="rect" id="node34" href="ubifs_2debug_8h.html#ace23cd2189dd2d7a9435ddd891e9beaa" title="dbg_check_space_info" alt="" coords="689,1982,843,2009"/>
<area shape="rect" id="node35" href="ubifs_2debug_8h.html#a69534405790cc12f492343243bc539a4" title="dbg_check_lprops" alt="" coords="703,2033,829,2060"/>
<area shape="rect" id="node36" href="ubifs_2debug_8h.html#a725dc62445ba29e272e4ccb5b10fbc61" title="dbg_old_index_check_init" alt="" coords="681,1678,851,1705"/>
<area shape="rect" id="node37" href="ubifs_2debug_8h.html#a23369147b6e2214867a8a650ad50ebaf" title="dbg_check_old_index" alt="" coords="693,209,839,236"/>
<area shape="rect" id="node38" href="ubifs_2debug_8h.html#a4d24d720745a25e26d273dc892c703eb" title="dbg_check_cats" alt="" coords="707,260,825,286"/>
<area shape="rect" id="node39" href="ubifs_2debug_8h.html#a0326c90a004af4486c5ad1dbc25baf29" title="dbg_check_ltab" alt="" coords="709,310,823,337"/>
<area shape="rect" id="node40" href="ubifs_2debug_8h.html#ab2f0c34c5385c6b4af6f326fac750a70" title="dbg_chk_lpt_free_spc" alt="" coords="691,361,841,388"/>
<area shape="rect" id="node41" href="ubifs_2debug_8h.html#a8743b404fd4536a6f2212846f55854d0" title="dbg_chk_lpt_sz" alt="" coords="709,1070,823,1097"/>
<area shape="rect" id="node42" href="ubifs_2debug_8h.html#ad20ad974aa8f10603e2468787760af65" title="dbg_check_synced_i_size" alt="" coords="679,1172,853,1198"/>
<area shape="rect" id="node43" href="ubifs_2debug_8h.html#ae64cd5f4e9b71d0d2167e1f8dafd9cd0" title="dbg_check_dir" alt="" coords="713,1577,819,1604"/>
<area shape="rect" id="node44" href="ubifs_2debug_8h.html#a8e749de733b483ca979984b8aa078aa6" title="dbg_check_tnc" alt="" coords="711,1729,821,1756"/>
<area shape="rect" id="node45" href="ubifs_2debug_8h.html#a6f442c5e8d297e33d3bdaea0887419e6" title="dbg_check_idx_size" alt="" coords="696,1780,836,1806"/>
<area shape="rect" id="node47" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="723,158,809,185"/>
<area shape="rect" id="node50" href="ubifs_2debug_8c.html#af2ad985422103ec5e3e13776002d6ceb" title="dbg_leb_change" alt="" coords="324,209,440,236"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_aa854cba2b9edc1a50c631dd212461ab9_icgraph.png" border="0" usemap="#ubifs_2recovery_8c_aa854cba2b9edc1a50c631dd212461ab9_icgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_aa854cba2b9edc1a50c631dd212461ab9_icgraph" id="ubifs_2recovery_8c_aa854cba2b9edc1a50c631dd212461ab9_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#ab0121bf0d3497aba350c96bbd431bea2" title="ubifs_recover_inl_heads" alt="" coords="153,56,316,83"/>
<area shape="rect" id="node3" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="381,5,474,32"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="365,56,490,83"/>
<area shape="rect" id="node8" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="364,208,491,235"/>
<area shape="rect" id="node4" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="551,5,660,32"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="721,5,815,32"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="544,56,667,83"/>
<area shape="rect" id="node9" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="539,107,672,133"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="559,157,652,184"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="564,208,647,235"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="561,259,650,285"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="557,309,653,336"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="554,360,657,387"/>
<area shape="rect" id="node10" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="731,107,805,133"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="720,183,816,209"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="725,233,811,260"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="864,233,964,260"/>
</map>
</div>

</div>
</div>
<a id="a93e3361d5b4ba48167d1aadf3a45e724"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93e3361d5b4ba48167d1aadf3a45e724">&#9670;&nbsp;</a></span>remove_ino()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void remove_ino </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ino_t&#160;</td>
          <td class="paramname"><em>inum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>remove_ino - remove an entry from the size tree. <code></code>: UBIFS file-system description object : inode number </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_a93e3361d5b4ba48167d1aadf3a45e724_cgraph.png" border="0" usemap="#ubifs_2recovery_8c_a93e3361d5b4ba48167d1aadf3a45e724_cgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_a93e3361d5b4ba48167d1aadf3a45e724_cgraph" id="ubifs_2recovery_8c_a93e3361d5b4ba48167d1aadf3a45e724_cgraph">
<area shape="rect" id="node2" href="ubifs_2recovery_8c.html#a574f611c4294ffdb6ff758f549cd798e" title="find_ino" alt="" coords="143,5,209,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_a93e3361d5b4ba48167d1aadf3a45e724_icgraph.png" border="0" usemap="#ubifs_2recovery_8c_a93e3361d5b4ba48167d1aadf3a45e724_icgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_a93e3361d5b4ba48167d1aadf3a45e724_icgraph" id="ubifs_2recovery_8c_a93e3361d5b4ba48167d1aadf3a45e724_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#a88dd4e25e224557f93cba67c93532e0a" title="ubifs_recover_size\l_accum" alt="" coords="143,125,273,166"/>
<area shape="rect" id="node3" href="replay_8c.html#aed3ed0e13bec51f8343217fe9a6552fe" title="apply_replay_entry" alt="" coords="321,56,452,83"/>
<area shape="rect" id="node9" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="323,157,450,184"/>
<area shape="rect" id="node4" href="replay_8c.html#adc5456ddf590ac5979e20ff60b4cf06a" title="apply_replay_list" alt="" coords="507,5,626,32"/>
<area shape="rect" id="node5" href="ubifs_8h.html#af76f722fe22c9c52675c75c16369d414" title="ubifs_replay_journal" alt="" coords="681,5,819,32"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="870,5,963,32"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1015,5,1124,32"/>
<area shape="rect" id="node8" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="1172,5,1265,32"/>
<area shape="rect" id="node10" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="500,56,633,83"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="520,107,613,133"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="525,157,608,184"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="522,208,611,235"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="519,259,615,285"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="515,309,618,336"/>
<area shape="rect" id="node11" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="713,56,787,83"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="702,132,798,159"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="707,183,793,209"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="867,183,967,209"/>
</map>
</div>

</div>
</div>
<a id="a427d1842fd140c457b93e9d0f9c1e78d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a427d1842fd140c457b93e9d0f9c1e78d">&#9670;&nbsp;</a></span>ubifs_clean_lebs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ubifs_clean_lebs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>sbuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_clean_lebs - clean LEBs recovered during read-only mount. <code></code>: UBIFS file-system description object : LEB-sized buffer to use</p>
<p>This function cleans a LEB identified during recovery that needs to be written but was not because UBIFS was mounted read-only. This happens when remounting to read-write mode.</p>
<p>This function returns %0 on success and a negative error code on failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_a427d1842fd140c457b93e9d0f9c1e78d_cgraph.png" border="0" usemap="#ubifs_2recovery_8c_a427d1842fd140c457b93e9d0f9c1e78d_cgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_a427d1842fd140c457b93e9d0f9c1e78d_cgraph" id="ubifs_2recovery_8c_a427d1842fd140c457b93e9d0f9c1e78d_cgraph">
<area shape="rect" id="node2" href="ubifs_2recovery_8c.html#abd1f4122259576c896b95cb623891ed1" title="clean_an_unclean_leb" alt="" coords="172,1284,323,1311"/>
<area shape="rect" id="node3" href="ubifs_2io_8c.html#ad9d3a62a61d21e1faa60cd6e630c41ac" title="ubifs_leb_unmap" alt="" coords="372,1360,492,1387"/>
<area shape="rect" id="node28" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1161,524,1233,551"/>
<area shape="rect" id="node43" href="ubifs_2io_8c.html#ab6a2a3c4a79d6d4c52350540437d3cb3" title="ubifs_leb_read" alt="" coords="546,55,653,81"/>
<area shape="rect" id="node44" href="ubifs_2scan_8c.html#ab974ec909e594f54f7773880688a2334" title="ubifs_scan_a_node" alt="" coords="723,1639,858,1665"/>
<area shape="rect" id="node47" href="ubifs_2scan_8c.html#a18197e05567059efbb981ebe037255bb" title="ubifs_scanned_corruption" alt="" coords="705,144,876,171"/>
<area shape="rect" id="node48" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="393,1613,471,1640"/>
<area shape="rect" id="node49" href="ubifs_2io_8c.html#ac70865809ab5c33c55274560e453f535" title="ubifs_leb_change" alt="" coords="371,1284,493,1311"/>
<area shape="rect" id="node4" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="945,1461,1063,1488"/>
<area shape="rect" id="node5" href="ubifs_2debug_8c.html#a6ba17156289f8b8ecaed40dbafc04858" title="dbg_leb_unmap" alt="" coords="543,1360,656,1387"/>
<area shape="rect" id="node42" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="546,1309,653,1336"/>
<area shape="rect" id="node6" href="ubifs_2debug_8h.html#ab599356d6c84ddd2c7b9001b452c30bd" title="dbg_is_power_cut" alt="" coords="727,828,854,855"/>
<area shape="rect" id="node40" href="ubifs_2debug_8c.html#a67b6fc23cfbf882431d33323a03ef74c" title="power_cut_emulated" alt="" coords="719,1360,862,1387"/>
<area shape="rect" id="node7" href="ubifs_2debug_8h.html#aed9c32fd77ce70a2d917ab58c56189c2" title="ubifs_debugging_init" alt="" coords="934,397,1074,424"/>
<area shape="rect" id="node8" href="ubifs_2debug_8h.html#a1e62d7c391f555902a25f8060eb6f1ec" title="ubifs_debugging_exit" alt="" coords="932,448,1076,475"/>
<area shape="rect" id="node9" href="ubifs_2debug_8h.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="963,499,1045,525"/>
<area shape="rect" id="node10" href="ubifs_2debug_8h.html#a615a670f26d4407b52175ce5f3faf594" title="dbg_cstate" alt="" coords="961,549,1047,576"/>
<area shape="rect" id="node11" href="ubifs_2debug_8h.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="963,600,1045,627"/>
<area shape="rect" id="node12" href="ubifs_2debug_8h.html#a4184d82b0b2ff0fffc6ab3d4de4a1e7a" title="dbg_get_key_dump" alt="" coords="937,651,1071,677"/>
<area shape="rect" id="node13" href="ubifs_2debug_8h.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="943,701,1065,728"/>
<area shape="rect" id="node14" href="ubifs_2debug_8h.html#a6ecc9bff59f14d28615ed14fa5323681" title="ubifs_dump_inode" alt="" coords="1134,335,1261,361"/>
<area shape="rect" id="node16" href="ubifs_2debug_8h.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="1135,1272,1259,1299"/>
<area shape="rect" id="node23" href="ubifs_2debug_8h.html#acfcbe45894b3b41385c1f9891d57bb97" title="ubifs_dump_budget_req" alt="" coords="924,803,1084,829"/>
<area shape="rect" id="node24" href="ubifs_2debug_8h.html#ab351e7abb59edb97d57bd44dd83b0484" title="ubifs_dump_lstats" alt="" coords="940,853,1068,880"/>
<area shape="rect" id="node25" href="ubifs_2debug_8h.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="942,904,1066,931"/>
<area shape="rect" id="node26" href="ubifs_2debug_8h.html#ad04e55858b69b78f20ea8b0fb79f9f27" title="ubifs_dump_lprop" alt="" coords="942,955,1066,981"/>
<area shape="rect" id="node27" href="ubifs_2debug_8h.html#a2fa0aeaaa556f0b13d098456ef7d86d4" title="ubifs_dump_lprops" alt="" coords="939,752,1069,779"/>
<area shape="rect" id="node29" href="ubifs_2debug_8h.html#afc25fcc00c516fab54a12303d87bc100" title="ubifs_dump_lpt_info" alt="" coords="935,1005,1073,1032"/>
<area shape="rect" id="node30" href="ubifs_2debug_8h.html#afa1952f7d3c2c791a330e3dc245c5a83" title="ubifs_dump_leb" alt="" coords="947,1309,1061,1336"/>
<area shape="rect" id="node32" href="ubifs_2debug_8h.html#a454a80414a371832b3f68f828f6a6353" title="ubifs_dump_sleb" alt="" coords="944,1360,1064,1387"/>
<area shape="rect" id="node33" href="ubifs_2debug_8h.html#a56365d730ac6932bf3163a8ba7279779" title="ubifs_dump_znode" alt="" coords="1132,215,1263,241"/>
<area shape="rect" id="node34" href="ubifs_2debug_8h.html#a5600b63b8362df17ed46c4e20784fb6c" title="ubifs_dump_heap" alt="" coords="942,1056,1066,1083"/>
<area shape="rect" id="node35" href="ubifs_2debug_8h.html#ab2224f946272a25cfacf2607c6502818" title="ubifs_dump_pnode" alt="" coords="939,1107,1069,1133"/>
<area shape="rect" id="node36" href="ubifs_2debug_8h.html#a6ad4e8a10c442517164e350787696d9d" title="ubifs_dump_tnc" alt="" coords="947,1157,1061,1184"/>
<area shape="rect" id="node37" href="ubifs_2debug_8h.html#a1988de032288d9afc418a9f36c0e1a38" title="ubifs_dump_index" alt="" coords="941,1208,1067,1235"/>
<area shape="rect" id="node38" href="ubifs_2debug_8h.html#a2dad580c9c3f21053039a854eb81bed2" title="ubifs_dump_lpt_lebs" alt="" coords="933,347,1075,373"/>
<area shape="rect" id="node39" href="ubifs_2debug_8h.html#ac9540eb544441fb116e86f4799b55265" title="dbg_walk_index" alt="" coords="947,296,1061,323"/>
<area shape="rect" id="node15" href="key_8h.html#a5611c13d648e672825da064c90c8903a" title="key_read" alt="" coords="1334,1221,1409,1248"/>
<area shape="rect" id="node17" href="ubifs_2debug_8c.html#a40190f9f60ac94040c30dbd97c73a3ca" title="dump_ch" alt="" coords="1334,1272,1409,1299"/>
<area shape="rect" id="node19" href="ubifs_2debug_8c.html#a4b30ad73e46b72b5043aa4efa7fb8d9a" title="get_key_hash" alt="" coords="1320,1424,1423,1451"/>
<area shape="rect" id="node20" href="ubifs_2debug_8c.html#af1196269cd9c24affacc60e33f960f49" title="get_key_fmt" alt="" coords="1324,1323,1419,1349"/>
<area shape="rect" id="node21" href="ubifs_2debug_8c.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="1311,1171,1432,1197"/>
<area shape="rect" id="node22" href="misc_8h.html#a1598cadb907a20f9e5dc3e7ee74edb1d" title="ubifs_idx_branch" alt="" coords="1311,1373,1431,1400"/>
<area shape="rect" id="node18" href="ubifs_2debug_8c.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="1480,1512,1563,1539"/>
<area shape="rect" id="node31" href="ubifs_2debug_8c.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="1135,1335,1259,1361"/>
<area shape="rect" id="node41" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="961,1411,1047,1437"/>
<area shape="rect" id="node45" href="ubifs_2scan_8c.html#a93a80ae9e3252efb52d991f4abc7152a" title="scan_padding_bytes" alt="" coords="933,1765,1075,1792"/>
<area shape="rect" id="node46" href="ubifs_2io_8c.html#ab9b2f0cc24eff9f69bd606979eb3a53e" title="ubifs_check_node" alt="" coords="941,1613,1067,1640"/>
<area shape="rect" id="node50" href="ubifs_2debug_8c.html#af2ad985422103ec5e3e13776002d6ceb" title="dbg_leb_change" alt="" coords="541,1259,657,1285"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_a427d1842fd140c457b93e9d0f9c1e78d_icgraph.png" border="0" usemap="#ubifs_2recovery_8c_a427d1842fd140c457b93e9d0f9c1e78d_icgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_a427d1842fd140c457b93e9d0f9c1e78d_icgraph" id="ubifs_2recovery_8c_a427d1842fd140c457b93e9d0f9c1e78d_icgraph">
<area shape="rect" id="node2" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="173,56,298,83"/>
<area shape="rect" id="node4" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="172,157,299,184"/>
<area shape="rect" id="node3" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="352,5,475,32"/>
<area shape="rect" id="node5" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="347,56,480,83"/>
<area shape="rect" id="node7" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="367,107,460,133"/>
<area shape="rect" id="node8" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="372,157,455,184"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="369,208,458,235"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="365,259,461,285"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="362,309,465,336"/>
<area shape="rect" id="node6" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="539,56,613,83"/>
<area shape="rect" id="node9" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="528,132,624,159"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="533,183,619,209"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="672,183,772,209"/>
</map>
</div>

</div>
</div>
<a id="a4f091c7b064ca0a6d513bc580ad8c0fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f091c7b064ca0a6d513bc580ad8c0fe">&#9670;&nbsp;</a></span>ubifs_destroy_size_tree()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ubifs_destroy_size_tree </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_destroy_size_tree - free resources related to the size tree. <code></code>: UBIFS file-system description object </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_a4f091c7b064ca0a6d513bc580ad8c0fe_cgraph.png" border="0" usemap="#ubifs_2recovery_8c_a4f091c7b064ca0a6d513bc580ad8c0fe_cgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_a4f091c7b064ca0a6d513bc580ad8c0fe_cgraph" id="ubifs_2recovery_8c_a4f091c7b064ca0a6d513bc580ad8c0fe_cgraph">
<area shape="rect" id="node2" href="inode_8c.html#a378733dcbf0fb08359b9a02145ac8fc3" title="iput" alt="" coords="213,411,256,437"/>
<area shape="rect" id="node3" href="inode_8c.html#a7e99b25ac29d19bc82fbddcb773c4f25" title="iput_final" alt="" coords="304,411,379,437"/>
<area shape="rect" id="node24" href="debugfs_2inode_8c.html#a16e485b5debd4cd96a200844c38df190" title="EXPORT_SYMBOL" alt="" coords="1058,107,1197,133"/>
<area shape="rect" id="node4" href="inode_8c.html#a943dee860d20f57552f168683dcb4b5d" title="inode_add_lru" alt="" coords="1076,664,1179,691"/>
<area shape="rect" id="node6" href="fs-writeback_8c.html#aceeba3df6a433f68c665086a2ee53faa" title="write_inode_now" alt="" coords="429,461,547,488"/>
<area shape="rect" id="node18" href="inode_8c.html#a1f2fe8883e70882e845560b2ccf4ab16" title="inode_lru_list_del" alt="" coords="427,309,549,336"/>
<area shape="rect" id="node19" href="inode_8c.html#a4b62e1e360840615442b8ad6a9f16bc7" title="evict" alt="" coords="463,360,513,387"/>
<area shape="rect" id="node5" href="inode_8c.html#a19db2cb42c3c0fb426d842dcbd0e4754" title="inode_lru_list_add" alt="" coords="1269,664,1396,691"/>
<area shape="rect" id="node7" href="fs-writeback_8c.html#adf3fdb0955c8ea5fcad15b51ea6aa76e" title="writeback_single_inode" alt="" coords="603,461,761,488"/>
<area shape="rect" id="node17" href="fs-writeback_8c.html#a044f1d7ff09b03f639232ec0e6a88ee1" title="EXPORT_SYMBOL" alt="" coords="613,563,751,589"/>
<area shape="rect" id="node8" href="fs-writeback_8c.html#a1e97e23bc25f00f2a833fcf5aeab2630" title="__inode_wait_for_writeback" alt="" coords="815,344,997,371"/>
<area shape="rect" id="node9" href="fs-writeback_8c.html#ac4ebf19f04368ec669a08449911d9627" title="__writeback_single\l_inode" alt="" coords="839,497,973,538"/>
<area shape="rect" id="node13" href="fs-writeback_8c.html#ac55a800ef7f8194c63b9b304d31ffb98" title="inode_to_wb_and_lock_list" alt="" coords="817,445,995,472"/>
<area shape="rect" id="node14" href="fs-writeback_8c.html#a7a6ae4220731e250a48b3758d417227c" title="inode_io_list_del_locked" alt="" coords="825,395,987,421"/>
<area shape="rect" id="node16" href="fs-writeback_8c.html#a736fee7c52c60bcf4ec1722d99c7918d" title="inode_sync_complete" alt="" coords="832,563,980,589"/>
<area shape="rect" id="node10" href="fs-writeback_8c.html#a5bd471e3d188b5af658a60ff346167c0" title="write_inode" alt="" coords="1083,504,1171,531"/>
<area shape="rect" id="node11" href="bad__inode_8c.html#a7db3c62ffb9390ef7191a63e19073333" title="is_bad_inode" alt="" coords="1283,504,1382,531"/>
<area shape="rect" id="node12" href="bad__inode_8c.html#a74ff3566c64350315f12163f4ddfdae7" title="EXPORT_SYMBOL" alt="" coords="1457,504,1596,531"/>
<area shape="rect" id="node15" href="fs-writeback_8c.html#aa31b94b7a70c8c8d396a5f0f3e8ef1ec" title="wb_io_lists_depopulated" alt="" coords="1045,395,1209,421"/>
<area shape="rect" id="node20" href="fs-writeback_8c.html#ac6d2db367ed77b70b681e887ba0b05fc" title="inode_io_list_del" alt="" coords="623,411,741,437"/>
<area shape="rect" id="node21" href="inode_8c.html#a512fc1963a4346c6b2d0ea53a3f88985" title="inode_sb_list_del" alt="" coords="621,208,743,235"/>
<area shape="rect" id="node22" href="fs-writeback_8c.html#a48ed1405bbf8e54568c31f215bbc9429" title="inode_wait_for_writeback" alt="" coords="597,360,767,387"/>
<area shape="rect" id="node23" href="inode_8c.html#a5ef1de74cc382d6cd8afddc6e66a47a4" title="clear_inode" alt="" coords="862,251,950,277"/>
<area shape="rect" id="node25" href="block__dev_8c.html#a3ff5855083d5b2081708b2f1442a5121" title="bd_forget" alt="" coords="644,512,720,539"/>
<area shape="rect" id="node28" href="char__dev_8c.html#a3e21c6290eac67cfa61d376da8c025a3" title="cd_forget" alt="" coords="644,259,720,285"/>
<area shape="rect" id="node29" href="inode_8c.html#a076b86296ed39596f96ef03ea8aa74d7" title="destroy_inode" alt="" coords="631,157,733,184"/>
<area shape="rect" id="node26" href="block__dev_8c.html#a47d4b8b48b31eb6197e6f93d6e48034e" title="bdput" alt="" coords="879,613,933,640"/>
<area shape="rect" id="node27" href="block__dev_8c.html#ad8301dbb3297e4ea3063019db7183347" title="EXPORT_SYMBOL" alt="" coords="1058,613,1197,640"/>
<area shape="rect" id="node30" href="inode_8c.html#acc59c5a81bf40ee903f9feb03ac7b7fa" title="__destroy_inode" alt="" coords="847,56,965,83"/>
<area shape="rect" id="node35" href="inode_8c.html#af3846da666673695a3040ee40b92bf0e" title="i_callback" alt="" coords="866,157,946,184"/>
<area shape="rect" id="node31" href="buffer_8c.html#ae1120bf173819fd9bfa5a939b13f46e8" title="inode_has_buffers" alt="" coords="1063,5,1191,32"/>
<area shape="rect" id="node32" href="locks_8c.html#a24b09f5cedf01a8cff5e10f3d00636a2" title="locks_free_lock_context" alt="" coords="1046,56,1209,83"/>
<area shape="rect" id="node33" href="locks_8c.html#a2cf31bf229e31592098de9493a334c29" title="locks_check_ctx_lists" alt="" coords="1257,56,1408,83"/>
<area shape="rect" id="node34" href="locks_8c.html#aa9419f47867376fe0e03cc366c5c23f9" title="locks_dump_ctx_list" alt="" coords="1456,56,1597,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_a4f091c7b064ca0a6d513bc580ad8c0fe_icgraph.png" border="0" usemap="#ubifs_2recovery_8c_a4f091c7b064ca0a6d513bc580ad8c0fe_icgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_a4f091c7b064ca0a6d513bc580ad8c0fe_icgraph" id="ubifs_2recovery_8c_a4f091c7b064ca0a6d513bc580ad8c0fe_icgraph">
<area shape="rect" id="node2" href="ubifs_2super_8c.html#aab65fe9d1f499e203abd72e1c7ddafc6" title="destroy_journal" alt="" coords="221,56,332,83"/>
<area shape="rect" id="node8" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="213,208,340,235"/>
<area shape="rect" id="node3" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="408,5,501,32"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a3e27f93e2785f1ef9580acc2fa8db34d" title="ubifs_umount" alt="" coords="405,56,505,83"/>
<area shape="rect" id="node4" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="572,5,681,32"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="735,5,829,32"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#ae2f59fbee4bf3523cc44fbe10cc38917" title="ubifs_put_super" alt="" coords="569,56,684,83"/>
<area shape="rect" id="node9" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="388,107,521,133"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="408,157,501,184"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="413,208,496,235"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="410,259,499,285"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="407,309,503,336"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="403,360,506,387"/>
<area shape="rect" id="node10" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="590,107,663,133"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="579,183,675,209"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="583,233,670,260"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="732,233,832,260"/>
</map>
</div>

</div>
</div>
<a id="ae25afe7a337008e52b357558646ed71f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae25afe7a337008e52b357558646ed71f">&#9670;&nbsp;</a></span>ubifs_rcvry_gc_commit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ubifs_rcvry_gc_commit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_rcvry_gc_commit - recover the GC LEB number and run the commit. <code></code>: UBIFS file-system description object</p>
<p>Out-of-place garbage collection requires always one empty LEB with which to start garbage collection. The LEB number is recorded in c-&gt;gc_lnum and is written to the master node on unmounting. In the case of an unclean unmount the value of gc_lnum recorded in the master node is out of date and cannot be used. Instead, recovery must allocate an empty LEB for this purpose. However, there may not be enough empty space, in which case it must be possible to GC the dirtiest LEB into the GC head LEB.</p>
<p>This function also runs the commit which causes the TNC updates from size-recovery and orphans to be written to the flash. That is important to ensure correct replay order for subsequent mounts.</p>
<p>This function returns %0 on success and a negative error code on failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_ae25afe7a337008e52b357558646ed71f_cgraph.png" border="0" usemap="#ubifs_2recovery_8c_ae25afe7a337008e52b357558646ed71f_cgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_ae25afe7a337008e52b357558646ed71f_cgraph" id="ubifs_2recovery_8c_ae25afe7a337008e52b357558646ed71f_cgraph">
<area shape="rect" id="node2" href="ubifs_2recovery_8c.html#acb6fbec748694453a2e4b3ed2be6cc6b" title="grab_empty_leb" alt="" coords="211,444,325,471"/>
<area shape="rect" id="node15" href="ubifs_2io_8c.html#ad9d3a62a61d21e1faa60cd6e630c41ac" title="ubifs_leb_unmap" alt="" coords="1013,1037,1133,1064"/>
<area shape="rect" id="node18" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1451,448,1523,475"/>
<area shape="rect" id="node30" href="ubifs_2commit_8c.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="397,752,522,779"/>
<area shape="rect" id="node35" href="ubifs_2io_8c.html#a3e6d29ad192528c05f246cd31a1732fb" title="ubifs_wbuf_sync_nolock" alt="" coords="991,1259,1156,1285"/>
<area shape="rect" id="node40" href="find_8c.html#aa0e0f58e74f915d84712f6a1367b75d0" title="ubifs_find_dirty_leb" alt="" coords="798,752,933,779"/>
<area shape="rect" id="node43" href="ubifs_2gc_8c.html#a29dd378f4b22d45580bff155cbb275cd" title="ubifs_garbage_collect_leb" alt="" coords="373,1208,545,1235"/>
<area shape="rect" id="node3" href="find_8c.html#a5dbeb2fbcdd3403f15e5d6ce214edcf9" title="ubifs_find_free_leb\l_for_idx" alt="" coords="601,546,732,587"/>
<area shape="rect" id="node20" href="lprops_8c.html#aeb3c0f6274cdeba0c778d57f29ab39bf" title="ubifs_change_one_lp" alt="" coords="793,448,937,475"/>
<area shape="rect" id="node21" href="ubifs_2debug_8c.html#a2fa0aeaaa556f0b13d098456ef7d86d4" title="ubifs_dump_lprops" alt="" coords="601,257,732,284"/>
<area shape="rect" id="node27" href="ubifs_2debug_8c.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="397,123,521,149"/>
<area shape="rect" id="node4" href="misc_8h.html#aa89c2768eb94f129c6afbe47420b44ba" title="ubifs_get_lprops" alt="" coords="1015,600,1132,627"/>
<area shape="rect" id="node5" href="lprops_8c.html#af7bb5628372135952187c4c37b9a0a68" title="ubifs_fast_find_empty" alt="" coords="998,651,1149,677"/>
<area shape="rect" id="node6" href="lprops_8c.html#af4f3f200dc1d36660281ec0282293308" title="ubifs_fast_find_freeable" alt="" coords="993,803,1153,829"/>
<area shape="rect" id="node7" href="find_8c.html#ae53f61786f9fb4f68b3eb47770f97846" title="scan_for_leb_for_idx" alt="" coords="1002,448,1145,475"/>
<area shape="rect" id="node10" href="lprops_8c.html#abfc4c6a75b37762f214cbc91f0ebe664" title="ubifs_change_lp" alt="" coords="1015,701,1131,728"/>
<area shape="rect" id="node14" href="misc_8h.html#a6dce2c34ec97d74cf4be59e0201bdb3e" title="ubifs_release_lprops" alt="" coords="1003,549,1144,576"/>
<area shape="rect" id="node8" href="lpt_8c.html#a34800df1b6052b492ca05c589dfec386" title="ubifs_lpt_scan_nolock" alt="" coords="1217,752,1367,779"/>
<area shape="rect" id="node9" href="lpt_8c.html#ade4e71b1fffa493cfb997feaff2c0638" title="ubifs_lpt_lookup_dirty" alt="" coords="1218,549,1366,576"/>
<area shape="rect" id="node11" href="lprops_8c.html#a911df1bb1dc58cf096c97ce547539153" title="is_lprops_dirty" alt="" coords="1239,701,1345,728"/>
<area shape="rect" id="node12" href="lprops_8c.html#a54fa4acd96a49b1bbe2baeac4dbd0c0b" title="ubifs_calc_dark" alt="" coords="1235,397,1349,424"/>
<area shape="rect" id="node13" href="lprops_8c.html#a2f083caeaebac06c1f51d7c7d34f5c13" title="change_category" alt="" coords="1231,651,1353,677"/>
<area shape="rect" id="node16" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="1428,1183,1547,1209"/>
<area shape="rect" id="node17" href="ubifs_2debug_8c.html#a6ba17156289f8b8ecaed40dbafc04858" title="dbg_leb_unmap" alt="" coords="1235,1005,1349,1032"/>
<area shape="rect" id="node19" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="1434,1107,1541,1133"/>
<area shape="rect" id="node22" href="lprops_8c.html#a8a4a969b18d269964ff80d11eb94b8ab" title="ubifs_get_lp_stats" alt="" coords="801,701,929,728"/>
<area shape="rect" id="node23" href="ubifs_2debug_8c.html#ab351e7abb59edb97d57bd44dd83b0484" title="ubifs_dump_lstats" alt="" coords="801,195,929,221"/>
<area shape="rect" id="node24" href="lprops_8c.html#a1eb6fc2cca5a1e34192e3c54b90d3057" title="ubifs_read_one_lp" alt="" coords="802,296,929,323"/>
<area shape="rect" id="node25" href="ubifs_2debug_8c.html#ad04e55858b69b78f20ea8b0fb79f9f27" title="ubifs_dump_lprop" alt="" coords="1011,245,1135,272"/>
<area shape="rect" id="node26" href="ubifs_2debug_8c.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="1251,245,1333,272"/>
<area shape="rect" id="node28" href="budget_8c.html#adaa1427281786d8bfca793236b5f0457" title="ubifs_calc_available" alt="" coords="796,93,935,120"/>
<area shape="rect" id="node29" href="budget_8c.html#a6323235e83f399d119f1deb54fa2f144" title="ubifs_get_free_space\l_nolock" alt="" coords="593,145,740,186"/>
<area shape="rect" id="node31" href="ubifs_2commit_8c.html#a8066477fd4d182a562575fec9c1460f9" title="wait_for_commit" alt="" coords="607,752,726,779"/>
<area shape="rect" id="node32" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="623,904,710,931"/>
<area shape="rect" id="node33" href="ubifs_2commit_8c.html#a349da7e934725810c922b20daec868ae" title="nothing_to_commit" alt="" coords="799,1005,931,1032"/>
<area shape="rect" id="node34" href="misc_8h.html#af8fd16c04f42f2a56d86f0f7a4924ecc" title="ubifs_wbuf_sync" alt="" coords="805,1259,925,1285"/>
<area shape="rect" id="node39" href="ubifs_2gc_8c.html#a1ff584f97bf8a1783fc9fecde0a87b1e" title="ubifs_gc_start_commit" alt="" coords="788,803,943,829"/>
<area shape="rect" id="node36" href="ubifs_2io_8c.html#aeef91391de4e0f46023ab0afac3a2335" title="cancel_wbuf_timer_nolock" alt="" coords="1204,1259,1380,1285"/>
<area shape="rect" id="node37" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="1253,1309,1331,1336"/>
<area shape="rect" id="node38" href="ubifs_2io_8c.html#a02909cfc9d3a0100f549390c7d464632" title="ubifs_leb_write" alt="" coords="1237,1157,1347,1184"/>
<area shape="rect" id="node41" href="find_8c.html#a715c6a77d5e6922f0b465eaba93f3a99" title="scan_for_dirty" alt="" coords="1021,752,1125,779"/>
<area shape="rect" id="node42" href="find_8c.html#a15d8baed5e0f491f1c86cab2a049acb7" title="scan_for_dirty_cb" alt="" coords="1229,803,1355,829"/>
<area shape="rect" id="node44" href="ubifs_2gc_8c.html#a2f4daf5146e689ec3841b9a9840658f4" title="gc_sync_wbufs" alt="" coords="610,1259,723,1285"/>
<area shape="rect" id="node45" href="ubifs_2scan_8c.html#a1689915d09ec86f76b30ee598b10f34e" title="ubifs_scan" alt="" coords="624,1056,709,1083"/>
<area shape="rect" id="node46" href="ubifs_2scan_8c.html#a7e559a0c70f1f17d0886f600cd59a639" title="ubifs_scan_destroy" alt="" coords="798,1309,933,1336"/>
<area shape="rect" id="node47" href="key_8h.html#a5611c13d648e672825da064c90c8903a" title="key_read" alt="" coords="629,1360,704,1387"/>
<area shape="rect" id="node48" href="misc_8h.html#ac244bb6ab2f45cd8b870edc621d20deb" title="ubifs_idx_key" alt="" coords="615,1461,718,1488"/>
<area shape="rect" id="node49" href="tnc_8c.html#a3a388ce018049e8a7da4da512f8e1dcf" title="ubifs_dirty_idx_node" alt="" coords="596,1107,737,1133"/>
<area shape="rect" id="node50" href="ubifs_2gc_8c.html#ad0088bd16e6b85c2c28124046ab839d7" title="move_nodes" alt="" coords="619,1157,715,1184"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_ae25afe7a337008e52b357558646ed71f_icgraph.png" border="0" usemap="#ubifs_2recovery_8c_ae25afe7a337008e52b357558646ed71f_icgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_ae25afe7a337008e52b357558646ed71f_icgraph" id="ubifs_2recovery_8c_ae25afe7a337008e52b357558646ed71f_icgraph">
<area shape="rect" id="node2" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="227,5,321,32"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="211,56,337,83"/>
<area shape="rect" id="node7" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="211,208,337,235"/>
<area shape="rect" id="node3" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="397,5,507,32"/>
<area shape="rect" id="node4" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="568,5,661,32"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="391,56,513,83"/>
<area shape="rect" id="node8" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="385,107,519,133"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="405,157,499,184"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="411,208,493,235"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="407,259,497,285"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="404,309,500,336"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="401,360,503,387"/>
<area shape="rect" id="node9" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="578,107,651,133"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="567,183,663,209"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="571,233,658,260"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="711,233,811,260"/>
</map>
</div>

</div>
</div>
<a id="ab0121bf0d3497aba350c96bbd431bea2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0121bf0d3497aba350c96bbd431bea2">&#9670;&nbsp;</a></span>ubifs_recover_inl_heads()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ubifs_recover_inl_heads </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>sbuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_recover_inl_heads - recover index and LPT heads. <code></code>: UBIFS file-system description object : LEB-sized buffer to use</p>
<p>This function ensures that there is no data on the flash at the index and LPT head locations.</p>
<p>This deals with the recovery of a half-completed journal commit. UBIFS is careful never to overwrite the last version of the index or the LPT. Because the index and LPT are wandering trees, data from a half-completed commit will not be referenced anywhere in UBIFS. The data will be either in LEBs that are assumed to be empty and will be unmapped anyway before use, or in the index and LPT heads.</p>
<p>This function returns %0 on success and a negative error code on failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_ab0121bf0d3497aba350c96bbd431bea2_cgraph.png" border="0" usemap="#ubifs_2recovery_8c_ab0121bf0d3497aba350c96bbd431bea2_cgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_ab0121bf0d3497aba350c96bbd431bea2_cgraph" id="ubifs_2recovery_8c_ab0121bf0d3497aba350c96bbd431bea2_cgraph">
<area shape="rect" id="node2" href="ubifs_2recovery_8c.html#aa854cba2b9edc1a50c631dd212461ab9" title="recover_head" alt="" coords="216,285,316,312"/>
<area shape="rect" id="node3" href="ubifs_2io_8c.html#ab6a2a3c4a79d6d4c52350540437d3cb3" title="ubifs_leb_read" alt="" coords="717,2084,823,2110"/>
<area shape="rect" id="node5" href="ubifs_2recovery_8c.html#ade5d36157779e5eb588cc94b1ea387b7" title="is_empty" alt="" coords="388,260,463,286"/>
<area shape="rect" id="node6" href="ubifs_2io_8c.html#ad9d3a62a61d21e1faa60cd6e630c41ac" title="ubifs_leb_unmap" alt="" coords="365,310,485,337"/>
<area shape="rect" id="node49" href="ubifs_2io_8c.html#ac70865809ab5c33c55274560e453f535" title="ubifs_leb_change" alt="" coords="364,209,487,236"/>
<area shape="rect" id="node4" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1112,1628,1184,1654"/>
<area shape="rect" id="node7" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="917,108,1036,134"/>
<area shape="rect" id="node8" href="ubifs_2debug_8c.html#a6ba17156289f8b8ecaed40dbafc04858" title="dbg_leb_unmap" alt="" coords="536,310,649,337"/>
<area shape="rect" id="node48" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="539,260,646,286"/>
<area shape="rect" id="node9" href="ubifs_2debug_8h.html#ab599356d6c84ddd2c7b9001b452c30bd" title="dbg_is_power_cut" alt="" coords="707,1045,833,1072"/>
<area shape="rect" id="node46" href="ubifs_2debug_8c.html#a67b6fc23cfbf882431d33323a03ef74c" title="power_cut_emulated" alt="" coords="699,209,841,236"/>
<area shape="rect" id="node10" href="ubifs_2debug_8h.html#aed9c32fd77ce70a2d917ab58c56189c2" title="ubifs_debugging_init" alt="" coords="907,412,1047,438"/>
<area shape="rect" id="node11" href="ubifs_2debug_8h.html#a1e62d7c391f555902a25f8060eb6f1ec" title="ubifs_debugging_exit" alt="" coords="905,462,1049,489"/>
<area shape="rect" id="node12" href="ubifs_2debug_8h.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="935,513,1018,540"/>
<area shape="rect" id="node13" href="ubifs_2debug_8h.html#a615a670f26d4407b52175ce5f3faf594" title="dbg_cstate" alt="" coords="933,564,1020,590"/>
<area shape="rect" id="node14" href="ubifs_2debug_8h.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="936,614,1017,641"/>
<area shape="rect" id="node15" href="ubifs_2debug_8h.html#a4184d82b0b2ff0fffc6ab3d4de4a1e7a" title="dbg_get_key_dump" alt="" coords="909,665,1044,692"/>
<area shape="rect" id="node16" href="ubifs_2debug_8h.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="916,716,1037,742"/>
<area shape="rect" id="node17" href="ubifs_2debug_8h.html#a6ecc9bff59f14d28615ed14fa5323681" title="ubifs_dump_inode" alt="" coords="913,766,1040,793"/>
<area shape="rect" id="node18" href="ubifs_2debug_8h.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="915,817,1039,844"/>
<area shape="rect" id="node19" href="ubifs_2debug_8h.html#acfcbe45894b3b41385c1f9891d57bb97" title="ubifs_dump_budget_req" alt="" coords="897,868,1057,894"/>
<area shape="rect" id="node20" href="ubifs_2debug_8h.html#ab351e7abb59edb97d57bd44dd83b0484" title="ubifs_dump_lstats" alt="" coords="913,918,1041,945"/>
<area shape="rect" id="node21" href="ubifs_2debug_8h.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="915,969,1039,996"/>
<area shape="rect" id="node22" href="ubifs_2debug_8h.html#ad04e55858b69b78f20ea8b0fb79f9f27" title="ubifs_dump_lprop" alt="" coords="915,1020,1039,1046"/>
<area shape="rect" id="node23" href="ubifs_2debug_8h.html#a2fa0aeaaa556f0b13d098456ef7d86d4" title="ubifs_dump_lprops" alt="" coords="911,1881,1042,1908"/>
<area shape="rect" id="node24" href="ubifs_2debug_8h.html#afc25fcc00c516fab54a12303d87bc100" title="ubifs_dump_lpt_info" alt="" coords="907,1121,1046,1148"/>
<area shape="rect" id="node25" href="ubifs_2debug_8h.html#afa1952f7d3c2c791a330e3dc245c5a83" title="ubifs_dump_leb" alt="" coords="920,1932,1033,1958"/>
<area shape="rect" id="node26" href="ubifs_2debug_8h.html#a454a80414a371832b3f68f828f6a6353" title="ubifs_dump_sleb" alt="" coords="917,1222,1037,1249"/>
<area shape="rect" id="node27" href="ubifs_2debug_8h.html#a56365d730ac6932bf3163a8ba7279779" title="ubifs_dump_znode" alt="" coords="911,1273,1042,1300"/>
<area shape="rect" id="node28" href="ubifs_2debug_8h.html#a5600b63b8362df17ed46c4e20784fb6c" title="ubifs_dump_heap" alt="" coords="915,1324,1039,1350"/>
<area shape="rect" id="node29" href="ubifs_2debug_8h.html#ab2224f946272a25cfacf2607c6502818" title="ubifs_dump_pnode" alt="" coords="911,1374,1042,1401"/>
<area shape="rect" id="node30" href="ubifs_2debug_8h.html#a6ad4e8a10c442517164e350787696d9d" title="ubifs_dump_tnc" alt="" coords="919,1425,1034,1452"/>
<area shape="rect" id="node31" href="ubifs_2debug_8h.html#a1988de032288d9afc418a9f36c0e1a38" title="ubifs_dump_index" alt="" coords="913,1476,1040,1502"/>
<area shape="rect" id="node32" href="ubifs_2debug_8h.html#a2dad580c9c3f21053039a854eb81bed2" title="ubifs_dump_lpt_lebs" alt="" coords="906,1526,1047,1553"/>
<area shape="rect" id="node33" href="ubifs_2debug_8h.html#ac9540eb544441fb116e86f4799b55265" title="dbg_walk_index" alt="" coords="919,1982,1034,2009"/>
<area shape="rect" id="node34" href="ubifs_2debug_8h.html#a42a0e664e63f651533d2a5abc23bf4da" title="dbg_save_space_info" alt="" coords="903,1628,1051,1654"/>
<area shape="rect" id="node35" href="ubifs_2debug_8h.html#ace23cd2189dd2d7a9435ddd891e9beaa" title="dbg_check_space_info" alt="" coords="899,209,1054,236"/>
<area shape="rect" id="node36" href="ubifs_2debug_8h.html#a69534405790cc12f492343243bc539a4" title="dbg_check_lprops" alt="" coords="913,260,1040,286"/>
<area shape="rect" id="node37" href="ubifs_2debug_8h.html#a725dc62445ba29e272e4ccb5b10fbc61" title="dbg_old_index_check_init" alt="" coords="891,1729,1062,1756"/>
<area shape="rect" id="node38" href="ubifs_2debug_8h.html#a23369147b6e2214867a8a650ad50ebaf" title="dbg_check_old_index" alt="" coords="903,310,1050,337"/>
<area shape="rect" id="node39" href="ubifs_2debug_8h.html#a4d24d720745a25e26d273dc892c703eb" title="dbg_check_cats" alt="" coords="918,361,1035,388"/>
<area shape="rect" id="node40" href="ubifs_2debug_8h.html#a0326c90a004af4486c5ad1dbc25baf29" title="dbg_check_ltab" alt="" coords="920,1070,1033,1097"/>
<area shape="rect" id="node41" href="ubifs_2debug_8h.html#ab2f0c34c5385c6b4af6f326fac750a70" title="dbg_chk_lpt_free_spc" alt="" coords="902,1172,1051,1198"/>
<area shape="rect" id="node42" href="ubifs_2debug_8h.html#a8743b404fd4536a6f2212846f55854d0" title="dbg_chk_lpt_sz" alt="" coords="920,1577,1033,1604"/>
<area shape="rect" id="node43" href="ubifs_2debug_8h.html#ad20ad974aa8f10603e2468787760af65" title="dbg_check_synced_i_size" alt="" coords="889,1678,1064,1705"/>
<area shape="rect" id="node44" href="ubifs_2debug_8h.html#ae64cd5f4e9b71d0d2167e1f8dafd9cd0" title="dbg_check_dir" alt="" coords="923,1780,1030,1806"/>
<area shape="rect" id="node45" href="ubifs_2debug_8h.html#a8e749de733b483ca979984b8aa078aa6" title="dbg_check_tnc" alt="" coords="921,1830,1032,1857"/>
<area shape="rect" id="node47" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="934,158,1019,185"/>
<area shape="rect" id="node50" href="ubifs_2debug_8c.html#af2ad985422103ec5e3e13776002d6ceb" title="dbg_leb_change" alt="" coords="535,209,651,236"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_ab0121bf0d3497aba350c96bbd431bea2_icgraph.png" border="0" usemap="#ubifs_2recovery_8c_ab0121bf0d3497aba350c96bbd431bea2_icgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_ab0121bf0d3497aba350c96bbd431bea2_icgraph" id="ubifs_2recovery_8c_ab0121bf0d3497aba350c96bbd431bea2_icgraph">
<area shape="rect" id="node2" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="233,5,326,32"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="217,56,342,83"/>
<area shape="rect" id="node7" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="216,208,343,235"/>
<area shape="rect" id="node3" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="403,5,512,32"/>
<area shape="rect" id="node4" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="573,5,667,32"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="396,56,519,83"/>
<area shape="rect" id="node8" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="391,107,524,133"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="411,157,504,184"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="416,208,499,235"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="413,259,502,285"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="409,309,505,336"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="406,360,509,387"/>
<area shape="rect" id="node9" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="583,107,657,133"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="572,183,668,209"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="577,233,663,260"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="716,233,816,260"/>
</map>
</div>

</div>
</div>
<a id="a1d3dc4ff452e67e327b4ad2e8888ffa4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d3dc4ff452e67e327b4ad2e8888ffa4">&#9670;&nbsp;</a></span>ubifs_recover_leb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structubifs__scan__leb.html">ubifs_scan_leb</a>* ubifs_recover_leb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>sbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>jhead</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_recover_leb - scan and recover a LEB. <code></code>: UBIFS file-system description object : LEB number : offset : LEB-sized buffer to use : journal head number this LEB belongs to (%-1 if the LEB does not belong to any journal head)</p>
<p>This function does a scan of a LEB, but caters for errors that might have been caused by the unclean unmount from which we are attempting to recover. Returns the scanned information on success and a negative error code on failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_a1d3dc4ff452e67e327b4ad2e8888ffa4_cgraph.png" border="0" usemap="#ubifs_2recovery_8c_a1d3dc4ff452e67e327b4ad2e8888ffa4_cgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_a1d3dc4ff452e67e327b4ad2e8888ffa4_cgraph" id="ubifs_2recovery_8c_a1d3dc4ff452e67e327b4ad2e8888ffa4_cgraph">
<area shape="rect" id="node2" href="ubifs_2scan_8c.html#ac9e61563282a3ab80fa1947e24f1726e" title="ubifs_start_scan" alt="" coords="185,633,304,660"/>
<area shape="rect" id="node4" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="605,456,677,482"/>
<area shape="rect" id="node5" href="ubifs_2scan_8c.html#ab974ec909e594f54f7773880688a2334" title="ubifs_scan_a_node" alt="" coords="177,177,312,204"/>
<area shape="rect" id="node22" href="ubifs_2scan_8c.html#a582c1d1b35a0fe0cd1d73f2f88adaa67" title="ubifs_add_snod" alt="" coords="188,25,301,52"/>
<area shape="rect" id="node24" href="ubifs_2recovery_8c.html#a8ecb90e06a084b7cad3a06a6231e16e4" title="is_last_write" alt="" coords="197,430,292,457"/>
<area shape="rect" id="node25" href="ubifs_2recovery_8c.html#ade5d36157779e5eb588cc94b1ea387b7" title="is_empty" alt="" coords="408,430,483,457"/>
<area shape="rect" id="node26" href="ubifs_2recovery_8c.html#a51a58f1633fe0fc0333795b1a9216aa0" title="no_more_nodes" alt="" coords="187,278,302,305"/>
<area shape="rect" id="node27" href="ubifs_2recovery_8c.html#a807fcfedd9f3b8440c4d19a2f8c31de3" title="first_non_ff" alt="" coords="201,481,288,508"/>
<area shape="rect" id="node28" href="ubifs_2recovery_8c.html#a80a185873a2bf1d5961168d93883669a" title="drop_last_group" alt="" coords="187,532,302,558"/>
<area shape="rect" id="node29" href="ubifs_2recovery_8c.html#a56c9553c0af0cde1ea496d78e0d5cc5e" title="drop_last_node" alt="" coords="189,582,300,609"/>
<area shape="rect" id="node30" href="ubifs_2recovery_8c.html#a159ee1c7bcae2070c7e9faf7c15ac7d5" title="clean_buf" alt="" coords="205,734,284,761"/>
<area shape="rect" id="node32" href="ubifs_2scan_8c.html#a7a20ae4d7200218e4b1b4ce3cd803b21" title="ubifs_end_scan" alt="" coords="188,684,301,710"/>
<area shape="rect" id="node33" href="ubifs_2recovery_8c.html#accaf4c7132be008366b00b1629c46842" title="fix_unclean_leb" alt="" coords="189,785,301,812"/>
<area shape="rect" id="node49" href="ubifs_2scan_8c.html#a18197e05567059efbb981ebe037255bb" title="ubifs_scanned_corruption" alt="" coords="360,329,531,356"/>
<area shape="rect" id="node50" href="ubifs_2scan_8c.html#a7e559a0c70f1f17d0886f600cd59a639" title="ubifs_scan_destroy" alt="" coords="177,836,312,862"/>
<area shape="rect" id="node3" href="ubifs_2io_8c.html#ab6a2a3c4a79d6d4c52350540437d3cb3" title="ubifs_leb_read" alt="" coords="392,633,499,660"/>
<area shape="rect" id="node6" href="ubifs_2scan_8c.html#a93a80ae9e3252efb52d991f4abc7152a" title="scan_padding_bytes" alt="" coords="375,177,516,204"/>
<area shape="rect" id="node7" href="ubifs_2debug_8c.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="972,76,1055,102"/>
<area shape="rect" id="node8" href="ubifs_2io_8c.html#ab9b2f0cc24eff9f69bd606979eb3a53e" title="ubifs_check_node" alt="" coords="382,278,509,305"/>
<area shape="rect" id="node9" href="ubifs_2debug_8c.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="579,253,703,280"/>
<area shape="rect" id="node10" href="ubifs_2debug_8c.html#a40190f9f60ac94040c30dbd97c73a3ca" title="dump_ch" alt="" coords="785,177,859,204"/>
<area shape="rect" id="node12" href="ubifs_2debug_8c.html#a4b30ad73e46b72b5043aa4efa7fb8d9a" title="get_key_hash" alt="" coords="771,278,873,305"/>
<area shape="rect" id="node13" href="ubifs_2debug_8c.html#af1196269cd9c24affacc60e33f960f49" title="get_key_fmt" alt="" coords="775,329,869,356"/>
<area shape="rect" id="node14" href="key_8h.html#a5611c13d648e672825da064c90c8903a" title="key_read" alt="" coords="785,126,859,153"/>
<area shape="rect" id="node15" href="ubifs_2debug_8c.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="761,228,883,254"/>
<area shape="rect" id="node21" href="misc_8h.html#a1598cadb907a20f9e5dc3e7ee74edb1d" title="ubifs_idx_branch" alt="" coords="762,380,882,406"/>
<area shape="rect" id="node11" href="ubifs_2debug_8c.html#a0137ecd738390d71f938f27be78c4477" title="dbg_gtype" alt="" coords="972,126,1055,153"/>
<area shape="rect" id="node16" href="key_8h.html#a06f47822510ef850cb7065778115453c" title="key_type" alt="" coords="976,177,1051,204"/>
<area shape="rect" id="node17" href="key_8h.html#a4a12b97ed78e138baf7886a6df7ed50f" title="key_inum" alt="" coords="974,228,1053,254"/>
<area shape="rect" id="node18" href="ubifs_2debug_8c.html#ad6af0af711fdb082f6df4eaeb4d82fe6" title="get_key_type" alt="" coords="963,278,1063,305"/>
<area shape="rect" id="node19" href="key_8h.html#acddf1ca88d72a37e06c5c608cd084656" title="key_hash" alt="" coords="974,329,1053,356"/>
<area shape="rect" id="node20" href="key_8h.html#a10c13375b52dbb12be6f9b685d1d1ba7" title="key_block" alt="" coords="973,380,1054,406"/>
<area shape="rect" id="node23" href="key_8h.html#af4813229a115f3590fe4d6dc91938244" title="invalid_key_init" alt="" coords="390,25,501,52"/>
<area shape="rect" id="node31" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="406,709,485,736"/>
<area shape="rect" id="node34" href="ubifs_2io_8c.html#ad9d3a62a61d21e1faa60cd6e630c41ac" title="ubifs_leb_unmap" alt="" coords="385,760,505,786"/>
<area shape="rect" id="node47" href="ubifs_2io_8c.html#ac70865809ab5c33c55274560e453f535" title="ubifs_leb_change" alt="" coords="384,810,507,837"/>
<area shape="rect" id="node35" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="954,734,1073,761"/>
<area shape="rect" id="node36" href="ubifs_2debug_8c.html#a6ba17156289f8b8ecaed40dbafc04858" title="dbg_leb_unmap" alt="" coords="584,734,697,761"/>
<area shape="rect" id="node46" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="587,684,694,710"/>
<area shape="rect" id="node37" href="ubifs_2debug_8h.html#ab599356d6c84ddd2c7b9001b452c30bd" title="dbg_is_power_cut" alt="" coords="759,886,885,913"/>
<area shape="rect" id="node44" href="ubifs_2debug_8c.html#a67b6fc23cfbf882431d33323a03ef74c" title="power_cut_emulated" alt="" coords="751,734,893,761"/>
<area shape="rect" id="node38" href="ubifs_2debug_8h.html#aed9c32fd77ce70a2d917ab58c56189c2" title="ubifs_debugging_init" alt="" coords="943,886,1083,913"/>
<area shape="rect" id="node39" href="ubifs_2debug_8h.html#a1e62d7c391f555902a25f8060eb6f1ec" title="ubifs_debugging_exit" alt="" coords="941,937,1085,964"/>
<area shape="rect" id="node40" href="ubifs_2debug_8h.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="972,988,1055,1014"/>
<area shape="rect" id="node41" href="ubifs_2debug_8h.html#a615a670f26d4407b52175ce5f3faf594" title="dbg_cstate" alt="" coords="970,1038,1057,1065"/>
<area shape="rect" id="node42" href="ubifs_2debug_8h.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="973,785,1054,812"/>
<area shape="rect" id="node43" href="ubifs_2debug_8h.html#a4184d82b0b2ff0fffc6ab3d4de4a1e7a" title="dbg_get_key_dump" alt="" coords="946,836,1081,862"/>
<area shape="rect" id="node45" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="971,684,1056,710"/>
<area shape="rect" id="node48" href="ubifs_2debug_8c.html#af2ad985422103ec5e3e13776002d6ceb" title="dbg_leb_change" alt="" coords="583,886,699,913"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_a1d3dc4ff452e67e327b4ad2e8888ffa4_icgraph.png" border="0" usemap="#ubifs_2recovery_8c_a1d3dc4ff452e67e327b4ad2e8888ffa4_icgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_a1d3dc4ff452e67e327b4ad2e8888ffa4_icgraph" id="ubifs_2recovery_8c_a1d3dc4ff452e67e327b4ad2e8888ffa4_icgraph">
<area shape="rect" id="node2" href="ubifs_2orphan_8c.html#a56d0d86cd1db3d34e52d5b91784d55da" title="kill_orphans" alt="" coords="206,5,297,32"/>
<area shape="rect" id="node7" href="ubifs_8h.html#a42393d54bbb6a1e25d5dde1f396b31f3" title="ubifs_recover_log_leb" alt="" coords="177,107,325,133"/>
<area shape="rect" id="node10" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="383,196,510,223"/>
<area shape="rect" id="node21" href="replay_8c.html#a08ca5de44800c3270db809cec539c7e2" title="replay_bud" alt="" coords="209,56,294,83"/>
<area shape="rect" id="node3" href="ubifs_8h.html#a2c245b49b58cf15dd381f99530af6807" title="ubifs_mount_orphans" alt="" coords="373,5,520,32"/>
<area shape="rect" id="node4" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="755,31,848,57"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="897,31,1007,57"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="1055,31,1148,57"/>
<area shape="rect" id="node8" href="replay_8c.html#afc69bf474cbe8a69ea2bfea0494745df" title="replay_log_leb" alt="" coords="394,107,499,133"/>
<area shape="rect" id="node9" href="ubifs_8h.html#af76f722fe22c9c52675c75c16369d414" title="ubifs_replay_journal" alt="" coords="568,56,705,83"/>
<area shape="rect" id="node11" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="570,208,703,235"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="590,259,683,285"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="595,309,678,336"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="592,360,681,387"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="589,107,685,133"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="585,157,688,184"/>
<area shape="rect" id="node12" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="765,208,838,235"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="753,284,849,311"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="758,335,845,361"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="902,335,1002,361"/>
<area shape="rect" id="node22" href="replay_8c.html#aa341c5f3914165aaeb6b9e63130cbf98" title="replay_buds" alt="" coords="401,56,493,83"/>
</map>
</div>

</div>
</div>
<a id="a42393d54bbb6a1e25d5dde1f396b31f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42393d54bbb6a1e25d5dde1f396b31f3">&#9670;&nbsp;</a></span>ubifs_recover_log_leb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structubifs__scan__leb.html">ubifs_scan_leb</a>* ubifs_recover_log_leb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>sbuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_recover_log_leb - scan and recover a log LEB. <code></code>: UBIFS file-system description object : LEB number : offset : LEB-sized buffer to use</p>
<p>This function does a scan of a LEB, but caters for errors that might have been caused by unclean reboots from which we are attempting to recover (assume that only the last log LEB can be corrupted by an unclean reboot).</p>
<p>This function returns %0 on success and a negative error code on failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_a42393d54bbb6a1e25d5dde1f396b31f3_cgraph.png" border="0" usemap="#ubifs_2recovery_8c_a42393d54bbb6a1e25d5dde1f396b31f3_cgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_a42393d54bbb6a1e25d5dde1f396b31f3_cgraph" id="ubifs_2recovery_8c_a42393d54bbb6a1e25d5dde1f396b31f3_cgraph">
<area shape="rect" id="node2" href="ubifs_2scan_8c.html#a1689915d09ec86f76b30ee598b10f34e" title="ubifs_scan" alt="" coords="221,620,306,647"/>
<area shape="rect" id="node5" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="807,620,879,647"/>
<area shape="rect" id="node27" href="ubifs_2scan_8c.html#a7e559a0c70f1f17d0886f600cd59a639" title="ubifs_scan_destroy" alt="" coords="391,544,526,571"/>
<area shape="rect" id="node28" href="ubifs_2recovery_8c.html#a9ce17b89aee2271a22804d44fcc78aa6" title="get_cs_sqnum" alt="" coords="210,392,317,419"/>
<area shape="rect" id="node29" href="ubifs_2recovery_8c.html#a1d3dc4ff452e67e327b4ad2e8888ffa4" title="ubifs_recover_leb" alt="" coords="201,873,325,900"/>
<area shape="rect" id="node3" href="ubifs_2scan_8c.html#ac9e61563282a3ab80fa1947e24f1726e" title="ubifs_start_scan" alt="" coords="399,747,518,773"/>
<area shape="rect" id="node6" href="ubifs_2scan_8c.html#ab974ec909e594f54f7773880688a2334" title="ubifs_scan_a_node" alt="" coords="391,341,526,368"/>
<area shape="rect" id="node23" href="ubifs_2scan_8c.html#a582c1d1b35a0fe0cd1d73f2f88adaa67" title="ubifs_add_snod" alt="" coords="402,797,515,824"/>
<area shape="rect" id="node25" href="ubifs_2scan_8c.html#a7a20ae4d7200218e4b1b4ce3cd803b21" title="ubifs_end_scan" alt="" coords="402,645,515,672"/>
<area shape="rect" id="node26" href="ubifs_2scan_8c.html#a18197e05567059efbb981ebe037255bb" title="ubifs_scanned_corruption" alt="" coords="373,696,544,723"/>
<area shape="rect" id="node4" href="ubifs_2io_8c.html#ab6a2a3c4a79d6d4c52350540437d3cb3" title="ubifs_leb_read" alt="" coords="609,671,716,697"/>
<area shape="rect" id="node7" href="ubifs_2scan_8c.html#a93a80ae9e3252efb52d991f4abc7152a" title="scan_padding_bytes" alt="" coords="592,291,733,317"/>
<area shape="rect" id="node8" href="ubifs_2debug_8c.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="1175,259,1257,285"/>
<area shape="rect" id="node9" href="ubifs_2io_8c.html#ab9b2f0cc24eff9f69bd606979eb3a53e" title="ubifs_check_node" alt="" coords="599,341,726,368"/>
<area shape="rect" id="node10" href="ubifs_2debug_8c.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="781,323,905,349"/>
<area shape="rect" id="node11" href="ubifs_2debug_8c.html#a40190f9f60ac94040c30dbd97c73a3ca" title="dump_ch" alt="" coords="987,303,1062,329"/>
<area shape="rect" id="node13" href="ubifs_2debug_8c.html#a4b30ad73e46b72b5043aa4efa7fb8d9a" title="get_key_hash" alt="" coords="973,353,1076,380"/>
<area shape="rect" id="node14" href="ubifs_2debug_8c.html#af1196269cd9c24affacc60e33f960f49" title="get_key_fmt" alt="" coords="977,404,1072,431"/>
<area shape="rect" id="node15" href="key_8h.html#a5611c13d648e672825da064c90c8903a" title="key_read" alt="" coords="987,639,1062,665"/>
<area shape="rect" id="node16" href="ubifs_2debug_8c.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="964,132,1085,159"/>
<area shape="rect" id="node22" href="misc_8h.html#a1598cadb907a20f9e5dc3e7ee74edb1d" title="ubifs_idx_branch" alt="" coords="965,252,1085,279"/>
<area shape="rect" id="node12" href="ubifs_2debug_8c.html#a0137ecd738390d71f938f27be78c4477" title="dbg_gtype" alt="" coords="1175,309,1257,336"/>
<area shape="rect" id="node17" href="key_8h.html#a06f47822510ef850cb7065778115453c" title="key_type" alt="" coords="1179,107,1253,133"/>
<area shape="rect" id="node18" href="key_8h.html#a4a12b97ed78e138baf7886a6df7ed50f" title="key_inum" alt="" coords="1177,157,1255,184"/>
<area shape="rect" id="node19" href="ubifs_2debug_8c.html#ad6af0af711fdb082f6df4eaeb4d82fe6" title="get_key_type" alt="" coords="1166,208,1266,235"/>
<area shape="rect" id="node20" href="key_8h.html#acddf1ca88d72a37e06c5c608cd084656" title="key_hash" alt="" coords="1177,5,1255,32"/>
<area shape="rect" id="node21" href="key_8h.html#a10c13375b52dbb12be6f9b685d1d1ba7" title="key_block" alt="" coords="1175,56,1257,83"/>
<area shape="rect" id="node24" href="key_8h.html#af4813229a115f3590fe4d6dc91938244" title="invalid_key_init" alt="" coords="607,772,718,799"/>
<area shape="rect" id="node30" href="ubifs_2recovery_8c.html#a8ecb90e06a084b7cad3a06a6231e16e4" title="is_last_write" alt="" coords="411,1000,506,1027"/>
<area shape="rect" id="node31" href="ubifs_2recovery_8c.html#ade5d36157779e5eb588cc94b1ea387b7" title="is_empty" alt="" coords="625,1000,700,1027"/>
<area shape="rect" id="node32" href="ubifs_2recovery_8c.html#a51a58f1633fe0fc0333795b1a9216aa0" title="no_more_nodes" alt="" coords="401,899,516,925"/>
<area shape="rect" id="node33" href="ubifs_2recovery_8c.html#a807fcfedd9f3b8440c4d19a2f8c31de3" title="first_non_ff" alt="" coords="415,1051,502,1077"/>
<area shape="rect" id="node34" href="ubifs_2recovery_8c.html#a80a185873a2bf1d5961168d93883669a" title="drop_last_group" alt="" coords="401,1152,516,1179"/>
<area shape="rect" id="node35" href="ubifs_2recovery_8c.html#a56c9553c0af0cde1ea496d78e0d5cc5e" title="drop_last_node" alt="" coords="403,949,514,976"/>
<area shape="rect" id="node36" href="ubifs_2recovery_8c.html#a159ee1c7bcae2070c7e9faf7c15ac7d5" title="clean_buf" alt="" coords="419,1203,498,1229"/>
<area shape="rect" id="node38" href="ubifs_2recovery_8c.html#accaf4c7132be008366b00b1629c46842" title="fix_unclean_leb" alt="" coords="403,1253,515,1280"/>
<area shape="rect" id="node37" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="623,1177,702,1204"/>
<area shape="rect" id="node39" href="ubifs_2io_8c.html#ad9d3a62a61d21e1faa60cd6e630c41ac" title="ubifs_leb_unmap" alt="" coords="603,1279,723,1305"/>
<area shape="rect" id="node49" href="ubifs_2io_8c.html#ac70865809ab5c33c55274560e453f535" title="ubifs_leb_change" alt="" coords="601,1228,724,1255"/>
<area shape="rect" id="node40" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="1157,1253,1275,1280"/>
<area shape="rect" id="node41" href="ubifs_2debug_8c.html#a6ba17156289f8b8ecaed40dbafc04858" title="dbg_leb_unmap" alt="" coords="787,1355,900,1381"/>
<area shape="rect" id="node48" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="790,1203,897,1229"/>
<area shape="rect" id="node42" href="ubifs_2debug_8h.html#ab599356d6c84ddd2c7b9001b452c30bd" title="dbg_is_power_cut" alt="" coords="961,1355,1088,1381"/>
<area shape="rect" id="node46" href="ubifs_2debug_8c.html#a67b6fc23cfbf882431d33323a03ef74c" title="power_cut_emulated" alt="" coords="953,1253,1096,1280"/>
<area shape="rect" id="node43" href="ubifs_2debug_8h.html#aed9c32fd77ce70a2d917ab58c56189c2" title="ubifs_debugging_init" alt="" coords="1146,1355,1286,1381"/>
<area shape="rect" id="node44" href="ubifs_2debug_8h.html#a1e62d7c391f555902a25f8060eb6f1ec" title="ubifs_debugging_exit" alt="" coords="1144,1405,1288,1432"/>
<area shape="rect" id="node45" href="ubifs_2debug_8h.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="1175,1304,1257,1331"/>
<area shape="rect" id="node47" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="1173,1203,1259,1229"/>
<area shape="rect" id="node50" href="ubifs_2debug_8c.html#af2ad985422103ec5e3e13776002d6ceb" title="dbg_leb_change" alt="" coords="785,1253,901,1280"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_a42393d54bbb6a1e25d5dde1f396b31f3_icgraph.png" border="0" usemap="#ubifs_2recovery_8c_a42393d54bbb6a1e25d5dde1f396b31f3_icgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_a42393d54bbb6a1e25d5dde1f396b31f3_icgraph" id="ubifs_2recovery_8c_a42393d54bbb6a1e25d5dde1f396b31f3_icgraph">
<area shape="rect" id="node2" href="replay_8c.html#afc69bf474cbe8a69ea2bfea0494745df" title="replay_log_leb" alt="" coords="212,56,317,83"/>
<area shape="rect" id="node7" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="201,157,328,184"/>
<area shape="rect" id="node3" href="ubifs_8h.html#af76f722fe22c9c52675c75c16369d414" title="ubifs_replay_journal" alt="" coords="376,5,513,32"/>
<area shape="rect" id="node4" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="563,5,656,32"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="705,5,815,32"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="863,5,956,32"/>
<area shape="rect" id="node8" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="378,56,511,83"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="398,107,491,133"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="403,157,486,184"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="400,208,489,235"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="397,259,493,285"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="393,309,496,336"/>
<area shape="rect" id="node9" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="573,56,646,83"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="561,132,657,159"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="566,183,653,209"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="710,183,810,209"/>
</map>
</div>

</div>
</div>
<a id="a11a5ff140312c68bb4c5e44593d11b90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11a5ff140312c68bb4c5e44593d11b90">&#9670;&nbsp;</a></span>ubifs_recover_master_node()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ubifs_recover_master_node </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_recover_master_node - recover the master node. <code></code>: UBIFS file-system description object</p>
<p>This function recovers the master node from corruption that may occur due to an unclean unmount.</p>
<p>This function returns %0 on success and a negative error code on failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_a11a5ff140312c68bb4c5e44593d11b90_cgraph.png" border="0" usemap="#ubifs_2recovery_8c_a11a5ff140312c68bb4c5e44593d11b90_cgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_a11a5ff140312c68bb4c5e44593d11b90_cgraph" id="ubifs_2recovery_8c_a11a5ff140312c68bb4c5e44593d11b90_cgraph">
<area shape="rect" id="node2" href="ubifs_2recovery_8c.html#a9a01d76e5a65d73c6c44c1171759a231" title="get_master_node" alt="" coords="617,226,740,252"/>
<area shape="rect" id="node4" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1214,327,1286,354"/>
<area shape="rect" id="node9" href="ubifs_2debug_8c.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="1188,276,1312,303"/>
<area shape="rect" id="node23" href="ubifs_2misc_8c.html#a49c185988382ac9b2f28935dd44a0441" title="ubifs_msg" alt="" coords="270,403,353,430"/>
<area shape="rect" id="node24" href="ubifs_2recovery_8c.html#aecb3cf138b2d6e0039658a633e8a9d45" title="write_rcvrd_mst_node" alt="" coords="236,1138,387,1164"/>
<area shape="rect" id="node3" href="ubifs_2io_8c.html#ab6a2a3c4a79d6d4c52350540437d3cb3" title="ubifs_leb_read" alt="" coords="806,251,913,278"/>
<area shape="rect" id="node5" href="ubifs_2scan_8c.html#ab974ec909e594f54f7773880688a2334" title="ubifs_scan_a_node" alt="" coords="792,124,927,151"/>
<area shape="rect" id="node22" href="ubifs_2recovery_8c.html#ade5d36157779e5eb588cc94b1ea387b7" title="is_empty" alt="" coords="822,200,897,227"/>
<area shape="rect" id="node6" href="ubifs_2scan_8c.html#a93a80ae9e3252efb52d991f4abc7152a" title="scan_padding_bytes" alt="" coords="988,150,1129,176"/>
<area shape="rect" id="node7" href="ubifs_2debug_8c.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="1539,74,1622,100"/>
<area shape="rect" id="node8" href="ubifs_2io_8c.html#ab9b2f0cc24eff9f69bd606979eb3a53e" title="ubifs_check_node" alt="" coords="995,99,1122,126"/>
<area shape="rect" id="node10" href="ubifs_2debug_8c.html#a40190f9f60ac94040c30dbd97c73a3ca" title="dump_ch" alt="" coords="1385,276,1459,303"/>
<area shape="rect" id="node12" href="ubifs_2debug_8c.html#a4b30ad73e46b72b5043aa4efa7fb8d9a" title="get_key_hash" alt="" coords="1371,327,1473,354"/>
<area shape="rect" id="node13" href="ubifs_2debug_8c.html#af1196269cd9c24affacc60e33f960f49" title="get_key_fmt" alt="" coords="1375,378,1469,404"/>
<area shape="rect" id="node14" href="key_8h.html#a5611c13d648e672825da064c90c8903a" title="key_read" alt="" coords="1385,479,1459,506"/>
<area shape="rect" id="node15" href="ubifs_2debug_8c.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="1361,428,1483,455"/>
<area shape="rect" id="node21" href="misc_8h.html#a1598cadb907a20f9e5dc3e7ee74edb1d" title="ubifs_idx_branch" alt="" coords="1362,226,1482,252"/>
<area shape="rect" id="node11" href="ubifs_2debug_8c.html#a0137ecd738390d71f938f27be78c4477" title="dbg_gtype" alt="" coords="1539,276,1622,303"/>
<area shape="rect" id="node16" href="key_8h.html#a06f47822510ef850cb7065778115453c" title="key_type" alt="" coords="1543,530,1618,556"/>
<area shape="rect" id="node17" href="key_8h.html#a4a12b97ed78e138baf7886a6df7ed50f" title="key_inum" alt="" coords="1541,428,1620,455"/>
<area shape="rect" id="node18" href="ubifs_2debug_8c.html#ad6af0af711fdb082f6df4eaeb4d82fe6" title="get_key_type" alt="" coords="1531,479,1631,506"/>
<area shape="rect" id="node19" href="key_8h.html#acddf1ca88d72a37e06c5c608cd084656" title="key_hash" alt="" coords="1541,580,1620,607"/>
<area shape="rect" id="node20" href="key_8h.html#a10c13375b52dbb12be6f9b685d1d1ba7" title="key_block" alt="" coords="1540,378,1621,404"/>
<area shape="rect" id="node25" href="ubifs_2io_8c.html#acfc2ca3ffa8d094855c2e59551f3a767" title="ubifs_prepare_node" alt="" coords="435,1264,569,1291"/>
<area shape="rect" id="node30" href="ubifs_2io_8c.html#ac70865809ab5c33c55274560e453f535" title="ubifs_leb_change" alt="" coords="441,1138,563,1164"/>
<area shape="rect" id="node26" href="ubifs_2io_8c.html#a0b3f089c430db97bbc68e362dc7867c8" title="next_sqnum" alt="" coords="632,1264,725,1291"/>
<area shape="rect" id="node29" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="639,1315,718,1342"/>
<area shape="rect" id="node27" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="806,1264,913,1291"/>
<area shape="rect" id="node28" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="1016,1315,1101,1342"/>
<area shape="rect" id="node31" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="999,1264,1118,1291"/>
<area shape="rect" id="node32" href="ubifs_2debug_8c.html#af2ad985422103ec5e3e13776002d6ceb" title="dbg_leb_change" alt="" coords="621,1112,737,1139"/>
<area shape="rect" id="node33" href="ubifs_2debug_8h.html#ab599356d6c84ddd2c7b9001b452c30bd" title="dbg_is_power_cut" alt="" coords="796,859,923,886"/>
<area shape="rect" id="node50" href="ubifs_2debug_8c.html#a67b6fc23cfbf882431d33323a03ef74c" title="power_cut_emulated" alt="" coords="788,1214,931,1240"/>
<area shape="rect" id="node34" href="ubifs_2debug_8h.html#aed9c32fd77ce70a2d917ab58c56189c2" title="ubifs_debugging_init" alt="" coords="989,910,1129,936"/>
<area shape="rect" id="node35" href="ubifs_2debug_8h.html#a1e62d7c391f555902a25f8060eb6f1ec" title="ubifs_debugging_exit" alt="" coords="987,960,1131,987"/>
<area shape="rect" id="node36" href="ubifs_2debug_8h.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="1017,1011,1100,1038"/>
<area shape="rect" id="node37" href="ubifs_2debug_8h.html#a615a670f26d4407b52175ce5f3faf594" title="dbg_cstate" alt="" coords="1015,1062,1102,1088"/>
<area shape="rect" id="node38" href="ubifs_2debug_8h.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="1018,555,1099,582"/>
<area shape="rect" id="node39" href="ubifs_2debug_8h.html#a4184d82b0b2ff0fffc6ab3d4de4a1e7a" title="dbg_get_key_dump" alt="" coords="991,606,1126,632"/>
<area shape="rect" id="node40" href="ubifs_2debug_8h.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="1361,530,1483,556"/>
<area shape="rect" id="node41" href="ubifs_2debug_8h.html#a6ecc9bff59f14d28615ed14fa5323681" title="ubifs_dump_inode" alt="" coords="1187,834,1313,860"/>
<area shape="rect" id="node42" href="ubifs_2debug_8h.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="1188,378,1312,404"/>
<area shape="rect" id="node43" href="ubifs_2debug_8h.html#acfcbe45894b3b41385c1f9891d57bb97" title="ubifs_dump_budget_req" alt="" coords="979,656,1139,683"/>
<area shape="rect" id="node44" href="ubifs_2debug_8h.html#ab351e7abb59edb97d57bd44dd83b0484" title="ubifs_dump_lstats" alt="" coords="995,707,1123,734"/>
<area shape="rect" id="node45" href="ubifs_2debug_8h.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="997,758,1121,784"/>
<area shape="rect" id="node46" href="ubifs_2debug_8h.html#ad04e55858b69b78f20ea8b0fb79f9f27" title="ubifs_dump_lprop" alt="" coords="997,808,1121,835"/>
<area shape="rect" id="node47" href="ubifs_2debug_8h.html#a2fa0aeaaa556f0b13d098456ef7d86d4" title="ubifs_dump_lprops" alt="" coords="993,504,1124,531"/>
<area shape="rect" id="node48" href="ubifs_2debug_8h.html#afc25fcc00c516fab54a12303d87bc100" title="ubifs_dump_lpt_info" alt="" coords="989,859,1128,886"/>
<area shape="rect" id="node49" href="ubifs_2debug_8h.html#afa1952f7d3c2c791a330e3dc245c5a83" title="ubifs_dump_leb" alt="" coords="1002,302,1115,328"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_a11a5ff140312c68bb4c5e44593d11b90_icgraph.png" border="0" usemap="#ubifs_2recovery_8c_a11a5ff140312c68bb4c5e44593d11b90_icgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_a11a5ff140312c68bb4c5e44593d11b90_icgraph" id="ubifs_2recovery_8c_a11a5ff140312c68bb4c5e44593d11b90_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#ac45820de3d377c5a1f29a160f5fb0d77" title="ubifs_read_master" alt="" coords="236,56,365,83"/>
<area shape="rect" id="node6" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="237,157,364,184"/>
<area shape="rect" id="node3" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="433,5,527,32"/>
<area shape="rect" id="node4" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="595,5,704,32"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="755,5,849,32"/>
<area shape="rect" id="node7" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="413,56,547,83"/>
<area shape="rect" id="node9" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="433,107,527,133"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="439,157,521,184"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="435,208,525,235"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="432,259,528,285"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="429,309,531,336"/>
<area shape="rect" id="node8" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="613,56,686,83"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="601,132,697,159"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="606,183,693,209"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="752,183,852,209"/>
</map>
</div>

</div>
</div>
<a id="a20e75fbfb42bc7cfecf3b62ab3f12f8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20e75fbfb42bc7cfecf3b62ab3f12f8e">&#9670;&nbsp;</a></span>ubifs_recover_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ubifs_recover_size </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_recover_size - recover inode size. <code></code>: UBIFS file-system description object</p>
<p>This function attempts to fix inode size discrepancies identified by the '<a class="el" href="ubifs_2recovery_8c.html#a88dd4e25e224557f93cba67c93532e0a">ubifs_recover_size_accum()</a>' function.</p>
<p>This functions returns %0 on success and a negative error code on failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_a20e75fbfb42bc7cfecf3b62ab3f12f8e_cgraph.png" border="0" usemap="#ubifs_2recovery_8c_a20e75fbfb42bc7cfecf3b62ab3f12f8e_cgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_a20e75fbfb42bc7cfecf3b62ab3f12f8e_cgraph" id="ubifs_2recovery_8c_a20e75fbfb42bc7cfecf3b62ab3f12f8e_cgraph">
<area shape="rect" id="node2" href="key_8h.html#a60df8426bc46e1074661d077542ea933" title="ino_key_init" alt="" coords="622,1823,713,1849"/>
<area shape="rect" id="node3" href="misc_8h.html#af034d326935da469d5de92c07137b59a" title="ubifs_tnc_lookup" alt="" coords="399,1063,519,1089"/>
<area shape="rect" id="node16" href="tnc_8c.html#a928b6fd97b873a391e906fa28720273e" title="ubifs_tnc_remove_ino" alt="" coords="184,632,333,659"/>
<area shape="rect" id="node25" href="inode_8c.html#a378733dcbf0fb08359b9a02145ac8fc3" title="iput" alt="" coords="857,835,900,861"/>
<area shape="rect" id="node37" href="ubifs_2super_8c.html#ad09a32d85c773fd7364b69ee1f32b61c" title="ubifs_iget" alt="" coords="219,1316,298,1343"/>
<area shape="rect" id="node39" href="misc_8h.html#a1d3fdeae8e4ff85d7b3581a96bb4ef49" title="ubifs_inode" alt="" coords="623,1443,711,1469"/>
<area shape="rect" id="node48" href="ubifs_2recovery_8c.html#a9d91d461205445e4f0500381ff4ffd82" title="fix_size_in_place" alt="" coords="398,1677,521,1704"/>
<area shape="rect" id="node4" href="tnc_8c.html#a93e762f5309412966e944b237a2c03c3" title="ubifs_tnc_locate" alt="" coords="609,1088,726,1115"/>
<area shape="rect" id="node5" href="tnc_8c.html#a2004703a60d098f1644d4f3e25338759" title="ubifs_lookup_level0" alt="" coords="811,531,947,557"/>
<area shape="rect" id="node7" href="key_8h.html#a391b7c6e47045b125899fd494b93b2ed" title="is_hash_key" alt="" coords="1034,581,1129,608"/>
<area shape="rect" id="node8" href="tnc_8c.html#add8ba6d4ce8281dbb79e417150da8e4e" title="tnc_read_hashed_node" alt="" coords="801,784,957,811"/>
<area shape="rect" id="node9" href="tnc_8c.html#a74144891470c972de07b035100bdba69" title="fallible_read_node" alt="" coords="1018,784,1145,811"/>
<area shape="rect" id="node11" href="tnc__misc_8c.html#a9e631b2ac150afe245c06afae9abe5e4" title="ubifs_tnc_read_node" alt="" coords="1010,1088,1153,1115"/>
<area shape="rect" id="node12" href="ubifs_2log_8c.html#adb9dc523cdf72cfa612382b02651778b" title="ubifs_get_wbuf" alt="" coords="1209,1139,1320,1165"/>
<area shape="rect" id="node15" href="tnc_8c.html#abd5f32bdeedb5786676c542035310ccc" title="maybe_leb_gced" alt="" coords="819,1189,939,1216"/>
<area shape="rect" id="node6" href="key_8h.html#a06f47822510ef850cb7065778115453c" title="key_type" alt="" coords="1227,581,1302,608"/>
<area shape="rect" id="node10" href="key_8h.html#a5611c13d648e672825da064c90c8903a" title="key_read" alt="" coords="1375,1037,1449,1064"/>
<area shape="rect" id="node13" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1229,1620,1301,1647"/>
<area shape="rect" id="node14" href="ubifs_2debug_8c.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="1203,1189,1327,1216"/>
<area shape="rect" id="node17" href="key_8h.html#a837f3539f12eddd0ac7ef6595da85d13" title="lowest_xent_key" alt="" coords="399,581,519,608"/>
<area shape="rect" id="node18" href="tnc_8c.html#aab11d1b085510e4c3a49e8ea79e84b14" title="ubifs_tnc_next_ent" alt="" coords="601,531,733,557"/>
<area shape="rect" id="node23" href="ubifs_8h.html#aeff1ab85b59329875a7084014802262c" title="ubifs_evict_xattr_inode" alt="" coords="381,860,537,887"/>
<area shape="rect" id="node29" href="tnc_8c.html#a45f37bcb32fdd0e4c25fca00b7a66198" title="ubifs_tnc_remove_nm" alt="" coords="592,176,743,203"/>
<area shape="rect" id="node34" href="key_8h.html#a6ac363a71458b8fc9f6983ac3ce0c5c3" title="lowest_ino_key" alt="" coords="403,632,515,659"/>
<area shape="rect" id="node35" href="key_8h.html#a9d33aa154841c271b5a27f1c03d9f37d" title="highest_ino_key" alt="" coords="401,683,517,709"/>
<area shape="rect" id="node36" href="tnc_8c.html#aba3e5b7438f8f8463357069869364077" title="ubifs_tnc_remove_range" alt="" coords="585,277,749,304"/>
<area shape="rect" id="node19" href="tnc_8c.html#ae4be79a5c50df84c2528fff0e619b5ca" title="fallible_resolve_collision" alt="" coords="797,277,960,304"/>
<area shape="rect" id="node20" href="tnc_8c.html#aa6a0a93befc7348c0e11ee3a038d8d81" title="tnc_next" alt="" coords="1045,353,1117,380"/>
<area shape="rect" id="node21" href="tnc_8c.html#aacbd9954b161bf32cc3317abd3080f83" title="resolve_collision" alt="" coords="819,379,938,405"/>
<area shape="rect" id="node22" href="key_8h.html#a4a12b97ed78e138baf7886a6df7ed50f" title="key_inum" alt="" coords="839,632,918,659"/>
<area shape="rect" id="node24" href="inode_8c.html#afeec9db8a05732a90bb418fb4f08112a" title="ilookup" alt="" coords="636,885,699,912"/>
<area shape="rect" id="node28" href="inode_8c.html#a3988783ee2de89674d83e4e86080d792" title="clear_nlink" alt="" coords="625,1037,709,1064"/>
<area shape="rect" id="node27" href="debugfs_2inode_8c.html#a16e485b5debd4cd96a200844c38df190" title="EXPORT_SYMBOL" alt="" coords="1012,987,1151,1013"/>
<area shape="rect" id="node26" href="inode_8c.html#a7e99b25ac29d19bc82fbddcb773c4f25" title="iput_final" alt="" coords="1044,835,1119,861"/>
<area shape="rect" id="node30" href="tnc_8c.html#af871df87e75b12ea907320baac2614d5" title="lookup_level0_dirty" alt="" coords="812,125,945,152"/>
<area shape="rect" id="node31" href="misc_8h.html#abe5c86108a05199a899138767ca1f42a" title="ubifs_zn_dirty" alt="" coords="1213,125,1316,152"/>
<area shape="rect" id="node32" href="tnc_8c.html#a609646516a8a0f3fd9f2b2a1a1849737" title="dirty_cow_bottom_up" alt="" coords="1008,75,1155,101"/>
<area shape="rect" id="node33" href="tnc_8c.html#a6c4894fa7f0b1e5bf45d6168b302fdce" title="tnc_delete" alt="" coords="837,176,920,203"/>
<area shape="rect" id="node38" href="inode_8c.html#a2e4fab3a29971a7bc96043a5dbcd77a3" title="iget_locked" alt="" coords="623,987,711,1013"/>
<area shape="rect" id="node40" href="inode_8c.html#a01ed868f59230449a75b85f7157efd95" title="set_nlink" alt="" coords="422,1113,497,1140"/>
<area shape="rect" id="node41" href="ubifs_2super_8c.html#ab61ad4dbcab172deeedbd764f1e3b663" title="validate_inode" alt="" coords="407,1569,512,1596"/>
<area shape="rect" id="node43" href="inode_8c.html#aa992afd465d948c7fca769d396933c98" title="init_special_inode" alt="" coords="816,1341,941,1368"/>
<area shape="rect" id="node44" href="ubifs_2ioctl_8c.html#a710028854a0cfc73a5d2d5b4e1b6417f" title="ubifs_set_inode_flags" alt="" coords="385,1367,533,1393"/>
<area shape="rect" id="node45" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="603,1215,732,1241"/>
<area shape="rect" id="node46" href="ubifs_2debug_8c.html#a6ecc9bff59f14d28615ed14fa5323681" title="ubifs_dump_inode" alt="" coords="396,1316,523,1343"/>
<area shape="rect" id="node47" href="bad__inode_8c.html#a8c027cf52e2b7669b11b0bfa09bbcd45" title="iget_failed" alt="" coords="419,1164,500,1191"/>
<area shape="rect" id="node42" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="625,1671,710,1697"/>
<area shape="rect" id="node49" href="ubifs_2io_8c.html#ab6a2a3c4a79d6d4c52350540437d3cb3" title="ubifs_leb_read" alt="" coords="1028,1683,1135,1709"/>
<area shape="rect" id="node50" href="ubifs_2io_8c.html#ac70865809ab5c33c55274560e453f535" title="ubifs_leb_change" alt="" coords="1020,1759,1143,1785"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_a20e75fbfb42bc7cfecf3b62ab3f12f8e_icgraph.png" border="0" usemap="#ubifs_2recovery_8c_a20e75fbfb42bc7cfecf3b62ab3f12f8e_icgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_a20e75fbfb42bc7cfecf3b62ab3f12f8e_icgraph" id="ubifs_2recovery_8c_a20e75fbfb42bc7cfecf3b62ab3f12f8e_icgraph">
<area shape="rect" id="node2" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="201,5,294,32"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="185,56,310,83"/>
<area shape="rect" id="node7" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="184,208,311,235"/>
<area shape="rect" id="node3" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="371,5,480,32"/>
<area shape="rect" id="node4" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="541,5,635,32"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="364,56,487,83"/>
<area shape="rect" id="node8" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="359,107,492,133"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="379,157,472,184"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="384,208,467,235"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="381,259,470,285"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="377,309,473,336"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="374,360,477,387"/>
<area shape="rect" id="node9" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="551,107,625,133"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="540,183,636,209"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="545,233,631,260"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="684,233,784,260"/>
</map>
</div>

</div>
</div>
<a id="a88dd4e25e224557f93cba67c93532e0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88dd4e25e224557f93cba67c93532e0a">&#9670;&nbsp;</a></span>ubifs_recover_size_accum()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ubifs_recover_size_accum </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">union <a class="el" href="unionubifs__key.html">ubifs_key</a> *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>deletion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t&#160;</td>
          <td class="paramname"><em>new_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_recover_size_accum - accumulate inode sizes for recovery. <code></code>: UBIFS file-system description object : node key : node is for a deletion : inode size</p>
<p>This function has two purposes: 1) to ensure there are no data nodes that fall outside the inode size 2) to ensure there are no data nodes for inodes that do not exist To accomplish those purposes, a rb-tree is constructed containing an entry for each inode number in the journal that has not been deleted, and recording the size from the inode node, the maximum size of any data node (also altered by truncations) and a flag indicating a inode number for which no inode node was present in the journal.</p>
<p>Note that there is still the possibility that there are data nodes that have been committed that are beyond the inode size, however the only way to find them would be to scan the entire index. Alternatively, some provision could be made to record the size of inodes at the start of commit, which would seem very cumbersome for a scenario that is quite unlikely and the only negative consequence of which is wasted space.</p>
<p>This functions returns %0 on success and a negative error code on failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_a88dd4e25e224557f93cba67c93532e0a_cgraph.png" border="0" usemap="#ubifs_2recovery_8c_a88dd4e25e224557f93cba67c93532e0a_cgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_a88dd4e25e224557f93cba67c93532e0a_cgraph" id="ubifs_2recovery_8c_a88dd4e25e224557f93cba67c93532e0a_cgraph">
<area shape="rect" id="node2" href="key_8h.html#a4a12b97ed78e138baf7886a6df7ed50f" title="key_inum" alt="" coords="189,5,268,32"/>
<area shape="rect" id="node3" href="key_8h.html#a06f47822510ef850cb7065778115453c" title="key_type" alt="" coords="191,56,266,83"/>
<area shape="rect" id="node4" href="ubifs_2recovery_8c.html#a93e3361d5b4ba48167d1aadf3a45e724" title="remove_ino" alt="" coords="184,107,273,133"/>
<area shape="rect" id="node5" href="ubifs_2recovery_8c.html#a574f611c4294ffdb6ff758f549cd798e" title="find_ino" alt="" coords="321,132,388,159"/>
<area shape="rect" id="node6" href="ubifs_2recovery_8c.html#ac39806a2c7eab3c00600eeb60b73daf0" title="add_ino" alt="" coords="195,208,262,235"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_a88dd4e25e224557f93cba67c93532e0a_icgraph.png" border="0" usemap="#ubifs_2recovery_8c_a88dd4e25e224557f93cba67c93532e0a_icgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_a88dd4e25e224557f93cba67c93532e0a_icgraph" id="ubifs_2recovery_8c_a88dd4e25e224557f93cba67c93532e0a_icgraph">
<area shape="rect" id="node2" href="replay_8c.html#aed3ed0e13bec51f8343217fe9a6552fe" title="apply_replay_entry" alt="" coords="184,56,315,83"/>
<area shape="rect" id="node8" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="186,157,313,184"/>
<area shape="rect" id="node3" href="replay_8c.html#adc5456ddf590ac5979e20ff60b4cf06a" title="apply_replay_list" alt="" coords="370,5,489,32"/>
<area shape="rect" id="node4" href="ubifs_8h.html#af76f722fe22c9c52675c75c16369d414" title="ubifs_replay_journal" alt="" coords="544,5,681,32"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="733,5,826,32"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="877,5,987,32"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="1035,5,1128,32"/>
<area shape="rect" id="node9" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="363,56,496,83"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="383,107,476,133"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="388,157,471,184"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="385,208,474,235"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="381,259,477,285"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="378,309,481,336"/>
<area shape="rect" id="node10" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="576,56,649,83"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="565,132,661,159"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="569,183,656,209"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="729,183,829,209"/>
</map>
</div>

</div>
</div>
<a id="ade432ff9351ac85efcb9cf0094d7b157"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade432ff9351ac85efcb9cf0094d7b157">&#9670;&nbsp;</a></span>ubifs_write_rcvrd_mst_node()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ubifs_write_rcvrd_mst_node </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_write_rcvrd_mst_node - write the recovered master node. <code></code>: UBIFS file-system description object</p>
<p>This function writes the master node that was recovered during mounting in read-only mode and must now be written because we are remounting rw.</p>
<p>This function returns %0 on success and a negative error code on failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_ade432ff9351ac85efcb9cf0094d7b157_cgraph.png" border="0" usemap="#ubifs_2recovery_8c_ade432ff9351ac85efcb9cf0094d7b157_cgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_ade432ff9351ac85efcb9cf0094d7b157_cgraph" id="ubifs_2recovery_8c_ade432ff9351ac85efcb9cf0094d7b157_cgraph">
<area shape="rect" id="node2" href="ubifs_2recovery_8c.html#aecb3cf138b2d6e0039658a633e8a9d45" title="write_rcvrd_mst_node" alt="" coords="239,108,389,135"/>
<area shape="rect" id="node3" href="ubifs_2io_8c.html#acfc2ca3ffa8d094855c2e59551f3a767" title="ubifs_prepare_node" alt="" coords="437,57,572,84"/>
<area shape="rect" id="node9" href="ubifs_2io_8c.html#ac70865809ab5c33c55274560e453f535" title="ubifs_leb_change" alt="" coords="443,159,566,185"/>
<area shape="rect" id="node4" href="ubifs_2io_8c.html#a0b3f089c430db97bbc68e362dc7867c8" title="next_sqnum" alt="" coords="631,57,725,84"/>
<area shape="rect" id="node8" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="639,7,717,33"/>
<area shape="rect" id="node5" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1197,1400,1269,1427"/>
<area shape="rect" id="node6" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="802,108,909,135"/>
<area shape="rect" id="node7" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="1019,83,1105,109"/>
<area shape="rect" id="node10" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="1003,133,1121,160"/>
<area shape="rect" id="node11" href="ubifs_2debug_8c.html#af2ad985422103ec5e3e13776002d6ceb" title="dbg_leb_change" alt="" coords="620,209,736,236"/>
<area shape="rect" id="node12" href="ubifs_2debug_8h.html#ab599356d6c84ddd2c7b9001b452c30bd" title="dbg_is_power_cut" alt="" coords="792,1071,919,1097"/>
<area shape="rect" id="node50" href="ubifs_2debug_8c.html#a67b6fc23cfbf882431d33323a03ef74c" title="power_cut_emulated" alt="" coords="784,209,927,236"/>
<area shape="rect" id="node13" href="ubifs_2debug_8h.html#aed9c32fd77ce70a2d917ab58c56189c2" title="ubifs_debugging_init" alt="" coords="992,437,1132,464"/>
<area shape="rect" id="node14" href="ubifs_2debug_8h.html#a1e62d7c391f555902a25f8060eb6f1ec" title="ubifs_debugging_exit" alt="" coords="990,488,1134,515"/>
<area shape="rect" id="node15" href="ubifs_2debug_8h.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="1021,539,1103,565"/>
<area shape="rect" id="node16" href="ubifs_2debug_8h.html#a615a670f26d4407b52175ce5f3faf594" title="dbg_cstate" alt="" coords="1019,589,1105,616"/>
<area shape="rect" id="node17" href="ubifs_2debug_8h.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="1021,640,1103,667"/>
<area shape="rect" id="node18" href="ubifs_2debug_8h.html#a4184d82b0b2ff0fffc6ab3d4de4a1e7a" title="dbg_get_key_dump" alt="" coords="995,691,1129,717"/>
<area shape="rect" id="node19" href="ubifs_2debug_8h.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="1001,741,1123,768"/>
<area shape="rect" id="node20" href="ubifs_2debug_8h.html#a6ecc9bff59f14d28615ed14fa5323681" title="ubifs_dump_inode" alt="" coords="999,792,1125,819"/>
<area shape="rect" id="node21" href="ubifs_2debug_8h.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="1000,843,1124,869"/>
<area shape="rect" id="node22" href="ubifs_2debug_8h.html#acfcbe45894b3b41385c1f9891d57bb97" title="ubifs_dump_budget_req" alt="" coords="982,893,1142,920"/>
<area shape="rect" id="node23" href="ubifs_2debug_8h.html#ab351e7abb59edb97d57bd44dd83b0484" title="ubifs_dump_lstats" alt="" coords="998,944,1126,971"/>
<area shape="rect" id="node24" href="ubifs_2debug_8h.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="1000,995,1124,1021"/>
<area shape="rect" id="node25" href="ubifs_2debug_8h.html#ad04e55858b69b78f20ea8b0fb79f9f27" title="ubifs_dump_lprop" alt="" coords="1000,1045,1124,1072"/>
<area shape="rect" id="node26" href="ubifs_2debug_8h.html#a2fa0aeaaa556f0b13d098456ef7d86d4" title="ubifs_dump_lprops" alt="" coords="997,1957,1127,1984"/>
<area shape="rect" id="node27" href="ubifs_2debug_8h.html#afc25fcc00c516fab54a12303d87bc100" title="ubifs_dump_lpt_info" alt="" coords="993,1147,1131,1173"/>
<area shape="rect" id="node28" href="ubifs_2debug_8h.html#afa1952f7d3c2c791a330e3dc245c5a83" title="ubifs_dump_leb" alt="" coords="1005,2008,1119,2035"/>
<area shape="rect" id="node29" href="ubifs_2debug_8h.html#a454a80414a371832b3f68f828f6a6353" title="ubifs_dump_sleb" alt="" coords="1002,1248,1122,1275"/>
<area shape="rect" id="node30" href="ubifs_2debug_8h.html#a56365d730ac6932bf3163a8ba7279779" title="ubifs_dump_znode" alt="" coords="997,1299,1127,1325"/>
<area shape="rect" id="node31" href="ubifs_2debug_8h.html#a5600b63b8362df17ed46c4e20784fb6c" title="ubifs_dump_heap" alt="" coords="1000,1349,1124,1376"/>
<area shape="rect" id="node32" href="ubifs_2debug_8h.html#ab2224f946272a25cfacf2607c6502818" title="ubifs_dump_pnode" alt="" coords="997,1400,1127,1427"/>
<area shape="rect" id="node33" href="ubifs_2debug_8h.html#a6ad4e8a10c442517164e350787696d9d" title="ubifs_dump_tnc" alt="" coords="1005,1451,1119,1477"/>
<area shape="rect" id="node34" href="ubifs_2debug_8h.html#a1988de032288d9afc418a9f36c0e1a38" title="ubifs_dump_index" alt="" coords="999,1501,1125,1528"/>
<area shape="rect" id="node35" href="ubifs_2debug_8h.html#a2dad580c9c3f21053039a854eb81bed2" title="ubifs_dump_lpt_lebs" alt="" coords="991,1552,1133,1579"/>
<area shape="rect" id="node36" href="ubifs_2debug_8h.html#ac9540eb544441fb116e86f4799b55265" title="dbg_walk_index" alt="" coords="1005,184,1119,211"/>
<area shape="rect" id="node37" href="ubifs_2debug_8h.html#a42a0e664e63f651533d2a5abc23bf4da" title="dbg_save_space_info" alt="" coords="988,1653,1136,1680"/>
<area shape="rect" id="node38" href="ubifs_2debug_8h.html#ace23cd2189dd2d7a9435ddd891e9beaa" title="dbg_check_space_info" alt="" coords="985,235,1139,261"/>
<area shape="rect" id="node39" href="ubifs_2debug_8h.html#a69534405790cc12f492343243bc539a4" title="dbg_check_lprops" alt="" coords="999,285,1125,312"/>
<area shape="rect" id="node40" href="ubifs_2debug_8h.html#a725dc62445ba29e272e4ccb5b10fbc61" title="dbg_old_index_check_init" alt="" coords="977,1704,1147,1731"/>
<area shape="rect" id="node41" href="ubifs_2debug_8h.html#a23369147b6e2214867a8a650ad50ebaf" title="dbg_check_old_index" alt="" coords="989,336,1135,363"/>
<area shape="rect" id="node42" href="ubifs_2debug_8h.html#a4d24d720745a25e26d273dc892c703eb" title="dbg_check_cats" alt="" coords="1003,387,1121,413"/>
<area shape="rect" id="node43" href="ubifs_2debug_8h.html#a0326c90a004af4486c5ad1dbc25baf29" title="dbg_check_ltab" alt="" coords="1005,1096,1119,1123"/>
<area shape="rect" id="node44" href="ubifs_2debug_8h.html#ab2f0c34c5385c6b4af6f326fac750a70" title="dbg_chk_lpt_free_spc" alt="" coords="987,1197,1137,1224"/>
<area shape="rect" id="node45" href="ubifs_2debug_8h.html#a8743b404fd4536a6f2212846f55854d0" title="dbg_chk_lpt_sz" alt="" coords="1005,1603,1119,1629"/>
<area shape="rect" id="node46" href="ubifs_2debug_8h.html#ad20ad974aa8f10603e2468787760af65" title="dbg_check_synced_i_size" alt="" coords="975,1755,1149,1781"/>
<area shape="rect" id="node47" href="ubifs_2debug_8h.html#ae64cd5f4e9b71d0d2167e1f8dafd9cd0" title="dbg_check_dir" alt="" coords="1009,1805,1115,1832"/>
<area shape="rect" id="node48" href="ubifs_2debug_8h.html#a8e749de733b483ca979984b8aa078aa6" title="dbg_check_tnc" alt="" coords="1007,1856,1117,1883"/>
<area shape="rect" id="node49" href="ubifs_2debug_8h.html#a6f442c5e8d297e33d3bdaea0887419e6" title="dbg_check_idx_size" alt="" coords="992,1907,1132,1933"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_ade432ff9351ac85efcb9cf0094d7b157_icgraph.png" border="0" usemap="#ubifs_2recovery_8c_ade432ff9351ac85efcb9cf0094d7b157_icgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_ade432ff9351ac85efcb9cf0094d7b157_icgraph" id="ubifs_2recovery_8c_ade432ff9351ac85efcb9cf0094d7b157_icgraph">
<area shape="rect" id="node2" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="239,56,365,83"/>
<area shape="rect" id="node4" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="239,157,365,184"/>
<area shape="rect" id="node3" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="419,5,541,32"/>
<area shape="rect" id="node5" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="413,56,547,83"/>
<area shape="rect" id="node7" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="433,107,527,133"/>
<area shape="rect" id="node8" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="439,157,521,184"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="435,208,525,235"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="432,259,528,285"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="429,309,531,336"/>
<area shape="rect" id="node6" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="606,56,679,83"/>
<area shape="rect" id="node9" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="595,132,691,159"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="599,183,686,209"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="739,183,839,209"/>
</map>
</div>

</div>
</div>
<a id="aecb3cf138b2d6e0039658a633e8a9d45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aecb3cf138b2d6e0039658a633e8a9d45">&#9670;&nbsp;</a></span>write_rcvrd_mst_node()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int write_rcvrd_mst_node </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structubifs__mst__node.html">ubifs_mst_node</a> *&#160;</td>
          <td class="paramname"><em>mst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>write_rcvrd_mst_node - write recovered master node. <code></code>: UBIFS file-system description object : master node</p>
<p>This function returns %0 on success and a negative error code on failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_aecb3cf138b2d6e0039658a633e8a9d45_cgraph.png" border="0" usemap="#ubifs_2recovery_8c_aecb3cf138b2d6e0039658a633e8a9d45_cgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_aecb3cf138b2d6e0039658a633e8a9d45_cgraph" id="ubifs_2recovery_8c_aecb3cf138b2d6e0039658a633e8a9d45_cgraph">
<area shape="rect" id="node2" href="ubifs_2io_8c.html#acfc2ca3ffa8d094855c2e59551f3a767" title="ubifs_prepare_node" alt="" coords="204,58,339,84"/>
<area shape="rect" id="node8" href="ubifs_2io_8c.html#ac70865809ab5c33c55274560e453f535" title="ubifs_leb_change" alt="" coords="210,159,333,186"/>
<area shape="rect" id="node3" href="ubifs_2io_8c.html#a0b3f089c430db97bbc68e362dc7867c8" title="next_sqnum" alt="" coords="398,58,491,84"/>
<area shape="rect" id="node7" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="405,7,484,34"/>
<area shape="rect" id="node4" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="964,1654,1036,1680"/>
<area shape="rect" id="node5" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="569,108,675,135"/>
<area shape="rect" id="node6" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="786,83,871,110"/>
<area shape="rect" id="node9" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="769,134,888,160"/>
<area shape="rect" id="node10" href="ubifs_2debug_8c.html#af2ad985422103ec5e3e13776002d6ceb" title="dbg_leb_change" alt="" coords="387,210,503,236"/>
<area shape="rect" id="node11" href="ubifs_2debug_8h.html#ab599356d6c84ddd2c7b9001b452c30bd" title="dbg_is_power_cut" alt="" coords="559,1096,685,1123"/>
<area shape="rect" id="node50" href="ubifs_2debug_8c.html#a67b6fc23cfbf882431d33323a03ef74c" title="power_cut_emulated" alt="" coords="551,210,693,236"/>
<area shape="rect" id="node12" href="ubifs_2debug_8h.html#aed9c32fd77ce70a2d917ab58c56189c2" title="ubifs_debugging_init" alt="" coords="759,438,899,464"/>
<area shape="rect" id="node13" href="ubifs_2debug_8h.html#a1e62d7c391f555902a25f8060eb6f1ec" title="ubifs_debugging_exit" alt="" coords="757,488,901,515"/>
<area shape="rect" id="node14" href="ubifs_2debug_8h.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="787,539,870,566"/>
<area shape="rect" id="node15" href="ubifs_2debug_8h.html#a615a670f26d4407b52175ce5f3faf594" title="dbg_cstate" alt="" coords="785,590,872,616"/>
<area shape="rect" id="node16" href="ubifs_2debug_8h.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="788,640,869,667"/>
<area shape="rect" id="node17" href="ubifs_2debug_8h.html#a4184d82b0b2ff0fffc6ab3d4de4a1e7a" title="dbg_get_key_dump" alt="" coords="761,691,896,718"/>
<area shape="rect" id="node18" href="ubifs_2debug_8h.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="768,742,889,768"/>
<area shape="rect" id="node19" href="ubifs_2debug_8h.html#a6ecc9bff59f14d28615ed14fa5323681" title="ubifs_dump_inode" alt="" coords="765,792,892,819"/>
<area shape="rect" id="node20" href="ubifs_2debug_8h.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="767,843,891,870"/>
<area shape="rect" id="node21" href="ubifs_2debug_8h.html#acfcbe45894b3b41385c1f9891d57bb97" title="ubifs_dump_budget_req" alt="" coords="749,894,909,920"/>
<area shape="rect" id="node22" href="ubifs_2debug_8h.html#ab351e7abb59edb97d57bd44dd83b0484" title="ubifs_dump_lstats" alt="" coords="765,944,893,971"/>
<area shape="rect" id="node23" href="ubifs_2debug_8h.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="767,995,891,1022"/>
<area shape="rect" id="node24" href="ubifs_2debug_8h.html#ad04e55858b69b78f20ea8b0fb79f9f27" title="ubifs_dump_lprop" alt="" coords="767,1046,891,1072"/>
<area shape="rect" id="node25" href="ubifs_2debug_8h.html#a2fa0aeaaa556f0b13d098456ef7d86d4" title="ubifs_dump_lprops" alt="" coords="763,1907,894,1934"/>
<area shape="rect" id="node26" href="ubifs_2debug_8h.html#afc25fcc00c516fab54a12303d87bc100" title="ubifs_dump_lpt_info" alt="" coords="759,1147,898,1174"/>
<area shape="rect" id="node27" href="ubifs_2debug_8h.html#afa1952f7d3c2c791a330e3dc245c5a83" title="ubifs_dump_leb" alt="" coords="772,1958,885,1984"/>
<area shape="rect" id="node28" href="ubifs_2debug_8h.html#a454a80414a371832b3f68f828f6a6353" title="ubifs_dump_sleb" alt="" coords="769,1248,889,1275"/>
<area shape="rect" id="node29" href="ubifs_2debug_8h.html#a56365d730ac6932bf3163a8ba7279779" title="ubifs_dump_znode" alt="" coords="763,1299,894,1326"/>
<area shape="rect" id="node30" href="ubifs_2debug_8h.html#a5600b63b8362df17ed46c4e20784fb6c" title="ubifs_dump_heap" alt="" coords="767,1350,891,1376"/>
<area shape="rect" id="node31" href="ubifs_2debug_8h.html#ab2224f946272a25cfacf2607c6502818" title="ubifs_dump_pnode" alt="" coords="763,1400,894,1427"/>
<area shape="rect" id="node32" href="ubifs_2debug_8h.html#a6ad4e8a10c442517164e350787696d9d" title="ubifs_dump_tnc" alt="" coords="771,1451,886,1478"/>
<area shape="rect" id="node33" href="ubifs_2debug_8h.html#a1988de032288d9afc418a9f36c0e1a38" title="ubifs_dump_index" alt="" coords="765,1502,892,1528"/>
<area shape="rect" id="node34" href="ubifs_2debug_8h.html#a2dad580c9c3f21053039a854eb81bed2" title="ubifs_dump_lpt_lebs" alt="" coords="758,1552,899,1579"/>
<area shape="rect" id="node35" href="ubifs_2debug_8h.html#ac9540eb544441fb116e86f4799b55265" title="dbg_walk_index" alt="" coords="771,2008,886,2035"/>
<area shape="rect" id="node36" href="ubifs_2debug_8h.html#a42a0e664e63f651533d2a5abc23bf4da" title="dbg_save_space_info" alt="" coords="755,1603,903,1630"/>
<area shape="rect" id="node37" href="ubifs_2debug_8h.html#ace23cd2189dd2d7a9435ddd891e9beaa" title="dbg_check_space_info" alt="" coords="751,2059,906,2086"/>
<area shape="rect" id="node38" href="ubifs_2debug_8h.html#a69534405790cc12f492343243bc539a4" title="dbg_check_lprops" alt="" coords="765,184,892,211"/>
<area shape="rect" id="node39" href="ubifs_2debug_8h.html#a725dc62445ba29e272e4ccb5b10fbc61" title="dbg_old_index_check_init" alt="" coords="743,1704,914,1731"/>
<area shape="rect" id="node40" href="ubifs_2debug_8h.html#a23369147b6e2214867a8a650ad50ebaf" title="dbg_check_old_index" alt="" coords="755,235,902,262"/>
<area shape="rect" id="node41" href="ubifs_2debug_8h.html#a4d24d720745a25e26d273dc892c703eb" title="dbg_check_cats" alt="" coords="770,286,887,312"/>
<area shape="rect" id="node42" href="ubifs_2debug_8h.html#a0326c90a004af4486c5ad1dbc25baf29" title="dbg_check_ltab" alt="" coords="772,336,885,363"/>
<area shape="rect" id="node43" href="ubifs_2debug_8h.html#ab2f0c34c5385c6b4af6f326fac750a70" title="dbg_chk_lpt_free_spc" alt="" coords="754,387,903,414"/>
<area shape="rect" id="node44" href="ubifs_2debug_8h.html#a8743b404fd4536a6f2212846f55854d0" title="dbg_chk_lpt_sz" alt="" coords="772,1096,885,1123"/>
<area shape="rect" id="node45" href="ubifs_2debug_8h.html#ad20ad974aa8f10603e2468787760af65" title="dbg_check_synced_i_size" alt="" coords="741,1198,916,1224"/>
<area shape="rect" id="node46" href="ubifs_2debug_8h.html#ae64cd5f4e9b71d0d2167e1f8dafd9cd0" title="dbg_check_dir" alt="" coords="775,1654,882,1680"/>
<area shape="rect" id="node47" href="ubifs_2debug_8h.html#a8e749de733b483ca979984b8aa078aa6" title="dbg_check_tnc" alt="" coords="773,1755,884,1782"/>
<area shape="rect" id="node48" href="ubifs_2debug_8h.html#a6f442c5e8d297e33d3bdaea0887419e6" title="dbg_check_idx_size" alt="" coords="759,1806,899,1832"/>
<area shape="rect" id="node49" href="ubifs_2debug_8h.html#a731d5cfe8b5dfa819687b4924a384a35" title="dbg_check_filesystem" alt="" coords="753,1856,905,1883"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2recovery_8c_aecb3cf138b2d6e0039658a633e8a9d45_icgraph.png" border="0" usemap="#ubifs_2recovery_8c_aecb3cf138b2d6e0039658a633e8a9d45_icgraph" alt=""/></div>
<map name="ubifs_2recovery_8c_aecb3cf138b2d6e0039658a633e8a9d45_icgraph" id="ubifs_2recovery_8c_aecb3cf138b2d6e0039658a633e8a9d45_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#a11a5ff140312c68bb4c5e44593d11b90" title="ubifs_recover_master_node" alt="" coords="205,157,388,184"/>
<area shape="rect" id="node18" href="ubifs_8h.html#ade432ff9351ac85efcb9cf0094d7b157" title="ubifs_write_rcvrd_mst_node" alt="" coords="204,208,389,235"/>
<area shape="rect" id="node3" href="ubifs_8h.html#ac45820de3d377c5a1f29a160f5fb0d77" title="ubifs_read_master" alt="" coords="437,69,567,96"/>
<area shape="rect" id="node7" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="439,183,565,209"/>
<area shape="rect" id="node4" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="635,5,728,32"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="796,5,905,32"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="957,5,1050,32"/>
<area shape="rect" id="node8" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="615,56,748,83"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="635,107,728,133"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="640,157,723,184"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="637,208,726,235"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="633,259,729,285"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="630,309,733,336"/>
<area shape="rect" id="node9" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="814,56,887,83"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="803,132,899,159"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="807,183,894,209"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="953,183,1053,209"/>
<area shape="rect" id="node19" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="439,259,565,285"/>
<area shape="rect" id="node20" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="620,360,743,387"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_fbbc61eb3235ac15a35746d00bf5db85.html">ubifs</a></li><li class="navelem"><a class="el" href="ubifs_2recovery_8c.html">recovery.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>

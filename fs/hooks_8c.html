<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>linux/fs: crypto/hooks.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">linux/fs
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('hooks_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">hooks.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;linux/ratelimit.h&gt;</code><br />
<code>#include &quot;<a class="el" href="fscrypt__private_8h_source.html">fscrypt_private.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for hooks.c:</div>
<div class="dyncontent">
<div class="center"><img src="hooks_8c__incl.png" border="0" usemap="#crypto_2hooks_8c" alt=""/></div>
<map name="crypto_2hooks_8c" id="crypto_2hooks_8c">
<area shape="rect" id="node3" href="fscrypt__private_8h.html" title="fscrypt_private.h" alt="" coords="140,80,259,107"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3f3de2a02ff4d691e60414e41663e1e4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hooks_8c.html#a3f3de2a02ff4d691e60414e41663e1e4">fscrypt_file_open</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *<a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a>, struct file *filp)</td></tr>
<tr class="separator:a3f3de2a02ff4d691e60414e41663e1e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a245a5163f1b42ffb7632e4882f84b0bb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hooks_8c.html#a245a5163f1b42ffb7632e4882f84b0bb">EXPORT_SYMBOL_GPL</a> (<a class="el" href="hooks_8c.html#a3f3de2a02ff4d691e60414e41663e1e4">fscrypt_file_open</a>)</td></tr>
<tr class="separator:a245a5163f1b42ffb7632e4882f84b0bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae394bea6ef3c93d5d930ed79de0a7e59"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hooks_8c.html#ae394bea6ef3c93d5d930ed79de0a7e59">__fscrypt_prepare_link</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *<a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a>, struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *dir)</td></tr>
<tr class="separator:ae394bea6ef3c93d5d930ed79de0a7e59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2d73c5a837ea930654e24e4b6c12ede"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hooks_8c.html#ae2d73c5a837ea930654e24e4b6c12ede">EXPORT_SYMBOL_GPL</a> (<a class="el" href="hooks_8c.html#ae394bea6ef3c93d5d930ed79de0a7e59">__fscrypt_prepare_link</a>)</td></tr>
<tr class="separator:ae2d73c5a837ea930654e24e4b6c12ede"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72e0a6acfe632f8fe6dafa6f7dc5ce28"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hooks_8c.html#a72e0a6acfe632f8fe6dafa6f7dc5ce28">__fscrypt_prepare_rename</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *old_dir, struct dentry *old_dentry, struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *<a class="el" href="proc__sysctl_8c.html#aba72ac0468502015dfce9545fb0650f2">new_dir</a>, struct dentry *new_dentry, unsigned int <a class="el" href="structflags.html">flags</a>)</td></tr>
<tr class="separator:a72e0a6acfe632f8fe6dafa6f7dc5ce28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b4f6692c3aac020bf9e2a2598456116"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hooks_8c.html#a8b4f6692c3aac020bf9e2a2598456116">EXPORT_SYMBOL_GPL</a> (<a class="el" href="hooks_8c.html#a72e0a6acfe632f8fe6dafa6f7dc5ce28">__fscrypt_prepare_rename</a>)</td></tr>
<tr class="separator:a8b4f6692c3aac020bf9e2a2598456116"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d901665bdb0c44ccb64e006e7d325f1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hooks_8c.html#a3d901665bdb0c44ccb64e006e7d325f1">__fscrypt_prepare_lookup</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *dir, struct dentry *dentry)</td></tr>
<tr class="separator:a3d901665bdb0c44ccb64e006e7d325f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26f442f8897090c926a708b54c813fdf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hooks_8c.html#a26f442f8897090c926a708b54c813fdf">EXPORT_SYMBOL_GPL</a> (<a class="el" href="hooks_8c.html#a3d901665bdb0c44ccb64e006e7d325f1">__fscrypt_prepare_lookup</a>)</td></tr>
<tr class="separator:a26f442f8897090c926a708b54c813fdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4994ff526cc2780370bfd5724b6bc836"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hooks_8c.html#a4994ff526cc2780370bfd5724b6bc836">__fscrypt_prepare_symlink</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *dir, unsigned int <a class="el" href="rock_8h.html#aa1460ec7ef11d3c3a91c8ee9fb6380d5">len</a>, unsigned int max_len, struct fscrypt_str *disk_link)</td></tr>
<tr class="separator:a4994ff526cc2780370bfd5724b6bc836"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af530f5180ef98cc72ada478413a3dc06"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hooks_8c.html#af530f5180ef98cc72ada478413a3dc06">EXPORT_SYMBOL_GPL</a> (<a class="el" href="hooks_8c.html#a4994ff526cc2780370bfd5724b6bc836">__fscrypt_prepare_symlink</a>)</td></tr>
<tr class="separator:af530f5180ef98cc72ada478413a3dc06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ec0cc75d6c22f3889904b361902fce4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hooks_8c.html#a6ec0cc75d6c22f3889904b361902fce4">__fscrypt_encrypt_symlink</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *<a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a>, const char *target, unsigned int <a class="el" href="rock_8h.html#aa1460ec7ef11d3c3a91c8ee9fb6380d5">len</a>, struct fscrypt_str *disk_link)</td></tr>
<tr class="separator:a6ec0cc75d6c22f3889904b361902fce4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04a4b5d36c5a77892b723537e8679f2c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hooks_8c.html#a04a4b5d36c5a77892b723537e8679f2c">EXPORT_SYMBOL_GPL</a> (<a class="el" href="hooks_8c.html#a6ec0cc75d6c22f3889904b361902fce4">__fscrypt_encrypt_symlink</a>)</td></tr>
<tr class="separator:a04a4b5d36c5a77892b723537e8679f2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8e7fd1cb52bbafa2c13f25a43964f24"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hooks_8c.html#ab8e7fd1cb52bbafa2c13f25a43964f24">fscrypt_get_symlink</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *<a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a>, const void *caddr, unsigned int max_size, struct delayed_call *done)</td></tr>
<tr class="separator:ab8e7fd1cb52bbafa2c13f25a43964f24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf81cc4caf2e79b64d6aa08d3cad80c0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hooks_8c.html#aaf81cc4caf2e79b64d6aa08d3cad80c0">EXPORT_SYMBOL_GPL</a> (<a class="el" href="hooks_8c.html#ab8e7fd1cb52bbafa2c13f25a43964f24">fscrypt_get_symlink</a>)</td></tr>
<tr class="separator:aaf81cc4caf2e79b64d6aa08d3cad80c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a6ec0cc75d6c22f3889904b361902fce4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ec0cc75d6c22f3889904b361902fce4">&#9670;&nbsp;</a></span>__fscrypt_encrypt_symlink()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int __fscrypt_encrypt_symlink </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct fscrypt_str *&#160;</td>
          <td class="paramname"><em>disk_link</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hooks_8c_a6ec0cc75d6c22f3889904b361902fce4_cgraph.png" border="0" usemap="#hooks_8c_a6ec0cc75d6c22f3889904b361902fce4_cgraph" alt=""/></div>
<map name="hooks_8c_a6ec0cc75d6c22f3889904b361902fce4_cgraph" id="hooks_8c_a6ec0cc75d6c22f3889904b361902fce4_cgraph">
<area shape="rect" id="node2" href="fname_8c.html#ab6ec3c0a289a75033eefc8b0ea9b40b7" title="fname_encrypt" alt="" coords="264,5,372,32"/>
<area shape="rect" id="node3" href="hooks_8c.html#a245a5163f1b42ffb7632e4882f84b0bb" title="EXPORT_SYMBOL_GPL" alt="" coords="232,56,404,83"/>
</map>
</div>

</div>
</div>
<a id="ae394bea6ef3c93d5d930ed79de0a7e59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae394bea6ef3c93d5d930ed79de0a7e59">&#9670;&nbsp;</a></span>__fscrypt_prepare_link()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int __fscrypt_prepare_link </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>dir</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hooks_8c_ae394bea6ef3c93d5d930ed79de0a7e59_cgraph.png" border="0" usemap="#hooks_8c_ae394bea6ef3c93d5d930ed79de0a7e59_cgraph" alt=""/></div>
<map name="hooks_8c_ae394bea6ef3c93d5d930ed79de0a7e59_cgraph" id="hooks_8c_ae394bea6ef3c93d5d930ed79de0a7e59_cgraph">
<area shape="rect" id="node2" href="policy_8c.html#a470e0d74ebff755fd4695378f43a85ab" title="fscrypt_has_permitted\l_context" alt="" coords="217,226,368,267"/>
<area shape="rect" id="node21" href="hooks_8c.html#a245a5163f1b42ffb7632e4882f84b0bb" title="EXPORT_SYMBOL_GPL" alt="" coords="207,292,379,319"/>
<area shape="rect" id="node3" href="keyinfo_8c.html#a7621dfa0cb2b35172414c30b08e5aedd" title="fscrypt_get_encryption_info" alt="" coords="427,208,609,235"/>
<area shape="rect" id="node20" href="policy_8c.html#a0def849d9429e6e706212fd82725f01f" title="EXPORT_SYMBOL" alt="" coords="449,259,587,285"/>
<area shape="rect" id="node4" href="crypto_2crypto_8c.html#af669c5cf0f50c0c619742704b6cffdf1" title="fscrypt_initialize" alt="" coords="886,31,1002,57"/>
<area shape="rect" id="node6" href="keyinfo_8c.html#ad49967fa4f85bb4a389049107d05fca4" title="determine_cipher_type" alt="" coords="657,132,811,159"/>
<area shape="rect" id="node14" href="keyinfo_8c.html#a48063b8ae6a6e8cf7a1ef357b5533c26" title="validate_user_key" alt="" coords="671,183,797,209"/>
<area shape="rect" id="node16" href="keyinfo_8c.html#a1896e254e43274fa245243395c8b5ebd" title="init_essiv_generator" alt="" coords="665,233,803,260"/>
<area shape="rect" id="node18" href="keyinfo_8c.html#ab93f9769891ed56942bf6e50c5d52ef9" title="put_crypt_info" alt="" coords="682,284,786,311"/>
<area shape="rect" id="node19" href="keyinfo_8c.html#a76c4eeea0a83fb479a90b30e219ffc0a" title="EXPORT_SYMBOL" alt="" coords="665,335,803,361"/>
<area shape="rect" id="node5" href="crypto_2crypto_8c.html#afcd39fa09504d43e663466794cbbe1eb" title="fscrypt_destroy" alt="" coords="1325,5,1437,32"/>
<area shape="rect" id="node7" href="fscrypt__private_8h.html#ab15ec3d0df2bcbd4968ae8d58e0bb088" title="fscrypt_valid_enc_modes" alt="" coords="859,132,1029,159"/>
<area shape="rect" id="node8" href="fscrypt__private_8h.html#af669c5cf0f50c0c619742704b6cffdf1" title="fscrypt_initialize" alt="" coords="1119,31,1235,57"/>
<area shape="rect" id="node9" href="fscrypt__private_8h.html#a54b1c5526cd4eccd22ebb1e73c3fc385" title="fscrypt_do_page_crypto" alt="" coords="1097,81,1258,108"/>
<area shape="rect" id="node10" href="fscrypt__private_8h.html#a1f4b4ee23f3f6ea7869b12de76151f8e" title="fscrypt_alloc_bounce_page" alt="" coords="1087,132,1267,159"/>
<area shape="rect" id="node11" href="fscrypt__private_8h.html#ab6ec3c0a289a75033eefc8b0ea9b40b7" title="fname_encrypt" alt="" coords="1123,183,1231,209"/>
<area shape="rect" id="node12" href="fscrypt__private_8h.html#a46eac2c4bde9fab84183643a0192aa5b" title="fscrypt_fname_encrypted_size" alt="" coords="1077,233,1277,260"/>
<area shape="rect" id="node13" href="fscrypt__private_8h.html#aef01de70fa2d65e2a71d396d958a50cc" title="fscrypt_essiv_cleanup" alt="" coords="1101,284,1253,311"/>
<area shape="rect" id="node15" href="keyinfo_8c.html#a62150f287ac661131b5f55152d747120" title="derive_key_aes" alt="" coords="887,183,1001,209"/>
<area shape="rect" id="node17" href="keyinfo_8c.html#aaa232e8ce61aaeb9ff6113fba74e11d7" title="derive_essiv_salt" alt="" coords="883,233,1005,260"/>
</map>
</div>

</div>
</div>
<a id="a3d901665bdb0c44ccb64e006e7d325f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d901665bdb0c44ccb64e006e7d325f1">&#9670;&nbsp;</a></span>__fscrypt_prepare_lookup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int __fscrypt_prepare_lookup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct dentry *&#160;</td>
          <td class="paramname"><em>dentry</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hooks_8c_a3d901665bdb0c44ccb64e006e7d325f1_cgraph.png" border="0" usemap="#hooks_8c_a3d901665bdb0c44ccb64e006e7d325f1_cgraph" alt=""/></div>
<map name="hooks_8c_a3d901665bdb0c44ccb64e006e7d325f1_cgraph" id="hooks_8c_a3d901665bdb0c44ccb64e006e7d325f1_cgraph">
<area shape="rect" id="node2" href="keyinfo_8c.html#a7621dfa0cb2b35172414c30b08e5aedd" title="fscrypt_get_encryption_info" alt="" coords="224,233,407,260"/>
<area shape="rect" id="node19" href="dcache_8c.html#a8317337c12d8f0fa6b32a91f6a8c68d9" title="d_set_d_op" alt="" coords="271,335,360,361"/>
<area shape="rect" id="node21" href="hooks_8c.html#a245a5163f1b42ffb7632e4882f84b0bb" title="EXPORT_SYMBOL_GPL" alt="" coords="229,385,401,412"/>
<area shape="rect" id="node3" href="crypto_2crypto_8c.html#af669c5cf0f50c0c619742704b6cffdf1" title="fscrypt_initialize" alt="" coords="683,31,799,57"/>
<area shape="rect" id="node5" href="keyinfo_8c.html#ad49967fa4f85bb4a389049107d05fca4" title="determine_cipher_type" alt="" coords="455,132,608,159"/>
<area shape="rect" id="node13" href="keyinfo_8c.html#a48063b8ae6a6e8cf7a1ef357b5533c26" title="validate_user_key" alt="" coords="468,183,595,209"/>
<area shape="rect" id="node15" href="keyinfo_8c.html#a1896e254e43274fa245243395c8b5ebd" title="init_essiv_generator" alt="" coords="462,233,601,260"/>
<area shape="rect" id="node17" href="keyinfo_8c.html#ab93f9769891ed56942bf6e50c5d52ef9" title="put_crypt_info" alt="" coords="479,284,583,311"/>
<area shape="rect" id="node18" href="keyinfo_8c.html#a76c4eeea0a83fb479a90b30e219ffc0a" title="EXPORT_SYMBOL" alt="" coords="462,335,601,361"/>
<area shape="rect" id="node4" href="crypto_2crypto_8c.html#afcd39fa09504d43e663466794cbbe1eb" title="fscrypt_destroy" alt="" coords="1123,5,1235,32"/>
<area shape="rect" id="node6" href="fscrypt__private_8h.html#ab15ec3d0df2bcbd4968ae8d58e0bb088" title="fscrypt_valid_enc_modes" alt="" coords="656,132,827,159"/>
<area shape="rect" id="node7" href="fscrypt__private_8h.html#af669c5cf0f50c0c619742704b6cffdf1" title="fscrypt_initialize" alt="" coords="917,31,1033,57"/>
<area shape="rect" id="node8" href="fscrypt__private_8h.html#a54b1c5526cd4eccd22ebb1e73c3fc385" title="fscrypt_do_page_crypto" alt="" coords="894,81,1055,108"/>
<area shape="rect" id="node9" href="fscrypt__private_8h.html#a1f4b4ee23f3f6ea7869b12de76151f8e" title="fscrypt_alloc_bounce_page" alt="" coords="885,132,1065,159"/>
<area shape="rect" id="node10" href="fscrypt__private_8h.html#ab6ec3c0a289a75033eefc8b0ea9b40b7" title="fname_encrypt" alt="" coords="921,183,1029,209"/>
<area shape="rect" id="node11" href="fscrypt__private_8h.html#a46eac2c4bde9fab84183643a0192aa5b" title="fscrypt_fname_encrypted_size" alt="" coords="875,233,1075,260"/>
<area shape="rect" id="node12" href="fscrypt__private_8h.html#aef01de70fa2d65e2a71d396d958a50cc" title="fscrypt_essiv_cleanup" alt="" coords="899,284,1051,311"/>
<area shape="rect" id="node14" href="keyinfo_8c.html#a62150f287ac661131b5f55152d747120" title="derive_key_aes" alt="" coords="685,183,798,209"/>
<area shape="rect" id="node16" href="keyinfo_8c.html#aaa232e8ce61aaeb9ff6113fba74e11d7" title="derive_essiv_salt" alt="" coords="680,233,803,260"/>
<area shape="rect" id="node20" href="dcache_8c.html#aeb5ec7bdf3301140d66dd18ae638685c" title="EXPORT_SYMBOL" alt="" coords="462,385,601,412"/>
</map>
</div>

</div>
</div>
<a id="a72e0a6acfe632f8fe6dafa6f7dc5ce28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72e0a6acfe632f8fe6dafa6f7dc5ce28">&#9670;&nbsp;</a></span>__fscrypt_prepare_rename()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int __fscrypt_prepare_rename </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>old_dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct dentry *&#160;</td>
          <td class="paramname"><em>old_dentry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>new_dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct dentry *&#160;</td>
          <td class="paramname"><em>new_dentry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hooks_8c_a72e0a6acfe632f8fe6dafa6f7dc5ce28_cgraph.png" border="0" usemap="#hooks_8c_a72e0a6acfe632f8fe6dafa6f7dc5ce28_cgraph" alt=""/></div>
<map name="hooks_8c_a72e0a6acfe632f8fe6dafa6f7dc5ce28_cgraph" id="hooks_8c_a72e0a6acfe632f8fe6dafa6f7dc5ce28_cgraph">
<area shape="rect" id="node2" href="policy_8c.html#a470e0d74ebff755fd4695378f43a85ab" title="fscrypt_has_permitted\l_context" alt="" coords="240,226,391,267"/>
<area shape="rect" id="node21" href="hooks_8c.html#a245a5163f1b42ffb7632e4882f84b0bb" title="EXPORT_SYMBOL_GPL" alt="" coords="229,292,401,319"/>
<area shape="rect" id="node3" href="keyinfo_8c.html#a7621dfa0cb2b35172414c30b08e5aedd" title="fscrypt_get_encryption_info" alt="" coords="449,208,632,235"/>
<area shape="rect" id="node20" href="policy_8c.html#a0def849d9429e6e706212fd82725f01f" title="EXPORT_SYMBOL" alt="" coords="471,259,610,285"/>
<area shape="rect" id="node4" href="crypto_2crypto_8c.html#af669c5cf0f50c0c619742704b6cffdf1" title="fscrypt_initialize" alt="" coords="909,31,1025,57"/>
<area shape="rect" id="node6" href="keyinfo_8c.html#ad49967fa4f85bb4a389049107d05fca4" title="determine_cipher_type" alt="" coords="680,132,833,159"/>
<area shape="rect" id="node14" href="keyinfo_8c.html#a48063b8ae6a6e8cf7a1ef357b5533c26" title="validate_user_key" alt="" coords="693,183,820,209"/>
<area shape="rect" id="node16" href="keyinfo_8c.html#a1896e254e43274fa245243395c8b5ebd" title="init_essiv_generator" alt="" coords="687,233,826,260"/>
<area shape="rect" id="node18" href="keyinfo_8c.html#ab93f9769891ed56942bf6e50c5d52ef9" title="put_crypt_info" alt="" coords="705,284,809,311"/>
<area shape="rect" id="node19" href="keyinfo_8c.html#a76c4eeea0a83fb479a90b30e219ffc0a" title="EXPORT_SYMBOL" alt="" coords="687,335,826,361"/>
<area shape="rect" id="node5" href="crypto_2crypto_8c.html#afcd39fa09504d43e663466794cbbe1eb" title="fscrypt_destroy" alt="" coords="1348,5,1460,32"/>
<area shape="rect" id="node7" href="fscrypt__private_8h.html#ab15ec3d0df2bcbd4968ae8d58e0bb088" title="fscrypt_valid_enc_modes" alt="" coords="881,132,1052,159"/>
<area shape="rect" id="node8" href="fscrypt__private_8h.html#af669c5cf0f50c0c619742704b6cffdf1" title="fscrypt_initialize" alt="" coords="1142,31,1258,57"/>
<area shape="rect" id="node9" href="fscrypt__private_8h.html#a54b1c5526cd4eccd22ebb1e73c3fc385" title="fscrypt_do_page_crypto" alt="" coords="1119,81,1281,108"/>
<area shape="rect" id="node10" href="fscrypt__private_8h.html#a1f4b4ee23f3f6ea7869b12de76151f8e" title="fscrypt_alloc_bounce_page" alt="" coords="1110,132,1290,159"/>
<area shape="rect" id="node11" href="fscrypt__private_8h.html#ab6ec3c0a289a75033eefc8b0ea9b40b7" title="fname_encrypt" alt="" coords="1146,183,1254,209"/>
<area shape="rect" id="node12" href="fscrypt__private_8h.html#a46eac2c4bde9fab84183643a0192aa5b" title="fscrypt_fname_encrypted_size" alt="" coords="1100,233,1300,260"/>
<area shape="rect" id="node13" href="fscrypt__private_8h.html#aef01de70fa2d65e2a71d396d958a50cc" title="fscrypt_essiv_cleanup" alt="" coords="1124,284,1276,311"/>
<area shape="rect" id="node15" href="keyinfo_8c.html#a62150f287ac661131b5f55152d747120" title="derive_key_aes" alt="" coords="910,183,1023,209"/>
<area shape="rect" id="node17" href="keyinfo_8c.html#aaa232e8ce61aaeb9ff6113fba74e11d7" title="derive_essiv_salt" alt="" coords="905,233,1028,260"/>
</map>
</div>

</div>
</div>
<a id="a4994ff526cc2780370bfd5724b6bc836"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4994ff526cc2780370bfd5724b6bc836">&#9670;&nbsp;</a></span>__fscrypt_prepare_symlink()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int __fscrypt_prepare_symlink </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>max_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct fscrypt_str *&#160;</td>
          <td class="paramname"><em>disk_link</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hooks_8c_a4994ff526cc2780370bfd5724b6bc836_cgraph.png" border="0" usemap="#hooks_8c_a4994ff526cc2780370bfd5724b6bc836_cgraph" alt=""/></div>
<map name="hooks_8c_a4994ff526cc2780370bfd5724b6bc836_cgraph" id="hooks_8c_a4994ff526cc2780370bfd5724b6bc836_cgraph">
<area shape="rect" id="node2" href="keyinfo_8c.html#a7621dfa0cb2b35172414c30b08e5aedd" title="fscrypt_get_encryption_info" alt="" coords="241,208,423,235"/>
<area shape="rect" id="node19" href="fname_8c.html#a46eac2c4bde9fab84183643a0192aa5b" title="fscrypt_fname_encrypted_size" alt="" coords="232,259,432,285"/>
<area shape="rect" id="node20" href="hooks_8c.html#a245a5163f1b42ffb7632e4882f84b0bb" title="EXPORT_SYMBOL_GPL" alt="" coords="246,309,418,336"/>
<area shape="rect" id="node3" href="crypto_2crypto_8c.html#af669c5cf0f50c0c619742704b6cffdf1" title="fscrypt_initialize" alt="" coords="709,31,825,57"/>
<area shape="rect" id="node5" href="keyinfo_8c.html#ad49967fa4f85bb4a389049107d05fca4" title="determine_cipher_type" alt="" coords="480,132,633,159"/>
<area shape="rect" id="node13" href="keyinfo_8c.html#a48063b8ae6a6e8cf7a1ef357b5533c26" title="validate_user_key" alt="" coords="493,183,620,209"/>
<area shape="rect" id="node15" href="keyinfo_8c.html#a1896e254e43274fa245243395c8b5ebd" title="init_essiv_generator" alt="" coords="487,233,626,260"/>
<area shape="rect" id="node17" href="keyinfo_8c.html#ab93f9769891ed56942bf6e50c5d52ef9" title="put_crypt_info" alt="" coords="505,284,609,311"/>
<area shape="rect" id="node18" href="keyinfo_8c.html#a76c4eeea0a83fb479a90b30e219ffc0a" title="EXPORT_SYMBOL" alt="" coords="487,335,626,361"/>
<area shape="rect" id="node4" href="crypto_2crypto_8c.html#afcd39fa09504d43e663466794cbbe1eb" title="fscrypt_destroy" alt="" coords="1148,5,1260,32"/>
<area shape="rect" id="node6" href="fscrypt__private_8h.html#ab15ec3d0df2bcbd4968ae8d58e0bb088" title="fscrypt_valid_enc_modes" alt="" coords="681,132,852,159"/>
<area shape="rect" id="node7" href="fscrypt__private_8h.html#af669c5cf0f50c0c619742704b6cffdf1" title="fscrypt_initialize" alt="" coords="942,31,1058,57"/>
<area shape="rect" id="node8" href="fscrypt__private_8h.html#a54b1c5526cd4eccd22ebb1e73c3fc385" title="fscrypt_do_page_crypto" alt="" coords="919,81,1081,108"/>
<area shape="rect" id="node9" href="fscrypt__private_8h.html#a1f4b4ee23f3f6ea7869b12de76151f8e" title="fscrypt_alloc_bounce_page" alt="" coords="910,132,1090,159"/>
<area shape="rect" id="node10" href="fscrypt__private_8h.html#ab6ec3c0a289a75033eefc8b0ea9b40b7" title="fname_encrypt" alt="" coords="946,183,1054,209"/>
<area shape="rect" id="node11" href="fscrypt__private_8h.html#a46eac2c4bde9fab84183643a0192aa5b" title="fscrypt_fname_encrypted_size" alt="" coords="900,233,1100,260"/>
<area shape="rect" id="node12" href="fscrypt__private_8h.html#aef01de70fa2d65e2a71d396d958a50cc" title="fscrypt_essiv_cleanup" alt="" coords="924,284,1076,311"/>
<area shape="rect" id="node14" href="keyinfo_8c.html#a62150f287ac661131b5f55152d747120" title="derive_key_aes" alt="" coords="710,183,823,209"/>
<area shape="rect" id="node16" href="keyinfo_8c.html#aaa232e8ce61aaeb9ff6113fba74e11d7" title="derive_essiv_salt" alt="" coords="705,233,828,260"/>
</map>
</div>

</div>
</div>
<a id="a245a5163f1b42ffb7632e4882f84b0bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a245a5163f1b42ffb7632e4882f84b0bb">&#9670;&nbsp;</a></span>EXPORT_SYMBOL_GPL() <span class="overload">[1/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL_GPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hooks_8c.html#a3f3de2a02ff4d691e60414e41663e1e4">fscrypt_file_open</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hooks_8c_a245a5163f1b42ffb7632e4882f84b0bb_icgraph.png" border="0" usemap="#hooks_8c_a245a5163f1b42ffb7632e4882f84b0bb_icgraph" alt=""/></div>
<map name="hooks_8c_a245a5163f1b42ffb7632e4882f84b0bb_icgraph" id="hooks_8c_a245a5163f1b42ffb7632e4882f84b0bb_icgraph">
<area shape="rect" id="node2" href="hooks_8c.html#a3f3de2a02ff4d691e60414e41663e1e4" title="fscrypt_file_open" alt="" coords="254,31,375,57"/>
<area shape="rect" id="node5" href="hooks_8c.html#ae394bea6ef3c93d5d930ed79de0a7e59" title="__fscrypt_prepare_link" alt="" coords="238,81,391,108"/>
<area shape="rect" id="node6" href="hooks_8c.html#a72e0a6acfe632f8fe6dafa6f7dc5ce28" title="__fscrypt_prepare_rename" alt="" coords="227,132,403,159"/>
<area shape="rect" id="node7" href="hooks_8c.html#a3d901665bdb0c44ccb64e006e7d325f1" title="__fscrypt_prepare_lookup" alt="" coords="229,183,400,209"/>
<area shape="rect" id="node8" href="hooks_8c.html#a4994ff526cc2780370bfd5724b6bc836" title="__fscrypt_prepare_symlink" alt="" coords="225,233,404,260"/>
<area shape="rect" id="node9" href="hooks_8c.html#a6ec0cc75d6c22f3889904b361902fce4" title="__fscrypt_encrypt_symlink" alt="" coords="225,284,404,311"/>
<area shape="rect" id="node10" href="hooks_8c.html#ab8e7fd1cb52bbafa2c13f25a43964f24" title="fscrypt_get_symlink" alt="" coords="245,335,384,361"/>
<area shape="rect" id="node3" href="ext4_2file_8c.html#ab175dfc7f2d8e08e594f0bf76a5e2c6a" title="ext4_file_open" alt="" coords="480,5,587,32"/>
<area shape="rect" id="node4" href="f2fs_2file_8c.html#a9ac52feec7919f5962489c8218a86059" title="f2fs_file_open" alt="" coords="482,56,585,83"/>
<area shape="rect" id="node11" href="ubifs_2file_8c.html#a671444db04d3750f8a8ea5bfa1f443ba" title="ubifs_get_link" alt="" coords="482,284,585,311"/>
<area shape="rect" id="node12" href="f2fs_2namei_8c.html#a67812e389664948f4fd87cc493bc1ff7" title="f2fs_encrypted_get_link" alt="" coords="453,335,613,361"/>
<area shape="rect" id="node13" href="ext4_2symlink_8c.html#ac20e006ca1031979cb4cf9cf10355a23" title="ext4_encrypted_get_link" alt="" coords="452,385,615,412"/>
</map>
</div>

</div>
</div>
<a id="ae2d73c5a837ea930654e24e4b6c12ede"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2d73c5a837ea930654e24e4b6c12ede">&#9670;&nbsp;</a></span>EXPORT_SYMBOL_GPL() <span class="overload">[2/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL_GPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hooks_8c.html#ae394bea6ef3c93d5d930ed79de0a7e59">__fscrypt_prepare_link</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8b4f6692c3aac020bf9e2a2598456116"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b4f6692c3aac020bf9e2a2598456116">&#9670;&nbsp;</a></span>EXPORT_SYMBOL_GPL() <span class="overload">[3/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL_GPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hooks_8c.html#a72e0a6acfe632f8fe6dafa6f7dc5ce28">__fscrypt_prepare_rename</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a26f442f8897090c926a708b54c813fdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26f442f8897090c926a708b54c813fdf">&#9670;&nbsp;</a></span>EXPORT_SYMBOL_GPL() <span class="overload">[4/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL_GPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hooks_8c.html#a3d901665bdb0c44ccb64e006e7d325f1">__fscrypt_prepare_lookup</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="af530f5180ef98cc72ada478413a3dc06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af530f5180ef98cc72ada478413a3dc06">&#9670;&nbsp;</a></span>EXPORT_SYMBOL_GPL() <span class="overload">[5/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL_GPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hooks_8c.html#a4994ff526cc2780370bfd5724b6bc836">__fscrypt_prepare_symlink</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a04a4b5d36c5a77892b723537e8679f2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04a4b5d36c5a77892b723537e8679f2c">&#9670;&nbsp;</a></span>EXPORT_SYMBOL_GPL() <span class="overload">[6/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL_GPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hooks_8c.html#a6ec0cc75d6c22f3889904b361902fce4">__fscrypt_encrypt_symlink</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aaf81cc4caf2e79b64d6aa08d3cad80c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf81cc4caf2e79b64d6aa08d3cad80c0">&#9670;&nbsp;</a></span>EXPORT_SYMBOL_GPL() <span class="overload">[7/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL_GPL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hooks_8c.html#ab8e7fd1cb52bbafa2c13f25a43964f24">fscrypt_get_symlink</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3f3de2a02ff4d691e60414e41663e1e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f3de2a02ff4d691e60414e41663e1e4">&#9670;&nbsp;</a></span>fscrypt_file_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fscrypt_file_open </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct file *&#160;</td>
          <td class="paramname"><em>filp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>fscrypt_file_open - prepare to open a possibly-encrypted regular file : the inode being opened : the struct file being set up</p>
<p>Currently, an encrypted regular file can only be opened if its encryption key is available; access to the raw encrypted contents is not supported. Therefore, we first set up the inode's encryption key (if not already done) and return an error if it's unavailable.</p>
<p>We also verify that if the parent directory (from the path via which the file is being opened) is encrypted, then the inode being opened uses the same encryption policy. This is needed as part of the enforcement that all files in an encrypted directory tree use the same encryption policy, as a protection against certain types of offline attacks. Note that this check is needed even when opening an <em>unencrypted</em> file, since it's forbidden to have an unencrypted file in an encrypted directory.</p>
<p>Return: 0 on success, -ENOKEY if the key is missing, or another -errno code </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hooks_8c_a3f3de2a02ff4d691e60414e41663e1e4_cgraph.png" border="0" usemap="#hooks_8c_a3f3de2a02ff4d691e60414e41663e1e4_cgraph" alt=""/></div>
<map name="hooks_8c_a3f3de2a02ff4d691e60414e41663e1e4_cgraph" id="hooks_8c_a3f3de2a02ff4d691e60414e41663e1e4_cgraph">
<area shape="rect" id="node2" href="dcache_8c.html#a42d25474c640cf354d2a2367d7e193de" title="dget_parent" alt="" coords="215,553,306,579"/>
<area shape="rect" id="node3" href="dcache_8c.html#aebcca358185b5176b69b97e7eab12dfd" title="dput" alt="" coords="463,465,509,491"/>
<area shape="rect" id="node31" href="policy_8c.html#a470e0d74ebff755fd4695378f43a85ab" title="fscrypt_has_permitted\l_context" alt="" coords="185,651,336,692"/>
<area shape="rect" id="node50" href="hooks_8c.html#a245a5163f1b42ffb7632e4882f84b0bb" title="EXPORT_SYMBOL_GPL" alt="" coords="175,717,347,743"/>
<area shape="rect" id="node14" href="dcache_8c.html#aeb5ec7bdf3301140d66dd18ae638685c" title="EXPORT_SYMBOL" alt="" coords="1293,451,1432,478"/>
<area shape="rect" id="node4" href="dcache_8c.html#a364a93ebd8b57977a5a90f2076dd8f59" title="fast_dput" alt="" coords="664,350,740,377"/>
<area shape="rect" id="node5" href="dcache_8c.html#a689bf4f6109300b7bc021f1641052f99" title="retain_dentry" alt="" coords="863,502,961,529"/>
<area shape="rect" id="node7" href="dcache_8c.html#a4a5ea078fab8f6527abb7f44aa88efd3" title="dentry_kill" alt="" coords="661,401,743,427"/>
<area shape="rect" id="node6" href="dcache_8c.html#a3b177069d047c319ff2309aa5be9342e" title="d_lru_add" alt="" coords="1106,502,1185,529"/>
<area shape="rect" id="node8" href="dcache_8c.html#aa89b23ccc5b34160480a5b0541255a2e" title="__lock_parent" alt="" coords="1094,401,1197,427"/>
<area shape="rect" id="node9" href="dcache_8c.html#a051b3970369269b3c6fcc1a19be37bed" title="__dentry_kill" alt="" coords="865,274,959,301"/>
<area shape="rect" id="node30" href="dcache_8c.html#a6a36af9be383e7cbabb89162ff8af440" title="lock_parent" alt="" coords="867,350,957,377"/>
<area shape="rect" id="node10" href="dcache_8c.html#aa69465ec94d92f14786fdce2f5bfb175" title="d_lru_del" alt="" coords="1108,249,1183,275"/>
<area shape="rect" id="node11" href="dcache_8c.html#ae4904480d16c7850ae6994e92d110f96" title="__d_drop" alt="" coords="1108,299,1183,326"/>
<area shape="rect" id="node15" href="dcache_8c.html#ae2050a139fbd1eb7bfc238686e1b2e0b" title="dentry_unlist" alt="" coords="1097,350,1193,377"/>
<area shape="rect" id="node16" href="dcache_8c.html#acad4e66a4f8cc5a5bce5cb90bc5d6279" title="dentry_unlink_inode" alt="" coords="1077,71,1214,98"/>
<area shape="rect" id="node24" href="dcache_8c.html#ad8b0a5de190038ed843fa392d181c8a5" title="dentry_free" alt="" coords="1102,198,1189,225"/>
<area shape="rect" id="node12" href="dcache_8c.html#afe7718ea6372af4edd41d375be2b7755" title="___d_drop" alt="" coords="1321,325,1404,351"/>
<area shape="rect" id="node13" href="dcache_8c.html#ad0da24b939325fb96de67394f99b2766" title="d_hash" alt="" coords="1530,325,1594,351"/>
<area shape="rect" id="node17" href="dcache_8c.html#a0858bd86148196ec3ef3606f8f0de24f" title="__d_clear_type_and\l_inode" alt="" coords="1293,5,1432,47"/>
<area shape="rect" id="node18" href="inode_8c.html#a378733dcbf0fb08359b9a02145ac8fc3" title="iput" alt="" coords="1341,71,1384,98"/>
<area shape="rect" id="node19" href="inode_8c.html#a7e99b25ac29d19bc82fbddcb773c4f25" title="iput_final" alt="" coords="1525,71,1599,98"/>
<area shape="rect" id="node23" href="debugfs_2inode_8c.html#a16e485b5debd4cd96a200844c38df190" title="EXPORT_SYMBOL" alt="" coords="1493,21,1631,47"/>
<area shape="rect" id="node20" href="inode_8c.html#a943dee860d20f57552f168683dcb4b5d" title="inode_add_lru" alt="" coords="1702,21,1805,47"/>
<area shape="rect" id="node21" href="fs-writeback_8c.html#aceeba3df6a433f68c665086a2ee53faa" title="write_inode_now" alt="" coords="1694,71,1813,98"/>
<area shape="rect" id="node22" href="inode_8c.html#a1f2fe8883e70882e845560b2ccf4ab16" title="inode_lru_list_del" alt="" coords="1692,122,1815,149"/>
<area shape="rect" id="node25" href="dcache_8c.html#a230d6245e3962408f039e2e33a251d98" title="dname_external" alt="" coords="1305,274,1420,301"/>
<area shape="rect" id="node26" href="dcache_8c.html#a1cda4f5743f52a426fe40cc5cf933675" title="external_name" alt="" coords="1509,122,1615,149"/>
<area shape="rect" id="node27" href="dcache_8c.html#a9017dd31269b4b6d79821de35551ae41" title="__d_free_external" alt="" coords="1300,173,1425,199"/>
<area shape="rect" id="node29" href="dcache_8c.html#a7d181ee17b4a49e02eac0f247fd484a9" title="__d_free" alt="" coords="1327,223,1399,250"/>
<area shape="rect" id="node28" href="dcache_8c.html#a711826e19d5ad53c7b0bbe26a878cfff" title="__d_free_external_name" alt="" coords="1480,173,1644,199"/>
<area shape="rect" id="node32" href="keyinfo_8c.html#a7621dfa0cb2b35172414c30b08e5aedd" title="fscrypt_get_encryption_info" alt="" coords="395,679,577,706"/>
<area shape="rect" id="node49" href="policy_8c.html#a0def849d9429e6e706212fd82725f01f" title="EXPORT_SYMBOL" alt="" coords="417,730,555,757"/>
<area shape="rect" id="node33" href="crypto_2crypto_8c.html#af669c5cf0f50c0c619742704b6cffdf1" title="fscrypt_initialize" alt="" coords="854,654,970,681"/>
<area shape="rect" id="node35" href="keyinfo_8c.html#ad49967fa4f85bb4a389049107d05fca4" title="determine_cipher_type" alt="" coords="625,755,779,782"/>
<area shape="rect" id="node43" href="keyinfo_8c.html#a48063b8ae6a6e8cf7a1ef357b5533c26" title="validate_user_key" alt="" coords="639,806,765,833"/>
<area shape="rect" id="node45" href="keyinfo_8c.html#a1896e254e43274fa245243395c8b5ebd" title="init_essiv_generator" alt="" coords="633,857,771,883"/>
<area shape="rect" id="node47" href="keyinfo_8c.html#ab93f9769891ed56942bf6e50c5d52ef9" title="put_crypt_info" alt="" coords="650,603,754,630"/>
<area shape="rect" id="node48" href="keyinfo_8c.html#a76c4eeea0a83fb479a90b30e219ffc0a" title="EXPORT_SYMBOL" alt="" coords="633,654,771,681"/>
<area shape="rect" id="node34" href="crypto_2crypto_8c.html#afcd39fa09504d43e663466794cbbe1eb" title="fscrypt_destroy" alt="" coords="1307,705,1419,731"/>
<area shape="rect" id="node36" href="fscrypt__private_8h.html#ab15ec3d0df2bcbd4968ae8d58e0bb088" title="fscrypt_valid_enc_modes" alt="" coords="827,755,997,782"/>
<area shape="rect" id="node37" href="fscrypt__private_8h.html#af669c5cf0f50c0c619742704b6cffdf1" title="fscrypt_initialize" alt="" coords="1087,806,1203,833"/>
<area shape="rect" id="node38" href="fscrypt__private_8h.html#a54b1c5526cd4eccd22ebb1e73c3fc385" title="fscrypt_do_page_crypto" alt="" coords="1065,857,1226,883"/>
<area shape="rect" id="node39" href="fscrypt__private_8h.html#a1f4b4ee23f3f6ea7869b12de76151f8e" title="fscrypt_alloc_bounce_page" alt="" coords="1055,907,1235,934"/>
<area shape="rect" id="node40" href="fscrypt__private_8h.html#ab6ec3c0a289a75033eefc8b0ea9b40b7" title="fname_encrypt" alt="" coords="1091,654,1199,681"/>
<area shape="rect" id="node41" href="fscrypt__private_8h.html#a46eac2c4bde9fab84183643a0192aa5b" title="fscrypt_fname_encrypted_size" alt="" coords="1045,705,1245,731"/>
<area shape="rect" id="node42" href="fscrypt__private_8h.html#aef01de70fa2d65e2a71d396d958a50cc" title="fscrypt_essiv_cleanup" alt="" coords="1069,755,1221,782"/>
<area shape="rect" id="node44" href="keyinfo_8c.html#a62150f287ac661131b5f55152d747120" title="derive_key_aes" alt="" coords="855,806,969,833"/>
<area shape="rect" id="node46" href="keyinfo_8c.html#aaa232e8ce61aaeb9ff6113fba74e11d7" title="derive_essiv_salt" alt="" coords="851,857,973,883"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hooks_8c_a3f3de2a02ff4d691e60414e41663e1e4_icgraph.png" border="0" usemap="#hooks_8c_a3f3de2a02ff4d691e60414e41663e1e4_icgraph" alt=""/></div>
<map name="hooks_8c_a3f3de2a02ff4d691e60414e41663e1e4_icgraph" id="hooks_8c_a3f3de2a02ff4d691e60414e41663e1e4_icgraph">
<area shape="rect" id="node2" href="ext4_2file_8c.html#ab175dfc7f2d8e08e594f0bf76a5e2c6a" title="ext4_file_open" alt="" coords="175,5,281,32"/>
<area shape="rect" id="node3" href="f2fs_2file_8c.html#a9ac52feec7919f5962489c8218a86059" title="f2fs_file_open" alt="" coords="177,56,279,83"/>
</map>
</div>

</div>
</div>
<a id="ab8e7fd1cb52bbafa2c13f25a43964f24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8e7fd1cb52bbafa2c13f25a43964f24">&#9670;&nbsp;</a></span>fscrypt_get_symlink()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* fscrypt_get_symlink </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>caddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>max_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct delayed_call *&#160;</td>
          <td class="paramname"><em>done</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>fscrypt_get_symlink - get the target of an encrypted symlink : the symlink inode : the on-disk contents of the symlink : size of  buffer : if successful, will be set up to free the returned target</p>
<p>If the symlink's encryption key is available, we decrypt its target. Otherwise, we encode its target for presentation.</p>
<p>This may sleep, so the filesystem must have dropped out of RCU mode already.</p>
<p>Return: the presentable symlink target or an ERR_PTR() </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hooks_8c_ab8e7fd1cb52bbafa2c13f25a43964f24_cgraph.png" border="0" usemap="#hooks_8c_ab8e7fd1cb52bbafa2c13f25a43964f24_cgraph" alt=""/></div>
<map name="hooks_8c_ab8e7fd1cb52bbafa2c13f25a43964f24_cgraph" id="hooks_8c_ab8e7fd1cb52bbafa2c13f25a43964f24_cgraph">
<area shape="rect" id="node2" href="keyinfo_8c.html#a7621dfa0cb2b35172414c30b08e5aedd" title="fscrypt_get_encryption_info" alt="" coords="192,233,375,260"/>
<area shape="rect" id="node19" href="fname_8c.html#a466dc194082c49b7a7c95921e14d7873" title="fscrypt_fname_alloc\l_buffer" alt="" coords="214,395,353,437"/>
<area shape="rect" id="node21" href="fname_8c.html#a0154256f4fda99802319c5aefb193c83" title="fscrypt_fname_disk\l_to_usr" alt="" coords="215,470,351,511"/>
<area shape="rect" id="node26" href="libfs_8c.html#a9dbd35c56f12051aead4bb8bf1c40e23" title="kfree_link" alt="" coords="244,536,323,563"/>
<area shape="rect" id="node28" href="hooks_8c.html#a245a5163f1b42ffb7632e4882f84b0bb" title="EXPORT_SYMBOL_GPL" alt="" coords="197,587,369,613"/>
<area shape="rect" id="node3" href="crypto_2crypto_8c.html#af669c5cf0f50c0c619742704b6cffdf1" title="fscrypt_initialize" alt="" coords="651,31,767,57"/>
<area shape="rect" id="node5" href="keyinfo_8c.html#ad49967fa4f85bb4a389049107d05fca4" title="determine_cipher_type" alt="" coords="423,132,576,159"/>
<area shape="rect" id="node13" href="keyinfo_8c.html#a48063b8ae6a6e8cf7a1ef357b5533c26" title="validate_user_key" alt="" coords="436,183,563,209"/>
<area shape="rect" id="node15" href="keyinfo_8c.html#a1896e254e43274fa245243395c8b5ebd" title="init_essiv_generator" alt="" coords="430,233,569,260"/>
<area shape="rect" id="node17" href="keyinfo_8c.html#ab93f9769891ed56942bf6e50c5d52ef9" title="put_crypt_info" alt="" coords="447,284,551,311"/>
<area shape="rect" id="node18" href="keyinfo_8c.html#a76c4eeea0a83fb479a90b30e219ffc0a" title="EXPORT_SYMBOL" alt="" coords="430,335,569,361"/>
<area shape="rect" id="node4" href="crypto_2crypto_8c.html#afcd39fa09504d43e663466794cbbe1eb" title="fscrypt_destroy" alt="" coords="1091,5,1203,32"/>
<area shape="rect" id="node6" href="fscrypt__private_8h.html#ab15ec3d0df2bcbd4968ae8d58e0bb088" title="fscrypt_valid_enc_modes" alt="" coords="624,132,795,159"/>
<area shape="rect" id="node7" href="fscrypt__private_8h.html#af669c5cf0f50c0c619742704b6cffdf1" title="fscrypt_initialize" alt="" coords="885,31,1001,57"/>
<area shape="rect" id="node8" href="fscrypt__private_8h.html#a54b1c5526cd4eccd22ebb1e73c3fc385" title="fscrypt_do_page_crypto" alt="" coords="862,81,1023,108"/>
<area shape="rect" id="node9" href="fscrypt__private_8h.html#a1f4b4ee23f3f6ea7869b12de76151f8e" title="fscrypt_alloc_bounce_page" alt="" coords="853,132,1033,159"/>
<area shape="rect" id="node10" href="fscrypt__private_8h.html#ab6ec3c0a289a75033eefc8b0ea9b40b7" title="fname_encrypt" alt="" coords="889,183,997,209"/>
<area shape="rect" id="node11" href="fscrypt__private_8h.html#a46eac2c4bde9fab84183643a0192aa5b" title="fscrypt_fname_encrypted_size" alt="" coords="843,233,1043,260"/>
<area shape="rect" id="node12" href="fscrypt__private_8h.html#aef01de70fa2d65e2a71d396d958a50cc" title="fscrypt_essiv_cleanup" alt="" coords="867,284,1019,311"/>
<area shape="rect" id="node14" href="keyinfo_8c.html#a62150f287ac661131b5f55152d747120" title="derive_key_aes" alt="" coords="653,183,766,209"/>
<area shape="rect" id="node16" href="keyinfo_8c.html#aaa232e8ce61aaeb9ff6113fba74e11d7" title="derive_essiv_salt" alt="" coords="648,233,771,260"/>
<area shape="rect" id="node20" href="fname_8c.html#a6b9fe804ecd944aa7be9d561bd95e305" title="EXPORT_SYMBOL" alt="" coords="430,385,569,412"/>
<area shape="rect" id="node22" href="fname_8c.html#a7fc480964060c81a26e1769c11b279df" title="fscrypt_is_dot_dotdot" alt="" coords="426,436,573,463"/>
<area shape="rect" id="node23" href="fname_8c.html#aeafa0e0539cb62633757b383848fbda4" title="fname_decrypt" alt="" coords="445,487,553,513"/>
<area shape="rect" id="node24" href="fname_8c.html#a15be4ca3b9156d8914a6b91100949d0f" title="digest_encode" alt="" coords="446,537,553,564"/>
<area shape="rect" id="node25" href="block__dev_8c.html#a79868b6f75989a03b1ad72c771d39cc1" title="hash" alt="" coords="474,588,525,615"/>
<area shape="rect" id="node27" href="libfs_8c.html#a91c91ea39de851f32fce31e8967ceda2" title="EXPORT_SYMBOL" alt="" coords="430,639,569,665"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hooks_8c_ab8e7fd1cb52bbafa2c13f25a43964f24_icgraph.png" border="0" usemap="#hooks_8c_ab8e7fd1cb52bbafa2c13f25a43964f24_icgraph" alt=""/></div>
<map name="hooks_8c_ab8e7fd1cb52bbafa2c13f25a43964f24_icgraph" id="hooks_8c_ab8e7fd1cb52bbafa2c13f25a43964f24_icgraph">
<area shape="rect" id="node2" href="ubifs_2file_8c.html#a671444db04d3750f8a8ea5bfa1f443ba" title="ubifs_get_link" alt="" coords="222,5,325,32"/>
<area shape="rect" id="node3" href="f2fs_2namei_8c.html#a67812e389664948f4fd87cc493bc1ff7" title="f2fs_encrypted_get_link" alt="" coords="193,56,353,83"/>
<area shape="rect" id="node4" href="ext4_2symlink_8c.html#ac20e006ca1031979cb4cf9cf10355a23" title="ext4_encrypted_get_link" alt="" coords="192,107,355,133"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_53403d93963d3f5d2fcffd0698f5bddb.html">crypto</a></li><li class="navelem"><a class="el" href="hooks_8c.html">hooks.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>

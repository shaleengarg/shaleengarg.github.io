<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>linux/fs: ubifs/journal.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">linux/fs
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('ubifs_2journal_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">journal.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="ubifs_8h_source.html">ubifs.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for journal.c:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c__incl.png" border="0" usemap="#ubifs_2journal_8c" alt=""/></div>
<map name="ubifs_2journal_8c" id="ubifs_2journal_8c">
<area shape="rect" id="node2" href="ubifs_8h.html" title="ubifs.h" alt="" coords="1225,80,1287,107"/>
<area shape="rect" id="node20" href="ubifs-media_8h.html" title="ubifs&#45;media.h" alt="" coords="2143,155,2243,181"/>
<area shape="rect" id="node21" href="ubifs_2debug_8h.html" title="debug.h" alt="" coords="2267,155,2335,181"/>
<area shape="rect" id="node22" href="misc_8h.html" title="misc.h" alt="" coords="2360,155,2421,181"/>
<area shape="rect" id="node23" href="key_8h.html" title="key.h" alt="" coords="2446,155,2501,181"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aac219494a71f5ce5fa3f2c70f53660ef"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2journal_8c.html#aac219494a71f5ce5fa3f2c70f53660ef">zero_ino_node_unused</a> (struct <a class="el" href="structubifs__ino__node.html">ubifs_ino_node</a> *<a class="el" href="xfs__export_8h.html#ace6b53078098dab03e74e0bc1eab5eb8">ino</a>)</td></tr>
<tr class="separator:aac219494a71f5ce5fa3f2c70f53660ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4ece295a2679c7b5d2b9ddf9b553dd4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2journal_8c.html#ae4ece295a2679c7b5d2b9ddf9b553dd4">zero_dent_node_unused</a> (struct <a class="el" href="structubifs__dent__node.html">ubifs_dent_node</a> *dent)</td></tr>
<tr class="separator:ae4ece295a2679c7b5d2b9ddf9b553dd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0192ba0f1c902266317f5be8a385aff5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2journal_8c.html#a0192ba0f1c902266317f5be8a385aff5">zero_trun_node_unused</a> (struct <a class="el" href="structubifs__trun__node.html">ubifs_trun_node</a> *trun)</td></tr>
<tr class="separator:a0192ba0f1c902266317f5be8a385aff5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a920088cf70f88cbb1142294e99e688d6"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2journal_8c.html#a920088cf70f88cbb1142294e99e688d6">reserve_space</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, int jhead, int <a class="el" href="rock_8h.html#aa1460ec7ef11d3c3a91c8ee9fb6380d5">len</a>)</td></tr>
<tr class="separator:a920088cf70f88cbb1142294e99e688d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7285ba71f1d541318b61943bcc8e756f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2journal_8c.html#a7285ba71f1d541318b61943bcc8e756f">write_node</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, int jhead, void *node, int <a class="el" href="rock_8h.html#aa1460ec7ef11d3c3a91c8ee9fb6380d5">len</a>, int *lnum, int *offs)</td></tr>
<tr class="separator:a7285ba71f1d541318b61943bcc8e756f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b58fdc3cf3fe2765984565c1b77d21e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2journal_8c.html#a6b58fdc3cf3fe2765984565c1b77d21e">write_head</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, int jhead, void *buf, int <a class="el" href="rock_8h.html#aa1460ec7ef11d3c3a91c8ee9fb6380d5">len</a>, int *lnum, int *offs, int sync)</td></tr>
<tr class="separator:a6b58fdc3cf3fe2765984565c1b77d21e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e3ce1f566393c4f8de0ea9c7eeedb42"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42">make_reservation</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, int jhead, int <a class="el" href="rock_8h.html#aa1460ec7ef11d3c3a91c8ee9fb6380d5">len</a>)</td></tr>
<tr class="separator:a2e3ce1f566393c4f8de0ea9c7eeedb42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bb32d44ef1e02992210b7412754de3c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2journal_8c.html#a9bb32d44ef1e02992210b7412754de3c">release_head</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, int jhead)</td></tr>
<tr class="separator:a9bb32d44ef1e02992210b7412754de3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb1bef600a6aa118b19e228194c5be1d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2journal_8c.html#abb1bef600a6aa118b19e228194c5be1d">finish_reservation</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:abb1bef600a6aa118b19e228194c5be1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d4a541700f9d4bf038cadbf4e097454"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2journal_8c.html#a1d4a541700f9d4bf038cadbf4e097454">get_dent_type</a> (int mode)</td></tr>
<tr class="separator:a1d4a541700f9d4bf038cadbf4e097454"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af33a1a0e7af2c23d625797b7d30a09fe"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2journal_8c.html#af33a1a0e7af2c23d625797b7d30a09fe">pack_inode</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, struct <a class="el" href="structubifs__ino__node.html">ubifs_ino_node</a> *<a class="el" href="xfs__export_8h.html#ace6b53078098dab03e74e0bc1eab5eb8">ino</a>, const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *<a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a>, int last)</td></tr>
<tr class="separator:af33a1a0e7af2c23d625797b7d30a09fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed47b114c8f20052b62f78e27cbada07"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2journal_8c.html#aed47b114c8f20052b62f78e27cbada07">mark_inode_clean</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, struct <a class="el" href="structubifs__inode.html">ubifs_inode</a> *ui)</td></tr>
<tr class="separator:aed47b114c8f20052b62f78e27cbada07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a7b991169dcd5003fd4ccd4dbe0a199"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2journal_8c.html#a9a7b991169dcd5003fd4ccd4dbe0a199">set_dent_cookie</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, struct <a class="el" href="structubifs__dent__node.html">ubifs_dent_node</a> *dent)</td></tr>
<tr class="separator:a9a7b991169dcd5003fd4ccd4dbe0a199"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad342a112d6f683c94399a45a14ec3aef"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2journal_8c.html#ad342a112d6f683c94399a45a14ec3aef">ubifs_jnl_update</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *dir, const struct fscrypt_name *nm, const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *<a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a>, int deletion, int xent)</td></tr>
<tr class="separator:ad342a112d6f683c94399a45a14ec3aef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ed51b8a566d5776a783b6f955c32cf5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2journal_8c.html#a9ed51b8a566d5776a783b6f955c32cf5">ubifs_jnl_write_data</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *<a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a>, const union <a class="el" href="unionubifs__key.html">ubifs_key</a> *<a class="el" href="cifspdu_8h.html#a63d44da4c2019b7ae1dd3c4e15b887aa">key</a>, const void *buf, int <a class="el" href="rock_8h.html#aa1460ec7ef11d3c3a91c8ee9fb6380d5">len</a>)</td></tr>
<tr class="separator:a9ed51b8a566d5776a783b6f955c32cf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c1bde924b99b7852408656e18230d99"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2journal_8c.html#a8c1bde924b99b7852408656e18230d99">ubifs_jnl_write_inode</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *<a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a>)</td></tr>
<tr class="separator:a8c1bde924b99b7852408656e18230d99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae33ce80e24113a8224187cb917d0c09"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2journal_8c.html#aae33ce80e24113a8224187cb917d0c09">ubifs_jnl_delete_inode</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *<a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a>)</td></tr>
<tr class="separator:aae33ce80e24113a8224187cb917d0c09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a295cfad6549230751ca3d670fd12fc12"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2journal_8c.html#a295cfad6549230751ca3d670fd12fc12">ubifs_jnl_xrename</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *fst_dir, const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *fst_inode, const struct fscrypt_name *fst_nm, const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *snd_dir, const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *snd_inode, const struct fscrypt_name *snd_nm, int sync)</td></tr>
<tr class="separator:a295cfad6549230751ca3d670fd12fc12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6387ea48fd6825a567f58c2786bee56"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2journal_8c.html#ab6387ea48fd6825a567f58c2786bee56">ubifs_jnl_rename</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *old_dir, const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *old_inode, const struct fscrypt_name *old_nm, const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *<a class="el" href="proc__sysctl_8c.html#aba72ac0468502015dfce9545fb0650f2">new_dir</a>, const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *<a class="el" href="inode_8c.html#ae03a9f08d4efbf91ff44e29c1369314e">new_inode</a>, const struct fscrypt_name *new_nm, const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *whiteout, int sync)</td></tr>
<tr class="separator:ab6387ea48fd6825a567f58c2786bee56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a687e1b07880f8f06558ceefc741d0465"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2journal_8c.html#a687e1b07880f8f06558ceefc741d0465">truncate_data_node</a> (const struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *<a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a>, unsigned int <a class="el" href="sysv_2super_8c.html#a6f5f3480b66f3cc414fd0d6dfcf54046">block</a>, struct <a class="el" href="structubifs__data__node.html">ubifs_data_node</a> *dn, int *new_len)</td></tr>
<tr class="separator:a687e1b07880f8f06558ceefc741d0465"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a2057b667417cf20bfd05deb79a8a0e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2journal_8c.html#a2a2057b667417cf20bfd05deb79a8a0e">ubifs_jnl_truncate</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *<a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a>, loff_t old_size, loff_t new_size)</td></tr>
<tr class="separator:a2a2057b667417cf20bfd05deb79a8a0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75ae3c25abba8f076e8d4e000ffcf45d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2journal_8c.html#a75ae3c25abba8f076e8d4e000ffcf45d">ubifs_jnl_delete_xattr</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *host, const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *<a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a>, const struct fscrypt_name *nm)</td></tr>
<tr class="separator:a75ae3c25abba8f076e8d4e000ffcf45d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2a925546250edb0d98c2bd2cc71fb9e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2journal_8c.html#ac2a925546250edb0d98c2bd2cc71fb9e">ubifs_jnl_change_xattr</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *<a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a>, const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *host)</td></tr>
<tr class="separator:ac2a925546250edb0d98c2bd2cc71fb9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="abb1bef600a6aa118b19e228194c5be1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb1bef600a6aa118b19e228194c5be1d">&#9670;&nbsp;</a></span>finish_reservation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void finish_reservation </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>finish_reservation - finish a reservation. <code></code>: UBIFS file-system description object</p>
<p>This function finishes journal space reservation. It must be called after '<a class="el" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42">make_reservation()</a>'. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_abb1bef600a6aa118b19e228194c5be1d_icgraph.png" border="0" usemap="#ubifs_2journal_8c_abb1bef600a6aa118b19e228194c5be1d_icgraph" alt=""/></div>
<map name="ubifs_2journal_8c_abb1bef600a6aa118b19e228194c5be1d_icgraph" id="ubifs_2journal_8c_abb1bef600a6aa118b19e228194c5be1d_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="195,335,311,361"/>
<area shape="rect" id="node19" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="185,664,322,691"/>
<area shape="rect" id="node24" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="182,765,325,792"/>
<area shape="rect" id="node28" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="190,613,317,640"/>
<area shape="rect" id="node30" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="193,563,313,589"/>
<area shape="rect" id="node31" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="191,715,315,741"/>
<area shape="rect" id="node32" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="181,63,326,89"/>
<area shape="rect" id="node34" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="177,171,329,197"/>
<area shape="rect" id="node3" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="407,107,498,133"/>
<area shape="rect" id="node8" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="406,157,499,184"/>
<area shape="rect" id="node9" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="411,461,494,488"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="414,208,491,235"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="407,259,498,285"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="409,309,496,336"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="408,360,497,387"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="405,411,501,437"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="401,512,504,539"/>
<area shape="rect" id="node4" href="ubifs_2xattr_8c.html#a2c0f8e28d408b8e89b4ce7d6047af912" title="ubifs_xattr_set" alt="" coords="583,56,691,83"/>
<area shape="rect" id="node5" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="761,5,894,32"/>
<area shape="rect" id="node6" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="956,31,1029,57"/>
<area shape="rect" id="node7" href="ubifs_2crypto_8c.html#a4984848c1f6ebc630f98d30a9bbf2ed3" title="ubifs_crypt_set_context" alt="" coords="747,107,908,133"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="589,461,685,488"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="594,563,681,589"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="777,588,877,615"/>
<area shape="rect" id="node20" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="403,664,502,691"/>
<area shape="rect" id="node21" href="ubifs_2file_8c.html#a2ad22c013a0dccfd9f49e114ed89dfa6" title="ubifs_writepage" alt="" coords="581,664,694,691"/>
<area shape="rect" id="node22" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="587,715,687,741"/>
<area shape="rect" id="node23" href="ubifs_8h.html#aaebf1c80e366c0f2702f58b91d7a9d38" title="ubifs_setattr" alt="" coords="780,715,875,741"/>
<area shape="rect" id="node25" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="391,816,514,843"/>
<area shape="rect" id="node26" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="377,765,528,792"/>
<area shape="rect" id="node27" href="ubifs_2super_8c.html#a063c51fb658c01f325e4a0744d2f28ce" title="ubifs_evict_inode" alt="" coords="576,765,699,792"/>
<area shape="rect" id="node29" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="584,613,691,640"/>
<area shape="rect" id="node33" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="588,5,687,32"/>
<area shape="rect" id="node35" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="404,56,501,83"/>
</map>
</div>

</div>
</div>
<a id="a1d4a541700f9d4bf038cadbf4e097454"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d4a541700f9d4bf038cadbf4e097454">&#9670;&nbsp;</a></span>get_dent_type()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int get_dent_type </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>get_dent_type - translate VFS inode mode to UBIFS directory entry type. : inode mode </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_a1d4a541700f9d4bf038cadbf4e097454_icgraph.png" border="0" usemap="#ubifs_2journal_8c_a1d4a541700f9d4bf038cadbf4e097454_icgraph" alt=""/></div>
<map name="ubifs_2journal_8c_a1d4a541700f9d4bf038cadbf4e097454_icgraph" id="ubifs_2journal_8c_a1d4a541700f9d4bf038cadbf4e097454_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="172,335,288,361"/>
<area shape="rect" id="node19" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="167,5,293,32"/>
<area shape="rect" id="node21" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="170,56,290,83"/>
<area shape="rect" id="node22" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="157,107,303,133"/>
<area shape="rect" id="node3" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="357,563,447,589"/>
<area shape="rect" id="node8" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="355,157,449,184"/>
<area shape="rect" id="node9" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="361,208,443,235"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="363,309,441,336"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="357,360,447,387"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="359,411,445,437"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="357,461,447,488"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="354,512,450,539"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="351,259,453,285"/>
<area shape="rect" id="node4" href="ubifs_2xattr_8c.html#a2c0f8e28d408b8e89b4ce7d6047af912" title="ubifs_xattr_set" alt="" coords="501,411,609,437"/>
<area shape="rect" id="node5" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="671,335,805,361"/>
<area shape="rect" id="node6" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="867,360,940,387"/>
<area shape="rect" id="node7" href="ubifs_2crypto_8c.html#a4984848c1f6ebc630f98d30a9bbf2ed3" title="ubifs_crypt_set_context" alt="" coords="657,436,819,463"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="507,208,603,235"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="512,56,599,83"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="688,31,788,57"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="502,5,609,32"/>
<area shape="rect" id="node23" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="506,132,605,159"/>
</map>
</div>

</div>
</div>
<a id="a2e3ce1f566393c4f8de0ea9c7eeedb42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e3ce1f566393c4f8de0ea9c7eeedb42">&#9670;&nbsp;</a></span>make_reservation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int make_reservation </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>jhead</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>make_reservation - reserve journal space. <code></code>: UBIFS file-system description object : journal head : how many bytes to reserve</p>
<p>This function makes space reservation in journal head . The function takes the commit lock and locks the journal head, and the caller has to unlock the head and finish the reservation with '<a class="el" href="ubifs_2journal_8c.html#abb1bef600a6aa118b19e228194c5be1d">finish_reservation()</a>'. Returns zero in case of success and a negative error code in case of failure.</p>
<p>Note, the journal head may be unlocked as soon as the data is written, while the commit lock has to be released after the data has been added to the TNC. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_a2e3ce1f566393c4f8de0ea9c7eeedb42_cgraph.png" border="0" usemap="#ubifs_2journal_8c_a2e3ce1f566393c4f8de0ea9c7eeedb42_cgraph" alt=""/></div>
<map name="ubifs_2journal_8c_a2e3ce1f566393c4f8de0ea9c7eeedb42_cgraph" id="ubifs_2journal_8c_a2e3ce1f566393c4f8de0ea9c7eeedb42_cgraph">
<area shape="rect" id="node2" href="ubifs_2journal_8c.html#a920088cf70f88cbb1142294e99e688d6" title="reserve_space" alt="" coords="358,745,465,771"/>
<area shape="rect" id="node10" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1434,1175,1506,1202"/>
<area shape="rect" id="node12" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="1593,1386,1679,1413"/>
<area shape="rect" id="node33" href="ubifs_2commit_8c.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="179,1378,304,1405"/>
<area shape="rect" id="node39" href="ubifs_2debug_8h.html#a69534405790cc12f492343243bc539a4" title="dbg_check_lprops" alt="" coords="538,1581,665,1607"/>
<area shape="rect" id="node42" href="ubifs_2debug_8c.html#a2fa0aeaaa556f0b13d098456ef7d86d4" title="ubifs_dump_lprops" alt="" coords="972,1378,1103,1405"/>
<area shape="rect" id="node47" href="ubifs_2debug_8c.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="975,1783,1099,1810"/>
<area shape="rect" id="node3" href="find_8c.html#a1f03e32ffa32d28279f1eaf0f81c4a5f" title="ubifs_find_free_space" alt="" coords="963,302,1112,329"/>
<area shape="rect" id="node13" href="ubifs_2debug_8c.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="1429,1226,1511,1253"/>
<area shape="rect" id="node14" href="ubifs_2gc_8c.html#a6aba86bcae816613915e10318fdf6b83" title="ubifs_garbage_collect" alt="" coords="527,567,675,594"/>
<area shape="rect" id="node20" href="ubifs_2io_8c.html#a3e6d29ad192528c05f246cd31a1732fb" title="ubifs_wbuf_sync_nolock" alt="" coords="955,567,1120,594"/>
<area shape="rect" id="node24" href="misc_8h.html#a61ad06675d59063a2171172f8ba94c79" title="ubifs_return_leb" alt="" coords="761,213,875,239"/>
<area shape="rect" id="node25" href="ubifs_2log_8c.html#a8b30a0dc99186d8f07ee2f47693f11b7" title="ubifs_add_bud_to_log" alt="" coords="744,973,892,999"/>
<area shape="rect" id="node32" href="ubifs_2io_8c.html#a4bf09b0b677c1ca6d0b034d91281d2f3" title="ubifs_wbuf_seek_nolock" alt="" coords="519,1125,684,1151"/>
<area shape="rect" id="node4" href="misc_8h.html#aa89c2768eb94f129c6afbe47420b44ba" title="ubifs_get_lprops" alt="" coords="1411,289,1529,315"/>
<area shape="rect" id="node5" href="find_8c.html#abaf7fbdbbbdd6300b6252efcc5494325" title="do_find_free_space" alt="" coords="1191,390,1326,417"/>
<area shape="rect" id="node7" href="lprops_8c.html#abfc4c6a75b37762f214cbc91f0ebe664" title="ubifs_change_lp" alt="" coords="1201,187,1317,214"/>
<area shape="rect" id="node8" href="misc_8h.html#a6dce2c34ec97d74cf4be59e0201bdb3e" title="ubifs_release_lprops" alt="" coords="1399,238,1541,265"/>
<area shape="rect" id="node9" href="ubifs_2io_8c.html#ad9d3a62a61d21e1faa60cd6e630c41ac" title="ubifs_leb_unmap" alt="" coords="1199,694,1319,721"/>
<area shape="rect" id="node6" href="lpt_8c.html#a34800df1b6052b492ca05c589dfec386" title="ubifs_lpt_scan_nolock" alt="" coords="1395,567,1545,594"/>
<area shape="rect" id="node11" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="1417,897,1523,923"/>
<area shape="rect" id="node15" href="ubifs_2commit_8c.html#a18183f6ca9e5e865909aa32d50f4be4b" title="ubifs_gc_should_commit" alt="" coords="735,466,901,493"/>
<area shape="rect" id="node16" href="ubifs_2commit_8c.html#a6e9dcff4b0f768c14f6f8448f4b1343e" title="ubifs_commit_required" alt="" coords="961,821,1114,847"/>
<area shape="rect" id="node17" href="find_8c.html#aa0e0f58e74f915d84712f6a1367b75d0" title="ubifs_find_dirty_leb" alt="" coords="970,111,1105,138"/>
<area shape="rect" id="node18" href="ubifs_2gc_8c.html#a29dd378f4b22d45580bff155cbb275cd" title="ubifs_garbage_collect_leb" alt="" coords="732,517,904,543"/>
<area shape="rect" id="node19" href="lprops_8c.html#aeb3c0f6274cdeba0c778d57f29ab39bf" title="ubifs_change_one_lp" alt="" coords="965,201,1109,227"/>
<area shape="rect" id="node21" href="ubifs_2io_8c.html#aeef91391de4e0f46023ab0afac3a2335" title="cancel_wbuf_timer_nolock" alt="" coords="1171,542,1347,569"/>
<area shape="rect" id="node22" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="1219,491,1298,518"/>
<area shape="rect" id="node23" href="ubifs_2io_8c.html#a02909cfc9d3a0100f549390c7d464632" title="ubifs_leb_write" alt="" coords="1204,947,1313,974"/>
<area shape="rect" id="node26" href="ubifs_2log_8c.html#a3dd7859b83714ed7d9692cf92a391fd9" title="empty_log_bytes" alt="" coords="977,871,1098,898"/>
<area shape="rect" id="node27" href="ubifs_2commit_8c.html#a6c27328fd39184ba2e1bdfa1970275e7" title="ubifs_request_bg_commit" alt="" coords="952,922,1123,949"/>
<area shape="rect" id="node28" href="misc_8h.html#abf53e0ff9d9f9f6fefb9a9efbf709496" title="ubifs_next_log_lnum" alt="" coords="967,973,1108,999"/>
<area shape="rect" id="node29" href="ubifs_2io_8c.html#a8d3619a60498527530b0ed01ba5c6a82" title="ubifs_leb_map" alt="" coords="1205,1023,1312,1050"/>
<area shape="rect" id="node30" href="ubifs_2io_8c.html#a5e156b540025dd2266e7f4c6c302356e" title="ubifs_write_node" alt="" coords="977,1074,1097,1101"/>
<area shape="rect" id="node31" href="ubifs_2log_8c.html#a3366b2b2350ca5e120af4be6f2e67b79" title="ubifs_add_bud" alt="" coords="1205,1125,1312,1151"/>
<area shape="rect" id="node34" href="ubifs_2commit_8c.html#a8066477fd4d182a562575fec9c1460f9" title="wait_for_commit" alt="" coords="352,1378,471,1405"/>
<area shape="rect" id="node35" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="368,1327,455,1354"/>
<area shape="rect" id="node36" href="ubifs_2commit_8c.html#a349da7e934725810c922b20daec868ae" title="nothing_to_commit" alt="" coords="535,1378,667,1405"/>
<area shape="rect" id="node37" href="misc_8h.html#af8fd16c04f42f2a56d86f0f7a4924ecc" title="ubifs_wbuf_sync" alt="" coords="758,770,878,797"/>
<area shape="rect" id="node38" href="ubifs_2gc_8c.html#a1ff584f97bf8a1783fc9fecde0a87b1e" title="ubifs_gc_start_commit" alt="" coords="960,365,1115,391"/>
<area shape="rect" id="node43" href="lprops_8c.html#a8a4a969b18d269964ff80d11eb94b8ab" title="ubifs_get_lp_stats" alt="" coords="1195,1277,1323,1303"/>
<area shape="rect" id="node40" href="ubifs_2debug_8h.html#ab66d4ac998d5cd15774f5a22d366e1f1" title="dbg_is_chk_lprops" alt="" coords="972,1682,1103,1709"/>
<area shape="rect" id="node41" href="lprops_8c.html#a14844fa99e1b9a5c6519cb82bd423fc5" title="scan_check_cb" alt="" coords="761,1631,875,1658"/>
<area shape="rect" id="node50" href="lprops_8c.html#a4d24d720745a25e26d273dc892c703eb" title="dbg_check_cats" alt="" coords="759,1733,877,1759"/>
<area shape="rect" id="node44" href="ubifs_2debug_8c.html#ab351e7abb59edb97d57bd44dd83b0484" title="ubifs_dump_lstats" alt="" coords="1195,1378,1323,1405"/>
<area shape="rect" id="node45" href="lprops_8c.html#a1eb6fc2cca5a1e34192e3c54b90d3057" title="ubifs_read_one_lp" alt="" coords="1195,593,1322,619"/>
<area shape="rect" id="node46" href="ubifs_2debug_8c.html#ad04e55858b69b78f20ea8b0fb79f9f27" title="ubifs_dump_lprop" alt="" coords="1197,1327,1321,1354"/>
<area shape="rect" id="node48" href="budget_8c.html#adaa1427281786d8bfca793236b5f0457" title="ubifs_calc_available" alt="" coords="1401,1821,1539,1847"/>
<area shape="rect" id="node49" href="budget_8c.html#a6323235e83f399d119f1deb54fa2f144" title="ubifs_get_free_space\l_nolock" alt="" coords="1185,1784,1332,1825"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_a2e3ce1f566393c4f8de0ea9c7eeedb42_icgraph.png" border="0" usemap="#ubifs_2journal_8c_a2e3ce1f566393c4f8de0ea9c7eeedb42_icgraph" alt=""/></div>
<map name="ubifs_2journal_8c_a2e3ce1f566393c4f8de0ea9c7eeedb42_icgraph" id="ubifs_2journal_8c_a2e3ce1f566393c4f8de0ea9c7eeedb42_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="197,335,313,361"/>
<area shape="rect" id="node19" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="186,664,323,691"/>
<area shape="rect" id="node24" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="183,765,326,792"/>
<area shape="rect" id="node28" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="191,613,318,640"/>
<area shape="rect" id="node30" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="195,563,315,589"/>
<area shape="rect" id="node31" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="193,715,317,741"/>
<area shape="rect" id="node32" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="182,63,327,89"/>
<area shape="rect" id="node34" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="179,171,331,197"/>
<area shape="rect" id="node3" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="409,107,499,133"/>
<area shape="rect" id="node8" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="407,157,501,184"/>
<area shape="rect" id="node9" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="413,461,495,488"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="415,208,493,235"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="409,259,499,285"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="411,309,497,336"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="409,360,499,387"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="406,411,502,437"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="403,512,505,539"/>
<area shape="rect" id="node4" href="ubifs_2xattr_8c.html#a2c0f8e28d408b8e89b4ce7d6047af912" title="ubifs_xattr_set" alt="" coords="585,56,693,83"/>
<area shape="rect" id="node5" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="762,5,895,32"/>
<area shape="rect" id="node6" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="957,31,1031,57"/>
<area shape="rect" id="node7" href="ubifs_2crypto_8c.html#a4984848c1f6ebc630f98d30a9bbf2ed3" title="ubifs_crypt_set_context" alt="" coords="748,107,909,133"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="591,461,687,488"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="595,563,682,589"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="779,588,879,615"/>
<area shape="rect" id="node20" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="405,664,503,691"/>
<area shape="rect" id="node21" href="ubifs_2file_8c.html#a2ad22c013a0dccfd9f49e114ed89dfa6" title="ubifs_writepage" alt="" coords="582,664,695,691"/>
<area shape="rect" id="node22" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="589,715,689,741"/>
<area shape="rect" id="node23" href="ubifs_8h.html#aaebf1c80e366c0f2702f58b91d7a9d38" title="ubifs_setattr" alt="" coords="781,715,876,741"/>
<area shape="rect" id="node25" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="393,816,515,843"/>
<area shape="rect" id="node26" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="379,765,529,792"/>
<area shape="rect" id="node27" href="ubifs_2super_8c.html#a063c51fb658c01f325e4a0744d2f28ce" title="ubifs_evict_inode" alt="" coords="577,765,700,792"/>
<area shape="rect" id="node29" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="585,613,692,640"/>
<area shape="rect" id="node33" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="589,5,688,32"/>
<area shape="rect" id="node35" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="405,56,503,83"/>
</map>
</div>

</div>
</div>
<a id="aed47b114c8f20052b62f78e27cbada07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed47b114c8f20052b62f78e27cbada07">&#9670;&nbsp;</a></span>mark_inode_clean()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void mark_inode_clean </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structubifs__inode.html">ubifs_inode</a> *&#160;</td>
          <td class="paramname"><em>ui</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>mark_inode_clean - mark UBIFS inode as clean. <code></code>: UBIFS file-system description object : UBIFS inode to mark as clean</p>
<p>This helper function marks UBIFS inode  as clean by cleaning the -&gt;dirty flag and releasing its budget. Note, VFS may still treat the inode as dirty and try to write it back, but '<a class="el" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c">ubifs_write_inode()</a>' would just do nothing. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_aed47b114c8f20052b62f78e27cbada07_cgraph.png" border="0" usemap="#ubifs_2journal_8c_aed47b114c8f20052b62f78e27cbada07_cgraph" alt=""/></div>
<map name="ubifs_2journal_8c_aed47b114c8f20052b62f78e27cbada07_cgraph" id="ubifs_2journal_8c_aed47b114c8f20052b62f78e27cbada07_cgraph">
<area shape="rect" id="node2" href="budget_8c.html#a42a33c943c4f8862342d84cc1b152182" title="ubifs_release_dirty\l_inode_budget" alt="" coords="180,74,311,115"/>
<area shape="rect" id="node3" href="budget_8c.html#afb4a050131358f08985939fa532bc694" title="ubifs_release_budget" alt="" coords="359,81,504,108"/>
<area shape="rect" id="node4" href="budget_8c.html#ae7fb821f0bda60b202ba1bd7b8445634" title="calc_data_growth" alt="" coords="572,5,696,32"/>
<area shape="rect" id="node5" href="budget_8c.html#ad59159f2a92429bd81d6bcb530d7c5c5" title="calc_dd_growth" alt="" coords="577,56,691,83"/>
<area shape="rect" id="node6" href="budget_8c.html#ac3fe021e20fd3d248577fe5d2623ad96" title="calc_idx_growth" alt="" coords="576,107,692,133"/>
<area shape="rect" id="node7" href="budget_8c.html#a6109e1d36eaa593c345944d0d4b30745" title="ubifs_calc_min_idx_lebs" alt="" coords="552,157,716,184"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_aed47b114c8f20052b62f78e27cbada07_icgraph.png" border="0" usemap="#ubifs_2journal_8c_aed47b114c8f20052b62f78e27cbada07_icgraph" alt=""/></div>
<map name="ubifs_2journal_8c_aed47b114c8f20052b62f78e27cbada07_icgraph" id="ubifs_2journal_8c_aed47b114c8f20052b62f78e27cbada07_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="198,335,314,361"/>
<area shape="rect" id="node19" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="193,563,319,589"/>
<area shape="rect" id="node21" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="196,512,316,539"/>
<area shape="rect" id="node22" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="194,613,318,640"/>
<area shape="rect" id="node25" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="183,63,329,89"/>
<area shape="rect" id="node27" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="180,171,332,197"/>
<area shape="rect" id="node3" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="386,107,477,133"/>
<area shape="rect" id="node8" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="385,208,478,235"/>
<area shape="rect" id="node9" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="390,259,473,285"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="393,309,470,336"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="386,360,477,387"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="388,411,475,437"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="387,461,476,488"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="383,512,479,539"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="380,157,483,184"/>
<area shape="rect" id="node4" href="ubifs_2xattr_8c.html#a2c0f8e28d408b8e89b4ce7d6047af912" title="ubifs_xattr_set" alt="" coords="531,56,639,83"/>
<area shape="rect" id="node5" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="701,5,834,32"/>
<area shape="rect" id="node6" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="896,56,969,83"/>
<area shape="rect" id="node7" href="ubifs_2crypto_8c.html#a4984848c1f6ebc630f98d30a9bbf2ed3" title="ubifs_crypt_set_context" alt="" coords="687,56,848,83"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="537,259,633,285"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="541,563,628,589"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="717,588,817,615"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="531,613,638,640"/>
<area shape="rect" id="node23" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="381,664,481,691"/>
<area shape="rect" id="node24" href="ubifs_8h.html#aaebf1c80e366c0f2702f58b91d7a9d38" title="ubifs_setattr" alt="" coords="537,664,632,691"/>
<area shape="rect" id="node26" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="535,5,634,32"/>
<area shape="rect" id="node28" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="383,56,480,83"/>
</map>
</div>

</div>
</div>
<a id="af33a1a0e7af2c23d625797b7d30a09fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af33a1a0e7af2c23d625797b7d30a09fe">&#9670;&nbsp;</a></span>pack_inode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void pack_inode </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structubifs__ino__node.html">ubifs_ino_node</a> *&#160;</td>
          <td class="paramname"><em>ino</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>last</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>pack_inode - pack an inode node. <code></code>: UBIFS file-system description object : buffer in which to pack inode node : inode to pack : indicates the last node of the group </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_af33a1a0e7af2c23d625797b7d30a09fe_cgraph.png" border="0" usemap="#ubifs_2journal_8c_af33a1a0e7af2c23d625797b7d30a09fe_cgraph" alt=""/></div>
<map name="ubifs_2journal_8c_af33a1a0e7af2c23d625797b7d30a09fe_cgraph" id="ubifs_2journal_8c_af33a1a0e7af2c23d625797b7d30a09fe_cgraph">
<area shape="rect" id="node2" href="misc_8h.html#a1d3fdeae8e4ff85d7b3581a96bb4ef49" title="ubifs_inode" alt="" coords="175,5,263,32"/>
<area shape="rect" id="node3" href="key_8h.html#a0eb1cf0ecc00556383b326058c65f846" title="ino_key_init_flash" alt="" coords="155,56,282,83"/>
<area shape="rect" id="node4" href="ubifs_2journal_8c.html#aac219494a71f5ce5fa3f2c70f53660ef" title="zero_ino_node_unused" alt="" coords="141,107,296,133"/>
<area shape="rect" id="node5" href="ubifs_2io_8c.html#a9d5677a6fb9ba9810931ab381e9ca3e3" title="ubifs_prep_grp_node" alt="" coords="147,157,290,184"/>
<area shape="rect" id="node6" href="ubifs_2io_8c.html#a0b3f089c430db97bbc68e362dc7867c8" title="next_sqnum" alt="" coords="344,157,437,184"/>
<area shape="rect" id="node7" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="503,107,575,133"/>
<area shape="rect" id="node8" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="485,157,592,184"/>
<area shape="rect" id="node9" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="640,183,725,209"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_af33a1a0e7af2c23d625797b7d30a09fe_icgraph.png" border="0" usemap="#ubifs_2journal_8c_af33a1a0e7af2c23d625797b7d30a09fe_icgraph" alt=""/></div>
<map name="ubifs_2journal_8c_af33a1a0e7af2c23d625797b7d30a09fe_icgraph" id="ubifs_2journal_8c_af33a1a0e7af2c23d625797b7d30a09fe_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="159,335,275,361"/>
<area shape="rect" id="node19" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="146,664,289,691"/>
<area shape="rect" id="node23" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="154,613,281,640"/>
<area shape="rect" id="node25" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="157,563,277,589"/>
<area shape="rect" id="node26" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="155,740,279,767"/>
<area shape="rect" id="node29" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="145,63,290,89"/>
<area shape="rect" id="node31" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="141,171,293,197"/>
<area shape="rect" id="node3" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="371,107,462,133"/>
<area shape="rect" id="node8" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="370,512,463,539"/>
<area shape="rect" id="node9" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="375,411,458,437"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="378,157,455,184"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="371,208,462,235"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="373,259,460,285"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="372,309,461,336"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="369,360,465,387"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="365,461,468,488"/>
<area shape="rect" id="node4" href="ubifs_2xattr_8c.html#a2c0f8e28d408b8e89b4ce7d6047af912" title="ubifs_xattr_set" alt="" coords="547,56,655,83"/>
<area shape="rect" id="node5" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="725,5,858,32"/>
<area shape="rect" id="node6" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="920,56,993,83"/>
<area shape="rect" id="node7" href="ubifs_2crypto_8c.html#a4984848c1f6ebc630f98d30a9bbf2ed3" title="ubifs_crypt_set_context" alt="" coords="711,56,872,83"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="553,411,649,437"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="558,563,645,589"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="741,588,841,615"/>
<area shape="rect" id="node20" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="355,664,478,691"/>
<area shape="rect" id="node21" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="341,715,492,741"/>
<area shape="rect" id="node22" href="ubifs_2super_8c.html#a063c51fb658c01f325e4a0744d2f28ce" title="ubifs_evict_inode" alt="" coords="540,715,663,741"/>
<area shape="rect" id="node24" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="548,613,655,640"/>
<area shape="rect" id="node27" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="367,765,467,792"/>
<area shape="rect" id="node28" href="ubifs_8h.html#aaebf1c80e366c0f2702f58b91d7a9d38" title="ubifs_setattr" alt="" coords="554,765,649,792"/>
<area shape="rect" id="node30" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="552,5,651,32"/>
<area shape="rect" id="node32" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="368,56,465,83"/>
</map>
</div>

</div>
</div>
<a id="a9bb32d44ef1e02992210b7412754de3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bb32d44ef1e02992210b7412754de3c">&#9670;&nbsp;</a></span>release_head()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void release_head </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>jhead</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>release_head - release a journal head. <code></code>: UBIFS file-system description object : journal head</p>
<p>This function releases journal head  which was locked by the '<a class="el" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42">make_reservation()</a>' function. It has to be called after each successful '<a class="el" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42">make_reservation()</a>' invocation. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_a9bb32d44ef1e02992210b7412754de3c_icgraph.png" border="0" usemap="#ubifs_2journal_8c_a9bb32d44ef1e02992210b7412754de3c_icgraph" alt=""/></div>
<map name="ubifs_2journal_8c_a9bb32d44ef1e02992210b7412754de3c_icgraph" id="ubifs_2journal_8c_a9bb32d44ef1e02992210b7412754de3c_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="170,335,286,361"/>
<area shape="rect" id="node19" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="159,664,297,691"/>
<area shape="rect" id="node24" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="157,765,299,792"/>
<area shape="rect" id="node28" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="165,613,291,640"/>
<area shape="rect" id="node30" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="168,563,288,589"/>
<area shape="rect" id="node31" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="166,715,290,741"/>
<area shape="rect" id="node32" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="155,63,301,89"/>
<area shape="rect" id="node34" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="152,171,304,197"/>
<area shape="rect" id="node3" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="382,107,473,133"/>
<area shape="rect" id="node8" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="381,157,474,184"/>
<area shape="rect" id="node9" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="386,461,469,488"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="389,208,466,235"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="382,259,473,285"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="384,309,471,336"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="383,360,472,387"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="379,411,475,437"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="376,512,479,539"/>
<area shape="rect" id="node4" href="ubifs_2xattr_8c.html#a2c0f8e28d408b8e89b4ce7d6047af912" title="ubifs_xattr_set" alt="" coords="558,56,666,83"/>
<area shape="rect" id="node5" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="735,5,869,32"/>
<area shape="rect" id="node6" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="931,31,1004,57"/>
<area shape="rect" id="node7" href="ubifs_2crypto_8c.html#a4984848c1f6ebc630f98d30a9bbf2ed3" title="ubifs_crypt_set_context" alt="" coords="721,107,883,133"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="564,461,660,488"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="569,563,655,589"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="752,588,852,615"/>
<area shape="rect" id="node20" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="378,664,477,691"/>
<area shape="rect" id="node21" href="ubifs_2file_8c.html#a2ad22c013a0dccfd9f49e114ed89dfa6" title="ubifs_writepage" alt="" coords="555,664,669,691"/>
<area shape="rect" id="node22" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="562,715,662,741"/>
<area shape="rect" id="node23" href="ubifs_8h.html#aaebf1c80e366c0f2702f58b91d7a9d38" title="ubifs_setattr" alt="" coords="755,715,849,741"/>
<area shape="rect" id="node25" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="366,816,489,843"/>
<area shape="rect" id="node26" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="352,765,503,792"/>
<area shape="rect" id="node27" href="ubifs_2super_8c.html#a063c51fb658c01f325e4a0744d2f28ce" title="ubifs_evict_inode" alt="" coords="551,765,673,792"/>
<area shape="rect" id="node29" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="559,613,665,640"/>
<area shape="rect" id="node33" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="563,5,661,32"/>
<area shape="rect" id="node35" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="379,56,476,83"/>
</map>
</div>

</div>
</div>
<a id="a920088cf70f88cbb1142294e99e688d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a920088cf70f88cbb1142294e99e688d6">&#9670;&nbsp;</a></span>reserve_space()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int reserve_space </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>jhead</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>reserve_space - reserve space in the journal. <code></code>: UBIFS file-system description object : journal head number : node length</p>
<p>This function reserves space in journal head . If the reservation succeeded, the journal head stays locked and later has to be unlocked using '<a class="el" href="ubifs_2journal_8c.html#a9bb32d44ef1e02992210b7412754de3c">release_head()</a>'. '<a class="el" href="ubifs_2journal_8c.html#a7285ba71f1d541318b61943bcc8e756f">write_node()</a>' and '<a class="el" href="ubifs_2journal_8c.html#a6b58fdc3cf3fe2765984565c1b77d21e">write_head()</a>' functions also unlock it. Returns zero in case of success, %-EAGAIN if commit has to be done, and other negative error codes in case of other failures. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_a920088cf70f88cbb1142294e99e688d6_cgraph.png" border="0" usemap="#ubifs_2journal_8c_a920088cf70f88cbb1142294e99e688d6_cgraph" alt=""/></div>
<map name="ubifs_2journal_8c_a920088cf70f88cbb1142294e99e688d6_cgraph" id="ubifs_2journal_8c_a920088cf70f88cbb1142294e99e688d6_cgraph">
<area shape="rect" id="node2" href="find_8c.html#a1f03e32ffa32d28279f1eaf0f81c4a5f" title="ubifs_find_free_space" alt="" coords="604,176,753,203"/>
<area shape="rect" id="node21" href="ubifs_2debug_8c.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="859,999,941,1025"/>
<area shape="rect" id="node22" href="ubifs_2gc_8c.html#a6aba86bcae816613915e10318fdf6b83" title="ubifs_garbage_collect" alt="" coords="169,745,317,772"/>
<area shape="rect" id="node38" href="ubifs_2io_8c.html#a3e6d29ad192528c05f246cd31a1732fb" title="ubifs_wbuf_sync_nolock" alt="" coords="596,897,761,924"/>
<area shape="rect" id="node42" href="misc_8h.html#a61ad06675d59063a2171172f8ba94c79" title="ubifs_return_leb" alt="" coords="402,441,517,468"/>
<area shape="rect" id="node43" href="ubifs_2log_8c.html#a8b30a0dc99186d8f07ee2f47693f11b7" title="ubifs_add_bud_to_log" alt="" coords="385,1151,533,1177"/>
<area shape="rect" id="node50" href="ubifs_2io_8c.html#a4bf09b0b677c1ca6d0b034d91281d2f3" title="ubifs_wbuf_seek_nolock" alt="" coords="160,948,325,975"/>
<area shape="rect" id="node3" href="misc_8h.html#aa89c2768eb94f129c6afbe47420b44ba" title="ubifs_get_lprops" alt="" coords="841,151,959,177"/>
<area shape="rect" id="node4" href="find_8c.html#abaf7fbdbbbdd6300b6252efcc5494325" title="do_find_free_space" alt="" coords="833,49,967,76"/>
<area shape="rect" id="node10" href="lprops_8c.html#abfc4c6a75b37762f214cbc91f0ebe664" title="ubifs_change_lp" alt="" coords="842,353,958,380"/>
<area shape="rect" id="node14" href="misc_8h.html#a6dce2c34ec97d74cf4be59e0201bdb3e" title="ubifs_release_lprops" alt="" coords="829,100,971,127"/>
<area shape="rect" id="node15" href="ubifs_2io_8c.html#ad9d3a62a61d21e1faa60cd6e630c41ac" title="ubifs_leb_unmap" alt="" coords="840,771,960,797"/>
<area shape="rect" id="node5" href="lprops_8c.html#a9f9c5f51e3eec037783db8eb0477b5cc" title="ubifs_fast_find_free" alt="" coords="1043,5,1179,32"/>
<area shape="rect" id="node6" href="lprops_8c.html#af7bb5628372135952187c4c37b9a0a68" title="ubifs_fast_find_empty" alt="" coords="1036,113,1187,140"/>
<area shape="rect" id="node7" href="lpt_8c.html#a34800df1b6052b492ca05c589dfec386" title="ubifs_lpt_scan_nolock" alt="" coords="1036,176,1187,203"/>
<area shape="rect" id="node8" href="find_8c.html#a131c924a527c1d77bc20a4ebbcf83f03" title="scan_for_free_cb" alt="" coords="1050,56,1173,83"/>
<area shape="rect" id="node9" href="lpt_8c.html#ade4e71b1fffa493cfb997feaff2c0638" title="ubifs_lpt_lookup_dirty" alt="" coords="1037,252,1185,279"/>
<area shape="rect" id="node11" href="lprops_8c.html#a911df1bb1dc58cf096c97ce547539153" title="is_lprops_dirty" alt="" coords="1058,353,1165,380"/>
<area shape="rect" id="node12" href="lprops_8c.html#a54fa4acd96a49b1bbe2baeac4dbd0c0b" title="ubifs_calc_dark" alt="" coords="1055,404,1168,431"/>
<area shape="rect" id="node13" href="lprops_8c.html#a2f083caeaebac06c1f51d7c7d34f5c13" title="change_category" alt="" coords="1051,303,1172,329"/>
<area shape="rect" id="node16" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="1052,1049,1171,1076"/>
<area shape="rect" id="node17" href="ubifs_2debug_8c.html#a6ba17156289f8b8ecaed40dbafc04858" title="dbg_leb_unmap" alt="" coords="1055,796,1168,823"/>
<area shape="rect" id="node18" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1075,745,1147,772"/>
<area shape="rect" id="node19" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="1058,923,1165,949"/>
<area shape="rect" id="node20" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="1235,923,1320,949"/>
<area shape="rect" id="node23" href="ubifs_2commit_8c.html#a18183f6ca9e5e865909aa32d50f4be4b" title="ubifs_gc_should_commit" alt="" coords="376,543,543,569"/>
<area shape="rect" id="node24" href="ubifs_2commit_8c.html#a6e9dcff4b0f768c14f6f8448f4b1343e" title="ubifs_commit_required" alt="" coords="602,1353,755,1380"/>
<area shape="rect" id="node26" href="find_8c.html#aa0e0f58e74f915d84712f6a1367b75d0" title="ubifs_find_dirty_leb" alt="" coords="611,289,746,316"/>
<area shape="rect" id="node29" href="ubifs_2gc_8c.html#a29dd378f4b22d45580bff155cbb275cd" title="ubifs_garbage_collect_leb" alt="" coords="373,593,545,620"/>
<area shape="rect" id="node25" href="ubifs_2debug_8c.html#a615a670f26d4407b52175ce5f3faf594" title="dbg_cstate" alt="" coords="857,1328,943,1355"/>
<area shape="rect" id="node27" href="lprops_8c.html#af4f3f200dc1d36660281ec0282293308" title="ubifs_fast_find_freeable" alt="" coords="820,455,980,481"/>
<area shape="rect" id="node28" href="find_8c.html#a715c6a77d5e6922f0b465eaba93f3a99" title="scan_for_dirty" alt="" coords="848,303,952,329"/>
<area shape="rect" id="node30" href="ubifs_2gc_8c.html#a2f4daf5146e689ec3841b9a9840658f4" title="gc_sync_wbufs" alt="" coords="622,391,735,417"/>
<area shape="rect" id="node31" href="lprops_8c.html#aeb3c0f6274cdeba0c778d57f29ab39bf" title="ubifs_change_one_lp" alt="" coords="607,239,751,265"/>
<area shape="rect" id="node32" href="ubifs_2scan_8c.html#a1689915d09ec86f76b30ee598b10f34e" title="ubifs_scan" alt="" coords="636,441,721,468"/>
<area shape="rect" id="node33" href="ubifs_2scan_8c.html#a7e559a0c70f1f17d0886f600cd59a639" title="ubifs_scan_destroy" alt="" coords="833,505,967,532"/>
<area shape="rect" id="node34" href="key_8h.html#a5611c13d648e672825da064c90c8903a" title="key_read" alt="" coords="641,492,716,519"/>
<area shape="rect" id="node35" href="misc_8h.html#ac244bb6ab2f45cd8b870edc621d20deb" title="ubifs_idx_key" alt="" coords="627,543,730,569"/>
<area shape="rect" id="node36" href="tnc_8c.html#a3a388ce018049e8a7da4da512f8e1dcf" title="ubifs_dirty_idx_node" alt="" coords="608,593,749,620"/>
<area shape="rect" id="node37" href="ubifs_2gc_8c.html#ad0088bd16e6b85c2c28124046ab839d7" title="move_nodes" alt="" coords="631,644,727,671"/>
<area shape="rect" id="node39" href="ubifs_2io_8c.html#aeef91391de4e0f46023ab0afac3a2335" title="cancel_wbuf_timer_nolock" alt="" coords="812,897,988,924"/>
<area shape="rect" id="node40" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="861,948,939,975"/>
<area shape="rect" id="node41" href="ubifs_2io_8c.html#a02909cfc9d3a0100f549390c7d464632" title="ubifs_leb_write" alt="" coords="845,1049,955,1076"/>
<area shape="rect" id="node44" href="ubifs_2log_8c.html#a3dd7859b83714ed7d9692cf92a391fd9" title="empty_log_bytes" alt="" coords="618,1151,739,1177"/>
<area shape="rect" id="node45" href="ubifs_2commit_8c.html#a6c27328fd39184ba2e1bdfa1970275e7" title="ubifs_request_bg_commit" alt="" coords="593,1303,764,1329"/>
<area shape="rect" id="node46" href="misc_8h.html#abf53e0ff9d9f9f6fefb9a9efbf709496" title="ubifs_next_log_lnum" alt="" coords="608,1201,749,1228"/>
<area shape="rect" id="node47" href="ubifs_2io_8c.html#a8d3619a60498527530b0ed01ba5c6a82" title="ubifs_leb_map" alt="" coords="847,1100,953,1127"/>
<area shape="rect" id="node48" href="ubifs_2io_8c.html#a5e156b540025dd2266e7f4c6c302356e" title="ubifs_write_node" alt="" coords="619,1100,739,1127"/>
<area shape="rect" id="node49" href="ubifs_2log_8c.html#a3366b2b2350ca5e120af4be6f2e67b79" title="ubifs_add_bud" alt="" coords="625,1049,732,1076"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_a920088cf70f88cbb1142294e99e688d6_icgraph.png" border="0" usemap="#ubifs_2journal_8c_a920088cf70f88cbb1142294e99e688d6_icgraph" alt=""/></div>
<map name="ubifs_2journal_8c_a920088cf70f88cbb1142294e99e688d6_icgraph" id="ubifs_2journal_8c_a920088cf70f88cbb1142294e99e688d6_icgraph">
<area shape="rect" id="node2" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="160,588,285,615"/>
<area shape="rect" id="node3" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="351,335,467,361"/>
<area shape="rect" id="node20" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="341,664,478,691"/>
<area shape="rect" id="node25" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="338,765,481,792"/>
<area shape="rect" id="node29" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="346,613,473,640"/>
<area shape="rect" id="node31" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="349,563,469,589"/>
<area shape="rect" id="node32" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="347,715,471,741"/>
<area shape="rect" id="node33" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="337,63,482,89"/>
<area shape="rect" id="node35" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="333,171,485,197"/>
<area shape="rect" id="node4" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="563,107,654,133"/>
<area shape="rect" id="node9" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="562,157,655,184"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="567,461,650,488"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="570,208,647,235"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="563,259,654,285"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="565,309,652,336"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="564,360,653,387"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="561,411,657,437"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="557,512,660,539"/>
<area shape="rect" id="node5" href="ubifs_2xattr_8c.html#a2c0f8e28d408b8e89b4ce7d6047af912" title="ubifs_xattr_set" alt="" coords="739,56,847,83"/>
<area shape="rect" id="node6" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="917,5,1050,32"/>
<area shape="rect" id="node7" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="1112,31,1185,57"/>
<area shape="rect" id="node8" href="ubifs_2crypto_8c.html#a4984848c1f6ebc630f98d30a9bbf2ed3" title="ubifs_crypt_set_context" alt="" coords="903,107,1064,133"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="745,461,841,488"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="750,563,837,589"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="933,588,1033,615"/>
<area shape="rect" id="node21" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="559,664,658,691"/>
<area shape="rect" id="node22" href="ubifs_2file_8c.html#a2ad22c013a0dccfd9f49e114ed89dfa6" title="ubifs_writepage" alt="" coords="737,664,850,691"/>
<area shape="rect" id="node23" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="743,715,843,741"/>
<area shape="rect" id="node24" href="ubifs_8h.html#aaebf1c80e366c0f2702f58b91d7a9d38" title="ubifs_setattr" alt="" coords="936,715,1031,741"/>
<area shape="rect" id="node26" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="547,816,670,843"/>
<area shape="rect" id="node27" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="533,765,684,792"/>
<area shape="rect" id="node28" href="ubifs_2super_8c.html#a063c51fb658c01f325e4a0744d2f28ce" title="ubifs_evict_inode" alt="" coords="732,765,855,792"/>
<area shape="rect" id="node30" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="740,613,847,640"/>
<area shape="rect" id="node34" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="744,5,843,32"/>
<area shape="rect" id="node36" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="560,56,657,83"/>
</map>
</div>

</div>
</div>
<a id="a9a7b991169dcd5003fd4ccd4dbe0a199"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a7b991169dcd5003fd4ccd4dbe0a199">&#9670;&nbsp;</a></span>set_dent_cookie()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void set_dent_cookie </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structubifs__dent__node.html">ubifs_dent_node</a> *&#160;</td>
          <td class="paramname"><em>dent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_a9a7b991169dcd5003fd4ccd4dbe0a199_icgraph.png" border="0" usemap="#ubifs_2journal_8c_a9a7b991169dcd5003fd4ccd4dbe0a199_icgraph" alt=""/></div>
<map name="ubifs_2journal_8c_a9a7b991169dcd5003fd4ccd4dbe0a199_icgraph" id="ubifs_2journal_8c_a9a7b991169dcd5003fd4ccd4dbe0a199_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="176,233,292,260"/>
<area shape="rect" id="node19" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="171,512,297,539"/>
<area shape="rect" id="node21" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="174,461,294,488"/>
<area shape="rect" id="node3" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="351,107,442,133"/>
<area shape="rect" id="node8" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="350,157,443,184"/>
<area shape="rect" id="node9" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="355,208,438,235"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="358,259,435,285"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="351,309,442,336"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="353,360,440,387"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="352,411,441,437"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="349,5,445,32"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="345,56,448,83"/>
<area shape="rect" id="node4" href="ubifs_2xattr_8c.html#a2c0f8e28d408b8e89b4ce7d6047af912" title="ubifs_xattr_set" alt="" coords="496,107,604,133"/>
<area shape="rect" id="node5" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="666,107,799,133"/>
<area shape="rect" id="node6" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="861,132,935,159"/>
<area shape="rect" id="node7" href="ubifs_2crypto_8c.html#a4984848c1f6ebc630f98d30a9bbf2ed3" title="ubifs_crypt_set_context" alt="" coords="652,56,813,83"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="502,208,598,235"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="507,461,593,488"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="683,487,783,513"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="497,512,603,539"/>
</map>
</div>

</div>
</div>
<a id="a687e1b07880f8f06558ceefc741d0465"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a687e1b07880f8f06558ceefc741d0465">&#9670;&nbsp;</a></span>truncate_data_node()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int truncate_data_node </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structubifs__data__node.html">ubifs_data_node</a> *&#160;</td>
          <td class="paramname"><em>dn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>new_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>truncate_data_node - re-compress/encrypt a truncated data node. <code></code>: UBIFS file-system description object : inode which referes to the data node : data block number : data node to re-compress : new length</p>
<p>This function is used when an inode is truncated and the last data node of the inode has to be re-compressed/encrypted and re-written. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_a687e1b07880f8f06558ceefc741d0465_cgraph.png" border="0" usemap="#ubifs_2journal_8c_a687e1b07880f8f06558ceefc741d0465_cgraph" alt=""/></div>
<map name="ubifs_2journal_8c_a687e1b07880f8f06558ceefc741d0465_cgraph" id="ubifs_2journal_8c_a687e1b07880f8f06558ceefc741d0465_cgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#a05379a3e5d4223a7821ec80d3606a6e6" title="ubifs_crypt_is_encrypted" alt="" coords="189,56,356,83"/>
<area shape="rect" id="node5" href="ubifs_2crypto_8c.html#a598308652cc2b1d5344d71dac180a913" title="ubifs_decrypt" alt="" coords="223,208,323,235"/>
<area shape="rect" id="node10" href="ubifs_2compress_8c.html#a9b5070bc52f24f554d4ac3cb06651fe5" title="ubifs_decompress" alt="" coords="209,157,337,184"/>
<area shape="rect" id="node11" href="ubifs_2compress_8c.html#a34709dede6e3377bd2bcd99862e71ac7" title="ubifs_compress" alt="" coords="215,259,330,285"/>
<area shape="rect" id="node13" href="ubifs_2crypto_8c.html#ada6ca748f7da6ade0a16bf43c7cd64d4" title="ubifs_encrypt" alt="" coords="223,107,323,133"/>
<area shape="rect" id="node3" href="misc_8h.html#a1d3fdeae8e4ff85d7b3581a96bb4ef49" title="ubifs_inode" alt="" coords="433,5,521,32"/>
<area shape="rect" id="node4" href="ubifs_8h.html#a1aa9930cc94a47ac345316581dd49ab3" title="__printf" alt="" coords="445,56,510,83"/>
<area shape="rect" id="node6" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="441,157,513,184"/>
<area shape="rect" id="node7" href="crypto_2crypto_8c.html#ae398edfad4b1ece50e7b77d02e440f36" title="fscrypt_decrypt_page" alt="" coords="404,208,551,235"/>
<area shape="rect" id="node8" href="crypto_2crypto_8c.html#a54b1c5526cd4eccd22ebb1e73c3fc385" title="fscrypt_do_page_crypto" alt="" coords="608,208,769,235"/>
<area shape="rect" id="node9" href="crypto_2crypto_8c.html#a191e3998d0d9505e9aa78f5d02c0e766" title="EXPORT_SYMBOL" alt="" coords="827,132,965,159"/>
<area shape="rect" id="node12" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="435,259,520,285"/>
<area shape="rect" id="node14" href="crypto_2crypto_8c.html#a49c93490a4358932673c23b21fbb1d1f" title="fscrypt_encrypt_page" alt="" coords="404,107,551,133"/>
<area shape="rect" id="node15" href="crypto_2crypto_8c.html#acd08deb87a35766b62dd8373706cf091" title="fscrypt_get_ctx" alt="" coords="633,107,745,133"/>
<area shape="rect" id="node16" href="crypto_2crypto_8c.html#a1f4b4ee23f3f6ea7869b12de76151f8e" title="fscrypt_alloc_bounce_page" alt="" coords="599,56,779,83"/>
<area shape="rect" id="node17" href="crypto_2crypto_8c.html#a664e13aac936b7996a7ded8c10ad2df9" title="fscrypt_release_ctx" alt="" coords="621,157,757,184"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_a687e1b07880f8f06558ceefc741d0465_icgraph.png" border="0" usemap="#ubifs_2journal_8c_a687e1b07880f8f06558ceefc741d0465_icgraph" alt=""/></div>
<map name="ubifs_2journal_8c_a687e1b07880f8f06558ceefc741d0465_icgraph" id="ubifs_2journal_8c_a687e1b07880f8f06558ceefc741d0465_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="189,5,313,32"/>
<area shape="rect" id="node3" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="361,5,461,32"/>
<area shape="rect" id="node4" href="ubifs_8h.html#aaebf1c80e366c0f2702f58b91d7a9d38" title="ubifs_setattr" alt="" coords="509,5,604,32"/>
</map>
</div>

</div>
</div>
<a id="ac2a925546250edb0d98c2bd2cc71fb9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2a925546250edb0d98c2bd2cc71fb9e">&#9670;&nbsp;</a></span>ubifs_jnl_change_xattr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ubifs_jnl_change_xattr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>host</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_jnl_change_xattr - change an extended attribute. <code></code>: UBIFS file-system description object : extended attribute inode : host inode</p>
<p>This function writes the updated version of an extended attribute inode and the host inode to the journal (to the base head). The host inode is written after the extended attribute inode in order to guarantee that the extended attribute will be flushed when the inode is synchronized by 'fsync()' and consequently, the write-buffer is synchronized. This function returns zero in case of success and a negative error code in case of failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_ac2a925546250edb0d98c2bd2cc71fb9e_cgraph.png" border="0" usemap="#ubifs_2journal_8c_ac2a925546250edb0d98c2bd2cc71fb9e_cgraph" alt=""/></div>
<map name="ubifs_2journal_8c_ac2a925546250edb0d98c2bd2cc71fb9e_cgraph" id="ubifs_2journal_8c_ac2a925546250edb0d98c2bd2cc71fb9e_cgraph">
<area shape="rect" id="node2" href="misc_8h.html#a1d3fdeae8e4ff85d7b3581a96bb4ef49" title="ubifs_inode" alt="" coords="424,5,512,32"/>
<area shape="rect" id="node3" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="211,689,337,716"/>
<area shape="rect" id="node10" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="820,765,927,792"/>
<area shape="rect" id="node32" href="ubifs_2journal_8c.html#af33a1a0e7af2c23d625797b7d30a09fe" title="pack_inode" alt="" coords="230,107,318,133"/>
<area shape="rect" id="node36" href="ubifs_2journal_8c.html#a6b58fdc3cf3fe2765984565c1b77d21e" title="write_head" alt="" coords="1037,1171,1122,1197"/>
<area shape="rect" id="node38" href="ubifs_2io_8c.html#a44bb751e441c7a2479b5251b1423d16a" title="ubifs_wbuf_add_ino\l_nolock" alt="" coords="205,1146,343,1187"/>
<area shape="rect" id="node39" href="ubifs_2journal_8c.html#a9bb32d44ef1e02992210b7412754de3c" title="release_head" alt="" coords="225,1212,323,1239"/>
<area shape="rect" id="node40" href="key_8h.html#a60df8426bc46e1074661d077542ea933" title="ino_key_init" alt="" coords="229,1263,319,1289"/>
<area shape="rect" id="node41" href="tnc_8c.html#a0f9bccdd201d5b2525ba901e00ece03f" title="ubifs_tnc_add" alt="" coords="223,1044,325,1071"/>
<area shape="rect" id="node48" href="ubifs_2journal_8c.html#abb1bef600a6aa118b19e228194c5be1d" title="finish_reservation" alt="" coords="212,1313,336,1340"/>
<area shape="rect" id="node49" href="ubifs_2journal_8c.html#aed47b114c8f20052b62f78e27cbada07" title="mark_inode_clean" alt="" coords="211,1364,337,1391"/>
<area shape="rect" id="node4" href="ubifs_2journal_8c.html#a920088cf70f88cbb1142294e99e688d6" title="reserve_space" alt="" coords="415,917,521,944"/>
<area shape="rect" id="node11" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="1037,740,1122,767"/>
<area shape="rect" id="node14" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1663,512,1735,539"/>
<area shape="rect" id="node15" href="ubifs_2commit_8c.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="405,588,531,615"/>
<area shape="rect" id="node19" href="ubifs_2debug_8h.html#a69534405790cc12f492343243bc539a4" title="dbg_check_lprops" alt="" coords="810,411,937,437"/>
<area shape="rect" id="node23" href="ubifs_2debug_8c.html#a2fa0aeaaa556f0b13d098456ef7d86d4" title="ubifs_dump_lprops" alt="" coords="1220,588,1351,615"/>
<area shape="rect" id="node28" href="ubifs_2debug_8c.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="1223,875,1347,901"/>
<area shape="rect" id="node5" href="find_8c.html#a1f03e32ffa32d28279f1eaf0f81c4a5f" title="ubifs_find_free_space" alt="" coords="593,968,743,995"/>
<area shape="rect" id="node6" href="ubifs_2debug_8c.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="1658,1103,1739,1129"/>
<area shape="rect" id="node7" href="ubifs_2gc_8c.html#a6aba86bcae816613915e10318fdf6b83" title="ubifs_garbage_collect" alt="" coords="594,1019,742,1045"/>
<area shape="rect" id="node8" href="misc_8h.html#a61ad06675d59063a2171172f8ba94c79" title="ubifs_return_leb" alt="" coords="816,1069,931,1096"/>
<area shape="rect" id="node9" href="ubifs_2io_8c.html#a3e6d29ad192528c05f246cd31a1732fb" title="ubifs_wbuf_sync_nolock" alt="" coords="1203,1069,1368,1096"/>
<area shape="rect" id="node12" href="ubifs_2log_8c.html#a8b30a0dc99186d8f07ee2f47693f11b7" title="ubifs_add_bud_to_log" alt="" coords="594,917,742,944"/>
<area shape="rect" id="node13" href="ubifs_2io_8c.html#a4bf09b0b677c1ca6d0b034d91281d2f3" title="ubifs_wbuf_seek_nolock" alt="" coords="791,1272,956,1299"/>
<area shape="rect" id="node16" href="ubifs_2commit_8c.html#a8066477fd4d182a562575fec9c1460f9" title="wait_for_commit" alt="" coords="609,537,727,564"/>
<area shape="rect" id="node17" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="625,588,711,615"/>
<area shape="rect" id="node18" href="misc_8h.html#af8fd16c04f42f2a56d86f0f7a4924ecc" title="ubifs_wbuf_sync" alt="" coords="1019,613,1139,640"/>
<area shape="rect" id="node24" href="lprops_8c.html#a8a4a969b18d269964ff80d11eb94b8ab" title="ubifs_get_lp_stats" alt="" coords="1435,765,1563,792"/>
<area shape="rect" id="node20" href="ubifs_2debug_8h.html#ab66d4ac998d5cd15774f5a22d366e1f1" title="dbg_is_chk_lprops" alt="" coords="1220,284,1351,311"/>
<area shape="rect" id="node21" href="lpt_8c.html#a34800df1b6052b492ca05c589dfec386" title="ubifs_lpt_scan_nolock" alt="" coords="1004,309,1155,336"/>
<area shape="rect" id="node22" href="lprops_8c.html#a14844fa99e1b9a5c6519cb82bd423fc5" title="scan_check_cb" alt="" coords="1023,512,1136,539"/>
<area shape="rect" id="node31" href="lprops_8c.html#a4d24d720745a25e26d273dc892c703eb" title="dbg_check_cats" alt="" coords="1021,360,1138,387"/>
<area shape="rect" id="node25" href="ubifs_2debug_8c.html#ab351e7abb59edb97d57bd44dd83b0484" title="ubifs_dump_lstats" alt="" coords="1435,563,1563,589"/>
<area shape="rect" id="node26" href="lprops_8c.html#a1eb6fc2cca5a1e34192e3c54b90d3057" title="ubifs_read_one_lp" alt="" coords="1435,664,1562,691"/>
<area shape="rect" id="node27" href="ubifs_2debug_8c.html#ad04e55858b69b78f20ea8b0fb79f9f27" title="ubifs_dump_lprop" alt="" coords="1437,715,1561,741"/>
<area shape="rect" id="node29" href="budget_8c.html#adaa1427281786d8bfca793236b5f0457" title="ubifs_calc_available" alt="" coords="1629,904,1768,931"/>
<area shape="rect" id="node30" href="budget_8c.html#a6323235e83f399d119f1deb54fa2f144" title="ubifs_get_free_space\l_nolock" alt="" coords="1425,867,1572,909"/>
<area shape="rect" id="node33" href="key_8h.html#a0eb1cf0ecc00556383b326058c65f846" title="ino_key_init_flash" alt="" coords="405,56,531,83"/>
<area shape="rect" id="node34" href="ubifs_2journal_8c.html#aac219494a71f5ce5fa3f2c70f53660ef" title="zero_ino_node_unused" alt="" coords="391,107,545,133"/>
<area shape="rect" id="node35" href="ubifs_2io_8c.html#a9d5677a6fb9ba9810931ab381e9ca3e3" title="ubifs_prep_grp_node" alt="" coords="397,157,539,184"/>
<area shape="rect" id="node37" href="ubifs_2io_8c.html#a6ee6b209c593633d86570858d6e5ff51" title="ubifs_wbuf_write_nolock" alt="" coords="1416,1001,1581,1028"/>
<area shape="rect" id="node42" href="tnc_8c.html#af871df87e75b12ea907320baac2614d5" title="lookup_level0_dirty" alt="" coords="401,1069,535,1096"/>
<area shape="rect" id="node43" href="key_8h.html#abbcaebc958b96ba6c1a981b93be96899" title="key_copy" alt="" coords="429,1120,507,1147"/>
<area shape="rect" id="node44" href="tnc_8c.html#a87449d9ca6fdc3ca6e74cc409e7a1506" title="tnc_insert" alt="" coords="429,1171,507,1197"/>
<area shape="rect" id="node45" href="tnc_8c.html#a48dcf7fc1db2312050ac0378020c802b" title="lnc_free" alt="" coords="434,968,502,995"/>
<area shape="rect" id="node46" href="misc_8h.html#ae4183603acbd9f727ecf1fae7617085b" title="ubifs_add_dirt" alt="" coords="417,1019,519,1045"/>
<area shape="rect" id="node47" href="ubifs_2debug_8c.html#a8e749de733b483ca979984b8aa078aa6" title="dbg_check_tnc" alt="" coords="818,816,929,843"/>
<area shape="rect" id="node50" href="budget_8c.html#a42a33c943c4f8862342d84cc1b152182" title="ubifs_release_dirty\l_inode_budget" alt="" coords="403,1357,533,1398"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_ac2a925546250edb0d98c2bd2cc71fb9e_icgraph.png" border="0" usemap="#ubifs_2journal_8c_ac2a925546250edb0d98c2bd2cc71fb9e_icgraph" alt=""/></div>
<map name="ubifs_2journal_8c_ac2a925546250edb0d98c2bd2cc71fb9e_icgraph" id="ubifs_2journal_8c_ac2a925546250edb0d98c2bd2cc71fb9e_icgraph">
<area shape="rect" id="node2" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="205,56,303,83"/>
<area shape="rect" id="node3" href="ubifs_2xattr_8c.html#a2c0f8e28d408b8e89b4ce7d6047af912" title="ubifs_xattr_set" alt="" coords="351,56,459,83"/>
<area shape="rect" id="node4" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="521,5,654,32"/>
<area shape="rect" id="node5" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="716,31,789,57"/>
<area shape="rect" id="node6" href="ubifs_2crypto_8c.html#a4984848c1f6ebc630f98d30a9bbf2ed3" title="ubifs_crypt_set_context" alt="" coords="507,107,668,133"/>
</map>
</div>

</div>
</div>
<a id="aae33ce80e24113a8224187cb917d0c09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae33ce80e24113a8224187cb917d0c09">&#9670;&nbsp;</a></span>ubifs_jnl_delete_inode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ubifs_jnl_delete_inode </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_jnl_delete_inode - delete an inode. <code></code>: UBIFS file-system description object : inode to delete</p>
<p>This function deletes inode  which includes removing it from orphans, deleting it from TNC and, in some cases, writing a deletion inode to the journal.</p>
<p>When regular file inodes are unlinked or a directory inode is removed, the '<a class="el" href="ubifs_2journal_8c.html#ad342a112d6f683c94399a45a14ec3aef">ubifs_jnl_update()</a>' function writes a corresponding deletion inode and direntry to the media, and adds the inode to orphans. After this, when the last reference to this inode has been dropped, this function is called. In general, it has to write one more deletion inode to the media, because if a commit happened between '<a class="el" href="ubifs_2journal_8c.html#ad342a112d6f683c94399a45a14ec3aef">ubifs_jnl_update()</a>' and '<a class="el" href="ubifs_2journal_8c.html#aae33ce80e24113a8224187cb917d0c09">ubifs_jnl_delete_inode()</a>', the deletion inode is not in the journal anymore, and in fact it might not be on the flash anymore, because it might have been garbage-collected already. And for optimization reasons UBIFS does not read the orphan area if it has been unmounted cleanly, so it would have no indication in the journal that there is a deleted inode which has to be removed from TNC.</p>
<p>However, if there was no commit between '<a class="el" href="ubifs_2journal_8c.html#ad342a112d6f683c94399a45a14ec3aef">ubifs_jnl_update()</a>' and '<a class="el" href="ubifs_2journal_8c.html#aae33ce80e24113a8224187cb917d0c09">ubifs_jnl_delete_inode()</a>', then there is no need to write the deletion inode to the media for the second time. And this is quite a typical case.</p>
<p>This function returns zero in case of success and a negative error code in case of failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_aae33ce80e24113a8224187cb917d0c09_cgraph.png" border="0" usemap="#ubifs_2journal_8c_aae33ce80e24113a8224187cb917d0c09_cgraph" alt=""/></div>
<map name="ubifs_2journal_8c_aae33ce80e24113a8224187cb917d0c09_cgraph" id="ubifs_2journal_8c_aae33ce80e24113a8224187cb917d0c09_cgraph">
<area shape="rect" id="node2" href="misc_8h.html#a1d3fdeae8e4ff85d7b3581a96bb4ef49" title="ubifs_inode" alt="" coords="630,1119,718,1145"/>
<area shape="rect" id="node3" href="ubifs_2journal_8c.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="204,916,347,943"/>
<area shape="rect" id="node22" href="tnc_8c.html#a928b6fd97b873a391e906fa28720273e" title="ubifs_tnc_remove_ino" alt="" coords="395,469,544,496"/>
<area shape="rect" id="node44" href="ubifs_2orphan_8c.html#afc0eab9d33c998c259bd6f0b4f23ec41" title="ubifs_delete_orphan" alt="" coords="400,748,539,775"/>
<area shape="rect" id="node50" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="416,1271,523,1297"/>
<area shape="rect" id="node4" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="611,916,737,943"/>
<area shape="rect" id="node14" href="ubifs_2journal_8c.html#af33a1a0e7af2c23d625797b7d30a09fe" title="pack_inode" alt="" coords="425,1017,513,1044"/>
<area shape="rect" id="node18" href="ubifs_2journal_8c.html#a6b58fdc3cf3fe2765984565c1b77d21e" title="write_head" alt="" coords="843,1179,928,1205"/>
<area shape="rect" id="node20" href="ubifs_2io_8c.html#a44bb751e441c7a2479b5251b1423d16a" title="ubifs_wbuf_add_ino\l_nolock" alt="" coords="401,799,538,841"/>
<area shape="rect" id="node21" href="ubifs_2journal_8c.html#a9bb32d44ef1e02992210b7412754de3c" title="release_head" alt="" coords="420,865,519,892"/>
<area shape="rect" id="node41" href="misc_8h.html#ae4183603acbd9f727ecf1fae7617085b" title="ubifs_add_dirt" alt="" coords="834,697,937,724"/>
<area shape="rect" id="node45" href="key_8h.html#a60df8426bc46e1074661d077542ea933" title="ino_key_init" alt="" coords="424,967,515,993"/>
<area shape="rect" id="node46" href="tnc_8c.html#a0f9bccdd201d5b2525ba901e00ece03f" title="ubifs_tnc_add" alt="" coords="623,647,725,673"/>
<area shape="rect" id="node49" href="ubifs_2journal_8c.html#abb1bef600a6aa118b19e228194c5be1d" title="finish_reservation" alt="" coords="407,1119,531,1145"/>
<area shape="rect" id="node5" href="ubifs_2journal_8c.html#a920088cf70f88cbb1142294e99e688d6" title="reserve_space" alt="" coords="832,1052,939,1079"/>
<area shape="rect" id="node8" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1233,799,1305,825"/>
<area shape="rect" id="node9" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="843,1115,928,1141"/>
<area shape="rect" id="node10" href="ubifs_2commit_8c.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="823,951,948,977"/>
<area shape="rect" id="node11" href="ubifs_2debug_8c.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="1035,1001,1159,1028"/>
<area shape="rect" id="node12" href="ubifs_2debug_8c.html#a2fa0aeaaa556f0b13d098456ef7d86d4" title="ubifs_dump_lprops" alt="" coords="1032,849,1163,876"/>
<area shape="rect" id="node13" href="ubifs_2debug_8h.html#a69534405790cc12f492343243bc539a4" title="dbg_check_lprops" alt="" coords="1034,900,1161,927"/>
<area shape="rect" id="node6" href="ubifs_2debug_8c.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="1228,1103,1309,1129"/>
<area shape="rect" id="node7" href="ubifs_2io_8c.html#a3e6d29ad192528c05f246cd31a1732fb" title="ubifs_wbuf_sync_nolock" alt="" coords="1015,1153,1180,1180"/>
<area shape="rect" id="node15" href="key_8h.html#a0eb1cf0ecc00556383b326058c65f846" title="ino_key_init_flash" alt="" coords="611,1017,737,1044"/>
<area shape="rect" id="node16" href="ubifs_2journal_8c.html#aac219494a71f5ce5fa3f2c70f53660ef" title="zero_ino_node_unused" alt="" coords="597,1068,751,1095"/>
<area shape="rect" id="node17" href="ubifs_2io_8c.html#a9d5677a6fb9ba9810931ab381e9ca3e3" title="ubifs_prep_grp_node" alt="" coords="603,967,745,993"/>
<area shape="rect" id="node19" href="ubifs_2io_8c.html#a6ee6b209c593633d86570858d6e5ff51" title="ubifs_wbuf_write_nolock" alt="" coords="1015,1103,1180,1129"/>
<area shape="rect" id="node23" href="key_8h.html#a837f3539f12eddd0ac7ef6595da85d13" title="lowest_xent_key" alt="" coords="614,393,734,420"/>
<area shape="rect" id="node24" href="tnc_8c.html#aab11d1b085510e4c3a49e8ea79e84b14" title="ubifs_tnc_next_ent" alt="" coords="608,191,740,217"/>
<area shape="rect" id="node33" href="ubifs_8h.html#aeff1ab85b59329875a7084014802262c" title="ubifs_evict_xattr_inode" alt="" coords="596,444,752,471"/>
<area shape="rect" id="node34" href="tnc_8c.html#a45f37bcb32fdd0e4c25fca00b7a66198" title="ubifs_tnc_remove_nm" alt="" coords="599,292,749,319"/>
<area shape="rect" id="node37" href="key_8h.html#a6ac363a71458b8fc9f6983ac3ce0c5c3" title="lowest_ino_key" alt="" coords="618,495,730,521"/>
<area shape="rect" id="node38" href="key_8h.html#a9d33aa154841c271b5a27f1c03d9f37d" title="highest_ino_key" alt="" coords="616,545,732,572"/>
<area shape="rect" id="node39" href="tnc_8c.html#aba3e5b7438f8f8463357069869364077" title="ubifs_tnc_remove_range" alt="" coords="592,343,756,369"/>
<area shape="rect" id="node43" href="key_8h.html#a5611c13d648e672825da064c90c8903a" title="key_read" alt="" coords="637,596,711,623"/>
<area shape="rect" id="node25" href="key_8h.html#a06f47822510ef850cb7065778115453c" title="key_type" alt="" coords="1231,241,1306,268"/>
<area shape="rect" id="node26" href="key_8h.html#a391b7c6e47045b125899fd494b93b2ed" title="is_hash_key" alt="" coords="1050,191,1145,217"/>
<area shape="rect" id="node27" href="tnc_8c.html#a2004703a60d098f1644d4f3e25338759" title="ubifs_lookup_level0" alt="" coords="817,292,953,319"/>
<area shape="rect" id="node28" href="tnc_8c.html#ae4be79a5c50df84c2528fff0e619b5ca" title="fallible_resolve_collision" alt="" coords="804,241,967,268"/>
<area shape="rect" id="node29" href="tnc_8c.html#aa6a0a93befc7348c0e11ee3a038d8d81" title="tnc_next" alt="" coords="1061,241,1133,268"/>
<area shape="rect" id="node30" href="tnc_8c.html#aacbd9954b161bf32cc3317abd3080f83" title="resolve_collision" alt="" coords="826,191,945,217"/>
<area shape="rect" id="node31" href="key_8h.html#a4a12b97ed78e138baf7886a6df7ed50f" title="key_inum" alt="" coords="1058,393,1137,420"/>
<area shape="rect" id="node32" href="tnc_8c.html#add8ba6d4ce8281dbb79e417150da8e4e" title="tnc_read_hashed_node" alt="" coords="807,39,963,65"/>
<area shape="rect" id="node35" href="tnc_8c.html#af871df87e75b12ea907320baac2614d5" title="lookup_level0_dirty" alt="" coords="819,393,952,420"/>
<area shape="rect" id="node36" href="ubifs_2debug_8c.html#a8e749de733b483ca979984b8aa078aa6" title="dbg_check_tnc" alt="" coords="830,495,941,521"/>
<area shape="rect" id="node40" href="tnc_8c.html#a48dcf7fc1db2312050ac0378020c802b" title="lnc_free" alt="" coords="851,545,919,572"/>
<area shape="rect" id="node42" href="lprops_8c.html#ae3f8fc7da604fc1fbfa182c024679d42" title="ubifs_update_one_lp" alt="" coords="1027,697,1168,724"/>
<area shape="rect" id="node47" href="key_8h.html#abbcaebc958b96ba6c1a981b93be96899" title="key_copy" alt="" coords="846,647,925,673"/>
<area shape="rect" id="node48" href="tnc_8c.html#a87449d9ca6fdc3ca6e74cc409e7a1506" title="tnc_insert" alt="" coords="846,596,925,623"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_aae33ce80e24113a8224187cb917d0c09_icgraph.png" border="0" usemap="#ubifs_2journal_8c_aae33ce80e24113a8224187cb917d0c09_icgraph" alt=""/></div>
<map name="ubifs_2journal_8c_aae33ce80e24113a8224187cb917d0c09_icgraph" id="ubifs_2journal_8c_aae33ce80e24113a8224187cb917d0c09_icgraph">
<area shape="rect" id="node2" href="ubifs_2super_8c.html#a063c51fb658c01f325e4a0744d2f28ce" title="ubifs_evict_inode" alt="" coords="204,5,327,32"/>
</map>
</div>

</div>
</div>
<a id="a75ae3c25abba8f076e8d4e000ffcf45d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75ae3c25abba8f076e8d4e000ffcf45d">&#9670;&nbsp;</a></span>ubifs_jnl_delete_xattr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ubifs_jnl_delete_xattr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct fscrypt_name *&#160;</td>
          <td class="paramname"><em>nm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_jnl_delete_xattr - delete an extended attribute. <code></code>: UBIFS file-system description object : host inode : extended attribute inode : extended attribute entry name</p>
<p>This function delete an extended attribute which is very similar to un-linking regular files - it writes a deletion xentry, a deletion inode and updates the target inode. Returns zero in case of success and a negative error code in case of failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_a75ae3c25abba8f076e8d4e000ffcf45d_cgraph.png" border="0" usemap="#ubifs_2journal_8c_a75ae3c25abba8f076e8d4e000ffcf45d_cgraph" alt=""/></div>
<map name="ubifs_2journal_8c_a75ae3c25abba8f076e8d4e000ffcf45d_cgraph" id="ubifs_2journal_8c_a75ae3c25abba8f076e8d4e000ffcf45d_cgraph">
<area shape="rect" id="node2" href="misc_8h.html#a1d3fdeae8e4ff85d7b3581a96bb4ef49" title="ubifs_inode" alt="" coords="448,157,536,184"/>
<area shape="rect" id="node3" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="429,411,555,437"/>
<area shape="rect" id="node13" href="key_8h.html#adcb63f144ee365e6e61a1afc86e741e1" title="xent_key_init" alt="" coords="231,1019,330,1045"/>
<area shape="rect" id="node15" href="key_8h.html#a1b58cdc042da655c7bbf0fce057b413c" title="key_write" alt="" coords="241,1069,320,1096"/>
<area shape="rect" id="node16" href="ubifs_2journal_8c.html#a1d4a541700f9d4bf038cadbf4e097454" title="get_dent_type" alt="" coords="229,1120,333,1147"/>
<area shape="rect" id="node17" href="ubifs_2journal_8c.html#ae4ece295a2679c7b5d2b9ddf9b553dd4" title="zero_dent_node_unused" alt="" coords="199,1171,362,1197"/>
<area shape="rect" id="node18" href="ubifs_2io_8c.html#a9d5677a6fb9ba9810931ab381e9ca3e3" title="ubifs_prep_grp_node" alt="" coords="421,309,563,336"/>
<area shape="rect" id="node20" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="845,5,952,32"/>
<area shape="rect" id="node21" href="ubifs_2journal_8c.html#af33a1a0e7af2c23d625797b7d30a09fe" title="pack_inode" alt="" coords="237,259,325,285"/>
<area shape="rect" id="node24" href="ubifs_2journal_8c.html#a6b58fdc3cf3fe2765984565c1b77d21e" title="write_head" alt="" coords="652,259,737,285"/>
<area shape="rect" id="node26" href="ubifs_2io_8c.html#a44bb751e441c7a2479b5251b1423d16a" title="ubifs_wbuf_add_ino\l_nolock" alt="" coords="212,1222,349,1263"/>
<area shape="rect" id="node27" href="ubifs_2journal_8c.html#a9bb32d44ef1e02992210b7412754de3c" title="release_head" alt="" coords="231,1288,330,1315"/>
<area shape="rect" id="node28" href="tnc_8c.html#a45f37bcb32fdd0e4c25fca00b7a66198" title="ubifs_tnc_remove_nm" alt="" coords="205,639,356,665"/>
<area shape="rect" id="node37" href="misc_8h.html#ae4183603acbd9f727ecf1fae7617085b" title="ubifs_add_dirt" alt="" coords="643,1171,746,1197"/>
<area shape="rect" id="node41" href="key_8h.html#a6ac363a71458b8fc9f6983ac3ce0c5c3" title="lowest_ino_key" alt="" coords="225,1339,337,1365"/>
<area shape="rect" id="node42" href="key_8h.html#a9d33aa154841c271b5a27f1c03d9f37d" title="highest_ino_key" alt="" coords="223,1389,339,1416"/>
<area shape="rect" id="node43" href="tnc_8c.html#aba3e5b7438f8f8463357069869364077" title="ubifs_tnc_remove_range" alt="" coords="199,917,363,944"/>
<area shape="rect" id="node46" href="key_8h.html#a60df8426bc46e1074661d077542ea933" title="ino_key_init" alt="" coords="235,1440,326,1467"/>
<area shape="rect" id="node47" href="tnc_8c.html#a0f9bccdd201d5b2525ba901e00ece03f" title="ubifs_tnc_add" alt="" coords="229,867,332,893"/>
<area shape="rect" id="node49" href="ubifs_2journal_8c.html#abb1bef600a6aa118b19e228194c5be1d" title="finish_reservation" alt="" coords="219,1491,343,1517"/>
<area shape="rect" id="node50" href="ubifs_2journal_8c.html#aed47b114c8f20052b62f78e27cbada07" title="mark_inode_clean" alt="" coords="217,1541,344,1568"/>
<area shape="rect" id="node4" href="ubifs_2journal_8c.html#a920088cf70f88cbb1142294e99e688d6" title="reserve_space" alt="" coords="641,309,748,336"/>
<area shape="rect" id="node7" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1036,512,1108,539"/>
<area shape="rect" id="node8" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="1029,56,1115,83"/>
<area shape="rect" id="node9" href="ubifs_2commit_8c.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="632,411,757,437"/>
<area shape="rect" id="node10" href="ubifs_2debug_8c.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="837,360,961,387"/>
<area shape="rect" id="node11" href="ubifs_2debug_8c.html#a2fa0aeaaa556f0b13d098456ef7d86d4" title="ubifs_dump_lprops" alt="" coords="833,461,964,488"/>
<area shape="rect" id="node12" href="ubifs_2debug_8h.html#a69534405790cc12f492343243bc539a4" title="dbg_check_lprops" alt="" coords="835,512,962,539"/>
<area shape="rect" id="node5" href="ubifs_2debug_8c.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="1031,309,1113,336"/>
<area shape="rect" id="node6" href="ubifs_2io_8c.html#a3e6d29ad192528c05f246cd31a1732fb" title="ubifs_wbuf_sync_nolock" alt="" coords="816,259,981,285"/>
<area shape="rect" id="node14" href="block__dev_8c.html#a79868b6f75989a03b1ad72c771d39cc1" title="hash" alt="" coords="467,1424,517,1451"/>
<area shape="rect" id="node19" href="ubifs_2io_8c.html#a0b3f089c430db97bbc68e362dc7867c8" title="next_sqnum" alt="" coords="648,56,741,83"/>
<area shape="rect" id="node22" href="key_8h.html#a0eb1cf0ecc00556383b326058c65f846" title="ino_key_init_flash" alt="" coords="429,208,555,235"/>
<area shape="rect" id="node23" href="ubifs_2journal_8c.html#aac219494a71f5ce5fa3f2c70f53660ef" title="zero_ino_node_unused" alt="" coords="415,259,569,285"/>
<area shape="rect" id="node25" href="ubifs_2io_8c.html#a6ee6b209c593633d86570858d6e5ff51" title="ubifs_wbuf_write_nolock" alt="" coords="816,411,981,437"/>
<area shape="rect" id="node29" href="tnc_8c.html#af871df87e75b12ea907320baac2614d5" title="lookup_level0_dirty" alt="" coords="425,664,559,691"/>
<area shape="rect" id="node30" href="misc_8h.html#abe5c86108a05199a899138767ca1f42a" title="ubifs_zn_dirty" alt="" coords="847,791,950,817"/>
<area shape="rect" id="node31" href="tnc_8c.html#a609646516a8a0f3fd9f2b2a1a1849737" title="dirty_cow_bottom_up" alt="" coords="621,765,768,792"/>
<area shape="rect" id="node32" href="tnc_8c.html#ae4be79a5c50df84c2528fff0e619b5ca" title="fallible_resolve_collision" alt="" coords="411,512,573,539"/>
<area shape="rect" id="node34" href="tnc_8c.html#aacbd9954b161bf32cc3317abd3080f83" title="resolve_collision" alt="" coords="433,461,551,488"/>
<area shape="rect" id="node35" href="tnc_8c.html#a6c4894fa7f0b1e5bf45d6168b302fdce" title="tnc_delete" alt="" coords="451,1019,533,1045"/>
<area shape="rect" id="node40" href="ubifs_2debug_8c.html#a8e749de733b483ca979984b8aa078aa6" title="dbg_check_tnc" alt="" coords="437,867,547,893"/>
<area shape="rect" id="node33" href="tnc_8c.html#aa6a0a93befc7348c0e11ee3a038d8d81" title="tnc_next" alt="" coords="659,613,731,640"/>
<area shape="rect" id="node36" href="tnc_8c.html#a48dcf7fc1db2312050ac0378020c802b" title="lnc_free" alt="" coords="661,1069,729,1096"/>
<area shape="rect" id="node39" href="ubifs_2debug_8c.html#a56365d730ac6932bf3163a8ba7279779" title="ubifs_dump_znode" alt="" coords="629,968,760,995"/>
<area shape="rect" id="node38" href="lprops_8c.html#ae3f8fc7da604fc1fbfa182c024679d42" title="ubifs_update_one_lp" alt="" coords="828,1044,969,1071"/>
<area shape="rect" id="node44" href="tnc_8c.html#a2004703a60d098f1644d4f3e25338759" title="ubifs_lookup_level0" alt="" coords="424,1221,560,1248"/>
<area shape="rect" id="node45" href="tnc_8c.html#aa025e235d64c7ec4ec36c40906d7488b" title="key_in_range" alt="" coords="443,1272,541,1299"/>
<area shape="rect" id="node48" href="key_8h.html#abbcaebc958b96ba6c1a981b93be96899" title="key_copy" alt="" coords="453,715,531,741"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_a75ae3c25abba8f076e8d4e000ffcf45d_icgraph.png" border="0" usemap="#ubifs_2journal_8c_a75ae3c25abba8f076e8d4e000ffcf45d_icgraph" alt=""/></div>
<map name="ubifs_2journal_8c_a75ae3c25abba8f076e8d4e000ffcf45d_icgraph" id="ubifs_2journal_8c_a75ae3c25abba8f076e8d4e000ffcf45d_icgraph">
<area shape="rect" id="node2" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="199,5,297,32"/>
<area shape="rect" id="node3" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="345,5,479,32"/>
<area shape="rect" id="node4" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="527,5,600,32"/>
</map>
</div>

</div>
</div>
<a id="ab6387ea48fd6825a567f58c2786bee56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6387ea48fd6825a567f58c2786bee56">&#9670;&nbsp;</a></span>ubifs_jnl_rename()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ubifs_jnl_rename </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>old_dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>old_inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct fscrypt_name *&#160;</td>
          <td class="paramname"><em>old_nm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>new_dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>new_inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct fscrypt_name *&#160;</td>
          <td class="paramname"><em>new_nm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>whiteout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sync</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_jnl_rename - rename a directory entry. <code></code>: UBIFS file-system description object : parent inode of directory entry to rename : directory entry to rename : parent inode of directory entry to rename : new directory entry (or directory entry to replace) : non-zero if the write-buffer has to be synchronized</p>
<p>This function implements the re-name operation which may involve writing up to 4 inodes and 2 directory entries. It marks the written inodes as clean and returns zero on success. In case of failure, a negative error code is returned. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_ab6387ea48fd6825a567f58c2786bee56_cgraph.png" border="0" usemap="#ubifs_2journal_8c_ab6387ea48fd6825a567f58c2786bee56_cgraph" alt=""/></div>
<map name="ubifs_2journal_8c_ab6387ea48fd6825a567f58c2786bee56_cgraph" id="ubifs_2journal_8c_ab6387ea48fd6825a567f58c2786bee56_cgraph">
<area shape="rect" id="node2" href="proc__sysctl_8c.html#aba72ac0468502015dfce9545fb0650f2" title="new_dir" alt="" coords="221,5,288,32"/>
<area shape="rect" id="node4" href="misc_8h.html#a1d3fdeae8e4ff85d7b3581a96bb4ef49" title="ubifs_inode" alt="" coords="417,157,505,184"/>
<area shape="rect" id="node5" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="605,588,731,615"/>
<area shape="rect" id="node15" href="key_8h.html#a4c61e89b4c6084d47cabe5df52f288e4" title="dent_key_init_flash" alt="" coords="187,461,322,488"/>
<area shape="rect" id="node17" href="ubifs_2journal_8c.html#a1d4a541700f9d4bf038cadbf4e097454" title="get_dent_type" alt="" coords="203,208,307,235"/>
<area shape="rect" id="node18" href="ubifs_2journal_8c.html#a9a7b991169dcd5003fd4ccd4dbe0a199" title="set_dent_cookie" alt="" coords="196,259,313,285"/>
<area shape="rect" id="node19" href="ubifs_2journal_8c.html#ae4ece295a2679c7b5d2b9ddf9b553dd4" title="zero_dent_node_unused" alt="" coords="173,309,336,336"/>
<area shape="rect" id="node20" href="ubifs_2io_8c.html#a9d5677a6fb9ba9810931ab381e9ca3e3" title="ubifs_prep_grp_node" alt="" coords="390,259,533,285"/>
<area shape="rect" id="node22" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="817,411,924,437"/>
<area shape="rect" id="node23" href="ubifs_2journal_8c.html#af33a1a0e7af2c23d625797b7d30a09fe" title="pack_inode" alt="" coords="211,360,299,387"/>
<area shape="rect" id="node26" href="ubifs_2orphan_8c.html#acb45f2ae734e577bef2f6ffd715069aa" title="ubifs_add_orphan" alt="" coords="809,765,933,792"/>
<area shape="rect" id="node27" href="ubifs_2journal_8c.html#a9bb32d44ef1e02992210b7412754de3c" title="release_head" alt="" coords="205,563,304,589"/>
<area shape="rect" id="node28" href="ubifs_2journal_8c.html#a6b58fdc3cf3fe2765984565c1b77d21e" title="write_head" alt="" coords="828,132,913,159"/>
<area shape="rect" id="node30" href="ubifs_2io_8c.html#a44bb751e441c7a2479b5251b1423d16a" title="ubifs_wbuf_add_ino\l_nolock" alt="" coords="186,665,323,706"/>
<area shape="rect" id="node31" href="key_8h.html#a790e865fe08d05015cea5a1651759af3" title="dent_key_init" alt="" coords="205,512,304,539"/>
<area shape="rect" id="node32" href="tnc_8c.html#a76f4b8ea4414cb096acbac0c4ae433c9" title="ubifs_tnc_add_nm" alt="" coords="191,1044,319,1071"/>
<area shape="rect" id="node39" href="misc_8h.html#ae4183603acbd9f727ecf1fae7617085b" title="ubifs_add_dirt" alt="" coords="819,816,922,843"/>
<area shape="rect" id="node44" href="tnc_8c.html#a45f37bcb32fdd0e4c25fca00b7a66198" title="ubifs_tnc_remove_nm" alt="" coords="386,1196,537,1223"/>
<area shape="rect" id="node46" href="ubifs_2orphan_8c.html#afc0eab9d33c998c259bd6f0b4f23ec41" title="ubifs_delete_orphan" alt="" coords="392,1551,531,1577"/>
<area shape="rect" id="node47" href="key_8h.html#a60df8426bc46e1074661d077542ea933" title="ino_key_init" alt="" coords="209,1145,300,1172"/>
<area shape="rect" id="node48" href="tnc_8c.html#a0f9bccdd201d5b2525ba901e00ece03f" title="ubifs_tnc_add" alt="" coords="410,943,513,969"/>
<area shape="rect" id="node49" href="ubifs_2journal_8c.html#abb1bef600a6aa118b19e228194c5be1d" title="finish_reservation" alt="" coords="193,1247,317,1273"/>
<area shape="rect" id="node50" href="ubifs_2journal_8c.html#aed47b114c8f20052b62f78e27cbada07" title="mark_inode_clean" alt="" coords="191,1297,318,1324"/>
<area shape="rect" id="node3" href="proc__sysctl_8c.html#a5860667ffe3e08168b354241d36b3e82" title="init_header" alt="" coords="419,5,504,32"/>
<area shape="rect" id="node6" href="ubifs_2journal_8c.html#a920088cf70f88cbb1142294e99e688d6" title="reserve_space" alt="" coords="817,259,924,285"/>
<area shape="rect" id="node9" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1210,715,1282,741"/>
<area shape="rect" id="node10" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="1032,411,1117,437"/>
<area shape="rect" id="node11" href="ubifs_2commit_8c.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="808,563,933,589"/>
<area shape="rect" id="node12" href="ubifs_2debug_8c.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="1013,487,1137,513"/>
<area shape="rect" id="node13" href="ubifs_2debug_8c.html#a2fa0aeaaa556f0b13d098456ef7d86d4" title="ubifs_dump_lprops" alt="" coords="1009,715,1140,741"/>
<area shape="rect" id="node14" href="ubifs_2debug_8h.html#a69534405790cc12f492343243bc539a4" title="dbg_check_lprops" alt="" coords="1011,613,1138,640"/>
<area shape="rect" id="node7" href="ubifs_2debug_8c.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="1205,208,1287,235"/>
<area shape="rect" id="node8" href="ubifs_2io_8c.html#a3e6d29ad192528c05f246cd31a1732fb" title="ubifs_wbuf_sync_nolock" alt="" coords="992,157,1157,184"/>
<area shape="rect" id="node16" href="block__dev_8c.html#a79868b6f75989a03b1ad72c771d39cc1" title="hash" alt="" coords="436,487,487,513"/>
<area shape="rect" id="node21" href="ubifs_2io_8c.html#a0b3f089c430db97bbc68e362dc7867c8" title="next_sqnum" alt="" coords="621,335,715,361"/>
<area shape="rect" id="node24" href="key_8h.html#a0eb1cf0ecc00556383b326058c65f846" title="ino_key_init_flash" alt="" coords="398,309,525,336"/>
<area shape="rect" id="node25" href="ubifs_2journal_8c.html#aac219494a71f5ce5fa3f2c70f53660ef" title="zero_ino_node_unused" alt="" coords="384,360,539,387"/>
<area shape="rect" id="node29" href="ubifs_2io_8c.html#a6ee6b209c593633d86570858d6e5ff51" title="ubifs_wbuf_write_nolock" alt="" coords="992,208,1157,235"/>
<area shape="rect" id="node33" href="tnc_8c.html#af871df87e75b12ea907320baac2614d5" title="lookup_level0_dirty" alt="" coords="601,1297,735,1324"/>
<area shape="rect" id="node34" href="misc_8h.html#abe5c86108a05199a899138767ca1f42a" title="ubifs_zn_dirty" alt="" coords="1023,1272,1126,1299"/>
<area shape="rect" id="node35" href="tnc_8c.html#a609646516a8a0f3fd9f2b2a1a1849737" title="dirty_cow_bottom_up" alt="" coords="797,1348,944,1375"/>
<area shape="rect" id="node36" href="tnc_8c.html#ae4be79a5c50df84c2528fff0e619b5ca" title="fallible_resolve_collision" alt="" coords="587,1196,749,1223"/>
<area shape="rect" id="node37" href="tnc_8c.html#aacbd9954b161bf32cc3317abd3080f83" title="resolve_collision" alt="" coords="609,1399,727,1425"/>
<area shape="rect" id="node38" href="tnc_8c.html#a48dcf7fc1db2312050ac0378020c802b" title="lnc_free" alt="" coords="837,1044,905,1071"/>
<area shape="rect" id="node41" href="key_8h.html#abbcaebc958b96ba6c1a981b93be96899" title="key_copy" alt="" coords="629,841,707,868"/>
<area shape="rect" id="node42" href="tnc_8c.html#a87449d9ca6fdc3ca6e74cc409e7a1506" title="tnc_insert" alt="" coords="629,993,707,1020"/>
<area shape="rect" id="node43" href="ubifs_2debug_8c.html#a8e749de733b483ca979984b8aa078aa6" title="dbg_check_tnc" alt="" coords="613,1145,723,1172"/>
<area shape="rect" id="node40" href="lprops_8c.html#ae3f8fc7da604fc1fbfa182c024679d42" title="ubifs_update_one_lp" alt="" coords="1004,816,1145,843"/>
<area shape="rect" id="node45" href="tnc_8c.html#a6c4894fa7f0b1e5bf45d6168b302fdce" title="tnc_delete" alt="" coords="627,1095,709,1121"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_ab6387ea48fd6825a567f58c2786bee56_icgraph.png" border="0" usemap="#ubifs_2journal_8c_ab6387ea48fd6825a567f58c2786bee56_icgraph" alt=""/></div>
<map name="ubifs_2journal_8c_ab6387ea48fd6825a567f58c2786bee56_icgraph" id="ubifs_2journal_8c_ab6387ea48fd6825a567f58c2786bee56_icgraph">
<area shape="rect" id="node2" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="173,5,260,32"/>
<area shape="rect" id="node3" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="308,5,408,32"/>
</map>
</div>

</div>
</div>
<a id="a2a2057b667417cf20bfd05deb79a8a0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a2057b667417cf20bfd05deb79a8a0e">&#9670;&nbsp;</a></span>ubifs_jnl_truncate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ubifs_jnl_truncate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t&#160;</td>
          <td class="paramname"><em>old_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t&#160;</td>
          <td class="paramname"><em>new_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_jnl_truncate - update the journal for a truncation. <code></code>: UBIFS file-system description object : inode to truncate : old size : new size</p>
<p>When the size of a file decreases due to truncation, a truncation node is written, the journal tree is updated, and the last data block is re-written if it has been affected. The inode is also updated in order to synchronize the new inode size.</p>
<p>This function marks the inode as clean and returns zero on success. In case of failure, a negative error code is returned. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_a2a2057b667417cf20bfd05deb79a8a0e_cgraph.png" border="0" usemap="#ubifs_2journal_8c_a2a2057b667417cf20bfd05deb79a8a0e_cgraph" alt=""/></div>
<map name="ubifs_2journal_8c_a2a2057b667417cf20bfd05deb79a8a0e_cgraph" id="ubifs_2journal_8c_a2a2057b667417cf20bfd05deb79a8a0e_cgraph">
<area shape="rect" id="node2" href="misc_8h.html#a1d3fdeae8e4ff85d7b3581a96bb4ef49" title="ubifs_inode" alt="" coords="820,5,908,32"/>
<area shape="rect" id="node3" href="ubifs_2journal_8c.html#a0192ba0f1c902266317f5be8a385aff5" title="zero_trun_node_unused" alt="" coords="179,1108,339,1135"/>
<area shape="rect" id="node4" href="key_8h.html#aa31c368518eb702eaa02487c8699797f" title="data_key_init" alt="" coords="210,1159,309,1185"/>
<area shape="rect" id="node5" href="misc_8h.html#af034d326935da469d5de92c07137b59a" title="ubifs_tnc_lookup" alt="" coords="199,1057,319,1084"/>
<area shape="rect" id="node8" href="ubifs_2journal_8c.html#a687e1b07880f8f06558ceefc741d0465" title="truncate_data_node" alt="" coords="399,157,535,184"/>
<area shape="rect" id="node16" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="197,537,322,564"/>
<area shape="rect" id="node24" href="ubifs_2journal_8c.html#af33a1a0e7af2c23d625797b7d30a09fe" title="pack_inode" alt="" coords="215,259,303,285"/>
<area shape="rect" id="node27" href="ubifs_2io_8c.html#a9d5677a6fb9ba9810931ab381e9ca3e3" title="ubifs_prep_grp_node" alt="" coords="395,309,538,336"/>
<area shape="rect" id="node29" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="811,563,917,589"/>
<area shape="rect" id="node30" href="ubifs_2journal_8c.html#a6b58fdc3cf3fe2765984565c1b77d21e" title="write_head" alt="" coords="424,765,509,792"/>
<area shape="rect" id="node32" href="ubifs_2io_8c.html#a44bb751e441c7a2479b5251b1423d16a" title="ubifs_wbuf_add_ino\l_nolock" alt="" coords="191,1210,328,1251"/>
<area shape="rect" id="node33" href="ubifs_2journal_8c.html#a9bb32d44ef1e02992210b7412754de3c" title="release_head" alt="" coords="210,1276,309,1303"/>
<area shape="rect" id="node34" href="tnc_8c.html#a0f9bccdd201d5b2525ba901e00ece03f" title="ubifs_tnc_add" alt="" coords="208,956,311,983"/>
<area shape="rect" id="node41" href="misc_8h.html#ae4183603acbd9f727ecf1fae7617085b" title="ubifs_add_dirt" alt="" coords="415,867,518,893"/>
<area shape="rect" id="node45" href="key_8h.html#a60df8426bc46e1074661d077542ea933" title="ino_key_init" alt="" coords="214,1327,305,1353"/>
<area shape="rect" id="node46" href="tnc_8c.html#aba3e5b7438f8f8463357069869364077" title="ubifs_tnc_remove_range" alt="" coords="177,1007,341,1033"/>
<area shape="rect" id="node49" href="ubifs_2journal_8c.html#abb1bef600a6aa118b19e228194c5be1d" title="finish_reservation" alt="" coords="197,1377,321,1404"/>
<area shape="rect" id="node50" href="ubifs_2journal_8c.html#aed47b114c8f20052b62f78e27cbada07" title="mark_inode_clean" alt="" coords="196,1428,323,1455"/>
<area shape="rect" id="node6" href="tnc_8c.html#a93e762f5309412966e944b237a2c03c3" title="ubifs_tnc_locate" alt="" coords="408,1424,525,1451"/>
<area shape="rect" id="node7" href="tnc_8c.html#a2004703a60d098f1644d4f3e25338759" title="ubifs_lookup_level0" alt="" coords="607,1373,743,1400"/>
<area shape="rect" id="node9" href="ubifs_8h.html#a05379a3e5d4223a7821ec80d3606a6e6" title="ubifs_crypt_is_encrypted" alt="" coords="592,56,759,83"/>
<area shape="rect" id="node10" href="ubifs_2crypto_8c.html#a598308652cc2b1d5344d71dac180a913" title="ubifs_decrypt" alt="" coords="625,157,725,184"/>
<area shape="rect" id="node12" href="ubifs_2compress_8c.html#a9b5070bc52f24f554d4ac3cb06651fe5" title="ubifs_decompress" alt="" coords="611,208,739,235"/>
<area shape="rect" id="node13" href="ubifs_2compress_8c.html#a34709dede6e3377bd2bcd99862e71ac7" title="ubifs_compress" alt="" coords="807,183,921,209"/>
<area shape="rect" id="node15" href="ubifs_2crypto_8c.html#ada6ca748f7da6ade0a16bf43c7cd64d4" title="ubifs_encrypt" alt="" coords="625,259,725,285"/>
<area shape="rect" id="node11" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="828,397,900,424"/>
<area shape="rect" id="node14" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="969,411,1055,437"/>
<area shape="rect" id="node17" href="ubifs_2journal_8c.html#a920088cf70f88cbb1142294e99e688d6" title="reserve_space" alt="" coords="413,715,520,741"/>
<area shape="rect" id="node20" href="ubifs_2commit_8c.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="404,512,529,539"/>
<area shape="rect" id="node21" href="ubifs_2debug_8c.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="613,613,737,640"/>
<area shape="rect" id="node22" href="ubifs_2debug_8c.html#a2fa0aeaaa556f0b13d098456ef7d86d4" title="ubifs_dump_lprops" alt="" coords="610,360,741,387"/>
<area shape="rect" id="node23" href="ubifs_2debug_8h.html#a69534405790cc12f492343243bc539a4" title="dbg_check_lprops" alt="" coords="612,411,739,437"/>
<area shape="rect" id="node18" href="ubifs_2debug_8c.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="823,715,905,741"/>
<area shape="rect" id="node19" href="ubifs_2io_8c.html#a3e6d29ad192528c05f246cd31a1732fb" title="ubifs_wbuf_sync_nolock" alt="" coords="593,765,758,792"/>
<area shape="rect" id="node25" href="key_8h.html#a0eb1cf0ecc00556383b326058c65f846" title="ino_key_init_flash" alt="" coords="403,259,530,285"/>
<area shape="rect" id="node26" href="ubifs_2journal_8c.html#aac219494a71f5ce5fa3f2c70f53660ef" title="zero_ino_node_unused" alt="" coords="389,208,544,235"/>
<area shape="rect" id="node28" href="ubifs_2io_8c.html#a0b3f089c430db97bbc68e362dc7867c8" title="next_sqnum" alt="" coords="629,309,722,336"/>
<area shape="rect" id="node31" href="ubifs_2io_8c.html#a6ee6b209c593633d86570858d6e5ff51" title="ubifs_wbuf_write_nolock" alt="" coords="593,664,758,691"/>
<area shape="rect" id="node35" href="tnc_8c.html#af871df87e75b12ea907320baac2614d5" title="lookup_level0_dirty" alt="" coords="400,968,533,995"/>
<area shape="rect" id="node38" href="key_8h.html#abbcaebc958b96ba6c1a981b93be96899" title="key_copy" alt="" coords="427,816,506,843"/>
<area shape="rect" id="node39" href="tnc_8c.html#a87449d9ca6fdc3ca6e74cc409e7a1506" title="tnc_insert" alt="" coords="427,917,506,944"/>
<area shape="rect" id="node40" href="tnc_8c.html#a48dcf7fc1db2312050ac0378020c802b" title="lnc_free" alt="" coords="433,1019,501,1045"/>
<area shape="rect" id="node43" href="ubifs_2debug_8c.html#a8e749de733b483ca979984b8aa078aa6" title="dbg_check_tnc" alt="" coords="411,1120,522,1147"/>
<area shape="rect" id="node36" href="misc_8h.html#abe5c86108a05199a899138767ca1f42a" title="ubifs_zn_dirty" alt="" coords="813,1069,915,1096"/>
<area shape="rect" id="node37" href="tnc_8c.html#a609646516a8a0f3fd9f2b2a1a1849737" title="dirty_cow_bottom_up" alt="" coords="602,1019,749,1045"/>
<area shape="rect" id="node42" href="lprops_8c.html#ae3f8fc7da604fc1fbfa182c024679d42" title="ubifs_update_one_lp" alt="" coords="605,867,746,893"/>
<area shape="rect" id="node44" href="ubifs_2debug_8c.html#a56365d730ac6932bf3163a8ba7279779" title="ubifs_dump_znode" alt="" coords="610,1171,741,1197"/>
<area shape="rect" id="node47" href="tnc_8c.html#aa6a0a93befc7348c0e11ee3a038d8d81" title="tnc_next" alt="" coords="431,1272,503,1299"/>
<area shape="rect" id="node48" href="tnc_8c.html#aa025e235d64c7ec4ec36c40906d7488b" title="key_in_range" alt="" coords="417,1373,516,1400"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_a2a2057b667417cf20bfd05deb79a8a0e_icgraph.png" border="0" usemap="#ubifs_2journal_8c_a2a2057b667417cf20bfd05deb79a8a0e_icgraph" alt=""/></div>
<map name="ubifs_2journal_8c_a2a2057b667417cf20bfd05deb79a8a0e_icgraph" id="ubifs_2journal_8c_a2a2057b667417cf20bfd05deb79a8a0e_icgraph">
<area shape="rect" id="node2" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="177,5,277,32"/>
<area shape="rect" id="node3" href="ubifs_8h.html#aaebf1c80e366c0f2702f58b91d7a9d38" title="ubifs_setattr" alt="" coords="325,5,420,32"/>
</map>
</div>

</div>
</div>
<a id="ad342a112d6f683c94399a45a14ec3aef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad342a112d6f683c94399a45a14ec3aef">&#9670;&nbsp;</a></span>ubifs_jnl_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ubifs_jnl_update </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct fscrypt_name *&#160;</td>
          <td class="paramname"><em>nm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>deletion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>xent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_ad342a112d6f683c94399a45a14ec3aef_cgraph.png" border="0" usemap="#ubifs_2journal_8c_ad342a112d6f683c94399a45a14ec3aef_cgraph" alt=""/></div>
<map name="ubifs_2journal_8c_ad342a112d6f683c94399a45a14ec3aef_cgraph" id="ubifs_2journal_8c_ad342a112d6f683c94399a45a14ec3aef_cgraph">
<area shape="rect" id="node2" href="misc_8h.html#a1d3fdeae8e4ff85d7b3581a96bb4ef49" title="ubifs_inode" alt="" coords="413,5,501,32"/>
<area shape="rect" id="node3" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="188,652,313,679"/>
<area shape="rect" id="node13" href="key_8h.html#af6c98e329576050823b946c32e2f5803" title="dent_key_init_hash" alt="" coords="183,1171,318,1197"/>
<area shape="rect" id="node14" href="key_8h.html#a790e865fe08d05015cea5a1651759af3" title="dent_key_init" alt="" coords="201,1272,300,1299"/>
<area shape="rect" id="node16" href="key_8h.html#adcb63f144ee365e6e61a1afc86e741e1" title="xent_key_init" alt="" coords="201,1221,300,1248"/>
<area shape="rect" id="node17" href="key_8h.html#a1b58cdc042da655c7bbf0fce057b413c" title="key_write" alt="" coords="211,1323,290,1349"/>
<area shape="rect" id="node18" href="ubifs_2journal_8c.html#a1d4a541700f9d4bf038cadbf4e097454" title="get_dent_type" alt="" coords="199,1373,303,1400"/>
<area shape="rect" id="node19" href="ubifs_2journal_8c.html#a9a7b991169dcd5003fd4ccd4dbe0a199" title="set_dent_cookie" alt="" coords="192,1424,309,1451"/>
<area shape="rect" id="node20" href="ubifs_2journal_8c.html#ae4ece295a2679c7b5d2b9ddf9b553dd4" title="zero_dent_node_unused" alt="" coords="169,1475,332,1501"/>
<area shape="rect" id="node21" href="ubifs_2io_8c.html#a9d5677a6fb9ba9810931ab381e9ca3e3" title="ubifs_prep_grp_node" alt="" coords="386,157,529,184"/>
<area shape="rect" id="node23" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="821,208,927,235"/>
<area shape="rect" id="node24" href="ubifs_2journal_8c.html#af33a1a0e7af2c23d625797b7d30a09fe" title="pack_inode" alt="" coords="207,107,295,133"/>
<area shape="rect" id="node27" href="ubifs_2orphan_8c.html#acb45f2ae734e577bef2f6ffd715069aa" title="ubifs_add_orphan" alt="" coords="395,309,519,336"/>
<area shape="rect" id="node28" href="ubifs_2journal_8c.html#a9bb32d44ef1e02992210b7412754de3c" title="release_head" alt="" coords="201,1525,300,1552"/>
<area shape="rect" id="node29" href="ubifs_2journal_8c.html#a6b58fdc3cf3fe2765984565c1b77d21e" title="write_head" alt="" coords="415,563,500,589"/>
<area shape="rect" id="node31" href="ubifs_2io_8c.html#a44bb751e441c7a2479b5251b1423d16a" title="ubifs_wbuf_add_ino\l_nolock" alt="" coords="182,1577,319,1618"/>
<area shape="rect" id="node32" href="tnc_8c.html#a6bae0dd5ac22531cbdfe78042f3f3a7e" title="ubifs_tnc_remove_dh" alt="" coords="384,1323,531,1349"/>
<area shape="rect" id="node42" href="misc_8h.html#ae4183603acbd9f727ecf1fae7617085b" title="ubifs_add_dirt" alt="" coords="823,1221,925,1248"/>
<area shape="rect" id="node44" href="tnc_8c.html#a45f37bcb32fdd0e4c25fca00b7a66198" title="ubifs_tnc_remove_nm" alt="" coords="382,968,533,995"/>
<area shape="rect" id="node45" href="tnc_8c.html#a76f4b8ea4414cb096acbac0c4ae433c9" title="ubifs_tnc_add_nm" alt="" coords="187,917,315,944"/>
<area shape="rect" id="node46" href="key_8h.html#a60df8426bc46e1074661d077542ea933" title="ino_key_init" alt="" coords="205,1643,296,1669"/>
<area shape="rect" id="node47" href="tnc_8c.html#a0f9bccdd201d5b2525ba901e00ece03f" title="ubifs_tnc_add" alt="" coords="406,1069,509,1096"/>
<area shape="rect" id="node48" href="ubifs_2journal_8c.html#abb1bef600a6aa118b19e228194c5be1d" title="finish_reservation" alt="" coords="189,1693,313,1720"/>
<area shape="rect" id="node49" href="ubifs_2journal_8c.html#aed47b114c8f20052b62f78e27cbada07" title="mark_inode_clean" alt="" coords="187,1744,314,1771"/>
<area shape="rect" id="node50" href="ubifs_2orphan_8c.html#afc0eab9d33c998c259bd6f0b4f23ec41" title="ubifs_delete_orphan" alt="" coords="388,259,527,285"/>
<area shape="rect" id="node4" href="ubifs_2journal_8c.html#a920088cf70f88cbb1142294e99e688d6" title="reserve_space" alt="" coords="404,613,511,640"/>
<area shape="rect" id="node7" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="838,385,910,412"/>
<area shape="rect" id="node8" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="1009,208,1094,235"/>
<area shape="rect" id="node9" href="ubifs_2commit_8c.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="395,715,520,741"/>
<area shape="rect" id="node10" href="ubifs_2debug_8c.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="603,715,727,741"/>
<area shape="rect" id="node11" href="ubifs_2debug_8c.html#a2fa0aeaaa556f0b13d098456ef7d86d4" title="ubifs_dump_lprops" alt="" coords="600,360,731,387"/>
<area shape="rect" id="node12" href="ubifs_2debug_8h.html#a69534405790cc12f492343243bc539a4" title="dbg_check_lprops" alt="" coords="602,411,729,437"/>
<area shape="rect" id="node5" href="ubifs_2debug_8c.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="833,613,915,640"/>
<area shape="rect" id="node6" href="ubifs_2io_8c.html#a3e6d29ad192528c05f246cd31a1732fb" title="ubifs_wbuf_sync_nolock" alt="" coords="583,613,748,640"/>
<area shape="rect" id="node15" href="block__dev_8c.html#a79868b6f75989a03b1ad72c771d39cc1" title="hash" alt="" coords="432,1373,483,1400"/>
<area shape="rect" id="node22" href="ubifs_2io_8c.html#a0b3f089c430db97bbc68e362dc7867c8" title="next_sqnum" alt="" coords="619,157,712,184"/>
<area shape="rect" id="node25" href="key_8h.html#a0eb1cf0ecc00556383b326058c65f846" title="ino_key_init_flash" alt="" coords="394,107,521,133"/>
<area shape="rect" id="node26" href="ubifs_2journal_8c.html#aac219494a71f5ce5fa3f2c70f53660ef" title="zero_ino_node_unused" alt="" coords="380,56,535,83"/>
<area shape="rect" id="node30" href="ubifs_2io_8c.html#a6ee6b209c593633d86570858d6e5ff51" title="ubifs_wbuf_write_nolock" alt="" coords="583,512,748,539"/>
<area shape="rect" id="node33" href="tnc_8c.html#af871df87e75b12ea907320baac2614d5" title="lookup_level0_dirty" alt="" coords="599,1069,732,1096"/>
<area shape="rect" id="node34" href="misc_8h.html#abe5c86108a05199a899138767ca1f42a" title="ubifs_zn_dirty" alt="" coords="1000,1019,1103,1045"/>
<area shape="rect" id="node35" href="tnc_8c.html#a609646516a8a0f3fd9f2b2a1a1849737" title="dirty_cow_bottom_up" alt="" coords="801,1019,947,1045"/>
<area shape="rect" id="node36" href="tnc_8c.html#add8ba6d4ce8281dbb79e417150da8e4e" title="tnc_read_hashed_node" alt="" coords="796,1551,952,1577"/>
<area shape="rect" id="node37" href="key_8h.html#a5fecb78c4069cc54600e8800dc0200b7" title="lowest_dent_key" alt="" coords="605,1627,725,1653"/>
<area shape="rect" id="node38" href="key_8h.html#a4a12b97ed78e138baf7886a6df7ed50f" title="key_inum" alt="" coords="835,1500,913,1527"/>
<area shape="rect" id="node39" href="tnc_8c.html#a2004703a60d098f1644d4f3e25338759" title="ubifs_lookup_level0" alt="" coords="597,1424,733,1451"/>
<area shape="rect" id="node40" href="tnc_8c.html#a63fc44948a23cd401f725d74c0ffd761" title="search_dh_cookie" alt="" coords="602,1525,729,1552"/>
<area shape="rect" id="node41" href="tnc_8c.html#a6c4894fa7f0b1e5bf45d6168b302fdce" title="tnc_delete" alt="" coords="624,1323,707,1349"/>
<area shape="rect" id="node43" href="ubifs_2debug_8c.html#a8e749de733b483ca979984b8aa078aa6" title="dbg_check_tnc" alt="" coords="610,917,721,944"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_ad342a112d6f683c94399a45a14ec3aef_icgraph.png" border="0" usemap="#ubifs_2journal_8c_ad342a112d6f683c94399a45a14ec3aef_icgraph" alt=""/></div>
<map name="ubifs_2journal_8c_ad342a112d6f683c94399a45a14ec3aef_icgraph" id="ubifs_2journal_8c_ad342a112d6f683c94399a45a14ec3aef_icgraph">
<area shape="rect" id="node2" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="175,56,266,83"/>
<area shape="rect" id="node7" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="174,107,267,133"/>
<area shape="rect" id="node8" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="179,157,262,184"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="182,208,259,235"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="175,259,266,285"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="177,309,264,336"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="176,360,265,387"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="173,411,269,437"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="169,461,272,488"/>
<area shape="rect" id="node3" href="ubifs_2xattr_8c.html#a2c0f8e28d408b8e89b4ce7d6047af912" title="ubifs_xattr_set" alt="" coords="320,56,428,83"/>
<area shape="rect" id="node4" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="490,5,623,32"/>
<area shape="rect" id="node5" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="685,31,759,57"/>
<area shape="rect" id="node6" href="ubifs_2crypto_8c.html#a4984848c1f6ebc630f98d30a9bbf2ed3" title="ubifs_crypt_set_context" alt="" coords="476,107,637,133"/>
<area shape="rect" id="node9" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="326,132,422,159"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="331,183,417,209"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="507,183,607,209"/>
</map>
</div>

</div>
</div>
<a id="a9ed51b8a566d5776a783b6f955c32cf5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ed51b8a566d5776a783b6f955c32cf5">&#9670;&nbsp;</a></span>ubifs_jnl_write_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ubifs_jnl_write_data </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const union <a class="el" href="unionubifs__key.html">ubifs_key</a> *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_jnl_write_data - write a data node to the journal. <code></code>: UBIFS file-system description object : inode the data node belongs to : node key : buffer to write : data length (must not exceed UBIFS_BLOCK_SIZE)</p>
<p>This function writes a data node to the journal. Returns %0 if the data node was successfully written, and a negative error code in case of failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_a9ed51b8a566d5776a783b6f955c32cf5_cgraph.png" border="0" usemap="#ubifs_2journal_8c_a9ed51b8a566d5776a783b6f955c32cf5_cgraph" alt=""/></div>
<map name="ubifs_2journal_8c_a9ed51b8a566d5776a783b6f955c32cf5_cgraph" id="ubifs_2journal_8c_a9ed51b8a566d5776a783b6f955c32cf5_cgraph">
<area shape="rect" id="node2" href="misc_8h.html#a1d3fdeae8e4ff85d7b3581a96bb4ef49" title="ubifs_inode" alt="" coords="435,15,523,42"/>
<area shape="rect" id="node3" href="ubifs_8h.html#a05379a3e5d4223a7821ec80d3606a6e6" title="ubifs_crypt_is_encrypted" alt="" coords="191,66,357,93"/>
<area shape="rect" id="node5" href="key_8h.html#a4a12b97ed78e138baf7886a6df7ed50f" title="key_inum" alt="" coords="651,142,729,169"/>
<area shape="rect" id="node6" href="key_8h.html#a10c13375b52dbb12be6f9b685d1d1ba7" title="key_block" alt="" coords="233,1485,315,1511"/>
<area shape="rect" id="node7" href="key_8h.html#a1b58cdc042da655c7bbf0fce057b413c" title="key_write" alt="" coords="235,1535,313,1562"/>
<area shape="rect" id="node8" href="ubifs_2compress_8c.html#a34709dede6e3377bd2bcd99862e71ac7" title="ubifs_compress" alt="" coords="217,1434,331,1461"/>
<area shape="rect" id="node10" href="ubifs_2crypto_8c.html#ada6ca748f7da6ade0a16bf43c7cd64d4" title="ubifs_encrypt" alt="" coords="224,674,324,701"/>
<area shape="rect" id="node18" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="211,1029,337,1055"/>
<area shape="rect" id="node25" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="857,1333,964,1359"/>
<area shape="rect" id="node38" href="ubifs_2journal_8c.html#a7285ba71f1d541318b61943bcc8e756f" title="write_node" alt="" coords="647,1551,733,1578"/>
<area shape="rect" id="node41" href="ubifs_2io_8c.html#a44bb751e441c7a2479b5251b1423d16a" title="ubifs_wbuf_add_ino\l_nolock" alt="" coords="205,1587,343,1628"/>
<area shape="rect" id="node42" href="ubifs_2journal_8c.html#a9bb32d44ef1e02992210b7412754de3c" title="release_head" alt="" coords="225,1653,323,1679"/>
<area shape="rect" id="node43" href="tnc_8c.html#a0f9bccdd201d5b2525ba901e00ece03f" title="ubifs_tnc_add" alt="" coords="223,319,325,346"/>
<area shape="rect" id="node50" href="ubifs_2journal_8c.html#abb1bef600a6aa118b19e228194c5be1d" title="finish_reservation" alt="" coords="212,1703,336,1730"/>
<area shape="rect" id="node4" href="ubifs_8h.html#a1aa9930cc94a47ac345316581dd49ab3" title="__printf" alt="" coords="446,66,511,93"/>
<area shape="rect" id="node9" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="1041,1641,1127,1667"/>
<area shape="rect" id="node11" href="crypto_2crypto_8c.html#a49c93490a4358932673c23b21fbb1d1f" title="fscrypt_encrypt_page" alt="" coords="405,547,552,574"/>
<area shape="rect" id="node17" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1048,775,1120,802"/>
<area shape="rect" id="node12" href="crypto_2crypto_8c.html#a54b1c5526cd4eccd22ebb1e73c3fc385" title="fscrypt_do_page_crypto" alt="" coords="609,623,771,650"/>
<area shape="rect" id="node13" href="crypto_2crypto_8c.html#acd08deb87a35766b62dd8373706cf091" title="fscrypt_get_ctx" alt="" coords="634,421,746,447"/>
<area shape="rect" id="node14" href="crypto_2crypto_8c.html#a191e3998d0d9505e9aa78f5d02c0e766" title="EXPORT_SYMBOL" alt="" coords="841,471,980,498"/>
<area shape="rect" id="node15" href="crypto_2crypto_8c.html#a1f4b4ee23f3f6ea7869b12de76151f8e" title="fscrypt_alloc_bounce_page" alt="" coords="600,573,780,599"/>
<area shape="rect" id="node16" href="crypto_2crypto_8c.html#a664e13aac936b7996a7ded8c10ad2df9" title="fscrypt_release_ctx" alt="" coords="622,471,758,498"/>
<area shape="rect" id="node19" href="ubifs_2journal_8c.html#a920088cf70f88cbb1142294e99e688d6" title="reserve_space" alt="" coords="425,1105,532,1131"/>
<area shape="rect" id="node28" href="ubifs_2commit_8c.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="416,927,541,954"/>
<area shape="rect" id="node31" href="ubifs_2debug_8h.html#a69534405790cc12f492343243bc539a4" title="dbg_check_lprops" alt="" coords="847,877,974,903"/>
<area shape="rect" id="node33" href="ubifs_2debug_8c.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="417,1383,541,1410"/>
<area shape="rect" id="node36" href="ubifs_2debug_8c.html#a2fa0aeaaa556f0b13d098456ef7d86d4" title="ubifs_dump_lprops" alt="" coords="625,725,755,751"/>
<area shape="rect" id="node20" href="find_8c.html#a1f03e32ffa32d28279f1eaf0f81c4a5f" title="ubifs_find_free_space" alt="" coords="615,978,765,1005"/>
<area shape="rect" id="node21" href="ubifs_2debug_8c.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="1043,1359,1125,1386"/>
<area shape="rect" id="node22" href="ubifs_2gc_8c.html#a6aba86bcae816613915e10318fdf6b83" title="ubifs_garbage_collect" alt="" coords="616,1231,764,1258"/>
<area shape="rect" id="node23" href="misc_8h.html#a61ad06675d59063a2171172f8ba94c79" title="ubifs_return_leb" alt="" coords="853,1218,968,1245"/>
<area shape="rect" id="node24" href="ubifs_2io_8c.html#a3e6d29ad192528c05f246cd31a1732fb" title="ubifs_wbuf_sync_nolock" alt="" coords="828,1282,993,1309"/>
<area shape="rect" id="node26" href="ubifs_2log_8c.html#a8b30a0dc99186d8f07ee2f47693f11b7" title="ubifs_add_bud_to_log" alt="" coords="616,1029,764,1055"/>
<area shape="rect" id="node27" href="ubifs_2io_8c.html#a4bf09b0b677c1ca6d0b034d91281d2f3" title="ubifs_wbuf_seek_nolock" alt="" coords="828,1142,993,1169"/>
<area shape="rect" id="node29" href="ubifs_2commit_8c.html#a8066477fd4d182a562575fec9c1460f9" title="wait_for_commit" alt="" coords="631,927,749,954"/>
<area shape="rect" id="node30" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="647,877,733,903"/>
<area shape="rect" id="node32" href="lprops_8c.html#a8a4a969b18d269964ff80d11eb94b8ab" title="ubifs_get_lp_stats" alt="" coords="847,826,975,853"/>
<area shape="rect" id="node34" href="budget_8c.html#adaa1427281786d8bfca793236b5f0457" title="ubifs_calc_available" alt="" coords="841,1387,980,1414"/>
<area shape="rect" id="node35" href="budget_8c.html#a6323235e83f399d119f1deb54fa2f144" title="ubifs_get_free_space\l_nolock" alt="" coords="617,1384,763,1425"/>
<area shape="rect" id="node37" href="ubifs_2debug_8c.html#ab351e7abb59edb97d57bd44dd83b0484" title="ubifs_dump_lstats" alt="" coords="847,725,975,751"/>
<area shape="rect" id="node39" href="ubifs_2io_8c.html#acfc2ca3ffa8d094855c2e59551f3a767" title="ubifs_prepare_node" alt="" coords="843,1590,978,1617"/>
<area shape="rect" id="node40" href="ubifs_2io_8c.html#a6ee6b209c593633d86570858d6e5ff51" title="ubifs_wbuf_write_nolock" alt="" coords="828,1489,993,1515"/>
<area shape="rect" id="node44" href="tnc_8c.html#af871df87e75b12ea907320baac2614d5" title="lookup_level0_dirty" alt="" coords="412,218,545,245"/>
<area shape="rect" id="node45" href="key_8h.html#abbcaebc958b96ba6c1a981b93be96899" title="key_copy" alt="" coords="439,269,518,295"/>
<area shape="rect" id="node46" href="tnc_8c.html#a87449d9ca6fdc3ca6e74cc409e7a1506" title="tnc_insert" alt="" coords="439,167,518,194"/>
<area shape="rect" id="node47" href="tnc_8c.html#a48dcf7fc1db2312050ac0378020c802b" title="lnc_free" alt="" coords="445,319,513,346"/>
<area shape="rect" id="node48" href="misc_8h.html#ae4183603acbd9f727ecf1fae7617085b" title="ubifs_add_dirt" alt="" coords="427,370,530,397"/>
<area shape="rect" id="node49" href="ubifs_2debug_8c.html#a8e749de733b483ca979984b8aa078aa6" title="dbg_check_tnc" alt="" coords="855,395,966,422"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_a9ed51b8a566d5776a783b6f955c32cf5_icgraph.png" border="0" usemap="#ubifs_2journal_8c_a9ed51b8a566d5776a783b6f955c32cf5_icgraph" alt=""/></div>
<map name="ubifs_2journal_8c_a9ed51b8a566d5776a783b6f955c32cf5_icgraph" id="ubifs_2journal_8c_a9ed51b8a566d5776a783b6f955c32cf5_icgraph">
<area shape="rect" id="node2" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="191,31,289,57"/>
<area shape="rect" id="node3" href="ubifs_2file_8c.html#a2ad22c013a0dccfd9f49e114ed89dfa6" title="ubifs_writepage" alt="" coords="337,5,451,32"/>
<area shape="rect" id="node4" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="344,56,444,83"/>
<area shape="rect" id="node5" href="ubifs_8h.html#aaebf1c80e366c0f2702f58b91d7a9d38" title="ubifs_setattr" alt="" coords="499,56,593,83"/>
</map>
</div>

</div>
</div>
<a id="a8c1bde924b99b7852408656e18230d99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c1bde924b99b7852408656e18230d99">&#9670;&nbsp;</a></span>ubifs_jnl_write_inode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ubifs_jnl_write_inode </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_jnl_write_inode - flush inode to the journal. <code></code>: UBIFS file-system description object : inode to flush</p>
<p>This function writes inode  to the journal. If the inode is synchronous, it also synchronizes the write-buffer. Returns zero in case of success and a negative error code in case of failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_a8c1bde924b99b7852408656e18230d99_cgraph.png" border="0" usemap="#ubifs_2journal_8c_a8c1bde924b99b7852408656e18230d99_cgraph" alt=""/></div>
<map name="ubifs_2journal_8c_a8c1bde924b99b7852408656e18230d99_cgraph" id="ubifs_2journal_8c_a8c1bde924b99b7852408656e18230d99_cgraph">
<area shape="rect" id="node2" href="misc_8h.html#a1d3fdeae8e4ff85d7b3581a96bb4ef49" title="ubifs_inode" alt="" coords="431,62,519,88"/>
<area shape="rect" id="node3" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="208,787,333,814"/>
<area shape="rect" id="node10" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="832,442,939,468"/>
<area shape="rect" id="node23" href="ubifs_2journal_8c.html#af33a1a0e7af2c23d625797b7d30a09fe" title="pack_inode" alt="" coords="227,163,315,190"/>
<area shape="rect" id="node27" href="ubifs_2journal_8c.html#a6b58fdc3cf3fe2765984565c1b77d21e" title="write_head" alt="" coords="637,36,723,63"/>
<area shape="rect" id="node29" href="ubifs_2io_8c.html#a44bb751e441c7a2479b5251b1423d16a" title="ubifs_wbuf_add_ino\l_nolock" alt="" coords="202,1218,339,1260"/>
<area shape="rect" id="node30" href="ubifs_2journal_8c.html#a9bb32d44ef1e02992210b7412754de3c" title="release_head" alt="" coords="221,1284,320,1311"/>
<area shape="rect" id="node31" href="tnc_8c.html#a928b6fd97b873a391e906fa28720273e" title="ubifs_tnc_remove_ino" alt="" coords="196,1116,345,1143"/>
<area shape="rect" id="node42" href="misc_8h.html#ae4183603acbd9f727ecf1fae7617085b" title="ubifs_add_dirt" alt="" coords="629,964,731,991"/>
<area shape="rect" id="node45" href="ubifs_2orphan_8c.html#afc0eab9d33c998c259bd6f0b4f23ec41" title="ubifs_delete_orphan" alt="" coords="201,1167,340,1194"/>
<area shape="rect" id="node46" href="key_8h.html#a60df8426bc46e1074661d077542ea933" title="ino_key_init" alt="" coords="225,1335,316,1362"/>
<area shape="rect" id="node47" href="tnc_8c.html#a0f9bccdd201d5b2525ba901e00ece03f" title="ubifs_tnc_add" alt="" coords="424,1066,527,1092"/>
<area shape="rect" id="node50" href="ubifs_2journal_8c.html#abb1bef600a6aa118b19e228194c5be1d" title="finish_reservation" alt="" coords="209,1386,333,1412"/>
<area shape="rect" id="node4" href="ubifs_2journal_8c.html#a920088cf70f88cbb1142294e99e688d6" title="reserve_space" alt="" coords="422,315,529,342"/>
<area shape="rect" id="node11" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="1016,492,1101,519"/>
<area shape="rect" id="node14" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1023,888,1095,915"/>
<area shape="rect" id="node15" href="ubifs_2commit_8c.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="413,762,538,788"/>
<area shape="rect" id="node18" href="ubifs_2debug_8h.html#a69534405790cc12f492343243bc539a4" title="dbg_check_lprops" alt="" coords="822,812,949,839"/>
<area shape="rect" id="node19" href="ubifs_2debug_8c.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="413,631,537,658"/>
<area shape="rect" id="node22" href="ubifs_2debug_8c.html#a2fa0aeaaa556f0b13d098456ef7d86d4" title="ubifs_dump_lprops" alt="" coords="820,863,951,890"/>
<area shape="rect" id="node5" href="find_8c.html#a1f03e32ffa32d28279f1eaf0f81c4a5f" title="ubifs_find_free_space" alt="" coords="605,239,755,266"/>
<area shape="rect" id="node6" href="ubifs_2debug_8c.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="1018,112,1099,139"/>
<area shape="rect" id="node7" href="ubifs_2gc_8c.html#a6aba86bcae816613915e10318fdf6b83" title="ubifs_garbage_collect" alt="" coords="606,290,754,316"/>
<area shape="rect" id="node8" href="misc_8h.html#a61ad06675d59063a2171172f8ba94c79" title="ubifs_return_leb" alt="" coords="828,340,943,367"/>
<area shape="rect" id="node9" href="ubifs_2io_8c.html#a3e6d29ad192528c05f246cd31a1732fb" title="ubifs_wbuf_sync_nolock" alt="" coords="803,87,968,114"/>
<area shape="rect" id="node12" href="ubifs_2log_8c.html#a8b30a0dc99186d8f07ee2f47693f11b7" title="ubifs_add_bud_to_log" alt="" coords="606,340,754,367"/>
<area shape="rect" id="node13" href="ubifs_2io_8c.html#a4bf09b0b677c1ca6d0b034d91281d2f3" title="ubifs_wbuf_seek_nolock" alt="" coords="803,188,968,215"/>
<area shape="rect" id="node16" href="ubifs_2commit_8c.html#a8066477fd4d182a562575fec9c1460f9" title="wait_for_commit" alt="" coords="621,762,739,788"/>
<area shape="rect" id="node17" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="637,711,723,738"/>
<area shape="rect" id="node20" href="budget_8c.html#adaa1427281786d8bfca793236b5f0457" title="ubifs_calc_available" alt="" coords="816,631,955,658"/>
<area shape="rect" id="node21" href="budget_8c.html#a6323235e83f399d119f1deb54fa2f144" title="ubifs_get_free_space\l_nolock" alt="" coords="607,594,753,636"/>
<area shape="rect" id="node24" href="key_8h.html#a0eb1cf0ecc00556383b326058c65f846" title="ino_key_init_flash" alt="" coords="412,112,539,139"/>
<area shape="rect" id="node25" href="ubifs_2journal_8c.html#aac219494a71f5ce5fa3f2c70f53660ef" title="zero_ino_node_unused" alt="" coords="398,163,553,190"/>
<area shape="rect" id="node26" href="ubifs_2io_8c.html#a9d5677a6fb9ba9810931ab381e9ca3e3" title="ubifs_prep_grp_node" alt="" coords="404,214,547,240"/>
<area shape="rect" id="node28" href="ubifs_2io_8c.html#a6ee6b209c593633d86570858d6e5ff51" title="ubifs_wbuf_write_nolock" alt="" coords="803,36,968,63"/>
<area shape="rect" id="node32" href="key_8h.html#a837f3539f12eddd0ac7ef6595da85d13" title="lowest_xent_key" alt="" coords="415,1218,535,1244"/>
<area shape="rect" id="node33" href="tnc_8c.html#aab11d1b085510e4c3a49e8ea79e84b14" title="ubifs_tnc_next_ent" alt="" coords="409,1268,541,1295"/>
<area shape="rect" id="node34" href="ubifs_8h.html#aeff1ab85b59329875a7084014802262c" title="ubifs_evict_xattr_inode" alt="" coords="397,1319,553,1346"/>
<area shape="rect" id="node35" href="tnc_8c.html#a45f37bcb32fdd0e4c25fca00b7a66198" title="ubifs_tnc_remove_nm" alt="" coords="400,1116,551,1143"/>
<area shape="rect" id="node38" href="key_8h.html#a6ac363a71458b8fc9f6983ac3ce0c5c3" title="lowest_ino_key" alt="" coords="419,1370,531,1396"/>
<area shape="rect" id="node39" href="key_8h.html#a9d33aa154841c271b5a27f1c03d9f37d" title="highest_ino_key" alt="" coords="417,1420,533,1447"/>
<area shape="rect" id="node40" href="tnc_8c.html#aba3e5b7438f8f8463357069869364077" title="ubifs_tnc_remove_range" alt="" coords="393,1015,557,1042"/>
<area shape="rect" id="node44" href="key_8h.html#a5611c13d648e672825da064c90c8903a" title="key_read" alt="" coords="438,1167,513,1194"/>
<area shape="rect" id="node36" href="tnc_8c.html#af871df87e75b12ea907320baac2614d5" title="lookup_level0_dirty" alt="" coords="613,1218,747,1244"/>
<area shape="rect" id="node37" href="ubifs_2debug_8c.html#a8e749de733b483ca979984b8aa078aa6" title="dbg_check_tnc" alt="" coords="625,1116,735,1143"/>
<area shape="rect" id="node41" href="tnc_8c.html#a48dcf7fc1db2312050ac0378020c802b" title="lnc_free" alt="" coords="646,1015,714,1042"/>
<area shape="rect" id="node43" href="lprops_8c.html#ae3f8fc7da604fc1fbfa182c024679d42" title="ubifs_update_one_lp" alt="" coords="815,964,956,991"/>
<area shape="rect" id="node48" href="key_8h.html#abbcaebc958b96ba6c1a981b93be96899" title="key_copy" alt="" coords="641,1066,719,1092"/>
<area shape="rect" id="node49" href="tnc_8c.html#a87449d9ca6fdc3ca6e74cc409e7a1506" title="tnc_insert" alt="" coords="641,1167,719,1194"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_a8c1bde924b99b7852408656e18230d99_icgraph.png" border="0" usemap="#ubifs_2journal_8c_a8c1bde924b99b7852408656e18230d99_icgraph" alt=""/></div>
<map name="ubifs_2journal_8c_a8c1bde924b99b7852408656e18230d99_icgraph" id="ubifs_2journal_8c_a8c1bde924b99b7852408656e18230d99_icgraph">
<area shape="rect" id="node2" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="210,5,333,32"/>
<area shape="rect" id="node3" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="196,56,347,83"/>
<area shape="rect" id="node4" href="ubifs_2super_8c.html#a063c51fb658c01f325e4a0744d2f28ce" title="ubifs_evict_inode" alt="" coords="395,56,517,83"/>
</map>
</div>

</div>
</div>
<a id="a295cfad6549230751ca3d670fd12fc12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a295cfad6549230751ca3d670fd12fc12">&#9670;&nbsp;</a></span>ubifs_jnl_xrename()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ubifs_jnl_xrename </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>fst_dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>fst_inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct fscrypt_name *&#160;</td>
          <td class="paramname"><em>fst_nm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>snd_dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>snd_inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct fscrypt_name *&#160;</td>
          <td class="paramname"><em>snd_nm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sync</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_jnl_xrename - cross rename two directory entries. <code></code>: UBIFS file-system description object : parent inode of 1st directory entry to exchange : 1st inode to exchange : name of 1st inode to exchange : parent inode of 2nd directory entry to exchange : 2nd inode to exchange : name of 2nd inode to exchange : non-zero if the write-buffer has to be synchronized</p>
<p>This function implements the cross rename operation which may involve writing 2 inodes and 2 directory entries. It marks the written inodes as clean and returns zero on success. In case of failure, a negative error code is returned. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_a295cfad6549230751ca3d670fd12fc12_cgraph.png" border="0" usemap="#ubifs_2journal_8c_a295cfad6549230751ca3d670fd12fc12_cgraph" alt=""/></div>
<map name="ubifs_2journal_8c_a295cfad6549230751ca3d670fd12fc12_cgraph" id="ubifs_2journal_8c_a295cfad6549230751ca3d670fd12fc12_cgraph">
<area shape="rect" id="node2" href="misc_8h.html#a1d3fdeae8e4ff85d7b3581a96bb4ef49" title="ubifs_inode" alt="" coords="424,5,512,32"/>
<area shape="rect" id="node3" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="199,740,324,767"/>
<area shape="rect" id="node10" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="836,208,943,235"/>
<area shape="rect" id="node19" href="key_8h.html#a4c61e89b4c6084d47cabe5df52f288e4" title="dent_key_init_flash" alt="" coords="194,1247,329,1273"/>
<area shape="rect" id="node21" href="ubifs_2journal_8c.html#a1d4a541700f9d4bf038cadbf4e097454" title="get_dent_type" alt="" coords="209,1348,313,1375"/>
<area shape="rect" id="node22" href="ubifs_2journal_8c.html#a9a7b991169dcd5003fd4ccd4dbe0a199" title="set_dent_cookie" alt="" coords="203,1399,320,1425"/>
<area shape="rect" id="node23" href="ubifs_2journal_8c.html#ae4ece295a2679c7b5d2b9ddf9b553dd4" title="zero_dent_node_unused" alt="" coords="180,1449,343,1476"/>
<area shape="rect" id="node24" href="ubifs_2io_8c.html#a9d5677a6fb9ba9810931ab381e9ca3e3" title="ubifs_prep_grp_node" alt="" coords="397,208,539,235"/>
<area shape="rect" id="node26" href="ubifs_2journal_8c.html#af33a1a0e7af2c23d625797b7d30a09fe" title="pack_inode" alt="" coords="217,107,305,133"/>
<area shape="rect" id="node29" href="ubifs_2journal_8c.html#a6b58fdc3cf3fe2765984565c1b77d21e" title="write_head" alt="" coords="425,917,511,944"/>
<area shape="rect" id="node31" href="ubifs_2io_8c.html#a44bb751e441c7a2479b5251b1423d16a" title="ubifs_wbuf_add_ino\l_nolock" alt="" coords="193,1501,330,1542"/>
<area shape="rect" id="node32" href="ubifs_2journal_8c.html#a9bb32d44ef1e02992210b7412754de3c" title="release_head" alt="" coords="212,1567,311,1593"/>
<area shape="rect" id="node33" href="key_8h.html#a790e865fe08d05015cea5a1651759af3" title="dent_key_init" alt="" coords="212,1297,311,1324"/>
<area shape="rect" id="node34" href="tnc_8c.html#a76f4b8ea4414cb096acbac0c4ae433c9" title="ubifs_tnc_add_nm" alt="" coords="197,1196,325,1223"/>
<area shape="rect" id="node46" href="key_8h.html#a60df8426bc46e1074661d077542ea933" title="ino_key_init" alt="" coords="216,1617,307,1644"/>
<area shape="rect" id="node47" href="tnc_8c.html#a0f9bccdd201d5b2525ba901e00ece03f" title="ubifs_tnc_add" alt="" coords="210,1120,313,1147"/>
<area shape="rect" id="node48" href="ubifs_2journal_8c.html#abb1bef600a6aa118b19e228194c5be1d" title="finish_reservation" alt="" coords="199,1668,323,1695"/>
<area shape="rect" id="node49" href="ubifs_2journal_8c.html#aed47b114c8f20052b62f78e27cbada07" title="mark_inode_clean" alt="" coords="198,1719,325,1745"/>
<area shape="rect" id="node4" href="ubifs_2journal_8c.html#a920088cf70f88cbb1142294e99e688d6" title="reserve_space" alt="" coords="415,487,521,513"/>
<area shape="rect" id="node11" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="1029,208,1114,235"/>
<area shape="rect" id="node14" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="853,828,925,855"/>
<area shape="rect" id="node15" href="ubifs_2commit_8c.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="405,664,531,691"/>
<area shape="rect" id="node16" href="ubifs_2debug_8c.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="827,715,951,741"/>
<area shape="rect" id="node17" href="ubifs_2debug_8c.html#a2fa0aeaaa556f0b13d098456ef7d86d4" title="ubifs_dump_lprops" alt="" coords="611,816,741,843"/>
<area shape="rect" id="node18" href="ubifs_2debug_8h.html#a69534405790cc12f492343243bc539a4" title="dbg_check_lprops" alt="" coords="613,867,739,893"/>
<area shape="rect" id="node5" href="find_8c.html#a1f03e32ffa32d28279f1eaf0f81c4a5f" title="ubifs_find_free_space" alt="" coords="601,360,751,387"/>
<area shape="rect" id="node6" href="ubifs_2debug_8c.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="1031,689,1112,716"/>
<area shape="rect" id="node7" href="ubifs_2gc_8c.html#a6aba86bcae816613915e10318fdf6b83" title="ubifs_garbage_collect" alt="" coords="602,411,750,437"/>
<area shape="rect" id="node8" href="misc_8h.html#a61ad06675d59063a2171172f8ba94c79" title="ubifs_return_leb" alt="" coords="832,392,947,419"/>
<area shape="rect" id="node9" href="ubifs_2io_8c.html#a3e6d29ad192528c05f246cd31a1732fb" title="ubifs_wbuf_sync_nolock" alt="" coords="807,588,972,615"/>
<area shape="rect" id="node12" href="ubifs_2log_8c.html#a8b30a0dc99186d8f07ee2f47693f11b7" title="ubifs_add_bud_to_log" alt="" coords="602,512,750,539"/>
<area shape="rect" id="node13" href="ubifs_2io_8c.html#a4bf09b0b677c1ca6d0b034d91281d2f3" title="ubifs_wbuf_seek_nolock" alt="" coords="807,480,972,507"/>
<area shape="rect" id="node20" href="block__dev_8c.html#a79868b6f75989a03b1ad72c771d39cc1" title="hash" alt="" coords="443,1627,493,1653"/>
<area shape="rect" id="node25" href="ubifs_2io_8c.html#a0b3f089c430db97bbc68e362dc7867c8" title="next_sqnum" alt="" coords="629,208,723,235"/>
<area shape="rect" id="node27" href="key_8h.html#a0eb1cf0ecc00556383b326058c65f846" title="ino_key_init_flash" alt="" coords="405,56,531,83"/>
<area shape="rect" id="node28" href="ubifs_2journal_8c.html#aac219494a71f5ce5fa3f2c70f53660ef" title="zero_ino_node_unused" alt="" coords="391,107,545,133"/>
<area shape="rect" id="node30" href="ubifs_2io_8c.html#a6ee6b209c593633d86570858d6e5ff51" title="ubifs_wbuf_write_nolock" alt="" coords="593,917,759,944"/>
<area shape="rect" id="node35" href="tnc_8c.html#af871df87e75b12ea907320baac2614d5" title="lookup_level0_dirty" alt="" coords="609,1373,743,1400"/>
<area shape="rect" id="node36" href="misc_8h.html#abe5c86108a05199a899138767ca1f42a" title="ubifs_zn_dirty" alt="" coords="1020,1373,1123,1400"/>
<area shape="rect" id="node37" href="tnc_8c.html#a609646516a8a0f3fd9f2b2a1a1849737" title="dirty_cow_bottom_up" alt="" coords="816,1424,963,1451"/>
<area shape="rect" id="node38" href="tnc_8c.html#ae4be79a5c50df84c2528fff0e619b5ca" title="fallible_resolve_collision" alt="" coords="595,1576,757,1603"/>
<area shape="rect" id="node39" href="tnc_8c.html#aacbd9954b161bf32cc3317abd3080f83" title="resolve_collision" alt="" coords="617,1627,735,1653"/>
<area shape="rect" id="node40" href="tnc_8c.html#a48dcf7fc1db2312050ac0378020c802b" title="lnc_free" alt="" coords="434,1171,502,1197"/>
<area shape="rect" id="node41" href="misc_8h.html#ae4183603acbd9f727ecf1fae7617085b" title="ubifs_add_dirt" alt="" coords="417,1221,519,1248"/>
<area shape="rect" id="node42" href="key_8h.html#abbcaebc958b96ba6c1a981b93be96899" title="key_copy" alt="" coords="429,1069,507,1096"/>
<area shape="rect" id="node43" href="tnc_8c.html#a87449d9ca6fdc3ca6e74cc409e7a1506" title="tnc_insert" alt="" coords="429,1120,507,1147"/>
<area shape="rect" id="node44" href="ubifs_2debug_8c.html#a8e749de733b483ca979984b8aa078aa6" title="dbg_check_tnc" alt="" coords="621,1272,731,1299"/>
<area shape="rect" id="node45" href="tnc_8c.html#a45f37bcb32fdd0e4c25fca00b7a66198" title="ubifs_tnc_remove_nm" alt="" coords="393,1475,543,1501"/>
<area shape="rect" id="node50" href="budget_8c.html#a42a33c943c4f8862342d84cc1b152182" title="ubifs_release_dirty\l_inode_budget" alt="" coords="403,1711,533,1753"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_a295cfad6549230751ca3d670fd12fc12_icgraph.png" border="0" usemap="#ubifs_2journal_8c_a295cfad6549230751ca3d670fd12fc12_icgraph" alt=""/></div>
<map name="ubifs_2journal_8c_a295cfad6549230751ca3d670fd12fc12_icgraph" id="ubifs_2journal_8c_a295cfad6549230751ca3d670fd12fc12_icgraph">
<area shape="rect" id="node2" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="180,5,287,32"/>
<area shape="rect" id="node3" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="335,5,435,32"/>
</map>
</div>

</div>
</div>
<a id="a6b58fdc3cf3fe2765984565c1b77d21e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b58fdc3cf3fe2765984565c1b77d21e">&#9670;&nbsp;</a></span>write_head()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int write_head </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>jhead</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>lnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>offs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sync</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>write_head - write data to a journal head. <code></code>: UBIFS file-system description object : journal head : buffer to write : length to write : LEB number written is returned here : offset written is returned here : non-zero if the write-buffer has to by synchronized</p>
<p>This function is the same as '<a class="el" href="ubifs_2journal_8c.html#a7285ba71f1d541318b61943bcc8e756f">write_node()</a>' but it does not assume the buffer it is writing is a node, so it does not prepare it (which means initializing common header and calculating CRC). </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_a6b58fdc3cf3fe2765984565c1b77d21e_cgraph.png" border="0" usemap="#ubifs_2journal_8c_a6b58fdc3cf3fe2765984565c1b77d21e_cgraph" alt=""/></div>
<map name="ubifs_2journal_8c_a6b58fdc3cf3fe2765984565c1b77d21e_cgraph" id="ubifs_2journal_8c_a6b58fdc3cf3fe2765984565c1b77d21e_cgraph">
<area shape="rect" id="node2" href="ubifs_2debug_8c.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="1233,701,1315,728"/>
<area shape="rect" id="node3" href="ubifs_2io_8c.html#a6ee6b209c593633d86570858d6e5ff51" title="ubifs_wbuf_write_nolock" alt="" coords="139,549,304,576"/>
<area shape="rect" id="node49" href="ubifs_2io_8c.html#a3e6d29ad192528c05f246cd31a1732fb" title="ubifs_wbuf_sync_nolock" alt="" coords="139,853,304,880"/>
<area shape="rect" id="node4" href="ubifs_2debug_8c.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="1391,245,1474,272"/>
<area shape="rect" id="node5" href="ubifs_2io_8c.html#aeef91391de4e0f46023ab0afac3a2335" title="cancel_wbuf_timer_nolock" alt="" coords="352,853,528,880"/>
<area shape="rect" id="node6" href="ubifs_2io_8c.html#a02909cfc9d3a0100f549390c7d464632" title="ubifs_leb_write" alt="" coords="385,803,495,829"/>
<area shape="rect" id="node37" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1049,296,1121,323"/>
<area shape="rect" id="node39" href="ubifs_2io_8c.html#a72790ff2f14d3cf772fc8e842ac0bff8" title="new_wbuf_timer_nolock" alt="" coords="576,119,739,145"/>
<area shape="rect" id="node40" href="ubifs_2debug_8c.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="1023,752,1147,779"/>
<area shape="rect" id="node41" href="ubifs_2debug_8c.html#afa1952f7d3c2c791a330e3dc245c5a83" title="ubifs_dump_leb" alt="" coords="383,397,497,424"/>
<area shape="rect" id="node7" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="1026,803,1145,829"/>
<area shape="rect" id="node8" href="ubifs_2debug_8c.html#af929a6951e19c79f1235738386005c06" title="dbg_leb_write" alt="" coords="606,904,709,931"/>
<area shape="rect" id="node38" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="604,980,711,1007"/>
<area shape="rect" id="node9" href="ubifs_2debug_8h.html#ab599356d6c84ddd2c7b9001b452c30bd" title="dbg_is_power_cut" alt="" coords="809,1157,935,1184"/>
<area shape="rect" id="node34" href="ubifs_2debug_8c.html#a67b6fc23cfbf882431d33323a03ef74c" title="power_cut_emulated" alt="" coords="801,853,943,880"/>
<area shape="rect" id="node35" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="1043,853,1128,880"/>
<area shape="rect" id="node36" href="ubifs_2debug_8c.html#a90853c3e5be760b8c7d76c2d39fdb28c" title="corrupt_data" alt="" coords="825,904,919,931"/>
<area shape="rect" id="node10" href="ubifs_2debug_8h.html#aed9c32fd77ce70a2d917ab58c56189c2" title="ubifs_debugging_init" alt="" coords="1015,1056,1155,1083"/>
<area shape="rect" id="node11" href="ubifs_2debug_8h.html#a1e62d7c391f555902a25f8060eb6f1ec" title="ubifs_debugging_exit" alt="" coords="1013,1107,1157,1133"/>
<area shape="rect" id="node12" href="ubifs_2debug_8h.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="1044,1157,1127,1184"/>
<area shape="rect" id="node13" href="ubifs_2debug_8h.html#a615a670f26d4407b52175ce5f3faf594" title="dbg_cstate" alt="" coords="1042,1208,1129,1235"/>
<area shape="rect" id="node14" href="ubifs_2debug_8h.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="1045,1259,1126,1285"/>
<area shape="rect" id="node15" href="ubifs_2debug_8h.html#a4184d82b0b2ff0fffc6ab3d4de4a1e7a" title="dbg_get_key_dump" alt="" coords="1018,1309,1153,1336"/>
<area shape="rect" id="node16" href="ubifs_2debug_8h.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="1213,1512,1335,1539"/>
<area shape="rect" id="node22" href="ubifs_2debug_8h.html#a6ecc9bff59f14d28615ed14fa5323681" title="ubifs_dump_inode" alt="" coords="1022,1411,1149,1437"/>
<area shape="rect" id="node24" href="ubifs_2debug_8h.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="1023,1461,1147,1488"/>
<area shape="rect" id="node31" href="ubifs_2debug_8h.html#acfcbe45894b3b41385c1f9891d57bb97" title="ubifs_dump_budget_req" alt="" coords="1005,955,1165,981"/>
<area shape="rect" id="node32" href="ubifs_2debug_8h.html#ab351e7abb59edb97d57bd44dd83b0484" title="ubifs_dump_lstats" alt="" coords="1021,1005,1149,1032"/>
<area shape="rect" id="node33" href="ubifs_2debug_8h.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="1023,904,1147,931"/>
<area shape="rect" id="node17" href="key_8h.html#a06f47822510ef850cb7065778115453c" title="key_type" alt="" coords="1395,1563,1470,1589"/>
<area shape="rect" id="node18" href="key_8h.html#a4a12b97ed78e138baf7886a6df7ed50f" title="key_inum" alt="" coords="1393,1360,1472,1387"/>
<area shape="rect" id="node19" href="ubifs_2debug_8c.html#ad6af0af711fdb082f6df4eaeb4d82fe6" title="get_key_type" alt="" coords="1383,1411,1483,1437"/>
<area shape="rect" id="node20" href="key_8h.html#acddf1ca88d72a37e06c5c608cd084656" title="key_hash" alt="" coords="1393,1461,1472,1488"/>
<area shape="rect" id="node21" href="key_8h.html#a10c13375b52dbb12be6f9b685d1d1ba7" title="key_block" alt="" coords="1392,1512,1473,1539"/>
<area shape="rect" id="node23" href="key_8h.html#a5611c13d648e672825da064c90c8903a" title="key_read" alt="" coords="1237,752,1311,779"/>
<area shape="rect" id="node25" href="ubifs_2debug_8c.html#a40190f9f60ac94040c30dbd97c73a3ca" title="dump_ch" alt="" coords="1237,853,1311,880"/>
<area shape="rect" id="node27" href="ubifs_2debug_8c.html#a4b30ad73e46b72b5043aa4efa7fb8d9a" title="get_key_hash" alt="" coords="1223,1132,1325,1159"/>
<area shape="rect" id="node28" href="ubifs_2debug_8c.html#af1196269cd9c24affacc60e33f960f49" title="get_key_fmt" alt="" coords="1227,1461,1321,1488"/>
<area shape="rect" id="node29" href="ubifs_2debug_8c.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="1213,1411,1335,1437"/>
<area shape="rect" id="node30" href="misc_8h.html#a1598cadb907a20f9e5dc3e7ee74edb1d" title="ubifs_idx_branch" alt="" coords="1214,803,1334,829"/>
<area shape="rect" id="node26" href="ubifs_2debug_8c.html#a0137ecd738390d71f938f27be78c4477" title="dbg_gtype" alt="" coords="1391,853,1474,880"/>
<area shape="rect" id="node42" href="ubifs_2scan_8c.html#a1689915d09ec86f76b30ee598b10f34e" title="ubifs_scan" alt="" coords="615,271,700,297"/>
<area shape="rect" id="node48" href="ubifs_2scan_8c.html#a7e559a0c70f1f17d0886f600cd59a639" title="ubifs_scan_destroy" alt="" coords="805,397,939,424"/>
<area shape="rect" id="node43" href="ubifs_2scan_8c.html#ac9e61563282a3ab80fa1947e24f1726e" title="ubifs_start_scan" alt="" coords="813,93,931,120"/>
<area shape="rect" id="node44" href="ubifs_2scan_8c.html#ab974ec909e594f54f7773880688a2334" title="ubifs_scan_a_node" alt="" coords="805,245,939,272"/>
<area shape="rect" id="node45" href="ubifs_2scan_8c.html#a582c1d1b35a0fe0cd1d73f2f88adaa67" title="ubifs_add_snod" alt="" coords="815,347,929,373"/>
<area shape="rect" id="node46" href="ubifs_2scan_8c.html#a7a20ae4d7200218e4b1b4ce3cd803b21" title="ubifs_end_scan" alt="" coords="815,195,929,221"/>
<area shape="rect" id="node47" href="ubifs_2scan_8c.html#a18197e05567059efbb981ebe037255bb" title="ubifs_scanned_corruption" alt="" coords="787,144,957,171"/>
<area shape="rect" id="node50" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="401,1411,479,1437"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_a6b58fdc3cf3fe2765984565c1b77d21e_icgraph.png" border="0" usemap="#ubifs_2journal_8c_a6b58fdc3cf3fe2765984565c1b77d21e_icgraph" alt=""/></div>
<map name="ubifs_2journal_8c_a6b58fdc3cf3fe2765984565c1b77d21e_icgraph" id="ubifs_2journal_8c_a6b58fdc3cf3fe2765984565c1b77d21e_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="157,335,273,361"/>
<area shape="rect" id="node19" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="143,664,286,691"/>
<area shape="rect" id="node23" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="151,613,278,640"/>
<area shape="rect" id="node25" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="155,563,275,589"/>
<area shape="rect" id="node26" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="153,740,277,767"/>
<area shape="rect" id="node29" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="142,63,287,89"/>
<area shape="rect" id="node31" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="139,171,291,197"/>
<area shape="rect" id="node3" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="369,107,459,133"/>
<area shape="rect" id="node8" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="367,512,461,539"/>
<area shape="rect" id="node9" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="373,411,455,437"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="375,157,453,184"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="369,208,459,235"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="371,259,457,285"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="369,309,459,336"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="366,360,462,387"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="363,461,465,488"/>
<area shape="rect" id="node4" href="ubifs_2xattr_8c.html#a2c0f8e28d408b8e89b4ce7d6047af912" title="ubifs_xattr_set" alt="" coords="545,56,653,83"/>
<area shape="rect" id="node5" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="722,5,855,32"/>
<area shape="rect" id="node6" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="917,56,991,83"/>
<area shape="rect" id="node7" href="ubifs_2crypto_8c.html#a4984848c1f6ebc630f98d30a9bbf2ed3" title="ubifs_crypt_set_context" alt="" coords="708,56,869,83"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="551,411,647,437"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="555,563,642,589"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="739,588,839,615"/>
<area shape="rect" id="node20" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="353,664,475,691"/>
<area shape="rect" id="node21" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="339,715,489,741"/>
<area shape="rect" id="node22" href="ubifs_2super_8c.html#a063c51fb658c01f325e4a0744d2f28ce" title="ubifs_evict_inode" alt="" coords="537,715,660,741"/>
<area shape="rect" id="node24" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="545,613,652,640"/>
<area shape="rect" id="node27" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="364,765,464,792"/>
<area shape="rect" id="node28" href="ubifs_8h.html#aaebf1c80e366c0f2702f58b91d7a9d38" title="ubifs_setattr" alt="" coords="551,765,646,792"/>
<area shape="rect" id="node30" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="549,5,648,32"/>
<area shape="rect" id="node32" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="365,56,463,83"/>
</map>
</div>

</div>
</div>
<a id="a7285ba71f1d541318b61943bcc8e756f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7285ba71f1d541318b61943bcc8e756f">&#9670;&nbsp;</a></span>write_node()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int write_node </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>jhead</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>lnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>offs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>write_node - write node to a journal head. <code></code>: UBIFS file-system description object : journal head : node to write : node length : LEB number written is returned here : offset written is returned here</p>
<p>This function writes a node to reserved space of journal head . Returns zero in case of success and a negative error code in case of failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_a7285ba71f1d541318b61943bcc8e756f_cgraph.png" border="0" usemap="#ubifs_2journal_8c_a7285ba71f1d541318b61943bcc8e756f_cgraph" alt=""/></div>
<map name="ubifs_2journal_8c_a7285ba71f1d541318b61943bcc8e756f_cgraph" id="ubifs_2journal_8c_a7285ba71f1d541318b61943bcc8e756f_cgraph">
<area shape="rect" id="node2" href="ubifs_2debug_8c.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="587,499,668,525"/>
<area shape="rect" id="node3" href="ubifs_2io_8c.html#acfc2ca3ffa8d094855c2e59551f3a767" title="ubifs_prepare_node" alt="" coords="373,157,507,184"/>
<area shape="rect" id="node9" href="ubifs_2io_8c.html#a6ee6b209c593633d86570858d6e5ff51" title="ubifs_wbuf_write_nolock" alt="" coords="139,549,304,576"/>
<area shape="rect" id="node4" href="ubifs_2io_8c.html#a0b3f089c430db97bbc68e362dc7867c8" title="next_sqnum" alt="" coords="581,157,674,184"/>
<area shape="rect" id="node8" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="588,5,667,32"/>
<area shape="rect" id="node5" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="989,816,1061,843"/>
<area shape="rect" id="node6" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="759,157,865,184"/>
<area shape="rect" id="node7" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="983,107,1068,133"/>
<area shape="rect" id="node10" href="ubifs_2debug_8c.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="1331,917,1414,944"/>
<area shape="rect" id="node11" href="ubifs_2io_8c.html#aeef91391de4e0f46023ab0afac3a2335" title="cancel_wbuf_timer_nolock" alt="" coords="352,549,528,576"/>
<area shape="rect" id="node12" href="ubifs_2io_8c.html#a02909cfc9d3a0100f549390c7d464632" title="ubifs_leb_write" alt="" coords="385,296,495,323"/>
<area shape="rect" id="node41" href="ubifs_2io_8c.html#a72790ff2f14d3cf772fc8e842ac0bff8" title="new_wbuf_timer_nolock" alt="" coords="359,499,521,525"/>
<area shape="rect" id="node42" href="ubifs_2debug_8c.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="963,765,1087,792"/>
<area shape="rect" id="node43" href="ubifs_2debug_8c.html#afa1952f7d3c2c791a330e3dc245c5a83" title="ubifs_dump_leb" alt="" coords="383,803,497,829"/>
<area shape="rect" id="node13" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="966,56,1085,83"/>
<area shape="rect" id="node14" href="ubifs_2debug_8c.html#af929a6951e19c79f1235738386005c06" title="dbg_leb_write" alt="" coords="576,296,679,323"/>
<area shape="rect" id="node15" href="ubifs_2debug_8h.html#ab599356d6c84ddd2c7b9001b452c30bd" title="dbg_is_power_cut" alt="" coords="749,372,875,399"/>
<area shape="rect" id="node39" href="ubifs_2debug_8c.html#a67b6fc23cfbf882431d33323a03ef74c" title="power_cut_emulated" alt="" coords="741,208,883,235"/>
<area shape="rect" id="node40" href="ubifs_2debug_8c.html#a90853c3e5be760b8c7d76c2d39fdb28c" title="corrupt_data" alt="" coords="765,259,859,285"/>
<area shape="rect" id="node16" href="ubifs_2debug_8h.html#aed9c32fd77ce70a2d917ab58c56189c2" title="ubifs_debugging_init" alt="" coords="955,360,1095,387"/>
<area shape="rect" id="node17" href="ubifs_2debug_8h.html#a1e62d7c391f555902a25f8060eb6f1ec" title="ubifs_debugging_exit" alt="" coords="953,411,1097,437"/>
<area shape="rect" id="node18" href="ubifs_2debug_8h.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="984,461,1067,488"/>
<area shape="rect" id="node19" href="ubifs_2debug_8h.html#a615a670f26d4407b52175ce5f3faf594" title="dbg_cstate" alt="" coords="982,512,1069,539"/>
<area shape="rect" id="node20" href="ubifs_2debug_8h.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="985,563,1066,589"/>
<area shape="rect" id="node21" href="ubifs_2debug_8h.html#a4184d82b0b2ff0fffc6ab3d4de4a1e7a" title="dbg_get_key_dump" alt="" coords="958,613,1093,640"/>
<area shape="rect" id="node22" href="ubifs_2debug_8h.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="1153,563,1275,589"/>
<area shape="rect" id="node28" href="ubifs_2debug_8h.html#a6ecc9bff59f14d28615ed14fa5323681" title="ubifs_dump_inode" alt="" coords="962,208,1089,235"/>
<area shape="rect" id="node30" href="ubifs_2debug_8h.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="963,715,1087,741"/>
<area shape="rect" id="node37" href="ubifs_2debug_8h.html#acfcbe45894b3b41385c1f9891d57bb97" title="ubifs_dump_budget_req" alt="" coords="945,309,1105,336"/>
<area shape="rect" id="node38" href="ubifs_2debug_8h.html#ab351e7abb59edb97d57bd44dd83b0484" title="ubifs_dump_lstats" alt="" coords="961,259,1089,285"/>
<area shape="rect" id="node23" href="key_8h.html#a06f47822510ef850cb7065778115453c" title="key_type" alt="" coords="1335,715,1410,741"/>
<area shape="rect" id="node24" href="key_8h.html#a4a12b97ed78e138baf7886a6df7ed50f" title="key_inum" alt="" coords="1333,512,1412,539"/>
<area shape="rect" id="node25" href="ubifs_2debug_8c.html#ad6af0af711fdb082f6df4eaeb4d82fe6" title="get_key_type" alt="" coords="1323,563,1423,589"/>
<area shape="rect" id="node26" href="key_8h.html#acddf1ca88d72a37e06c5c608cd084656" title="key_hash" alt="" coords="1333,613,1412,640"/>
<area shape="rect" id="node27" href="key_8h.html#a10c13375b52dbb12be6f9b685d1d1ba7" title="key_block" alt="" coords="1332,664,1413,691"/>
<area shape="rect" id="node29" href="key_8h.html#a5611c13d648e672825da064c90c8903a" title="key_read" alt="" coords="1177,613,1251,640"/>
<area shape="rect" id="node31" href="ubifs_2debug_8c.html#a40190f9f60ac94040c30dbd97c73a3ca" title="dump_ch" alt="" coords="1177,715,1251,741"/>
<area shape="rect" id="node33" href="ubifs_2debug_8c.html#a4b30ad73e46b72b5043aa4efa7fb8d9a" title="get_key_hash" alt="" coords="1163,765,1265,792"/>
<area shape="rect" id="node34" href="ubifs_2debug_8c.html#af1196269cd9c24affacc60e33f960f49" title="get_key_fmt" alt="" coords="1167,816,1261,843"/>
<area shape="rect" id="node35" href="ubifs_2debug_8c.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="1153,664,1275,691"/>
<area shape="rect" id="node36" href="misc_8h.html#a1598cadb907a20f9e5dc3e7ee74edb1d" title="ubifs_idx_branch" alt="" coords="1154,867,1274,893"/>
<area shape="rect" id="node32" href="ubifs_2debug_8c.html#a0137ecd738390d71f938f27be78c4477" title="dbg_gtype" alt="" coords="1331,765,1414,792"/>
<area shape="rect" id="node44" href="ubifs_2scan_8c.html#a1689915d09ec86f76b30ee598b10f34e" title="ubifs_scan" alt="" coords="585,803,670,829"/>
<area shape="rect" id="node50" href="ubifs_2scan_8c.html#a7e559a0c70f1f17d0886f600cd59a639" title="ubifs_scan_destroy" alt="" coords="745,955,879,981"/>
<area shape="rect" id="node45" href="ubifs_2scan_8c.html#ac9e61563282a3ab80fa1947e24f1726e" title="ubifs_start_scan" alt="" coords="753,752,871,779"/>
<area shape="rect" id="node46" href="ubifs_2scan_8c.html#ab974ec909e594f54f7773880688a2334" title="ubifs_scan_a_node" alt="" coords="745,904,879,931"/>
<area shape="rect" id="node47" href="ubifs_2scan_8c.html#a582c1d1b35a0fe0cd1d73f2f88adaa67" title="ubifs_add_snod" alt="" coords="755,600,869,627"/>
<area shape="rect" id="node48" href="ubifs_2scan_8c.html#a7a20ae4d7200218e4b1b4ce3cd803b21" title="ubifs_end_scan" alt="" coords="755,853,869,880"/>
<area shape="rect" id="node49" href="ubifs_2scan_8c.html#a18197e05567059efbb981ebe037255bb" title="ubifs_scanned_corruption" alt="" coords="727,803,897,829"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_a7285ba71f1d541318b61943bcc8e756f_icgraph.png" border="0" usemap="#ubifs_2journal_8c_a7285ba71f1d541318b61943bcc8e756f_icgraph" alt=""/></div>
<map name="ubifs_2journal_8c_a7285ba71f1d541318b61943bcc8e756f_icgraph" id="ubifs_2journal_8c_a7285ba71f1d541318b61943bcc8e756f_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="139,31,276,57"/>
<area shape="rect" id="node3" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="324,31,423,57"/>
<area shape="rect" id="node4" href="ubifs_2file_8c.html#a2ad22c013a0dccfd9f49e114ed89dfa6" title="ubifs_writepage" alt="" coords="471,5,584,32"/>
<area shape="rect" id="node5" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="477,56,577,83"/>
<area shape="rect" id="node6" href="ubifs_8h.html#aaebf1c80e366c0f2702f58b91d7a9d38" title="ubifs_setattr" alt="" coords="632,56,727,83"/>
</map>
</div>

</div>
</div>
<a id="ae4ece295a2679c7b5d2b9ddf9b553dd4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4ece295a2679c7b5d2b9ddf9b553dd4">&#9670;&nbsp;</a></span>zero_dent_node_unused()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void zero_dent_node_unused </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__dent__node.html">ubifs_dent_node</a> *&#160;</td>
          <td class="paramname"><em>dent</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>zero_dent_node_unused - zero out unused fields of an on-flash directory entry node. : the directory entry to zero out </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_ae4ece295a2679c7b5d2b9ddf9b553dd4_icgraph.png" border="0" usemap="#ubifs_2journal_8c_ae4ece295a2679c7b5d2b9ddf9b553dd4_icgraph" alt=""/></div>
<map name="ubifs_2journal_8c_ae4ece295a2679c7b5d2b9ddf9b553dd4_icgraph" id="ubifs_2journal_8c_ae4ece295a2679c7b5d2b9ddf9b553dd4_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="231,335,347,361"/>
<area shape="rect" id="node19" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="225,5,352,32"/>
<area shape="rect" id="node21" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="229,56,349,83"/>
<area shape="rect" id="node22" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="216,107,361,133"/>
<area shape="rect" id="node3" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="415,563,506,589"/>
<area shape="rect" id="node8" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="414,157,507,184"/>
<area shape="rect" id="node9" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="419,208,502,235"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="422,309,499,336"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="415,360,506,387"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="417,411,504,437"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="416,461,505,488"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="413,512,509,539"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="409,259,512,285"/>
<area shape="rect" id="node4" href="ubifs_2xattr_8c.html#a2c0f8e28d408b8e89b4ce7d6047af912" title="ubifs_xattr_set" alt="" coords="560,411,668,437"/>
<area shape="rect" id="node5" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="730,335,863,361"/>
<area shape="rect" id="node6" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="925,360,999,387"/>
<area shape="rect" id="node7" href="ubifs_2crypto_8c.html#a4984848c1f6ebc630f98d30a9bbf2ed3" title="ubifs_crypt_set_context" alt="" coords="716,436,877,463"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="566,208,662,235"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="571,56,657,83"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="747,31,847,57"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="561,5,667,32"/>
<area shape="rect" id="node23" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="565,132,663,159"/>
</map>
</div>

</div>
</div>
<a id="aac219494a71f5ce5fa3f2c70f53660ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac219494a71f5ce5fa3f2c70f53660ef">&#9670;&nbsp;</a></span>zero_ino_node_unused()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void zero_ino_node_unused </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__ino__node.html">ubifs_ino_node</a> *&#160;</td>
          <td class="paramname"><em>ino</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>zero_ino_node_unused - zero out unused fields of an on-flash inode node. : the inode to zero out </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_aac219494a71f5ce5fa3f2c70f53660ef_icgraph.png" border="0" usemap="#ubifs_2journal_8c_aac219494a71f5ce5fa3f2c70f53660ef_icgraph" alt=""/></div>
<map name="ubifs_2journal_8c_aac219494a71f5ce5fa3f2c70f53660ef_icgraph" id="ubifs_2journal_8c_aac219494a71f5ce5fa3f2c70f53660ef_icgraph">
<area shape="rect" id="node2" href="ubifs_2journal_8c.html#af33a1a0e7af2c23d625797b7d30a09fe" title="pack_inode" alt="" coords="208,563,296,589"/>
<area shape="rect" id="node3" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="362,335,478,361"/>
<area shape="rect" id="node20" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="349,664,491,691"/>
<area shape="rect" id="node24" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="357,613,483,640"/>
<area shape="rect" id="node26" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="360,563,480,589"/>
<area shape="rect" id="node27" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="358,740,482,767"/>
<area shape="rect" id="node30" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="347,63,493,89"/>
<area shape="rect" id="node32" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="344,171,496,197"/>
<area shape="rect" id="node4" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="574,107,665,133"/>
<area shape="rect" id="node9" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="573,512,666,539"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="578,411,661,437"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="581,157,658,184"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="574,208,665,235"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="576,259,663,285"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="575,309,664,336"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="571,360,667,387"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="568,461,671,488"/>
<area shape="rect" id="node5" href="ubifs_2xattr_8c.html#a2c0f8e28d408b8e89b4ce7d6047af912" title="ubifs_xattr_set" alt="" coords="750,56,858,83"/>
<area shape="rect" id="node6" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="927,5,1061,32"/>
<area shape="rect" id="node7" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="1123,56,1196,83"/>
<area shape="rect" id="node8" href="ubifs_2crypto_8c.html#a4984848c1f6ebc630f98d30a9bbf2ed3" title="ubifs_crypt_set_context" alt="" coords="913,56,1075,83"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="756,411,852,437"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="761,563,847,589"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="944,588,1044,615"/>
<area shape="rect" id="node21" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="558,664,681,691"/>
<area shape="rect" id="node22" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="544,715,695,741"/>
<area shape="rect" id="node23" href="ubifs_2super_8c.html#a063c51fb658c01f325e4a0744d2f28ce" title="ubifs_evict_inode" alt="" coords="743,715,865,741"/>
<area shape="rect" id="node25" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="751,613,857,640"/>
<area shape="rect" id="node28" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="569,765,669,792"/>
<area shape="rect" id="node29" href="ubifs_8h.html#aaebf1c80e366c0f2702f58b91d7a9d38" title="ubifs_setattr" alt="" coords="757,765,851,792"/>
<area shape="rect" id="node31" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="755,5,853,32"/>
<area shape="rect" id="node33" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="571,56,668,83"/>
</map>
</div>

</div>
</div>
<a id="a0192ba0f1c902266317f5be8a385aff5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0192ba0f1c902266317f5be8a385aff5">&#9670;&nbsp;</a></span>zero_trun_node_unused()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void zero_trun_node_unused </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__trun__node.html">ubifs_trun_node</a> *&#160;</td>
          <td class="paramname"><em>trun</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>zero_trun_node_unused - zero out unused fields of an on-flash truncation node. : the truncation node to zero out </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2journal_8c_a0192ba0f1c902266317f5be8a385aff5_icgraph.png" border="0" usemap="#ubifs_2journal_8c_a0192ba0f1c902266317f5be8a385aff5_icgraph" alt=""/></div>
<map name="ubifs_2journal_8c_a0192ba0f1c902266317f5be8a385aff5_icgraph" id="ubifs_2journal_8c_a0192ba0f1c902266317f5be8a385aff5_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="213,5,337,32"/>
<area shape="rect" id="node3" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="385,5,485,32"/>
<area shape="rect" id="node4" href="ubifs_8h.html#aaebf1c80e366c0f2702f58b91d7a9d38" title="ubifs_setattr" alt="" coords="533,5,628,32"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_fbbc61eb3235ac15a35746d00bf5db85.html">ubifs</a></li><li class="navelem"><a class="el" href="ubifs_2journal_8c.html">journal.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>

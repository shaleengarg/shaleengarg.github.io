<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>linux/fs: ubifs/commit.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">linux/fs
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('ubifs_2commit_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">commit.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;linux/freezer.h&gt;</code><br />
<code>#include &lt;linux/kthread.h&gt;</code><br />
<code>#include &lt;linux/slab.h&gt;</code><br />
<code>#include &quot;<a class="el" href="ubifs_8h_source.html">ubifs.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for commit.c:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2commit_8c__incl.png" border="0" usemap="#ubifs_2commit_8c" alt=""/></div>
<map name="ubifs_2commit_8c" id="ubifs_2commit_8c">
<area shape="rect" id="node5" href="ubifs_8h.html" title="ubifs.h" alt="" coords="1160,80,1221,107"/>
<area shape="rect" id="node22" href="ubifs-media_8h.html" title="ubifs&#45;media.h" alt="" coords="2143,155,2243,181"/>
<area shape="rect" id="node23" href="ubifs_2debug_8h.html" title="debug.h" alt="" coords="2267,155,2335,181"/>
<area shape="rect" id="node24" href="misc_8h.html" title="misc.h" alt="" coords="2360,155,2421,181"/>
<area shape="rect" id="node25" href="key_8h.html" title="key.h" alt="" coords="2446,155,2501,181"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structidx__node.html">idx_node</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a349da7e934725810c922b20daec868ae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2commit_8c.html#a349da7e934725810c922b20daec868ae">nothing_to_commit</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:a349da7e934725810c922b20daec868ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff22e767be69aea3cc8ede3847389766"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766">do_commit</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:aff22e767be69aea3cc8ede3847389766"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91c88ecee0c3d4a55bbe6669a0caa521"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2commit_8c.html#a91c88ecee0c3d4a55bbe6669a0caa521">run_bg_commit</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:a91c88ecee0c3d4a55bbe6669a0caa521"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1d2abb94e9ca171f253ba64fdbf7aa6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2commit_8c.html#ad1d2abb94e9ca171f253ba64fdbf7aa6">ubifs_bg_thread</a> (void *info)</td></tr>
<tr class="separator:ad1d2abb94e9ca171f253ba64fdbf7aa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e9dcff4b0f768c14f6f8448f4b1343e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2commit_8c.html#a6e9dcff4b0f768c14f6f8448f4b1343e">ubifs_commit_required</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:a6e9dcff4b0f768c14f6f8448f4b1343e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c27328fd39184ba2e1bdfa1970275e7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2commit_8c.html#a6c27328fd39184ba2e1bdfa1970275e7">ubifs_request_bg_commit</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:a6c27328fd39184ba2e1bdfa1970275e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8066477fd4d182a562575fec9c1460f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2commit_8c.html#a8066477fd4d182a562575fec9c1460f9">wait_for_commit</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:a8066477fd4d182a562575fec9c1460f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4c760f55879f81abc758f058e481834"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2commit_8c.html#ae4c760f55879f81abc758f058e481834">ubifs_run_commit</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:ae4c760f55879f81abc758f058e481834"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18183f6ca9e5e865909aa32d50f4be4b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2commit_8c.html#a18183f6ca9e5e865909aa32d50f4be4b">ubifs_gc_should_commit</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:a18183f6ca9e5e865909aa32d50f4be4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a725dc62445ba29e272e4ccb5b10fbc61"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2commit_8c.html#a725dc62445ba29e272e4ccb5b10fbc61">dbg_old_index_check_init</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, struct <a class="el" href="structubifs__zbranch.html">ubifs_zbranch</a> *zroot)</td></tr>
<tr class="separator:a725dc62445ba29e272e4ccb5b10fbc61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23369147b6e2214867a8a650ad50ebaf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ubifs_2commit_8c.html#a23369147b6e2214867a8a650ad50ebaf">dbg_check_old_index</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, struct <a class="el" href="structubifs__zbranch.html">ubifs_zbranch</a> *zroot)</td></tr>
<tr class="separator:a23369147b6e2214867a8a650ad50ebaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a23369147b6e2214867a8a650ad50ebaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23369147b6e2214867a8a650ad50ebaf">&#9670;&nbsp;</a></span>dbg_check_old_index()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dbg_check_old_index </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structubifs__zbranch.html">ubifs_zbranch</a> *&#160;</td>
          <td class="paramname"><em>zroot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>dbg_check_old_index - check the old copy of the index. <code></code>: UBIFS file-system description object : root of the new index</p>
<p>In order to be able to recover from an unclean unmount, a complete copy of the index must exist on flash. This is the "old" index. The commit process must write the "new" index to flash without overwriting or destroying any part of the old index. This function is run at commit end in order to check that the old index does indeed exist completely intact.</p>
<p>This function returns %0 on success and a negative error code on failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2commit_8c_a23369147b6e2214867a8a650ad50ebaf_cgraph.png" border="0" usemap="#ubifs_2commit_8c_a23369147b6e2214867a8a650ad50ebaf_cgraph" alt=""/></div>
<map name="ubifs_2commit_8c_a23369147b6e2214867a8a650ad50ebaf_cgraph" id="ubifs_2commit_8c_a23369147b6e2214867a8a650ad50ebaf_cgraph">
<area shape="rect" id="node2" href="ubifs_2debug_8h.html#aaccd583a761afebb452421d214607adb" title="dbg_is_chk_index" alt="" coords="222,5,349,32"/>
<area shape="rect" id="node3" href="ubifs_2io_8c.html#ab1c29d586db30bacfa2c9a73369a8870" title="ubifs_read_node" alt="" coords="419,208,536,235"/>
<area shape="rect" id="node6" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="785,259,857,285"/>
<area shape="rect" id="node8" href="ubifs_2debug_8c.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="759,208,883,235"/>
<area shape="rect" id="node13" href="key_8h.html#a5611c13d648e672825da064c90c8903a" title="key_read" alt="" coords="954,360,1029,387"/>
<area shape="rect" id="node20" href="misc_8h.html#a1598cadb907a20f9e5dc3e7ee74edb1d" title="ubifs_idx_branch" alt="" coords="931,411,1051,437"/>
<area shape="rect" id="node21" href="misc_8h.html#ac244bb6ab2f45cd8b870edc621d20deb" title="ubifs_idx_key" alt="" coords="234,512,337,539"/>
<area shape="rect" id="node22" href="key_8h.html#a9d33aa154841c271b5a27f1c03d9f37d" title="highest_ino_key" alt="" coords="227,563,343,589"/>
<area shape="rect" id="node23" href="key_8h.html#abbcaebc958b96ba6c1a981b93be96899" title="key_copy" alt="" coords="246,613,325,640"/>
<area shape="rect" id="node24" href="key_8h.html#a6395510bfa3e62eff60652c9624180e1" title="keys_cmp" alt="" coords="244,664,327,691"/>
<area shape="rect" id="node25" href="key_8h.html#a391b7c6e47045b125899fd494b93b2ed" title="is_hash_key" alt="" coords="430,461,525,488"/>
<area shape="rect" id="node26" href="ubifs_2commit_8c.html#a725dc62445ba29e272e4ccb5b10fbc61" title="dbg_old_index_check_init" alt="" coords="200,208,371,235"/>
<area shape="rect" id="node4" href="ubifs_2debug_8c.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="1109,107,1191,133"/>
<area shape="rect" id="node5" href="ubifs_2io_8c.html#ab6a2a3c4a79d6d4c52350540437d3cb3" title="ubifs_leb_read" alt="" coords="594,259,701,285"/>
<area shape="rect" id="node7" href="ubifs_2io_8c.html#ab9b2f0cc24eff9f69bd606979eb3a53e" title="ubifs_check_node" alt="" coords="584,208,711,235"/>
<area shape="rect" id="node9" href="ubifs_2debug_8c.html#a40190f9f60ac94040c30dbd97c73a3ca" title="dump_ch" alt="" coords="954,157,1029,184"/>
<area shape="rect" id="node11" href="ubifs_2debug_8c.html#a4b30ad73e46b72b5043aa4efa7fb8d9a" title="get_key_hash" alt="" coords="940,208,1043,235"/>
<area shape="rect" id="node12" href="ubifs_2debug_8c.html#af1196269cd9c24affacc60e33f960f49" title="get_key_fmt" alt="" coords="944,259,1039,285"/>
<area shape="rect" id="node14" href="ubifs_2debug_8c.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="931,309,1052,336"/>
<area shape="rect" id="node10" href="ubifs_2debug_8c.html#a0137ecd738390d71f938f27be78c4477" title="dbg_gtype" alt="" coords="1109,157,1191,184"/>
<area shape="rect" id="node15" href="key_8h.html#a06f47822510ef850cb7065778115453c" title="key_type" alt="" coords="1113,448,1187,475"/>
<area shape="rect" id="node16" href="key_8h.html#a4a12b97ed78e138baf7886a6df7ed50f" title="key_inum" alt="" coords="1111,271,1189,297"/>
<area shape="rect" id="node17" href="ubifs_2debug_8c.html#ad6af0af711fdb082f6df4eaeb4d82fe6" title="get_key_type" alt="" coords="1100,321,1200,348"/>
<area shape="rect" id="node18" href="key_8h.html#acddf1ca88d72a37e06c5c608cd084656" title="key_hash" alt="" coords="1111,372,1189,399"/>
<area shape="rect" id="node19" href="key_8h.html#a10c13375b52dbb12be6f9b685d1d1ba7" title="key_block" alt="" coords="1109,220,1191,247"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2commit_8c_a23369147b6e2214867a8a650ad50ebaf_icgraph.png" border="0" usemap="#ubifs_2commit_8c_a23369147b6e2214867a8a650ad50ebaf_icgraph" alt=""/></div>
<map name="ubifs_2commit_8c_a23369147b6e2214867a8a650ad50ebaf_icgraph" id="ubifs_2commit_8c_a23369147b6e2214867a8a650ad50ebaf_icgraph">
<area shape="rect" id="node2" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="953,284,1039,311"/>
<area shape="rect" id="node23" href="ubifs_2debug_8h.html#ab599356d6c84ddd2c7b9001b452c30bd" title="dbg_is_power_cut" alt="" coords="200,639,327,665"/>
<area shape="rect" id="node3" href="ubifs_2commit_8c.html#a91c88ecee0c3d4a55bbe6669a0caa521" title="run_bg_commit" alt="" coords="1145,436,1255,463"/>
<area shape="rect" id="node7" href="ubifs_8h.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="1137,360,1263,387"/>
<area shape="rect" id="node4" href="ubifs_8h.html#ad1d2abb94e9ca171f253ba64fdbf7aa6" title="ubifs_bg_thread" alt="" coords="1525,740,1640,767"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="1726,715,1819,741"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="1710,841,1835,868"/>
<area shape="rect" id="node8" href="ubifs_2super_8c.html#a5f9c4c32c42dc338c1b84b87b7098105" title="ubifs_sync_fs" alt="" coords="1342,385,1445,412"/>
<area shape="rect" id="node9" href="ubifs_2recovery_8c.html#acb6fbec748694453a2e4b3ed2be6cc6b" title="grab_empty_leb" alt="" coords="1336,436,1451,463"/>
<area shape="rect" id="node10" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="1504,639,1661,665"/>
<area shape="rect" id="node12" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="1331,208,1456,235"/>
<area shape="rect" id="node21" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="1331,335,1456,361"/>
<area shape="rect" id="node11" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="1709,639,1836,665"/>
<area shape="rect" id="node13" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="1525,5,1641,32"/>
<area shape="rect" id="node14" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="1514,56,1651,83"/>
<area shape="rect" id="node15" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="1511,107,1654,133"/>
<area shape="rect" id="node16" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="1519,157,1646,184"/>
<area shape="rect" id="node17" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="1523,208,1643,235"/>
<area shape="rect" id="node18" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="1521,259,1645,285"/>
<area shape="rect" id="node19" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="1510,309,1655,336"/>
<area shape="rect" id="node20" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="1507,360,1659,387"/>
<area shape="rect" id="node22" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="1513,411,1652,437"/>
<area shape="rect" id="node24" href="ubifs_2debug_8h.html#af929a6951e19c79f1235738386005c06" title="dbg_leb_write" alt="" coords="381,588,484,615"/>
<area shape="rect" id="node33" href="ubifs_2debug_8h.html#af2ad985422103ec5e3e13776002d6ceb" title="dbg_leb_change" alt="" coords="375,740,491,767"/>
<area shape="rect" id="node46" href="ubifs_2debug_8h.html#a6ba17156289f8b8ecaed40dbafc04858" title="dbg_leb_unmap" alt="" coords="376,689,489,716"/>
<area shape="rect" id="node49" href="ubifs_2debug_8h.html#a56743d00da08f53b07b233e616378b33" title="dbg_leb_map" alt="" coords="383,639,482,665"/>
<area shape="rect" id="node25" href="ubifs_8h.html#a02909cfc9d3a0100f549390c7d464632" title="ubifs_leb_write" alt="" coords="545,487,655,513"/>
<area shape="rect" id="node26" href="ubifs_8h.html#a3e6d29ad192528c05f246cd31a1732fb" title="ubifs_wbuf_sync_nolock" alt="" coords="1117,525,1283,552"/>
<area shape="rect" id="node27" href="ubifs_8h.html#a6ee6b209c593633d86570858d6e5ff51" title="ubifs_wbuf_write_nolock" alt="" coords="709,436,875,463"/>
<area shape="rect" id="node28" href="ubifs_8h.html#a9e7d0e6c9720849101273f76bce7071c" title="ubifs_write_node" alt="" coords="732,487,852,513"/>
<area shape="rect" id="node30" href="ubifs_8h.html#aabacb52b14ebf81d602c26b57622cd7a" title="ubifs_log_start_commit" alt="" coords="713,537,871,564"/>
<area shape="rect" id="node31" href="lpt__commit_8c.html#adc7a12d4410684a6658cc8c273e84c23" title="write_cnodes" alt="" coords="743,588,841,615"/>
<area shape="rect" id="node32" href="tnc__commit_8c.html#a170826fc5905c8e3ff4182dbb98b8e86" title="write_index" alt="" coords="748,385,836,412"/>
<area shape="rect" id="node29" href="ubifs_2orphan_8c.html#a4892e45cc8f254c3400ef82f0dd89197" title="do_write_orph_node" alt="" coords="927,740,1065,767"/>
<area shape="rect" id="node34" href="ubifs_8h.html#ac70865809ab5c33c55274560e453f535" title="ubifs_leb_change" alt="" coords="539,1196,661,1223"/>
<area shape="rect" id="node35" href="ubifs_2recovery_8c.html#aecb3cf138b2d6e0039658a633e8a9d45" title="write_rcvrd_mst_node" alt="" coords="717,1348,867,1375"/>
<area shape="rect" id="node36" href="ubifs_2recovery_8c.html#accaf4c7132be008366b00b1629c46842" title="fix_unclean_leb" alt="" coords="736,993,848,1020"/>
<area shape="rect" id="node37" href="ubifs_2recovery_8c.html#aa854cba2b9edc1a50c631dd212461ab9" title="recover_head" alt="" coords="742,1044,842,1071"/>
<area shape="rect" id="node38" href="ubifs_2recovery_8c.html#abd1f4122259576c896b95cb623891ed1" title="clean_an_unclean_leb" alt="" coords="717,1095,867,1121"/>
<area shape="rect" id="node39" href="ubifs_2recovery_8c.html#a9d91d461205445e4f0500381ff4ffd82" title="fix_size_in_place" alt="" coords="731,1399,853,1425"/>
<area shape="rect" id="node40" href="ubifs_2log_8c.html#a6f4343dd62151d2ba9c062f6f1cebc3c" title="add_node" alt="" coords="753,1449,831,1476"/>
<area shape="rect" id="node41" href="ubifs_8h.html#a2e2a784a2060ee8ca565097ed7ae2bcf" title="ubifs_consolidate_log" alt="" coords="923,943,1069,969"/>
<area shape="rect" id="node42" href="ubifs_8h.html#a2c22b57dd8b454ef3308f2f5b558763c" title="ubifs_create_dflt_lpt" alt="" coords="723,1196,861,1223"/>
<area shape="rect" id="node43" href="ubifs_8h.html#a9695fcc75ffa07efff2111b02ebd89c3" title="ubifs_write_sb_node" alt="" coords="925,1373,1067,1400"/>
<area shape="rect" id="node44" href="sb_8c.html#ab008935d2aab585efbb16fe4de3f2fef" title="fixup_leb" alt="" coords="755,943,829,969"/>
<area shape="rect" id="node45" href="tnc__commit_8c.html#ae35ab1b0e8a8676ac825941f36e77bdd" title="layout_leb_in_gaps" alt="" coords="725,1297,859,1324"/>
<area shape="rect" id="node47" href="ubifs_8h.html#ad9d3a62a61d21e1faa60cd6e630c41ac" title="ubifs_leb_unmap" alt="" coords="540,791,660,817"/>
<area shape="rect" id="node48" href="ubifs_2orphan_8c.html#af769fec1447a02b93d13c0694037359a" title="write_orph_nodes" alt="" coords="730,791,854,817"/>
<area shape="rect" id="node50" href="ubifs_8h.html#a8d3619a60498527530b0ed01ba5c6a82" title="ubifs_leb_map" alt="" coords="547,639,653,665"/>
</map>
</div>

</div>
</div>
<a id="a725dc62445ba29e272e4ccb5b10fbc61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a725dc62445ba29e272e4ccb5b10fbc61">&#9670;&nbsp;</a></span>dbg_old_index_check_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dbg_old_index_check_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structubifs__zbranch.html">ubifs_zbranch</a> *&#160;</td>
          <td class="paramname"><em>zroot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>dbg_old_index_check_init - get information for the next old index check. <code></code>: UBIFS file-system description object : root of the index</p>
<p>This function records information about the index that will be needed for the next old index check i.e. '<a class="el" href="ubifs_2commit_8c.html#a23369147b6e2214867a8a650ad50ebaf">dbg_check_old_index()</a>'.</p>
<p>This function returns %0 on success and a negative error code on failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2commit_8c_a725dc62445ba29e272e4ccb5b10fbc61_cgraph.png" border="0" usemap="#ubifs_2commit_8c_a725dc62445ba29e272e4ccb5b10fbc61_cgraph" alt=""/></div>
<map name="ubifs_2commit_8c_a725dc62445ba29e272e4ccb5b10fbc61_cgraph" id="ubifs_2commit_8c_a725dc62445ba29e272e4ccb5b10fbc61_cgraph">
<area shape="rect" id="node2" href="ubifs_2io_8c.html#ab1c29d586db30bacfa2c9a73369a8870" title="ubifs_read_node" alt="" coords="224,81,341,108"/>
<area shape="rect" id="node3" href="ubifs_2debug_8c.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="914,5,997,32"/>
<area shape="rect" id="node4" href="ubifs_2io_8c.html#ab6a2a3c4a79d6d4c52350540437d3cb3" title="ubifs_leb_read" alt="" coords="399,56,506,83"/>
<area shape="rect" id="node6" href="ubifs_2io_8c.html#ab9b2f0cc24eff9f69bd606979eb3a53e" title="ubifs_check_node" alt="" coords="389,107,516,133"/>
<area shape="rect" id="node7" href="ubifs_2debug_8c.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="564,157,688,184"/>
<area shape="rect" id="node5" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="590,81,662,108"/>
<area shape="rect" id="node8" href="ubifs_2debug_8c.html#a40190f9f60ac94040c30dbd97c73a3ca" title="dump_ch" alt="" coords="759,56,834,83"/>
<area shape="rect" id="node10" href="ubifs_2debug_8c.html#a4b30ad73e46b72b5043aa4efa7fb8d9a" title="get_key_hash" alt="" coords="745,107,848,133"/>
<area shape="rect" id="node11" href="ubifs_2debug_8c.html#af1196269cd9c24affacc60e33f960f49" title="get_key_fmt" alt="" coords="749,157,844,184"/>
<area shape="rect" id="node12" href="key_8h.html#a5611c13d648e672825da064c90c8903a" title="key_read" alt="" coords="759,208,834,235"/>
<area shape="rect" id="node13" href="ubifs_2debug_8c.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="736,259,857,285"/>
<area shape="rect" id="node19" href="misc_8h.html#a1598cadb907a20f9e5dc3e7ee74edb1d" title="ubifs_idx_branch" alt="" coords="737,309,857,336"/>
<area shape="rect" id="node9" href="ubifs_2debug_8c.html#a0137ecd738390d71f938f27be78c4477" title="dbg_gtype" alt="" coords="914,56,997,83"/>
<area shape="rect" id="node14" href="key_8h.html#a06f47822510ef850cb7065778115453c" title="key_type" alt="" coords="918,157,993,184"/>
<area shape="rect" id="node15" href="key_8h.html#a4a12b97ed78e138baf7886a6df7ed50f" title="key_inum" alt="" coords="916,208,995,235"/>
<area shape="rect" id="node16" href="ubifs_2debug_8c.html#ad6af0af711fdb082f6df4eaeb4d82fe6" title="get_key_type" alt="" coords="905,259,1005,285"/>
<area shape="rect" id="node17" href="key_8h.html#acddf1ca88d72a37e06c5c608cd084656" title="key_hash" alt="" coords="916,309,995,336"/>
<area shape="rect" id="node18" href="key_8h.html#a10c13375b52dbb12be6f9b685d1d1ba7" title="key_block" alt="" coords="915,360,996,387"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2commit_8c_a725dc62445ba29e272e4ccb5b10fbc61_icgraph.png" border="0" usemap="#ubifs_2commit_8c_a725dc62445ba29e272e4ccb5b10fbc61_icgraph" alt=""/></div>
<map name="ubifs_2commit_8c_a725dc62445ba29e272e4ccb5b10fbc61_icgraph" id="ubifs_2commit_8c_a725dc62445ba29e272e4ccb5b10fbc61_icgraph">
<area shape="rect" id="node2" href="ubifs_2debug_8h.html#a23369147b6e2214867a8a650ad50ebaf" title="dbg_check_old_index" alt="" coords="224,1260,371,1286"/>
<area shape="rect" id="node15" href="ubifs_2debug_8h.html#ab599356d6c84ddd2c7b9001b452c30bd" title="dbg_is_power_cut" alt="" coords="420,1069,547,1096"/>
<area shape="rect" id="node50" href="ubifs_8h.html#ac45820de3d377c5a1f29a160f5fb0d77" title="ubifs_read_master" alt="" coords="419,1640,548,1666"/>
<area shape="rect" id="node3" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="1187,1032,1273,1058"/>
<area shape="rect" id="node4" href="ubifs_2commit_8c.html#a91c88ecee0c3d4a55bbe6669a0caa521" title="run_bg_commit" alt="" coords="1383,905,1493,932"/>
<area shape="rect" id="node9" href="ubifs_8h.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="1375,993,1501,1020"/>
<area shape="rect" id="node5" href="ubifs_8h.html#ad1d2abb94e9ca171f253ba64fdbf7aa6" title="ubifs_bg_thread" alt="" coords="1755,765,1869,792"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="1955,1018,2048,1045"/>
<area shape="rect" id="node8" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="1939,689,2064,716"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="2112,1018,2221,1045"/>
<area shape="rect" id="node10" href="ubifs_2super_8c.html#a5f9c4c32c42dc338c1b84b87b7098105" title="ubifs_sync_fs" alt="" coords="1571,968,1674,994"/>
<area shape="rect" id="node11" href="ubifs_2recovery_8c.html#acb6fbec748694453a2e4b3ed2be6cc6b" title="grab_empty_leb" alt="" coords="1565,917,1680,944"/>
<area shape="rect" id="node12" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="1733,1018,1891,1045"/>
<area shape="rect" id="node13" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="1560,1018,1685,1045"/>
<area shape="rect" id="node14" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="1560,1069,1685,1096"/>
<area shape="rect" id="node16" href="ubifs_2debug_8h.html#af929a6951e19c79f1235738386005c06" title="dbg_leb_write" alt="" coords="603,1120,705,1146"/>
<area shape="rect" id="node29" href="ubifs_2debug_8h.html#af2ad985422103ec5e3e13776002d6ceb" title="dbg_leb_change" alt="" coords="596,1018,712,1045"/>
<area shape="rect" id="node42" href="ubifs_2debug_8h.html#a6ba17156289f8b8ecaed40dbafc04858" title="dbg_leb_unmap" alt="" coords="597,1069,711,1096"/>
<area shape="rect" id="node48" href="ubifs_2debug_8h.html#a56743d00da08f53b07b233e616378b33" title="dbg_leb_map" alt="" coords="605,968,703,994"/>
<area shape="rect" id="node17" href="ubifs_8h.html#a02909cfc9d3a0100f549390c7d464632" title="ubifs_leb_write" alt="" coords="767,1412,876,1438"/>
<area shape="rect" id="node18" href="ubifs_8h.html#a3e6d29ad192528c05f246cd31a1732fb" title="ubifs_wbuf_sync_nolock" alt="" coords="931,1614,1096,1641"/>
<area shape="rect" id="node22" href="ubifs_8h.html#a6ee6b209c593633d86570858d6e5ff51" title="ubifs_wbuf_write_nolock" alt="" coords="931,1462,1096,1489"/>
<area shape="rect" id="node23" href="ubifs_8h.html#a9e7d0e6c9720849101273f76bce7071c" title="ubifs_write_node" alt="" coords="953,1361,1073,1388"/>
<area shape="rect" id="node26" href="ubifs_8h.html#aabacb52b14ebf81d602c26b57622cd7a" title="ubifs_log_start_commit" alt="" coords="935,1412,1092,1438"/>
<area shape="rect" id="node27" href="lpt__commit_8c.html#adc7a12d4410684a6658cc8c273e84c23" title="write_cnodes" alt="" coords="964,1310,1063,1337"/>
<area shape="rect" id="node28" href="tnc__commit_8c.html#a170826fc5905c8e3ff4182dbb98b8e86" title="write_index" alt="" coords="969,1513,1057,1540"/>
<area shape="rect" id="node19" href="ubifs_2gc_8c.html#ac8af282d626a91c08e5e158b8e55ec20" title="switch_gc_head" alt="" coords="1380,854,1496,881"/>
<area shape="rect" id="node20" href="ubifs_8h.html#a29dd378f4b22d45580bff155cbb275cd" title="ubifs_garbage_collect_leb" alt="" coords="1144,1361,1316,1388"/>
<area shape="rect" id="node21" href="ubifs_8h.html#a6aba86bcae816613915e10318fdf6b83" title="ubifs_garbage_collect" alt="" coords="1364,1310,1512,1337"/>
<area shape="rect" id="node24" href="ubifs_2orphan_8c.html#a4892e45cc8f254c3400ef82f0dd89197" title="do_write_orph_node" alt="" coords="1161,905,1299,932"/>
<area shape="rect" id="node25" href="ubifs_8h.html#a8b30a0dc99186d8f07ee2f47693f11b7" title="ubifs_add_bud_to_log" alt="" coords="1156,804,1304,830"/>
<area shape="rect" id="node30" href="ubifs_8h.html#ac70865809ab5c33c55274560e453f535" title="ubifs_leb_change" alt="" coords="760,348,883,374"/>
<area shape="rect" id="node31" href="ubifs_2recovery_8c.html#aecb3cf138b2d6e0039658a633e8a9d45" title="write_rcvrd_mst_node" alt="" coords="938,196,1089,222"/>
<area shape="rect" id="node32" href="ubifs_2recovery_8c.html#accaf4c7132be008366b00b1629c46842" title="fix_unclean_leb" alt="" coords="957,500,1069,526"/>
<area shape="rect" id="node33" href="ubifs_2recovery_8c.html#aa854cba2b9edc1a50c631dd212461ab9" title="recover_head" alt="" coords="963,550,1063,577"/>
<area shape="rect" id="node34" href="ubifs_2recovery_8c.html#abd1f4122259576c896b95cb623891ed1" title="clean_an_unclean_leb" alt="" coords="938,601,1089,628"/>
<area shape="rect" id="node35" href="ubifs_2recovery_8c.html#a9d91d461205445e4f0500381ff4ffd82" title="fix_size_in_place" alt="" coords="952,246,1075,273"/>
<area shape="rect" id="node36" href="ubifs_2log_8c.html#a6f4343dd62151d2ba9c062f6f1cebc3c" title="add_node" alt="" coords="974,348,1053,374"/>
<area shape="rect" id="node37" href="ubifs_8h.html#a2e2a784a2060ee8ca565097ed7ae2bcf" title="ubifs_consolidate_log" alt="" coords="1157,613,1303,640"/>
<area shape="rect" id="node38" href="ubifs_8h.html#a2c22b57dd8b454ef3308f2f5b558763c" title="ubifs_create_dflt_lpt" alt="" coords="944,94,1083,121"/>
<area shape="rect" id="node39" href="ubifs_8h.html#a9695fcc75ffa07efff2111b02ebd89c3" title="ubifs_write_sb_node" alt="" coords="1741,278,1883,305"/>
<area shape="rect" id="node40" href="sb_8c.html#ab008935d2aab585efbb16fe4de3f2fef" title="fixup_leb" alt="" coords="976,449,1051,476"/>
<area shape="rect" id="node41" href="tnc__commit_8c.html#ae35ab1b0e8a8676ac825941f36e77bdd" title="layout_leb_in_gaps" alt="" coords="947,145,1080,172"/>
<area shape="rect" id="node43" href="ubifs_8h.html#ad9d3a62a61d21e1faa60cd6e630c41ac" title="ubifs_leb_unmap" alt="" coords="761,930,881,957"/>
<area shape="rect" id="node44" href="ubifs_2orphan_8c.html#af769fec1447a02b93d13c0694037359a" title="write_orph_nodes" alt="" coords="951,1158,1075,1185"/>
<area shape="rect" id="node45" href="ubifs_8h.html#af78cc7397d8b6ff99de2b335a5a6b87c" title="ubifs_clear_orphans" alt="" coords="1743,664,1881,690"/>
<area shape="rect" id="node46" href="ubifs_8h.html#a1ff584f97bf8a1783fc9fecde0a87b1e" title="ubifs_gc_start_commit" alt="" coords="936,1006,1091,1033"/>
<area shape="rect" id="node47" href="ubifs_8h.html#abd8f539c87c6fbdd3a73195b54dd9995" title="ubifs_gc_end_commit" alt="" coords="939,1057,1088,1084"/>
<area shape="rect" id="node49" href="ubifs_8h.html#a8d3619a60498527530b0ed01ba5c6a82" title="ubifs_leb_map" alt="" coords="768,170,875,197"/>
</map>
</div>

</div>
</div>
<a id="aff22e767be69aea3cc8ede3847389766"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff22e767be69aea3cc8ede3847389766">&#9670;&nbsp;</a></span>do_commit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int do_commit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>do_commit - commit the journal. <code></code>: UBIFS file-system description object</p>
<p>This function implements UBIFS commit. It has to be called with commit lock locked. Returns zero in case of success and a negative error code in case of failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2commit_8c_aff22e767be69aea3cc8ede3847389766_cgraph.png" border="0" usemap="#ubifs_2commit_8c_aff22e767be69aea3cc8ede3847389766_cgraph" alt=""/></div>
<map name="ubifs_2commit_8c_aff22e767be69aea3cc8ede3847389766_cgraph" id="ubifs_2commit_8c_aff22e767be69aea3cc8ede3847389766_cgraph">
<area shape="rect" id="node2" href="ubifs_2commit_8c.html#a349da7e934725810c922b20daec868ae" title="nothing_to_commit" alt="" coords="161,1093,293,1120"/>
<area shape="rect" id="node4" href="misc_8h.html#af8fd16c04f42f2a56d86f0f7a4924ecc" title="ubifs_wbuf_sync" alt="" coords="385,483,505,509"/>
<area shape="rect" id="node9" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1000,853,1072,880"/>
<area shape="rect" id="node10" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="983,448,1089,475"/>
<area shape="rect" id="node11" href="ubifs_2gc_8c.html#a1ff584f97bf8a1783fc9fecde0a87b1e" title="ubifs_gc_start_commit" alt="" coords="367,381,522,408"/>
<area shape="rect" id="node18" href="ubifs_2debug_8h.html#a69534405790cc12f492343243bc539a4" title="dbg_check_lprops" alt="" coords="164,1005,291,1032"/>
<area shape="rect" id="node23" href="ubifs_2log_8c.html#aabacb52b14ebf81d602c26b57622cd7a" title="ubifs_log_start_commit" alt="" coords="366,432,523,459"/>
<area shape="rect" id="node28" href="tnc__commit_8c.html#ae1e7a24e81c4fa022a4065530bd77bff" title="ubifs_tnc_start_commit" alt="" coords="148,1220,307,1247"/>
<area shape="rect" id="node38" href="lpt__commit_8c.html#ad0029b471c7e38ab8a4a1ab961ca25a4" title="ubifs_lpt_start_commit" alt="" coords="150,879,305,905"/>
<area shape="rect" id="node41" href="ubifs_2orphan_8c.html#a4644cfc76e621c7abb3683b063707f4e" title="ubifs_orphan_start\l_commit" alt="" coords="163,1271,292,1313"/>
<area shape="rect" id="node42" href="lprops_8c.html#a8a4a969b18d269964ff80d11eb94b8ab" title="ubifs_get_lp_stats" alt="" coords="163,1337,291,1364"/>
<area shape="rect" id="node43" href="tnc__commit_8c.html#a3e11b3b283926c57ea7d7e7aaf6cabe1" title="ubifs_tnc_end_commit" alt="" coords="151,1388,304,1415"/>
<area shape="rect" id="node44" href="lpt__commit_8c.html#a2e84d4bec8fcf799eeb376d90f220efb" title="ubifs_lpt_end_commit" alt="" coords="153,1439,302,1465"/>
<area shape="rect" id="node45" href="ubifs_2orphan_8c.html#a85394180871fe6a819b8312c7c01f865" title="ubifs_orphan_end_commit" alt="" coords="140,1489,315,1516"/>
<area shape="rect" id="node46" href="ubifs_2commit_8c.html#a23369147b6e2214867a8a650ad50ebaf" title="dbg_check_old_index" alt="" coords="788,803,935,829"/>
<area shape="rect" id="node47" href="ubifs_2log_8c.html#a68cc48bfb09ca4270d8d3f953441e201" title="ubifs_log_end_commit" alt="" coords="151,752,303,779"/>
<area shape="rect" id="node48" href="ubifs_2log_8c.html#a84e11c018b891280acfdb1e3071d5e18" title="ubifs_log_post_commit" alt="" coords="367,584,523,611"/>
<area shape="rect" id="node49" href="ubifs_2gc_8c.html#abd8f539c87c6fbdd3a73195b54dd9995" title="ubifs_gc_end_commit" alt="" coords="153,575,302,601"/>
<area shape="rect" id="node50" href="lpt__commit_8c.html#a0ca6bd7c2db50191b30308925d584e16" title="ubifs_lpt_post_commit" alt="" coords="151,1540,304,1567"/>
<area shape="rect" id="node3" href="misc_8h.html#abe5c86108a05199a899138767ca1f42a" title="ubifs_zn_dirty" alt="" coords="606,1208,709,1235"/>
<area shape="rect" id="node5" href="ubifs_2io_8c.html#a3e6d29ad192528c05f246cd31a1732fb" title="ubifs_wbuf_sync_nolock" alt="" coords="575,397,740,424"/>
<area shape="rect" id="node6" href="ubifs_2debug_8c.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="821,347,902,373"/>
<area shape="rect" id="node7" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="822,245,901,272"/>
<area shape="rect" id="node8" href="ubifs_2io_8c.html#a02909cfc9d3a0100f549390c7d464632" title="ubifs_leb_write" alt="" coords="807,448,916,475"/>
<area shape="rect" id="node12" href="misc_8h.html#aa89c2768eb94f129c6afbe47420b44ba" title="ubifs_get_lprops" alt="" coords="599,600,716,627"/>
<area shape="rect" id="node13" href="lprops_8c.html#af4f3f200dc1d36660281ec0282293308" title="ubifs_fast_find_freeable" alt="" coords="577,43,737,69"/>
<area shape="rect" id="node14" href="ubifs_2io_8c.html#ad9d3a62a61d21e1faa60cd6e630c41ac" title="ubifs_leb_unmap" alt="" coords="597,499,717,525"/>
<area shape="rect" id="node15" href="lprops_8c.html#abfc4c6a75b37762f214cbc91f0ebe664" title="ubifs_change_lp" alt="" coords="599,93,715,120"/>
<area shape="rect" id="node16" href="lprops_8c.html#ae7db0b84b9b4c7666f34dd1c6d78b0a0" title="ubifs_fast_find_frdi_idx" alt="" coords="579,144,735,171"/>
<area shape="rect" id="node17" href="misc_8h.html#a6dce2c34ec97d74cf4be59e0201bdb3e" title="ubifs_release_lprops" alt="" coords="587,651,728,677"/>
<area shape="rect" id="node19" href="ubifs_2debug_8h.html#ab66d4ac998d5cd15774f5a22d366e1f1" title="dbg_is_chk_lprops" alt="" coords="592,967,723,993"/>
<area shape="rect" id="node20" href="lpt_8c.html#a34800df1b6052b492ca05c589dfec386" title="ubifs_lpt_scan_nolock" alt="" coords="369,955,520,981"/>
<area shape="rect" id="node21" href="lprops_8c.html#a14844fa99e1b9a5c6519cb82bd423fc5" title="scan_check_cb" alt="" coords="805,1100,918,1127"/>
<area shape="rect" id="node22" href="lprops_8c.html#a4d24d720745a25e26d273dc892c703eb" title="dbg_check_cats" alt="" coords="386,1056,503,1083"/>
<area shape="rect" id="node24" href="ubifs_2log_8c.html#a9946e005124ad49c46176066a55105fa" title="dbg_check_bud_bytes" alt="" coords="581,752,733,779"/>
<area shape="rect" id="node25" href="ubifs_2io_8c.html#acfc2ca3ffa8d094855c2e59551f3a767" title="ubifs_prepare_node" alt="" coords="590,195,725,221"/>
<area shape="rect" id="node26" href="misc_8h.html#abf53e0ff9d9f9f6fefb9a9efbf709496" title="ubifs_next_log_lnum" alt="" coords="587,549,728,576"/>
<area shape="rect" id="node27" href="ubifs_2log_8c.html#a1c5014480a8dd06adad3de568a191081" title="remove_buds" alt="" coords="607,347,707,373"/>
<area shape="rect" id="node29" href="ubifs_2debug_8c.html#a8e749de733b483ca979984b8aa078aa6" title="dbg_check_tnc" alt="" coords="389,1259,500,1285"/>
<area shape="rect" id="node30" href="tnc__commit_8c.html#a64748c798bfc8c8fd1ee5bedae19a5b3" title="get_znodes_to_commit" alt="" coords="366,1411,523,1437"/>
<area shape="rect" id="node31" href="tnc__commit_8c.html#a82dea2876366b839f177356c01a9c031" title="alloc_idx_lebs" alt="" coords="393,1461,497,1488"/>
<area shape="rect" id="node32" href="tnc__commit_8c.html#a1f7210689e6f040c0b106db3e447e04b" title="layout_commit" alt="" coords="391,1613,498,1640"/>
<area shape="rect" id="node33" href="tnc__commit_8c.html#a045e506a5e968ca24069299455ff0abf" title="free_unused_idx_lebs" alt="" coords="583,1537,731,1564"/>
<area shape="rect" id="node34" href="tnc_8c.html#a01e38c99f12ee3c060c9214d14ec62f3" title="destroy_old_idx" alt="" coords="388,1309,501,1336"/>
<area shape="rect" id="node35" href="find_8c.html#abb183b65aeed0bc4e18681aec0ffdb5b" title="ubifs_save_dirty_idx\l_lnums" alt="" coords="374,635,515,677"/>
<area shape="rect" id="node36" href="budget_8c.html#a6109e1d36eaa593c345944d0d4b30745" title="ubifs_calc_min_idx_lebs" alt="" coords="363,1360,527,1387"/>
<area shape="rect" id="node37" href="tnc__commit_8c.html#aabbfd5925b308189c641e1570a2a19f7" title="free_idx_lebs" alt="" coords="395,1563,494,1589"/>
<area shape="rect" id="node39" href="lpt__commit_8c.html#ab2f0c34c5385c6b4af6f326fac750a70" title="dbg_chk_lpt_free_spc" alt="" coords="370,904,519,931"/>
<area shape="rect" id="node40" href="lpt__commit_8c.html#a0326c90a004af4486c5ad1dbc25baf29" title="dbg_check_ltab" alt="" coords="388,853,501,880"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2commit_8c_aff22e767be69aea3cc8ede3847389766_icgraph.png" border="0" usemap="#ubifs_2commit_8c_aff22e767be69aea3cc8ede3847389766_icgraph" alt=""/></div>
<map name="ubifs_2commit_8c_aff22e767be69aea3cc8ede3847389766_icgraph" id="ubifs_2commit_8c_aff22e767be69aea3cc8ede3847389766_icgraph">
<area shape="rect" id="node2" href="ubifs_2commit_8c.html#a91c88ecee0c3d4a55bbe6669a0caa521" title="run_bg_commit" alt="" coords="147,184,258,211"/>
<area shape="rect" id="node9" href="ubifs_8h.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="140,272,265,299"/>
<area shape="rect" id="node3" href="ubifs_8h.html#ad1d2abb94e9ca171f253ba64fdbf7aa6" title="ubifs_bg_thread" alt="" coords="508,145,623,172"/>
<area shape="rect" id="node4" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="721,120,815,147"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="705,171,831,197"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="917,5,1027,32"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="1135,5,1228,32"/>
<area shape="rect" id="node8" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="911,56,1033,83"/>
<area shape="rect" id="node10" href="ubifs_2super_8c.html#a5f9c4c32c42dc338c1b84b87b7098105" title="ubifs_sync_fs" alt="" coords="325,196,427,223"/>
<area shape="rect" id="node11" href="ubifs_2recovery_8c.html#acb6fbec748694453a2e4b3ed2be6cc6b" title="grab_empty_leb" alt="" coords="319,297,433,324"/>
<area shape="rect" id="node12" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="487,233,644,260"/>
<area shape="rect" id="node22" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="503,1171,628,1197"/>
<area shape="rect" id="node42" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="313,399,439,425"/>
<area shape="rect" id="node13" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="705,233,831,260"/>
<area shape="rect" id="node14" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1115,436,1248,463"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="925,208,1019,235"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="931,157,1013,184"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="927,259,1017,285"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="924,309,1020,336"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="921,360,1023,387"/>
<area shape="rect" id="node15" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="1311,436,1384,463"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1138,816,1225,843"/>
<area shape="rect" id="node23" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="710,385,826,412"/>
<area shape="rect" id="node28" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="699,1412,837,1439"/>
<area shape="rect" id="node31" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="697,1272,839,1299"/>
<area shape="rect" id="node34" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="705,1348,831,1375"/>
<area shape="rect" id="node36" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="708,1171,828,1197"/>
<area shape="rect" id="node37" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="706,1221,830,1248"/>
<area shape="rect" id="node38" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="695,968,841,995"/>
<area shape="rect" id="node40" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="692,1120,844,1147"/>
<area shape="rect" id="node24" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="927,411,1017,437"/>
<area shape="rect" id="node25" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="933,461,1011,488"/>
<area shape="rect" id="node26" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="927,512,1017,539"/>
<area shape="rect" id="node27" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="929,563,1015,589"/>
<area shape="rect" id="node29" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="923,1424,1021,1451"/>
<area shape="rect" id="node30" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1131,1221,1231,1248"/>
<area shape="rect" id="node32" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="911,1323,1033,1349"/>
<area shape="rect" id="node33" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="897,1272,1047,1299"/>
<area shape="rect" id="node35" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="919,1373,1025,1400"/>
<area shape="rect" id="node39" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="923,867,1021,893"/>
<area shape="rect" id="node41" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="923,1120,1021,1147"/>
<area shape="rect" id="node43" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="699,613,837,640"/>
<area shape="rect" id="node44" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="911,664,1033,691"/>
<area shape="rect" id="node45" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="915,715,1029,741"/>
<area shape="rect" id="node46" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="932,765,1012,792"/>
<area shape="rect" id="node47" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="892,968,1052,995"/>
<area shape="rect" id="node48" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="1126,917,1237,944"/>
<area shape="rect" id="node49" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="1100,993,1263,1020"/>
<area shape="rect" id="node50" href="ubifs_2ioctl_8c.html#a06251cc4602342e44b5ed0a1b39f7e60" title="setflags" alt="" coords="938,613,1006,640"/>
</map>
</div>

</div>
</div>
<a id="a349da7e934725810c922b20daec868ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a349da7e934725810c922b20daec868ae">&#9670;&nbsp;</a></span>nothing_to_commit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nothing_to_commit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2commit_8c_a349da7e934725810c922b20daec868ae_cgraph.png" border="0" usemap="#ubifs_2commit_8c_a349da7e934725810c922b20daec868ae_cgraph" alt=""/></div>
<map name="ubifs_2commit_8c_a349da7e934725810c922b20daec868ae_cgraph" id="ubifs_2commit_8c_a349da7e934725810c922b20daec868ae_cgraph">
<area shape="rect" id="node2" href="misc_8h.html#abe5c86108a05199a899138767ca1f42a" title="ubifs_zn_dirty" alt="" coords="185,5,288,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2commit_8c_a349da7e934725810c922b20daec868ae_icgraph.png" border="0" usemap="#ubifs_2commit_8c_a349da7e934725810c922b20daec868ae_icgraph" alt=""/></div>
<map name="ubifs_2commit_8c_a349da7e934725810c922b20daec868ae_icgraph" id="ubifs_2commit_8c_a349da7e934725810c922b20daec868ae_icgraph">
<area shape="rect" id="node2" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="185,247,272,273"/>
<area shape="rect" id="node3" href="ubifs_2commit_8c.html#a91c88ecee0c3d4a55bbe6669a0caa521" title="run_bg_commit" alt="" coords="327,184,438,211"/>
<area shape="rect" id="node10" href="ubifs_8h.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="320,272,445,299"/>
<area shape="rect" id="node4" href="ubifs_8h.html#ad1d2abb94e9ca171f253ba64fdbf7aa6" title="ubifs_bg_thread" alt="" coords="688,145,803,172"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="901,120,995,147"/>
<area shape="rect" id="node8" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="885,171,1011,197"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1097,5,1207,32"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="1315,5,1408,32"/>
<area shape="rect" id="node9" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="1091,56,1213,83"/>
<area shape="rect" id="node11" href="ubifs_2super_8c.html#a5f9c4c32c42dc338c1b84b87b7098105" title="ubifs_sync_fs" alt="" coords="505,196,607,223"/>
<area shape="rect" id="node12" href="ubifs_2recovery_8c.html#acb6fbec748694453a2e4b3ed2be6cc6b" title="grab_empty_leb" alt="" coords="499,297,613,324"/>
<area shape="rect" id="node13" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="667,233,824,260"/>
<area shape="rect" id="node22" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="683,1171,808,1197"/>
<area shape="rect" id="node42" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="493,399,619,425"/>
<area shape="rect" id="node14" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="885,233,1011,260"/>
<area shape="rect" id="node15" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1295,436,1428,463"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1105,208,1199,235"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1111,157,1193,184"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1107,259,1197,285"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1104,309,1200,336"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1101,360,1203,387"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1318,816,1405,843"/>
<area shape="rect" id="node23" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="890,385,1006,412"/>
<area shape="rect" id="node28" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="879,1412,1017,1439"/>
<area shape="rect" id="node31" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="877,1272,1019,1299"/>
<area shape="rect" id="node34" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="885,1348,1011,1375"/>
<area shape="rect" id="node36" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="888,1171,1008,1197"/>
<area shape="rect" id="node37" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="886,1221,1010,1248"/>
<area shape="rect" id="node38" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="875,968,1021,995"/>
<area shape="rect" id="node40" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="872,1120,1024,1147"/>
<area shape="rect" id="node24" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1107,411,1197,437"/>
<area shape="rect" id="node25" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1113,461,1191,488"/>
<area shape="rect" id="node26" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1107,512,1197,539"/>
<area shape="rect" id="node27" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1109,563,1195,589"/>
<area shape="rect" id="node29" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="1103,1424,1201,1451"/>
<area shape="rect" id="node30" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1311,1221,1411,1248"/>
<area shape="rect" id="node32" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="1091,1323,1213,1349"/>
<area shape="rect" id="node33" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="1077,1272,1227,1299"/>
<area shape="rect" id="node35" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1099,1373,1205,1400"/>
<area shape="rect" id="node39" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="1103,867,1201,893"/>
<area shape="rect" id="node41" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="1103,1120,1201,1147"/>
<area shape="rect" id="node43" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="879,613,1017,640"/>
<area shape="rect" id="node44" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="1091,664,1213,691"/>
<area shape="rect" id="node45" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="1095,715,1209,741"/>
<area shape="rect" id="node46" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="1112,765,1192,792"/>
<area shape="rect" id="node47" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="1072,968,1232,995"/>
<area shape="rect" id="node48" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="1306,917,1417,944"/>
<area shape="rect" id="node49" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="1280,993,1443,1020"/>
<area shape="rect" id="node50" href="ubifs_2ioctl_8c.html#a06251cc4602342e44b5ed0a1b39f7e60" title="setflags" alt="" coords="1118,613,1186,640"/>
</map>
</div>

</div>
</div>
<a id="a91c88ecee0c3d4a55bbe6669a0caa521"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91c88ecee0c3d4a55bbe6669a0caa521">&#9670;&nbsp;</a></span>run_bg_commit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int run_bg_commit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>run_bg_commit - run background commit if it is needed. <code></code>: UBIFS file-system description object</p>
<p>This function runs background commit if it is needed. Returns zero in case of success and a negative error code in case of failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2commit_8c_a91c88ecee0c3d4a55bbe6669a0caa521_cgraph.png" border="0" usemap="#ubifs_2commit_8c_a91c88ecee0c3d4a55bbe6669a0caa521_cgraph" alt=""/></div>
<map name="ubifs_2commit_8c_a91c88ecee0c3d4a55bbe6669a0caa521_cgraph" id="ubifs_2commit_8c_a91c88ecee0c3d4a55bbe6669a0caa521_cgraph">
<area shape="rect" id="node2" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="164,795,251,821"/>
<area shape="rect" id="node3" href="ubifs_2commit_8c.html#a349da7e934725810c922b20daec868ae" title="nothing_to_commit" alt="" coords="320,736,452,763"/>
<area shape="rect" id="node5" href="misc_8h.html#af8fd16c04f42f2a56d86f0f7a4924ecc" title="ubifs_wbuf_sync" alt="" coords="543,701,663,728"/>
<area shape="rect" id="node10" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1159,625,1231,652"/>
<area shape="rect" id="node11" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="1141,448,1248,475"/>
<area shape="rect" id="node12" href="ubifs_2gc_8c.html#a1ff584f97bf8a1783fc9fecde0a87b1e" title="ubifs_gc_start_commit" alt="" coords="526,179,681,205"/>
<area shape="rect" id="node19" href="ubifs_2debug_8h.html#a69534405790cc12f492343243bc539a4" title="dbg_check_lprops" alt="" coords="323,584,449,611"/>
<area shape="rect" id="node24" href="ubifs_2log_8c.html#aabacb52b14ebf81d602c26b57622cd7a" title="ubifs_log_start_commit" alt="" coords="525,1157,682,1184"/>
<area shape="rect" id="node29" href="tnc__commit_8c.html#ae1e7a24e81c4fa022a4065530bd77bff" title="ubifs_tnc_start_commit" alt="" coords="307,1056,465,1083"/>
<area shape="rect" id="node39" href="lpt__commit_8c.html#ad0029b471c7e38ab8a4a1ab961ca25a4" title="ubifs_lpt_start_commit" alt="" coords="309,393,463,420"/>
<area shape="rect" id="node41" href="ubifs_2orphan_8c.html#a4644cfc76e621c7abb3683b063707f4e" title="ubifs_orphan_start\l_commit" alt="" coords="321,787,451,829"/>
<area shape="rect" id="node42" href="lprops_8c.html#a8a4a969b18d269964ff80d11eb94b8ab" title="ubifs_get_lp_stats" alt="" coords="322,853,450,880"/>
<area shape="rect" id="node43" href="tnc__commit_8c.html#a3e11b3b283926c57ea7d7e7aaf6cabe1" title="ubifs_tnc_end_commit" alt="" coords="309,904,463,931"/>
<area shape="rect" id="node44" href="lpt__commit_8c.html#a2e84d4bec8fcf799eeb376d90f220efb" title="ubifs_lpt_end_commit" alt="" coords="311,955,461,981"/>
<area shape="rect" id="node45" href="ubifs_2orphan_8c.html#a85394180871fe6a819b8312c7c01f865" title="ubifs_orphan_end_commit" alt="" coords="299,1005,473,1032"/>
<area shape="rect" id="node46" href="ubifs_2commit_8c.html#a23369147b6e2214867a8a650ad50ebaf" title="dbg_check_old_index" alt="" coords="947,1309,1093,1336"/>
<area shape="rect" id="node47" href="ubifs_2log_8c.html#a68cc48bfb09ca4270d8d3f953441e201" title="ubifs_log_end_commit" alt="" coords="310,1208,462,1235"/>
<area shape="rect" id="node48" href="ubifs_2log_8c.html#a84e11c018b891280acfdb1e3071d5e18" title="ubifs_log_post_commit" alt="" coords="525,752,681,779"/>
<area shape="rect" id="node49" href="ubifs_2gc_8c.html#abd8f539c87c6fbdd3a73195b54dd9995" title="ubifs_gc_end_commit" alt="" coords="311,491,461,517"/>
<area shape="rect" id="node50" href="lpt__commit_8c.html#a0ca6bd7c2db50191b30308925d584e16" title="ubifs_lpt_post_commit" alt="" coords="309,1411,463,1437"/>
<area shape="rect" id="node4" href="misc_8h.html#abe5c86108a05199a899138767ca1f42a" title="ubifs_zn_dirty" alt="" coords="765,853,867,880"/>
<area shape="rect" id="node6" href="ubifs_2io_8c.html#a3e6d29ad192528c05f246cd31a1732fb" title="ubifs_wbuf_sync_nolock" alt="" coords="733,752,899,779"/>
<area shape="rect" id="node7" href="ubifs_2debug_8c.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="979,1005,1061,1032"/>
<area shape="rect" id="node8" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="981,1107,1059,1133"/>
<area shape="rect" id="node9" href="ubifs_2io_8c.html#a02909cfc9d3a0100f549390c7d464632" title="ubifs_leb_write" alt="" coords="965,701,1075,728"/>
<area shape="rect" id="node13" href="misc_8h.html#aa89c2768eb94f129c6afbe47420b44ba" title="ubifs_get_lprops" alt="" coords="757,195,875,221"/>
<area shape="rect" id="node14" href="lprops_8c.html#af4f3f200dc1d36660281ec0282293308" title="ubifs_fast_find_freeable" alt="" coords="736,93,896,120"/>
<area shape="rect" id="node15" href="ubifs_2io_8c.html#ad9d3a62a61d21e1faa60cd6e630c41ac" title="ubifs_leb_unmap" alt="" coords="756,473,876,500"/>
<area shape="rect" id="node16" href="lprops_8c.html#abfc4c6a75b37762f214cbc91f0ebe664" title="ubifs_change_lp" alt="" coords="758,144,874,171"/>
<area shape="rect" id="node17" href="lprops_8c.html#ae7db0b84b9b4c7666f34dd1c6d78b0a0" title="ubifs_fast_find_frdi_idx" alt="" coords="738,43,894,69"/>
<area shape="rect" id="node18" href="misc_8h.html#a6dce2c34ec97d74cf4be59e0201bdb3e" title="ubifs_release_lprops" alt="" coords="745,245,887,272"/>
<area shape="rect" id="node20" href="ubifs_2debug_8h.html#ab66d4ac998d5cd15774f5a22d366e1f1" title="dbg_is_chk_lprops" alt="" coords="751,397,881,424"/>
<area shape="rect" id="node21" href="lpt_8c.html#a34800df1b6052b492ca05c589dfec386" title="ubifs_lpt_scan_nolock" alt="" coords="528,499,679,525"/>
<area shape="rect" id="node22" href="lprops_8c.html#a14844fa99e1b9a5c6519cb82bd423fc5" title="scan_check_cb" alt="" coords="963,651,1077,677"/>
<area shape="rect" id="node23" href="lprops_8c.html#a4d24d720745a25e26d273dc892c703eb" title="dbg_check_cats" alt="" coords="545,549,662,576"/>
<area shape="rect" id="node25" href="ubifs_2log_8c.html#a9946e005124ad49c46176066a55105fa" title="dbg_check_bud_bytes" alt="" coords="740,1208,892,1235"/>
<area shape="rect" id="node26" href="ubifs_2io_8c.html#acfc2ca3ffa8d094855c2e59551f3a767" title="ubifs_prepare_node" alt="" coords="749,1157,883,1184"/>
<area shape="rect" id="node27" href="misc_8h.html#abf53e0ff9d9f9f6fefb9a9efbf709496" title="ubifs_next_log_lnum" alt="" coords="745,803,887,829"/>
<area shape="rect" id="node28" href="ubifs_2log_8c.html#a1c5014480a8dd06adad3de568a191081" title="remove_buds" alt="" coords="766,1005,866,1032"/>
<area shape="rect" id="node30" href="ubifs_2debug_8c.html#a8e749de733b483ca979984b8aa078aa6" title="dbg_check_tnc" alt="" coords="548,853,659,880"/>
<area shape="rect" id="node31" href="tnc__commit_8c.html#a64748c798bfc8c8fd1ee5bedae19a5b3" title="get_znodes_to_commit" alt="" coords="525,1107,682,1133"/>
<area shape="rect" id="node32" href="tnc__commit_8c.html#a82dea2876366b839f177356c01a9c031" title="alloc_idx_lebs" alt="" coords="551,904,655,931"/>
<area shape="rect" id="node33" href="tnc__commit_8c.html#a1f7210689e6f040c0b106db3e447e04b" title="layout_commit" alt="" coords="550,955,657,981"/>
<area shape="rect" id="node34" href="tnc__commit_8c.html#a045e506a5e968ca24069299455ff0abf" title="free_unused_idx_lebs" alt="" coords="742,1284,890,1311"/>
<area shape="rect" id="node35" href="tnc_8c.html#a01e38c99f12ee3c060c9214d14ec62f3" title="destroy_old_idx" alt="" coords="547,1005,660,1032"/>
<area shape="rect" id="node36" href="find_8c.html#abb183b65aeed0bc4e18681aec0ffdb5b" title="ubifs_save_dirty_idx\l_lnums" alt="" coords="533,230,674,271"/>
<area shape="rect" id="node37" href="budget_8c.html#a6109e1d36eaa593c345944d0d4b30745" title="ubifs_calc_min_idx_lebs" alt="" coords="521,1056,685,1083"/>
<area shape="rect" id="node38" href="tnc__commit_8c.html#aabbfd5925b308189c641e1570a2a19f7" title="free_idx_lebs" alt="" coords="554,1309,653,1336"/>
<area shape="rect" id="node40" href="lpt__commit_8c.html#ab2f0c34c5385c6b4af6f326fac750a70" title="dbg_chk_lpt_free_spc" alt="" coords="529,347,678,373"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2commit_8c_a91c88ecee0c3d4a55bbe6669a0caa521_icgraph.png" border="0" usemap="#ubifs_2commit_8c_a91c88ecee0c3d4a55bbe6669a0caa521_icgraph" alt=""/></div>
<map name="ubifs_2commit_8c_a91c88ecee0c3d4a55bbe6669a0caa521_icgraph" id="ubifs_2commit_8c_a91c88ecee0c3d4a55bbe6669a0caa521_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#ad1d2abb94e9ca171f253ba64fdbf7aa6" title="ubifs_bg_thread" alt="" coords="164,31,279,57"/>
<area shape="rect" id="node3" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="343,5,436,32"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="327,56,452,83"/>
<area shape="rect" id="node4" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="507,5,616,32"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="671,5,764,32"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="500,56,623,83"/>
</map>
</div>

</div>
</div>
<a id="ad1d2abb94e9ca171f253ba64fdbf7aa6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1d2abb94e9ca171f253ba64fdbf7aa6">&#9670;&nbsp;</a></span>ubifs_bg_thread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ubifs_bg_thread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_bg_thread - UBIFS background thread function. : points to the file-system description object</p>
<p>This function implements various file-system background activities: o when a write-buffer timer expires it synchronizes the appropriate write-buffer; o when the journal is about to be full, it starts in-advance commit.</p>
<p>Note, other stuff like background garbage collection may be added here in future. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2commit_8c_ad1d2abb94e9ca171f253ba64fdbf7aa6_cgraph.png" border="0" usemap="#ubifs_2commit_8c_ad1d2abb94e9ca171f253ba64fdbf7aa6_cgraph" alt=""/></div>
<map name="ubifs_2commit_8c_ad1d2abb94e9ca171f253ba64fdbf7aa6_cgraph" id="ubifs_2commit_8c_ad1d2abb94e9ca171f253ba64fdbf7aa6_cgraph">
<area shape="rect" id="node2" href="ubifs_2misc_8c.html#a49c185988382ac9b2f28935dd44a0441" title="ubifs_msg" alt="" coords="931,312,1013,339"/>
<area shape="rect" id="node3" href="ubifs_2io_8c.html#a7aaa5d9c13d5a1ec099306e70446376a" title="ubifs_bg_wbufs_sync" alt="" coords="689,59,837,85"/>
<area shape="rect" id="node13" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="1333,275,1439,301"/>
<area shape="rect" id="node14" href="ubifs_2commit_8c.html#a91c88ecee0c3d4a55bbe6669a0caa521" title="run_bg_commit" alt="" coords="168,355,279,381"/>
<area shape="rect" id="node4" href="ubifs_2io_8c.html#a3e6d29ad192528c05f246cd31a1732fb" title="ubifs_wbuf_sync_nolock" alt="" coords="889,464,1055,491"/>
<area shape="rect" id="node5" href="ubifs_2io_8c.html#aeef91391de4e0f46023ab0afac3a2335" title="cancel_wbuf_timer_nolock" alt="" coords="1103,312,1279,339"/>
<area shape="rect" id="node12" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1350,895,1422,921"/>
<area shape="rect" id="node6" href="ubifs_2debug_8c.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="1150,616,1231,643"/>
<area shape="rect" id="node7" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="1151,717,1230,744"/>
<area shape="rect" id="node8" href="ubifs_2io_8c.html#a02909cfc9d3a0100f549390c7d464632" title="ubifs_leb_write" alt="" coords="1136,363,1245,389"/>
<area shape="rect" id="node9" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="1327,604,1445,631"/>
<area shape="rect" id="node10" href="ubifs_2debug_8c.html#af929a6951e19c79f1235738386005c06" title="dbg_leb_write" alt="" coords="1335,351,1437,377"/>
<area shape="rect" id="node11" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="1493,313,1579,340"/>
<area shape="rect" id="node15" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="327,591,413,617"/>
<area shape="rect" id="node16" href="ubifs_2commit_8c.html#a349da7e934725810c922b20daec868ae" title="nothing_to_commit" alt="" coords="483,667,615,693"/>
<area shape="rect" id="node18" href="misc_8h.html#af8fd16c04f42f2a56d86f0f7a4924ecc" title="ubifs_wbuf_sync" alt="" coords="703,717,823,744"/>
<area shape="rect" id="node19" href="ubifs_2gc_8c.html#a1ff584f97bf8a1783fc9fecde0a87b1e" title="ubifs_gc_start_commit" alt="" coords="685,1072,840,1099"/>
<area shape="rect" id="node26" href="ubifs_2debug_8h.html#a69534405790cc12f492343243bc539a4" title="dbg_check_lprops" alt="" coords="485,1319,612,1345"/>
<area shape="rect" id="node31" href="ubifs_2log_8c.html#aabacb52b14ebf81d602c26b57622cd7a" title="ubifs_log_start_commit" alt="" coords="684,768,841,795"/>
<area shape="rect" id="node36" href="tnc__commit_8c.html#ae1e7a24e81c4fa022a4065530bd77bff" title="ubifs_tnc_start_commit" alt="" coords="469,616,628,643"/>
<area shape="rect" id="node40" href="lpt__commit_8c.html#ad0029b471c7e38ab8a4a1ab961ca25a4" title="ubifs_lpt_start_commit" alt="" coords="471,144,626,171"/>
<area shape="rect" id="node41" href="ubifs_2orphan_8c.html#a4644cfc76e621c7abb3683b063707f4e" title="ubifs_orphan_start\l_commit" alt="" coords="484,195,613,237"/>
<area shape="rect" id="node42" href="lprops_8c.html#a8a4a969b18d269964ff80d11eb94b8ab" title="ubifs_get_lp_stats" alt="" coords="485,363,613,389"/>
<area shape="rect" id="node43" href="tnc__commit_8c.html#a3e11b3b283926c57ea7d7e7aaf6cabe1" title="ubifs_tnc_end_commit" alt="" coords="472,413,625,440"/>
<area shape="rect" id="node44" href="lpt__commit_8c.html#a2e84d4bec8fcf799eeb376d90f220efb" title="ubifs_lpt_end_commit" alt="" coords="474,464,623,491"/>
<area shape="rect" id="node45" href="ubifs_2orphan_8c.html#a85394180871fe6a819b8312c7c01f865" title="ubifs_orphan_end_commit" alt="" coords="461,515,636,541"/>
<area shape="rect" id="node46" href="ubifs_2commit_8c.html#a23369147b6e2214867a8a650ad50ebaf" title="dbg_check_old_index" alt="" coords="1117,971,1264,997"/>
<area shape="rect" id="node47" href="ubifs_2log_8c.html#a68cc48bfb09ca4270d8d3f953441e201" title="ubifs_log_end_commit" alt="" coords="473,920,625,947"/>
<area shape="rect" id="node48" href="ubifs_2log_8c.html#a84e11c018b891280acfdb1e3071d5e18" title="ubifs_log_post_commit" alt="" coords="685,869,841,896"/>
<area shape="rect" id="node49" href="ubifs_2gc_8c.html#abd8f539c87c6fbdd3a73195b54dd9995" title="ubifs_gc_end_commit" alt="" coords="474,819,623,845"/>
<area shape="rect" id="node50" href="lpt__commit_8c.html#a0ca6bd7c2db50191b30308925d584e16" title="ubifs_lpt_post_commit" alt="" coords="472,565,625,592"/>
<area shape="rect" id="node17" href="misc_8h.html#abe5c86108a05199a899138767ca1f42a" title="ubifs_zn_dirty" alt="" coords="921,515,1023,541"/>
<area shape="rect" id="node20" href="misc_8h.html#aa89c2768eb94f129c6afbe47420b44ba" title="ubifs_get_lprops" alt="" coords="913,1123,1031,1149"/>
<area shape="rect" id="node21" href="lprops_8c.html#af4f3f200dc1d36660281ec0282293308" title="ubifs_fast_find_freeable" alt="" coords="892,1173,1052,1200"/>
<area shape="rect" id="node22" href="ubifs_2io_8c.html#ad9d3a62a61d21e1faa60cd6e630c41ac" title="ubifs_leb_unmap" alt="" coords="912,869,1032,896"/>
<area shape="rect" id="node23" href="lprops_8c.html#abfc4c6a75b37762f214cbc91f0ebe664" title="ubifs_change_lp" alt="" coords="914,1224,1030,1251"/>
<area shape="rect" id="node24" href="lprops_8c.html#ae7db0b84b9b4c7666f34dd1c6d78b0a0" title="ubifs_fast_find_frdi_idx" alt="" coords="894,1021,1050,1048"/>
<area shape="rect" id="node25" href="misc_8h.html#a6dce2c34ec97d74cf4be59e0201bdb3e" title="ubifs_release_lprops" alt="" coords="901,1072,1043,1099"/>
<area shape="rect" id="node27" href="ubifs_2debug_8h.html#ab66d4ac998d5cd15774f5a22d366e1f1" title="dbg_is_chk_lprops" alt="" coords="907,1395,1037,1421"/>
<area shape="rect" id="node28" href="lpt_8c.html#a34800df1b6052b492ca05c589dfec386" title="ubifs_lpt_scan_nolock" alt="" coords="687,1319,838,1345"/>
<area shape="rect" id="node29" href="lprops_8c.html#a14844fa99e1b9a5c6519cb82bd423fc5" title="scan_check_cb" alt="" coords="1134,1148,1247,1175"/>
<area shape="rect" id="node30" href="lprops_8c.html#a4d24d720745a25e26d273dc892c703eb" title="dbg_check_cats" alt="" coords="704,1369,821,1396"/>
<area shape="rect" id="node32" href="ubifs_2log_8c.html#a9946e005124ad49c46176066a55105fa" title="dbg_check_bud_bytes" alt="" coords="896,920,1048,947"/>
<area shape="rect" id="node33" href="ubifs_2io_8c.html#acfc2ca3ffa8d094855c2e59551f3a767" title="ubifs_prepare_node" alt="" coords="905,768,1039,795"/>
<area shape="rect" id="node34" href="misc_8h.html#abf53e0ff9d9f9f6fefb9a9efbf709496" title="ubifs_next_log_lnum" alt="" coords="901,819,1043,845"/>
<area shape="rect" id="node35" href="ubifs_2log_8c.html#a1c5014480a8dd06adad3de568a191081" title="remove_buds" alt="" coords="922,616,1022,643"/>
<area shape="rect" id="node37" href="ubifs_2debug_8c.html#a8e749de733b483ca979984b8aa078aa6" title="dbg_check_tnc" alt="" coords="707,515,818,541"/>
<area shape="rect" id="node38" href="tnc__commit_8c.html#a64748c798bfc8c8fd1ee5bedae19a5b3" title="get_znodes_to_commit" alt="" coords="684,464,841,491"/>
<area shape="rect" id="node39" href="tnc__commit_8c.html#a82dea2876366b839f177356c01a9c031" title="alloc_idx_lebs" alt="" coords="711,616,815,643"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2commit_8c_ad1d2abb94e9ca171f253ba64fdbf7aa6_icgraph.png" border="0" usemap="#ubifs_2commit_8c_ad1d2abb94e9ca171f253ba64fdbf7aa6_icgraph" alt=""/></div>
<map name="ubifs_2commit_8c_ad1d2abb94e9ca171f253ba64fdbf7aa6_icgraph" id="ubifs_2commit_8c_ad1d2abb94e9ca171f253ba64fdbf7aa6_icgraph">
<area shape="rect" id="node2" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="184,5,277,32"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="168,56,293,83"/>
<area shape="rect" id="node3" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="348,5,457,32"/>
<area shape="rect" id="node4" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="512,5,605,32"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="341,56,464,83"/>
</map>
</div>

</div>
</div>
<a id="a6e9dcff4b0f768c14f6f8448f4b1343e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e9dcff4b0f768c14f6f8448f4b1343e">&#9670;&nbsp;</a></span>ubifs_commit_required()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ubifs_commit_required </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_commit_required - set commit state to "required". <code></code>: UBIFS file-system description object</p>
<p>This function is called if a commit is required but cannot be done from the calling function, so it is just flagged instead. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2commit_8c_a6e9dcff4b0f768c14f6f8448f4b1343e_cgraph.png" border="0" usemap="#ubifs_2commit_8c_a6e9dcff4b0f768c14f6f8448f4b1343e_cgraph" alt=""/></div>
<map name="ubifs_2commit_8c_a6e9dcff4b0f768c14f6f8448f4b1343e_cgraph" id="ubifs_2commit_8c_a6e9dcff4b0f768c14f6f8448f4b1343e_cgraph">
<area shape="rect" id="node2" href="ubifs_2debug_8c.html#a615a670f26d4407b52175ce5f3faf594" title="dbg_cstate" alt="" coords="207,5,293,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2commit_8c_a6e9dcff4b0f768c14f6f8448f4b1343e_icgraph.png" border="0" usemap="#ubifs_2commit_8c_a6e9dcff4b0f768c14f6f8448f4b1343e_icgraph" alt=""/></div>
<map name="ubifs_2commit_8c_a6e9dcff4b0f768c14f6f8448f4b1343e_icgraph" id="ubifs_2commit_8c_a6e9dcff4b0f768c14f6f8448f4b1343e_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#a6aba86bcae816613915e10318fdf6b83" title="ubifs_garbage_collect" alt="" coords="935,404,1083,431"/>
<area shape="rect" id="node46" href="ubifs_8h.html#a8b30a0dc99186d8f07ee2f47693f11b7" title="ubifs_add_bud_to_log" alt="" coords="207,353,355,380"/>
<area shape="rect" id="node3" href="ubifs_2journal_8c.html#a920088cf70f88cbb1142294e99e688d6" title="reserve_space" alt="" coords="1136,303,1243,329"/>
<area shape="rect" id="node36" href="budget_8c.html#a5ccd81c906fb851139ba3da031d26f12" title="run_gc" alt="" coords="1159,449,1220,476"/>
<area shape="rect" id="node4" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="1291,259,1416,285"/>
<area shape="rect" id="node5" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="1482,487,1598,513"/>
<area shape="rect" id="node19" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="1471,157,1609,184"/>
<area shape="rect" id="node24" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="1469,56,1611,83"/>
<area shape="rect" id="node28" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="1477,107,1603,133"/>
<area shape="rect" id="node30" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="1480,259,1600,285"/>
<area shape="rect" id="node31" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="1478,892,1602,919"/>
<area shape="rect" id="node32" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="1467,1171,1613,1197"/>
<area shape="rect" id="node34" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="1464,208,1616,235"/>
<area shape="rect" id="node6" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1699,360,1789,387"/>
<area shape="rect" id="node8" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1697,309,1791,336"/>
<area shape="rect" id="node9" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1703,461,1785,488"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1705,563,1783,589"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1699,411,1789,437"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1701,613,1787,640"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1699,664,1789,691"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1696,715,1792,741"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1693,512,1795,539"/>
<area shape="rect" id="node7" href="ubifs_2xattr_8c.html#a2c0f8e28d408b8e89b4ce7d6047af912" title="ubifs_xattr_set" alt="" coords="1899,284,2007,311"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="1905,411,2001,437"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1910,461,1997,488"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="2083,284,2183,311"/>
<area shape="rect" id="node20" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="1695,157,1793,184"/>
<area shape="rect" id="node21" href="ubifs_2file_8c.html#a2ad22c013a0dccfd9f49e114ed89dfa6" title="ubifs_writepage" alt="" coords="1897,157,2010,184"/>
<area shape="rect" id="node22" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1903,943,2003,969"/>
<area shape="rect" id="node23" href="ubifs_8h.html#aaebf1c80e366c0f2702f58b91d7a9d38" title="ubifs_setattr" alt="" coords="2085,1056,2180,1083"/>
<area shape="rect" id="node25" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="1683,5,1805,32"/>
<area shape="rect" id="node26" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="1669,56,1819,83"/>
<area shape="rect" id="node27" href="ubifs_2super_8c.html#a063c51fb658c01f325e4a0744d2f28ce" title="ubifs_evict_inode" alt="" coords="1892,56,2015,83"/>
<area shape="rect" id="node29" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1900,107,2007,133"/>
<area shape="rect" id="node33" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="1695,1272,1793,1299"/>
<area shape="rect" id="node35" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="1695,208,1793,235"/>
<area shape="rect" id="node37" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="1291,627,1416,653"/>
<area shape="rect" id="node38" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="1471,715,1609,741"/>
<area shape="rect" id="node39" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="1683,816,1805,843"/>
<area shape="rect" id="node40" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="1687,867,1801,893"/>
<area shape="rect" id="node41" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="1913,1196,1993,1223"/>
<area shape="rect" id="node42" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="1664,1069,1824,1096"/>
<area shape="rect" id="node43" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="1898,1032,2009,1059"/>
<area shape="rect" id="node44" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="1872,1095,2035,1121"/>
<area shape="rect" id="node45" href="ubifs_2ioctl_8c.html#a06251cc4602342e44b5ed0a1b39f7e60" title="setflags" alt="" coords="1710,1120,1778,1147"/>
<area shape="rect" id="node47" href="ubifs_2gc_8c.html#ac8af282d626a91c08e5e158b8e55ec20" title="switch_gc_head" alt="" coords="403,353,519,380"/>
<area shape="rect" id="node48" href="ubifs_2gc_8c.html#ad0088bd16e6b85c2c28124046ab839d7" title="move_nodes" alt="" coords="567,353,663,380"/>
<area shape="rect" id="node49" href="ubifs_8h.html#a29dd378f4b22d45580bff155cbb275cd" title="ubifs_garbage_collect_leb" alt="" coords="711,353,883,380"/>
<area shape="rect" id="node50" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="931,353,1088,380"/>
</map>
</div>

</div>
</div>
<a id="a18183f6ca9e5e865909aa32d50f4be4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18183f6ca9e5e865909aa32d50f4be4b">&#9670;&nbsp;</a></span>ubifs_gc_should_commit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ubifs_gc_should_commit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_gc_should_commit - determine if it is time for GC to run commit. <code></code>: UBIFS file-system description object</p>
<p>This function is called by garbage collection to determine if commit should be run. If commit state is , which means that the journal is full enough to start commit, this function returns true. It is not absolutely necessary to commit yet, but it feels like this should be better then to keep doing GC. This function returns %1 if GC has to initiate commit and %0 if not. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2commit_8c_a18183f6ca9e5e865909aa32d50f4be4b_icgraph.png" border="0" usemap="#ubifs_2commit_8c_a18183f6ca9e5e865909aa32d50f4be4b_icgraph" alt=""/></div>
<map name="ubifs_2commit_8c_a18183f6ca9e5e865909aa32d50f4be4b_icgraph" id="ubifs_2commit_8c_a18183f6ca9e5e865909aa32d50f4be4b_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#a6aba86bcae816613915e10318fdf6b83" title="ubifs_garbage_collect" alt="" coords="220,399,368,425"/>
<area shape="rect" id="node3" href="ubifs_2journal_8c.html#a920088cf70f88cbb1142294e99e688d6" title="reserve_space" alt="" coords="416,316,523,343"/>
<area shape="rect" id="node38" href="budget_8c.html#a5ccd81c906fb851139ba3da031d26f12" title="run_gc" alt="" coords="439,424,500,451"/>
<area shape="rect" id="node4" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="571,259,696,285"/>
<area shape="rect" id="node5" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="762,487,878,513"/>
<area shape="rect" id="node21" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="751,157,889,184"/>
<area shape="rect" id="node26" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="749,56,891,83"/>
<area shape="rect" id="node30" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="757,107,883,133"/>
<area shape="rect" id="node32" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="760,259,880,285"/>
<area shape="rect" id="node33" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="758,208,882,235"/>
<area shape="rect" id="node34" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="747,1095,893,1121"/>
<area shape="rect" id="node36" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="744,968,896,995"/>
<area shape="rect" id="node6" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="979,664,1069,691"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="977,715,1071,741"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="983,512,1065,539"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="985,309,1063,336"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="979,411,1069,437"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="981,563,1067,589"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="979,360,1069,387"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="976,461,1072,488"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="973,613,1075,640"/>
<area shape="rect" id="node7" href="ubifs_2xattr_8c.html#a2c0f8e28d408b8e89b4ce7d6047af912" title="ubifs_xattr_set" alt="" coords="1179,900,1287,927"/>
<area shape="rect" id="node8" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1363,951,1496,977"/>
<area shape="rect" id="node9" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="1544,925,1617,952"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="1185,461,1281,488"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1190,512,1277,539"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="1379,405,1479,432"/>
<area shape="rect" id="node22" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="975,157,1073,184"/>
<area shape="rect" id="node23" href="ubifs_2file_8c.html#a2ad22c013a0dccfd9f49e114ed89dfa6" title="ubifs_writepage" alt="" coords="1177,157,1290,184"/>
<area shape="rect" id="node24" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1183,309,1283,336"/>
<area shape="rect" id="node25" href="ubifs_8h.html#aaebf1c80e366c0f2702f58b91d7a9d38" title="ubifs_setattr" alt="" coords="1382,528,1477,555"/>
<area shape="rect" id="node27" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="963,56,1085,83"/>
<area shape="rect" id="node28" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="949,5,1099,32"/>
<area shape="rect" id="node29" href="ubifs_2super_8c.html#a063c51fb658c01f325e4a0744d2f28ce" title="ubifs_evict_inode" alt="" coords="1172,5,1295,32"/>
<area shape="rect" id="node31" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1180,107,1287,133"/>
<area shape="rect" id="node35" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="975,1171,1073,1197"/>
<area shape="rect" id="node37" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="975,1120,1073,1147"/>
<area shape="rect" id="node39" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="571,537,696,564"/>
<area shape="rect" id="node40" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="751,765,889,792"/>
<area shape="rect" id="node41" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="963,968,1085,995"/>
<area shape="rect" id="node43" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="967,917,1081,944"/>
<area shape="rect" id="node44" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="1193,671,1273,697"/>
<area shape="rect" id="node45" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="944,1221,1104,1248"/>
<area shape="rect" id="node46" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="1178,1203,1289,1229"/>
<area shape="rect" id="node48" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="1152,1260,1315,1287"/>
<area shape="rect" id="node49" href="ubifs_2ioctl_8c.html#a06251cc4602342e44b5ed0a1b39f7e60" title="setflags" alt="" coords="990,1019,1058,1045"/>
<area shape="rect" id="node42" href="ubifs_2file_8c.html#a63bbd02975453f3f42af79e561948912" title="ubifs_write_begin" alt="" coords="1172,951,1295,977"/>
<area shape="rect" id="node47" href="ubifs_2file_8c.html#a8cca742dfff2189dce5332cb5f013793" title="ubifs_write_iter" alt="" coords="1374,1203,1485,1229"/>
<area shape="rect" id="node50" href="ubifs_8h.html#a9831447969acb35c927f7530bc47158e" title="ubifs_ioctl" alt="" coords="1193,1025,1274,1052"/>
</map>
</div>

</div>
</div>
<a id="a6c27328fd39184ba2e1bdfa1970275e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c27328fd39184ba2e1bdfa1970275e7">&#9670;&nbsp;</a></span>ubifs_request_bg_commit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ubifs_request_bg_commit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_request_bg_commit - notify the background thread to do a commit. <code></code>: UBIFS file-system description object</p>
<p>This function is called if the journal is full enough to make a commit worthwhile, so background thread is kicked to start it. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2commit_8c_a6c27328fd39184ba2e1bdfa1970275e7_cgraph.png" border="0" usemap="#ubifs_2commit_8c_a6c27328fd39184ba2e1bdfa1970275e7_cgraph" alt=""/></div>
<map name="ubifs_2commit_8c_a6c27328fd39184ba2e1bdfa1970275e7_cgraph" id="ubifs_2commit_8c_a6c27328fd39184ba2e1bdfa1970275e7_cgraph">
<area shape="rect" id="node2" href="ubifs_2debug_8c.html#a615a670f26d4407b52175ce5f3faf594" title="dbg_cstate" alt="" coords="248,5,335,32"/>
<area shape="rect" id="node3" href="misc_8h.html#adb074744f746423579a917e286726a65" title="ubifs_wake_up_bgt" alt="" coords="224,56,359,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2commit_8c_a6c27328fd39184ba2e1bdfa1970275e7_icgraph.png" border="0" usemap="#ubifs_2commit_8c_a6c27328fd39184ba2e1bdfa1970275e7_icgraph" alt=""/></div>
<map name="ubifs_2commit_8c_a6c27328fd39184ba2e1bdfa1970275e7_icgraph" id="ubifs_2commit_8c_a6c27328fd39184ba2e1bdfa1970275e7_icgraph">
<area shape="rect" id="node2" href="ubifs_2shrinker_8c.html#a411ff3efed86e8bb1341d32ebc2f3ceb" title="kick_a_thread" alt="" coords="247,271,349,297"/>
<area shape="rect" id="node4" href="ubifs_8h.html#a8b30a0dc99186d8f07ee2f47693f11b7" title="ubifs_add_bud_to_log" alt="" coords="224,321,372,348"/>
<area shape="rect" id="node3" href="ubifs_8h.html#a148b76e3e941071fe7395e70793f9996" title="ubifs_shrink_scan" alt="" coords="420,271,547,297"/>
<area shape="rect" id="node5" href="ubifs_2gc_8c.html#ac8af282d626a91c08e5e158b8e55ec20" title="switch_gc_head" alt="" coords="425,372,541,399"/>
<area shape="rect" id="node9" href="ubifs_2journal_8c.html#a920088cf70f88cbb1142294e99e688d6" title="reserve_space" alt="" coords="1155,321,1261,348"/>
<area shape="rect" id="node6" href="ubifs_2gc_8c.html#ad0088bd16e6b85c2c28124046ab839d7" title="move_nodes" alt="" coords="595,372,691,399"/>
<area shape="rect" id="node7" href="ubifs_8h.html#a29dd378f4b22d45580bff155cbb275cd" title="ubifs_garbage_collect_leb" alt="" coords="739,372,911,399"/>
<area shape="rect" id="node8" href="ubifs_8h.html#a6aba86bcae816613915e10318fdf6b83" title="ubifs_garbage_collect" alt="" coords="959,372,1107,399"/>
<area shape="rect" id="node45" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="1309,765,1467,792"/>
<area shape="rect" id="node43" href="budget_8c.html#a5ccd81c906fb851139ba3da031d26f12" title="run_gc" alt="" coords="1177,372,1239,399"/>
<area shape="rect" id="node10" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="1325,259,1451,285"/>
<area shape="rect" id="node11" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="1533,537,1649,564"/>
<area shape="rect" id="node26" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="1522,19,1659,45"/>
<area shape="rect" id="node31" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="1519,157,1662,184"/>
<area shape="rect" id="node35" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="1527,791,1654,817"/>
<area shape="rect" id="node37" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="1531,335,1651,361"/>
<area shape="rect" id="node38" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="1529,81,1653,108"/>
<area shape="rect" id="node39" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="1518,208,1663,235"/>
<area shape="rect" id="node41" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="1515,259,1667,285"/>
<area shape="rect" id="node12" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1745,309,1835,336"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1743,664,1837,691"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1749,765,1831,792"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1751,461,1829,488"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1745,512,1835,539"/>
<area shape="rect" id="node22" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1747,411,1833,437"/>
<area shape="rect" id="node23" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1745,563,1835,589"/>
<area shape="rect" id="node24" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1742,613,1838,640"/>
<area shape="rect" id="node25" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1739,715,1841,741"/>
<area shape="rect" id="node13" href="ubifs_2xattr_8c.html#a2c0f8e28d408b8e89b4ce7d6047af912" title="ubifs_xattr_set" alt="" coords="1921,297,2029,324"/>
<area shape="rect" id="node14" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="2084,297,2217,324"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="1927,765,2023,792"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1931,715,2018,741"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="2101,791,2201,817"/>
<area shape="rect" id="node27" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="1741,5,1839,32"/>
<area shape="rect" id="node28" href="ubifs_2file_8c.html#a2ad22c013a0dccfd9f49e114ed89dfa6" title="ubifs_writepage" alt="" coords="1918,5,2031,32"/>
<area shape="rect" id="node29" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1925,56,2025,83"/>
<area shape="rect" id="node30" href="ubifs_8h.html#aaebf1c80e366c0f2702f58b91d7a9d38" title="ubifs_setattr" alt="" coords="2103,56,2198,83"/>
<area shape="rect" id="node32" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="1729,107,1851,133"/>
<area shape="rect" id="node33" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="1715,157,1865,184"/>
<area shape="rect" id="node34" href="ubifs_2super_8c.html#a063c51fb658c01f325e4a0744d2f28ce" title="ubifs_evict_inode" alt="" coords="1913,157,2036,184"/>
<area shape="rect" id="node36" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1921,867,2028,893"/>
<area shape="rect" id="node40" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="1925,221,2024,248"/>
<area shape="rect" id="node42" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="1741,259,1839,285"/>
<area shape="rect" id="node44" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="1325,372,1451,399"/>
<area shape="rect" id="node46" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="1544,867,1637,893"/>
<area shape="rect" id="node48" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="1528,968,1653,995"/>
<area shape="rect" id="node50" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="1527,715,1654,741"/>
<area shape="rect" id="node47" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1735,917,1845,944"/>
<area shape="rect" id="node49" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="1729,968,1851,995"/>
</map>
</div>

</div>
</div>
<a id="ae4c760f55879f81abc758f058e481834"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4c760f55879f81abc758f058e481834">&#9670;&nbsp;</a></span>ubifs_run_commit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ubifs_run_commit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_run_commit - run or wait for commit. <code></code>: UBIFS file-system description object</p>
<p>This function runs commit and returns zero in case of success and a negative error code in case of failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2commit_8c_ae4c760f55879f81abc758f058e481834_cgraph.png" border="0" usemap="#ubifs_2commit_8c_ae4c760f55879f81abc758f058e481834_cgraph" alt=""/></div>
<map name="ubifs_2commit_8c_ae4c760f55879f81abc758f058e481834_cgraph" id="ubifs_2commit_8c_ae4c760f55879f81abc758f058e481834_cgraph">
<area shape="rect" id="node2" href="ubifs_2commit_8c.html#a8066477fd4d182a562575fec9c1460f9" title="wait_for_commit" alt="" coords="179,740,297,767"/>
<area shape="rect" id="node3" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="195,791,281,817"/>
<area shape="rect" id="node4" href="ubifs_2commit_8c.html#a349da7e934725810c922b20daec868ae" title="nothing_to_commit" alt="" coords="367,512,499,539"/>
<area shape="rect" id="node6" href="misc_8h.html#af8fd16c04f42f2a56d86f0f7a4924ecc" title="ubifs_wbuf_sync" alt="" coords="590,904,710,931"/>
<area shape="rect" id="node11" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1205,955,1277,981"/>
<area shape="rect" id="node12" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="1188,296,1295,323"/>
<area shape="rect" id="node13" href="ubifs_2gc_8c.html#a1ff584f97bf8a1783fc9fecde0a87b1e" title="ubifs_gc_start_commit" alt="" coords="573,179,727,205"/>
<area shape="rect" id="node20" href="ubifs_2debug_8h.html#a69534405790cc12f492343243bc539a4" title="dbg_check_lprops" alt="" coords="369,1052,496,1079"/>
<area shape="rect" id="node25" href="ubifs_2log_8c.html#aabacb52b14ebf81d602c26b57622cd7a" title="ubifs_log_start_commit" alt="" coords="571,397,729,424"/>
<area shape="rect" id="node30" href="tnc__commit_8c.html#ae1e7a24e81c4fa022a4065530bd77bff" title="ubifs_tnc_start_commit" alt="" coords="353,631,512,657"/>
<area shape="rect" id="node40" href="lpt__commit_8c.html#ad0029b471c7e38ab8a4a1ab961ca25a4" title="ubifs_lpt_start_commit" alt="" coords="355,732,510,759"/>
<area shape="rect" id="node41" href="ubifs_2orphan_8c.html#a4644cfc76e621c7abb3683b063707f4e" title="ubifs_orphan_start\l_commit" alt="" coords="368,783,497,825"/>
<area shape="rect" id="node42" href="lprops_8c.html#a8a4a969b18d269964ff80d11eb94b8ab" title="ubifs_get_lp_stats" alt="" coords="369,849,497,876"/>
<area shape="rect" id="node43" href="tnc__commit_8c.html#a3e11b3b283926c57ea7d7e7aaf6cabe1" title="ubifs_tnc_end_commit" alt="" coords="356,900,509,927"/>
<area shape="rect" id="node44" href="lpt__commit_8c.html#a2e84d4bec8fcf799eeb376d90f220efb" title="ubifs_lpt_end_commit" alt="" coords="358,951,507,977"/>
<area shape="rect" id="node45" href="ubifs_2orphan_8c.html#a85394180871fe6a819b8312c7c01f865" title="ubifs_orphan_end_commit" alt="" coords="345,1001,520,1028"/>
<area shape="rect" id="node46" href="ubifs_2commit_8c.html#a23369147b6e2214867a8a650ad50ebaf" title="dbg_check_old_index" alt="" coords="993,1208,1140,1235"/>
<area shape="rect" id="node47" href="ubifs_2log_8c.html#a68cc48bfb09ca4270d8d3f953441e201" title="ubifs_log_end_commit" alt="" coords="357,1153,509,1180"/>
<area shape="rect" id="node48" href="ubifs_2log_8c.html#a84e11c018b891280acfdb1e3071d5e18" title="ubifs_log_post_commit" alt="" coords="572,347,728,373"/>
<area shape="rect" id="node49" href="ubifs_2gc_8c.html#abd8f539c87c6fbdd3a73195b54dd9995" title="ubifs_gc_end_commit" alt="" coords="358,313,507,340"/>
<area shape="rect" id="node50" href="lpt__commit_8c.html#a0ca6bd7c2db50191b30308925d584e16" title="ubifs_lpt_post_commit" alt="" coords="356,1360,509,1387"/>
<area shape="rect" id="node5" href="misc_8h.html#abe5c86108a05199a899138767ca1f42a" title="ubifs_zn_dirty" alt="" coords="811,651,914,677"/>
<area shape="rect" id="node7" href="ubifs_2io_8c.html#a3e6d29ad192528c05f246cd31a1732fb" title="ubifs_wbuf_sync_nolock" alt="" coords="780,803,945,829"/>
<area shape="rect" id="node8" href="ubifs_2debug_8c.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="1026,499,1107,525"/>
<area shape="rect" id="node9" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="1027,600,1106,627"/>
<area shape="rect" id="node10" href="ubifs_2io_8c.html#a02909cfc9d3a0100f549390c7d464632" title="ubifs_leb_write" alt="" coords="1012,423,1121,449"/>
<area shape="rect" id="node14" href="misc_8h.html#aa89c2768eb94f129c6afbe47420b44ba" title="ubifs_get_lprops" alt="" coords="804,245,921,272"/>
<area shape="rect" id="node15" href="lprops_8c.html#af4f3f200dc1d36660281ec0282293308" title="ubifs_fast_find_freeable" alt="" coords="783,43,943,69"/>
<area shape="rect" id="node16" href="ubifs_2io_8c.html#ad9d3a62a61d21e1faa60cd6e630c41ac" title="ubifs_leb_unmap" alt="" coords="803,296,923,323"/>
<area shape="rect" id="node17" href="lprops_8c.html#abfc4c6a75b37762f214cbc91f0ebe664" title="ubifs_change_lp" alt="" coords="805,93,921,120"/>
<area shape="rect" id="node18" href="lprops_8c.html#ae7db0b84b9b4c7666f34dd1c6d78b0a0" title="ubifs_fast_find_frdi_idx" alt="" coords="785,144,941,171"/>
<area shape="rect" id="node19" href="misc_8h.html#a6dce2c34ec97d74cf4be59e0201bdb3e" title="ubifs_release_lprops" alt="" coords="792,195,933,221"/>
<area shape="rect" id="node21" href="ubifs_2debug_8h.html#ab66d4ac998d5cd15774f5a22d366e1f1" title="dbg_is_chk_lprops" alt="" coords="797,1056,928,1083"/>
<area shape="rect" id="node22" href="lpt_8c.html#a34800df1b6052b492ca05c589dfec386" title="ubifs_lpt_scan_nolock" alt="" coords="575,1157,725,1184"/>
<area shape="rect" id="node23" href="lprops_8c.html#a14844fa99e1b9a5c6519cb82bd423fc5" title="scan_check_cb" alt="" coords="1010,955,1123,981"/>
<area shape="rect" id="node24" href="lprops_8c.html#a4d24d720745a25e26d273dc892c703eb" title="dbg_check_cats" alt="" coords="591,1005,709,1032"/>
<area shape="rect" id="node26" href="ubifs_2log_8c.html#a9946e005124ad49c46176066a55105fa" title="dbg_check_bud_bytes" alt="" coords="787,904,939,931"/>
<area shape="rect" id="node27" href="ubifs_2io_8c.html#acfc2ca3ffa8d094855c2e59551f3a767" title="ubifs_prepare_node" alt="" coords="795,600,930,627"/>
<area shape="rect" id="node28" href="misc_8h.html#abf53e0ff9d9f9f6fefb9a9efbf709496" title="ubifs_next_log_lnum" alt="" coords="792,347,933,373"/>
<area shape="rect" id="node29" href="ubifs_2log_8c.html#a1c5014480a8dd06adad3de568a191081" title="remove_buds" alt="" coords="813,499,913,525"/>
<area shape="rect" id="node31" href="ubifs_2debug_8c.html#a8e749de733b483ca979984b8aa078aa6" title="dbg_check_tnc" alt="" coords="595,499,705,525"/>
<area shape="rect" id="node32" href="tnc__commit_8c.html#a64748c798bfc8c8fd1ee5bedae19a5b3" title="get_znodes_to_commit" alt="" coords="571,651,729,677"/>
<area shape="rect" id="node33" href="tnc__commit_8c.html#a82dea2876366b839f177356c01a9c031" title="alloc_idx_lebs" alt="" coords="598,701,702,728"/>
<area shape="rect" id="node34" href="tnc__commit_8c.html#a1f7210689e6f040c0b106db3e447e04b" title="layout_commit" alt="" coords="597,803,703,829"/>
<area shape="rect" id="node35" href="tnc__commit_8c.html#a045e506a5e968ca24069299455ff0abf" title="free_unused_idx_lebs" alt="" coords="789,752,937,779"/>
<area shape="rect" id="node36" href="tnc_8c.html#a01e38c99f12ee3c060c9214d14ec62f3" title="destroy_old_idx" alt="" coords="593,549,707,576"/>
<area shape="rect" id="node37" href="find_8c.html#abb183b65aeed0bc4e18681aec0ffdb5b" title="ubifs_save_dirty_idx\l_lnums" alt="" coords="579,230,721,271"/>
<area shape="rect" id="node38" href="budget_8c.html#a6109e1d36eaa593c345944d0d4b30745" title="ubifs_calc_min_idx_lebs" alt="" coords="568,600,732,627"/>
<area shape="rect" id="node39" href="tnc__commit_8c.html#aabbfd5925b308189c641e1570a2a19f7" title="free_idx_lebs" alt="" coords="601,853,699,880"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2commit_8c_ae4c760f55879f81abc758f058e481834_icgraph.png" border="0" usemap="#ubifs_2commit_8c_ae4c760f55879f81abc758f058e481834_icgraph" alt=""/></div>
<map name="ubifs_2commit_8c_ae4c760f55879f81abc758f058e481834_icgraph" id="ubifs_2commit_8c_ae4c760f55879f81abc758f058e481834_icgraph">
<area shape="rect" id="node2" href="ubifs_2super_8c.html#a5f9c4c32c42dc338c1b84b87b7098105" title="ubifs_sync_fs" alt="" coords="190,219,293,245"/>
<area shape="rect" id="node3" href="ubifs_2recovery_8c.html#acb6fbec748694453a2e4b3ed2be6cc6b" title="grab_empty_leb" alt="" coords="184,320,299,347"/>
<area shape="rect" id="node4" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="352,233,509,260"/>
<area shape="rect" id="node20" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="368,1120,493,1147"/>
<area shape="rect" id="node42" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="179,440,304,467"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="587,37,680,64"/>
<area shape="rect" id="node8" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="571,120,696,147"/>
<area shape="rect" id="node10" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="570,233,697,260"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="783,5,892,32"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="1000,5,1093,32"/>
<area shape="rect" id="node9" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="776,56,899,83"/>
<area shape="rect" id="node11" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1176,1044,1309,1071"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="791,259,884,285"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="796,360,879,387"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="793,309,882,336"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="789,157,885,184"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="786,208,889,235"/>
<area shape="rect" id="node12" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="1357,1069,1431,1096"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="999,360,1095,387"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1003,563,1090,589"/>
<area shape="rect" id="node21" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="575,385,691,412"/>
<area shape="rect" id="node27" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="565,1247,702,1273"/>
<area shape="rect" id="node31" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="562,1323,705,1349"/>
<area shape="rect" id="node34" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="570,1399,697,1425"/>
<area shape="rect" id="node36" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="573,917,693,944"/>
<area shape="rect" id="node37" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="571,1183,695,1209"/>
<area shape="rect" id="node38" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="561,1069,706,1096"/>
<area shape="rect" id="node40" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="557,1120,709,1147"/>
<area shape="rect" id="node22" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="792,1019,883,1045"/>
<area shape="rect" id="node24" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="799,411,876,437"/>
<area shape="rect" id="node25" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="792,461,883,488"/>
<area shape="rect" id="node26" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="794,512,881,539"/>
<area shape="rect" id="node23" href="ubifs_2xattr_8c.html#a2c0f8e28d408b8e89b4ce7d6047af912" title="ubifs_xattr_set" alt="" coords="993,1095,1101,1121"/>
<area shape="rect" id="node28" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="788,1272,887,1299"/>
<area shape="rect" id="node29" href="ubifs_2file_8c.html#a2ad22c013a0dccfd9f49e114ed89dfa6" title="ubifs_writepage" alt="" coords="990,1272,1103,1299"/>
<area shape="rect" id="node30" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="997,1221,1097,1248"/>
<area shape="rect" id="node32" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="776,1373,899,1400"/>
<area shape="rect" id="node33" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="762,1323,913,1349"/>
<area shape="rect" id="node35" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="784,1424,891,1451"/>
<area shape="rect" id="node39" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="788,1069,887,1096"/>
<area shape="rect" id="node41" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="789,1120,886,1147"/>
<area shape="rect" id="node43" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="564,613,703,640"/>
<area shape="rect" id="node44" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="776,664,899,691"/>
<area shape="rect" id="node45" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="781,715,894,741"/>
<area shape="rect" id="node46" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="797,765,877,792"/>
<area shape="rect" id="node47" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="757,917,917,944"/>
<area shape="rect" id="node48" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="991,943,1102,969"/>
<area shape="rect" id="node49" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="965,879,1128,905"/>
<area shape="rect" id="node50" href="ubifs_2ioctl_8c.html#a06251cc4602342e44b5ed0a1b39f7e60" title="setflags" alt="" coords="803,613,871,640"/>
</map>
</div>

</div>
</div>
<a id="a8066477fd4d182a562575fec9c1460f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8066477fd4d182a562575fec9c1460f9">&#9670;&nbsp;</a></span>wait_for_commit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int wait_for_commit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>wait_for_commit - wait for commit. <code></code>: UBIFS file-system description object</p>
<p>This function sleeps until the commit operation is no longer running. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ubifs_2commit_8c_a8066477fd4d182a562575fec9c1460f9_icgraph.png" border="0" usemap="#ubifs_2commit_8c_a8066477fd4d182a562575fec9c1460f9_icgraph" alt=""/></div>
<map name="ubifs_2commit_8c_a8066477fd4d182a562575fec9c1460f9_icgraph" id="ubifs_2commit_8c_a8066477fd4d182a562575fec9c1460f9_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="172,319,297,345"/>
<area shape="rect" id="node3" href="ubifs_2super_8c.html#a5f9c4c32c42dc338c1b84b87b7098105" title="ubifs_sync_fs" alt="" coords="357,217,459,244"/>
<area shape="rect" id="node4" href="ubifs_2recovery_8c.html#acb6fbec748694453a2e4b3ed2be6cc6b" title="grab_empty_leb" alt="" coords="351,268,465,295"/>
<area shape="rect" id="node5" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="519,233,676,260"/>
<area shape="rect" id="node21" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="535,1171,660,1197"/>
<area shape="rect" id="node42" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="345,405,471,432"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="753,37,847,64"/>
<area shape="rect" id="node9" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="737,120,863,147"/>
<area shape="rect" id="node11" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="737,233,863,260"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="949,5,1059,32"/>
<area shape="rect" id="node8" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="1167,5,1260,32"/>
<area shape="rect" id="node10" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="943,56,1065,83"/>
<area shape="rect" id="node12" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1343,993,1476,1020"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="957,157,1051,184"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="963,208,1045,235"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="959,259,1049,285"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="956,309,1052,336"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="953,360,1055,387"/>
<area shape="rect" id="node13" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="1524,1019,1597,1045"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="1165,208,1261,235"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1170,563,1257,589"/>
<area shape="rect" id="node22" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="742,385,858,412"/>
<area shape="rect" id="node28" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="731,1272,869,1299"/>
<area shape="rect" id="node31" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="729,1323,871,1349"/>
<area shape="rect" id="node34" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="737,1399,863,1425"/>
<area shape="rect" id="node36" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="740,1120,860,1147"/>
<area shape="rect" id="node37" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="738,1221,862,1248"/>
<area shape="rect" id="node38" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="727,1044,873,1071"/>
<area shape="rect" id="node40" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="724,1171,876,1197"/>
<area shape="rect" id="node23" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="959,968,1049,995"/>
<area shape="rect" id="node25" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="965,512,1043,539"/>
<area shape="rect" id="node26" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="959,411,1049,437"/>
<area shape="rect" id="node27" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="961,461,1047,488"/>
<area shape="rect" id="node24" href="ubifs_2xattr_8c.html#a2c0f8e28d408b8e89b4ce7d6047af912" title="ubifs_xattr_set" alt="" coords="1159,1044,1267,1071"/>
<area shape="rect" id="node29" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="955,1272,1053,1299"/>
<area shape="rect" id="node30" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1163,1221,1263,1248"/>
<area shape="rect" id="node32" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="943,1323,1065,1349"/>
<area shape="rect" id="node33" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="929,1373,1079,1400"/>
<area shape="rect" id="node35" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="951,1424,1057,1451"/>
<area shape="rect" id="node39" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="955,1019,1053,1045"/>
<area shape="rect" id="node41" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="955,1171,1053,1197"/>
<area shape="rect" id="node43" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="731,613,869,640"/>
<area shape="rect" id="node44" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="943,664,1065,691"/>
<area shape="rect" id="node45" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="947,715,1061,741"/>
<area shape="rect" id="node46" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="964,765,1044,792"/>
<area shape="rect" id="node47" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="924,867,1084,893"/>
<area shape="rect" id="node48" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="1158,905,1269,932"/>
<area shape="rect" id="node49" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="1132,841,1295,868"/>
<area shape="rect" id="node50" href="ubifs_2ioctl_8c.html#a06251cc4602342e44b5ed0a1b39f7e60" title="setflags" alt="" coords="970,613,1038,640"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_fbbc61eb3235ac15a35746d00bf5db85.html">ubifs</a></li><li class="navelem"><a class="el" href="ubifs_2commit_8c.html">commit.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>

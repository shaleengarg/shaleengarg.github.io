<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>linux/fs: reiserfs/reiserfs.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">linux/fs
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('reiserfs_8h_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">reiserfs.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="reiserfs_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/* SPDX-License-Identifier: GPL-2.0 */</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Copyright 1996, 1997, 1998 Hans Reiser, see reiserfs/README for</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * licensing and copyright details</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;linux/reiserfs_fs.h&gt;</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;linux/slab.h&gt;</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;linux/interrupt.h&gt;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;linux/sched.h&gt;</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;linux/bug.h&gt;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &lt;linux/workqueue.h&gt;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;asm/unaligned.h&gt;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;linux/bitops.h&gt;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;linux/proc_fs.h&gt;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;linux/buffer_head.h&gt;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">/* the 32 bit compat definitions with int argument */</span></div><div class="line"><a name="l00020"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a62f11eb9174c45868f2614bd9df8cd0c">   20</a></span>&#160;<span class="preprocessor">#define REISERFS_IOC32_UNPACK       _IOW(0xCD, 1, int)</span></div><div class="line"><a name="l00021"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ab448a667e0ad3d17891f77dae7f6de11">   21</a></span>&#160;<span class="preprocessor">#define REISERFS_IOC32_GETFLAGS     FS_IOC32_GETFLAGS</span></div><div class="line"><a name="l00022"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a76514e2c1022e1cb7cfa19ca6a72e04e">   22</a></span>&#160;<span class="preprocessor">#define REISERFS_IOC32_SETFLAGS     FS_IOC32_SETFLAGS</span></div><div class="line"><a name="l00023"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a51ea66d456019d6dcf20af85e1cad25b">   23</a></span>&#160;<span class="preprocessor">#define REISERFS_IOC32_GETVERSION   FS_IOC32_GETVERSION</span></div><div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a94f75a07a89ff4cabc44fb45ff6135b0">   24</a></span>&#160;<span class="preprocessor">#define REISERFS_IOC32_SETVERSION   FS_IOC32_SETVERSION</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">struct </span><a class="code" href="structreiserfs__journal__list.html">reiserfs_journal_list</a>;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">/* bitmasks for i_flags field in reiserfs-specific part of inode */</span></div><div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a849778a95da790b103b5f35d542ed7ad">   29</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> {</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">     * this says what format of key do all items (but stat data) of</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">     * an object have.  If this is set, that format is 3.6 otherwise - 3.5</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a849778a95da790b103b5f35d542ed7adad4d6b9d9f8ef9a87a8119f3e05730ae8">   34</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a849778a95da790b103b5f35d542ed7adad4d6b9d9f8ef9a87a8119f3e05730ae8">i_item_key_version_mask</a> = 0x0001,</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">     * If this is unset, object has 3.5 stat data, otherwise,</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">     * it has 3.6 stat data with 64bit size, 32bit nlink etc.</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a849778a95da790b103b5f35d542ed7ada7d1c850af0ed86a64c51db1b0f387496">   40</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a849778a95da790b103b5f35d542ed7ada7d1c850af0ed86a64c51db1b0f387496">i_stat_data_version_mask</a> = 0x0002,</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="comment">/* file might need tail packing on close */</span></div><div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a849778a95da790b103b5f35d542ed7ada7d7243131c21f862c22138cf5ea31426">   43</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a849778a95da790b103b5f35d542ed7ada7d7243131c21f862c22138cf5ea31426">i_pack_on_close_mask</a> = 0x0004,</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="comment">/* don&#39;t pack tail of file */</span></div><div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a849778a95da790b103b5f35d542ed7ada31e660d60db8e321fe3637673488e660">   46</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a849778a95da790b103b5f35d542ed7ada31e660d60db8e321fe3637673488e660">i_nopack_mask</a> = 0x0008,</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">     * If either of these are set, &quot;safe link&quot; was created for this</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">     * file during truncate or unlink. Safe link is used to avoid</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">     * leakage of disk space on crash with some files open, but unlinked.</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a849778a95da790b103b5f35d542ed7ada22f5a71b656263a6d2745f80abcf3428">   53</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a849778a95da790b103b5f35d542ed7ada22f5a71b656263a6d2745f80abcf3428">i_link_saved_unlink_mask</a> = 0x0010,</div><div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a849778a95da790b103b5f35d542ed7ada836422b68b3137896c8f62210f46c443">   54</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a849778a95da790b103b5f35d542ed7ada836422b68b3137896c8f62210f46c443">i_link_saved_truncate_mask</a> = 0x0020,</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a849778a95da790b103b5f35d542ed7ada9e620b4b5a2a3a522c3a7c7391100c2f">   56</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a849778a95da790b103b5f35d542ed7ada9e620b4b5a2a3a522c3a7c7391100c2f">i_has_xattr_dir</a> = 0x0040,</div><div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a849778a95da790b103b5f35d542ed7ada6afad6e1b3c74bdf9c4e9c71cf810c25">   57</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a849778a95da790b103b5f35d542ed7ada6afad6e1b3c74bdf9c4e9c71cf810c25">i_data_log</a> = 0x0080,</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;} <a class="code" href="reiserfs_8h.html#a849778a95da790b103b5f35d542ed7ad">reiserfs_inode_flags</a>;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div><div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="structreiserfs__inode__info.html">   60</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structreiserfs__inode__info.html">reiserfs_inode_info</a> {</div><div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="structreiserfs__inode__info.html#adee78f440abcf3b25e3b3dcc3d5da332">   61</a></span>&#160;    __u32 <a class="code" href="structreiserfs__inode__info.html#adee78f440abcf3b25e3b3dcc3d5da332">i_key</a>[4];     <span class="comment">/* key is still 4 32 bit integers */</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">     * transient inode flags that are never stored on disk. Bitmasks</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">     * for this field are defined above.</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="structreiserfs__inode__info.html#a08045363dd99c56bf8a7b66697898e7c">   67</a></span>&#160;    __u32 <a class="code" href="structreiserfs__inode__info.html#a08045363dd99c56bf8a7b66697898e7c">i_flags</a>;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="comment">/* offset of first byte stored in direct item. */</span></div><div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="structreiserfs__inode__info.html#ae4a8d0bd6710a283584f657be4eeca02">   70</a></span>&#160;    __u32 <a class="code" href="structreiserfs__inode__info.html#ae4a8d0bd6710a283584f657be4eeca02">i_first_direct_byte</a>;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="comment">/* copy of persistent inode flags read from sd_attrs. */</span></div><div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="structreiserfs__inode__info.html#a242e3200b7b8d64c221c38452017a6e6">   73</a></span>&#160;    __u32 <a class="code" href="structreiserfs__inode__info.html#a242e3200b7b8d64c221c38452017a6e6">i_attrs</a>;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="comment">/* first unused block of a sequence of unused blocks */</span></div><div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="structreiserfs__inode__info.html#aad8e400d8cd5866bedaade711ced03f9">   76</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__inode__info.html#aad8e400d8cd5866bedaade711ced03f9">i_prealloc_block</a>;</div><div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="structreiserfs__inode__info.html#ab7e656b6991c4ced1deabc8c8d4193e4">   77</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__inode__info.html#ab7e656b6991c4ced1deabc8c8d4193e4">i_prealloc_count</a>;   <span class="comment">/* length of that sequence */</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="comment">/* per-transaction list of inodes which  have preallocated blocks */</span></div><div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="structreiserfs__inode__info.html#ab40cf95011bc71b40236e0fb583f0fa1">   80</a></span>&#160;    <span class="keyword">struct </span>list_head <a class="code" href="structreiserfs__inode__info.html#ab40cf95011bc71b40236e0fb583f0fa1">i_prealloc_list</a>;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">     * new_packing_locality is created; new blocks for the contents</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">     * of this directory should be displaced</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="structreiserfs__inode__info.html#a21435b7e15f15807ab5e5a586f0b4bf0">   86</a></span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="structreiserfs__inode__info.html#a21435b7e15f15807ab5e5a586f0b4bf0">new_packing_locality</a>:1;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">     * we use these for fsync or O_SYNC to decide which transaction</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">     * needs to be committed in order for this inode to be properly</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">     * flushed</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="structreiserfs__inode__info.html#a8bd47389eddb66e65b72bf4851e6ae8c">   93</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structreiserfs__inode__info.html#a8bd47389eddb66e65b72bf4851e6ae8c">i_trans_id</a>;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="structreiserfs__inode__info.html#ad1a254fe26c2cee7ef823e8a215985ff">   95</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structreiserfs__journal__list.html">reiserfs_journal_list</a> *<a class="code" href="structreiserfs__inode__info.html#ad1a254fe26c2cee7ef823e8a215985ff">i_jl</a>;</div><div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="structreiserfs__inode__info.html#ac8d6afc2a40eb51764751457880c3e76">   96</a></span>&#160;    atomic_t <a class="code" href="structreiserfs__inode__info.html#ac8d6afc2a40eb51764751457880c3e76">openers</a>;</div><div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="structreiserfs__inode__info.html#ab880e34e8d158dbc0db607d1bece8bfd">   97</a></span>&#160;    <span class="keyword">struct </span>mutex <a class="code" href="structreiserfs__inode__info.html#ab880e34e8d158dbc0db607d1bece8bfd">tailpack</a>;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="preprocessor">#ifdef CONFIG_REISERFS_FS_XATTR</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keyword">struct </span>rw_semaphore i_xattr_sem;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="preprocessor">#ifdef CONFIG_QUOTA</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keyword">struct </span>dquot *<a class="code" href="dquot_8c.html#a78a0deba7a34cea1fc4576102f98db4f">i_dquot</a>[MAXQUOTAS];</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="structreiserfs__inode__info.html#a9206d17789076687d2c00a5a1f759ac1">  105</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="summary_8h.html#a63c41f9614ee9a4e1beb75eabad72f22">inode</a> <a class="code" href="structreiserfs__inode__info.html#a9206d17789076687d2c00a5a1f759ac1">vfs_inode</a>;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;};</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aa70479542fd6681109abefbe5296a5bb">  108</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> {</div><div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aa70479542fd6681109abefbe5296a5bba9384754fd144fdbb8134078a9e2f0881">  109</a></span>&#160;    <a class="code" href="reiserfs_8h.html#aa70479542fd6681109abefbe5296a5bba9384754fd144fdbb8134078a9e2f0881">reiserfs_attrs_cleared</a> = 0x00000001,</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;} <a class="code" href="reiserfs_8h.html#aa70479542fd6681109abefbe5296a5bb">reiserfs_super_block_flags</a>;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment"> * struct reiserfs_super_block accessors/mutators since this is a disk</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment"> * structure, it will always be in little endian format.</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a2b9e34e58d9e58403ce1aa3dc62d3287">  116</a></span>&#160;<span class="preprocessor">#define sb_block_count(sbp)         (le32_to_cpu((sbp)-&gt;s_v1.s_block_count))</span></div><div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ac1fb2c0f63f39ce7fd70a756a07769a4">  117</a></span>&#160;<span class="preprocessor">#define set_sb_block_count(sbp,v)   ((sbp)-&gt;s_v1.s_block_count = cpu_to_le32(v))</span></div><div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aa9193f6d6a88e20a520cd9c9deebf7d3">  118</a></span>&#160;<span class="preprocessor">#define sb_free_blocks(sbp)         (le32_to_cpu((sbp)-&gt;s_v1.s_free_blocks))</span></div><div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aa781b6e157db4ed73fe55a0271e4d00b">  119</a></span>&#160;<span class="preprocessor">#define set_sb_free_blocks(sbp,v)   ((sbp)-&gt;s_v1.s_free_blocks = cpu_to_le32(v))</span></div><div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a2a566e18d50c676220ba7752c275170a">  120</a></span>&#160;<span class="preprocessor">#define sb_root_block(sbp)          (le32_to_cpu((sbp)-&gt;s_v1.s_root_block))</span></div><div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a1d7ff5328e1b33181c9dec3385b5146e">  121</a></span>&#160;<span class="preprocessor">#define set_sb_root_block(sbp,v)    ((sbp)-&gt;s_v1.s_root_block = cpu_to_le32(v))</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a45f1ee087d7d211abedc9026aed3beaf">  123</a></span>&#160;<span class="preprocessor">#define sb_jp_journal_1st_block(sbp)  \</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="preprocessor">              (le32_to_cpu((sbp)-&gt;s_v1.s_journal.jp_journal_1st_block))</span></div><div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a50d0e272a10fd980fbb4149cfd0358ef">  125</a></span>&#160;<span class="preprocessor">#define set_sb_jp_journal_1st_block(sbp,v) \</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="preprocessor">              ((sbp)-&gt;s_v1.s_journal.jp_journal_1st_block = cpu_to_le32(v))</span></div><div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a471427f9bad01f17c29ac894ed58b4f4">  127</a></span>&#160;<span class="preprocessor">#define sb_jp_journal_dev(sbp) \</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="preprocessor">              (le32_to_cpu((sbp)-&gt;s_v1.s_journal.jp_journal_dev))</span></div><div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ad97b2561225148d29aa0db871148a7dc">  129</a></span>&#160;<span class="preprocessor">#define set_sb_jp_journal_dev(sbp,v) \</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="preprocessor">              ((sbp)-&gt;s_v1.s_journal.jp_journal_dev = cpu_to_le32(v))</span></div><div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ada832b939f1c882455c9c89059353148">  131</a></span>&#160;<span class="preprocessor">#define sb_jp_journal_size(sbp) \</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="preprocessor">              (le32_to_cpu((sbp)-&gt;s_v1.s_journal.jp_journal_size))</span></div><div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a475b6d5bc5bd46032a11ec9e64dd3584">  133</a></span>&#160;<span class="preprocessor">#define set_sb_jp_journal_size(sbp,v) \</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="preprocessor">              ((sbp)-&gt;s_v1.s_journal.jp_journal_size = cpu_to_le32(v))</span></div><div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a8cd55a0f1cd61b1ec9c13eaa1001c85e">  135</a></span>&#160;<span class="preprocessor">#define sb_jp_journal_trans_max(sbp) \</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="preprocessor">              (le32_to_cpu((sbp)-&gt;s_v1.s_journal.jp_journal_trans_max))</span></div><div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a0a13fbb14e9551fbf21af10d5e7b1c4c">  137</a></span>&#160;<span class="preprocessor">#define set_sb_jp_journal_trans_max(sbp,v) \</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="preprocessor">              ((sbp)-&gt;s_v1.s_journal.jp_journal_trans_max = cpu_to_le32(v))</span></div><div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a53fe621858ee9bd773bfe5800f4a9d69">  139</a></span>&#160;<span class="preprocessor">#define sb_jp_journal_magic(sbp) \</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="preprocessor">              (le32_to_cpu((sbp)-&gt;s_v1.s_journal.jp_journal_magic))</span></div><div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#abde3dc0cb8d91d99f3c8fd1ae35f238a">  141</a></span>&#160;<span class="preprocessor">#define set_sb_jp_journal_magic(sbp,v) \</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="preprocessor">              ((sbp)-&gt;s_v1.s_journal.jp_journal_magic = cpu_to_le32(v))</span></div><div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a03700a29f23b5373a9072f8f9b4ca6b4">  143</a></span>&#160;<span class="preprocessor">#define sb_jp_journal_max_batch(sbp) \</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="preprocessor">              (le32_to_cpu((sbp)-&gt;s_v1.s_journal.jp_journal_max_batch))</span></div><div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#af51be838467eeecf576ef0e4a2d88a7b">  145</a></span>&#160;<span class="preprocessor">#define set_sb_jp_journal_max_batch(sbp,v) \</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="preprocessor">              ((sbp)-&gt;s_v1.s_journal.jp_journal_max_batch = cpu_to_le32(v))</span></div><div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a90ac85c24470f39aaed01a5efe214cbf">  147</a></span>&#160;<span class="preprocessor">#define sb_jp_jourmal_max_commit_age(sbp) \</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="preprocessor">              (le32_to_cpu((sbp)-&gt;s_v1.s_journal.jp_journal_max_commit_age))</span></div><div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#adf86c130fe76151cf8609015f6122972">  149</a></span>&#160;<span class="preprocessor">#define set_sb_jp_journal_max_commit_age(sbp,v) \</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="preprocessor">              ((sbp)-&gt;s_v1.s_journal.jp_journal_max_commit_age = cpu_to_le32(v))</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a58a1708ae5ba0df8922e19475937561f">  152</a></span>&#160;<span class="preprocessor">#define sb_blocksize(sbp)          (le16_to_cpu((sbp)-&gt;s_v1.s_blocksize))</span></div><div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a47b0828bb3fd3261474e93318af1fe30">  153</a></span>&#160;<span class="preprocessor">#define set_sb_blocksize(sbp,v)    ((sbp)-&gt;s_v1.s_blocksize = cpu_to_le16(v))</span></div><div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ab7c78de628a607b71fa26d4a15d9cc5c">  154</a></span>&#160;<span class="preprocessor">#define sb_oid_maxsize(sbp)        (le16_to_cpu((sbp)-&gt;s_v1.s_oid_maxsize))</span></div><div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a1951270e9be4fa84ecf8f998e6d72119">  155</a></span>&#160;<span class="preprocessor">#define set_sb_oid_maxsize(sbp,v)  ((sbp)-&gt;s_v1.s_oid_maxsize = cpu_to_le16(v))</span></div><div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aeddfbd630be98d13d503bc5d1ba81732">  156</a></span>&#160;<span class="preprocessor">#define sb_oid_cursize(sbp)        (le16_to_cpu((sbp)-&gt;s_v1.s_oid_cursize))</span></div><div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#acc2355a18733c13181734570af0db59b">  157</a></span>&#160;<span class="preprocessor">#define set_sb_oid_cursize(sbp,v)  ((sbp)-&gt;s_v1.s_oid_cursize = cpu_to_le16(v))</span></div><div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a22e18fa60993d583fe87d9b239bf7ef8">  158</a></span>&#160;<span class="preprocessor">#define sb_umount_state(sbp)       (le16_to_cpu((sbp)-&gt;s_v1.s_umount_state))</span></div><div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aef3b47895d7109e95f02ebbc195cb8bc">  159</a></span>&#160;<span class="preprocessor">#define set_sb_umount_state(sbp,v) ((sbp)-&gt;s_v1.s_umount_state = cpu_to_le16(v))</span></div><div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ac3155f0e85caedcd45d1c02b47d8dce1">  160</a></span>&#160;<span class="preprocessor">#define sb_fs_state(sbp)           (le16_to_cpu((sbp)-&gt;s_v1.s_fs_state))</span></div><div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a363286067c13ab5ff97f2c1c0d313885">  161</a></span>&#160;<span class="preprocessor">#define set_sb_fs_state(sbp,v)     ((sbp)-&gt;s_v1.s_fs_state = cpu_to_le16(v))</span></div><div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a85501577f7dc7d366c339c3fbdac51f9">  162</a></span>&#160;<span class="preprocessor">#define sb_hash_function_code(sbp) \</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="preprocessor">              (le32_to_cpu((sbp)-&gt;s_v1.s_hash_function_code))</span></div><div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ac1b9d4e2a9f06817b5335a8e825832fd">  164</a></span>&#160;<span class="preprocessor">#define set_sb_hash_function_code(sbp,v) \</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="preprocessor">              ((sbp)-&gt;s_v1.s_hash_function_code = cpu_to_le32(v))</span></div><div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#abdf617e75e1b6cdb76d143b9e3b9df1a">  166</a></span>&#160;<span class="preprocessor">#define sb_tree_height(sbp)        (le16_to_cpu((sbp)-&gt;s_v1.s_tree_height))</span></div><div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a9319debe76d47500f2a34121766f7272">  167</a></span>&#160;<span class="preprocessor">#define set_sb_tree_height(sbp,v)  ((sbp)-&gt;s_v1.s_tree_height = cpu_to_le16(v))</span></div><div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a432ac1d7668824e151c315cfb77434b3">  168</a></span>&#160;<span class="preprocessor">#define sb_bmap_nr(sbp)            (le16_to_cpu((sbp)-&gt;s_v1.s_bmap_nr))</span></div><div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aa85634cbf18efcd326460e6bf5d5f668">  169</a></span>&#160;<span class="preprocessor">#define set_sb_bmap_nr(sbp,v)      ((sbp)-&gt;s_v1.s_bmap_nr = cpu_to_le16(v))</span></div><div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a8d8c4efb549c6dd7d786a260e23a4342">  170</a></span>&#160;<span class="preprocessor">#define sb_version(sbp)            (le16_to_cpu((sbp)-&gt;s_v1.s_version))</span></div><div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a33e52661c6da08db368f5592934d07a6">  171</a></span>&#160;<span class="preprocessor">#define set_sb_version(sbp,v)      ((sbp)-&gt;s_v1.s_version = cpu_to_le16(v))</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a178514a0b8ade8d6f8ec50eea4cdaefa">  173</a></span>&#160;<span class="preprocessor">#define sb_mnt_count(sbp)      (le16_to_cpu((sbp)-&gt;s_mnt_count))</span></div><div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aae9856a11a8be99f23ad2975c9dee34b">  174</a></span>&#160;<span class="preprocessor">#define set_sb_mnt_count(sbp, v)   ((sbp)-&gt;s_mnt_count = cpu_to_le16(v))</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div><div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ac4c1f6342924532f014c85247ea0195c">  176</a></span>&#160;<span class="preprocessor">#define sb_reserved_for_journal(sbp) \</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="preprocessor">              (le16_to_cpu((sbp)-&gt;s_v1.s_reserved_for_journal))</span></div><div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ad6dbf7a005fa0e7bfa8ba2c367ccb1ab">  178</a></span>&#160;<span class="preprocessor">#define set_sb_reserved_for_journal(sbp,v) \</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="preprocessor">              ((sbp)-&gt;s_v1.s_reserved_for_journal = cpu_to_le16(v))</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">/* LOGGING -- */</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment"> * These all interelate for performance.</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment"> * If the journal block count is smaller than n transactions, you lose speed.</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment"> * I don&#39;t know what n is yet, I&#39;m guessing 8-16.</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment"> * typical transaction size depends on the application, how often fsync is</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment"> * called, and how many metadata blocks you dirty in a 30 second period.</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment"> * The more small files (&lt;16k) you use, the larger your transactions will</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment"> * be.</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment"> * If your journal fills faster than dirty buffers get flushed to disk, it</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment"> * must flush them before allowing the journal to wrap, which slows things</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment"> * down.  If you need high speed meta data updates, the journal should be</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment"> * big enough to prevent wrapping before dirty meta blocks get to disk.</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment"> * If the batch max is smaller than the transaction max, you&#39;ll waste space</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment"> * at the end of the journal because journal_end sets the next transaction</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment"> * to start at 0 if the next transaction has any chance of wrapping.</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment"> * The large the batch max age, the better the speed, and the more meta</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment"> * data changes you&#39;ll lose after a crash.</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">/* don&#39;t mess with these for a while */</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">/* we have a node size define somewhere in reiserfs_fs.h. -Hans */</span></div><div class="line"><a name="l00209"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a127a321976306c20aae42179cfd87e91">  209</a></span>&#160;<span class="preprocessor">#define JOURNAL_BLOCK_SIZE  4096    </span><span class="comment">/* BUG gotta get rid of this */</span><span class="preprocessor"></span></div><div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a2ae2eb343e2a55cc19e47e015131e370">  210</a></span>&#160;<span class="preprocessor">#define JOURNAL_MAX_CNODE   1500    </span><span class="comment">/* max cnodes to allocate. */</span><span class="preprocessor"></span></div><div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a26222ea9304fc598061f100243d7d9ef">  211</a></span>&#160;<span class="preprocessor">#define JOURNAL_HASH_SIZE 8192</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">/* number of copies of the bitmaps to have floating.  Must be &gt;= 2 */</span></div><div class="line"><a name="l00214"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a9d8311084dce3b8ef4ac8dbc2ed4c0f3">  214</a></span>&#160;<span class="preprocessor">#define JOURNAL_NUM_BITMAPS 5</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment"> * One of these for every block in every transaction</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment"> * Each one is in two hash tables.  First, a hash of the current transaction,</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment"> * and after journal_end, a hash of all the in memory transactions.</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment"> * next and prev are used by the current transaction (journal_hash).</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment"> * hnext and hprev are used by journal_list_hash.  If a block is in more</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment"> * than one transaction, the journal_list_hash links it in multiple times.</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment"> * This allows flush_journal_list to remove just the cnode belonging to a</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment"> * given transaction.</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="structreiserfs__journal__cnode.html">  226</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structreiserfs__journal__cnode.html">reiserfs_journal_cnode</a> {</div><div class="line"><a name="l00227"></a><span class="lineno"><a class="line" href="structreiserfs__journal__cnode.html#a173a8571530dedd37d219e19b791977b">  227</a></span>&#160;    <span class="keyword">struct </span>buffer_head *<a class="code" href="structreiserfs__journal__cnode.html#a173a8571530dedd37d219e19b791977b">bh</a>; <span class="comment">/* real buffer head */</span></div><div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="structreiserfs__journal__cnode.html#a54106f2c08d2cca697a437275882dc79">  228</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structsuper__block.html">super_block</a> *<a class="code" href="structreiserfs__journal__cnode.html#a54106f2c08d2cca697a437275882dc79">sb</a>; <span class="comment">/* dev of real buffer head */</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="comment">/* block number of real buffer head, == 0 when buffer on disk */</span></div><div class="line"><a name="l00231"></a><span class="lineno"><a class="line" href="structreiserfs__journal__cnode.html#a64b0db6efa359a9fad8d727bba45556e">  231</a></span>&#160;    __u32 <a class="code" href="structreiserfs__journal__cnode.html#a64b0db6efa359a9fad8d727bba45556e">blocknr</a>;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="structreiserfs__journal__cnode.html#abd2f79878d99f7b6b56a90730eccc885">  233</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="structreiserfs__journal__cnode.html#abd2f79878d99f7b6b56a90730eccc885">state</a>;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="comment">/* journal list this cnode lives in */</span></div><div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="structreiserfs__journal__cnode.html#a8ec3fdd91d21341bfcbc450d94b94235">  236</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structreiserfs__journal__list.html">reiserfs_journal_list</a> *<a class="code" href="structreiserfs__journal__cnode.html#a8ec3fdd91d21341bfcbc450d94b94235">jlist</a>;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno"><a class="line" href="structreiserfs__journal__cnode.html#a1463b987188780cba17fa6b359bb9c8c">  238</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structreiserfs__journal__cnode.html">reiserfs_journal_cnode</a> *<a class="code" href="structreiserfs__journal__cnode.html#a1463b987188780cba17fa6b359bb9c8c">next</a>;    <span class="comment">/* next in transaction list */</span></div><div class="line"><a name="l00239"></a><span class="lineno"><a class="line" href="structreiserfs__journal__cnode.html#a41d2457773f9969e87c39015ac330529">  239</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structreiserfs__journal__cnode.html">reiserfs_journal_cnode</a> *<a class="code" href="structreiserfs__journal__cnode.html#a41d2457773f9969e87c39015ac330529">prev</a>;    <span class="comment">/* prev in transaction list */</span></div><div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="structreiserfs__journal__cnode.html#a1fc89fefba889d7d8306e02589da987c">  240</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structreiserfs__journal__cnode.html">reiserfs_journal_cnode</a> *<a class="code" href="structreiserfs__journal__cnode.html#a1fc89fefba889d7d8306e02589da987c">hprev</a>;   <span class="comment">/* prev in hash list */</span></div><div class="line"><a name="l00241"></a><span class="lineno"><a class="line" href="structreiserfs__journal__cnode.html#ad5ce4dc25327c329846b7d4b77c7a102">  241</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structreiserfs__journal__cnode.html">reiserfs_journal_cnode</a> *<a class="code" href="structreiserfs__journal__cnode.html#ad5ce4dc25327c329846b7d4b77c7a102">hnext</a>;   <span class="comment">/* next in hash list */</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;};</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div><div class="line"><a name="l00244"></a><span class="lineno"><a class="line" href="structreiserfs__bitmap__node.html">  244</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structreiserfs__bitmap__node.html">reiserfs_bitmap_node</a> {</div><div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="structreiserfs__bitmap__node.html#a689a4322113b159c2cc837ff37c42499">  245</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__bitmap__node.html#a689a4322113b159c2cc837ff37c42499">id</a>;</div><div class="line"><a name="l00246"></a><span class="lineno"><a class="line" href="structreiserfs__bitmap__node.html#a3ac1fb902f64a4dbcd9cc6d64b6f8d49">  246</a></span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="structreiserfs__bitmap__node.html#a3ac1fb902f64a4dbcd9cc6d64b6f8d49">data</a>;</div><div class="line"><a name="l00247"></a><span class="lineno"><a class="line" href="structreiserfs__bitmap__node.html#a519cc91cda5cedb9d2bb2b91db3ca7cb">  247</a></span>&#160;    <span class="keyword">struct </span>list_head <a class="code" href="cifspdu_8h.html#a7e28d0d49fe972b6aea4a399c7bc0cb0">list</a>;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;};</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno"><a class="line" href="structreiserfs__list__bitmap.html">  250</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structreiserfs__list__bitmap.html">reiserfs_list_bitmap</a> {</div><div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="structreiserfs__list__bitmap.html#a3d0084a7cfe7cf371d6d21d65d39e612">  251</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structreiserfs__journal__list.html">reiserfs_journal_list</a> *<a class="code" href="structreiserfs__list__bitmap.html#a3d0084a7cfe7cf371d6d21d65d39e612">journal_list</a>;</div><div class="line"><a name="l00252"></a><span class="lineno"><a class="line" href="structreiserfs__list__bitmap.html#a760817c992d1deeb78b6bfe4c7ab2421">  252</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structreiserfs__bitmap__node.html">reiserfs_bitmap_node</a> **<a class="code" href="structreiserfs__list__bitmap.html#a760817c992d1deeb78b6bfe4c7ab2421">bitmaps</a>;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;};</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment"> * one of these for each transaction.  The most important part here is the</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment"> * j_realblock.  this list of cnodes is used to hash all the blocks in all</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment"> * the commits, to mark all the real buffer heads dirty once all the commits</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment"> * hit the disk, and to make sure every real block in a transaction is on</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment"> * disk before allowing the log area to be overwritten</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00262"></a><span class="lineno"><a class="line" href="structreiserfs__journal__list.html">  262</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structreiserfs__journal__list.html">reiserfs_journal_list</a> {</div><div class="line"><a name="l00263"></a><span class="lineno"><a class="line" href="structreiserfs__journal__list.html#a4ced38506f62d32a5e1f20f0303fc1ad">  263</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="structreiserfs__journal__list.html#a4ced38506f62d32a5e1f20f0303fc1ad">j_start</a>;</div><div class="line"><a name="l00264"></a><span class="lineno"><a class="line" href="structreiserfs__journal__list.html#a828da12b70cae73d79902525dfa598ab">  264</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="structreiserfs__journal__list.html#a828da12b70cae73d79902525dfa598ab">j_state</a>;</div><div class="line"><a name="l00265"></a><span class="lineno"><a class="line" href="structreiserfs__journal__list.html#a356f0500bbf8db47380ec8883e393095">  265</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="structreiserfs__journal__list.html#a356f0500bbf8db47380ec8883e393095">j_len</a>;</div><div class="line"><a name="l00266"></a><span class="lineno"><a class="line" href="structreiserfs__journal__list.html#ad4407cbd60265908d2c96e94e9e310b6">  266</a></span>&#160;    atomic_t <a class="code" href="structreiserfs__journal__list.html#ad4407cbd60265908d2c96e94e9e310b6">j_nonzerolen</a>;</div><div class="line"><a name="l00267"></a><span class="lineno"><a class="line" href="structreiserfs__journal__list.html#a62cc70db692abb27f2b0c4a2e2bed268">  267</a></span>&#160;    atomic_t <a class="code" href="structreiserfs__journal__list.html#a62cc70db692abb27f2b0c4a2e2bed268">j_commit_left</a>;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="comment">/* all commits older than this on disk */</span></div><div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="structreiserfs__journal__list.html#ad5da045675f31d561963819993f650f8">  270</a></span>&#160;    atomic_t <a class="code" href="structreiserfs__journal__list.html#ad5da045675f31d561963819993f650f8">j_older_commits_done</a>;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno"><a class="line" href="structreiserfs__journal__list.html#ae5f7f776a4039ba93a08071c872eec5a">  272</a></span>&#160;    <span class="keyword">struct </span>mutex j_commit_mutex;</div><div class="line"><a name="l00273"></a><span class="lineno"><a class="line" href="structreiserfs__journal__list.html#ab88e10199e5d2aa3805b0c8170dafd84">  273</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structreiserfs__journal__list.html#ab88e10199e5d2aa3805b0c8170dafd84">j_trans_id</a>;</div><div class="line"><a name="l00274"></a><span class="lineno"><a class="line" href="structreiserfs__journal__list.html#ae7e1268a246897c28cee1fedd0a5c0e6">  274</a></span>&#160;    time_t <a class="code" href="structreiserfs__journal__list.html#ae7e1268a246897c28cee1fedd0a5c0e6">j_timestamp</a>;</div><div class="line"><a name="l00275"></a><span class="lineno"><a class="line" href="structreiserfs__journal__list.html#af611117da1d5c5cf104964b70b62ec3d">  275</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structreiserfs__list__bitmap.html">reiserfs_list_bitmap</a> *<a class="code" href="structreiserfs__journal__list.html#af611117da1d5c5cf104964b70b62ec3d">j_list_bitmap</a>;</div><div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="structreiserfs__journal__list.html#a5a18f4b4da8602337da5430db90e70e7">  276</a></span>&#160;    <span class="keyword">struct </span>buffer_head *<a class="code" href="structreiserfs__journal__list.html#a5a18f4b4da8602337da5430db90e70e7">j_commit_bh</a>;    <span class="comment">/* commit buffer head */</span></div><div class="line"><a name="l00277"></a><span class="lineno"><a class="line" href="structreiserfs__journal__list.html#a9f9936a49219dd995413557fc4c8ba84">  277</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structreiserfs__journal__cnode.html">reiserfs_journal_cnode</a> *<a class="code" href="structreiserfs__journal__list.html#a9f9936a49219dd995413557fc4c8ba84">j_realblock</a>;</div><div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="structreiserfs__journal__list.html#a4446bca167e181dd29da7b7b6c94f3f2">  278</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structreiserfs__journal__cnode.html">reiserfs_journal_cnode</a> *<a class="code" href="structreiserfs__journal__list.html#a4446bca167e181dd29da7b7b6c94f3f2">j_freedlist</a>; <span class="comment">/* list of buffers that were freed during this trans.  free each of these on flush */</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="comment">/* time ordered list of all active transactions */</span></div><div class="line"><a name="l00280"></a><span class="lineno"><a class="line" href="structreiserfs__journal__list.html#a74ce64d3eb9b8f24fcf5fd80658516dc">  280</a></span>&#160;    <span class="keyword">struct </span>list_head j_list;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">     * time ordered list of all transactions we haven&#39;t tried</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">     * to flush yet</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00286"></a><span class="lineno"><a class="line" href="structreiserfs__journal__list.html#a20fab3a4749310046904c518c59a8b30">  286</a></span>&#160;    <span class="keyword">struct </span>list_head j_working_list;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="comment">/* list of tail conversion targets in need of flush before commit */</span></div><div class="line"><a name="l00289"></a><span class="lineno"><a class="line" href="structreiserfs__journal__list.html#a0ba65f7e788fe32d7b1f790071ae87d4">  289</a></span>&#160;    <span class="keyword">struct </span>list_head j_tail_bh_list;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="comment">/* list of data=ordered buffers in need of flush before commit */</span></div><div class="line"><a name="l00292"></a><span class="lineno"><a class="line" href="structreiserfs__journal__list.html#a100babae1d479c534fed2d3d33d677f4">  292</a></span>&#160;    <span class="keyword">struct </span>list_head j_bh_list;</div><div class="line"><a name="l00293"></a><span class="lineno"><a class="line" href="structreiserfs__journal__list.html#a33610a5057e3f04d7847ef191db2b649">  293</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__journal__list.html#a33610a5057e3f04d7847ef191db2b649">j_refcount</a>;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;};</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html">  296</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structreiserfs__journal.html">reiserfs_journal</a> {</div><div class="line"><a name="l00297"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#a9f087ce1da2cf35db2c13bbc217bff62">  297</a></span>&#160;    <span class="keyword">struct </span>buffer_head **<a class="code" href="structreiserfs__journal.html#a9f087ce1da2cf35db2c13bbc217bff62">j_ap_blocks</a>;   <span class="comment">/* journal blocks on disk */</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="comment">/* newest journal block */</span></div><div class="line"><a name="l00299"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#a4a960beb6cfd213bd7dc290c8298be38">  299</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structreiserfs__journal__cnode.html">reiserfs_journal_cnode</a> *<a class="code" href="structreiserfs__journal.html#a4a960beb6cfd213bd7dc290c8298be38">j_last</a>;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="comment">/* oldest journal block.  start here for traverse */</span></div><div class="line"><a name="l00302"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#a1e9c578314b0327a28d771f861c09fd3">  302</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structreiserfs__journal__cnode.html">reiserfs_journal_cnode</a> *<a class="code" href="structreiserfs__journal.html#a1e9c578314b0327a28d771f861c09fd3">j_first</a>;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00304"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#a773f1d1d523dcd4095cd55a50e13b0e1">  304</a></span>&#160;    <span class="keyword">struct </span>block_device *<a class="code" href="structreiserfs__journal.html#a773f1d1d523dcd4095cd55a50e13b0e1">j_dev_bd</a>;</div><div class="line"><a name="l00305"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#aa70ca26840bbe31d5bd3417d84361e19">  305</a></span>&#160;    fmode_t <a class="code" href="structreiserfs__journal.html#aa70ca26840bbe31d5bd3417d84361e19">j_dev_mode</a>;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="comment">/* first block on s_dev of reserved area journal */</span></div><div class="line"><a name="l00308"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#a13acb2e1c53044eb1886c761fd8c617c">  308</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__journal.html#a13acb2e1c53044eb1886c761fd8c617c">j_1st_reserved_block</a>;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div><div class="line"><a name="l00310"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#ac09ad464205e07fbae3888cd57a4c7ad">  310</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="structreiserfs__journal.html#ac09ad464205e07fbae3888cd57a4c7ad">j_state</a>;</div><div class="line"><a name="l00311"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#accd86f8f6df0d07f7733e4ea37455a91">  311</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structreiserfs__journal.html#accd86f8f6df0d07f7733e4ea37455a91">j_trans_id</a>;</div><div class="line"><a name="l00312"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#a82f1e232a154b1b59e1d0814cba8dfbb">  312</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="structreiserfs__journal.html#a82f1e232a154b1b59e1d0814cba8dfbb">j_mount_id</a>;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="comment">/* start of current waiting commit (index into j_ap_blocks) */</span></div><div class="line"><a name="l00315"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#aaf1ee9ef3313bb245e5f60ff3b81d520">  315</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="structreiserfs__journal.html#aaf1ee9ef3313bb245e5f60ff3b81d520">j_start</a>;</div><div class="line"><a name="l00316"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#a8ec1ff98cc4fbe89184f4ffa374a80bf">  316</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="structreiserfs__journal.html#a8ec1ff98cc4fbe89184f4ffa374a80bf">j_len</a>;    <span class="comment">/* length of current waiting commit */</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="comment">/* number of buffers requested by journal_begin() */</span></div><div class="line"><a name="l00319"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#ae3014f096ff176c6286c48e865a1522f">  319</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="structreiserfs__journal.html#ae3014f096ff176c6286c48e865a1522f">j_len_alloc</a>;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div><div class="line"><a name="l00321"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#ac136a9b84f043a946bcc088e5a25cbb8">  321</a></span>&#160;    atomic_t <a class="code" href="structreiserfs__journal.html#ac136a9b84f043a946bcc088e5a25cbb8">j_wcount</a>;  <span class="comment">/* count of writers for current commit */</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="comment">/* batch count. allows turning X transactions into 1 */</span></div><div class="line"><a name="l00324"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#ab605881b497714809c900b44b657a5c1">  324</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="structreiserfs__journal.html#ab605881b497714809c900b44b657a5c1">j_bcount</a>;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="comment">/* first unflushed transactions offset */</span></div><div class="line"><a name="l00327"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#a30f1b8996be3ad8838a2f81745dafb93">  327</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="structreiserfs__journal.html#a30f1b8996be3ad8838a2f81745dafb93">j_first_unflushed_offset</a>;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="comment">/* last fully flushed journal timestamp */</span></div><div class="line"><a name="l00330"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#a6e182b7c5c8df2afc90481fecdd8bcf6">  330</a></span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="structreiserfs__journal.html#a6e182b7c5c8df2afc90481fecdd8bcf6">j_last_flush_trans_id</a>;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#a6dbfa8964373e4167d70f8e9d36770e5">  332</a></span>&#160;    <span class="keyword">struct </span>buffer_head *<a class="code" href="structreiserfs__journal.html#a6dbfa8964373e4167d70f8e9d36770e5">j_header_bh</a>;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#a08062c938f4a11a94ca1792c25424d38">  334</a></span>&#160;    time_t <a class="code" href="structreiserfs__journal.html#a08062c938f4a11a94ca1792c25424d38">j_trans_start_time</a>;  <span class="comment">/* time this transaction started */</span></div><div class="line"><a name="l00335"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#a1a24fa8778605e19b590b213a2dc12e3">  335</a></span>&#160;    <span class="keyword">struct </span>mutex j_mutex;</div><div class="line"><a name="l00336"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#a15bae5b3c26fb85a0d36738aa479c6f9">  336</a></span>&#160;    <span class="keyword">struct </span>mutex j_flush_mutex;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="comment">/* wait for current transaction to finish before starting new one */</span></div><div class="line"><a name="l00339"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#af85746a72811ebbc4066f871f9584890">  339</a></span>&#160;    wait_queue_head_t <a class="code" href="structreiserfs__journal.html#af85746a72811ebbc4066f871f9584890">j_join_wait</a>;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00341"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#a85bceff7c9faea1d9ec35fb0edd15a23">  341</a></span>&#160;    atomic_t <a class="code" href="structreiserfs__journal.html#a85bceff7c9faea1d9ec35fb0edd15a23">j_jlock</a>;       <span class="comment">/* lock for j_join_wait */</span></div><div class="line"><a name="l00342"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#ae2a95d794d66774728119051ce01c167">  342</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__journal.html#ae2a95d794d66774728119051ce01c167">j_list_bitmap_index</a>;    <span class="comment">/* number of next list bitmap to use */</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="comment">/* no more journal begins allowed. MUST sleep on j_join_wait */</span></div><div class="line"><a name="l00345"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#ad8fe60f6d6785da555cb39f9d834eb3b">  345</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__journal.html#ad8fe60f6d6785da555cb39f9d834eb3b">j_must_wait</a>;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="comment">/* next journal_end will flush all journal list */</span></div><div class="line"><a name="l00348"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#a5ed8b13003b468f2b2cc0e0e944ddca5">  348</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__journal.html#a5ed8b13003b468f2b2cc0e0e944ddca5">j_next_full_flush</a>;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="comment">/* next journal_end will flush all async commits */</span></div><div class="line"><a name="l00351"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#a0a797bb0ea0e5491b8e34659e4163b0d">  351</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__journal.html#a0a797bb0ea0e5491b8e34659e4163b0d">j_next_async_flush</a>;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div><div class="line"><a name="l00353"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#a041afb7d61a4c9182e92c5e54b501bac">  353</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__journal.html#a041afb7d61a4c9182e92c5e54b501bac">j_cnode_used</a>;   <span class="comment">/* number of cnodes on the used list */</span></div><div class="line"><a name="l00354"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#ae0cb8b18422648a98e33006ddc8969bf">  354</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__journal.html#ae0cb8b18422648a98e33006ddc8969bf">j_cnode_free</a>;   <span class="comment">/* number of cnodes on the free list */</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="comment">/* max number of blocks in a transaction.  */</span></div><div class="line"><a name="l00357"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#a65a81e6033ab2e55f2a73bb0c6d0954c">  357</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structreiserfs__journal.html#a65a81e6033ab2e55f2a73bb0c6d0954c">j_trans_max</a>;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="comment">/* max number of blocks to batch into a trans */</span></div><div class="line"><a name="l00360"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#afc67211e1a1eea132a2aeca93b57d846">  360</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structreiserfs__journal.html#afc67211e1a1eea132a2aeca93b57d846">j_max_batch</a>;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="comment">/* in seconds, how old can an async commit be */</span></div><div class="line"><a name="l00363"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#a25d33382a6314d63b716d2f6b1b3e089">  363</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structreiserfs__journal.html#a25d33382a6314d63b716d2f6b1b3e089">j_max_commit_age</a>;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="comment">/* in seconds, how old can a transaction be */</span></div><div class="line"><a name="l00366"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#a54e8f7e0518918f3053cfd05739f4c6f">  366</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structreiserfs__journal.html#a54e8f7e0518918f3053cfd05739f4c6f">j_max_trans_age</a>;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="comment">/* the default for the max commit age */</span></div><div class="line"><a name="l00369"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#a12fa9a9252dc49e678771f862d025fa0">  369</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structreiserfs__journal.html#a12fa9a9252dc49e678771f862d025fa0">j_default_max_commit_age</a>;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div><div class="line"><a name="l00371"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#a3412d5b03f12df5e4750f5e244751b57">  371</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structreiserfs__journal__cnode.html">reiserfs_journal_cnode</a> *<a class="code" href="structreiserfs__journal.html#a3412d5b03f12df5e4750f5e244751b57">j_cnode_free_list</a>;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="comment">/* orig pointer returned from vmalloc */</span></div><div class="line"><a name="l00374"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#addf3a395f6b60d908101ac097ddd8902">  374</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structreiserfs__journal__cnode.html">reiserfs_journal_cnode</a> *<a class="code" href="structreiserfs__journal.html#addf3a395f6b60d908101ac097ddd8902">j_cnode_free_orig</a>;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#afe0d7888dbb3c14f62474f5a3661eabe">  376</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structreiserfs__journal__list.html">reiserfs_journal_list</a> *<a class="code" href="structreiserfs__journal.html#afe0d7888dbb3c14f62474f5a3661eabe">j_current_jl</a>;</div><div class="line"><a name="l00377"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#a1efbf70a78479bb751ca9c10f5fa4223">  377</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__journal.html#a1efbf70a78479bb751ca9c10f5fa4223">j_free_bitmap_nodes</a>;</div><div class="line"><a name="l00378"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#a0462d8b9e85de45dceb8271dbc94863d">  378</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__journal.html#a0462d8b9e85de45dceb8271dbc94863d">j_used_bitmap_nodes</a>;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div><div class="line"><a name="l00380"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#ad8b0f32d0bda11a75e5b2a0780e0558e">  380</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__journal.html#ad8b0f32d0bda11a75e5b2a0780e0558e">j_num_lists</a>;    <span class="comment">/* total number of active transactions */</span></div><div class="line"><a name="l00381"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#a49327501fd0885551e8a18d849a320a5">  381</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__journal.html#a49327501fd0885551e8a18d849a320a5">j_num_work_lists</a>;   <span class="comment">/* number that need attention from kreiserfsd */</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="comment">/* debugging to make sure things are flushed in order */</span></div><div class="line"><a name="l00384"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#ace9b7800de39195443bc21d07fba2789">  384</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structreiserfs__journal.html#ace9b7800de39195443bc21d07fba2789">j_last_flush_id</a>;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="comment">/* debugging to make sure things are committed in order */</span></div><div class="line"><a name="l00387"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#a769e7cf2d78cee197e1d0fcde9a74341">  387</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structreiserfs__journal.html#a769e7cf2d78cee197e1d0fcde9a74341">j_last_commit_id</a>;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div><div class="line"><a name="l00389"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#af1e0dfbb89468ca0b234818a3511dd43">  389</a></span>&#160;    <span class="keyword">struct </span>list_head j_bitmap_nodes;</div><div class="line"><a name="l00390"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#ac302bb332b81f734693ea6ccd501463e">  390</a></span>&#160;    <span class="keyword">struct </span>list_head j_dirty_buffers;</div><div class="line"><a name="l00391"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#abe62eda2b9d3705ced6db292546a2557">  391</a></span>&#160;    spinlock_t <a class="code" href="structreiserfs__journal.html#abe62eda2b9d3705ced6db292546a2557">j_dirty_buffers_lock</a>;    <span class="comment">/* protects j_dirty_buffers */</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="comment">/* list of all active transactions */</span></div><div class="line"><a name="l00394"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#afb9fcd108c7f32487e0d509d0a7fef3b">  394</a></span>&#160;    <span class="keyword">struct </span>list_head j_journal_list;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="comment">/* lists that haven&#39;t been touched by writeback attempts */</span></div><div class="line"><a name="l00397"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#aaca05597a146fa1802dc8a2d88b35927">  397</a></span>&#160;    <span class="keyword">struct </span>list_head j_working_list;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="comment">/* hash table for real buffer heads in current trans */</span></div><div class="line"><a name="l00400"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#a7258410eb08638a81c334dc91dade127">  400</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structreiserfs__journal__cnode.html">reiserfs_journal_cnode</a> *j_hash_table[<a class="code" href="reiserfs_8h.html#a26222ea9304fc598061f100243d7d9ef">JOURNAL_HASH_SIZE</a>];</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="comment">/* hash table for all the real buffer heads in all the transactions */</span></div><div class="line"><a name="l00403"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#a29f576aeff4090ef44626b4f14953bcc">  403</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structreiserfs__journal__cnode.html">reiserfs_journal_cnode</a> *j_list_hash_table[<a class="code" href="reiserfs_8h.html#a26222ea9304fc598061f100243d7d9ef">JOURNAL_HASH_SIZE</a>];</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="comment">/* array of bitmaps to record the deleted blocks */</span></div><div class="line"><a name="l00406"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#add8aa8ebf714919486bf5830456ac9f4">  406</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structreiserfs__list__bitmap.html">reiserfs_list_bitmap</a> j_list_bitmap[<a class="code" href="reiserfs_8h.html#a9d8311084dce3b8ef4ac8dbc2ed4c0f3">JOURNAL_NUM_BITMAPS</a>];</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="comment">/* list of inodes which have preallocated blocks */</span></div><div class="line"><a name="l00409"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#aad5ab6f0901a690be6795296dc7acd11">  409</a></span>&#160;    <span class="keyword">struct </span>list_head j_prealloc_list;</div><div class="line"><a name="l00410"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#a3a62cf080ead416c75ecf7f16237e7a3">  410</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__journal.html#a3a62cf080ead416c75ecf7f16237e7a3">j_persistent_trans</a>;</div><div class="line"><a name="l00411"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#afdfa651e6aef38bbc94787ec93ce228c">  411</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="structreiserfs__journal.html#afdfa651e6aef38bbc94787ec93ce228c">j_max_trans_size</a>;</div><div class="line"><a name="l00412"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#ae8ab100a847cd727ff6ad9d689ef0c19">  412</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="structreiserfs__journal.html#ae8ab100a847cd727ff6ad9d689ef0c19">j_max_batch_size</a>;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#a877e3eec0210649968325fc6a272bb53">  414</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__journal.html#a877e3eec0210649968325fc6a272bb53">j_errno</a>;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="comment">/* when flushing ordered buffers, throttle new ordered writers */</span></div><div class="line"><a name="l00417"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#a5b80cbb3f5a688979814d045900cfd59">  417</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="mds__client_8c.html#a5f584af691004d9ca3bb703c82c071cc">delayed_work</a> j_work;</div><div class="line"><a name="l00418"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#a0cf386c20d802700fb14a44bd3ef1a41">  418</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structsuper__block.html">super_block</a> *<a class="code" href="structreiserfs__journal.html#a0cf386c20d802700fb14a44bd3ef1a41">j_work_sb</a>;</div><div class="line"><a name="l00419"></a><span class="lineno"><a class="line" href="structreiserfs__journal.html#af2688773514e397d3f298828a1026d24">  419</a></span>&#160;    atomic_t <a class="code" href="structreiserfs__journal.html#af2688773514e397d3f298828a1026d24">j_async_throttle</a>;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;};</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div><div class="line"><a name="l00422"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aa979f8afc12407cb4954a40a2be8fa27">  422</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="reiserfs_8h.html#aa979f8afc12407cb4954a40a2be8fa27">journal_state_bits</a> {</div><div class="line"><a name="l00423"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aa979f8afc12407cb4954a40a2be8fa27a52f680e736e07a95e961d84611ca30af">  423</a></span>&#160;    <a class="code" href="reiserfs_8h.html#aa979f8afc12407cb4954a40a2be8fa27a52f680e736e07a95e961d84611ca30af">J_WRITERS_BLOCKED</a> = 1,  <span class="comment">/* set when new writers not allowed */</span></div><div class="line"><a name="l00424"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aa979f8afc12407cb4954a40a2be8fa27abd7ff2a922b3f09d3e0b71264ad75b69">  424</a></span>&#160;    <a class="code" href="reiserfs_8h.html#aa979f8afc12407cb4954a40a2be8fa27abd7ff2a922b3f09d3e0b71264ad75b69">J_WRITERS_QUEUED</a>,    <span class="comment">/* set when log is full due to too many writers */</span></div><div class="line"><a name="l00425"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aa979f8afc12407cb4954a40a2be8fa27a2d4d150e98b299ab1afd23618d93fee0">  425</a></span>&#160;    <a class="code" href="reiserfs_8h.html#aa979f8afc12407cb4954a40a2be8fa27a2d4d150e98b299ab1afd23618d93fee0">J_ABORTED</a>,           <span class="comment">/* set when log is aborted */</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;};</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment">/* ick.  magic string to find desc blocks in the journal */</span></div><div class="line"><a name="l00429"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a4914b653cb55e5dd2ef56732ff2b1bb4">  429</a></span>&#160;<span class="preprocessor">#define JOURNAL_DESC_MAGIC &quot;ReIsErLB&quot;</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div><div class="line"><a name="l00431"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a12f0cf258ca7b09eff63744fbec18107">  431</a></span>&#160;<span class="keyword">typedef</span> __u32(*<a class="code" href="reiserfs_8h.html#a12f0cf258ca7b09eff63744fbec18107">hashf_t</a>) (<span class="keyword">const</span> <span class="keywordtype">signed</span> <span class="keywordtype">char</span> *, int);</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div><div class="line"><a name="l00433"></a><span class="lineno"><a class="line" href="structreiserfs__bitmap__info.html">  433</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structreiserfs__bitmap__info.html">reiserfs_bitmap_info</a> {</div><div class="line"><a name="l00434"></a><span class="lineno"><a class="line" href="structreiserfs__bitmap__info.html#a43f466f0b7ba7829eda0763419fce384">  434</a></span>&#160;    __u32 <a class="code" href="structreiserfs__bitmap__info.html#a43f466f0b7ba7829eda0763419fce384">free_count</a>;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;};</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="keyword">struct </span><a class="code" href="structproc__dir__entry.html">proc_dir_entry</a>;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="preprocessor">#if defined( CONFIG_PROC_FS ) &amp;&amp; defined( CONFIG_REISERFS_PROC_INFO )</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> stat_cnt_t;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structreiserfs__proc__info__data.html">reiserfs_proc_info_data</a> {</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    spinlock_t lock;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="keywordtype">int</span> exiting;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordtype">int</span> max_hash_collisions;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    stat_cnt_t breads;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    stat_cnt_t bread_miss;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    stat_cnt_t <a class="code" href="reiserfs_8h.html#a05b999f8f783c39fae7f82e29b684476">search_by_key</a>;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    stat_cnt_t search_by_key_fs_changed;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    stat_cnt_t search_by_key_restarted;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    stat_cnt_t insert_item_restarted;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    stat_cnt_t paste_into_item_restarted;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    stat_cnt_t cut_from_item_restarted;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    stat_cnt_t delete_solid_item_restarted;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    stat_cnt_t delete_item_restarted;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    stat_cnt_t leaked_oid;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    stat_cnt_t leaves_removable;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment">     * balances per level.</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">     * Use explicit 5 as MAX_HEIGHT is not visible yet.</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    stat_cnt_t balance_at[5];   <span class="comment">/* XXX */</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="comment">/* sbk == search_by_key */</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    stat_cnt_t sbk_read_at[5];  <span class="comment">/* XXX */</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    stat_cnt_t sbk_fs_changed[5];</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    stat_cnt_t sbk_restarted[5];</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    stat_cnt_t items_at[5]; <span class="comment">/* XXX */</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    stat_cnt_t free_at[5];  <span class="comment">/* XXX */</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    stat_cnt_t <a class="code" href="fix__node_8c.html#ac5ada1bdfc89f7b42693e461d4cb3011">can_node_be_removed</a>[5];  <span class="comment">/* XXX */</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="keywordtype">long</span> <span class="keywordtype">int</span> lnum[5];   <span class="comment">/* XXX */</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordtype">long</span> <span class="keywordtype">int</span> rnum[5];   <span class="comment">/* XXX */</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keywordtype">long</span> <span class="keywordtype">int</span> lbytes[5]; <span class="comment">/* XXX */</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keywordtype">long</span> <span class="keywordtype">int</span> rbytes[5]; <span class="comment">/* XXX */</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    stat_cnt_t <a class="code" href="fix__node_8c.html#a8704eb3688ed72bd6ec50fa6bd4637fa">get_neighbors</a>[5];</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    stat_cnt_t get_neighbors_restart[5];</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    stat_cnt_t need_l_neighbor[5];</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    stat_cnt_t need_r_neighbor[5];</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    stat_cnt_t free_block;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keyword">struct </span>__scan_bitmap_stats {</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        stat_cnt_t call;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        stat_cnt_t wait;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        stat_cnt_t <a class="code" href="inode_8c.html#abe0d76959e4da14fa8aa24a78e0da45c">bmap</a>;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        stat_cnt_t retry;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        stat_cnt_t in_journal_hint;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        stat_cnt_t in_journal_nohint;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        stat_cnt_t stolen;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    } <a class="code" href="reiserfs_2bitmap_8c.html#a07606fb68673f63ac428d55149dd8842">scan_bitmap</a>;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keyword">struct </span>__journal_stats {</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        stat_cnt_t in_journal;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        stat_cnt_t in_journal_bitmap;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        stat_cnt_t in_journal_reusable;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        stat_cnt_t <a class="code" href="reiserfs_2journal_8c.html#adc320802d7bf2737cf6e78c68974df0f">lock_journal</a>;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        stat_cnt_t lock_journal_wait;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        stat_cnt_t journal_being;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        stat_cnt_t journal_relock_writers;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        stat_cnt_t journal_relock_wcount;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        stat_cnt_t <a class="code" href="hpfs_2super_8c.html#ab8d9243816c39ae44a406c55cba5d2de">mark_dirty</a>;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        stat_cnt_t mark_dirty_already;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        stat_cnt_t mark_dirty_notjournal;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        stat_cnt_t restore_prepared;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        stat_cnt_t prepare;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        stat_cnt_t prepare_retry;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    } journal;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;} <a class="code" href="reiserfs_8h.html#a56d09856772826b8a556a73eb40c25bb">reiserfs_proc_info_data_t</a>;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00510"></a><span class="lineno"><a class="line" href="structreiserfs__proc__info__data.html">  510</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structreiserfs__proc__info__data.html">reiserfs_proc_info_data</a> {</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;} <a class="code" href="reiserfs_8h.html#a56d09856772826b8a556a73eb40c25bb">reiserfs_proc_info_data_t</a>;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment">/* Number of quota types we support */</span></div><div class="line"><a name="l00515"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ab367f44139fc1f298915d77367bc783d">  515</a></span>&#160;<span class="preprocessor">#define REISERFS_MAXQUOTAS 2</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment">/* reiserfs union of in-core super block data */</span></div><div class="line"><a name="l00518"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html">  518</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structreiserfs__sb__info.html">reiserfs_sb_info</a> {</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="comment">/* Buffer containing the super block */</span></div><div class="line"><a name="l00520"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#adb9d2be731b19dfcb1be8f90e3a9521b">  520</a></span>&#160;    <span class="keyword">struct </span>buffer_head *<a class="code" href="structreiserfs__sb__info.html#adb9d2be731b19dfcb1be8f90e3a9521b">s_sbh</a>;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="comment">/* Pointer to the on-disk super block in the buffer */</span></div><div class="line"><a name="l00523"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#a06ce31d699e52c3c13f527bc50f54f98">  523</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structreiserfs__super__block.html">reiserfs_super_block</a> *<a class="code" href="structreiserfs__sb__info.html#a06ce31d699e52c3c13f527bc50f54f98">s_rs</a>;</div><div class="line"><a name="l00524"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#abb3eb74c219233dbee19bdc773eecfb2">  524</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structreiserfs__bitmap__info.html">reiserfs_bitmap_info</a> *<a class="code" href="structreiserfs__sb__info.html#abb3eb74c219233dbee19bdc773eecfb2">s_ap_bitmap</a>;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="comment">/* pointer to journal information */</span></div><div class="line"><a name="l00527"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#a336c4d67914767441651aa41966a82ca">  527</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structreiserfs__journal.html">reiserfs_journal</a> *<a class="code" href="structreiserfs__sb__info.html#a336c4d67914767441651aa41966a82ca">s_journal</a>;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div><div class="line"><a name="l00529"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#ace6e93f639e2f6479c54cc3a8b43f015">  529</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="structreiserfs__sb__info.html#ace6e93f639e2f6479c54cc3a8b43f015">s_mount_state</a>;   <span class="comment">/* reiserfs state (valid, invalid) */</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="comment">/* Serialize writers access, replace the old bkl */</span></div><div class="line"><a name="l00532"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#ad54dafe63409a547da2e949a9759af7f">  532</a></span>&#160;    <span class="keyword">struct </span>mutex lock;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="comment">/* Owner of the lock (can be recursive) */</span></div><div class="line"><a name="l00535"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#afb83c381693b5f48ca4d01e74e14f607">  535</a></span>&#160;    <span class="keyword">struct </span>task_struct *<a class="code" href="structreiserfs__sb__info.html#afb83c381693b5f48ca4d01e74e14f607">lock_owner</a>;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="comment">/* Depth of the lock, start from -1 like the bkl */</span></div><div class="line"><a name="l00538"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#a90e1c9750d6494fa23a1e104772fbd81">  538</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__sb__info.html#a90e1c9750d6494fa23a1e104772fbd81">lock_depth</a>;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div><div class="line"><a name="l00540"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#aa1cbb3f4dd1a2d19741e635bcbbe9345">  540</a></span>&#160;    <span class="keyword">struct </span>workqueue_struct *<a class="code" href="structreiserfs__sb__info.html#aa1cbb3f4dd1a2d19741e635bcbbe9345">commit_wq</a>;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="comment">/* Comment? -Hans */</span></div><div class="line"><a name="l00543"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#abf071ceefc3d8fd70b3e883060efb809">  543</a></span>&#160;    void (*end_io_handler) (<span class="keyword">struct </span>buffer_head *, int);</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment">     * pointer to function which is used to sort names in directory.</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment">     * Set on mount</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00549"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#a2d10bddd60b623475686d2cb0bb1808c">  549</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a12f0cf258ca7b09eff63744fbec18107">hashf_t</a> <a class="code" href="structreiserfs__sb__info.html#a2d10bddd60b623475686d2cb0bb1808c">s_hash_function</a>;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="comment">/* reiserfs&#39;s mount options are set here */</span></div><div class="line"><a name="l00552"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#a3e902b029dcc81fa8d9b10b59aed247d">  552</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="structreiserfs__sb__info.html#a3e902b029dcc81fa8d9b10b59aed247d">s_mount_opt</a>;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="comment">/* This is a structure that describes block allocator options */</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="keyword">struct </span>{</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        <span class="comment">/* Bitfield for enable/disable kind of options */</span></div><div class="line"><a name="l00557"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#a55c3d39c69b700ff7e9dd4471759dc08">  557</a></span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="structreiserfs__sb__info.html#a55c3d39c69b700ff7e9dd4471759dc08">bits</a>;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="comment">         * size started from which we consider file</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="comment">         * to be a large one (in blocks)</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00563"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#a08884c0d591abe9aced34b010d679c74">  563</a></span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="structreiserfs__sb__info.html#a08884c0d591abe9aced34b010d679c74">large_file_size</a>;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div><div class="line"><a name="l00565"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#af7061242bd682e8c97f5a170bdd7a14a">  565</a></span>&#160;        <span class="keywordtype">int</span> <a class="code" href="structreiserfs__sb__info.html#af7061242bd682e8c97f5a170bdd7a14a">border</a>; <span class="comment">/* percentage of disk, border takes */</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="comment">         * Minimal file size (in blocks) starting</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment">         * from which we do preallocations</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00571"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#a691a25b84d073eaaf3b551b90279051f">  571</a></span>&#160;        <span class="keywordtype">int</span> <a class="code" href="structreiserfs__sb__info.html#a691a25b84d073eaaf3b551b90279051f">preallocmin</a>;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment">         * Number of blocks we try to prealloc when file</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="comment">         * reaches preallocmin size (in blocks) or prealloc_list</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="comment">         is empty.</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00578"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#a69078b5eab2f5c813881f30de8a429e8">  578</a></span>&#160;        <span class="keywordtype">int</span> <a class="code" href="structreiserfs__sb__info.html#a69078b5eab2f5c813881f30de8a429e8">preallocsize</a>;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    } s_alloc_options;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="comment">/* Comment? -Hans */</span></div><div class="line"><a name="l00582"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#a5c0085c15ece0dea445a0614604a2d7b">  582</a></span>&#160;    wait_queue_head_t <a class="code" href="structreiserfs__sb__info.html#a5c0085c15ece0dea445a0614604a2d7b">s_wait</a>;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="comment">/* increased by one every time the  tree gets re-balanced */</span></div><div class="line"><a name="l00584"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#a536081b8b9693365468274b2f8b07007">  584</a></span>&#160;    atomic_t <a class="code" href="structreiserfs__sb__info.html#a536081b8b9693365468274b2f8b07007">s_generation_counter</a>;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="comment">/* File system properties. Currently holds on-disk FS format */</span></div><div class="line"><a name="l00587"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#a2129eee6bd959e8602f15081fed4d059">  587</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="structreiserfs__sb__info.html#a2129eee6bd959e8602f15081fed4d059">s_properties</a>;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="comment">/* session statistics */</span></div><div class="line"><a name="l00590"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#accb3b002b63b76fd072246c3c72ba0ec">  590</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__sb__info.html#accb3b002b63b76fd072246c3c72ba0ec">s_disk_reads</a>;</div><div class="line"><a name="l00591"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#aa9be28cdbc60b73b91267c51bbfd516d">  591</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__sb__info.html#aa9be28cdbc60b73b91267c51bbfd516d">s_disk_writes</a>;</div><div class="line"><a name="l00592"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#a97f48be742bb3b33edd6b63561e6701e">  592</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__sb__info.html#a97f48be742bb3b33edd6b63561e6701e">s_fix_nodes</a>;</div><div class="line"><a name="l00593"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#adcad24d25a8bdf6fdd52511c028a5404">  593</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__sb__info.html#adcad24d25a8bdf6fdd52511c028a5404">s_do_balance</a>;</div><div class="line"><a name="l00594"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#ae20a49593fe1e5b03b9999b6f3236119">  594</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__sb__info.html#ae20a49593fe1e5b03b9999b6f3236119">s_unneeded_left_neighbor</a>;</div><div class="line"><a name="l00595"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#abdcebcd505f633ee7332680a57c3a6d1">  595</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__sb__info.html#abdcebcd505f633ee7332680a57c3a6d1">s_good_search_by_key_reada</a>;</div><div class="line"><a name="l00596"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#a62112edc64000ce2979fadcd5401984b">  596</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__sb__info.html#a62112edc64000ce2979fadcd5401984b">s_bmaps</a>;</div><div class="line"><a name="l00597"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#ae156eb95410d05ca2d969a7fb4ffb955">  597</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__sb__info.html#ae156eb95410d05ca2d969a7fb4ffb955">s_bmaps_without_search</a>;</div><div class="line"><a name="l00598"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#a113cc4454f01cf38d600d83475682799">  598</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__sb__info.html#a113cc4454f01cf38d600d83475682799">s_direct2indirect</a>;</div><div class="line"><a name="l00599"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#afc33b967bef86fd629293f55590fa163">  599</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__sb__info.html#afc33b967bef86fd629293f55590fa163">s_indirect2direct</a>;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="comment">     * set up when it&#39;s ok for reiserfs_read_inode2() to read from</span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="comment">     * disk inode with nlink==0. Currently this is only used during</span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="comment">     * finish_unfinished() processing at mount time</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00606"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#a373af6da8c8f988c92e9aaa974dfa30d">  606</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__sb__info.html#a373af6da8c8f988c92e9aaa974dfa30d">s_is_unlinked_ok</a>;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div><div class="line"><a name="l00608"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#ae4f51636b9abaad4fb30a39181534443">  608</a></span>&#160;    <a class="code" href="structreiserfs__proc__info__data.html">reiserfs_proc_info_data_t</a> <a class="code" href="structreiserfs__sb__info.html#ae4f51636b9abaad4fb30a39181534443">s_proc_info_data</a>;</div><div class="line"><a name="l00609"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#a24f55651511a31e70b1aa0048b2fc8a3">  609</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structproc__dir__entry.html">proc_dir_entry</a> *<a class="code" href="structreiserfs__sb__info.html#a24f55651511a31e70b1aa0048b2fc8a3">procdir</a>;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="comment">/* amount of blocks reserved for further allocations */</span></div><div class="line"><a name="l00612"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#a6668f6b75f77612a1e427cbc93f39d67">  612</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__sb__info.html#a6668f6b75f77612a1e427cbc93f39d67">reserved_blocks</a>;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="comment">/* this lock on now only used to protect reserved_blocks variable */</span></div><div class="line"><a name="l00616"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#acd36942730ec79c111c68dd36ff2699e">  616</a></span>&#160;    spinlock_t <a class="code" href="structreiserfs__sb__info.html#acd36942730ec79c111c68dd36ff2699e">bitmap_lock</a>;</div><div class="line"><a name="l00617"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#aee26edc42ec0d179110d074f1441b26a">  617</a></span>&#160;    <span class="keyword">struct </span>dentry *<a class="code" href="structreiserfs__sb__info.html#aee26edc42ec0d179110d074f1441b26a">priv_root</a>;   <span class="comment">/* root of /.reiserfs_priv */</span></div><div class="line"><a name="l00618"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#a21b95f2f99e3fb29be7902b89f2e7304">  618</a></span>&#160;    <span class="keyword">struct </span>dentry *<a class="code" href="structreiserfs__sb__info.html#a21b95f2f99e3fb29be7902b89f2e7304">xattr_root</a>;  <span class="comment">/* root of /.reiserfs_priv/xattrs */</span></div><div class="line"><a name="l00619"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#a91522b8b92104e95d06896529dfb288d">  619</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__sb__info.html#a91522b8b92104e95d06896529dfb288d">j_errno</a>;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div><div class="line"><a name="l00621"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#a8aaaf71c120ba83d0381cde6e91f8afd">  621</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__sb__info.html#a8aaaf71c120ba83d0381cde6e91f8afd">work_queued</a>;              <span class="comment">/* non-zero delayed work is queued */</span></div><div class="line"><a name="l00622"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#adf566f04067de1151a1387fd1fbb28d7">  622</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="mds__client_8c.html#a5f584af691004d9ca3bb703c82c071cc">delayed_work</a> old_work; <span class="comment">/* old transactions flush delayed work */</span></div><div class="line"><a name="l00623"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#a2d2f27deb3dcc8d0858eead0de2c7a9d">  623</a></span>&#160;    spinlock_t <a class="code" href="structreiserfs__sb__info.html#a2d2f27deb3dcc8d0858eead0de2c7a9d">old_work_lock</a>;     <span class="comment">/* protects old_work and work_queued */</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="preprocessor">#ifdef CONFIG_QUOTA</span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordtype">char</span> *s_qf_names[<a class="code" href="reiserfs_8h.html#ab367f44139fc1f298915d77367bc783d">REISERFS_MAXQUOTAS</a>];</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="keywordtype">int</span> s_jquota_fmt;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00629"></a><span class="lineno"><a class="line" href="structreiserfs__sb__info.html#a4ef5d858b355a258204559fd2e330ac6">  629</a></span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="structreiserfs__sb__info.html#a4ef5d858b355a258204559fd2e330ac6">s_jdev</a>;       <span class="comment">/* Stored jdev for mount option showing */</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="preprocessor">#ifdef CONFIG_REISERFS_CHECK</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="comment">     * Detects whether more than one copy of tb exists per superblock</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="comment">     * as a means of checking whether do_balance is executing</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="comment">     * concurrently against another tree reader/writer on a same</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="comment">     * mount point.</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="keyword">struct </span><a class="code" href="structtree__balance.html">tree_balance</a> *<a class="code" href="reiserfs_2journal_8c.html#ac7fea8804393fb7204d6cb84b542aa00">cur_tb</a>;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;};</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="comment">/* Definitions of reiserfs on-disk properties: */</span></div><div class="line"><a name="l00643"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ae3313cc44adee2145222800aadd2df28">  643</a></span>&#160;<span class="preprocessor">#define REISERFS_3_5 0</span></div><div class="line"><a name="l00644"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a3066b5c878aea7d2939090b8c869a40e">  644</a></span>&#160;<span class="preprocessor">#define REISERFS_3_6 1</span></div><div class="line"><a name="l00645"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a986b15fe87618296f3c4d0e901f4997c">  645</a></span>&#160;<span class="preprocessor">#define REISERFS_OLD_FORMAT 2</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="comment">/* Mount options */</span></div><div class="line"><a name="l00648"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85">  648</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85">reiserfs_mount_options</a> {</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="comment">/* large tails will be created in a session */</span></div><div class="line"><a name="l00650"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85ab9c3a8df5fff83f5a606c05af14f73c2">  650</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85ab9c3a8df5fff83f5a606c05af14f73c2">REISERFS_LARGETAIL</a>,</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment">     * small (for files less than block size) tails will</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="comment">     * be created in a session</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00655"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85ae08742994539d4c47773afb11a279ff5">  655</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85ae08742994539d4c47773afb11a279ff5">REISERFS_SMALLTAIL</a>,</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="comment">/* replay journal and return 0. Use by fsck */</span></div><div class="line"><a name="l00658"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a1d90fcfaf015918bedb10825e7af74c9">  658</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a1d90fcfaf015918bedb10825e7af74c9">REPLAYONLY</a>,</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="comment">     * -o conv: causes conversion of old format super block to the</span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="comment">     * new format. If not specified - old partition will be dealt</span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="comment">     * with in a manner of 3.5.x</span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00665"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85aa9834e801e36a59fd864b739821c78ca">  665</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85aa9834e801e36a59fd864b739821c78ca">REISERFS_CONVERT</a>,</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="comment">     * -o hash={tea, rupasov, r5, detect} is meant for properly mounting</span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="comment">     * reiserfs disks from 3.5.19 or earlier.  99% of the time, this</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="comment">     * option is not required.  If the normal autodection code can&#39;t</span></div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="comment">     * determine which hash to use (because both hashes had the same</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="comment">     * value for a file) use this option to force a specific hash.</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="comment">     * It won&#39;t allow you to override the existing hash on the FS, so</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="comment">     * if you have a tea hash disk, and mount with -o hash=rupasov,</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="comment">     * the mount will fail.</span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00677"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a22a590a11963a403e5fe74054e312a31">  677</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a22a590a11963a403e5fe74054e312a31">FORCE_TEA_HASH</a>,     <span class="comment">/* try to force tea hash on mount */</span></div><div class="line"><a name="l00678"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a5e5e2bbe1a852f37b904ed3e79ecc3ee">  678</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a5e5e2bbe1a852f37b904ed3e79ecc3ee">FORCE_RUPASOV_HASH</a>, <span class="comment">/* try to force rupasov hash on mount */</span></div><div class="line"><a name="l00679"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a2bf918e4453e2000eb4cb9850be1e285">  679</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a2bf918e4453e2000eb4cb9850be1e285">FORCE_R5_HASH</a>,      <span class="comment">/* try to force rupasov hash on mount */</span></div><div class="line"><a name="l00680"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a1847249aa868d633efc07e16aabab8b4">  680</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a1847249aa868d633efc07e16aabab8b4">FORCE_HASH_DETECT</a>,  <span class="comment">/* try to detect hash function on mount */</span></div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div><div class="line"><a name="l00682"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a5d37a2d04db021d9c41696a549a97bd2">  682</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a5d37a2d04db021d9c41696a549a97bd2">REISERFS_DATA_LOG</a>,</div><div class="line"><a name="l00683"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a5a77c8c90431d37ed9227a7d5d6388b9">  683</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a5a77c8c90431d37ed9227a7d5d6388b9">REISERFS_DATA_ORDERED</a>,</div><div class="line"><a name="l00684"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a1fe592ddbbd4b84f27638f7355f1fc19">  684</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a1fe592ddbbd4b84f27638f7355f1fc19">REISERFS_DATA_WRITEBACK</a>,</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="comment">     * used for testing experimental features, makes benchmarking new</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="comment">     * features with and without more convenient, should never be used by</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="comment">     * users in any code shipped to users (ideally)</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div><div class="line"><a name="l00692"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85ae95aecc46eecaad09ff7eafc53721bde">  692</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85ae95aecc46eecaad09ff7eafc53721bde">REISERFS_NO_BORDER</a>,</div><div class="line"><a name="l00693"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a3a23adc9643c69c804fb9c4263637dfd">  693</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a3a23adc9643c69c804fb9c4263637dfd">REISERFS_NO_UNHASHED_RELOCATION</a>,</div><div class="line"><a name="l00694"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a08a20916e5419b499b857dbd4d5381a6">  694</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a08a20916e5419b499b857dbd4d5381a6">REISERFS_HASHED_RELOCATION</a>,</div><div class="line"><a name="l00695"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a1a03e62a877c3fff8a09ec784de0a857">  695</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a1a03e62a877c3fff8a09ec784de0a857">REISERFS_ATTRS</a>,</div><div class="line"><a name="l00696"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a4121a5ec9dfa574b8f5329b05a00bb34">  696</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a4121a5ec9dfa574b8f5329b05a00bb34">REISERFS_XATTRS_USER</a>,</div><div class="line"><a name="l00697"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85ae19d19a04028eb19cb47ffe9c4adabbe">  697</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85ae19d19a04028eb19cb47ffe9c4adabbe">REISERFS_POSIXACL</a>,</div><div class="line"><a name="l00698"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a72af62b4b8a91f0ad0817db28e3718a6">  698</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a72af62b4b8a91f0ad0817db28e3718a6">REISERFS_EXPOSE_PRIVROOT</a>,</div><div class="line"><a name="l00699"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a900427c872d5b43ca863d8c7c3c5f193">  699</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a900427c872d5b43ca863d8c7c3c5f193">REISERFS_BARRIER_NONE</a>,</div><div class="line"><a name="l00700"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a7fb95424e400f3421800cff5abc4e917">  700</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a7fb95424e400f3421800cff5abc4e917">REISERFS_BARRIER_FLUSH</a>,</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="comment">/* Actions on error */</span></div><div class="line"><a name="l00703"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a4d61db96dd731b024a039ef80f8255d0">  703</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a4d61db96dd731b024a039ef80f8255d0">REISERFS_ERROR_PANIC</a>,</div><div class="line"><a name="l00704"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85adca7a5e47b77aaf45e0d2ec028456076">  704</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85adca7a5e47b77aaf45e0d2ec028456076">REISERFS_ERROR_RO</a>,</div><div class="line"><a name="l00705"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a0dcbd0a6a4ed5c749a5e08b3b93d69c6">  705</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a0dcbd0a6a4ed5c749a5e08b3b93d69c6">REISERFS_ERROR_CONTINUE</a>,</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;</div><div class="line"><a name="l00707"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a60d2dda6ef43656863ca29f6d93d4db1">  707</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a60d2dda6ef43656863ca29f6d93d4db1">REISERFS_USRQUOTA</a>,  <span class="comment">/* User quota option specified */</span></div><div class="line"><a name="l00708"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85aeafa6c96183649c9e865d92691cf418c">  708</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85aeafa6c96183649c9e865d92691cf418c">REISERFS_GRPQUOTA</a>,  <span class="comment">/* Group quota option specified */</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;</div><div class="line"><a name="l00710"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85aa07e1c78ec3a7b71439bf1a27acf7aa5">  710</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85aa07e1c78ec3a7b71439bf1a27acf7aa5">REISERFS_TEST1</a>,</div><div class="line"><a name="l00711"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85aca76b960f4dff3c863746cf9fa3ce4cf">  711</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85aca76b960f4dff3c863746cf9fa3ce4cf">REISERFS_TEST2</a>,</div><div class="line"><a name="l00712"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85aaf92b0174e48efa387e58e763376a8ff">  712</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85aaf92b0174e48efa387e58e763376a8ff">REISERFS_TEST3</a>,</div><div class="line"><a name="l00713"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85ac487054305e939e92a7d066819cbd0be">  713</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85ac487054305e939e92a7d066819cbd0be">REISERFS_TEST4</a>,</div><div class="line"><a name="l00714"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a094f76523cec885faed273181c7e4440">  714</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a094f76523cec885faed273181c7e4440">REISERFS_UNSUPPORTED_OPT</a>,</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;};</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;</div><div class="line"><a name="l00717"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a66f200ce5f9d368e9d4d8b25e5e42c7e">  717</a></span>&#160;<span class="preprocessor">#define reiserfs_r5_hash(s) (REISERFS_SB(s)-&gt;s_mount_opt &amp; (1 &lt;&lt; FORCE_R5_HASH))</span></div><div class="line"><a name="l00718"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a480f724ee14355508e3551180f304238">  718</a></span>&#160;<span class="preprocessor">#define reiserfs_rupasov_hash(s) (REISERFS_SB(s)-&gt;s_mount_opt &amp; (1 &lt;&lt; FORCE_RUPASOV_HASH))</span></div><div class="line"><a name="l00719"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a6955a401dbbc1cb064c73fdeb9b682c1">  719</a></span>&#160;<span class="preprocessor">#define reiserfs_tea_hash(s) (REISERFS_SB(s)-&gt;s_mount_opt &amp; (1 &lt;&lt; FORCE_TEA_HASH))</span></div><div class="line"><a name="l00720"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a09ef15342f08b606935feb5afce84876">  720</a></span>&#160;<span class="preprocessor">#define reiserfs_hash_detect(s) (REISERFS_SB(s)-&gt;s_mount_opt &amp; (1 &lt;&lt; FORCE_HASH_DETECT))</span></div><div class="line"><a name="l00721"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a92591709eaee42ba838bc531685a7aa9">  721</a></span>&#160;<span class="preprocessor">#define reiserfs_no_border(s) (REISERFS_SB(s)-&gt;s_mount_opt &amp; (1 &lt;&lt; REISERFS_NO_BORDER))</span></div><div class="line"><a name="l00722"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a1b2c63f0c5881b1fc1c8286b9ccb5ece">  722</a></span>&#160;<span class="preprocessor">#define reiserfs_no_unhashed_relocation(s) (REISERFS_SB(s)-&gt;s_mount_opt &amp; (1 &lt;&lt; REISERFS_NO_UNHASHED_RELOCATION))</span></div><div class="line"><a name="l00723"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a648c8761fc6f32b966ab8eadd8fece6d">  723</a></span>&#160;<span class="preprocessor">#define reiserfs_hashed_relocation(s) (REISERFS_SB(s)-&gt;s_mount_opt &amp; (1 &lt;&lt; REISERFS_HASHED_RELOCATION))</span></div><div class="line"><a name="l00724"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a7f61efd4792f05070ba9f7dd6a905eab">  724</a></span>&#160;<span class="preprocessor">#define reiserfs_test4(s) (REISERFS_SB(s)-&gt;s_mount_opt &amp; (1 &lt;&lt; REISERFS_TEST4))</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;</div><div class="line"><a name="l00726"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a89edee902a2e655d88c739a97fd6bf71">  726</a></span>&#160;<span class="preprocessor">#define have_large_tails(s) (REISERFS_SB(s)-&gt;s_mount_opt &amp; (1 &lt;&lt; REISERFS_LARGETAIL))</span></div><div class="line"><a name="l00727"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aab0159f5caa94d7272e92abba05d532d">  727</a></span>&#160;<span class="preprocessor">#define have_small_tails(s) (REISERFS_SB(s)-&gt;s_mount_opt &amp; (1 &lt;&lt; REISERFS_SMALLTAIL))</span></div><div class="line"><a name="l00728"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ae15869a1314a75722f35fda7b376436f">  728</a></span>&#160;<span class="preprocessor">#define replay_only(s) (REISERFS_SB(s)-&gt;s_mount_opt &amp; (1 &lt;&lt; REPLAYONLY))</span></div><div class="line"><a name="l00729"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a031ac894def30e9f205f560e36294c8c">  729</a></span>&#160;<span class="preprocessor">#define reiserfs_attrs(s) (REISERFS_SB(s)-&gt;s_mount_opt &amp; (1 &lt;&lt; REISERFS_ATTRS))</span></div><div class="line"><a name="l00730"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aa0ffd040303bc64bc9f13db6032bafe6">  730</a></span>&#160;<span class="preprocessor">#define old_format_only(s) (REISERFS_SB(s)-&gt;s_properties &amp; (1 &lt;&lt; REISERFS_3_5))</span></div><div class="line"><a name="l00731"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#af2a1702d99ce53a1f6a4fe40a2685288">  731</a></span>&#160;<span class="preprocessor">#define convert_reiserfs(s) (REISERFS_SB(s)-&gt;s_mount_opt &amp; (1 &lt;&lt; REISERFS_CONVERT))</span></div><div class="line"><a name="l00732"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#afcc8c6aec0ae67fbfd708896dab893b4">  732</a></span>&#160;<span class="preprocessor">#define reiserfs_data_log(s) (REISERFS_SB(s)-&gt;s_mount_opt &amp; (1 &lt;&lt; REISERFS_DATA_LOG))</span></div><div class="line"><a name="l00733"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a266da32151d2b7fc1e3e81f315f28919">  733</a></span>&#160;<span class="preprocessor">#define reiserfs_data_ordered(s) (REISERFS_SB(s)-&gt;s_mount_opt &amp; (1 &lt;&lt; REISERFS_DATA_ORDERED))</span></div><div class="line"><a name="l00734"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a6a943061f6d892a44ca92811e0881589">  734</a></span>&#160;<span class="preprocessor">#define reiserfs_data_writeback(s) (REISERFS_SB(s)-&gt;s_mount_opt &amp; (1 &lt;&lt; REISERFS_DATA_WRITEBACK))</span></div><div class="line"><a name="l00735"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a879fb51a47bf3102560e66b51ce2bce8">  735</a></span>&#160;<span class="preprocessor">#define reiserfs_xattrs_user(s) (REISERFS_SB(s)-&gt;s_mount_opt &amp; (1 &lt;&lt; REISERFS_XATTRS_USER))</span></div><div class="line"><a name="l00736"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#abbcb8d3ef6b31fa6bac9b174204206fb">  736</a></span>&#160;<span class="preprocessor">#define reiserfs_posixacl(s) (REISERFS_SB(s)-&gt;s_mount_opt &amp; (1 &lt;&lt; REISERFS_POSIXACL))</span></div><div class="line"><a name="l00737"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ac011acc4e640b1166cc56b3457462d7e">  737</a></span>&#160;<span class="preprocessor">#define reiserfs_expose_privroot(s) (REISERFS_SB(s)-&gt;s_mount_opt &amp; (1 &lt;&lt; REISERFS_EXPOSE_PRIVROOT))</span></div><div class="line"><a name="l00738"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a2e68fbbae55c0f188c7199d2ae2de399">  738</a></span>&#160;<span class="preprocessor">#define reiserfs_xattrs_optional(s) (reiserfs_xattrs_user(s) || reiserfs_posixacl(s))</span></div><div class="line"><a name="l00739"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a7a19ce2760601b451ec5471a0ab27f5e">  739</a></span>&#160;<span class="preprocessor">#define reiserfs_barrier_none(s) (REISERFS_SB(s)-&gt;s_mount_opt &amp; (1 &lt;&lt; REISERFS_BARRIER_NONE))</span></div><div class="line"><a name="l00740"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a8556f1e508b01d392665899bcb68b22f">  740</a></span>&#160;<span class="preprocessor">#define reiserfs_barrier_flush(s) (REISERFS_SB(s)-&gt;s_mount_opt &amp; (1 &lt;&lt; REISERFS_BARRIER_FLUSH))</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;</div><div class="line"><a name="l00742"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ad5529a4eb13574d09bbe6793391b193b">  742</a></span>&#160;<span class="preprocessor">#define reiserfs_error_panic(s) (REISERFS_SB(s)-&gt;s_mount_opt &amp; (1 &lt;&lt; REISERFS_ERROR_PANIC))</span></div><div class="line"><a name="l00743"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a89335f1147c1c03814eb9f863769e523">  743</a></span>&#160;<span class="preprocessor">#define reiserfs_error_ro(s) (REISERFS_SB(s)-&gt;s_mount_opt &amp; (1 &lt;&lt; REISERFS_ERROR_RO))</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a7483a2c7dd08cecc2c7dff62efbc769d">reiserfs_file_buffer</a>(<span class="keyword">struct</span> buffer_head *bh, <span class="keywordtype">int</span> <a class="code" href="cifspdu_8h.html#a7e28d0d49fe972b6aea4a399c7bc0cb0">list</a>);</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="keyword">extern</span> <span class="keyword">struct </span>file_system_type <a class="code" href="reiserfs_8h.html#a1331d20c421de1074e0e861aeb2288e5">reiserfs_fs_type</a>;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a98af7bd7310f2d9ed4ea14d179174b57">reiserfs_resize</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>);</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="preprocessor">#define CARRY_ON                0</span></div><div class="line"><a name="l00750"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a4c9745de29f82b480d46509a9baf7e39">  750</a></span>&#160;<span class="preprocessor">#define SCHEDULE_OCCURRED       1</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div><div class="line"><a name="l00752"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a66e95ac416e5432a754ab481f837f775">  752</a></span>&#160;<span class="preprocessor">#define SB_BUFFER_WITH_SB(s) (REISERFS_SB(s)-&gt;s_sbh)</span></div><div class="line"><a name="l00753"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ab7a39cc70b302457196c65960974f4d6">  753</a></span>&#160;<span class="preprocessor">#define SB_JOURNAL(s) (REISERFS_SB(s)-&gt;s_journal)</span></div><div class="line"><a name="l00754"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ae32e4a55804f6cef35c1b784f4a9356d">  754</a></span>&#160;<span class="preprocessor">#define SB_JOURNAL_1st_RESERVED_BLOCK(s) (SB_JOURNAL(s)-&gt;j_1st_reserved_block)</span></div><div class="line"><a name="l00755"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a226eb157c9cac1fc375428175d7b5562">  755</a></span>&#160;<span class="preprocessor">#define SB_JOURNAL_LEN_FREE(s) (SB_JOURNAL(s)-&gt;j_journal_len_free)</span></div><div class="line"><a name="l00756"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#affe2aa037d9cdfd1cbf1f9b2280019ac">  756</a></span>&#160;<span class="preprocessor">#define SB_AP_BITMAP(s) (REISERFS_SB(s)-&gt;s_ap_bitmap)</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;</div><div class="line"><a name="l00758"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ae6206a81eea5ea56e2bad24939c215d7">  758</a></span>&#160;<span class="preprocessor">#define SB_DISK_JOURNAL_HEAD(s) (SB_JOURNAL(s)-&gt;j_header_bh-&gt;)</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;</div><div class="line"><a name="l00760"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ab8970f7737c6294089c39c56514d1c3a">  760</a></span>&#160;<span class="preprocessor">#define reiserfs_is_journal_aborted(journal) (unlikely (__reiserfs_is_journal_aborted (journal)))</span></div><div class="line"><a name="l00761"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a63f109110f80024832d4504d659aaa85">  761</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a63f109110f80024832d4504d659aaa85">__reiserfs_is_journal_aborted</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__journal.html">reiserfs_journal</a></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                        *journal)</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;{</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <span class="keywordflow">return</span> test_bit(<a class="code" href="reiserfs_8h.html#aa979f8afc12407cb4954a40a2be8fa27a2d4d150e98b299ab1afd23618d93fee0">J_ABORTED</a>, &amp;journal-&gt;<a class="code" href="structreiserfs__journal.html#ac09ad464205e07fbae3888cd57a4c7ad">j_state</a>);</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;}</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="comment"> * Locking primitives. The write lock is a per superblock</span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="comment"> * special mutex that has properties close to the Big Kernel Lock</span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="comment"> * which was used in the previous locking scheme.</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a58e1148564b46929f3dfeeb36438c7ef">reiserfs_write_lock</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *s);</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#abfab7e6372147db1a346c2d19dc6a7b8">reiserfs_write_unlock</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *s);</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="keywordtype">int</span> __must_check <a class="code" href="reiserfs_8h.html#acffafbcd9e9d400a9018c23375afed69">reiserfs_write_unlock_nested</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *s);</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a340707d69035995c991dfd2de6693360">reiserfs_write_lock_nested</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *s, <span class="keywordtype">int</span> depth);</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="preprocessor">#ifdef CONFIG_REISERFS_CHECK</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#aeadf70ec41303a31671baed14804b5f4">reiserfs_lock_check_recursive</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *s);</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00780"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aeadf70ec41303a31671baed14804b5f4">  780</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#aeadf70ec41303a31671baed14804b5f4">reiserfs_lock_check_recursive</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *s) { }</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;<span class="comment"> * Several mutexes depend on the write lock.</span></div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;<span class="comment"> * However sometimes we want to relax the write lock while we hold</span></div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;<span class="comment"> * these mutexes, according to the release/reacquire on schedule()</span></div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;<span class="comment"> * properties of the Bkl that were used.</span></div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;<span class="comment"> * Reiserfs performances and locking were based on this scheme.</span></div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;<span class="comment"> * Now that the write lock is a mutex and not the bkl anymore, doing so</span></div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;<span class="comment"> * may result in a deadlock:</span></div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;<span class="comment"> * A acquire write_lock</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="comment"> * A acquire j_commit_mutex</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="comment"> * A release write_lock and wait for something</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="comment"> * B acquire write_lock</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="comment"> * B can&#39;t acquire j_commit_mutex and sleep</span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;<span class="comment"> * A can&#39;t acquire write lock anymore</span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;<span class="comment"> * deadlock</span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;<span class="comment"> * What we do here is avoiding such deadlock by playing the same game</span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="comment"> * than the Bkl: if we can&#39;t acquire a mutex that depends on the write lock,</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="comment"> * we release the write lock, wait a bit and then retry.</span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="comment"> * The mutexes concerned by this hack are:</span></div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="comment"> * - The commit mutex of a journal list</span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="comment"> * - The flush mutex</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment"> * - The journal lock</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="comment"> * - The inode mutex</span></div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00810"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aa7446dc6c1694d660a356415419a9be9">  810</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#aa7446dc6c1694d660a356415419a9be9">reiserfs_mutex_lock_safe</a>(<span class="keyword">struct</span> mutex *m,</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;                        <span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *s)</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;{</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <span class="keywordtype">int</span> depth;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    depth = <a class="code" href="reiserfs_8h.html#acffafbcd9e9d400a9018c23375afed69">reiserfs_write_unlock_nested</a>(s);</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    mutex_lock(m);</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <a class="code" href="reiserfs_8h.html#a340707d69035995c991dfd2de6693360">reiserfs_write_lock_nested</a>(s, depth);</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;}</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span></div><div class="line"><a name="l00821"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a0352e0fe22c2a184d6f6b1f9d0d29b0b">  821</a></span>&#160;<a class="code" href="reiserfs_8h.html#a0352e0fe22c2a184d6f6b1f9d0d29b0b">reiserfs_mutex_lock_nested_safe</a>(<span class="keyword">struct</span> mutex *m, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> subclass,</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;                <span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *s)</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;{</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <span class="keywordtype">int</span> depth;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    depth = <a class="code" href="reiserfs_8h.html#acffafbcd9e9d400a9018c23375afed69">reiserfs_write_unlock_nested</a>(s);</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    mutex_lock_nested(m, subclass);</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <a class="code" href="reiserfs_8h.html#a340707d69035995c991dfd2de6693360">reiserfs_write_lock_nested</a>(s, depth);</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;}</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span></div><div class="line"><a name="l00832"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ab1c250d9d7e8ed1d5d36b4f395167b68">  832</a></span>&#160;<a class="code" href="reiserfs_8h.html#ab1c250d9d7e8ed1d5d36b4f395167b68">reiserfs_down_read_safe</a>(<span class="keyword">struct</span> rw_semaphore *sem, <span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *s)</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;{</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;       <span class="keywordtype">int</span> depth;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;       depth = <a class="code" href="reiserfs_8h.html#acffafbcd9e9d400a9018c23375afed69">reiserfs_write_unlock_nested</a>(s);</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;       down_read(sem);</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;       <a class="code" href="reiserfs_8h.html#a340707d69035995c991dfd2de6693360">reiserfs_write_lock_nested</a>(s, depth);</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;}</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;<span class="comment"> * When we schedule, we usually want to also release the write lock,</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;<span class="comment"> * according to the previous bkl based locking scheme of reiserfs.</span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00844"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a9fd8ffa2dc584322b88b0853a147fb5c">  844</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a9fd8ffa2dc584322b88b0853a147fb5c">reiserfs_cond_resched</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *s)</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;{</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    <span class="keywordflow">if</span> (need_resched()) {</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        <span class="keywordtype">int</span> depth;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        depth = <a class="code" href="reiserfs_8h.html#acffafbcd9e9d400a9018c23375afed69">reiserfs_write_unlock_nested</a>(s);</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        schedule();</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        <a class="code" href="reiserfs_8h.html#a340707d69035995c991dfd2de6693360">reiserfs_write_lock_nested</a>(s, depth);</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    }</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;}</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="keyword">struct </span>fid;</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="comment"> * in reading the #defines, it may help to understand that they employ</span></div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;<span class="comment"> *  the following abbreviations:</span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="comment"> *  B = Buffer</span></div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="comment"> *  I = Item header</span></div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="comment"> *  H = Height within the tree (should be changed to LEV)</span></div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="comment"> *  N = Number of the item in the node</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="comment"> *  STAT = stat data</span></div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;<span class="comment"> *  DEH = Directory Entry Header</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;<span class="comment"> *  EC = Entry Count</span></div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;<span class="comment"> *  E = Entry number</span></div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;<span class="comment"> *  UL = Unsigned Long</span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<span class="comment"> *  BLKH = BLocK Header</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="comment"> *  UNFM = UNForMatted node</span></div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="comment"> *  DC = Disk Child</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="comment"> *  P = Path</span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="comment"> *  These #defines are named by concatenating these abbreviations,</span></div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="comment"> *  where first comes the arguments, and last comes the return value,</span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="comment"> *  of the macro.</span></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;</div><div class="line"><a name="l00880"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a262dfafab779646cb290711c92741072">  880</a></span>&#160;<span class="preprocessor">#define USE_INODE_GENERATION_COUNTER</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;</div><div class="line"><a name="l00882"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a2240b2b33c57265c7e3dbaea52e0a801">  882</a></span>&#160;<span class="preprocessor">#define REISERFS_PREALLOCATE</span></div><div class="line"><a name="l00883"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a4d00d0356e4f86e7b0d2e15929806720">  883</a></span>&#160;<span class="preprocessor">#define DISPLACE_NEW_PACKING_LOCALITIES</span></div><div class="line"><a name="l00884"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a3e35f07e103323de3a96652779fd7478">  884</a></span>&#160;<span class="preprocessor">#define PREALLOCATION_SIZE 9</span></div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="comment">/* n must be power of 2 */</span></div><div class="line"><a name="l00887"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aa0034811cd3322e753003b621029f373">  887</a></span>&#160;<span class="preprocessor">#define _ROUND_UP(x,n) (((x)+(n)-1u) &amp; ~((n)-1u))</span></div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="comment"> * to be ok for alpha and others we have to align structures to 8 byte</span></div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="comment"> * boundary.</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="comment"> * FIXME: do not change 4 by anything else: there is code which relies on that</span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00894"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a5560b3c73e2e50a0b1bda1fa70ec58af">  894</a></span>&#160;<span class="preprocessor">#define ROUND_UP(x) _ROUND_UP(x,8LL)</span></div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="comment"> * debug levels.  Right now, CONFIG_REISERFS_CHECK means print all debug</span></div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;<span class="comment"> * messages.</span></div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00900"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#acae0babb4bfebf9ab9bcad4527889055">  900</a></span>&#160;<span class="preprocessor">#define REISERFS_DEBUG_CODE 5   </span><span class="comment">/* extra messages to help find/debug errors */</span><span class="preprocessor"></span></div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a76914864efc914fae2333a5b7de610c6">__reiserfs_warning</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *s, <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keywordtype">id</span>,</div><div class="line"><a name="l00903"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#abc525204c07d1774902248af7f34e479">  903</a></span>&#160;             <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="masklog_8h.html#afc4e949c7b7d0ab565ecfb62c3380171">func</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="adfs_8h.html#a0cf5f0ccb15b6e951fd1b6af112439e1">fmt</a>, ...);</div><div class="line"><a name="l00904"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a23f28d2ee11ae854c5fc653f8fbc6ca3">  904</a></span>&#160;<span class="preprocessor">#define reiserfs_warning(s, id, fmt, args...) \</span></div><div class="line"><a name="l00905"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a7335f1b3ca3e9e8f2c126cca1e5dfd59">  905</a></span>&#160;<span class="preprocessor">     __reiserfs_warning(s, id, __func__, fmt, ##args)</span></div><div class="line"><a name="l00906"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a0387e14c04753333ae0f331abca47e52">  906</a></span>&#160;<span class="comment">/* assertions handling */</span></div><div class="line"><a name="l00907"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a50db69d969858eaf7616d95432491eb1">  907</a></span>&#160;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="comment">/* always check a condition and panic if it&#39;s false. */</span></div><div class="line"><a name="l00909"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#afb31406146a3383235947f2c1cc3740f">  909</a></span>&#160;<span class="preprocessor">#define __RASSERT(cond, scond, format, args...)         \</span></div><div class="line"><a name="l00910"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a4b43339f31855dffc3bd9da8329039c9">  910</a></span>&#160;<span class="preprocessor">do {                                    \</span></div><div class="line"><a name="l00911"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a31b821551fe73bb6b8c9052e1a0b35d7">  911</a></span>&#160;<span class="preprocessor">    if (!(cond))                            \</span></div><div class="line"><a name="l00912"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a18aef69dd058d1b715acb71717949f1f">  912</a></span>&#160;<span class="preprocessor">        reiserfs_panic(NULL, &quot;assertion failure&quot;, &quot;(&quot; #cond &quot;) at &quot; \</span></div><div class="line"><a name="l00913"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a181be35c82924792722e1402e850f1ba">  913</a></span>&#160;<span class="preprocessor">                   __FILE__ &quot;:%i:%s: &quot; format &quot;\n&quot;,     \</span></div><div class="line"><a name="l00914"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a7210c971887dee4d5a275a97f2fa69f3">  914</a></span>&#160;<span class="preprocessor">                   __LINE__, __func__ , ##args);        \</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;</div><div class="line"><a name="l00917"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a6d1080265996969036b30c9f22190db9">  917</a></span>&#160;<span class="preprocessor">#define RASSERT(cond, format, args...) __RASSERT(cond, #cond, format, ##args)</span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;</div><div class="line"><a name="l00919"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a0159ef9841f33716a8c68876a913f800">  919</a></span>&#160;<span class="preprocessor">#if defined( CONFIG_REISERFS_CHECK )</span></div><div class="line"><a name="l00920"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a0f2513f8a463690873e1ce4919c64144">  920</a></span>&#160;<span class="preprocessor">#define RFALSE(cond, format, args...) __RASSERT(!(cond), &quot;!(&quot; #cond &quot;)&quot;, format, ##args)</span></div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00922"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#af984276f5a06939343398c53b324d0f6">  922</a></span>&#160;<span class="preprocessor">#define RFALSE( cond, format, args... ) do {;} while( 0 )</span></div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;</div><div class="line"><a name="l00925"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ac8f3360e70fa8b2a51b2157d11682994">  925</a></span>&#160;<span class="preprocessor">#define CONSTF __attribute_const__</span></div><div class="line"><a name="l00926"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#abf75bcc2df6af744a47b8a2235ba580e">  926</a></span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;<span class="comment"> * Disk Data Structures</span></div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;<span class="comment">/***************************************************************************</span></div><div class="line"><a name="l00931"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a0c0285b30f3c0112d1e7325aae48f14a">  931</a></span>&#160;<span class="comment"> *                             SUPER BLOCK                                 *</span></div><div class="line"><a name="l00932"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a46bd49f6f26db7017e26a4cdba667374">  932</a></span>&#160;<span class="comment"> ***************************************************************************/</span></div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;<span class="comment"> * Structure of super block on disk, a version of which in RAM is often</span></div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;<span class="comment"> * accessed as REISERFS_SB(s)-&gt;s_rs. The version in RAM is part of a larger</span></div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;<span class="comment"> * structure containing fields never written to disk.</span></div><div class="line"><a name="l00938"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a4fbb9f456190daff6154a5520ed8f839">  938</a></span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00939"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ac14ad2db72e5cd237d43ff765439229d">  939</a></span>&#160;<span class="preprocessor">#define UNSET_HASH 0    </span><span class="comment">/* Detect hash on disk */</span><span class="preprocessor"></span></div><div class="line"><a name="l00940"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#abb6662813bb47c6b44f28d1d89c5aebe">  940</a></span>&#160;<span class="preprocessor">#define TEA_HASH  1</span></div><div class="line"><a name="l00941"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aadd3a8a86dbf55ca716cb20e649e956d">  941</a></span>&#160;<span class="preprocessor">#define YURA_HASH 2</span></div><div class="line"><a name="l00942"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a865cde8887c9ba0d98965bea632a892a">  942</a></span>&#160;<span class="preprocessor">#define R5_HASH   3</span></div><div class="line"><a name="l00943"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aa900c36dd5dee5977966ce09fca25aed">  943</a></span>&#160;<span class="preprocessor">#define DEFAULT_HASH R5_HASH</span></div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;</div><div class="line"><a name="l00945"></a><span class="lineno"><a class="line" href="structjournal__params.html">  945</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structjournal__params.html">journal_params</a> {</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    <span class="comment">/* where does journal start from on its * device */</span></div><div class="line"><a name="l00947"></a><span class="lineno"><a class="line" href="structjournal__params.html#a78c6afcbd1ea280cb8061b6aeb9f4fcf">  947</a></span>&#160;    __le32 <a class="code" href="structjournal__params.html#a78c6afcbd1ea280cb8061b6aeb9f4fcf">jp_journal_1st_block</a>;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;</div><div class="line"><a name="l00949"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a86428b92241d0c598785665c072001ca">  949</a></span>&#160;    <span class="comment">/* journal device st_rdev */</span></div><div class="line"><a name="l00950"></a><span class="lineno"><a class="line" href="structjournal__params.html#a6c02acf250dfebeaa8cc172b14372dbf">  950</a></span>&#160;    __le32 <a class="code" href="structjournal__params.html#a6c02acf250dfebeaa8cc172b14372dbf">jp_journal_dev</a>;</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <span class="comment">/* size of the journal */</span></div><div class="line"><a name="l00953"></a><span class="lineno"><a class="line" href="structjournal__params.html#ab120ce8f2ffac5dc91f9af53d4ecd687">  953</a></span>&#160;    __le32 <a class="code" href="structjournal__params.html#ab120ce8f2ffac5dc91f9af53d4ecd687">jp_journal_size</a>;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <span class="comment">/* max number of blocks in a transaction. */</span></div><div class="line"><a name="l00956"></a><span class="lineno"><a class="line" href="structjournal__params.html#a6c4411979cca5217b533442684209644">  956</a></span>&#160;    __le32 <a class="code" href="structjournal__params.html#a6c4411979cca5217b533442684209644">jp_journal_trans_max</a>;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="comment">     * random value made on fs creation</span></div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="comment">     * (this was sb_journal_block_count)</span></div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00962"></a><span class="lineno"><a class="line" href="structjournal__params.html#a3f8d129b7b55dac769db9bd5cc7268ea">  962</a></span>&#160;    __le32 <a class="code" href="structjournal__params.html#a3f8d129b7b55dac769db9bd5cc7268ea">jp_journal_magic</a>;</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <span class="comment">/* max number of blocks to batch into a trans */</span></div><div class="line"><a name="l00965"></a><span class="lineno"><a class="line" href="structjournal__params.html#ad28c888d224f26355a5393bb8a02987b">  965</a></span>&#160;    __le32 <a class="code" href="structjournal__params.html#ad28c888d224f26355a5393bb8a02987b">jp_journal_max_batch</a>;</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <span class="comment">/* in seconds, how old can an async  commit be */</span></div><div class="line"><a name="l00968"></a><span class="lineno"><a class="line" href="structjournal__params.html#a2e99f81d6c6dd06a1adca2f0443ce85b">  968</a></span>&#160;    __le32 <a class="code" href="structjournal__params.html#a2e99f81d6c6dd06a1adca2f0443ce85b">jp_journal_max_commit_age</a>;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    <span class="comment">/* in seconds, how old can a transaction be */</span></div><div class="line"><a name="l00971"></a><span class="lineno"><a class="line" href="structjournal__params.html#ac2757d6b4520417356ca6373db0fcd18">  971</a></span>&#160;    __le32 <a class="code" href="structjournal__params.html#ac2757d6b4520417356ca6373db0fcd18">jp_journal_max_trans_age</a>;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;};</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;<span class="comment">/* this is the super from 3.5.X, where X &gt;= 10 */</span></div><div class="line"><a name="l00975"></a><span class="lineno"><a class="line" href="structreiserfs__super__block__v1.html">  975</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structreiserfs__super__block__v1.html">reiserfs_super_block_v1</a> {</div><div class="line"><a name="l00976"></a><span class="lineno"><a class="line" href="structreiserfs__super__block__v1.html#a281fa21f7f7953168cfdb7a5f1c6d3f4">  976</a></span>&#160;    __le32 <a class="code" href="structreiserfs__super__block__v1.html#a281fa21f7f7953168cfdb7a5f1c6d3f4">s_block_count</a>;   <span class="comment">/* blocks count         */</span></div><div class="line"><a name="l00977"></a><span class="lineno"><a class="line" href="structreiserfs__super__block__v1.html#a196aae185d7bf6599d01cac8fae07f67">  977</a></span>&#160;    __le32 <a class="code" href="structreiserfs__super__block__v1.html#a196aae185d7bf6599d01cac8fae07f67">s_free_blocks</a>;   <span class="comment">/* free blocks count    */</span></div><div class="line"><a name="l00978"></a><span class="lineno"><a class="line" href="structreiserfs__super__block__v1.html#a1ad5541142683abe1c68492f40d92da1">  978</a></span>&#160;    __le32 <a class="code" href="structreiserfs__super__block__v1.html#a1ad5541142683abe1c68492f40d92da1">s_root_block</a>;    <span class="comment">/* root block number    */</span></div><div class="line"><a name="l00979"></a><span class="lineno"><a class="line" href="structreiserfs__super__block__v1.html#a3db1b22d4e9c2fc2628b0f99121e5b8d">  979</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structjournal__params.html">journal_params</a> <a class="code" href="reiserfs_8h.html#a0387e14c04753333ae0f331abca47e52">s_journal</a>;</div><div class="line"><a name="l00980"></a><span class="lineno"><a class="line" href="structreiserfs__super__block__v1.html#a3b861cb895fa1252d3aea06910651124">  980</a></span>&#160;    __le16 <a class="code" href="structreiserfs__super__block__v1.html#a3b861cb895fa1252d3aea06910651124">s_blocksize</a>; <span class="comment">/* block size */</span></div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <span class="comment">/* max size of object id array, see get_objectid() commentary  */</span></div><div class="line"><a name="l00983"></a><span class="lineno"><a class="line" href="structreiserfs__super__block__v1.html#adb63f75cba2c48d46b511c4861ebc92b">  983</a></span>&#160;    __le16 <a class="code" href="structreiserfs__super__block__v1.html#adb63f75cba2c48d46b511c4861ebc92b">s_oid_maxsize</a>;</div><div class="line"><a name="l00984"></a><span class="lineno"><a class="line" href="structreiserfs__super__block__v1.html#af68675b5a348268f4adb00e3b795f8a2">  984</a></span>&#160;    __le16 <a class="code" href="structreiserfs__super__block__v1.html#af68675b5a348268f4adb00e3b795f8a2">s_oid_cursize</a>;   <span class="comment">/* current size of object id array */</span></div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <span class="comment">/* this is set to 1 when filesystem was umounted, to 2 - when not */</span></div><div class="line"><a name="l00987"></a><span class="lineno"><a class="line" href="structreiserfs__super__block__v1.html#a482dbb3665275692ce3288c39464d1b0">  987</a></span>&#160;    __le16 <a class="code" href="structreiserfs__super__block__v1.html#a482dbb3665275692ce3288c39464d1b0">s_umount_state</a>;</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;<span class="comment">     * reiserfs magic string indicates that file system is reiserfs:</span></div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;<span class="comment">     * &quot;ReIsErFs&quot; or &quot;ReIsEr2Fs&quot; or &quot;ReIsEr3Fs&quot;</span></div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00993"></a><span class="lineno"><a class="line" href="structreiserfs__super__block__v1.html#a28fbcb72759041439d6a701dfacc8413">  993</a></span>&#160;    <span class="keywordtype">char</span> <a class="code" href="reiserfs_8h.html#a0f2513f8a463690873e1ce4919c64144">s_magic</a>[10];</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;<span class="comment">     * it is set to used by fsck to mark which</span></div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;<span class="comment">     * phase of rebuilding is done</span></div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00999"></a><span class="lineno"><a class="line" href="structreiserfs__super__block__v1.html#a4e9bb5d84c394e41dbc8b76a3297a936">  999</a></span>&#160;    __le16 <a class="code" href="structreiserfs__super__block__v1.html#a4e9bb5d84c394e41dbc8b76a3297a936">s_fs_state</a>;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;<span class="comment">     * indicate, what hash function is being use</span></div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;<span class="comment">     * to sort names in a directory</span></div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l01004"></a><span class="lineno"><a class="line" href="structreiserfs__super__block__v1.html#adeffb42489b7837e0f3c8334a055df75"> 1004</a></span>&#160;    __le32 <a class="code" href="structreiserfs__super__block__v1.html#adeffb42489b7837e0f3c8334a055df75">s_hash_function_code</a>;</div><div class="line"><a name="l01005"></a><span class="lineno"><a class="line" href="structreiserfs__super__block__v1.html#a092cea1eb87a57cacdc010e2e0675bdc"> 1005</a></span>&#160;    __le16 <a class="code" href="structreiserfs__super__block__v1.html#a092cea1eb87a57cacdc010e2e0675bdc">s_tree_height</a>;   <span class="comment">/* height of disk tree */</span></div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;<span class="comment">     * amount of bitmap blocks needed to address</span></div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;<span class="comment">     * each block of file system</span></div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l01011"></a><span class="lineno"><a class="line" href="structreiserfs__super__block__v1.html#a44ae0fe3d1963322409a75513a80ea63"> 1011</a></span>&#160;    __le16 <a class="code" href="structreiserfs__super__block__v1.html#a44ae0fe3d1963322409a75513a80ea63">s_bmap_nr</a>;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;<span class="comment">     * this field is only reliable on filesystem with non-standard journal</span></div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l01016"></a><span class="lineno"><a class="line" href="structreiserfs__super__block__v1.html#a1eaa791e3ddf30070b7c96e253739d27"> 1016</a></span>&#160;    __le16 <a class="code" href="structreiserfs__super__block__v1.html#a1eaa791e3ddf30070b7c96e253739d27">s_version</a>;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;<span class="comment">     * size in blocks of journal area on main device, we need to</span></div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="comment">     * keep after making fs with non-standard journal</span></div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l01022"></a><span class="lineno"><a class="line" href="structreiserfs__super__block__v1.html#a61651b8d9a1b83e5e19982b1c976e353"> 1022</a></span>&#160;    __le16 <a class="code" href="structreiserfs__super__block__v1.html#a61651b8d9a1b83e5e19982b1c976e353">s_reserved_for_journal</a>;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;} <a class="code" href="reiserfs_8h.html#aa4ff29884bea3444df9bcf07d9ecad9c">__attribute__</a> ((__packed__));</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;</div><div class="line"><a name="l01025"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a2b1b40c9cd3b19c32c95f9ab6fb66dd5"> 1025</a></span>&#160;<span class="preprocessor">#define SB_SIZE_V1 (sizeof(struct reiserfs_super_block_v1))</span></div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;<span class="comment">/* this is the on disk super block */</span></div><div class="line"><a name="l01028"></a><span class="lineno"><a class="line" href="structreiserfs__super__block.html"> 1028</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structreiserfs__super__block.html">reiserfs_super_block</a> {</div><div class="line"><a name="l01029"></a><span class="lineno"><a class="line" href="structreiserfs__super__block.html#acfa5d550002c418f39fec8661c2607bc"> 1029</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structreiserfs__super__block__v1.html">reiserfs_super_block_v1</a> <a class="code" href="reiserfs_8h.html#abc525204c07d1774902248af7f34e479">s_v1</a>;</div><div class="line"><a name="l01030"></a><span class="lineno"><a class="line" href="structreiserfs__super__block.html#a8e51bcece65aad15bd68ace5e7ad9474"> 1030</a></span>&#160;    __le32 <a class="code" href="structreiserfs__super__block.html#a8e51bcece65aad15bd68ace5e7ad9474">s_inode_generation</a>;</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    <span class="comment">/* Right now used only by inode-attributes, if enabled */</span></div><div class="line"><a name="l01033"></a><span class="lineno"><a class="line" href="structreiserfs__super__block.html#a06388ec059ef1cb653c85fc39c52544f"> 1033</a></span>&#160;    __le32 <a class="code" href="structreiserfs__super__block.html#a06388ec059ef1cb653c85fc39c52544f">s_flags</a>;</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;</div><div class="line"><a name="l01035"></a><span class="lineno"><a class="line" href="structreiserfs__super__block.html#a43926c71b7b26ed3bf7ba28d09ae5a27"> 1035</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="reiserfs_8h.html#afb31406146a3383235947f2c1cc3740f">s_uuid</a>[16];   <span class="comment">/* filesystem unique identifier */</span></div><div class="line"><a name="l01036"></a><span class="lineno"><a class="line" href="structreiserfs__super__block.html#a66814ae2eb803654b0e3b0776e1f9f17"> 1036</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="reiserfs_8h.html#aee164f5dc31c6f78f6460b9147dfab91">s_label</a>[16];  <span class="comment">/* filesystem volume label */</span></div><div class="line"><a name="l01037"></a><span class="lineno"><a class="line" href="structreiserfs__super__block.html#a0da4e7579c2adc3bad30eba9a6d67fbd"> 1037</a></span>&#160;    __le16 <a class="code" href="structreiserfs__super__block.html#a0da4e7579c2adc3bad30eba9a6d67fbd">s_mnt_count</a>;     <span class="comment">/* Count of mounts since last fsck */</span></div><div class="line"><a name="l01038"></a><span class="lineno"><a class="line" href="structreiserfs__super__block.html#a0de4424f5d622bf0f3d97fbe3220c3a6"> 1038</a></span>&#160;    __le16 <a class="code" href="structreiserfs__super__block.html#a0de4424f5d622bf0f3d97fbe3220c3a6">s_max_mnt_count</a>;     <span class="comment">/* Maximum mounts before check */</span></div><div class="line"><a name="l01039"></a><span class="lineno"><a class="line" href="structreiserfs__super__block.html#adf2dcbcd711aaf4d62530dc73fd2986e"> 1039</a></span>&#160;    __le32 <a class="code" href="structreiserfs__super__block.html#adf2dcbcd711aaf4d62530dc73fd2986e">s_lastcheck</a>;     <span class="comment">/* Timestamp of last fsck */</span></div><div class="line"><a name="l01040"></a><span class="lineno"><a class="line" href="structreiserfs__super__block.html#a547fdd6a628e7ee93a0d7f24e3aa74ae"> 1040</a></span>&#160;    __le32 <a class="code" href="structreiserfs__super__block.html#a547fdd6a628e7ee93a0d7f24e3aa74ae">s_check_interval</a>;    <span class="comment">/* Interval between checks */</span></div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;<span class="comment">     * zero filled by mkreiserfs and reiserfs_convert_objectid_map_v1()</span></div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;<span class="comment">     * so any additions must be updated there as well. */</span></div><div class="line"><a name="l01045"></a><span class="lineno"><a class="line" href="structreiserfs__super__block.html#a3f578d15eeb1494517f0eb2f34b43c5a"> 1045</a></span>&#160;    <span class="keywordtype">char</span> <a class="code" href="reiserfs_8h.html#a0159ef9841f33716a8c68876a913f800">s_unused</a>[76];</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;} <a class="code" href="reiserfs_8h.html#aa4ff29884bea3444df9bcf07d9ecad9c">__attribute__</a> ((__packed__));</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;</div><div class="line"><a name="l01048"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a0d9206307e6d6f609c347f2efe1c77f2"> 1048</a></span>&#160;<span class="preprocessor">#define SB_SIZE (sizeof(struct reiserfs_super_block))</span></div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;</div><div class="line"><a name="l01050"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aa426f8775b18d96440b11310c571bdfa"> 1050</a></span>&#160;<span class="preprocessor">#define REISERFS_VERSION_1 0</span></div><div class="line"><a name="l01051"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ac101691c2450a99b52554a25de03ebe5"> 1051</a></span>&#160;<span class="preprocessor">#define REISERFS_VERSION_2 2</span></div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;<span class="comment">/* on-disk super block fields converted to cpu form */</span></div><div class="line"><a name="l01054"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a0d540abdc416c34a02b5901819d30d9e"> 1054</a></span>&#160;<span class="preprocessor">#define SB_DISK_SUPER_BLOCK(s) (REISERFS_SB(s)-&gt;s_rs)</span></div><div class="line"><a name="l01055"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a2cf8839531e934a53297b48ed26326aa"> 1055</a></span>&#160;<span class="preprocessor">#define SB_V1_DISK_SUPER_BLOCK(s) (&amp;(SB_DISK_SUPER_BLOCK(s)-&gt;s_v1))</span></div><div class="line"><a name="l01056"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a9f67614e2d52718f49b57d558c040973"> 1056</a></span>&#160;<span class="preprocessor">#define SB_BLOCKSIZE(s) \</span></div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;<span class="preprocessor">        le32_to_cpu ((SB_V1_DISK_SUPER_BLOCK(s)-&gt;s_blocksize))</span></div><div class="line"><a name="l01058"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a9e8debb0bd40d42a3bab8ba8184d72e4"> 1058</a></span>&#160;<span class="preprocessor">#define SB_BLOCK_COUNT(s) \</span></div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;<span class="preprocessor">        le32_to_cpu ((SB_V1_DISK_SUPER_BLOCK(s)-&gt;s_block_count))</span></div><div class="line"><a name="l01060"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a16d05e6bc0230094b774ce1ff3819f44"> 1060</a></span>&#160;<span class="preprocessor">#define SB_FREE_BLOCKS(s) \</span></div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;<span class="preprocessor">        le32_to_cpu ((SB_V1_DISK_SUPER_BLOCK(s)-&gt;s_free_blocks))</span></div><div class="line"><a name="l01062"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ab60f2169961aefb67fdbcfaccad0ca0d"> 1062</a></span>&#160;<span class="preprocessor">#define SB_REISERFS_MAGIC(s) \</span></div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;<span class="preprocessor">        (SB_V1_DISK_SUPER_BLOCK(s)-&gt;s_magic)</span></div><div class="line"><a name="l01064"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a2abdf2d59ce871b58dbcbca45bffb6b5"> 1064</a></span>&#160;<span class="preprocessor">#define SB_ROOT_BLOCK(s) \</span></div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;<span class="preprocessor">        le32_to_cpu ((SB_V1_DISK_SUPER_BLOCK(s)-&gt;s_root_block))</span></div><div class="line"><a name="l01066"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a822a42599868e4528bf0f9b575bdf144"> 1066</a></span>&#160;<span class="preprocessor">#define SB_TREE_HEIGHT(s) \</span></div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;<span class="preprocessor">        le16_to_cpu ((SB_V1_DISK_SUPER_BLOCK(s)-&gt;s_tree_height))</span></div><div class="line"><a name="l01068"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a387db029806d443d81c837d846c26d73"> 1068</a></span>&#160;<span class="preprocessor">#define SB_REISERFS_STATE(s) \</span></div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;<span class="preprocessor">        le16_to_cpu ((SB_V1_DISK_SUPER_BLOCK(s)-&gt;s_umount_state))</span></div><div class="line"><a name="l01070"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#abbd0d8eac3d25f5cffcc926f661b479d"> 1070</a></span>&#160;<span class="preprocessor">#define SB_VERSION(s) le16_to_cpu ((SB_V1_DISK_SUPER_BLOCK(s)-&gt;s_version))</span></div><div class="line"><a name="l01071"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a8c2cd524034f5b45fdecf11d6a985903"> 1071</a></span>&#160;<span class="preprocessor">#define SB_BMAP_NR(s) le16_to_cpu ((SB_V1_DISK_SUPER_BLOCK(s)-&gt;s_bmap_nr))</span></div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;</div><div class="line"><a name="l01073"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a5e91029793fdcdb1d26b8df199d8b1c0"> 1073</a></span>&#160;<span class="preprocessor">#define PUT_SB_BLOCK_COUNT(s, val) \</span></div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;<span class="preprocessor">   do { SB_V1_DISK_SUPER_BLOCK(s)-&gt;s_block_count = cpu_to_le32(val); } while (0)</span></div><div class="line"><a name="l01075"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ad436c2af702b0b4495088aba7584f4a8"> 1075</a></span>&#160;<span class="preprocessor">#define PUT_SB_FREE_BLOCKS(s, val) \</span></div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;<span class="preprocessor">   do { SB_V1_DISK_SUPER_BLOCK(s)-&gt;s_free_blocks = cpu_to_le32(val); } while (0)</span></div><div class="line"><a name="l01077"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aa48e522d1e9d87b2a9f90bf3a732c45c"> 1077</a></span>&#160;<span class="preprocessor">#define PUT_SB_ROOT_BLOCK(s, val) \</span></div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;<span class="preprocessor">   do { SB_V1_DISK_SUPER_BLOCK(s)-&gt;s_root_block = cpu_to_le32(val); } while (0)</span></div><div class="line"><a name="l01079"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a948046f8ee35cda8bb6deea6aaa240ee"> 1079</a></span>&#160;<span class="preprocessor">#define PUT_SB_TREE_HEIGHT(s, val) \</span></div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;<span class="preprocessor">   do { SB_V1_DISK_SUPER_BLOCK(s)-&gt;s_tree_height = cpu_to_le16(val); } while (0)</span></div><div class="line"><a name="l01081"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a2771f9fbdda65169bfc8778ca87e5b0e"> 1081</a></span>&#160;<span class="preprocessor">#define PUT_SB_REISERFS_STATE(s, val) \</span></div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;<span class="preprocessor">   do { SB_V1_DISK_SUPER_BLOCK(s)-&gt;s_umount_state = cpu_to_le16(val); } while (0)</span></div><div class="line"><a name="l01083"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a4f9bb663975189bec491f9fd25e8fcf8"> 1083</a></span>&#160;<span class="preprocessor">#define PUT_SB_VERSION(s, val) \</span></div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;<span class="preprocessor">   do { SB_V1_DISK_SUPER_BLOCK(s)-&gt;s_version = cpu_to_le16(val); } while (0)</span></div><div class="line"><a name="l01085"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a9226ef095cd51a5d29d33a025446fef7"> 1085</a></span>&#160;<span class="preprocessor">#define PUT_SB_BMAP_NR(s, val) \</span></div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;<span class="preprocessor">   do { SB_V1_DISK_SUPER_BLOCK(s)-&gt;s_bmap_nr = cpu_to_le16 (val); } while (0)</span></div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;</div><div class="line"><a name="l01088"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a5c79871114c9459acc3932db6cab48d2"> 1088</a></span>&#160;<span class="preprocessor">#define SB_ONDISK_JP(s) (&amp;SB_V1_DISK_SUPER_BLOCK(s)-&gt;s_journal)</span></div><div class="line"><a name="l01089"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a505c1fcdc18cb51f5ada733b19708536"> 1089</a></span>&#160;<span class="preprocessor">#define SB_ONDISK_JOURNAL_SIZE(s) \</span></div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;<span class="preprocessor">         le32_to_cpu ((SB_ONDISK_JP(s)-&gt;jp_journal_size))</span></div><div class="line"><a name="l01091"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a97f1b39eb450645e0fe6adb302743552"> 1091</a></span>&#160;<span class="preprocessor">#define SB_ONDISK_JOURNAL_1st_BLOCK(s) \</span></div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;<span class="preprocessor">         le32_to_cpu ((SB_ONDISK_JP(s)-&gt;jp_journal_1st_block))</span></div><div class="line"><a name="l01093"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a7f8b7b9731b028505a7e13df202f1701"> 1093</a></span>&#160;<span class="preprocessor">#define SB_ONDISK_JOURNAL_DEVICE(s) \</span></div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;<span class="preprocessor">         le32_to_cpu ((SB_ONDISK_JP(s)-&gt;jp_journal_dev))</span></div><div class="line"><a name="l01095"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a0bbca2a3cf153810b496e6043b8057a4"> 1095</a></span>&#160;<span class="preprocessor">#define SB_ONDISK_RESERVED_FOR_JOURNAL(s) \</span></div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;<span class="preprocessor">         le16_to_cpu ((SB_V1_DISK_SUPER_BLOCK(s)-&gt;s_reserved_for_journal))</span></div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;</div><div class="line"><a name="l01098"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a63e8b160f4e6ac48f61eea18583c493d"> 1098</a></span>&#160;<span class="preprocessor">#define is_block_in_log_or_reserved_area(s, block) \</span></div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;<span class="preprocessor">         block &gt;= SB_JOURNAL_1st_RESERVED_BLOCK(s) \</span></div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;<span class="preprocessor">         &amp;&amp; block &lt; SB_JOURNAL_1st_RESERVED_BLOCK(s) +  \</span></div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;<span class="preprocessor">         ((!is_reiserfs_jr(SB_DISK_SUPER_BLOCK(s)) ? \</span></div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;<span class="preprocessor">         SB_ONDISK_JOURNAL_SIZE(s) + 1 : SB_ONDISK_RESERVED_FOR_JOURNAL(s)))</span></div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#ab7975dd6e7eabb14edda7ba2f3286576">is_reiserfs_3_5</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__super__block.html">reiserfs_super_block</a> *rs);</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a3821112b18f4886e48afd975b23ab46b">is_reiserfs_3_6</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__super__block.html">reiserfs_super_block</a> *rs);</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a5c23b0f790477c3b309d85fe01008b4e">is_reiserfs_jr</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__super__block.html">reiserfs_super_block</a> *rs);</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;<span class="comment"> * ReiserFS leaves the first 64k unused, so that partition labels have</span></div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;<span class="comment"> * enough space.  If someone wants to write a fancy bootloader that</span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;<span class="comment"> * needs more than 64k, let us know, and this will be increased in size.</span></div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;<span class="comment"> * This number must be larger than than the largest block size on any</span></div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;<span class="comment"> * platform, or code will break.  -Hans</span></div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01115"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a8913665fc88cdf85a955777e7b1d7a96"> 1115</a></span>&#160;<span class="preprocessor">#define REISERFS_DISK_OFFSET_IN_BYTES (64 * 1024)</span></div><div class="line"><a name="l01116"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a2dc97a3b0da232b0d8a65cb24ebbf0a3"> 1116</a></span>&#160;<span class="preprocessor">#define REISERFS_FIRST_BLOCK unused_define</span></div><div class="line"><a name="l01117"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a6309476f987a9cde79e198ddb86cb64a"> 1117</a></span>&#160;<span class="preprocessor">#define REISERFS_JOURNAL_OFFSET_IN_BYTES REISERFS_DISK_OFFSET_IN_BYTES</span></div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;<span class="comment">/* the spot for the super in versions 3.5 - 3.5.10 (inclusive) */</span></div><div class="line"><a name="l01120"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#af30b704f0ccce4a875d81d30a286f23b"> 1120</a></span>&#160;<span class="preprocessor">#define REISERFS_OLD_DISK_OFFSET_IN_BYTES (8 * 1024)</span></div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;<span class="comment">/* reiserfs internal error code (used by search_by_key and fix_nodes)) */</span></div><div class="line"><a name="l01123"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a3be7cf8fbc8a8de1e2d28f944748bcb3"> 1123</a></span>&#160;<span class="preprocessor">#define CARRY_ON      0</span></div><div class="line"><a name="l01124"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a752c7f77ab1c6320af6603e663fcf4c9"> 1124</a></span>&#160;<span class="preprocessor">#define REPEAT_SEARCH -1</span></div><div class="line"><a name="l01125"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a5d4c9c7b61a0326a939f9109f96d7423"> 1125</a></span>&#160;<span class="preprocessor">#define IO_ERROR      -2</span></div><div class="line"><a name="l01126"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#af622f4abd204ef8a011c5399688ea91c"> 1126</a></span>&#160;<span class="preprocessor">#define NO_DISK_SPACE -3</span></div><div class="line"><a name="l01127"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a9858d28f070b77316989740fc672bc21"> 1127</a></span>&#160;<span class="preprocessor">#define NO_BALANCING_NEEDED  (-4)</span></div><div class="line"><a name="l01128"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a5c5232b60a573cd772884ca465d7be2f"> 1128</a></span>&#160;<span class="preprocessor">#define NO_MORE_UNUSED_CONTIGUOUS_BLOCKS (-5)</span></div><div class="line"><a name="l01129"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a38ce7eafa98c93d52e6b803dfad32fdd"> 1129</a></span>&#160;<span class="preprocessor">#define QUOTA_EXCEEDED -6</span></div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;</div><div class="line"><a name="l01131"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a91181c7f8b91aa6aff623c5d7efb89cf"> 1131</a></span>&#160;<span class="keyword">typedef</span> __u32 <a class="code" href="reiserfs_8h.html#a91181c7f8b91aa6aff623c5d7efb89cf">b_blocknr_t</a>;</div><div class="line"><a name="l01132"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a8560b424ea449ece6c2c7ae0b4bf9ab4"> 1132</a></span>&#160;<span class="keyword">typedef</span> __le32 <a class="code" href="reiserfs_8h.html#a8560b424ea449ece6c2c7ae0b4bf9ab4">unp_t</a>;</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;</div><div class="line"><a name="l01134"></a><span class="lineno"><a class="line" href="structunfm__nodeinfo.html"> 1134</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structunfm__nodeinfo.html">unfm_nodeinfo</a> {</div><div class="line"><a name="l01135"></a><span class="lineno"><a class="line" href="structunfm__nodeinfo.html#aaa3fb573240703e2954237f95a7196cb"> 1135</a></span>&#160;    unp_t <a class="code" href="structunfm__nodeinfo.html#aaa3fb573240703e2954237f95a7196cb">unfm_nodenum</a>;</div><div class="line"><a name="l01136"></a><span class="lineno"><a class="line" href="structunfm__nodeinfo.html#a98126b6046dfa862cb89f4f7d69ab450"> 1136</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="structunfm__nodeinfo.html#a98126b6046dfa862cb89f4f7d69ab450">unfm_freespace</a>;</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;};</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;<span class="comment">/* there are two formats of keys: 3.5 and 3.6 */</span></div><div class="line"><a name="l01140"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a71b67ce5511178998ab99ae6fddfbe30"> 1140</a></span>&#160;<span class="preprocessor">#define KEY_FORMAT_3_5 0</span></div><div class="line"><a name="l01141"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#af59ee5a605e74ced210abcda48ec7750"> 1141</a></span>&#160;<span class="preprocessor">#define KEY_FORMAT_3_6 1</span></div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;<span class="comment">/* there are two stat datas */</span></div><div class="line"><a name="l01144"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a6428576dd8389af042c136da923eb0d3"> 1144</a></span>&#160;<span class="preprocessor">#define STAT_DATA_V1 0</span></div><div class="line"><a name="l01145"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ae8699e719af25bc53638a13202bb2788"> 1145</a></span>&#160;<span class="preprocessor">#define STAT_DATA_V2 1</span></div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;</div><div class="line"><a name="l01147"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a54c4b0f2afaa082072400dec2264284e"> 1147</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">struct </span><a class="code" href="structreiserfs__inode__info.html">reiserfs_inode_info</a> *<a class="code" href="reiserfs_8h.html#a54c4b0f2afaa082072400dec2264284e">REISERFS_I</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="summary_8h.html#a63c41f9614ee9a4e1beb75eabad72f22">inode</a> *<a class="code" href="summary_8h.html#a63c41f9614ee9a4e1beb75eabad72f22">inode</a>)</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;{</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <span class="keywordflow">return</span> container_of(inode, <span class="keyword">struct</span> <a class="code" href="structreiserfs__inode__info.html">reiserfs_inode_info</a>, <a class="code" href="structreiserfs__inode__info.html#a9206d17789076687d2c00a5a1f759ac1">vfs_inode</a>);</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;}</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;</div><div class="line"><a name="l01152"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a0e265314d75fff703a39c90e48f4462b"> 1152</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">struct </span><a class="code" href="structreiserfs__sb__info.html">reiserfs_sb_info</a> *<a class="code" href="reiserfs_8h.html#a0e265314d75fff703a39c90e48f4462b">REISERFS_SB</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *<a class="code" href="ntfs_2debug_8h.html#a65b1b0602e37268ec9bc2c240a676c39">sb</a>)</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;{</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    <span class="keywordflow">return</span> sb-&gt;s_fs_info;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;}</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;<span class="comment"> * Don&#39;t trust REISERFS_SB(sb)-&gt;s_bmap_nr, it&#39;s a u16</span></div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;<span class="comment"> * which overflows on large file systems.</span></div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01161"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a11723b717ae0e6ca3ad3c2c7d911f569"> 1161</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> __u32 <a class="code" href="reiserfs_8h.html#a11723b717ae0e6ca3ad3c2c7d911f569">reiserfs_bmap_count</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *<a class="code" href="ntfs_2debug_8h.html#a65b1b0602e37268ec9bc2c240a676c39">sb</a>)</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;{</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="reiserfs_8h.html#a9e8debb0bd40d42a3bab8ba8184d72e4">SB_BLOCK_COUNT</a>(sb) - 1) / (sb-&gt;s_blocksize * 8) + 1;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;}</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;</div><div class="line"><a name="l01166"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#addd83b3b05f4c8ef6a898df8b54655c0"> 1166</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#addd83b3b05f4c8ef6a898df8b54655c0">bmap_would_wrap</a>(<span class="keywordtype">unsigned</span> bmap_nr)</div><div class="line"><a name="l01167"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#af3897e7afa3b7be539f8526da2af92a6"> 1167</a></span>&#160;{</div><div class="line"><a name="l01168"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a5afdae4130a9b1a77e750bd219638d78"> 1168</a></span>&#160;    <span class="keywordflow">return</span> bmap_nr &gt; ((1LL &lt;&lt; 16) - 1);</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;}</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;<span class="comment"> * this says about version of key of all items (but stat data) the</span></div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;<span class="comment"> * object consists of</span></div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01175"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a85a76f845efdbea5dce50b19a6862a7e"> 1175</a></span>&#160;<span class="preprocessor">#define get_inode_item_key_version( inode )                                    \</span></div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;<span class="preprocessor">    ((REISERFS_I(inode)-&gt;i_flags &amp; i_item_key_version_mask) ? KEY_FORMAT_3_6 : KEY_FORMAT_3_5)</span></div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;</div><div class="line"><a name="l01178"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a5ac9546795b77f6098e5b0cf51a36647"> 1178</a></span>&#160;<span class="preprocessor">#define set_inode_item_key_version( inode, version )                           \</span></div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;<span class="preprocessor">         ({ if((version)==KEY_FORMAT_3_6)                                      \</span></div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;<span class="preprocessor">                REISERFS_I(inode)-&gt;i_flags |= i_item_key_version_mask;      \</span></div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;<span class="preprocessor">            else                                                               \</span></div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;<span class="preprocessor">                REISERFS_I(inode)-&gt;i_flags &amp;= ~i_item_key_version_mask; })</span></div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;</div><div class="line"><a name="l01184"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a9c0356a30d265abc090c39a956e94c62"> 1184</a></span>&#160;<span class="preprocessor">#define get_inode_sd_version(inode)                                            \</span></div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;<span class="preprocessor">    ((REISERFS_I(inode)-&gt;i_flags &amp; i_stat_data_version_mask) ? STAT_DATA_V2 : STAT_DATA_V1)</span></div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;</div><div class="line"><a name="l01187"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a4ad57d0319e47feb8d733a97bdea5202"> 1187</a></span>&#160;<span class="preprocessor">#define set_inode_sd_version(inode, version)                                   \</span></div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;<span class="preprocessor">         ({ if((version)==STAT_DATA_V2)                                        \</span></div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;<span class="preprocessor">                REISERFS_I(inode)-&gt;i_flags |= i_stat_data_version_mask;     \</span></div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;<span class="preprocessor">            else                                                               \</span></div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;<span class="preprocessor">                REISERFS_I(inode)-&gt;i_flags &amp;= ~i_stat_data_version_mask; })</span></div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;<span class="comment"> * This is an aggressive tail suppression policy, I am hoping it</span></div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;<span class="comment"> * improves our benchmarks. The principle behind it is that percentage</span></div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;<span class="comment"> * space saving is what matters, not absolute space saving.  This is</span></div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;<span class="comment"> * non-intuitive, but it helps to understand it if you consider that the</span></div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;<span class="comment"> * cost to access 4 blocks is not much more than the cost to access 1</span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;<span class="comment"> * block, if you have to do a seek and rotate.  A tail risks a</span></div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;<span class="comment"> * non-linear disk access that is significant as a percentage of total</span></div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;<span class="comment"> * time cost for a 4 block file and saves an amount of space that is</span></div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;<span class="comment"> * less significant as a percentage of space, or so goes the hypothesis.</span></div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;<span class="comment"> * -Hans</span></div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01205"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ad3faaea3b8dd2163a5238b1da6b470ae"> 1205</a></span>&#160;<span class="preprocessor">#define STORE_TAIL_IN_UNFM_S1(n_file_size,n_tail_size,n_block_size) \</span></div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;<span class="preprocessor">(\</span></div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;<span class="preprocessor">  (!(n_tail_size)) || \</span></div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;<span class="preprocessor">  (((n_tail_size) &gt; MAX_DIRECT_ITEM_LEN(n_block_size)) || \</span></div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;<span class="preprocessor">   ( (n_file_size) &gt;= (n_block_size) * 4 ) || \</span></div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;<span class="preprocessor">   ( ( (n_file_size) &gt;= (n_block_size) * 3 ) &amp;&amp; \</span></div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;<span class="preprocessor">     ( (n_tail_size) &gt;=   (MAX_DIRECT_ITEM_LEN(n_block_size))/4) ) || \</span></div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;<span class="preprocessor">   ( ( (n_file_size) &gt;= (n_block_size) * 2 ) &amp;&amp; \</span></div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;<span class="preprocessor">     ( (n_tail_size) &gt;=   (MAX_DIRECT_ITEM_LEN(n_block_size))/2) ) || \</span></div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;<span class="preprocessor">   ( ( (n_file_size) &gt;= (n_block_size) ) &amp;&amp; \</span></div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;<span class="preprocessor">     ( (n_tail_size) &gt;=   (MAX_DIRECT_ITEM_LEN(n_block_size) * 3)/4) ) ) \</span></div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;<span class="preprocessor">)</span></div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;<span class="comment"> * Another strategy for tails, this one means only create a tail if all the</span></div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;<span class="comment"> * file would fit into one DIRECT item.</span></div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;<span class="comment"> * Primary intention for this one is to increase performance by decreasing</span></div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;<span class="comment"> * seeking.</span></div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l01224"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aaef328a2a7a290967c5f42ccabac52fa"> 1224</a></span>&#160;<span class="preprocessor">#define STORE_TAIL_IN_UNFM_S2(n_file_size,n_tail_size,n_block_size) \</span></div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;<span class="preprocessor">(\</span></div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;<span class="preprocessor">  (!(n_tail_size)) || \</span></div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;<span class="preprocessor">  (((n_file_size) &gt; MAX_DIRECT_ITEM_LEN(n_block_size)) ) \</span></div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;<span class="preprocessor">)</span></div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;<span class="comment"> * values for s_umount_state field</span></div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01233"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a1d3b4e5f440289819d11e13c9f61999e"> 1233</a></span>&#160;<span class="preprocessor">#define REISERFS_VALID_FS    1</span></div><div class="line"><a name="l01234"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a1d4100c2b0673a9c6575f5a63201a839"> 1234</a></span>&#160;<span class="preprocessor">#define REISERFS_ERROR_FS    2</span></div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;<span class="comment"> * there are 5 item types currently</span></div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01239"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a44a8520eb5aefc28dd3167ed5ac1e9df"> 1239</a></span>&#160;<span class="preprocessor">#define TYPE_STAT_DATA 0</span></div><div class="line"><a name="l01240"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a14b6f866d67b9e4b0184b865fd9aaa3c"> 1240</a></span>&#160;<span class="preprocessor">#define TYPE_INDIRECT 1</span></div><div class="line"><a name="l01241"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a4fb007f8114a0807fa711a21296cf704"> 1241</a></span>&#160;<span class="preprocessor">#define TYPE_DIRECT 2</span></div><div class="line"><a name="l01242"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#af52a53f0ef9bc7c5790028a0f81889d1"> 1242</a></span>&#160;<span class="preprocessor">#define TYPE_DIRENTRY 3</span></div><div class="line"><a name="l01243"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a79640a36b37453c64cf9ee81d753c531"> 1243</a></span>&#160;<span class="preprocessor">#define TYPE_MAXTYPE 3</span></div><div class="line"><a name="l01244"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a9e261a6d9efb4e748a301450788ec143"> 1244</a></span>&#160;<span class="preprocessor">#define TYPE_ANY 15     </span><span class="comment">/* FIXME: comment is required */</span><span class="preprocessor"></span></div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;<span class="comment">/***************************************************************************</span></div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;<span class="comment"> *                       KEY &amp; ITEM HEAD                                   *</span></div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;<span class="comment"> ***************************************************************************/</span></div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;<span class="comment">/* * directories use this key as well as old files */</span></div><div class="line"><a name="l01251"></a><span class="lineno"><a class="line" href="structoffset__v1.html"> 1251</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structoffset__v1.html">offset_v1</a> {</div><div class="line"><a name="l01252"></a><span class="lineno"><a class="line" href="structoffset__v1.html#aa90c371f3edb623236b0ef5822d9f59f"> 1252</a></span>&#160;    __le32 <a class="code" href="structoffset__v1.html#aa90c371f3edb623236b0ef5822d9f59f">k_offset</a>;</div><div class="line"><a name="l01253"></a><span class="lineno"><a class="line" href="structoffset__v1.html#ac4e7eed34358c5a86df76cf8bacf53a8"> 1253</a></span>&#160;    __le32 <a class="code" href="structoffset__v1.html#ac4e7eed34358c5a86df76cf8bacf53a8">k_uniqueness</a>;</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;} <a class="code" href="reiserfs_8h.html#aa4ff29884bea3444df9bcf07d9ecad9c">__attribute__</a> ((__packed__));</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;</div><div class="line"><a name="l01256"></a><span class="lineno"><a class="line" href="structoffset__v2.html"> 1256</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structoffset__v2.html">offset_v2</a> {</div><div class="line"><a name="l01257"></a><span class="lineno"><a class="line" href="structoffset__v2.html#ab97d4529410db653ac442844ba353053"> 1257</a></span>&#160;    __le64 <a class="code" href="structoffset__v2.html#ab97d4529410db653ac442844ba353053">v</a>;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;} <a class="code" href="reiserfs_8h.html#aa4ff29884bea3444df9bcf07d9ecad9c">__attribute__</a> ((__packed__));</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;</div><div class="line"><a name="l01260"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a4777fbe92047586f192fb3de56ed270a"> 1260</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> __u16 <a class="code" href="reiserfs_8h.html#a4777fbe92047586f192fb3de56ed270a">offset_v2_k_type</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structoffset__v2.html">offset_v2</a> *v2)</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;{</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    __u8 <a class="code" href="cifsacl_8h.html#a1d127017fb298b889f4ba24752d08b8e">type</a> = le64_to_cpu(v2-&gt;<a class="code" href="structoffset__v2.html#ab97d4529410db653ac442844ba353053">v</a>) &gt;&gt; 60;</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    <span class="keywordflow">return</span> (type &lt;= <a class="code" href="reiserfs_8h.html#a79640a36b37453c64cf9ee81d753c531">TYPE_MAXTYPE</a>) ? <a class="code" href="cifsacl_8h.html#a1d127017fb298b889f4ba24752d08b8e">type</a> : <a class="code" href="reiserfs_8h.html#a9e261a6d9efb4e748a301450788ec143">TYPE_ANY</a>;</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;}</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;</div><div class="line"><a name="l01266"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ad6f8c43345aec774d56d664dd2cdcf85"> 1266</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#ad6f8c43345aec774d56d664dd2cdcf85">set_offset_v2_k_type</a>(<span class="keyword">struct</span> <a class="code" href="structoffset__v2.html">offset_v2</a> *v2, <span class="keywordtype">int</span> <a class="code" href="cifsacl_8h.html#a1d127017fb298b889f4ba24752d08b8e">type</a>)</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;{</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    v2-&gt;<a class="code" href="structoffset__v2.html#ab97d4529410db653ac442844ba353053">v</a> =</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;        (v2-&gt;<a class="code" href="structoffset__v2.html#ab97d4529410db653ac442844ba353053">v</a> &amp; cpu_to_le64(~0ULL &gt;&gt; 4)) | cpu_to_le64((__u64) type &lt;&lt; 60);</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;}</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;</div><div class="line"><a name="l01272"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a67e0e7a33f122df8324e635d7d1eed04"> 1272</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> loff_t <a class="code" href="reiserfs_8h.html#a67e0e7a33f122df8324e635d7d1eed04">offset_v2_k_offset</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structoffset__v2.html">offset_v2</a> *v2)</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;{</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    <span class="keywordflow">return</span> le64_to_cpu(v2-&gt;<a class="code" href="structoffset__v2.html#ab97d4529410db653ac442844ba353053">v</a>) &amp; (~0ULL &gt;&gt; 4);</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;}</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;</div><div class="line"><a name="l01277"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aff8b30122f030ef444959232d1882cba"> 1277</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#aff8b30122f030ef444959232d1882cba">set_offset_v2_k_offset</a>(<span class="keyword">struct</span> <a class="code" href="structoffset__v2.html">offset_v2</a> *v2, loff_t <a class="code" href="ctree_8h.html#a3875b4f2ee8a9d27ac3b3b145f934f86">offset</a>)</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;{</div><div class="line"><a name="l01279"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a38bdab97ac511f3bb9e19f2e511d2066"> 1279</a></span>&#160;    offset &amp;= (~0ULL &gt;&gt; 4);</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    v2-&gt;<a class="code" href="structoffset__v2.html#ab97d4529410db653ac442844ba353053">v</a> = (v2-&gt;<a class="code" href="structoffset__v2.html#ab97d4529410db653ac442844ba353053">v</a> &amp; cpu_to_le64(15ULL &lt;&lt; 60)) | cpu_to_le64(offset);</div><div class="line"><a name="l01281"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#afed91f696fe8ec23c35d526f25599aeb"> 1281</a></span>&#160;}</div><div class="line"><a name="l01282"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ac3fa26a2c2dc860e45291fd8eb0f6a6f"> 1282</a></span>&#160;</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;<span class="comment"> * Key of an item determines its location in the S+tree, and</span></div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;<span class="comment"> * is composed of 4 components</span></div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01287"></a><span class="lineno"><a class="line" href="structreiserfs__key.html"> 1287</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structreiserfs__key.html">reiserfs_key</a> {</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    <span class="comment">/* packing locality: by default parent directory object id */</span></div><div class="line"><a name="l01289"></a><span class="lineno"><a class="line" href="structreiserfs__key.html#a9b5977a9a89cf70e3deb159795ea0542"> 1289</a></span>&#160;    __le32 <a class="code" href="structreiserfs__key.html#a9b5977a9a89cf70e3deb159795ea0542">k_dir_id</a>;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;</div><div class="line"><a name="l01291"></a><span class="lineno"><a class="line" href="structreiserfs__key.html#a4de5557c57687c6db942536930b8fa40"> 1291</a></span>&#160;    __le32 <a class="code" href="structreiserfs__key.html#a4de5557c57687c6db942536930b8fa40">k_objectid</a>;  <span class="comment">/* object identifier */</span></div><div class="line"><a name="l01292"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ad09f69dea33069c12159ff2264009fc2"> 1292</a></span>&#160;    <span class="keyword">union </span>{</div><div class="line"><a name="l01293"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a40518f9d84ad2c5883922eac9d713d09"> 1293</a></span>&#160;        <span class="keyword">struct </span><a class="code" href="structoffset__v1.html">offset_v1</a> <a class="code" href="reiserfs_8h.html#ad09f69dea33069c12159ff2264009fc2">k_offset_v1</a>;</div><div class="line"><a name="l01294"></a><span class="lineno"><a class="line" href="structreiserfs__key.html#aec914444597d34590eade817c6496158"> 1294</a></span>&#160;        <span class="keyword">struct </span><a class="code" href="structoffset__v2.html">offset_v2</a> <a class="code" href="reiserfs_8h.html#a40518f9d84ad2c5883922eac9d713d09">k_offset_v2</a>;</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;    } <a class="code" href="reiserfs_8h.html#aa4ff29884bea3444df9bcf07d9ecad9c">__attribute__</a> ((__packed__)) <a class="code" href="protocol_8h.html#ad56754751edde9686250d5005b525abf">u</a>;</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;} <a class="code" href="reiserfs_8h.html#aa4ff29884bea3444df9bcf07d9ecad9c">__attribute__</a> ((__packed__));</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;</div><div class="line"><a name="l01298"></a><span class="lineno"><a class="line" href="structin__core__key.html"> 1298</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structin__core__key.html">in_core_key</a> {</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    <span class="comment">/* packing locality: by default parent directory object id */</span></div><div class="line"><a name="l01300"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a4824bb21a9854f4f8b288a205d4b57ca"> 1300</a></span>&#160;    __u32 <a class="code" href="reiserfs_8h.html#a38bdab97ac511f3bb9e19f2e511d2066">k_dir_id</a>;</div><div class="line"><a name="l01301"></a><span class="lineno"><a class="line" href="structin__core__key.html#a70bb564426efab5bf6e8308ca2c7aafa"> 1301</a></span>&#160;    __u32 <a class="code" href="structin__core__key.html#a70bb564426efab5bf6e8308ca2c7aafa">k_objectid</a>;   <span class="comment">/* object identifier */</span></div><div class="line"><a name="l01302"></a><span class="lineno"><a class="line" href="structin__core__key.html#aa30f59ae51019f38ecea646d6b0f6b2e"> 1302</a></span>&#160;    __u64 <a class="code" href="structin__core__key.html#aa30f59ae51019f38ecea646d6b0f6b2e">k_offset</a>;</div><div class="line"><a name="l01303"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a4873d5c7dd26abaa70ebd007480326ea"> 1303</a></span>&#160;    __u8 k_type;</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;};</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;</div><div class="line"><a name="l01306"></a><span class="lineno"><a class="line" href="structcpu__key.html"> 1306</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structcpu__key.html">cpu_key</a> {</div><div class="line"><a name="l01307"></a><span class="lineno"><a class="line" href="structcpu__key.html#ad7ca5672de26dc398777b13dd7debd85"> 1307</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structin__core__key.html">in_core_key</a> on_disk_key;</div><div class="line"><a name="l01308"></a><span class="lineno"><a class="line" href="structcpu__key.html#a9cd532834a43c0309eb927b8e35e69bf"> 1308</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structcpu__key.html#a9cd532834a43c0309eb927b8e35e69bf">version</a>;</div><div class="line"><a name="l01309"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a589a764731e675d99ec89f4a84f4f6c8"> 1309</a></span>&#160;    <span class="comment">/* 3 in all cases but direct2indirect and indirect2direct conversion */</span></div><div class="line"><a name="l01310"></a><span class="lineno"><a class="line" href="structcpu__key.html#a124063a384c03a344752aa0371d0c222"> 1310</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structcpu__key.html#a124063a384c03a344752aa0371d0c222">key_length</a>;</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;};</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;<span class="comment"> * Our function for comparing keys can compare keys of different</span></div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;<span class="comment"> * lengths.  It takes as a parameter the length of the keys it is to</span></div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;<span class="comment"> * compare.  These defines are used in determining what is to be passed</span></div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;<span class="comment"> * to it as that parameter.</span></div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01319"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ab4f20ce4c535f44b3f8e537ff826bc05"> 1319</a></span>&#160;<span class="preprocessor">#define REISERFS_FULL_KEY_LEN     4</span></div><div class="line"><a name="l01320"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aa88d8d353a4e73de87f6d0b041b31c0a"> 1320</a></span>&#160;<span class="preprocessor">#define REISERFS_SHORT_KEY_LEN    2</span></div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;<span class="comment">/* The result of the key compare */</span></div><div class="line"><a name="l01323"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#af5e5bfde77f740f845536fcd5aa66981"> 1323</a></span>&#160;<span class="preprocessor">#define FIRST_GREATER 1</span></div><div class="line"><a name="l01324"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aa17d7271268b1aec1d629a8a950b0d59"> 1324</a></span>&#160;<span class="preprocessor">#define SECOND_GREATER -1</span></div><div class="line"><a name="l01325"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a50dcdefba1f46557d38c55c1731d1208"> 1325</a></span>&#160;<span class="preprocessor">#define KEYS_IDENTICAL 0</span></div><div class="line"><a name="l01326"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a3fe7aaed2419d9ba1b0cbaf3e280d684"> 1326</a></span>&#160;<span class="preprocessor">#define KEY_FOUND 1</span></div><div class="line"><a name="l01327"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a12f8ec8b6434aa0f09f83687458af46a"> 1327</a></span>&#160;<span class="preprocessor">#define KEY_NOT_FOUND 0</span></div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;</div><div class="line"><a name="l01329"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a2d996237e082b78b41771b5aa1a6eae1"> 1329</a></span>&#160;<span class="preprocessor">#define KEY_SIZE (sizeof(struct reiserfs_key))</span></div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;<span class="comment">/* return values for search_by_key and clones */</span></div><div class="line"><a name="l01332"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a9fd2cb0364a6d7146fdf65437a2369a2"> 1332</a></span>&#160;<span class="preprocessor">#define ITEM_FOUND 1</span></div><div class="line"><a name="l01333"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ae26cc9f50917c176172bdf9c2b8fc525"> 1333</a></span>&#160;<span class="preprocessor">#define ITEM_NOT_FOUND 0</span></div><div class="line"><a name="l01334"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a93b962fc8be4ecbfc3340c9201edde00"> 1334</a></span>&#160;<span class="preprocessor">#define ENTRY_FOUND 1</span></div><div class="line"><a name="l01335"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a831595fb61f52294de1b940033f51d62"> 1335</a></span>&#160;<span class="preprocessor">#define ENTRY_NOT_FOUND 0</span></div><div class="line"><a name="l01336"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a37aec4489b9e24b12610720740bf9648"> 1336</a></span>&#160;<span class="preprocessor">#define DIRECTORY_NOT_FOUND -1</span></div><div class="line"><a name="l01337"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a4b6561322e53cc3db0d492ee692ae02d"> 1337</a></span>&#160;<span class="preprocessor">#define REGULAR_FILE_FOUND -2</span></div><div class="line"><a name="l01338"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a0033117fa66666392bfd9013806a2119"> 1338</a></span>&#160;<span class="preprocessor">#define DIRECTORY_FOUND -3</span></div><div class="line"><a name="l01339"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a61321edc93559b2d7361c5053ec1a6b8"> 1339</a></span>&#160;<span class="preprocessor">#define BYTE_FOUND 1</span></div><div class="line"><a name="l01340"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a0390f77441dafc437512f749dbd850a7"> 1340</a></span>&#160;<span class="preprocessor">#define BYTE_NOT_FOUND 0</span></div><div class="line"><a name="l01341"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a775241e32b7ccb12e344ae23aa2db6b1"> 1341</a></span>&#160;<span class="preprocessor">#define FILE_NOT_FOUND -1</span></div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;</div><div class="line"><a name="l01343"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a6efd30e9f0aebe53941764173fa449f0"> 1343</a></span>&#160;<span class="preprocessor">#define POSITION_FOUND 1</span></div><div class="line"><a name="l01344"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a3d3257c7ea8ba3ac8916bc81b48ececa"> 1344</a></span>&#160;<span class="preprocessor">#define POSITION_NOT_FOUND 0</span></div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;<span class="comment">/* return values for reiserfs_find_entry and search_by_entry_key */</span></div><div class="line"><a name="l01347"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a7aab6730ee577f5d3ba904a3fa5fc969"> 1347</a></span>&#160;<span class="preprocessor">#define NAME_FOUND 1</span></div><div class="line"><a name="l01348"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a7c0abcd1b951b70984c0b6be64b74109"> 1348</a></span>&#160;<span class="preprocessor">#define NAME_NOT_FOUND 0</span></div><div class="line"><a name="l01349"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#abad2239299d95c73487c5084131508e6"> 1349</a></span>&#160;<span class="preprocessor">#define GOTO_PREVIOUS_ITEM 2</span></div><div class="line"><a name="l01350"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ab143b9fbf050a7900a6e8e31e691820f"> 1350</a></span>&#160;<span class="preprocessor">#define NAME_FOUND_INVISIBLE 3</span></div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;<span class="comment"> * Everything in the filesystem is stored as a set of items.  The</span></div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;<span class="comment"> * item head contains the key of the item, its free space (for</span></div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;<span class="comment"> * indirect items) and specifies the location of the item itself</span></div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;<span class="comment"> * within the block.</span></div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;</div><div class="line"><a name="l01359"></a><span class="lineno"><a class="line" href="structitem__head.html"> 1359</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structitem__head.html">item_head</a> {</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;<span class="comment">     * Everything in the tree is found by searching for it based on</span></div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;<span class="comment">     * its key.</span></div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l01364"></a><span class="lineno"><a class="line" href="structitem__head.html#acfa02c91a5f6b7645cc9c0366eeb0956"> 1364</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structreiserfs__key.html">reiserfs_key</a> <a class="code" href="reiserfs_8h.html#ac3fa26a2c2dc860e45291fd8eb0f6a6f">ih_key</a>;</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    <span class="keyword">union </span>{</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;<span class="comment">         * The free space in the last unformatted node of an</span></div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;<span class="comment">         * indirect item if this is an indirect item.  This</span></div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;<span class="comment">         * equals 0xFFFF iff this is a direct item or stat data</span></div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;<span class="comment">         * item. Note that the key, not this field, is used to</span></div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;<span class="comment">         * determine the item type, and thus which field this</span></div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;<span class="comment">         * union contains.</span></div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l01374"></a><span class="lineno"><a class="line" href="structitem__head.html#a395626a228d057c0c84df8805543ab87"> 1374</a></span>&#160;        __le16 <a class="code" href="structitem__head.html#a395626a228d057c0c84df8805543ab87">ih_free_space_reserved</a>;</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;<span class="comment">         * Iff this is a directory item, this field equals the</span></div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;<span class="comment">         * number of directory entries in the directory item.</span></div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l01380"></a><span class="lineno"><a class="line" href="structitem__head.html#ab09ddd23c56e62ab39ff1f468551c5ec"> 1380</a></span>&#160;        __le16 <a class="code" href="structitem__head.html#ab09ddd23c56e62ab39ff1f468551c5ec">ih_entry_count</a>;</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    } <a class="code" href="reiserfs_8h.html#aa4ff29884bea3444df9bcf07d9ecad9c">__attribute__</a> ((__packed__)) <a class="code" href="protocol_8h.html#ad56754751edde9686250d5005b525abf">u</a>;</div><div class="line"><a name="l01382"></a><span class="lineno"><a class="line" href="structitem__head.html#a070db1a4a2984e3eff5e530e87556ea6"> 1382</a></span>&#160;    __le16 <a class="code" href="structitem__head.html#a070db1a4a2984e3eff5e530e87556ea6">ih_item_len</a>; <span class="comment">/* total size of the item body */</span></div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    <span class="comment">/* an offset to the item body within the block */</span></div><div class="line"><a name="l01385"></a><span class="lineno"><a class="line" href="structitem__head.html#adb63f16ade27a1c0c0279d5568ea7118"> 1385</a></span>&#160;    __le16 <a class="code" href="structitem__head.html#adb63f16ade27a1c0c0279d5568ea7118">ih_item_location</a>;</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;<span class="comment">     * 0 for all old items, 2 for new ones. Highest bit is set by fsck</span></div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;<span class="comment">     * temporary, cleaned after all done</span></div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l01391"></a><span class="lineno"><a class="line" href="structitem__head.html#aca01d08b3bcfb693b5437ee00a065a78"> 1391</a></span>&#160;    __le16 <a class="code" href="structitem__head.html#aca01d08b3bcfb693b5437ee00a065a78">ih_version</a>;</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;} <a class="code" href="reiserfs_8h.html#aa4ff29884bea3444df9bcf07d9ecad9c">__attribute__</a> ((__packed__));</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;<span class="comment">/* size of item header     */</span></div><div class="line"><a name="l01394"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a0b9a7362b5449886b216344bc7eddcc6"> 1394</a></span>&#160;<span class="preprocessor">#define IH_SIZE (sizeof(struct item_head))</span></div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;</div><div class="line"><a name="l01396"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a8f2eb0e52d518fd79ad49c8fd3e2ea37"> 1396</a></span>&#160;<span class="preprocessor">#define ih_free_space(ih)            le16_to_cpu((ih)-&gt;u.ih_free_space_reserved)</span></div><div class="line"><a name="l01397"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a714feb957a605f854a00c74b309c73de"> 1397</a></span>&#160;<span class="preprocessor">#define ih_version(ih)               le16_to_cpu((ih)-&gt;ih_version)</span></div><div class="line"><a name="l01398"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#acb1fc8f171408755217a74cd43f0ccee"> 1398</a></span>&#160;<span class="preprocessor">#define ih_entry_count(ih)           le16_to_cpu((ih)-&gt;u.ih_entry_count)</span></div><div class="line"><a name="l01399"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a139414bd121e02b9c3e64be89e2f3c5b"> 1399</a></span>&#160;<span class="preprocessor">#define ih_location(ih)              le16_to_cpu((ih)-&gt;ih_item_location)</span></div><div class="line"><a name="l01400"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a7660367196176fd0271fe6b1838240f0"> 1400</a></span>&#160;<span class="preprocessor">#define ih_item_len(ih)              le16_to_cpu((ih)-&gt;ih_item_len)</span></div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;</div><div class="line"><a name="l01402"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a96504714b8d9dc6ad68a91c973747ad5"> 1402</a></span>&#160;<span class="preprocessor">#define put_ih_free_space(ih, val)   do { (ih)-&gt;u.ih_free_space_reserved = cpu_to_le16(val); } while(0)</span></div><div class="line"><a name="l01403"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ab037f40bf40770bca933485c2f967cb8"> 1403</a></span>&#160;<span class="preprocessor">#define put_ih_version(ih, val)      do { (ih)-&gt;ih_version = cpu_to_le16(val); } while (0)</span></div><div class="line"><a name="l01404"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a45d7c9015c72f4f2766cf9e27e05ac28"> 1404</a></span>&#160;<span class="preprocessor">#define put_ih_entry_count(ih, val)  do { (ih)-&gt;u.ih_entry_count = cpu_to_le16(val); } while (0)</span></div><div class="line"><a name="l01405"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aae0e626105f395683e7bd0855f0e9c9a"> 1405</a></span>&#160;<span class="preprocessor">#define put_ih_location(ih, val)     do { (ih)-&gt;ih_item_location = cpu_to_le16(val); } while (0)</span></div><div class="line"><a name="l01406"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ac340eb10447c03d7c7680d8738b2da84"> 1406</a></span>&#160;<span class="preprocessor">#define put_ih_item_len(ih, val)     do { (ih)-&gt;ih_item_len = cpu_to_le16(val); } while (0)</span></div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;</div><div class="line"><a name="l01408"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a33a2c8e6d29ddb471fd43ba057265ea1"> 1408</a></span>&#160;<span class="preprocessor">#define unreachable_item(ih) (ih_version(ih) &amp; (1 &lt;&lt; 15))</span></div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;</div><div class="line"><a name="l01410"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a160ac1a96ddceb0ded21176fde36ad8c"> 1410</a></span>&#160;<span class="preprocessor">#define get_ih_free_space(ih) (ih_version (ih) == KEY_FORMAT_3_6 ? 0 : ih_free_space (ih))</span></div><div class="line"><a name="l01411"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a05f8a8726dac59845e8e3553dec214a9"> 1411</a></span>&#160;<span class="preprocessor">#define set_ih_free_space(ih,val) put_ih_free_space((ih), ((ih_version(ih) == KEY_FORMAT_3_6) ? 0 : (val)))</span></div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;<span class="comment"> * these operate on indirect items, where you&#39;ve got an array of ints</span></div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;<span class="comment"> * at a possibly unaligned location.  These are a noop on ia32</span></div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;<span class="comment"> * p is the array of __u32, i is the index into the array, v is the value</span></div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;<span class="comment"> * to store there.</span></div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01420"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#af644a5a6bd0b07a4b1dbd7384160ea5a"> 1420</a></span>&#160;<span class="preprocessor">#define get_block_num(p, i) get_unaligned_le32((p) + (i))</span></div><div class="line"><a name="l01421"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a2870a62a36cd8c00ec9717c92af9aec6"> 1421</a></span>&#160;<span class="preprocessor">#define put_block_num(p, i, v) put_unaligned_le32((v), (p) + (i))</span></div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;<span class="comment">/* * in old version uniqueness field shows key type */</span></div><div class="line"><a name="l01424"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ac84ab8f1cc1f9c7990fecf622c509e15"> 1424</a></span>&#160;<span class="preprocessor">#define V1_SD_UNIQUENESS 0</span></div><div class="line"><a name="l01425"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a29038a7fc175d42736263b3f85730b5f"> 1425</a></span>&#160;<span class="preprocessor">#define V1_INDIRECT_UNIQUENESS 0xfffffffe</span></div><div class="line"><a name="l01426"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aee137f65e23ae211b8f6240c690d0926"> 1426</a></span>&#160;<span class="preprocessor">#define V1_DIRECT_UNIQUENESS 0xffffffff</span></div><div class="line"><a name="l01427"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ac997796b0f86fd89e9bdb329e10d7b0e"> 1427</a></span>&#160;<span class="preprocessor">#define V1_DIRENTRY_UNIQUENESS 500</span></div><div class="line"><a name="l01428"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a191afab1972fe09a20ff74fc244ade0a"> 1428</a></span>&#160;<span class="preprocessor">#define V1_ANY_UNIQUENESS 555   </span><span class="comment">/* FIXME: comment is required */</span><span class="preprocessor"></span></div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;<span class="comment">/* here are conversion routines */</span></div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a2b87be5696e3915b3c61c36f8960fa60">uniqueness2type</a>(__u32 uniqueness) <a class="code" href="reiserfs_8h.html#ac8f3360e70fa8b2a51b2157d11682994">CONSTF</a>;</div><div class="line"><a name="l01432"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a2b87be5696e3915b3c61c36f8960fa60"> 1432</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a2b87be5696e3915b3c61c36f8960fa60">uniqueness2type</a>(__u32 uniqueness)</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;{</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    <span class="keywordflow">switch</span> ((<span class="keywordtype">int</span>)uniqueness) {</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="reiserfs_8h.html#ac84ab8f1cc1f9c7990fecf622c509e15">V1_SD_UNIQUENESS</a>:</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="reiserfs_8h.html#a44a8520eb5aefc28dd3167ed5ac1e9df">TYPE_STAT_DATA</a>;</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="reiserfs_8h.html#a29038a7fc175d42736263b3f85730b5f">V1_INDIRECT_UNIQUENESS</a>:</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="reiserfs_8h.html#a14b6f866d67b9e4b0184b865fd9aaa3c">TYPE_INDIRECT</a>;</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="reiserfs_8h.html#aee137f65e23ae211b8f6240c690d0926">V1_DIRECT_UNIQUENESS</a>:</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="reiserfs_8h.html#a4fb007f8114a0807fa711a21296cf704">TYPE_DIRECT</a>;</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="reiserfs_8h.html#ac997796b0f86fd89e9bdb329e10d7b0e">V1_DIRENTRY_UNIQUENESS</a>:</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="reiserfs_8h.html#af52a53f0ef9bc7c5790028a0f81889d1">TYPE_DIRENTRY</a>;</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="reiserfs_8h.html#a191afab1972fe09a20ff74fc244ade0a">V1_ANY_UNIQUENESS</a>:</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="reiserfs_8h.html#a9e261a6d9efb4e748a301450788ec143">TYPE_ANY</a>;</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;    }</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;}</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> __u32 <a class="code" href="reiserfs_8h.html#a43bfdda5012a205dbe2d8b44a2c9aeb9">type2uniqueness</a>(<span class="keywordtype">int</span> <a class="code" href="cifsacl_8h.html#a1d127017fb298b889f4ba24752d08b8e">type</a>) <a class="code" href="reiserfs_8h.html#ac8f3360e70fa8b2a51b2157d11682994">CONSTF</a>;</div><div class="line"><a name="l01450"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a43bfdda5012a205dbe2d8b44a2c9aeb9"> 1450</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> __u32 <a class="code" href="reiserfs_8h.html#a43bfdda5012a205dbe2d8b44a2c9aeb9">type2uniqueness</a>(<span class="keywordtype">int</span> type)</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;{</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    <span class="keywordflow">switch</span> (type) {</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="reiserfs_8h.html#a44a8520eb5aefc28dd3167ed5ac1e9df">TYPE_STAT_DATA</a>:</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="reiserfs_8h.html#ac84ab8f1cc1f9c7990fecf622c509e15">V1_SD_UNIQUENESS</a>;</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="reiserfs_8h.html#a14b6f866d67b9e4b0184b865fd9aaa3c">TYPE_INDIRECT</a>:</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="reiserfs_8h.html#a29038a7fc175d42736263b3f85730b5f">V1_INDIRECT_UNIQUENESS</a>;</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="reiserfs_8h.html#a4fb007f8114a0807fa711a21296cf704">TYPE_DIRECT</a>:</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="reiserfs_8h.html#aee137f65e23ae211b8f6240c690d0926">V1_DIRECT_UNIQUENESS</a>;</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="reiserfs_8h.html#af52a53f0ef9bc7c5790028a0f81889d1">TYPE_DIRENTRY</a>:</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="reiserfs_8h.html#ac997796b0f86fd89e9bdb329e10d7b0e">V1_DIRENTRY_UNIQUENESS</a>;</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="reiserfs_8h.html#a9e261a6d9efb4e748a301450788ec143">TYPE_ANY</a>:</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="reiserfs_8h.html#a191afab1972fe09a20ff74fc244ade0a">V1_ANY_UNIQUENESS</a>;</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    }</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;}</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;<span class="comment"> * key is pointer to on disk key which is stored in le, result is cpu,</span></div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;<span class="comment"> * there is no way to get version of object from key, so, provide</span></div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;<span class="comment"> * version to these defines</span></div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01472"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#abecc4f6ccf3ea24d7c84b1732769f8c2"> 1472</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> loff_t <a class="code" href="reiserfs_8h.html#abecc4f6ccf3ea24d7c84b1732769f8c2">le_key_k_offset</a>(<span class="keywordtype">int</span> <a class="code" href="send_8h.html#ac21c5e21e8a44a607c448b05de413ed4">version</a>,</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;                     <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structreiserfs__key.html">reiserfs_key</a> *<a class="code" href="ctree_8h.html#aa668e7809c8e0ee68dd5049ead875006">key</a>)</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;{</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;    <span class="keywordflow">return</span> (version == <a class="code" href="reiserfs_8h.html#a71b67ce5511178998ab99ae6fddfbe30">KEY_FORMAT_3_5</a>) ?</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;        le32_to_cpu(key-&gt;u.<a class="code" href="structreiserfs__key.html#ab16c2159abec804a6f3c0bab0713576b">k_offset_v1</a>.<a class="code" href="structoffset__v1.html#aa90c371f3edb623236b0ef5822d9f59f">k_offset</a>) :</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;        <a class="code" href="reiserfs_8h.html#a67e0e7a33f122df8324e635d7d1eed04">offset_v2_k_offset</a>(&amp;(key-&gt;u.<a class="code" href="structreiserfs__key.html#aec914444597d34590eade817c6496158">k_offset_v2</a>));</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;}</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;</div><div class="line"><a name="l01480"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a1ae8e78233e567fec6eb87d087d0aef1"> 1480</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> loff_t <a class="code" href="reiserfs_8h.html#a1ae8e78233e567fec6eb87d087d0aef1">le_ih_k_offset</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structitem__head.html">item_head</a> *ih)</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;{</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="reiserfs_8h.html#abecc4f6ccf3ea24d7c84b1732769f8c2">le_key_k_offset</a>(<a class="code" href="reiserfs_8h.html#a714feb957a605f854a00c74b309c73de">ih_version</a>(ih), &amp;(ih-&gt;<a class="code" href="structitem__head.html#acfa02c91a5f6b7645cc9c0366eeb0956">ih_key</a>));</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;}</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;</div><div class="line"><a name="l01485"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a6d1761c8e1733df0ffcb6574cc7af0ba"> 1485</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> loff_t <a class="code" href="reiserfs_8h.html#a6d1761c8e1733df0ffcb6574cc7af0ba">le_key_k_type</a>(<span class="keywordtype">int</span> <a class="code" href="send_8h.html#ac21c5e21e8a44a607c448b05de413ed4">version</a>, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structreiserfs__key.html">reiserfs_key</a> *<a class="code" href="ctree_8h.html#aa668e7809c8e0ee68dd5049ead875006">key</a>)</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;{</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    <span class="keywordflow">if</span> (version == <a class="code" href="reiserfs_8h.html#a71b67ce5511178998ab99ae6fddfbe30">KEY_FORMAT_3_5</a>) {</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;        loff_t val = le32_to_cpu(key-&gt;u.<a class="code" href="structreiserfs__key.html#ab16c2159abec804a6f3c0bab0713576b">k_offset_v1</a>.<a class="code" href="structoffset__v1.html#ac4e7eed34358c5a86df76cf8bacf53a8">k_uniqueness</a>);</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="reiserfs_8h.html#a2b87be5696e3915b3c61c36f8960fa60">uniqueness2type</a>(val);</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    } <span class="keywordflow">else</span></div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="reiserfs_8h.html#a4777fbe92047586f192fb3de56ed270a">offset_v2_k_type</a>(&amp;(key-&gt;u.<a class="code" href="structreiserfs__key.html#aec914444597d34590eade817c6496158">k_offset_v2</a>));</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;}</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;</div><div class="line"><a name="l01494"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a165602502b28476804696a40e83722d5"> 1494</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> loff_t <a class="code" href="reiserfs_8h.html#a165602502b28476804696a40e83722d5">le_ih_k_type</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structitem__head.html">item_head</a> *ih)</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;{</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="reiserfs_8h.html#a6d1761c8e1733df0ffcb6574cc7af0ba">le_key_k_type</a>(<a class="code" href="reiserfs_8h.html#a714feb957a605f854a00c74b309c73de">ih_version</a>(ih), &amp;(ih-&gt;<a class="code" href="structitem__head.html#acfa02c91a5f6b7645cc9c0366eeb0956">ih_key</a>));</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;}</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;</div><div class="line"><a name="l01499"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aabec935e367343b39df96915f520a9b2"> 1499</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#aabec935e367343b39df96915f520a9b2">set_le_key_k_offset</a>(<span class="keywordtype">int</span> <a class="code" href="send_8h.html#ac21c5e21e8a44a607c448b05de413ed4">version</a>, <span class="keyword">struct</span> <a class="code" href="structreiserfs__key.html">reiserfs_key</a> *<a class="code" href="ctree_8h.html#aa668e7809c8e0ee68dd5049ead875006">key</a>,</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;                       loff_t offset)</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;{</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    <span class="keywordflow">if</span> (version == <a class="code" href="reiserfs_8h.html#a71b67ce5511178998ab99ae6fddfbe30">KEY_FORMAT_3_5</a>)</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;        key-&gt;u.<a class="code" href="structreiserfs__key.html#ab16c2159abec804a6f3c0bab0713576b">k_offset_v1</a>.<a class="code" href="structoffset__v1.html#aa90c371f3edb623236b0ef5822d9f59f">k_offset</a> = cpu_to_le32(offset);</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;        <a class="code" href="reiserfs_8h.html#aff8b30122f030ef444959232d1882cba">set_offset_v2_k_offset</a>(&amp;key-&gt;u.<a class="code" href="structreiserfs__key.html#aec914444597d34590eade817c6496158">k_offset_v2</a>, offset);</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;}</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;</div><div class="line"><a name="l01508"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aae05bbe4a4af49871f9f3ec68bacbe94"> 1508</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#aae05bbe4a4af49871f9f3ec68bacbe94">add_le_key_k_offset</a>(<span class="keywordtype">int</span> <a class="code" href="send_8h.html#ac21c5e21e8a44a607c448b05de413ed4">version</a>, <span class="keyword">struct</span> <a class="code" href="structreiserfs__key.html">reiserfs_key</a> *<a class="code" href="ctree_8h.html#aa668e7809c8e0ee68dd5049ead875006">key</a>,</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;                       loff_t offset)</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;{</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    <a class="code" href="reiserfs_8h.html#aabec935e367343b39df96915f520a9b2">set_le_key_k_offset</a>(version, key,</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;                <a class="code" href="reiserfs_8h.html#abecc4f6ccf3ea24d7c84b1732769f8c2">le_key_k_offset</a>(version, key) + offset);</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;}</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;</div><div class="line"><a name="l01515"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a33484167c99e971825098c9557874409"> 1515</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a33484167c99e971825098c9557874409">add_le_ih_k_offset</a>(<span class="keyword">struct</span> <a class="code" href="structitem__head.html">item_head</a> *ih, loff_t offset)</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;{</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    <a class="code" href="reiserfs_8h.html#aae05bbe4a4af49871f9f3ec68bacbe94">add_le_key_k_offset</a>(<a class="code" href="reiserfs_8h.html#a714feb957a605f854a00c74b309c73de">ih_version</a>(ih), &amp;(ih-&gt;<a class="code" href="structitem__head.html#acfa02c91a5f6b7645cc9c0366eeb0956">ih_key</a>), offset);</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;}</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;</div><div class="line"><a name="l01520"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a1e2b0184009e9c66b7ad1f26a821671d"> 1520</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a1e2b0184009e9c66b7ad1f26a821671d">set_le_ih_k_offset</a>(<span class="keyword">struct</span> <a class="code" href="structitem__head.html">item_head</a> *ih, loff_t offset)</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;{</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    <a class="code" href="reiserfs_8h.html#aabec935e367343b39df96915f520a9b2">set_le_key_k_offset</a>(<a class="code" href="reiserfs_8h.html#a714feb957a605f854a00c74b309c73de">ih_version</a>(ih), &amp;(ih-&gt;<a class="code" href="structitem__head.html#acfa02c91a5f6b7645cc9c0366eeb0956">ih_key</a>), offset);</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;}</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;</div><div class="line"><a name="l01525"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ac1e9bd179d42a15d3bc394d629ad3e9c"> 1525</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#ac1e9bd179d42a15d3bc394d629ad3e9c">set_le_key_k_type</a>(<span class="keywordtype">int</span> <a class="code" href="send_8h.html#ac21c5e21e8a44a607c448b05de413ed4">version</a>, <span class="keyword">struct</span> <a class="code" href="structreiserfs__key.html">reiserfs_key</a> *<a class="code" href="ctree_8h.html#aa668e7809c8e0ee68dd5049ead875006">key</a>,</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;                     <span class="keywordtype">int</span> type)</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;{</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <span class="keywordflow">if</span> (version == <a class="code" href="reiserfs_8h.html#a71b67ce5511178998ab99ae6fddfbe30">KEY_FORMAT_3_5</a>) {</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;        type = <a class="code" href="reiserfs_8h.html#a43bfdda5012a205dbe2d8b44a2c9aeb9">type2uniqueness</a>(type);</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;        key-&gt;u.<a class="code" href="structreiserfs__key.html#ab16c2159abec804a6f3c0bab0713576b">k_offset_v1</a>.<a class="code" href="structoffset__v1.html#ac4e7eed34358c5a86df76cf8bacf53a8">k_uniqueness</a> = cpu_to_le32(type);</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    } <span class="keywordflow">else</span></div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;           <a class="code" href="reiserfs_8h.html#ad6f8c43345aec774d56d664dd2cdcf85">set_offset_v2_k_type</a>(&amp;key-&gt;u.<a class="code" href="structreiserfs__key.html#aec914444597d34590eade817c6496158">k_offset_v2</a>, type);</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;}</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;</div><div class="line"><a name="l01535"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a9f4ba55040202b318137a6dedc21579b"> 1535</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a9f4ba55040202b318137a6dedc21579b">set_le_ih_k_type</a>(<span class="keyword">struct</span> <a class="code" href="structitem__head.html">item_head</a> *ih, <span class="keywordtype">int</span> type)</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;{</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    <a class="code" href="reiserfs_8h.html#ac1e9bd179d42a15d3bc394d629ad3e9c">set_le_key_k_type</a>(<a class="code" href="reiserfs_8h.html#a714feb957a605f854a00c74b309c73de">ih_version</a>(ih), &amp;(ih-&gt;<a class="code" href="structitem__head.html#acfa02c91a5f6b7645cc9c0366eeb0956">ih_key</a>), type);</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;}</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;</div><div class="line"><a name="l01540"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a938f2919fc542842e2ab5dc28f522823"> 1540</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a938f2919fc542842e2ab5dc28f522823">is_direntry_le_key</a>(<span class="keywordtype">int</span> <a class="code" href="send_8h.html#ac21c5e21e8a44a607c448b05de413ed4">version</a>, <span class="keyword">struct</span> <a class="code" href="structreiserfs__key.html">reiserfs_key</a> *<a class="code" href="ctree_8h.html#aa668e7809c8e0ee68dd5049ead875006">key</a>)</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;{</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="reiserfs_8h.html#a6d1761c8e1733df0ffcb6574cc7af0ba">le_key_k_type</a>(version, key) == <a class="code" href="reiserfs_8h.html#af52a53f0ef9bc7c5790028a0f81889d1">TYPE_DIRENTRY</a>;</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;}</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;</div><div class="line"><a name="l01545"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aa7ea2155c7cfd12c8b2426363e75552c"> 1545</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#aa7ea2155c7cfd12c8b2426363e75552c">is_direct_le_key</a>(<span class="keywordtype">int</span> <a class="code" href="send_8h.html#ac21c5e21e8a44a607c448b05de413ed4">version</a>, <span class="keyword">struct</span> <a class="code" href="structreiserfs__key.html">reiserfs_key</a> *<a class="code" href="ctree_8h.html#aa668e7809c8e0ee68dd5049ead875006">key</a>)</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;{</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="reiserfs_8h.html#a6d1761c8e1733df0ffcb6574cc7af0ba">le_key_k_type</a>(version, key) == <a class="code" href="reiserfs_8h.html#a4fb007f8114a0807fa711a21296cf704">TYPE_DIRECT</a>;</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;}</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;</div><div class="line"><a name="l01550"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ad500ee6be538ab9e5e4c4782444949a9"> 1550</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#ad500ee6be538ab9e5e4c4782444949a9">is_indirect_le_key</a>(<span class="keywordtype">int</span> <a class="code" href="send_8h.html#ac21c5e21e8a44a607c448b05de413ed4">version</a>, <span class="keyword">struct</span> <a class="code" href="structreiserfs__key.html">reiserfs_key</a> *<a class="code" href="ctree_8h.html#aa668e7809c8e0ee68dd5049ead875006">key</a>)</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;{</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="reiserfs_8h.html#a6d1761c8e1733df0ffcb6574cc7af0ba">le_key_k_type</a>(version, key) == <a class="code" href="reiserfs_8h.html#a14b6f866d67b9e4b0184b865fd9aaa3c">TYPE_INDIRECT</a>;</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;}</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;</div><div class="line"><a name="l01555"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ad8221357dc80c0f8d4f0425625aac410"> 1555</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#ad8221357dc80c0f8d4f0425625aac410">is_statdata_le_key</a>(<span class="keywordtype">int</span> <a class="code" href="send_8h.html#ac21c5e21e8a44a607c448b05de413ed4">version</a>, <span class="keyword">struct</span> <a class="code" href="structreiserfs__key.html">reiserfs_key</a> *<a class="code" href="ctree_8h.html#aa668e7809c8e0ee68dd5049ead875006">key</a>)</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;{</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="reiserfs_8h.html#a6d1761c8e1733df0ffcb6574cc7af0ba">le_key_k_type</a>(version, key) == <a class="code" href="reiserfs_8h.html#a44a8520eb5aefc28dd3167ed5ac1e9df">TYPE_STAT_DATA</a>;</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;}</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;<span class="comment">/* item header has version.  */</span></div><div class="line"><a name="l01561"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ab648f2f3bae0aaef3770bcb18289e0dc"> 1561</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#ab648f2f3bae0aaef3770bcb18289e0dc">is_direntry_le_ih</a>(<span class="keyword">struct</span> <a class="code" href="structitem__head.html">item_head</a> *ih)</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;{</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="reiserfs_8h.html#a938f2919fc542842e2ab5dc28f522823">is_direntry_le_key</a>(<a class="code" href="reiserfs_8h.html#a714feb957a605f854a00c74b309c73de">ih_version</a>(ih), &amp;ih-&gt;<a class="code" href="structitem__head.html#acfa02c91a5f6b7645cc9c0366eeb0956">ih_key</a>);</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;}</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;</div><div class="line"><a name="l01566"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ac8a69c96fa8ad0c9303aa2331f3dc5d3"> 1566</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#ac8a69c96fa8ad0c9303aa2331f3dc5d3">is_direct_le_ih</a>(<span class="keyword">struct</span> <a class="code" href="structitem__head.html">item_head</a> *ih)</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;{</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="reiserfs_8h.html#aa7ea2155c7cfd12c8b2426363e75552c">is_direct_le_key</a>(<a class="code" href="reiserfs_8h.html#a714feb957a605f854a00c74b309c73de">ih_version</a>(ih), &amp;ih-&gt;<a class="code" href="structitem__head.html#acfa02c91a5f6b7645cc9c0366eeb0956">ih_key</a>);</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;}</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;</div><div class="line"><a name="l01571"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#af0039763222cd55a130cb04b227f84b9"> 1571</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#af0039763222cd55a130cb04b227f84b9">is_indirect_le_ih</a>(<span class="keyword">struct</span> <a class="code" href="structitem__head.html">item_head</a> *ih)</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;{</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="reiserfs_8h.html#ad500ee6be538ab9e5e4c4782444949a9">is_indirect_le_key</a>(<a class="code" href="reiserfs_8h.html#a714feb957a605f854a00c74b309c73de">ih_version</a>(ih), &amp;ih-&gt;<a class="code" href="structitem__head.html#acfa02c91a5f6b7645cc9c0366eeb0956">ih_key</a>);</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;}</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;</div><div class="line"><a name="l01576"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aa5f0b311a6ed68bfb09d068352c9b24d"> 1576</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#aa5f0b311a6ed68bfb09d068352c9b24d">is_statdata_le_ih</a>(<span class="keyword">struct</span> <a class="code" href="structitem__head.html">item_head</a> *ih)</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;{</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="reiserfs_8h.html#ad8221357dc80c0f8d4f0425625aac410">is_statdata_le_key</a>(<a class="code" href="reiserfs_8h.html#a714feb957a605f854a00c74b309c73de">ih_version</a>(ih), &amp;ih-&gt;<a class="code" href="structitem__head.html#acfa02c91a5f6b7645cc9c0366eeb0956">ih_key</a>);</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;}</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;<span class="comment">/* key is pointer to cpu key, result is cpu */</span></div><div class="line"><a name="l01582"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a7a18eb87edf9b13864eadf32bccd747d"> 1582</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> loff_t <a class="code" href="reiserfs_8h.html#a7a18eb87edf9b13864eadf32bccd747d">cpu_key_k_offset</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structcpu__key.html">cpu_key</a> *<a class="code" href="ctree_8h.html#aa668e7809c8e0ee68dd5049ead875006">key</a>)</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;{</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;    <span class="keywordflow">return</span> key-&gt;<a class="code" href="structcpu__key.html#ad7ca5672de26dc398777b13dd7debd85">on_disk_key</a>.<a class="code" href="structin__core__key.html#aa30f59ae51019f38ecea646d6b0f6b2e">k_offset</a>;</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;}</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;</div><div class="line"><a name="l01587"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a05b20d0d23fc98b593f6c68574395ed1"> 1587</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> loff_t <a class="code" href="reiserfs_8h.html#a05b20d0d23fc98b593f6c68574395ed1">cpu_key_k_type</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structcpu__key.html">cpu_key</a> *<a class="code" href="ctree_8h.html#aa668e7809c8e0ee68dd5049ead875006">key</a>)</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;{</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    <span class="keywordflow">return</span> key-&gt;<a class="code" href="structcpu__key.html#ad7ca5672de26dc398777b13dd7debd85">on_disk_key</a>.<a class="code" href="structin__core__key.html#a0466e6d88adce4e51ce77411109539f4">k_type</a>;</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;}</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;</div><div class="line"><a name="l01592"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a04406a0dab63afd8218dd8694182ce20"> 1592</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a04406a0dab63afd8218dd8694182ce20">set_cpu_key_k_offset</a>(<span class="keyword">struct</span> <a class="code" href="structcpu__key.html">cpu_key</a> *<a class="code" href="ctree_8h.html#aa668e7809c8e0ee68dd5049ead875006">key</a>, loff_t offset)</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;{</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;    key-&gt;<a class="code" href="structcpu__key.html#ad7ca5672de26dc398777b13dd7debd85">on_disk_key</a>.<a class="code" href="structin__core__key.html#aa30f59ae51019f38ecea646d6b0f6b2e">k_offset</a> = <a class="code" href="ctree_8h.html#a3875b4f2ee8a9d27ac3b3b145f934f86">offset</a>;</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;}</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;</div><div class="line"><a name="l01597"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#adcb599ad65666266f8267b9dc735e5b5"> 1597</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#adcb599ad65666266f8267b9dc735e5b5">set_cpu_key_k_type</a>(<span class="keyword">struct</span> <a class="code" href="structcpu__key.html">cpu_key</a> *<a class="code" href="ctree_8h.html#aa668e7809c8e0ee68dd5049ead875006">key</a>, <span class="keywordtype">int</span> type)</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;{</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    key-&gt;<a class="code" href="structcpu__key.html#ad7ca5672de26dc398777b13dd7debd85">on_disk_key</a>.<a class="code" href="structin__core__key.html#a0466e6d88adce4e51ce77411109539f4">k_type</a> = <a class="code" href="cifsacl_8h.html#a1d127017fb298b889f4ba24752d08b8e">type</a>;</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;}</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;</div><div class="line"><a name="l01602"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a43e4f55c1d3f88a6917dfafb09180def"> 1602</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a43e4f55c1d3f88a6917dfafb09180def">cpu_key_k_offset_dec</a>(<span class="keyword">struct</span> <a class="code" href="structcpu__key.html">cpu_key</a> *<a class="code" href="ctree_8h.html#aa668e7809c8e0ee68dd5049ead875006">key</a>)</div><div class="line"><a name="l01603"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a861a9281ad06e959e3b1ab4feb111ea1"> 1603</a></span>&#160;{</div><div class="line"><a name="l01604"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a025d531c9cdc74e2c2fc18629af6b6a5"> 1604</a></span>&#160;    key-&gt;<a class="code" href="structcpu__key.html#ad7ca5672de26dc398777b13dd7debd85">on_disk_key</a>.<a class="code" href="structin__core__key.html#aa30f59ae51019f38ecea646d6b0f6b2e">k_offset</a>--;</div><div class="line"><a name="l01605"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a5983044ad124b365c6febb8f6bf0d4d0"> 1605</a></span>&#160;}</div><div class="line"><a name="l01606"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ae538a68fb7f350de7c708ba877c0766f"> 1606</a></span>&#160;</div><div class="line"><a name="l01607"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ade9f9abc78dbe129537a56155f137593"> 1607</a></span>&#160;<span class="preprocessor">#define is_direntry_cpu_key(key) (cpu_key_k_type (key) == TYPE_DIRENTRY)</span></div><div class="line"><a name="l01608"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aabee5fcf9f9d27b6de11548aa6201a2c"> 1608</a></span>&#160;<span class="preprocessor">#define is_direct_cpu_key(key) (cpu_key_k_type (key) == TYPE_DIRECT)</span></div><div class="line"><a name="l01609"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a2e1fdb7643592820ca0f6b4abb77eed2"> 1609</a></span>&#160;<span class="preprocessor">#define is_indirect_cpu_key(key) (cpu_key_k_type (key) == TYPE_INDIRECT)</span></div><div class="line"><a name="l01610"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ac913790d3e03162209cae6eea2db8cf3"> 1610</a></span>&#160;<span class="preprocessor">#define is_statdata_cpu_key(key) (cpu_key_k_type (key) == TYPE_STAT_DATA)</span></div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;</div><div class="line"><a name="l01612"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a9fa4cc7371656d21e256c769e6672763"> 1612</a></span>&#160;<span class="comment">/* are these used ? */</span></div><div class="line"><a name="l01613"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aa657b01860777b629df3693b162227ff"> 1613</a></span>&#160;<span class="preprocessor">#define is_direntry_cpu_ih(ih) (is_direntry_cpu_key (&amp;((ih)-&gt;ih_key)))</span></div><div class="line"><a name="l01614"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a9f201f2b13c619ffa88c21e9300b57e3"> 1614</a></span>&#160;<span class="preprocessor">#define is_direct_cpu_ih(ih) (is_direct_cpu_key (&amp;((ih)-&gt;ih_key)))</span></div><div class="line"><a name="l01615"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a05beec1d1627783166a62cf33ca03572"> 1615</a></span>&#160;<span class="preprocessor">#define is_indirect_cpu_ih(ih) (is_indirect_cpu_key (&amp;((ih)-&gt;ih_key)))</span></div><div class="line"><a name="l01616"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ab6a8e2c7a758bcecec7c090cecd706d5"> 1616</a></span>&#160;<span class="preprocessor">#define is_statdata_cpu_ih(ih) (is_statdata_cpu_key (&amp;((ih)-&gt;ih_key)))</span></div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;</div><div class="line"><a name="l01618"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a89b46ae4d8f89719d62e1a7100230c21"> 1618</a></span>&#160;<span class="preprocessor">#define I_K_KEY_IN_ITEM(ih, key, n_blocksize) \</span></div><div class="line"><a name="l01619"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#abbab1d2b98c23ff9954230e430b7c95f"> 1619</a></span>&#160;<span class="preprocessor">    (!COMP_SHORT_KEYS(ih, key) &amp;&amp; \</span></div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;<span class="preprocessor">      I_OFF_BYTE_IN_ITEM(ih, k_offset(key), n_blocksize))</span></div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;<span class="comment">/* maximal length of item */</span></div><div class="line"><a name="l01623"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a7c241292d14dfff57e2ea716551683e3"> 1623</a></span>&#160;<span class="preprocessor">#define MAX_ITEM_LEN(block_size) (block_size - BLKH_SIZE - IH_SIZE)</span></div><div class="line"><a name="l01624"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a5232d7def26529411d0759644601800f"> 1624</a></span>&#160;<span class="preprocessor">#define MIN_ITEM_LEN 1</span></div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;<span class="comment">/* object identifier for root dir */</span></div><div class="line"><a name="l01627"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#add313ed6cb576c844a3eff010e66fde5"> 1627</a></span>&#160;<span class="preprocessor">#define REISERFS_ROOT_OBJECTID 2</span></div><div class="line"><a name="l01628"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#adfc76d26b82a555ab7f310d1dc9b85bd"> 1628</a></span>&#160;<span class="preprocessor">#define REISERFS_ROOT_PARENT_OBJECTID 1</span></div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;<span class="keyword">extern</span> <span class="keyword">struct </span><a class="code" href="structreiserfs__key.html">reiserfs_key</a> <a class="code" href="reiserfs_8h.html#a0313399c6e50402c0966324bc961d2f1">root_key</a>;</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;<span class="comment"> * Picture represents a leaf of the S+tree</span></div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;<span class="comment"> *  ______________________________________________________</span></div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;<span class="comment"> * |      |  Array of     |                   |           |</span></div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;<span class="comment"> * |Block |  Object-Item  |      F r e e      |  Objects- |</span></div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;<span class="comment"> * | head |  Headers      |     S p a c e     |   Items   |</span></div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;<span class="comment"> * |______|_______________|___________________|___________|</span></div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;<span class="comment"> * Header of a disk block.  More precisely, header of a formatted leaf</span></div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;<span class="comment"> * or internal node, and not the header of an unformatted node.</span></div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01645"></a><span class="lineno"><a class="line" href="structblock__head.html"> 1645</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structblock__head.html">block_head</a> {</div><div class="line"><a name="l01646"></a><span class="lineno"><a class="line" href="structblock__head.html#a962d0c08395a6e81f5a9028233802f73"> 1646</a></span>&#160;    __le16 <a class="code" href="structblock__head.html#a962d0c08395a6e81f5a9028233802f73">blk_level</a>;   <span class="comment">/* Level of a block in the tree. */</span></div><div class="line"><a name="l01647"></a><span class="lineno"><a class="line" href="structblock__head.html#a5e9433022752ef516c80e66b2b019ce2"> 1647</a></span>&#160;    __le16 <a class="code" href="structblock__head.html#a5e9433022752ef516c80e66b2b019ce2">blk_nr_item</a>; <span class="comment">/* Number of keys/items in a block. */</span></div><div class="line"><a name="l01648"></a><span class="lineno"><a class="line" href="structblock__head.html#a1a49b861d2f44ae3f72f025c31469ad5"> 1648</a></span>&#160;    __le16 <a class="code" href="structblock__head.html#a1a49b861d2f44ae3f72f025c31469ad5">blk_free_space</a>;  <span class="comment">/* Block free space in bytes. */</span></div><div class="line"><a name="l01649"></a><span class="lineno"><a class="line" href="structblock__head.html#ad07c0b0a815f7e0288a5870cdb7d9273"> 1649</a></span>&#160;    __le16 <a class="code" href="structblock__head.html#ad07c0b0a815f7e0288a5870cdb7d9273">blk_reserved</a>;</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    <span class="comment">/* dump this in v4/planA */</span></div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    <span class="comment">/* kept only for compatibility */</span></div><div class="line"><a name="l01653"></a><span class="lineno"><a class="line" href="structblock__head.html#a2a5a600dd766e865eb33e367b7bb5c99"> 1653</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structreiserfs__key.html">reiserfs_key</a> blk_right_delim_key;</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;};</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;</div><div class="line"><a name="l01656"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aa06c9bc7da4c45b76bcd20d48ac182f4"> 1656</a></span>&#160;<span class="preprocessor">#define BLKH_SIZE                     (sizeof(struct block_head))</span></div><div class="line"><a name="l01657"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ae9f9744f3f7b3c361e09ec5c780fe71f"> 1657</a></span>&#160;<span class="preprocessor">#define blkh_level(p_blkh)            (le16_to_cpu((p_blkh)-&gt;blk_level))</span></div><div class="line"><a name="l01658"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aa48051a1ac55ceebd68cfd8eda42a33e"> 1658</a></span>&#160;<span class="preprocessor">#define blkh_nr_item(p_blkh)          (le16_to_cpu((p_blkh)-&gt;blk_nr_item))</span></div><div class="line"><a name="l01659"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a72538c8239431e0b124c213f2922127f"> 1659</a></span>&#160;<span class="preprocessor">#define blkh_free_space(p_blkh)       (le16_to_cpu((p_blkh)-&gt;blk_free_space))</span></div><div class="line"><a name="l01660"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a79fd1bd5184c6a9258491d9986049cc3"> 1660</a></span>&#160;<span class="preprocessor">#define blkh_reserved(p_blkh)         (le16_to_cpu((p_blkh)-&gt;blk_reserved))</span></div><div class="line"><a name="l01661"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a7dba32847af0f22e71f4013bb878db8a"> 1661</a></span>&#160;<span class="preprocessor">#define set_blkh_level(p_blkh,val)    ((p_blkh)-&gt;blk_level = cpu_to_le16(val))</span></div><div class="line"><a name="l01662"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a0e4588e8597e4bf654b78058b5819fab"> 1662</a></span>&#160;<span class="preprocessor">#define set_blkh_nr_item(p_blkh,val)  ((p_blkh)-&gt;blk_nr_item = cpu_to_le16(val))</span></div><div class="line"><a name="l01663"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a5cf9c1a621e236f5185d94072ad38433"> 1663</a></span>&#160;<span class="preprocessor">#define set_blkh_free_space(p_blkh,val) ((p_blkh)-&gt;blk_free_space = cpu_to_le16(val))</span></div><div class="line"><a name="l01664"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a37c5ccbb0afe37a1eef34024d36b0757"> 1664</a></span>&#160;<span class="preprocessor">#define set_blkh_reserved(p_blkh,val) ((p_blkh)-&gt;blk_reserved = cpu_to_le16(val))</span></div><div class="line"><a name="l01665"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ac02a093b28e9c8757535a898054a2437"> 1665</a></span>&#160;<span class="preprocessor">#define blkh_right_delim_key(p_blkh)  ((p_blkh)-&gt;blk_right_delim_key)</span></div><div class="line"><a name="l01666"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ab1ee3a2d777da0203197fc013cbe5aab"> 1666</a></span>&#160;<span class="preprocessor">#define set_blkh_right_delim_key(p_blkh,val)  ((p_blkh)-&gt;blk_right_delim_key = val)</span></div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;<span class="comment">/* values for blk_level field of the struct block_head */</span></div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;<span class="comment"> * When node gets removed from the tree its blk_level is set to FREE_LEVEL.</span></div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;<span class="comment"> * It is then  used to see whether the node is still in the tree</span></div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01674"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ab99a6916a3e2d769a296cf90211f9971"> 1674</a></span>&#160;<span class="preprocessor">#define FREE_LEVEL 0</span></div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;</div><div class="line"><a name="l01676"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a1bda2941cd36813c2d288d38f1195c15"> 1676</a></span>&#160;<span class="preprocessor">#define DISK_LEAF_NODE_LEVEL  1 </span><span class="comment">/* Leaf node level. */</span><span class="preprocessor"></span></div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;<span class="comment"> * Given the buffer head of a formatted node, resolve to the</span></div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;<span class="comment"> * block head of that node.</span></div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01682"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a0934256c382e55a570494e39af34e71c"> 1682</a></span>&#160;<span class="preprocessor">#define B_BLK_HEAD(bh)          ((struct block_head *)((bh)-&gt;b_data))</span></div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;<span class="comment">/* Number of items that are in buffer. */</span></div><div class="line"><a name="l01684"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a07e8139a8520e0345e9ebc0970d3dbf6"> 1684</a></span>&#160;<span class="preprocessor">#define B_NR_ITEMS(bh)          (blkh_nr_item(B_BLK_HEAD(bh)))</span></div><div class="line"><a name="l01685"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#afbb6b4ea48fba2ea4a055ce64bfccf99"> 1685</a></span>&#160;<span class="preprocessor">#define B_LEVEL(bh)         (blkh_level(B_BLK_HEAD(bh)))</span></div><div class="line"><a name="l01686"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ad8cf9c4a7171bcce05f96728221b2823"> 1686</a></span>&#160;<span class="preprocessor">#define B_FREE_SPACE(bh)        (blkh_free_space(B_BLK_HEAD(bh)))</span></div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;</div><div class="line"><a name="l01688"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ab98814e2a391e1aef300faf0e1976702"> 1688</a></span>&#160;<span class="preprocessor">#define PUT_B_NR_ITEMS(bh, val)     do { set_blkh_nr_item(B_BLK_HEAD(bh), val); } while (0)</span></div><div class="line"><a name="l01689"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aea487090dc1b2babf4c59c3f3f6403c9"> 1689</a></span>&#160;<span class="preprocessor">#define PUT_B_LEVEL(bh, val)        do { set_blkh_level(B_BLK_HEAD(bh), val); } while (0)</span></div><div class="line"><a name="l01690"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a30ca2964a34822d2036e5b0f3c4348db"> 1690</a></span>&#160;<span class="preprocessor">#define PUT_B_FREE_SPACE(bh, val)   do { set_blkh_free_space(B_BLK_HEAD(bh), val); } while (0)</span></div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;<span class="comment">/* Get right delimiting key. -- little endian */</span></div><div class="line"><a name="l01693"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a04a7e9d2f48dada2f5de71a177f0c0d4"> 1693</a></span>&#160;<span class="preprocessor">#define B_PRIGHT_DELIM_KEY(bh)      (&amp;(blk_right_delim_key(B_BLK_HEAD(bh))))</span></div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;<span class="comment">/* Does the buffer contain a disk leaf. */</span></div><div class="line"><a name="l01696"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a1ff2a9be83fdc806ef8a455385cafe96"> 1696</a></span>&#160;<span class="preprocessor">#define B_IS_ITEMS_LEVEL(bh)        (B_LEVEL(bh) == DISK_LEAF_NODE_LEVEL)</span></div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;<span class="comment">/* Does the buffer contain a disk internal node */</span></div><div class="line"><a name="l01699"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a2ddfa0516e206a6dc4a81164d6f8ee16"> 1699</a></span>&#160;<span class="preprocessor">#define B_IS_KEYS_LEVEL(bh)      (B_LEVEL(bh) &gt; DISK_LEAF_NODE_LEVEL \</span></div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;<span class="preprocessor">                        &amp;&amp; B_LEVEL(bh) &lt;= MAX_HEIGHT)</span></div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;<span class="comment">/***************************************************************************</span></div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;<span class="comment"> *                             STAT DATA                                   *</span></div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;<span class="comment"> ***************************************************************************/</span></div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;<span class="comment"> * old stat data is 32 bytes long. We are going to distinguish new one by</span></div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;<span class="comment"> * different size</span></div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l01710"></a><span class="lineno"><a class="line" href="structstat__data__v1.html"> 1710</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structstat__data__v1.html">stat_data_v1</a> {</div><div class="line"><a name="l01711"></a><span class="lineno"><a class="line" href="structstat__data__v1.html#a9fa697274eeeee09b3453f78ecb1894f"> 1711</a></span>&#160;    __le16 <a class="code" href="structstat__data__v1.html#a9fa697274eeeee09b3453f78ecb1894f">sd_mode</a>;     <span class="comment">/* file type, permissions */</span></div><div class="line"><a name="l01712"></a><span class="lineno"><a class="line" href="structstat__data__v1.html#ab902c1f16f4297b56fcabdf1498e5acb"> 1712</a></span>&#160;    __le16 <a class="code" href="structstat__data__v1.html#ab902c1f16f4297b56fcabdf1498e5acb">sd_nlink</a>;    <span class="comment">/* number of hard links */</span></div><div class="line"><a name="l01713"></a><span class="lineno"><a class="line" href="structstat__data__v1.html#a090615f64d42777aa82de70365d3f998"> 1713</a></span>&#160;    __le16 <a class="code" href="structstat__data__v1.html#a090615f64d42777aa82de70365d3f998">sd_uid</a>;      <span class="comment">/* owner */</span></div><div class="line"><a name="l01714"></a><span class="lineno"><a class="line" href="structstat__data__v1.html#a730e52fecb3b470693d2b7fe9ca0dbba"> 1714</a></span>&#160;    __le16 <a class="code" href="structstat__data__v1.html#a730e52fecb3b470693d2b7fe9ca0dbba">sd_gid</a>;      <span class="comment">/* group */</span></div><div class="line"><a name="l01715"></a><span class="lineno"><a class="line" href="structstat__data__v1.html#a5031d71b18d555fe00e6c3fafe7f424f"> 1715</a></span>&#160;    __le32 <a class="code" href="structstat__data__v1.html#a5031d71b18d555fe00e6c3fafe7f424f">sd_size</a>;     <span class="comment">/* file size */</span></div><div class="line"><a name="l01716"></a><span class="lineno"><a class="line" href="structstat__data__v1.html#ae56065e5a88a814e639b4cc2ec8db980"> 1716</a></span>&#160;    __le32 <a class="code" href="structstat__data__v1.html#ae56065e5a88a814e639b4cc2ec8db980">sd_atime</a>;    <span class="comment">/* time of last access */</span></div><div class="line"><a name="l01717"></a><span class="lineno"><a class="line" href="structstat__data__v1.html#a98cb75a272c2299f89462a11082e258a"> 1717</a></span>&#160;    __le32 <a class="code" href="structstat__data__v1.html#a98cb75a272c2299f89462a11082e258a">sd_mtime</a>;    <span class="comment">/* time file was last modified  */</span></div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;<span class="comment">     * time inode (stat data) was last changed</span></div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;<span class="comment">     * (except changes to sd_atime and sd_mtime)</span></div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l01723"></a><span class="lineno"><a class="line" href="structstat__data__v1.html#a3115409b6d51e572e943c063dc8aed40"> 1723</a></span>&#160;    __le32 <a class="code" href="structstat__data__v1.html#a3115409b6d51e572e943c063dc8aed40">sd_ctime</a>;</div><div class="line"><a name="l01724"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a29d94d1fcd4d46c5c8851c7dfb525485"> 1724</a></span>&#160;    <span class="keyword">union </span>{</div><div class="line"><a name="l01725"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a26466d81bb6cb88fda6f546fa0935b65"> 1725</a></span>&#160;        __le32 <a class="code" href="reiserfs_8h.html#a29d94d1fcd4d46c5c8851c7dfb525485">sd_rdev</a>;</div><div class="line"><a name="l01726"></a><span class="lineno"><a class="line" href="structstat__data__v1.html#ad3cb0b64c8ab7bcb584fbaafa8568aef"> 1726</a></span>&#160;        __le32 <a class="code" href="structstat__data__v1.html#ad3cb0b64c8ab7bcb584fbaafa8568aef">sd_blocks</a>;   <span class="comment">/* number of blocks file uses */</span></div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;    } <a class="code" href="reiserfs_8h.html#aa4ff29884bea3444df9bcf07d9ecad9c">__attribute__</a> ((__packed__)) <a class="code" href="protocol_8h.html#ad56754751edde9686250d5005b525abf">u</a>;</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;<span class="comment">     * first byte of file which is stored in a direct item: except that if</span></div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;<span class="comment">     * it equals 1 it is a symlink and if it equals ~(__u32)0 there is no</span></div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;<span class="comment">     * direct item.  The existence of this field really grates on me.</span></div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;<span class="comment">     * Let&#39;s replace it with a macro based on sd_size and our tail</span></div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;<span class="comment">     * suppression policy.  Someday.  -Hans</span></div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l01736"></a><span class="lineno"><a class="line" href="structstat__data__v1.html#a26fbc2b21381b2814fa70d54e4d3b065"> 1736</a></span>&#160;    __le32 <a class="code" href="structstat__data__v1.html#a26fbc2b21381b2814fa70d54e4d3b065">sd_first_direct_byte</a>;</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;} <a class="code" href="reiserfs_8h.html#aa4ff29884bea3444df9bcf07d9ecad9c">__attribute__</a> ((__packed__));</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;</div><div class="line"><a name="l01739"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aed3fc10aa9d05d1cb686ed4660ceff72"> 1739</a></span>&#160;<span class="preprocessor">#define SD_V1_SIZE              (sizeof(struct stat_data_v1))</span></div><div class="line"><a name="l01740"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aae1c9b893bddcad93c17b105ad2dc2d2"> 1740</a></span>&#160;<span class="preprocessor">#define stat_data_v1(ih)        (ih_version (ih) == KEY_FORMAT_3_5)</span></div><div class="line"><a name="l01741"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a352539eca5908ad46d45d53e0b770393"> 1741</a></span>&#160;<span class="preprocessor">#define sd_v1_mode(sdp)         (le16_to_cpu((sdp)-&gt;sd_mode))</span></div><div class="line"><a name="l01742"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#abf614397cecba4286d1e9fb2d57ef0a0"> 1742</a></span>&#160;<span class="preprocessor">#define set_sd_v1_mode(sdp,v)   ((sdp)-&gt;sd_mode = cpu_to_le16(v))</span></div><div class="line"><a name="l01743"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a0869ba8b573666441ba5fb8f3cdd2772"> 1743</a></span>&#160;<span class="preprocessor">#define sd_v1_nlink(sdp)        (le16_to_cpu((sdp)-&gt;sd_nlink))</span></div><div class="line"><a name="l01744"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ac0f4d541b4baec1d4791cd5e403d8f45"> 1744</a></span>&#160;<span class="preprocessor">#define set_sd_v1_nlink(sdp,v)  ((sdp)-&gt;sd_nlink = cpu_to_le16(v))</span></div><div class="line"><a name="l01745"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aa900d59ca6187a575e14f712b7f84ab1"> 1745</a></span>&#160;<span class="preprocessor">#define sd_v1_uid(sdp)          (le16_to_cpu((sdp)-&gt;sd_uid))</span></div><div class="line"><a name="l01746"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a6d032687e4ddfe1a1d6d8d95047c560b"> 1746</a></span>&#160;<span class="preprocessor">#define set_sd_v1_uid(sdp,v)    ((sdp)-&gt;sd_uid = cpu_to_le16(v))</span></div><div class="line"><a name="l01747"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a19caa2df326755c51266d3e35349216a"> 1747</a></span>&#160;<span class="preprocessor">#define sd_v1_gid(sdp)          (le16_to_cpu((sdp)-&gt;sd_gid))</span></div><div class="line"><a name="l01748"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a3019faea71291414785f4b71dac52f8a"> 1748</a></span>&#160;<span class="preprocessor">#define set_sd_v1_gid(sdp,v)    ((sdp)-&gt;sd_gid = cpu_to_le16(v))</span></div><div class="line"><a name="l01749"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a0acbfa513be89483a1a6248997fe614c"> 1749</a></span>&#160;<span class="preprocessor">#define sd_v1_size(sdp)         (le32_to_cpu((sdp)-&gt;sd_size))</span></div><div class="line"><a name="l01750"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a932edadd0a7788bfb8ee531c401401d8"> 1750</a></span>&#160;<span class="preprocessor">#define set_sd_v1_size(sdp,v)   ((sdp)-&gt;sd_size = cpu_to_le32(v))</span></div><div class="line"><a name="l01751"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a54ced108d79a08c633f245b11e702ca3"> 1751</a></span>&#160;<span class="preprocessor">#define sd_v1_atime(sdp)        (le32_to_cpu((sdp)-&gt;sd_atime))</span></div><div class="line"><a name="l01752"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a775b7ab99d5ec239309a76e1e072b8a4"> 1752</a></span>&#160;<span class="preprocessor">#define set_sd_v1_atime(sdp,v)  ((sdp)-&gt;sd_atime = cpu_to_le32(v))</span></div><div class="line"><a name="l01753"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a4422ced7190c10858fa1eebd26a82350"> 1753</a></span>&#160;<span class="preprocessor">#define sd_v1_mtime(sdp)        (le32_to_cpu((sdp)-&gt;sd_mtime))</span></div><div class="line"><a name="l01754"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a5ec2bb5c76adbcfb2c02ba086f47bb38"> 1754</a></span>&#160;<span class="preprocessor">#define set_sd_v1_mtime(sdp,v)  ((sdp)-&gt;sd_mtime = cpu_to_le32(v))</span></div><div class="line"><a name="l01755"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a3d7d19b89c93691bd67b17b7cb7a0194"> 1755</a></span>&#160;<span class="preprocessor">#define sd_v1_ctime(sdp)        (le32_to_cpu((sdp)-&gt;sd_ctime))</span></div><div class="line"><a name="l01756"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a6bf3c7d3a93186ee3b7877f9e0b89206"> 1756</a></span>&#160;<span class="preprocessor">#define set_sd_v1_ctime(sdp,v)  ((sdp)-&gt;sd_ctime = cpu_to_le32(v))</span></div><div class="line"><a name="l01757"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a4575af41db8e62819ebcefe89b31a613"> 1757</a></span>&#160;<span class="preprocessor">#define sd_v1_rdev(sdp)         (le32_to_cpu((sdp)-&gt;u.sd_rdev))</span></div><div class="line"><a name="l01758"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a617e7d4fea6d604b7f13afbae812a3b3"> 1758</a></span>&#160;<span class="preprocessor">#define set_sd_v1_rdev(sdp,v)   ((sdp)-&gt;u.sd_rdev = cpu_to_le32(v))</span></div><div class="line"><a name="l01759"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ad3c9c564f44f9ba00f7c9deba73f6740"> 1759</a></span>&#160;<span class="preprocessor">#define sd_v1_blocks(sdp)       (le32_to_cpu((sdp)-&gt;u.sd_blocks))</span></div><div class="line"><a name="l01760"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a1f01b2fc9d852995a5b61557e0ca4345"> 1760</a></span>&#160;<span class="preprocessor">#define set_sd_v1_blocks(sdp,v) ((sdp)-&gt;u.sd_blocks = cpu_to_le32(v))</span></div><div class="line"><a name="l01761"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a31fdbbde9c3517d8ee2fd84f89495917"> 1761</a></span>&#160;<span class="preprocessor">#define sd_v1_first_direct_byte(sdp) \</span></div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;<span class="preprocessor">                                (le32_to_cpu((sdp)-&gt;sd_first_direct_byte))</span></div><div class="line"><a name="l01763"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a69888b5fcbf0e45b7b61639bca5f87ae"> 1763</a></span>&#160;<span class="preprocessor">#define set_sd_v1_first_direct_byte(sdp,v) \</span></div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;<span class="preprocessor">                                ((sdp)-&gt;sd_first_direct_byte = cpu_to_le32(v))</span></div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;<span class="comment">/* inode flags stored in sd_attrs (nee sd_reserved) */</span></div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;<span class="comment"> * we want common flags to have the same values as in ext2,</span></div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;<span class="comment"> * so chattr(1) will work without problems</span></div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01772"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#af8e21d9286dfede037111bcb3fb7320c"> 1772</a></span>&#160;<span class="preprocessor">#define REISERFS_IMMUTABLE_FL FS_IMMUTABLE_FL</span></div><div class="line"><a name="l01773"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aba500378faeaec674dfe1c1e3f639b3f"> 1773</a></span>&#160;<span class="preprocessor">#define REISERFS_APPEND_FL    FS_APPEND_FL</span></div><div class="line"><a name="l01774"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a5baa64532173a551ee4367a27f27fd4f"> 1774</a></span>&#160;<span class="preprocessor">#define REISERFS_SYNC_FL      FS_SYNC_FL</span></div><div class="line"><a name="l01775"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a05361e84fbe0249781027a0161a345d8"> 1775</a></span>&#160;<span class="preprocessor">#define REISERFS_NOATIME_FL   FS_NOATIME_FL</span></div><div class="line"><a name="l01776"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a9d6c59e4bb12de90c577c603d88659b8"> 1776</a></span>&#160;<span class="preprocessor">#define REISERFS_NODUMP_FL    FS_NODUMP_FL</span></div><div class="line"><a name="l01777"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a805aa6d031fa841f9ab4be4bc659e190"> 1777</a></span>&#160;<span class="preprocessor">#define REISERFS_SECRM_FL     FS_SECRM_FL</span></div><div class="line"><a name="l01778"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a6a1c8a9206f18bf4a982699cdd2280cd"> 1778</a></span>&#160;<span class="preprocessor">#define REISERFS_UNRM_FL      FS_UNRM_FL</span></div><div class="line"><a name="l01779"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aae3098a45ff23881aeae7ed3ea7e2fbb"> 1779</a></span>&#160;<span class="preprocessor">#define REISERFS_COMPR_FL     FS_COMPR_FL</span></div><div class="line"><a name="l01780"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a5b476c93131cefd2518c121a705379fd"> 1780</a></span>&#160;<span class="preprocessor">#define REISERFS_NOTAIL_FL    FS_NOTAIL_FL</span></div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;<span class="comment">/* persistent flags that file inherits from the parent directory */</span></div><div class="line"><a name="l01783"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a4877fe5fd409109135e48e29cf5ebee5"> 1783</a></span>&#160;<span class="preprocessor">#define REISERFS_INHERIT_MASK ( REISERFS_IMMUTABLE_FL | \</span></div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;<span class="preprocessor">                REISERFS_SYNC_FL |  \</span></div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;<span class="preprocessor">                REISERFS_NOATIME_FL |   \</span></div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;<span class="preprocessor">                REISERFS_NODUMP_FL |    \</span></div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;<span class="preprocessor">                REISERFS_SECRM_FL | \</span></div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;<span class="preprocessor">                REISERFS_COMPR_FL | \</span></div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;<span class="preprocessor">                REISERFS_NOTAIL_FL )</span></div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;<span class="comment"> * Stat Data on disk (reiserfs version of UFS disk inode minus the</span></div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;<span class="comment"> * address blocks)</span></div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01795"></a><span class="lineno"><a class="line" href="structstat__data.html"> 1795</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structstat__data.html">stat_data</a> {</div><div class="line"><a name="l01796"></a><span class="lineno"><a class="line" href="structstat__data.html#a7ca4bfd71972940941b1a6cbab3ce881"> 1796</a></span>&#160;    __le16 <a class="code" href="structstat__data.html#a7ca4bfd71972940941b1a6cbab3ce881">sd_mode</a>;     <span class="comment">/* file type, permissions */</span></div><div class="line"><a name="l01797"></a><span class="lineno"><a class="line" href="structstat__data.html#a60db741ee4962f3024121a52f97ab924"> 1797</a></span>&#160;    __le16 <a class="code" href="structstat__data.html#a60db741ee4962f3024121a52f97ab924">sd_attrs</a>;    <span class="comment">/* persistent inode flags */</span></div><div class="line"><a name="l01798"></a><span class="lineno"><a class="line" href="structstat__data.html#aff6c924d2616fd186613897594b66baa"> 1798</a></span>&#160;    __le32 <a class="code" href="structstat__data.html#aff6c924d2616fd186613897594b66baa">sd_nlink</a>;    <span class="comment">/* number of hard links */</span></div><div class="line"><a name="l01799"></a><span class="lineno"><a class="line" href="structstat__data.html#a90e139da65619ebefeb25f4a23fdd20f"> 1799</a></span>&#160;    __le64 <a class="code" href="structstat__data.html#a90e139da65619ebefeb25f4a23fdd20f">sd_size</a>;     <span class="comment">/* file size */</span></div><div class="line"><a name="l01800"></a><span class="lineno"><a class="line" href="structstat__data.html#ab5fbb0c95aa0809329ae3567183de78d"> 1800</a></span>&#160;    __le32 <a class="code" href="structstat__data.html#ab5fbb0c95aa0809329ae3567183de78d">sd_uid</a>;      <span class="comment">/* owner */</span></div><div class="line"><a name="l01801"></a><span class="lineno"><a class="line" href="structstat__data.html#ae99f06e00a09f7895e322236848c2d38"> 1801</a></span>&#160;    __le32 <a class="code" href="structstat__data.html#ae99f06e00a09f7895e322236848c2d38">sd_gid</a>;      <span class="comment">/* group */</span></div><div class="line"><a name="l01802"></a><span class="lineno"><a class="line" href="structstat__data.html#a5a816a78a1873ddcbfda5137c699622b"> 1802</a></span>&#160;    __le32 <a class="code" href="structstat__data.html#a5a816a78a1873ddcbfda5137c699622b">sd_atime</a>;    <span class="comment">/* time of last access */</span></div><div class="line"><a name="l01803"></a><span class="lineno"><a class="line" href="structstat__data.html#aa5c059e561159c4e6afe211cb59987ee"> 1803</a></span>&#160;    __le32 <a class="code" href="structstat__data.html#aa5c059e561159c4e6afe211cb59987ee">sd_mtime</a>;    <span class="comment">/* time file was last modified  */</span></div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;<span class="comment">     * time inode (stat data) was last changed</span></div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;<span class="comment">     * (except changes to sd_atime and sd_mtime)</span></div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l01809"></a><span class="lineno"><a class="line" href="structstat__data.html#a8704b143db1c48b846d620e90aaaa892"> 1809</a></span>&#160;    __le32 <a class="code" href="structstat__data.html#a8704b143db1c48b846d620e90aaaa892">sd_ctime</a>;</div><div class="line"><a name="l01810"></a><span class="lineno"><a class="line" href="structstat__data.html#a96a4f8acadd7904827e5713ea63fdc9c"> 1810</a></span>&#160;    __le32 <a class="code" href="structstat__data.html#a96a4f8acadd7904827e5713ea63fdc9c">sd_blocks</a>;</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    <span class="keyword">union </span>{</div><div class="line"><a name="l01812"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ac35aad2b2eba9a753b9e9b8b28fb393a"> 1812</a></span>&#160;        __le32 <a class="code" href="reiserfs_8h.html#a29d94d1fcd4d46c5c8851c7dfb525485">sd_rdev</a>;</div><div class="line"><a name="l01813"></a><span class="lineno"><a class="line" href="structstat__data.html#a74d013cbaa0ae4220a0968e383a18088"> 1813</a></span>&#160;        __le32 <a class="code" href="structstat__data.html#a74d013cbaa0ae4220a0968e383a18088">sd_generation</a>;</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    } <a class="code" href="reiserfs_8h.html#aa4ff29884bea3444df9bcf07d9ecad9c">__attribute__</a> ((__packed__)) <a class="code" href="protocol_8h.html#ad56754751edde9686250d5005b525abf">u</a>;</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;} <a class="code" href="reiserfs_8h.html#aa4ff29884bea3444df9bcf07d9ecad9c">__attribute__</a> ((__packed__));</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;<span class="comment">/* this is 44 bytes long */</span></div><div class="line"><a name="l01818"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a3ae25a2da168b1a7f60a05d4f76e0cb9"> 1818</a></span>&#160;<span class="preprocessor">#define SD_SIZE (sizeof(struct stat_data))</span></div><div class="line"><a name="l01819"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ab03650474834c6a3da8dcb29e743c40f"> 1819</a></span>&#160;<span class="preprocessor">#define SD_V2_SIZE              SD_SIZE</span></div><div class="line"><a name="l01820"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ae5240e581344ae1c3c7339cddcb8e979"> 1820</a></span>&#160;<span class="preprocessor">#define stat_data_v2(ih)        (ih_version (ih) == KEY_FORMAT_3_6)</span></div><div class="line"><a name="l01821"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#acb00de6efb631e10086614333ad02176"> 1821</a></span>&#160;<span class="preprocessor">#define sd_v2_mode(sdp)         (le16_to_cpu((sdp)-&gt;sd_mode))</span></div><div class="line"><a name="l01822"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a4c0898df48ba5f4faa3305a7ec365532"> 1822</a></span>&#160;<span class="preprocessor">#define set_sd_v2_mode(sdp,v)   ((sdp)-&gt;sd_mode = cpu_to_le16(v))</span></div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;<span class="comment">/* sd_reserved */</span></div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;<span class="comment">/* set_sd_reserved */</span></div><div class="line"><a name="l01825"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a07cd2b8b7628e91d69fe861cc12db074"> 1825</a></span>&#160;<span class="preprocessor">#define sd_v2_nlink(sdp)        (le32_to_cpu((sdp)-&gt;sd_nlink))</span></div><div class="line"><a name="l01826"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a24a4ee3dee80f218cc09d2cc80a97e50"> 1826</a></span>&#160;<span class="preprocessor">#define set_sd_v2_nlink(sdp,v)  ((sdp)-&gt;sd_nlink = cpu_to_le32(v))</span></div><div class="line"><a name="l01827"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a95d36ac0d4ea3773adc097b3e5851b5d"> 1827</a></span>&#160;<span class="preprocessor">#define sd_v2_size(sdp)         (le64_to_cpu((sdp)-&gt;sd_size))</span></div><div class="line"><a name="l01828"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a1660166f7bb7f0c56054d20d3fb458ab"> 1828</a></span>&#160;<span class="preprocessor">#define set_sd_v2_size(sdp,v)   ((sdp)-&gt;sd_size = cpu_to_le64(v))</span></div><div class="line"><a name="l01829"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a6b22b47f55509120a32575e77c49bdac"> 1829</a></span>&#160;<span class="preprocessor">#define sd_v2_uid(sdp)          (le32_to_cpu((sdp)-&gt;sd_uid))</span></div><div class="line"><a name="l01830"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a7248f3d79d9da36c674a11621979542b"> 1830</a></span>&#160;<span class="preprocessor">#define set_sd_v2_uid(sdp,v)    ((sdp)-&gt;sd_uid = cpu_to_le32(v))</span></div><div class="line"><a name="l01831"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ae782ce60010aa7cb7b5bb0bd15772a7b"> 1831</a></span>&#160;<span class="preprocessor">#define sd_v2_gid(sdp)          (le32_to_cpu((sdp)-&gt;sd_gid))</span></div><div class="line"><a name="l01832"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a9ea8a00f39eae8fc54286620f9454cd5"> 1832</a></span>&#160;<span class="preprocessor">#define set_sd_v2_gid(sdp,v)    ((sdp)-&gt;sd_gid = cpu_to_le32(v))</span></div><div class="line"><a name="l01833"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aee13120ed181675a05c6744f8944546b"> 1833</a></span>&#160;<span class="preprocessor">#define sd_v2_atime(sdp)        (le32_to_cpu((sdp)-&gt;sd_atime))</span></div><div class="line"><a name="l01834"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a7cab0f5e329e538ccfcd3ac6806115c9"> 1834</a></span>&#160;<span class="preprocessor">#define set_sd_v2_atime(sdp,v)  ((sdp)-&gt;sd_atime = cpu_to_le32(v))</span></div><div class="line"><a name="l01835"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ac03fbe27efd93c34bbc8a3c50800ea3d"> 1835</a></span>&#160;<span class="preprocessor">#define sd_v2_mtime(sdp)        (le32_to_cpu((sdp)-&gt;sd_mtime))</span></div><div class="line"><a name="l01836"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aacc256e707239ac5b2ab0b9f8f79222d"> 1836</a></span>&#160;<span class="preprocessor">#define set_sd_v2_mtime(sdp,v)  ((sdp)-&gt;sd_mtime = cpu_to_le32(v))</span></div><div class="line"><a name="l01837"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a0cb99d95d164bad7c04c7f8e695b412f"> 1837</a></span>&#160;<span class="preprocessor">#define sd_v2_ctime(sdp)        (le32_to_cpu((sdp)-&gt;sd_ctime))</span></div><div class="line"><a name="l01838"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#af7af6b5e54c9f8092efb81cb32c5a52b"> 1838</a></span>&#160;<span class="preprocessor">#define set_sd_v2_ctime(sdp,v)  ((sdp)-&gt;sd_ctime = cpu_to_le32(v))</span></div><div class="line"><a name="l01839"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a1ecf3436cf838e445023d6a29be05b04"> 1839</a></span>&#160;<span class="preprocessor">#define sd_v2_blocks(sdp)       (le32_to_cpu((sdp)-&gt;sd_blocks))</span></div><div class="line"><a name="l01840"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ac1a9ff01a50a492b09455c44587cad49"> 1840</a></span>&#160;<span class="preprocessor">#define set_sd_v2_blocks(sdp,v) ((sdp)-&gt;sd_blocks = cpu_to_le32(v))</span></div><div class="line"><a name="l01841"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a9aa02b9b0b9e1a88702108765be235d4"> 1841</a></span>&#160;<span class="preprocessor">#define sd_v2_rdev(sdp)         (le32_to_cpu((sdp)-&gt;u.sd_rdev))</span></div><div class="line"><a name="l01842"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a949ad42dd459f4cf254cd705f41508a3"> 1842</a></span>&#160;<span class="preprocessor">#define set_sd_v2_rdev(sdp,v)   ((sdp)-&gt;u.sd_rdev = cpu_to_le32(v))</span></div><div class="line"><a name="l01843"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a0465ab3afcb3d79e8adc6a23cb03e7f3"> 1843</a></span>&#160;<span class="preprocessor">#define sd_v2_generation(sdp)   (le32_to_cpu((sdp)-&gt;u.sd_generation))</span></div><div class="line"><a name="l01844"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a91362eb37600320366fd3f1509f106f7"> 1844</a></span>&#160;<span class="preprocessor">#define set_sd_v2_generation(sdp,v) ((sdp)-&gt;u.sd_generation = cpu_to_le32(v))</span></div><div class="line"><a name="l01845"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#adbc3c38c1df3a7ba34f4acdd90c90093"> 1845</a></span>&#160;<span class="preprocessor">#define sd_v2_attrs(sdp)         (le16_to_cpu((sdp)-&gt;sd_attrs))</span></div><div class="line"><a name="l01846"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aea41684f3c81294227f75a51febf7f71"> 1846</a></span>&#160;<span class="preprocessor">#define set_sd_v2_attrs(sdp,v)   ((sdp)-&gt;sd_attrs = cpu_to_le16(v))</span></div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;<span class="comment">/***************************************************************************</span></div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;<span class="comment"> *                      DIRECTORY STRUCTURE                                *</span></div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;<span class="comment"> ***************************************************************************/</span></div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;<span class="comment"> * Picture represents the structure of directory items</span></div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;<span class="comment"> * ________________________________________________</span></div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;<span class="comment"> * |  Array of     |   |     |        |       |   |</span></div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;<span class="comment"> * | directory     |N-1| N-2 | ....   |   1st |0th|</span></div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;<span class="comment"> * | entry headers |   |     |        |       |   |</span></div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;<span class="comment"> * |_______________|___|_____|________|_______|___|</span></div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;<span class="comment"> *                  &lt;----   directory entries         ------&gt;</span></div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;<span class="comment"> * First directory item has k_offset component 1. We store &quot;.&quot; and &quot;..&quot;</span></div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;<span class="comment"> * in one item, always, we never split &quot;.&quot; and &quot;..&quot; into differing</span></div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;<span class="comment"> * items.  This makes, among other things, the code for removing</span></div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;<span class="comment"> * directories simpler.</span></div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01865"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a98c06939e0ae72247130a125b55b66e6"> 1865</a></span>&#160;<span class="preprocessor">#define SD_OFFSET  0</span></div><div class="line"><a name="l01866"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a0c5fdf05a990b0ac61bb7d3f6f1647c3"> 1866</a></span>&#160;<span class="preprocessor">#define SD_UNIQUENESS 0</span></div><div class="line"><a name="l01867"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a5143b48baa4639ec380d7a500e611d46"> 1867</a></span>&#160;<span class="preprocessor">#define DOT_OFFSET 1</span></div><div class="line"><a name="l01868"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ad4e5f10cc2011b1b075bd7458c0ca611"> 1868</a></span>&#160;<span class="preprocessor">#define DOT_DOT_OFFSET 2</span></div><div class="line"><a name="l01869"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a4fa5b2856bd4ed6bad93d9ef88688867"> 1869</a></span>&#160;<span class="preprocessor">#define DIRENTRY_UNIQUENESS 500</span></div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;</div><div class="line"><a name="l01871"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a34f17353d99b096fee885518b4790d6e"> 1871</a></span>&#160;<span class="preprocessor">#define FIRST_ITEM_OFFSET 1</span></div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;<span class="comment"> * Q: How to get key of object pointed to by entry from entry?</span></div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;<span class="comment"> * A: Each directory entry has its header. This header has deh_dir_id</span></div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;<span class="comment"> *    and deh_objectid fields, those are key of object, entry points to</span></div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;<span class="comment"> * NOT IMPLEMENTED:</span></div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;<span class="comment"> * Directory will someday contain stat data of object</span></div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;</div><div class="line"><a name="l01885"></a><span class="lineno"><a class="line" href="structreiserfs__de__head.html"> 1885</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structreiserfs__de__head.html">reiserfs_de_head</a> {</div><div class="line"><a name="l01886"></a><span class="lineno"><a class="line" href="structreiserfs__de__head.html#ab6bac79593505f931e7d7a71e9ee344f"> 1886</a></span>&#160;    __le32 <a class="code" href="structreiserfs__de__head.html#ab6bac79593505f931e7d7a71e9ee344f">deh_offset</a>;  <span class="comment">/* third component of the directory entry key */</span></div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;<span class="comment">     * objectid of the parent directory of the object, that is referenced</span></div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;<span class="comment">     * by directory entry</span></div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l01892"></a><span class="lineno"><a class="line" href="structreiserfs__de__head.html#a61d9c99b4f4b75661c55619c5729387b"> 1892</a></span>&#160;    __le32 <a class="code" href="structreiserfs__de__head.html#a61d9c99b4f4b75661c55619c5729387b">deh_dir_id</a>;</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;    <span class="comment">/* objectid of the object, that is referenced by directory entry */</span></div><div class="line"><a name="l01895"></a><span class="lineno"><a class="line" href="structreiserfs__de__head.html#aea49c5f8601d697f53af1b6f64a5c13a"> 1895</a></span>&#160;    __le32 <a class="code" href="structreiserfs__de__head.html#aea49c5f8601d697f53af1b6f64a5c13a">deh_objectid</a>;</div><div class="line"><a name="l01896"></a><span class="lineno"><a class="line" href="structreiserfs__de__head.html#a29c97b148a4116daec8ffc8812fb6392"> 1896</a></span>&#160;    __le16 <a class="code" href="structreiserfs__de__head.html#a29c97b148a4116daec8ffc8812fb6392">deh_location</a>;    <span class="comment">/* offset of name in the whole item */</span></div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;<span class="comment">     * whether 1) entry contains stat data (for future), and</span></div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;<span class="comment">     * 2) whether entry is hidden (unlinked)</span></div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l01902"></a><span class="lineno"><a class="line" href="structreiserfs__de__head.html#a8fc4b9b72db5d51c97419763e0395288"> 1902</a></span>&#160;    __le16 <a class="code" href="structreiserfs__de__head.html#a8fc4b9b72db5d51c97419763e0395288">deh_state</a>;</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;} <a class="code" href="reiserfs_8h.html#aa4ff29884bea3444df9bcf07d9ecad9c">__attribute__</a> ((__packed__));</div><div class="line"><a name="l01904"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aff2683359dfbd52025eaeec7c5cab991"> 1904</a></span>&#160;<span class="preprocessor">#define DEH_SIZE                  sizeof(struct reiserfs_de_head)</span></div><div class="line"><a name="l01905"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a1c342abfe438d00fcc9e13113c7a631b"> 1905</a></span>&#160;<span class="preprocessor">#define deh_offset(p_deh)         (le32_to_cpu((p_deh)-&gt;deh_offset))</span></div><div class="line"><a name="l01906"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#add99d5cd58477002c264f8453129d5b7"> 1906</a></span>&#160;<span class="preprocessor">#define deh_dir_id(p_deh)         (le32_to_cpu((p_deh)-&gt;deh_dir_id))</span></div><div class="line"><a name="l01907"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a7714cf9da0eaca3f19c1daa53437f538"> 1907</a></span>&#160;<span class="preprocessor">#define deh_objectid(p_deh)       (le32_to_cpu((p_deh)-&gt;deh_objectid))</span></div><div class="line"><a name="l01908"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#afa4268e4fd13ac1ce152becac8a58b08"> 1908</a></span>&#160;<span class="preprocessor">#define deh_location(p_deh)       (le16_to_cpu((p_deh)-&gt;deh_location))</span></div><div class="line"><a name="l01909"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ae71ff0e75c4de28e87e81bfa98dad6c6"> 1909</a></span>&#160;<span class="preprocessor">#define deh_state(p_deh)          (le16_to_cpu((p_deh)-&gt;deh_state))</span></div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;</div><div class="line"><a name="l01911"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a689843eb5e1f6b5a45898dee6f77b62c"> 1911</a></span>&#160;<span class="preprocessor">#define put_deh_offset(p_deh,v)   ((p_deh)-&gt;deh_offset = cpu_to_le32((v)))</span></div><div class="line"><a name="l01912"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a46817786467a4b01e57b0acbce4f6af3"> 1912</a></span>&#160;<span class="preprocessor">#define put_deh_dir_id(p_deh,v)   ((p_deh)-&gt;deh_dir_id = cpu_to_le32((v)))</span></div><div class="line"><a name="l01913"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aa60c8537f06458b30aa76069142cb2f3"> 1913</a></span>&#160;<span class="preprocessor">#define put_deh_objectid(p_deh,v) ((p_deh)-&gt;deh_objectid = cpu_to_le32((v)))</span></div><div class="line"><a name="l01914"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a8ae9c4d53eeb2b6717bd00d655813f8c"> 1914</a></span>&#160;<span class="preprocessor">#define put_deh_location(p_deh,v) ((p_deh)-&gt;deh_location = cpu_to_le16((v)))</span></div><div class="line"><a name="l01915"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#afe86233079dbbc122bb4c31a47d144f6"> 1915</a></span>&#160;<span class="preprocessor">#define put_deh_state(p_deh,v)    ((p_deh)-&gt;deh_state = cpu_to_le16((v)))</span></div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;<span class="comment">/* empty directory contains two entries &quot;.&quot; and &quot;..&quot; and their headers */</span></div><div class="line"><a name="l01918"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aa307595d534adeb6eb0c6886c73f709b"> 1918</a></span>&#160;<span class="preprocessor">#define EMPTY_DIR_SIZE \</span></div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;<span class="preprocessor">(DEH_SIZE * 2 + ROUND_UP (sizeof(&quot;.&quot;) - 1) + ROUND_UP (sizeof(&quot;..&quot;) - 1))</span></div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;<span class="comment">/* old format directories have this size when empty */</span></div><div class="line"><a name="l01922"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a38d15ed0ec05e365d539ec89b699f99b"> 1922</a></span>&#160;<span class="preprocessor">#define EMPTY_DIR_SIZE_V1 (DEH_SIZE * 2 + 3)</span></div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;</div><div class="line"><a name="l01924"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a3c7918147f773be0ac665142ccdf2211"> 1924</a></span>&#160;<span class="preprocessor">#define DEH_Statdata 0      </span><span class="comment">/* not used now */</span><span class="preprocessor"></span></div><div class="line"><a name="l01925"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aad593169d38fd5040d11d23062973259"> 1925</a></span>&#160;<span class="preprocessor">#define DEH_Visible 2</span></div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;<span class="comment">/* 64 bit systems (and the S/390) need to be aligned explicitly -jdm */</span></div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;<span class="preprocessor">#if BITS_PER_LONG == 64 || defined(__s390__) || defined(__hppa__)</span></div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;<span class="preprocessor">#   define ADDR_UNALIGNED_BITS  (3)</span></div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;<span class="comment"> * These are only used to manipulate deh_state.</span></div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;<span class="comment"> * Because of this, we&#39;ll use the ext2_ bit routines,</span></div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;<span class="comment"> * since they are little endian</span></div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;<span class="preprocessor">#ifdef ADDR_UNALIGNED_BITS</span></div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;<span class="preprocessor">#   define aligned_address(addr)           ((void *)((long)(addr) &amp; ~((1UL &lt;&lt; ADDR_UNALIGNED_BITS) - 1)))</span></div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;<span class="preprocessor">#   define unaligned_offset(addr)          (((int)((long)(addr) &amp; ((1 &lt;&lt; ADDR_UNALIGNED_BITS) - 1))) &lt;&lt; 3)</span></div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;<span class="preprocessor">#   define set_bit_unaligned(nr, addr)  \</span></div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;<span class="preprocessor">    __test_and_set_bit_le((nr) + unaligned_offset(addr), aligned_address(addr))</span></div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;<span class="preprocessor">#   define clear_bit_unaligned(nr, addr)    \</span></div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;<span class="preprocessor">    __test_and_clear_bit_le((nr) + unaligned_offset(addr), aligned_address(addr))</span></div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;<span class="preprocessor">#   define test_bit_unaligned(nr, addr) \</span></div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;<span class="preprocessor">    test_bit_le((nr) + unaligned_offset(addr), aligned_address(addr))</span></div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;</div><div class="line"><a name="l01951"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a953210c4da6b8a6f70f96bb3af42d4f4"> 1951</a></span>&#160;<span class="preprocessor">#   define set_bit_unaligned(nr, addr)  __test_and_set_bit_le(nr, addr)</span></div><div class="line"><a name="l01952"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a6e0a7e0fd74c5da9f205507bb3135ca6"> 1952</a></span>&#160;<span class="preprocessor">#   define clear_bit_unaligned(nr, addr)    __test_and_clear_bit_le(nr, addr)</span></div><div class="line"><a name="l01953"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#adfcae76dd71743d0083f6744cceff4c9"> 1953</a></span>&#160;<span class="preprocessor">#   define test_bit_unaligned(nr, addr) test_bit_le(nr, addr)</span></div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;</div><div class="line"><a name="l01957"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a3e0467f8d4cc634051e570c616476844"> 1957</a></span>&#160;<span class="preprocessor">#define mark_de_with_sd(deh)        set_bit_unaligned (DEH_Statdata, &amp;((deh)-&gt;deh_state))</span></div><div class="line"><a name="l01958"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a05159a06748af02ad39e10717e88a0b2"> 1958</a></span>&#160;<span class="preprocessor">#define mark_de_without_sd(deh)     clear_bit_unaligned (DEH_Statdata, &amp;((deh)-&gt;deh_state))</span></div><div class="line"><a name="l01959"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a98474bb7e35ef067e6fbf5d4d38f857c"> 1959</a></span>&#160;<span class="preprocessor">#define mark_de_visible(deh)        set_bit_unaligned (DEH_Visible, &amp;((deh)-&gt;deh_state))</span></div><div class="line"><a name="l01960"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ada12628de3ec6587ad3727d0e7b6da91"> 1960</a></span>&#160;<span class="preprocessor">#define mark_de_hidden(deh)     clear_bit_unaligned (DEH_Visible, &amp;((deh)-&gt;deh_state))</span></div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;</div><div class="line"><a name="l01962"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a7c56ab1f432030324b3575bea1f5b6e9"> 1962</a></span>&#160;<span class="preprocessor">#define de_with_sd(deh)         test_bit_unaligned (DEH_Statdata, &amp;((deh)-&gt;deh_state))</span></div><div class="line"><a name="l01963"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a235d96b0ef853dfc707c519542178c4a"> 1963</a></span>&#160;<span class="preprocessor">#define de_visible(deh)             test_bit_unaligned (DEH_Visible, &amp;((deh)-&gt;deh_state))</span></div><div class="line"><a name="l01964"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ac3131f8223cac84c1a8aba4080270418"> 1964</a></span>&#160;<span class="preprocessor">#define de_hidden(deh)              !test_bit_unaligned (DEH_Visible, &amp;((deh)-&gt;deh_state))</span></div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a4a68f7df26b1ccb85d562eb99d4bbb4c">make_empty_dir_item_v1</a>(<span class="keywordtype">char</span> *body, __le32 dirid, __le32 objid,</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;                   __le32 par_dirid, __le32 par_objid);</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a212bdf7584c8485d8e67b88205cb91e3">make_empty_dir_item</a>(<span class="keywordtype">char</span> *body, __le32 dirid, __le32 objid,</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;                __le32 par_dirid, __le32 par_objid);</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;<span class="comment">/* two entries per block (at least) */</span></div><div class="line"><a name="l01972"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a9c913bb58ed7af7b9f4bde3ac16ac90a"> 1972</a></span>&#160;<span class="preprocessor">#define REISERFS_MAX_NAME(block_size) 255</span></div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;<span class="comment"> * this structure is used for operations on directory entries. It is</span></div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;<span class="comment"> * not a disk structure.</span></div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;<span class="comment"> * When reiserfs_find_entry or search_by_entry_key find directory</span></div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;<span class="comment"> * entry, they return filled reiserfs_dir_entry structure</span></div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01981"></a><span class="lineno"><a class="line" href="structreiserfs__dir__entry.html"> 1981</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structreiserfs__dir__entry.html">reiserfs_dir_entry</a> {</div><div class="line"><a name="l01982"></a><span class="lineno"><a class="line" href="structreiserfs__dir__entry.html#ac3cb28e974a71ffe623baa7be0ad912a"> 1982</a></span>&#160;    <span class="keyword">struct </span>buffer_head *<a class="code" href="structreiserfs__dir__entry.html#ac3cb28e974a71ffe623baa7be0ad912a">de_bh</a>;</div><div class="line"><a name="l01983"></a><span class="lineno"><a class="line" href="structreiserfs__dir__entry.html#a492cdbc187daf50f0338e7797941a0f2"> 1983</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__dir__entry.html#a492cdbc187daf50f0338e7797941a0f2">de_item_num</a>;</div><div class="line"><a name="l01984"></a><span class="lineno"><a class="line" href="structreiserfs__dir__entry.html#acd51d1e2e65da99a4a8f0ba108256527"> 1984</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structitem__head.html">item_head</a> *<a class="code" href="structreiserfs__dir__entry.html#acd51d1e2e65da99a4a8f0ba108256527">de_ih</a>;</div><div class="line"><a name="l01985"></a><span class="lineno"><a class="line" href="structreiserfs__dir__entry.html#a8b42a6a2acd45e1223a6f29ad8a85344"> 1985</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__dir__entry.html#a8b42a6a2acd45e1223a6f29ad8a85344">de_entry_num</a>;</div><div class="line"><a name="l01986"></a><span class="lineno"><a class="line" href="structreiserfs__dir__entry.html#a96bc4535e91087e743626ad79b6f656a"> 1986</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structreiserfs__de__head.html">reiserfs_de_head</a> *<a class="code" href="structreiserfs__dir__entry.html#a96bc4535e91087e743626ad79b6f656a">de_deh</a>;</div><div class="line"><a name="l01987"></a><span class="lineno"><a class="line" href="structreiserfs__dir__entry.html#ab492a0cded7be46124b42816a5d29896"> 1987</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__dir__entry.html#ab492a0cded7be46124b42816a5d29896">de_entrylen</a>;</div><div class="line"><a name="l01988"></a><span class="lineno"><a class="line" href="structreiserfs__dir__entry.html#a597bfef6af11143160d780c956d1388e"> 1988</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__dir__entry.html#a597bfef6af11143160d780c956d1388e">de_namelen</a>;</div><div class="line"><a name="l01989"></a><span class="lineno"><a class="line" href="structreiserfs__dir__entry.html#aea5d81abbaf4948e74d74a0b95f4c582"> 1989</a></span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="structreiserfs__dir__entry.html#aea5d81abbaf4948e74d74a0b95f4c582">de_name</a>;</div><div class="line"><a name="l01990"></a><span class="lineno"><a class="line" href="structreiserfs__dir__entry.html#a401e10ccc82a7b4a1e0a5781c2e6f48f"> 1990</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> *<a class="code" href="structreiserfs__dir__entry.html#a401e10ccc82a7b4a1e0a5781c2e6f48f">de_gen_number_bit_string</a>;</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;</div><div class="line"><a name="l01992"></a><span class="lineno"><a class="line" href="structreiserfs__dir__entry.html#a9a35fb05122f067abcf6189c2e95876d"> 1992</a></span>&#160;    __u32 <a class="code" href="structreiserfs__dir__entry.html#a9a35fb05122f067abcf6189c2e95876d">de_dir_id</a>;</div><div class="line"><a name="l01993"></a><span class="lineno"><a class="line" href="structreiserfs__dir__entry.html#a47bfbf176548fcbe232653934187eba7"> 1993</a></span>&#160;    __u32 <a class="code" href="structreiserfs__dir__entry.html#a47bfbf176548fcbe232653934187eba7">de_objectid</a>;</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;</div><div class="line"><a name="l01995"></a><span class="lineno"><a class="line" href="structreiserfs__dir__entry.html#a56d46cae3bb12623849562f882f33e80"> 1995</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structcpu__key.html">cpu_key</a> de_entry_key;</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;};</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;<span class="comment"> * these defines are useful when a particular member of</span></div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;<span class="comment"> * a reiserfs_dir_entry is needed</span></div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;<span class="comment">/* pointer to file name, stored in entry */</span></div><div class="line"><a name="l02004"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a5d5399775fb4c748ebd4c8afc90ba631"> 2004</a></span>&#160;<span class="preprocessor">#define B_I_DEH_ENTRY_FILE_NAME(bh, ih, deh) \</span></div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;<span class="preprocessor">                (ih_item_body(bh, ih) + deh_location(deh))</span></div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;<span class="comment">/* length of name */</span></div><div class="line"><a name="l02008"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ae57e743fa46fddb1d69595b8e0bbf739"> 2008</a></span>&#160;<span class="preprocessor">#define I_DEH_N_ENTRY_FILE_NAME_LENGTH(ih,deh,entry_num) \</span></div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;<span class="preprocessor">(I_DEH_N_ENTRY_LENGTH (ih, deh, entry_num) - (de_with_sd (deh) ? SD_SIZE : 0))</span></div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;<span class="comment">/* hash value occupies bits from 7 up to 30 */</span></div><div class="line"><a name="l02012"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a6d6e25783c5c34c70a86124c6faac2c4"> 2012</a></span>&#160;<span class="preprocessor">#define GET_HASH_VALUE(offset) ((offset) &amp; 0x7fffff80LL)</span></div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;<span class="comment">/* generation number occupies 7 bits starting from 0 up to 6 */</span></div><div class="line"><a name="l02014"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a4af91f2d8c44a92e9b106111ab34822c"> 2014</a></span>&#160;<span class="preprocessor">#define GET_GENERATION_NUMBER(offset) ((offset) &amp; 0x7fLL)</span></div><div class="line"><a name="l02015"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a035798c1abee2d39c4464b27a2e97655"> 2015</a></span>&#160;<span class="preprocessor">#define MAX_GENERATION_NUMBER  127</span></div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;</div><div class="line"><a name="l02017"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ada209d3b959ba083e6e194cab1d98d8d"> 2017</a></span>&#160;<span class="preprocessor">#define SET_GENERATION_NUMBER(offset,gen_number) (GET_HASH_VALUE(offset)|(gen_number))</span></div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;<span class="comment"> * Picture represents an internal node of the reiserfs tree</span></div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;<span class="comment"> *  ______________________________________________________</span></div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;<span class="comment"> * |      |  Array of     |  Array of         |  Free     |</span></div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;<span class="comment"> * |block |    keys       |  pointers         | space     |</span></div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;<span class="comment"> * | head |      N        |      N+1          |           |</span></div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;<span class="comment"> * |______|_______________|___________________|___________|</span></div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;<span class="comment">/***************************************************************************</span></div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;<span class="comment"> *                      DISK CHILD                                         *</span></div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;<span class="comment"> ***************************************************************************/</span></div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;<span class="comment"> * Disk child pointer:</span></div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;<span class="comment"> * The pointer from an internal node of the tree to a node that is on disk.</span></div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02035"></a><span class="lineno"><a class="line" href="structdisk__child.html"> 2035</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structdisk__child.html">disk_child</a> {</div><div class="line"><a name="l02036"></a><span class="lineno"><a class="line" href="structdisk__child.html#a52e673bba4c72a8939c53fc760294037"> 2036</a></span>&#160;    __le32 <a class="code" href="structdisk__child.html#a52e673bba4c72a8939c53fc760294037">dc_block_number</a>; <span class="comment">/* Disk child&#39;s block number. */</span></div><div class="line"><a name="l02037"></a><span class="lineno"><a class="line" href="structdisk__child.html#a4d5ae4dcd073e17f07be8918acc46c75"> 2037</a></span>&#160;    __le16 <a class="code" href="structdisk__child.html#a4d5ae4dcd073e17f07be8918acc46c75">dc_size</a>;     <span class="comment">/* Disk child&#39;s used space.   */</span></div><div class="line"><a name="l02038"></a><span class="lineno"><a class="line" href="structdisk__child.html#a4b6e70efcd9cd2333b49c5d770c17f7a"> 2038</a></span>&#160;    __le16 <a class="code" href="structdisk__child.html#a4b6e70efcd9cd2333b49c5d770c17f7a">dc_reserved</a>;</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;};</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;</div><div class="line"><a name="l02041"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aa5d56ab1ff3b07e08d3e04b48f9059f9"> 2041</a></span>&#160;<span class="preprocessor">#define DC_SIZE (sizeof(struct disk_child))</span></div><div class="line"><a name="l02042"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a85b568be190127b76ab03e3c074b1cb0"> 2042</a></span>&#160;<span class="preprocessor">#define dc_block_number(dc_p)   (le32_to_cpu((dc_p)-&gt;dc_block_number))</span></div><div class="line"><a name="l02043"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aaff7cfd32645b1dbcd20bdcc7a7e8ea6"> 2043</a></span>&#160;<span class="preprocessor">#define dc_size(dc_p)       (le16_to_cpu((dc_p)-&gt;dc_size))</span></div><div class="line"><a name="l02044"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a09a75509ce0e31fa3f25aeac7de2cb79"> 2044</a></span>&#160;<span class="preprocessor">#define put_dc_block_number(dc_p, val)   do { (dc_p)-&gt;dc_block_number = cpu_to_le32(val); } while(0)</span></div><div class="line"><a name="l02045"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#adc6910bc18033ec681dcc6ba5880cbdc"> 2045</a></span>&#160;<span class="preprocessor">#define put_dc_size(dc_p, val)   do { (dc_p)-&gt;dc_size = cpu_to_le16(val); } while(0)</span></div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;<span class="comment">/* Get disk child by buffer header and position in the tree node. */</span></div><div class="line"><a name="l02048"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a12786a8fd52c074463d8a9a5040bfe4a"> 2048</a></span>&#160;<span class="preprocessor">#define B_N_CHILD(bh, n_pos)  ((struct disk_child *)\</span></div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;<span class="preprocessor">((bh)-&gt;b_data + BLKH_SIZE + B_NR_ITEMS(bh) * KEY_SIZE + DC_SIZE * (n_pos)))</span></div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;<span class="comment">/* Get disk child number by buffer header and position in the tree node. */</span></div><div class="line"><a name="l02052"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a2d7d59f92e2e4d2b95a87be100f6cc36"> 2052</a></span>&#160;<span class="preprocessor">#define B_N_CHILD_NUM(bh, n_pos) (dc_block_number(B_N_CHILD(bh, n_pos)))</span></div><div class="line"><a name="l02053"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a4b02bc257b37dce2c7b4cc22236ead54"> 2053</a></span>&#160;<span class="preprocessor">#define PUT_B_N_CHILD_NUM(bh, n_pos, val) \</span></div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;<span class="preprocessor">                (put_dc_block_number(B_N_CHILD(bh, n_pos), val))</span></div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160; <span class="comment">/* maximal value of field child_size in structure disk_child */</span></div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160; <span class="comment">/* child size is the combined size of all items and their headers */</span></div><div class="line"><a name="l02058"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a17488245f0dd4009241eb78564ae6965"> 2058</a></span>&#160;<span class="preprocessor">#define MAX_CHILD_SIZE(bh) ((int)( (bh)-&gt;b_size - BLKH_SIZE ))</span></div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;<span class="comment">/* amount of used space in buffer (not including block head) */</span></div><div class="line"><a name="l02061"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aa98419e0a91d56f805dcc3d45d4e8967"> 2061</a></span>&#160;<span class="preprocessor">#define B_CHILD_SIZE(cur) (MAX_CHILD_SIZE(cur)-(B_FREE_SPACE(cur)))</span></div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;<span class="comment">/* max and min number of keys in internal node */</span></div><div class="line"><a name="l02064"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a8a7eaf8034bb4ab4578ad720ac1475d4"> 2064</a></span>&#160;<span class="preprocessor">#define MAX_NR_KEY(bh) ( (MAX_CHILD_SIZE(bh)-DC_SIZE)/(KEY_SIZE+DC_SIZE) )</span></div><div class="line"><a name="l02065"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ac40099f0c9db063a61c56805adeaac63"> 2065</a></span>&#160;<span class="preprocessor">#define MIN_NR_KEY(bh)    (MAX_NR_KEY(bh)/2)</span></div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;<span class="comment">/***************************************************************************</span></div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;<span class="comment"> *                      PATH STRUCTURES AND DEFINES                        *</span></div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;<span class="comment"> ***************************************************************************/</span></div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;<span class="comment"> * search_by_key fills up the path from the root to the leaf as it descends</span></div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;<span class="comment"> * the tree looking for the key.  It uses reiserfs_bread to try to find</span></div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;<span class="comment"> * buffers in the cache given their block number.  If it does not find</span></div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;<span class="comment"> * them in the cache it reads them from disk.  For each node search_by_key</span></div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;<span class="comment"> * finds using reiserfs_bread it then uses bin_search to look through that</span></div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;<span class="comment"> * node.  bin_search will find the position of the block_number of the next</span></div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;<span class="comment"> * node if it is looking through an internal node.  If it is looking through</span></div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;<span class="comment"> * a leaf node bin_search will find the position of the item which has key</span></div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;<span class="comment"> * either equal to given key, or which is the maximal key less than the</span></div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;<span class="comment"> * given key.</span></div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;</div><div class="line"><a name="l02084"></a><span class="lineno"><a class="line" href="structpath__element.html"> 2084</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structpath__element.html">path_element</a> {</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;    <span class="comment">/* Pointer to the buffer at the path in the tree. */</span></div><div class="line"><a name="l02086"></a><span class="lineno"><a class="line" href="structpath__element.html#a0b7560f6da092d48d3cde117d0ab22b2"> 2086</a></span>&#160;    <span class="keyword">struct </span>buffer_head *<a class="code" href="structpath__element.html#a0b7560f6da092d48d3cde117d0ab22b2">pe_buffer</a>;</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;    <span class="comment">/* Position in the tree node which is placed in the buffer above. */</span></div><div class="line"><a name="l02088"></a><span class="lineno"><a class="line" href="structpath__element.html#a741f303b0dbbdf6b0f3ee3e7c9c131d6"> 2088</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structpath__element.html#a741f303b0dbbdf6b0f3ee3e7c9c131d6">pe_position</a>;</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;};</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;<span class="comment"> * maximal height of a tree. don&#39;t change this without</span></div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;<span class="comment"> * changing JOURNAL_PER_BALANCE_CNT</span></div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02095"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a9059fa76eb5e8e86f870405d63e72c4c"> 2095</a></span>&#160;<span class="preprocessor">#define MAX_HEIGHT 5</span></div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;<span class="comment">/* Must be equals MAX_HEIGHT + FIRST_PATH_ELEMENT_OFFSET */</span></div><div class="line"><a name="l02098"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a555cc6ae291141d1d93c7e5c78d2d0c4"> 2098</a></span>&#160;<span class="preprocessor">#define EXTENDED_MAX_HEIGHT         7</span></div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;<span class="comment">/* Must be equal to at least 2. */</span></div><div class="line"><a name="l02101"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#af637612b6d702bc29889fa19c9e8813a"> 2101</a></span>&#160;<span class="preprocessor">#define FIRST_PATH_ELEMENT_OFFSET   2</span></div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;<span class="comment">/* Must be equal to FIRST_PATH_ELEMENT_OFFSET - 1 */</span></div><div class="line"><a name="l02104"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aed35278b8fcd18521b4de9591a0322b4"> 2104</a></span>&#160;<span class="preprocessor">#define ILLEGAL_PATH_ELEMENT_OFFSET 1</span></div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;<span class="comment">/* this MUST be MAX_HEIGHT + 1. See about FEB below */</span></div><div class="line"><a name="l02107"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a1d14324aa3d6c9511a1250799d88d5d7"> 2107</a></span>&#160;<span class="preprocessor">#define MAX_FEB_SIZE 6</span></div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;<span class="comment"> * We need to keep track of who the ancestors of nodes are.  When we</span></div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;<span class="comment"> * perform a search we record which nodes were visited while</span></div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;<span class="comment"> * descending the tree looking for the node we searched for. This list</span></div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;<span class="comment"> * of nodes is called the path.  This information is used while</span></div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;<span class="comment"> * performing balancing.  Note that this path information may become</span></div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;<span class="comment"> * invalid, and this means we must check it when using it to see if it</span></div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;<span class="comment"> * is still valid. You&#39;ll need to read search_by_key and the comments</span></div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;<span class="comment"> * in it, especially about decrement_counters_in_path(), to understand</span></div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;<span class="comment"> * this structure.</span></div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;<span class="comment"> * Paths make the code so much harder to work with and debug.... An</span></div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;<span class="comment"> * enormous number of bugs are due to them, and trying to write or modify</span></div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;<span class="comment"> * code that uses them just makes my head hurt.  They are based on an</span></div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;<span class="comment"> * excessive effort to avoid disturbing the precious VFS code.:-( The</span></div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;<span class="comment"> * gods only know how we are going to SMP the code that uses them.</span></div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;<span class="comment"> * znodes are the way!</span></div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;</div><div class="line"><a name="l02128"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a2376ba30a6c800dac482a3d26e7917f5"> 2128</a></span>&#160;<span class="preprocessor">#define PATH_READA  0x1 </span><span class="comment">/* do read ahead */</span><span class="preprocessor"></span></div><div class="line"><a name="l02129"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a52ccbb18bffb136c6a90a35d31288379"> 2129</a></span>&#160;<span class="preprocessor">#define PATH_READA_BACK 0x2 </span><span class="comment">/* read backwards */</span><span class="preprocessor"></span></div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;</div><div class="line"><a name="l02131"></a><span class="lineno"><a class="line" href="structtreepath.html"> 2131</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structtreepath.html">treepath</a> {</div><div class="line"><a name="l02132"></a><span class="lineno"><a class="line" href="structtreepath.html#ae068a46b4432cd41a2575ba4ba88a66c"> 2132</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structtreepath.html#ae068a46b4432cd41a2575ba4ba88a66c">path_length</a>;    <span class="comment">/* Length of the array above.   */</span></div><div class="line"><a name="l02133"></a><span class="lineno"><a class="line" href="structtreepath.html#a4629ffff122cc7c97bba374493ea3357"> 2133</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structtreepath.html#a4629ffff122cc7c97bba374493ea3357">reada</a>;</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;    <span class="comment">/* Array of the path elements.  */</span></div><div class="line"><a name="l02135"></a><span class="lineno"><a class="line" href="structtreepath.html#acff6fe013ab0239e2e0a1b93fe03f850"> 2135</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structpath__element.html">path_element</a> path_elements[<a class="code" href="reiserfs_8h.html#a555cc6ae291141d1d93c7e5c78d2d0c4">EXTENDED_MAX_HEIGHT</a>];</div><div class="line"><a name="l02136"></a><span class="lineno"><a class="line" href="structtreepath.html#adb94be694cdafa6bbf9f0f0357faddca"> 2136</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structtreepath.html#adb94be694cdafa6bbf9f0f0357faddca">pos_in_item</a>;</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;};</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;</div><div class="line"><a name="l02139"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a8c9f52a6d75a5a5857a2d1b1a1a0f8bd"> 2139</a></span>&#160;<span class="preprocessor">#define pos_in_item(path) ((path)-&gt;pos_in_item)</span></div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;</div><div class="line"><a name="l02141"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a2544c9046b8e0ec1a85e5ff8d4acdc0d"> 2141</a></span>&#160;<span class="preprocessor">#define INITIALIZE_PATH(var) \</span></div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;<span class="preprocessor">struct treepath var = {.path_length = ILLEGAL_PATH_ELEMENT_OFFSET, .reada = 0,}</span></div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;<span class="comment">/* Get path element by path and path position. */</span></div><div class="line"><a name="l02145"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aabec673268dc172fac41e0905be8d662"> 2145</a></span>&#160;<span class="preprocessor">#define PATH_OFFSET_PELEMENT(path, n_offset)  ((path)-&gt;path_elements + (n_offset))</span></div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;<span class="comment">/* Get buffer header at the path by path and path position. */</span></div><div class="line"><a name="l02148"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ae062c1558a4b4f870cdce092ead849b0"> 2148</a></span>&#160;<span class="preprocessor">#define PATH_OFFSET_PBUFFER(path, n_offset)   (PATH_OFFSET_PELEMENT(path, n_offset)-&gt;pe_buffer)</span></div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;<span class="comment">/* Get position in the element at the path by path and path position. */</span></div><div class="line"><a name="l02151"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ad5aa380b3c6961170fef3df6b61fdbb0"> 2151</a></span>&#160;<span class="preprocessor">#define PATH_OFFSET_POSITION(path, n_offset) (PATH_OFFSET_PELEMENT(path, n_offset)-&gt;pe_position)</span></div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;</div><div class="line"><a name="l02153"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a8601ed16bb23016aebbdc349f2b72bbf"> 2153</a></span>&#160;<span class="preprocessor">#define PATH_PLAST_BUFFER(path) (PATH_OFFSET_PBUFFER((path), (path)-&gt;path_length))</span></div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;<span class="comment"> * you know, to the person who didn&#39;t write this the macro name does not</span></div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;<span class="comment"> * at first suggest what it does.  Maybe POSITION_FROM_PATH_END? Or</span></div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;<span class="comment"> * maybe we should just focus on dumping paths... -Hans</span></div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02160"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a069fd69f5a3f514b4daec09d11d154a7"> 2160</a></span>&#160;<span class="preprocessor">#define PATH_LAST_POSITION(path) (PATH_OFFSET_POSITION((path), (path)-&gt;path_length))</span></div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;<span class="comment"> * in do_balance leaf has h == 0 in contrast with path structure,</span></div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;<span class="comment"> * where root has level == 0. That is why we need these defines</span></div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;<span class="comment">/* tb-&gt;S[h] */</span></div><div class="line"><a name="l02168"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ace9453420e73a37edd61f73ebd8ca076"> 2168</a></span>&#160;<span class="preprocessor">#define PATH_H_PBUFFER(path, h) \</span></div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;<span class="preprocessor">            PATH_OFFSET_PBUFFER(path, path-&gt;path_length - (h))</span></div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;<span class="comment">/* tb-&gt;F[h] or tb-&gt;S[0]-&gt;b_parent */</span></div><div class="line"><a name="l02172"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a06126446be94481d175a1bea7be90b5e"> 2172</a></span>&#160;<span class="preprocessor">#define PATH_H_PPARENT(path, h) PATH_H_PBUFFER(path, (h) + 1)</span></div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;</div><div class="line"><a name="l02174"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a29a20e1d85a04cd57cb8bf400dd07dcd"> 2174</a></span>&#160;<span class="preprocessor">#define PATH_H_POSITION(path, h) \</span></div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;<span class="preprocessor">            PATH_OFFSET_POSITION(path, path-&gt;path_length - (h))</span></div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;<span class="comment">/* tb-&gt;S[h]-&gt;b_item_order */</span></div><div class="line"><a name="l02178"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a6833252d6692bfc72ef89565264d12f9"> 2178</a></span>&#160;<span class="preprocessor">#define PATH_H_B_ITEM_ORDER(path, h) PATH_H_POSITION(path, h + 1)</span></div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;</div><div class="line"><a name="l02180"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a354f675d3f264dde53bb97c085ee3519"> 2180</a></span>&#160;<span class="preprocessor">#define PATH_H_PATH_OFFSET(path, n_h) ((path)-&gt;path_length - (n_h))</span></div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;</div><div class="line"><a name="l02182"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a7a6dac47406663c737862809fcf4d74e"> 2182</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> *<a class="code" href="reiserfs_8h.html#a7a6dac47406663c737862809fcf4d74e">reiserfs_node_data</a>(<span class="keyword">const</span> <span class="keyword">struct</span> buffer_head *bh)</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;{</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;    <span class="keywordflow">return</span> bh-&gt;b_data + <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structblock__head.html">block_head</a>);</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;}</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;<span class="comment">/* get key from internal node */</span></div><div class="line"><a name="l02188"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a217596f2d243c107da5efba998900f0a"> 2188</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">struct </span><a class="code" href="structreiserfs__key.html">reiserfs_key</a> *<a class="code" href="reiserfs_8h.html#a217596f2d243c107da5efba998900f0a">internal_key</a>(<span class="keyword">struct</span> buffer_head *bh,</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;                        <span class="keywordtype">int</span> item_num)</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;{</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;    <span class="keyword">struct </span><a class="code" href="structreiserfs__key.html">reiserfs_key</a> *<a class="code" href="ctree_8h.html#aa668e7809c8e0ee68dd5049ead875006">key</a> = <a class="code" href="reiserfs_8h.html#a7a6dac47406663c737862809fcf4d74e">reiserfs_node_data</a>(bh);</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;    <span class="keywordflow">return</span> &amp;key[item_num];</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;}</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;<span class="comment">/* get the item header from leaf node */</span></div><div class="line"><a name="l02197"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#af605ee607cdcf8f8bc2e661160f1d5d5"> 2197</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">struct </span><a class="code" href="structitem__head.html">item_head</a> *<a class="code" href="reiserfs_8h.html#af605ee607cdcf8f8bc2e661160f1d5d5">item_head</a>(<span class="keyword">const</span> <span class="keyword">struct</span> buffer_head *bh,</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;                      <span class="keywordtype">int</span> item_num)</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;{</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;    <span class="keyword">struct </span><a class="code" href="structitem__head.html">item_head</a> *ih = <a class="code" href="reiserfs_8h.html#a7a6dac47406663c737862809fcf4d74e">reiserfs_node_data</a>(bh);</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;    <span class="keywordflow">return</span> &amp;ih[item_num];</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;}</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;<span class="comment">/* get the key from leaf node */</span></div><div class="line"><a name="l02206"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a2ca7bbf03268b5169d45c11dd78c4ee2"> 2206</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">struct </span><a class="code" href="structreiserfs__key.html">reiserfs_key</a> *<a class="code" href="reiserfs_8h.html#a2ca7bbf03268b5169d45c11dd78c4ee2">leaf_key</a>(<span class="keyword">const</span> <span class="keyword">struct</span> buffer_head *bh,</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;                        <span class="keywordtype">int</span> item_num)</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;{</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="reiserfs_8h.html#af605ee607cdcf8f8bc2e661160f1d5d5">item_head</a>(bh, item_num)-&gt;<a class="code" href="structitem__head.html#acfa02c91a5f6b7645cc9c0366eeb0956">ih_key</a>;</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;}</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;</div><div class="line"><a name="l02212"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a8f5f18c01d13554cd8e3589f3cf48ffe"> 2212</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> *<a class="code" href="reiserfs_8h.html#a8f5f18c01d13554cd8e3589f3cf48ffe">ih_item_body</a>(<span class="keyword">const</span> <span class="keyword">struct</span> buffer_head *bh,</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;                 <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structitem__head.html">item_head</a> *ih)</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;{</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;    <span class="keywordflow">return</span> bh-&gt;b_data + <a class="code" href="reiserfs_8h.html#a139414bd121e02b9c3e64be89e2f3c5b">ih_location</a>(ih);</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;}</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;<span class="comment">/* get item body from leaf node */</span></div><div class="line"><a name="l02219"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ae31c47945bf7fcdeb2d305fe3d6c18c3"> 2219</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> *<a class="code" href="reiserfs_8h.html#ae31c47945bf7fcdeb2d305fe3d6c18c3">item_body</a>(<span class="keyword">const</span> <span class="keyword">struct</span> buffer_head *bh, <span class="keywordtype">int</span> item_num)</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;{</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="reiserfs_8h.html#a8f5f18c01d13554cd8e3589f3cf48ffe">ih_item_body</a>(bh, <a class="code" href="reiserfs_8h.html#af605ee607cdcf8f8bc2e661160f1d5d5">item_head</a>(bh, item_num));</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;}</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;</div><div class="line"><a name="l02224"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a30ddb3ce24367e8fb417d778a1f1113c"> 2224</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">struct </span><a class="code" href="structitem__head.html">item_head</a> *<a class="code" href="reiserfs_8h.html#a30ddb3ce24367e8fb417d778a1f1113c">tp_item_head</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structtreepath.html">treepath</a> *path)</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;{</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="reiserfs_8h.html#af605ee607cdcf8f8bc2e661160f1d5d5">item_head</a>(<a class="code" href="reiserfs_8h.html#a8601ed16bb23016aebbdc349f2b72bbf">PATH_PLAST_BUFFER</a>(path), <a class="code" href="reiserfs_8h.html#a069fd69f5a3f514b4daec09d11d154a7">PATH_LAST_POSITION</a>(path));</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;}</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;</div><div class="line"><a name="l02229"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a3b09748c0965c583099242d6b0b15901"> 2229</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> *<a class="code" href="reiserfs_8h.html#a3b09748c0965c583099242d6b0b15901">tp_item_body</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structtreepath.html">treepath</a> *path)</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;{</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="reiserfs_8h.html#ae31c47945bf7fcdeb2d305fe3d6c18c3">item_body</a>(<a class="code" href="reiserfs_8h.html#a8601ed16bb23016aebbdc349f2b72bbf">PATH_PLAST_BUFFER</a>(path), <a class="code" href="reiserfs_8h.html#a069fd69f5a3f514b4daec09d11d154a7">PATH_LAST_POSITION</a>(path));</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;}</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;</div><div class="line"><a name="l02234"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a306d8cff295a92c06173d6de021b9f1f"> 2234</a></span>&#160;<span class="preprocessor">#define get_last_bh(path) PATH_PLAST_BUFFER(path)</span></div><div class="line"><a name="l02235"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a3bb363467565befdececedbcff5413f1"> 2235</a></span>&#160;<span class="preprocessor">#define get_item_pos(path) PATH_LAST_POSITION(path)</span></div><div class="line"><a name="l02236"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a75f104c909caead792d0fd963d3bb420"> 2236</a></span>&#160;<span class="preprocessor">#define item_moved(ih,path) comp_items(ih, path)</span></div><div class="line"><a name="l02237"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#af3324d6201a864b268447ed6d7198707"> 2237</a></span>&#160;<span class="preprocessor">#define path_changed(ih,path) comp_items (ih, path)</span></div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;<span class="comment">/* array of the entry headers */</span></div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160; <span class="comment">/* get item body */</span></div><div class="line"><a name="l02241"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ad0284bb396d6005ec72c7b62ebaf9eb6"> 2241</a></span>&#160;<span class="preprocessor">#define B_I_DEH(bh, ih) ((struct reiserfs_de_head *)(ih_item_body(bh, ih)))</span></div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;<span class="comment"> * length of the directory entry in directory item. This define</span></div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;<span class="comment"> * calculates length of i-th directory entry using directory entry</span></div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;<span class="comment"> * locations from dir entry head. When it calculates length of 0-th</span></div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;<span class="comment"> * directory entry, it uses length of whole item in place of entry</span></div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;<span class="comment"> * location of the non-existent following entry in the calculation.</span></div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;<span class="comment"> * See picture above.</span></div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02251"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aca3a3f20199a0f9089951f7b77acc83c"> 2251</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#aca3a3f20199a0f9089951f7b77acc83c">entry_length</a>(<span class="keyword">const</span> <span class="keyword">struct</span> buffer_head *bh,</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;                   <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structitem__head.html">item_head</a> *ih, <span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a8c9f52a6d75a5a5857a2d1b1a1a0f8bd">pos_in_item</a>)</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;{</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;    <span class="keyword">struct </span><a class="code" href="structreiserfs__de__head.html">reiserfs_de_head</a> *deh;</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;    deh = <a class="code" href="reiserfs_8h.html#ad0284bb396d6005ec72c7b62ebaf9eb6">B_I_DEH</a>(bh, ih) + <a class="code" href="reiserfs_8h.html#a8c9f52a6d75a5a5857a2d1b1a1a0f8bd">pos_in_item</a>;</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;    <span class="keywordflow">if</span> (pos_in_item)</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="reiserfs_8h.html#afa4268e4fd13ac1ce152becac8a58b08">deh_location</a>(deh - 1) - <a class="code" href="reiserfs_8h.html#afa4268e4fd13ac1ce152becac8a58b08">deh_location</a>(deh);</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="reiserfs_8h.html#a7660367196176fd0271fe6b1838240f0">ih_item_len</a>(ih) - <a class="code" href="reiserfs_8h.html#afa4268e4fd13ac1ce152becac8a58b08">deh_location</a>(deh);</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;}</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;<span class="comment">/***************************************************************************</span></div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;<span class="comment"> *                       MISC                                              *</span></div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;<span class="comment"> ***************************************************************************/</span></div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;<span class="comment">/* Size of pointer to the unformatted node. */</span></div><div class="line"><a name="l02268"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a415f11b9a55364eb02037e8689944d45"> 2268</a></span>&#160;<span class="preprocessor">#define UNFM_P_SIZE (sizeof(unp_t))</span></div><div class="line"><a name="l02269"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aae21c18736b1203934a9ca8eca2c9c4f"> 2269</a></span>&#160;<span class="preprocessor">#define UNFM_P_SHIFT 2</span></div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;<span class="comment">/* in in-core inode key is stored on le form */</span></div><div class="line"><a name="l02272"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aab86c7d39937690bbba53559c7660d49"> 2272</a></span>&#160;<span class="preprocessor">#define INODE_PKEY(inode) ((struct reiserfs_key *)(REISERFS_I(inode)-&gt;i_key))</span></div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;</div><div class="line"><a name="l02274"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a33c24032d370c5093bca0ce4591835e7"> 2274</a></span>&#160;<span class="preprocessor">#define MAX_UL_INT 0xffffffff</span></div><div class="line"><a name="l02275"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aaa1ac5caef84256eaeb39594e58e096f"> 2275</a></span>&#160;<span class="preprocessor">#define MAX_INT    0x7ffffff</span></div><div class="line"><a name="l02276"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a0b1770a2380c45a590ed70bf5e7aae52"> 2276</a></span>&#160;<span class="preprocessor">#define MAX_US_INT 0xffff</span></div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;<span class="comment">// reiserfs version 2 has max offset 60 bits. Version 1 - 32 bit offset</span></div><div class="line"><a name="l02279"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a4b3097e1e9ab6d5821fde62a6b86c57d"> 2279</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> loff_t <a class="code" href="reiserfs_8h.html#a4b3097e1e9ab6d5821fde62a6b86c57d">max_reiserfs_offset</a>(<span class="keyword">struct</span> <a class="code" href="summary_8h.html#a63c41f9614ee9a4e1beb75eabad72f22">inode</a> *<a class="code" href="summary_8h.html#a63c41f9614ee9a4e1beb75eabad72f22">inode</a>)</div><div class="line"><a name="l02280"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ac8bf36fe0577cba66bccda3a6f7e80a4"> 2280</a></span>&#160;{</div><div class="line"><a name="l02281"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a9278b096bf862a17fbfe6c262ffe3e39"> 2281</a></span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="reiserfs_8h.html#a85a76f845efdbea5dce50b19a6862a7e">get_inode_item_key_version</a>(inode) == <a class="code" href="reiserfs_8h.html#a71b67ce5511178998ab99ae6fddfbe30">KEY_FORMAT_3_5</a>)</div><div class="line"><a name="l02282"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ad2689bf3721b0ccd9bb15efe4f5c758c"> 2282</a></span>&#160;        <span class="keywordflow">return</span> (loff_t) U32_MAX;</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;    <span class="keywordflow">return</span> (loff_t) ((~(__u64) 0) &gt;&gt; 4);</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;}</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;</div><div class="line"><a name="l02287"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a12f7568e8e67a48c9296bc71904e2102"> 2287</a></span>&#160;<span class="preprocessor">#define MAX_KEY_OBJECTID    MAX_UL_INT</span></div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;</div><div class="line"><a name="l02289"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a794f73a35ea650ef8558356b68682e19"> 2289</a></span>&#160;<span class="preprocessor">#define MAX_B_NUM  MAX_UL_INT</span></div><div class="line"><a name="l02290"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ad75726feb01ffe111b9017d1eb290e9e"> 2290</a></span>&#160;<span class="preprocessor">#define MAX_FC_NUM MAX_US_INT</span></div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;<span class="comment">/* the purpose is to detect overflow of an unsigned short */</span></div><div class="line"><a name="l02293"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a73945b2a922f42fbfc6f9f1354135ab4"> 2293</a></span>&#160;<span class="preprocessor">#define REISERFS_LINK_MAX (MAX_US_INT - 1000)</span></div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;<span class="comment"> * The following defines are used in reiserfs_insert_item</span></div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;<span class="comment"> * and reiserfs_append_item</span></div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02299"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a474479fd448ba6fe1c3efda281259e0e"> 2299</a></span>&#160;<span class="preprocessor">#define REISERFS_KERNEL_MEM     0   </span><span class="comment">/* kernel memory mode */</span><span class="preprocessor"></span></div><div class="line"><a name="l02300"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aac25245301516ada72df51e4ecd526cc"> 2300</a></span>&#160;<span class="preprocessor">#define REISERFS_USER_MEM       1   </span><span class="comment">/* user memory mode */</span><span class="preprocessor"></span></div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;</div><div class="line"><a name="l02302"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a4413c111253e149563e8b53dceb77fd8"> 2302</a></span>&#160;<span class="preprocessor">#define fs_generation(s) (REISERFS_SB(s)-&gt;s_generation_counter)</span></div><div class="line"><a name="l02303"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a3cb5d7e475c807587fb97e224e8fb129"> 2303</a></span>&#160;<span class="preprocessor">#define get_generation(s) atomic_read (&amp;fs_generation(s))</span></div><div class="line"><a name="l02304"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ad77212595ddb9b17dc1c26b91578db7d"> 2304</a></span>&#160;<span class="preprocessor">#define FILESYSTEM_CHANGED_TB(tb)  (get_generation((tb)-&gt;tb_sb) != (tb)-&gt;fs_gen)</span></div><div class="line"><a name="l02305"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a68a4ae316453e60635f28e5ac987a5ff"> 2305</a></span>&#160;<span class="preprocessor">#define __fs_changed(gen,s) (gen != get_generation (s))</span></div><div class="line"><a name="l02306"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ac824270bc0768c24250cef2d8334c610"> 2306</a></span>&#160;<span class="preprocessor">#define fs_changed(gen,s)       \</span></div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;<span class="preprocessor">({                  \</span></div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;<span class="preprocessor">    reiserfs_cond_resched(s);   \</span></div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;<span class="preprocessor">    __fs_changed(gen, s);       \</span></div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;<span class="preprocessor">})</span></div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;<span class="comment">/***************************************************************************</span></div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;<span class="comment"> *                  FIXATE NODES                                           *</span></div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;<span class="comment"> ***************************************************************************/</span></div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;</div><div class="line"><a name="l02316"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a41ac9d5c293e57fcf2abd4545c2ed0c3"> 2316</a></span>&#160;<span class="preprocessor">#define VI_TYPE_LEFT_MERGEABLE 1</span></div><div class="line"><a name="l02317"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ac105adfbbaa8ea444e47d12b74c6ff58"> 2317</a></span>&#160;<span class="preprocessor">#define VI_TYPE_RIGHT_MERGEABLE 2</span></div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;<span class="comment"> * To make any changes in the tree we always first find node, that</span></div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;<span class="comment"> * contains item to be changed/deleted or place to insert a new</span></div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;<span class="comment"> * item. We call this node S. To do balancing we need to decide what</span></div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;<span class="comment"> * we will shift to left/right neighbor, or to a new node, where new</span></div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;<span class="comment"> * item will be etc. To make this analysis simpler we build virtual</span></div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;<span class="comment"> * node. Virtual node is an array of items, that will replace items of</span></div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;<span class="comment"> * node S. (For instance if we are going to delete an item, virtual</span></div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;<span class="comment"> * node does not contain it). Virtual node keeps information about</span></div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;<span class="comment"> * item sizes and types, mergeability of first and last items, sizes</span></div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;<span class="comment"> * of all entries in directory item. We use this array of items when</span></div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;<span class="comment"> * calculating what we can shift to neighbors and how many nodes we</span></div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;<span class="comment"> * have to have if we do not any shiftings, if we shift to left/right</span></div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;<span class="comment"> * neighbor or to both.</span></div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02334"></a><span class="lineno"><a class="line" href="structvirtual__item.html"> 2334</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structvirtual__item.html">virtual_item</a> {</div><div class="line"><a name="l02335"></a><span class="lineno"><a class="line" href="structvirtual__item.html#a4660ac2f654b830163df7a514a2bfaaa"> 2335</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structvirtual__item.html#a4660ac2f654b830163df7a514a2bfaaa">vi_index</a>;       <span class="comment">/* index in the array of item operations */</span></div><div class="line"><a name="l02336"></a><span class="lineno"><a class="line" href="structvirtual__item.html#af82cba7b591795ba2a9149aaee23d6ca"> 2336</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="structvirtual__item.html#af82cba7b591795ba2a9149aaee23d6ca">vi_type</a>; <span class="comment">/* left/right mergeability */</span></div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;    <span class="comment">/* length of item that it will have after balancing */</span></div><div class="line"><a name="l02339"></a><span class="lineno"><a class="line" href="structvirtual__item.html#a4b0fe1c8932d44a464c0713dfb450ef5"> 2339</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="structvirtual__item.html#a4b0fe1c8932d44a464c0713dfb450ef5">vi_item_len</a>;</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;</div><div class="line"><a name="l02341"></a><span class="lineno"><a class="line" href="structvirtual__item.html#a1cabe29edd0e2a2b7aa8c91cfd0153b1"> 2341</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structitem__head.html">item_head</a> *<a class="code" href="structvirtual__item.html#a1cabe29edd0e2a2b7aa8c91cfd0153b1">vi_ih</a>;</div><div class="line"><a name="l02342"></a><span class="lineno"><a class="line" href="structvirtual__item.html#a9fb0534d5a045d332f81d75c608345b4"> 2342</a></span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structvirtual__item.html#a9fb0534d5a045d332f81d75c608345b4">vi_item</a>;    <span class="comment">/* body of item (old or new) */</span></div><div class="line"><a name="l02343"></a><span class="lineno"><a class="line" href="structvirtual__item.html#a373cb0800cd3fbf605d41272ba312318"> 2343</a></span>&#160;    <span class="keyword">const</span> <span class="keywordtype">void</span> *<a class="code" href="structvirtual__item.html#a373cb0800cd3fbf605d41272ba312318">vi_new_data</a>;    <span class="comment">/* 0 always but paste mode */</span></div><div class="line"><a name="l02344"></a><span class="lineno"><a class="line" href="structvirtual__item.html#a7f43914266473b9e4d622a241ec9b83d"> 2344</a></span>&#160;    <span class="keywordtype">void</span> *<a class="code" href="structvirtual__item.html#a7f43914266473b9e4d622a241ec9b83d">vi_uarea</a>;     <span class="comment">/* item specific area */</span></div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;};</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;</div><div class="line"><a name="l02347"></a><span class="lineno"><a class="line" href="structvirtual__node.html"> 2347</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structvirtual__node.html">virtual_node</a> {</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;    <span class="comment">/* this is a pointer to the free space in the buffer */</span></div><div class="line"><a name="l02349"></a><span class="lineno"><a class="line" href="structvirtual__node.html#ac5016c0fdc974c07b0e03b9b8989b9a6"> 2349</a></span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="structvirtual__node.html#ac5016c0fdc974c07b0e03b9b8989b9a6">vn_free_ptr</a>;</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;</div><div class="line"><a name="l02351"></a><span class="lineno"><a class="line" href="structvirtual__node.html#aaba873b72aaa89ad51b003d7be0d95b7"> 2351</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="structvirtual__node.html#aaba873b72aaa89ad51b003d7be0d95b7">vn_nr_item</a>;  <span class="comment">/* number of items in virtual node */</span></div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;<span class="comment">     * size of node , that node would have if it has</span></div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;<span class="comment">     * unlimited size and no balancing is performed</span></div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l02357"></a><span class="lineno"><a class="line" href="structvirtual__node.html#a7a265c6552d8841ff3f11c46df30eddf"> 2357</a></span>&#160;    <span class="keywordtype">short</span> <a class="code" href="structvirtual__node.html#a7a265c6552d8841ff3f11c46df30eddf">vn_size</a>;</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;    <span class="comment">/* mode of balancing (paste, insert, delete, cut) */</span></div><div class="line"><a name="l02360"></a><span class="lineno"><a class="line" href="structvirtual__node.html#a14622e4ec69d16502d7d0b18f1531c6d"> 2360</a></span>&#160;    <span class="keywordtype">short</span> <a class="code" href="structvirtual__node.html#a14622e4ec69d16502d7d0b18f1531c6d">vn_mode</a>;</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;</div><div class="line"><a name="l02362"></a><span class="lineno"><a class="line" href="structvirtual__node.html#a24afa0271d5f5c5f4842d2280848fd08"> 2362</a></span>&#160;    <span class="keywordtype">short</span> <a class="code" href="structvirtual__node.html#a24afa0271d5f5c5f4842d2280848fd08">vn_affected_item_num</a>;</div><div class="line"><a name="l02363"></a><span class="lineno"><a class="line" href="structvirtual__node.html#afce3b63859a4980feb1871bbceb572f1"> 2363</a></span>&#160;    <span class="keywordtype">short</span> <a class="code" href="structvirtual__node.html#afce3b63859a4980feb1871bbceb572f1">vn_pos_in_item</a>;</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;    <span class="comment">/* item header of inserted item, 0 for other modes */</span></div><div class="line"><a name="l02366"></a><span class="lineno"><a class="line" href="structvirtual__node.html#a02877675233a49f4d212a1f36484aa88"> 2366</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structitem__head.html">item_head</a> *<a class="code" href="structvirtual__node.html#a02877675233a49f4d212a1f36484aa88">vn_ins_ih</a>;</div><div class="line"><a name="l02367"></a><span class="lineno"><a class="line" href="structvirtual__node.html#a2e97e12468eb6c066b8c83e0bfd79bec"> 2367</a></span>&#160;    <span class="keyword">const</span> <span class="keywordtype">void</span> *<a class="code" href="structvirtual__node.html#a2e97e12468eb6c066b8c83e0bfd79bec">vn_data</a>;</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;    <span class="comment">/* array of items (including a new one, excluding item to be deleted) */</span></div><div class="line"><a name="l02370"></a><span class="lineno"><a class="line" href="structvirtual__node.html#a1a24b0db05c384d92345df349af5fa79"> 2370</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structvirtual__item.html">virtual_item</a> *<a class="code" href="structvirtual__node.html#a1a24b0db05c384d92345df349af5fa79">vn_vi</a>;</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;};</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;<span class="comment">/* used by directory items when creating virtual nodes */</span></div><div class="line"><a name="l02374"></a><span class="lineno"><a class="line" href="structdirentry__uarea.html"> 2374</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structdirentry__uarea.html">direntry_uarea</a> {</div><div class="line"><a name="l02375"></a><span class="lineno"><a class="line" href="structdirentry__uarea.html#a9a857bdeca38dca2366ad43a9bac8499"> 2375</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structdirentry__uarea.html#a9a857bdeca38dca2366ad43a9bac8499">flags</a>;</div><div class="line"><a name="l02376"></a><span class="lineno"><a class="line" href="structdirentry__uarea.html#a3bf9aa6e64e8ef4e79bac40c5eac675b"> 2376</a></span>&#160;    __u16 <a class="code" href="structdirentry__uarea.html#a3bf9aa6e64e8ef4e79bac40c5eac675b">entry_count</a>;</div><div class="line"><a name="l02377"></a><span class="lineno"><a class="line" href="structdirentry__uarea.html#aa398cb7acceb82d98abc8dd1333ac8cc"> 2377</a></span>&#160;    __u16 <a class="code" href="reiserfs_8h.html#ad2689bf3721b0ccd9bb15efe4f5c758c">entry_sizes</a>[1];</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;} <a class="code" href="reiserfs_8h.html#aa4ff29884bea3444df9bcf07d9ecad9c">__attribute__</a> ((__packed__));</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;<span class="comment">/***************************************************************************</span></div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;<span class="comment"> *                  TREE BALANCE                                           *</span></div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;<span class="comment"> ***************************************************************************/</span></div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;<span class="comment"> * This temporary structure is used in tree balance algorithms, and</span></div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;<span class="comment"> * constructed as we go to the extent that its various parts are</span></div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;<span class="comment"> * needed.  It contains arrays of nodes that can potentially be</span></div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;<span class="comment"> * involved in the balancing of node S, and parameters that define how</span></div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;<span class="comment"> * each of the nodes must be balanced.  Note that in these algorithms</span></div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;<span class="comment"> * for balancing the worst case is to need to balance the current node</span></div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;<span class="comment"> * S and the left and right neighbors and all of their parents plus</span></div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;<span class="comment"> * create a new node.  We implement S1 balancing for the leaf nodes</span></div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;<span class="comment"> * and S0 balancing for the internal nodes (S1 and S0 are defined in</span></div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;<span class="comment"> * our papers.)</span></div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;<span class="comment">/* size of the array of buffers to free at end of do_balance */</span></div><div class="line"><a name="l02398"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a7adaef6cab9f7e48447d26425a4b8ace"> 2398</a></span>&#160;<span class="preprocessor">#define MAX_FREE_BLOCK 7</span></div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;<span class="comment">/* maximum number of FEB blocknrs on a single level */</span></div><div class="line"><a name="l02401"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a810b2d5c4a0f2b9928271ccc85dfb7f0"> 2401</a></span>&#160;<span class="preprocessor">#define MAX_AMOUNT_NEEDED 2</span></div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;</div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;<span class="comment">/* someday somebody will prefix every field in this struct with tb_ */</span></div><div class="line"><a name="l02404"></a><span class="lineno"><a class="line" href="structtree__balance.html"> 2404</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structtree__balance.html">tree_balance</a> {</div><div class="line"><a name="l02405"></a><span class="lineno"><a class="line" href="structtree__balance.html#a3570d24528b0cb71f0833f6c7decda2d"> 2405</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structtree__balance.html#a3570d24528b0cb71f0833f6c7decda2d">tb_mode</a>;</div><div class="line"><a name="l02406"></a><span class="lineno"><a class="line" href="structtree__balance.html#a3c481edaaf3e8e8edbdfbcb25f5aa163"> 2406</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structtree__balance.html#a3c481edaaf3e8e8edbdfbcb25f5aa163">need_balance_dirty</a>;</div><div class="line"><a name="l02407"></a><span class="lineno"><a class="line" href="structtree__balance.html#a6c0ac6f6328256e28a7a4bb872da4245"> 2407</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structsuper__block.html">super_block</a> *<a class="code" href="structtree__balance.html#a6c0ac6f6328256e28a7a4bb872da4245">tb_sb</a>;</div><div class="line"><a name="l02408"></a><span class="lineno"><a class="line" href="structtree__balance.html#a8eae60641ab72c8786a3ea9c227bdac7"> 2408</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a> *<a class="code" href="structtree__balance.html#a8eae60641ab72c8786a3ea9c227bdac7">transaction_handle</a>;</div><div class="line"><a name="l02409"></a><span class="lineno"><a class="line" href="structtree__balance.html#ae55246757bcccd60505d87d00f99ebf4"> 2409</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structtreepath.html">treepath</a> *<a class="code" href="structtree__balance.html#ae55246757bcccd60505d87d00f99ebf4">tb_path</a>;</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;    <span class="comment">/* array of left neighbors of nodes in the path */</span></div><div class="line"><a name="l02412"></a><span class="lineno"><a class="line" href="structtree__balance.html#a9594ffd53e2e1f3ed8b011b0bc4bddfc"> 2412</a></span>&#160;    <span class="keyword">struct </span>buffer_head *L[<a class="code" href="reiserfs_8h.html#a9059fa76eb5e8e86f870405d63e72c4c">MAX_HEIGHT</a>];</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;    <span class="comment">/* array of right neighbors of nodes in the path */</span></div><div class="line"><a name="l02415"></a><span class="lineno"><a class="line" href="structtree__balance.html#ad3af08616a570dd8dff164db89b6976e"> 2415</a></span>&#160;    <span class="keyword">struct </span>buffer_head *R[<a class="code" href="reiserfs_8h.html#a9059fa76eb5e8e86f870405d63e72c4c">MAX_HEIGHT</a>];</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;    <span class="comment">/* array of fathers of the left neighbors */</span></div><div class="line"><a name="l02418"></a><span class="lineno"><a class="line" href="structtree__balance.html#a9fcbfedc3919998aac208a64b1c2b116"> 2418</a></span>&#160;    <span class="keyword">struct </span>buffer_head *FL[<a class="code" href="reiserfs_8h.html#a9059fa76eb5e8e86f870405d63e72c4c">MAX_HEIGHT</a>];</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;    <span class="comment">/* array of fathers of the right neighbors */</span></div><div class="line"><a name="l02421"></a><span class="lineno"><a class="line" href="structtree__balance.html#a6e0a0a45105bc885e76dd0ec2a08035e"> 2421</a></span>&#160;    <span class="keyword">struct </span>buffer_head *FR[<a class="code" href="reiserfs_8h.html#a9059fa76eb5e8e86f870405d63e72c4c">MAX_HEIGHT</a>];</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;    <span class="comment">/* array of common parents of center node and its left neighbor */</span></div><div class="line"><a name="l02423"></a><span class="lineno"><a class="line" href="structtree__balance.html#a0f416e4b44846569a9f25e1176834d99"> 2423</a></span>&#160;    <span class="keyword">struct </span>buffer_head *CFL[<a class="code" href="reiserfs_8h.html#a9059fa76eb5e8e86f870405d63e72c4c">MAX_HEIGHT</a>];</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;    <span class="comment">/* array of common parents of center node and its right neighbor */</span></div><div class="line"><a name="l02426"></a><span class="lineno"><a class="line" href="structtree__balance.html#a57bcf9c020af24a2fb72024043422a90"> 2426</a></span>&#160;    <span class="keyword">struct </span>buffer_head *CFR[<a class="code" href="reiserfs_8h.html#a9059fa76eb5e8e86f870405d63e72c4c">MAX_HEIGHT</a>];</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;<span class="comment">     * array of empty buffers. Number of buffers in array equals</span></div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;<span class="comment">     * cur_blknum.</span></div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l02432"></a><span class="lineno"><a class="line" href="structtree__balance.html#a289c3a2cfad4a8b4dd1b976a57444019"> 2432</a></span>&#160;    <span class="keyword">struct </span>buffer_head *FEB[<a class="code" href="reiserfs_8h.html#a1d14324aa3d6c9511a1250799d88d5d7">MAX_FEB_SIZE</a>];</div><div class="line"><a name="l02433"></a><span class="lineno"><a class="line" href="structtree__balance.html#a9f33ad7db6041926d64d179efdce2b6c"> 2433</a></span>&#160;    <span class="keyword">struct </span>buffer_head *used[<a class="code" href="reiserfs_8h.html#a1d14324aa3d6c9511a1250799d88d5d7">MAX_FEB_SIZE</a>];</div><div class="line"><a name="l02434"></a><span class="lineno"><a class="line" href="structtree__balance.html#a241f61e8842a07fa4de800938001f655"> 2434</a></span>&#160;    <span class="keyword">struct </span>buffer_head *thrown[<a class="code" href="reiserfs_8h.html#a1d14324aa3d6c9511a1250799d88d5d7">MAX_FEB_SIZE</a>];</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;<span class="comment">     * array of number of items which must be shifted to the left in</span></div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;<span class="comment">     * order to balance the current node; for leaves includes item that</span></div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;<span class="comment">     * will be partially shifted; for internal nodes, it is the number</span></div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;<span class="comment">     * of child pointers rather than items. It includes the new item</span></div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;<span class="comment">     * being created. The code sometimes subtracts one to get the</span></div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;<span class="comment">     * number of wholly shifted items for other purposes.</span></div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l02444"></a><span class="lineno"><a class="line" href="structtree__balance.html#a153abee1fdf8c9eb9e1c95a89b998f63"> 2444</a></span>&#160;    <span class="keywordtype">int</span> lnum[<a class="code" href="reiserfs_8h.html#a9059fa76eb5e8e86f870405d63e72c4c">MAX_HEIGHT</a>];</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;    <span class="comment">/* substitute right for left in comment above */</span></div><div class="line"><a name="l02447"></a><span class="lineno"><a class="line" href="structtree__balance.html#a46f7459bd1b2c16a4d5868e13137b5dd"> 2447</a></span>&#160;    <span class="keywordtype">int</span> rnum[<a class="code" href="reiserfs_8h.html#a9059fa76eb5e8e86f870405d63e72c4c">MAX_HEIGHT</a>];</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;<span class="comment">     * array indexed by height h mapping the key delimiting L[h] and</span></div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;<span class="comment">     * S[h] to its item number within the node CFL[h]</span></div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l02453"></a><span class="lineno"><a class="line" href="structtree__balance.html#a14e0c350237e84153278794e2ee702ad"> 2453</a></span>&#160;    <span class="keywordtype">int</span> lkey[<a class="code" href="reiserfs_8h.html#a9059fa76eb5e8e86f870405d63e72c4c">MAX_HEIGHT</a>];</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;    <span class="comment">/* substitute r for l in comment above */</span></div><div class="line"><a name="l02456"></a><span class="lineno"><a class="line" href="structtree__balance.html#a1114a55397460a98822c0199cd3f43a8"> 2456</a></span>&#160;    <span class="keywordtype">int</span> rkey[<a class="code" href="reiserfs_8h.html#a9059fa76eb5e8e86f870405d63e72c4c">MAX_HEIGHT</a>];</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;<span class="comment">     * the number of bytes by we are trying to add or remove from</span></div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;<span class="comment">     * S[h]. A negative value means removing.</span></div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l02462"></a><span class="lineno"><a class="line" href="structtree__balance.html#af59fdcda7820afb431ffe8edf4d72e15"> 2462</a></span>&#160;    <span class="keywordtype">int</span> insert_size[<a class="code" href="reiserfs_8h.html#a9059fa76eb5e8e86f870405d63e72c4c">MAX_HEIGHT</a>];</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;<span class="comment">     * number of nodes that will replace node S[h] after balancing</span></div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;<span class="comment">     * on the level h of the tree.  If 0 then S is being deleted,</span></div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;<span class="comment">     * if 1 then S is remaining and no new nodes are being created,</span></div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;<span class="comment">     * if 2 or 3 then 1 or 2 new nodes is being created</span></div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l02470"></a><span class="lineno"><a class="line" href="structtree__balance.html#a8baf1f2c610f1f3f8b106a30dc2cdd0d"> 2470</a></span>&#160;    <span class="keywordtype">int</span> blknum[<a class="code" href="reiserfs_8h.html#a9059fa76eb5e8e86f870405d63e72c4c">MAX_HEIGHT</a>];</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;</div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;    <span class="comment">/* fields that are used only for balancing leaves of the tree */</span></div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;    <span class="comment">/* number of empty blocks having been already allocated */</span></div><div class="line"><a name="l02475"></a><span class="lineno"><a class="line" href="structtree__balance.html#a7ef1a5e1112d1b3974d9c09df7f451fc"> 2475</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structtree__balance.html#a7ef1a5e1112d1b3974d9c09df7f451fc">cur_blknum</a>;</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;    <span class="comment">/* number of items that fall into left most node when S[0] splits */</span></div><div class="line"><a name="l02478"></a><span class="lineno"><a class="line" href="structtree__balance.html#a9dd23ead7f60bcac3551db737629a892"> 2478</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structtree__balance.html#a9dd23ead7f60bcac3551db737629a892">s0num</a>;</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;<span class="comment">     * number of bytes which can flow to the left neighbor from the left</span></div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;<span class="comment">     * most liquid item that cannot be shifted from S[0] entirely</span></div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;<span class="comment">     * if -1 then nothing will be partially shifted</span></div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l02485"></a><span class="lineno"><a class="line" href="structtree__balance.html#a95d064ebd99b5a4f42818ff98d25778b"> 2485</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structtree__balance.html#a95d064ebd99b5a4f42818ff98d25778b">lbytes</a>;</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;<span class="comment">     * number of bytes which will flow to the right neighbor from the right</span></div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;<span class="comment">     * most liquid item that cannot be shifted from S[0] entirely</span></div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;<span class="comment">     * if -1 then nothing will be partially shifted</span></div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l02492"></a><span class="lineno"><a class="line" href="structtree__balance.html#a5d727d5d0a5ab5e7669faeb674d0f71a"> 2492</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structtree__balance.html#a5d727d5d0a5ab5e7669faeb674d0f71a">rbytes</a>;</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;</div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;</div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;<span class="comment">     * index into the array of item headers in</span></div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;<span class="comment">     * S[0] of the affected item</span></div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l02499"></a><span class="lineno"><a class="line" href="structtree__balance.html#ae45a9eb9452a1381786920ba3924358f"> 2499</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structtree__balance.html#ae45a9eb9452a1381786920ba3924358f">item_pos</a>;</div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;    <span class="comment">/* new nodes allocated to hold what could not fit into S */</span></div><div class="line"><a name="l02502"></a><span class="lineno"><a class="line" href="structtree__balance.html#af20b925d0f9770de49bd90f4b8062235"> 2502</a></span>&#160;    <span class="keyword">struct </span>buffer_head *S_new[2];</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;<span class="comment">     * number of items that will be placed into nodes in S_new</span></div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;<span class="comment">     * when S[0] splits</span></div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l02508"></a><span class="lineno"><a class="line" href="structtree__balance.html#af42cd590dbac08a7efa34dcb37d7cf4e"> 2508</a></span>&#160;    <span class="keywordtype">int</span> snum[2];</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;<span class="comment">     * number of bytes which flow to nodes in S_new when S[0] splits</span></div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;<span class="comment">     * note: if S[0] splits into 3 nodes, then items do not need to be cut</span></div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l02514"></a><span class="lineno"><a class="line" href="structtree__balance.html#ac8494faaa09c0e2511b8e45aa831a2aa"> 2514</a></span>&#160;    <span class="keywordtype">int</span> sbytes[2];</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;</div><div class="line"><a name="l02516"></a><span class="lineno"><a class="line" href="structtree__balance.html#adc1c156a0bcfe40234a94d5dcb997ed4"> 2516</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structtree__balance.html#adc1c156a0bcfe40234a94d5dcb997ed4">pos_in_item</a>;</div><div class="line"><a name="l02517"></a><span class="lineno"><a class="line" href="structtree__balance.html#a9946364826c7943514195041c43d6168"> 2517</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structtree__balance.html#a9946364826c7943514195041c43d6168">zeroes_num</a>;</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;</div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;<span class="comment">     * buffers which are to be freed after do_balance finishes</span></div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;<span class="comment">     * by unfix_nodes</span></div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l02523"></a><span class="lineno"><a class="line" href="structtree__balance.html#a71571c07618c708245e2f0b6eed1ea59"> 2523</a></span>&#160;    <span class="keyword">struct </span>buffer_head *buf_to_free[<a class="code" href="reiserfs_8h.html#a7adaef6cab9f7e48447d26425a4b8ace">MAX_FREE_BLOCK</a>];</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;<span class="comment">     * kmalloced memory. Used to create virtual node and keep</span></div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;<span class="comment">     * map of dirtied bitmap blocks</span></div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l02529"></a><span class="lineno"><a class="line" href="structtree__balance.html#aade8ecab1fe07e2f5589b6514258cabe"> 2529</a></span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="structtree__balance.html#aade8ecab1fe07e2f5589b6514258cabe">vn_buf</a>;</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;</div><div class="line"><a name="l02531"></a><span class="lineno"><a class="line" href="structtree__balance.html#a628f5576310a644cc3ce45ef81b147fe"> 2531</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structtree__balance.html#a628f5576310a644cc3ce45ef81b147fe">vn_buf_size</a>;    <span class="comment">/* size of the vn_buf */</span></div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;    <span class="comment">/* VN starts after bitmap of bitmap blocks */</span></div><div class="line"><a name="l02534"></a><span class="lineno"><a class="line" href="structtree__balance.html#aa3cbe30ccbcc9422bbc83828ac9f95b3"> 2534</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structvirtual__node.html">virtual_node</a> *<a class="code" href="structtree__balance.html#aa3cbe30ccbcc9422bbc83828ac9f95b3">tb_vn</a>;</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;<span class="comment">     * saved value of `reiserfs_generation&#39; counter see</span></div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;<span class="comment">     * FILESYSTEM_CHANGED() macro in reiserfs_fs.h</span></div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l02540"></a><span class="lineno"><a class="line" href="structtree__balance.html#ab3917b9da600a824de3ffd13beb266a9"> 2540</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structtree__balance.html#ab3917b9da600a824de3ffd13beb266a9">fs_gen</a>;</div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;<span class="preprocessor">#ifdef DISPLACE_NEW_PACKING_LOCALITIES</span></div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;<span class="comment">     * key pointer, to pass to block allocator or</span></div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;<span class="comment">     * another low-level subsystem</span></div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l02547"></a><span class="lineno"><a class="line" href="structtree__balance.html#a3ba6e7e0bbbfde14fe91d4f75409d0ad"> 2547</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structin__core__key.html">in_core_key</a> <a class="code" href="ctree_8h.html#aa668e7809c8e0ee68dd5049ead875006">key</a>;</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;};</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;<span class="comment">/* These are modes of balancing */</span></div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;<span class="comment">/* When inserting an item. */</span></div><div class="line"><a name="l02554"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a6d1ad30378cfc9d85973b31b143f9723"> 2554</a></span>&#160;<span class="preprocessor">#define M_INSERT    &#39;i&#39;</span></div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;<span class="comment"> * When inserting into (directories only) or appending onto an already</span></div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;<span class="comment"> * existent item.</span></div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02559"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#af7e839d8d3cddc04d067922908e0c71c"> 2559</a></span>&#160;<span class="preprocessor">#define M_PASTE     &#39;p&#39;</span></div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;<span class="comment">/* When deleting an item. */</span></div><div class="line"><a name="l02561"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#abe01af175a6e782872b5e7dd1567df24"> 2561</a></span>&#160;<span class="preprocessor">#define M_DELETE    &#39;d&#39;</span></div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;<span class="comment">/* When truncating an item or removing an entry from a (directory) item. */</span></div><div class="line"><a name="l02563"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a8bc27d77247814720cefdcc11d3a40a3"> 2563</a></span>&#160;<span class="preprocessor">#define M_CUT       &#39;c&#39;</span></div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;<span class="comment">/* used when balancing on leaf level skipped (in reiserfsck) */</span></div><div class="line"><a name="l02566"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a1de9a9de0441b41ed026753fb7def3bd"> 2566</a></span>&#160;<span class="preprocessor">#define M_INTERNAL  &#39;n&#39;</span></div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;<span class="comment"> * When further balancing is not needed, then do_balance does not need</span></div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;<span class="comment"> * to be called.</span></div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02572"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a4b7754238dab716a044e1d462d357581"> 2572</a></span>&#160;<span class="preprocessor">#define M_SKIP_BALANCING        &#39;s&#39;</span></div><div class="line"><a name="l02573"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#af6b36d2a64675aa0530b6ace0ae22d22"> 2573</a></span>&#160;<span class="preprocessor">#define M_CONVERT   &#39;v&#39;</span></div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;<span class="comment">/* modes of leaf_move_items */</span></div><div class="line"><a name="l02576"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ad443a140d2774d3e04191a78974f0384"> 2576</a></span>&#160;<span class="preprocessor">#define LEAF_FROM_S_TO_L 0</span></div><div class="line"><a name="l02577"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ad9f7ea3fc043d942d9c595a6b5e902d1"> 2577</a></span>&#160;<span class="preprocessor">#define LEAF_FROM_S_TO_R 1</span></div><div class="line"><a name="l02578"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a20c856b8793bd20ad4ea4964a50cdfb3"> 2578</a></span>&#160;<span class="preprocessor">#define LEAF_FROM_R_TO_L 2</span></div><div class="line"><a name="l02579"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ab9b6a1b21ec5d41b795ae42da261746f"> 2579</a></span>&#160;<span class="preprocessor">#define LEAF_FROM_L_TO_R 3</span></div><div class="line"><a name="l02580"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a54241953897bc77b6d8ac7b7dd5a7191"> 2580</a></span>&#160;<span class="preprocessor">#define LEAF_FROM_S_TO_SNEW 4</span></div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;</div><div class="line"><a name="l02582"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a91aeaad2df10974777248060af17f2ff"> 2582</a></span>&#160;<span class="preprocessor">#define FIRST_TO_LAST 0</span></div><div class="line"><a name="l02583"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a2703cf27ee8e602f775020d6363e262f"> 2583</a></span>&#160;<span class="preprocessor">#define LAST_TO_FIRST 1</span></div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;<span class="comment"> * used in do_balance for passing parent of node information that has</span></div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;<span class="comment"> * been gotten from tb struct</span></div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02589"></a><span class="lineno"><a class="line" href="structbuffer__info.html"> 2589</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structbuffer__info.html">buffer_info</a> {</div><div class="line"><a name="l02590"></a><span class="lineno"><a class="line" href="structbuffer__info.html#ab7adcf61c84c0945f7df382ebcee0bd8"> 2590</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structtree__balance.html">tree_balance</a> *<a class="code" href="structbuffer__info.html#ab7adcf61c84c0945f7df382ebcee0bd8">tb</a>;</div><div class="line"><a name="l02591"></a><span class="lineno"><a class="line" href="structbuffer__info.html#a9c2824f74e9510fa592c8b07f3746ece"> 2591</a></span>&#160;    <span class="keyword">struct </span>buffer_head *<a class="code" href="structbuffer__info.html#a9c2824f74e9510fa592c8b07f3746ece">bi_bh</a>;</div><div class="line"><a name="l02592"></a><span class="lineno"><a class="line" href="structbuffer__info.html#aa064f343deeaec56db8b2c713b00ec1f"> 2592</a></span>&#160;    <span class="keyword">struct </span>buffer_head *<a class="code" href="structbuffer__info.html#aa064f343deeaec56db8b2c713b00ec1f">bi_parent</a>;</div><div class="line"><a name="l02593"></a><span class="lineno"><a class="line" href="structbuffer__info.html#a49e049192e9f74676cd0af1acc5db6c8"> 2593</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structbuffer__info.html#a49e049192e9f74676cd0af1acc5db6c8">bi_position</a>;</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;};</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;</div><div class="line"><a name="l02596"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a2420bda537e8a3790276f63c901ef0c3"> 2596</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">struct </span><a class="code" href="structsuper__block.html">super_block</a> *<a class="code" href="reiserfs_8h.html#a2420bda537e8a3790276f63c901ef0c3">sb_from_tb</a>(<span class="keyword">struct</span> <a class="code" href="structtree__balance.html">tree_balance</a> *tb)</div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;{</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;    <span class="keywordflow">return</span> tb ? tb-&gt;<a class="code" href="structtree__balance.html#a6c0ac6f6328256e28a7a4bb872da4245">tb_sb</a> : NULL;</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;}</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;</div><div class="line"><a name="l02601"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#adc2a2a07fcfa19259b8cb44e250976df"> 2601</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">struct </span><a class="code" href="structsuper__block.html">super_block</a> *<a class="code" href="reiserfs_8h.html#adc2a2a07fcfa19259b8cb44e250976df">sb_from_bi</a>(<span class="keyword">struct</span> <a class="code" href="structbuffer__info.html">buffer_info</a> *bi)</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;{</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;    <span class="keywordflow">return</span> bi ? <a class="code" href="reiserfs_8h.html#a2420bda537e8a3790276f63c901ef0c3">sb_from_tb</a>(bi-&gt;<a class="code" href="structbuffer__info.html#ab7adcf61c84c0945f7df382ebcee0bd8">tb</a>) : NULL;</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;}</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;</div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;<span class="comment"> * there are 4 types of items: stat data, directory item, indirect, direct.</span></div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;<span class="comment"> * +-------------------+------------+--------------+------------+</span></div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;<span class="comment"> * |                   |  k_offset  | k_uniqueness | mergeable? |</span></div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;<span class="comment"> * +-------------------+------------+--------------+------------+</span></div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;<span class="comment"> * |     stat data     |     0      |      0       |   no       |</span></div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;<span class="comment"> * +-------------------+------------+--------------+------------+</span></div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;<span class="comment"> * | 1st directory item| DOT_OFFSET | DIRENTRY_ .. |   no       |</span></div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;<span class="comment"> * | non 1st directory | hash value | UNIQUENESS   |   yes      |</span></div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;<span class="comment"> * |     item          |            |              |            |</span></div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;<span class="comment"> * +-------------------+------------+--------------+------------+</span></div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;<span class="comment"> * | indirect item     | offset + 1 |TYPE_INDIRECT |    [1] |</span></div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;<span class="comment"> * +-------------------+------------+--------------+------------+</span></div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;<span class="comment"> * | direct item       | offset + 1 |TYPE_DIRECT   |    [2]     |</span></div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;<span class="comment"> * +-------------------+------------+--------------+------------+</span></div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;<span class="comment"> * [1] if this is not the first indirect item of the object</span></div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;<span class="comment"> * [2] if this is not the first direct item of the object</span></div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;</div><div class="line"><a name="l02626"></a><span class="lineno"><a class="line" href="structitem__operations.html"> 2626</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structitem__operations.html">item_operations</a> {</div><div class="line"><a name="l02627"></a><span class="lineno"><a class="line" href="structitem__operations.html#a86c6cfe0afa2e36b2dadb5ba8a05ae58"> 2627</a></span>&#160;    int (*bytes_number) (<span class="keyword">struct </span><a class="code" href="structitem__head.html">item_head</a> * ih, <span class="keywordtype">int</span> block_size);</div><div class="line"><a name="l02628"></a><span class="lineno"><a class="line" href="structitem__operations.html#aa23231ef464fdd7f79a982f91e753747"> 2628</a></span>&#160;    void (*<a class="code" href="fix__node_8c.html#acdcac7ab6c27403827be3ba7c023425e">decrement_key</a>) (<span class="keyword">struct </span><a class="code" href="structcpu__key.html">cpu_key</a> *);</div><div class="line"><a name="l02629"></a><span class="lineno"><a class="line" href="structitem__operations.html#ae52b44ee76d39aedd891c2e9f2db3bf7"> 2629</a></span>&#160;    int (*is_left_mergeable) (<span class="keyword">struct </span><a class="code" href="structreiserfs__key.html">reiserfs_key</a> * ih,</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;                  <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> bsize);</div><div class="line"><a name="l02631"></a><span class="lineno"><a class="line" href="structitem__operations.html#aa49a47f11054a26c79f49c76f4316452"> 2631</a></span>&#160;    void (*print_item) (<span class="keyword">struct </span><a class="code" href="structitem__head.html">item_head</a> *, <span class="keywordtype">char</span> *item);</div><div class="line"><a name="l02632"></a><span class="lineno"><a class="line" href="structitem__operations.html#aebe395dfa8d9d28a759669d1eea99555"> 2632</a></span>&#160;    void (*check_item) (<span class="keyword">struct </span><a class="code" href="structitem__head.html">item_head</a> *, <span class="keywordtype">char</span> *item);</div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;</div><div class="line"><a name="l02634"></a><span class="lineno"><a class="line" href="structitem__operations.html#a40eb323755745ff8818c3729f71c955e"> 2634</a></span>&#160;    int (*create_vi) (<span class="keyword">struct </span><a class="code" href="structvirtual__node.html">virtual_node</a> * vn, <span class="keyword">struct </span><a class="code" href="structvirtual__item.html">virtual_item</a> * vi,</div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;              <span class="keywordtype">int</span> is_affected, <span class="keywordtype">int</span> insert_size);</div><div class="line"><a name="l02636"></a><span class="lineno"><a class="line" href="structitem__operations.html#a5c18bef748d9f2ca7846852c35308a33"> 2636</a></span>&#160;    int (*<a class="code" href="fix__node_8c.html#a31e1e78c0c51488df790f4cae64c5df4">check_left</a>) (<span class="keyword">struct </span><a class="code" href="structvirtual__item.html">virtual_item</a> * vi, <span class="keywordtype">int</span> <a class="code" href="cifspdu_8h.html#a29e94a3da97728e39afcbafa40610788">free</a>,</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;               <span class="keywordtype">int</span> start_skip, <span class="keywordtype">int</span> end_skip);</div><div class="line"><a name="l02638"></a><span class="lineno"><a class="line" href="structitem__operations.html#adf7a8ee63c85d532a431a99cc366b76f"> 2638</a></span>&#160;    int (*<a class="code" href="fix__node_8c.html#a4c191477f574b5026f3446ea576de62d">check_right</a>) (<span class="keyword">struct </span><a class="code" href="structvirtual__item.html">virtual_item</a> * vi, <span class="keywordtype">int</span> <a class="code" href="cifspdu_8h.html#a29e94a3da97728e39afcbafa40610788">free</a>);</div><div class="line"><a name="l02639"></a><span class="lineno"><a class="line" href="structitem__operations.html#a7815b6a4ba58a0f8b77cf2ca97802a02"> 2639</a></span>&#160;    int (*part_size) (<span class="keyword">struct </span><a class="code" href="structvirtual__item.html">virtual_item</a> * vi, <span class="keywordtype">int</span> from, <span class="keywordtype">int</span> to);</div><div class="line"><a name="l02640"></a><span class="lineno"><a class="line" href="structitem__operations.html#ace86d65420e88e2cf77cf79ff4665cdc"> 2640</a></span>&#160;    int (*unit_num) (<span class="keyword">struct </span><a class="code" href="structvirtual__item.html">virtual_item</a> * vi);</div><div class="line"><a name="l02641"></a><span class="lineno"><a class="line" href="structitem__operations.html#a24a5bc8a594385cbccd5863c06d2c98e"> 2641</a></span>&#160;    void (*print_vi) (<span class="keyword">struct </span><a class="code" href="structvirtual__item.html">virtual_item</a> * vi);</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;};</div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;<span class="keyword">extern</span> <span class="keyword">struct </span><a class="code" href="structitem__operations.html">item_operations</a> *<a class="code" href="reiserfs_8h.html#a7a27cd57b6894fda1650a419512068d1">item_ops</a>[<a class="code" href="reiserfs_8h.html#a9e261a6d9efb4e748a301450788ec143">TYPE_ANY</a> + 1];</div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;</div><div class="line"><a name="l02646"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ad786fc86f07eeb0ec43832b9b3c2fb10"> 2646</a></span>&#160;<span class="preprocessor">#define op_bytes_number(ih,bsize)                    item_ops[le_ih_k_type (ih)]-&gt;bytes_number (ih, bsize)</span></div><div class="line"><a name="l02647"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a0d810bf52c641adb74af978042812174"> 2647</a></span>&#160;<span class="preprocessor">#define op_is_left_mergeable(key,bsize)              item_ops[le_key_k_type (le_key_version (key), key)]-&gt;is_left_mergeable (key, bsize)</span></div><div class="line"><a name="l02648"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#afa6fbcdbcfe8e83cc1d3e5901d433ded"> 2648</a></span>&#160;<span class="preprocessor">#define op_print_item(ih,item)                       item_ops[le_ih_k_type (ih)]-&gt;print_item (ih, item)</span></div><div class="line"><a name="l02649"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aca0263e17d4da2b3ddac229be8b894ba"> 2649</a></span>&#160;<span class="preprocessor">#define op_check_item(ih,item)                       item_ops[le_ih_k_type (ih)]-&gt;check_item (ih, item)</span></div><div class="line"><a name="l02650"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a59df27ed21b29790fbcc3c56e2872fe6"> 2650</a></span>&#160;<span class="preprocessor">#define op_create_vi(vn,vi,is_affected,insert_size)  item_ops[le_ih_k_type ((vi)-&gt;vi_ih)]-&gt;create_vi (vn,vi,is_affected,insert_size)</span></div><div class="line"><a name="l02651"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a7ad35c6470c4d4ccd8e3bae1d80bf8ad"> 2651</a></span>&#160;<span class="preprocessor">#define op_check_left(vi,free,start_skip,end_skip) item_ops[(vi)-&gt;vi_index]-&gt;check_left (vi, free, start_skip, end_skip)</span></div><div class="line"><a name="l02652"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a6b0e9b7dc89974aac373b2e40713b1d8"> 2652</a></span>&#160;<span class="preprocessor">#define op_check_right(vi,free)                      item_ops[(vi)-&gt;vi_index]-&gt;check_right (vi, free)</span></div><div class="line"><a name="l02653"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ad5779ba910dc970b5c459020c431bcd6"> 2653</a></span>&#160;<span class="preprocessor">#define op_part_size(vi,from,to)                     item_ops[(vi)-&gt;vi_index]-&gt;part_size (vi, from, to)</span></div><div class="line"><a name="l02654"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a71e0f2ae5e76fb254a9a08a6d7608c34"> 2654</a></span>&#160;<span class="preprocessor">#define op_unit_num(vi)                  item_ops[(vi)-&gt;vi_index]-&gt;unit_num (vi)</span></div><div class="line"><a name="l02655"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ac7efcfba40004df89eb570854dc890e0"> 2655</a></span>&#160;<span class="preprocessor">#define op_print_vi(vi)                              item_ops[(vi)-&gt;vi_index]-&gt;print_vi (vi)</span></div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;</div><div class="line"><a name="l02657"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aea7ed6abeb332a6c97ac3985ae23ee4f"> 2657</a></span>&#160;<span class="preprocessor">#define COMP_SHORT_KEYS comp_short_keys</span></div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;</div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;<span class="comment">/* number of blocks pointed to by the indirect item */</span></div><div class="line"><a name="l02660"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a987797a387959077911b2b75cd63367a"> 2660</a></span>&#160;<span class="preprocessor">#define I_UNFM_NUM(ih)  (ih_item_len(ih) / UNFM_P_SIZE)</span></div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;</div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;<span class="comment"> * the used space within the unformatted node corresponding</span></div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;<span class="comment"> * to pos within the item pointed to by ih</span></div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02666"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ab1e26ca8ab156acddef2a2248f08e896"> 2666</a></span>&#160;<span class="preprocessor">#define I_POS_UNFM_SIZE(ih,pos,size) (((pos) == I_UNFM_NUM(ih) - 1 ) ? (size) - ih_free_space(ih) : (size))</span></div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;</div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;<span class="comment"> * number of bytes contained by the direct item or the</span></div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;<span class="comment"> * unformatted nodes the indirect item points to</span></div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;</div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;<span class="comment">/* following defines use reiserfs buffer header and item header */</span></div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;</div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;<span class="comment">/* get stat-data */</span></div><div class="line"><a name="l02676"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a8a8bfce899cbf15a274ebd1950f1c942"> 2676</a></span>&#160;<span class="preprocessor">#define B_I_STAT_DATA(bh, ih) ( (struct stat_data * )((bh)-&gt;b_data + ih_location(ih)) )</span></div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;</div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;<span class="comment">/* this is 3976 for size==4096 */</span></div><div class="line"><a name="l02679"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ab4c42d07e1251edbed6a121cfc5558b7"> 2679</a></span>&#160;<span class="preprocessor">#define MAX_DIRECT_ITEM_LEN(size) ((size) - BLKH_SIZE - 2*IH_SIZE - SD_SIZE - UNFM_P_SIZE)</span></div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;</div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;<span class="comment"> * indirect items consist of entries which contain blocknrs, pos</span></div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;<span class="comment"> * indicates which entry, and B_I_POS_UNFM_POINTER resolves to the</span></div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;<span class="comment"> * blocknr contained by the entry pos points to</span></div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02686"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a4dcfdf1151445e5a0c3e4ef03bbd7634"> 2686</a></span>&#160;<span class="preprocessor">#define B_I_POS_UNFM_POINTER(bh, ih, pos)               \</span></div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;<span class="preprocessor">    le32_to_cpu(*(((unp_t *)ih_item_body(bh, ih)) + (pos)))</span></div><div class="line"><a name="l02688"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#af43826ddf273b50c0543d7cef57a8a05"> 2688</a></span>&#160;<span class="preprocessor">#define PUT_B_I_POS_UNFM_POINTER(bh, ih, pos, val)          \</span></div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;<span class="preprocessor">    (*(((unp_t *)ih_item_body(bh, ih)) + (pos)) = cpu_to_le32(val))</span></div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;</div><div class="line"><a name="l02691"></a><span class="lineno"><a class="line" href="structreiserfs__iget__args.html"> 2691</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structreiserfs__iget__args.html">reiserfs_iget_args</a> {</div><div class="line"><a name="l02692"></a><span class="lineno"><a class="line" href="structreiserfs__iget__args.html#a91abb1ba0bec5784c31c250c844f832a"> 2692</a></span>&#160;    __u32 <a class="code" href="structreiserfs__iget__args.html#a91abb1ba0bec5784c31c250c844f832a">objectid</a>;</div><div class="line"><a name="l02693"></a><span class="lineno"><a class="line" href="structreiserfs__iget__args.html#a86a910f9d2dfb584992bacbb125f4c45"> 2693</a></span>&#160;    __u32 <a class="code" href="structreiserfs__iget__args.html#a86a910f9d2dfb584992bacbb125f4c45">dirid</a>;</div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;};</div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;</div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;<span class="comment">/***************************************************************************</span></div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;<span class="comment"> *                    FUNCTION DECLARATIONS                                *</span></div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;<span class="comment"> ***************************************************************************/</span></div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;</div><div class="line"><a name="l02700"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a7ffa689ac606bb821659810e139d185c"> 2700</a></span>&#160;<span class="preprocessor">#define get_journal_desc_magic(bh) (bh-&gt;b_data + bh-&gt;b_size - 12)</span></div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;</div><div class="line"><a name="l02702"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a7c29017860bbf48a44ea37ec7cfb887f"> 2702</a></span>&#160;<span class="preprocessor">#define journal_trans_half(blocksize) \</span></div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;<span class="preprocessor">    ((blocksize - sizeof (struct reiserfs_journal_desc) + sizeof (__u32) - 12) / sizeof (__u32))</span></div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;</div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;<span class="comment">/* journal.c see journal.c for all the comments here */</span></div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;</div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;<span class="comment">/* first block written in a commit.  */</span></div><div class="line"><a name="l02708"></a><span class="lineno"><a class="line" href="structreiserfs__journal__desc.html"> 2708</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structreiserfs__journal__desc.html">reiserfs_journal_desc</a> {</div><div class="line"><a name="l02709"></a><span class="lineno"><a class="line" href="structreiserfs__journal__desc.html#a7e1eebbbfa028b37431c3c0bc48a0381"> 2709</a></span>&#160;    __le32 <a class="code" href="structreiserfs__journal__desc.html#a7e1eebbbfa028b37431c3c0bc48a0381">j_trans_id</a>;  <span class="comment">/* id of commit */</span></div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;</div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;    <span class="comment">/* length of commit. len +1 is the commit block */</span></div><div class="line"><a name="l02712"></a><span class="lineno"><a class="line" href="structreiserfs__journal__desc.html#ac9879b698a194f500fbb591f7ddde171"> 2712</a></span>&#160;    __le32 <a class="code" href="structreiserfs__journal__desc.html#ac9879b698a194f500fbb591f7ddde171">j_len</a>;</div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;</div><div class="line"><a name="l02714"></a><span class="lineno"><a class="line" href="structreiserfs__journal__desc.html#a0f3b2b9973d07a19a80b0d9546e8358d"> 2714</a></span>&#160;    __le32 <a class="code" href="structreiserfs__journal__desc.html#a0f3b2b9973d07a19a80b0d9546e8358d">j_mount_id</a>;  <span class="comment">/* mount id of this trans */</span></div><div class="line"><a name="l02715"></a><span class="lineno"><a class="line" href="structreiserfs__journal__desc.html#a2731cca9add790812c60c275d335cedc"> 2715</a></span>&#160;    __le32 j_realblock[1];  <span class="comment">/* real locations for each block */</span></div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;};</div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;</div><div class="line"><a name="l02718"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aeab13993871a8445d554757d8e6d54f8"> 2718</a></span>&#160;<span class="preprocessor">#define get_desc_trans_id(d)   le32_to_cpu((d)-&gt;j_trans_id)</span></div><div class="line"><a name="l02719"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a192b4a429cbe38cb60c1676fd87f15e4"> 2719</a></span>&#160;<span class="preprocessor">#define get_desc_trans_len(d)  le32_to_cpu((d)-&gt;j_len)</span></div><div class="line"><a name="l02720"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a2345f7e6f301ec76d082f46403b585c1"> 2720</a></span>&#160;<span class="preprocessor">#define get_desc_mount_id(d)   le32_to_cpu((d)-&gt;j_mount_id)</span></div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;</div><div class="line"><a name="l02722"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a0e03dfc7e6ac6d1a1d0c6dcd9a4a0484"> 2722</a></span>&#160;<span class="preprocessor">#define set_desc_trans_id(d,val)       do { (d)-&gt;j_trans_id = cpu_to_le32 (val); } while (0)</span></div><div class="line"><a name="l02723"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ae2d68eedeb8376e43c77b954091146b4"> 2723</a></span>&#160;<span class="preprocessor">#define set_desc_trans_len(d,val)      do { (d)-&gt;j_len = cpu_to_le32 (val); } while (0)</span></div><div class="line"><a name="l02724"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a624b1cca3cbdd666842baf1c85d0b18b"> 2724</a></span>&#160;<span class="preprocessor">#define set_desc_mount_id(d,val)       do { (d)-&gt;j_mount_id = cpu_to_le32 (val); } while (0)</span></div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;</div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;<span class="comment">/* last block written in a commit */</span></div><div class="line"><a name="l02727"></a><span class="lineno"><a class="line" href="structreiserfs__journal__commit.html"> 2727</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structreiserfs__journal__commit.html">reiserfs_journal_commit</a> {</div><div class="line"><a name="l02728"></a><span class="lineno"><a class="line" href="structreiserfs__journal__commit.html#a2c79444784b535d36a86e3ba0a8b5bde"> 2728</a></span>&#160;    __le32 <a class="code" href="structreiserfs__journal__commit.html#a2c79444784b535d36a86e3ba0a8b5bde">j_trans_id</a>;  <span class="comment">/* must match j_trans_id from the desc block */</span></div><div class="line"><a name="l02729"></a><span class="lineno"><a class="line" href="structreiserfs__journal__commit.html#a4af83b6b04a274d7cd969cdabf7a621a"> 2729</a></span>&#160;    __le32 <a class="code" href="structreiserfs__journal__commit.html#a4af83b6b04a274d7cd969cdabf7a621a">j_len</a>;       <span class="comment">/* ditto */</span></div><div class="line"><a name="l02730"></a><span class="lineno"><a class="line" href="structreiserfs__journal__commit.html#a50a2239efa6b762b00f75f285faf401d"> 2730</a></span>&#160;    __le32 j_realblock[1];  <span class="comment">/* real locations for each block */</span></div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;};</div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;</div><div class="line"><a name="l02733"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a31c28b8858ccf7b930e83e744790488f"> 2733</a></span>&#160;<span class="preprocessor">#define get_commit_trans_id(c) le32_to_cpu((c)-&gt;j_trans_id)</span></div><div class="line"><a name="l02734"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a9e5e78ef52b14cde22201869b6fc12d6"> 2734</a></span>&#160;<span class="preprocessor">#define get_commit_trans_len(c)        le32_to_cpu((c)-&gt;j_len)</span></div><div class="line"><a name="l02735"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a1d328d9cceba7e3a07576b51edc37587"> 2735</a></span>&#160;<span class="preprocessor">#define get_commit_mount_id(c) le32_to_cpu((c)-&gt;j_mount_id)</span></div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;</div><div class="line"><a name="l02737"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#adc7356ffa9bee13bcd149a962d0c6edb"> 2737</a></span>&#160;<span class="preprocessor">#define set_commit_trans_id(c,val)     do { (c)-&gt;j_trans_id = cpu_to_le32 (val); } while (0)</span></div><div class="line"><a name="l02738"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aff5ca62deba6523041c9f08c0aada1fb"> 2738</a></span>&#160;<span class="preprocessor">#define set_commit_trans_len(c,val)    do { (c)-&gt;j_len = cpu_to_le32 (val); } while (0)</span></div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;<span class="comment"> * this header block gets written whenever a transaction is considered</span></div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;<span class="comment"> * fully flushed, and is more recent than the last fully flushed transaction.</span></div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;<span class="comment"> * fully flushed means all the log blocks and all the real blocks are on</span></div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;<span class="comment"> * disk, and this transaction does not need to be replayed.</span></div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02746"></a><span class="lineno"><a class="line" href="structreiserfs__journal__header.html"> 2746</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structreiserfs__journal__header.html">reiserfs_journal_header</a> {</div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;    <span class="comment">/* id of last fully flushed transaction */</span></div><div class="line"><a name="l02748"></a><span class="lineno"><a class="line" href="structreiserfs__journal__header.html#a20c255fbfbc3bedd9f0296e64c935824"> 2748</a></span>&#160;    __le32 <a class="code" href="structreiserfs__journal__header.html#a20c255fbfbc3bedd9f0296e64c935824">j_last_flush_trans_id</a>;</div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;</div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;    <span class="comment">/* offset in the log of where to start replay after a crash */</span></div><div class="line"><a name="l02751"></a><span class="lineno"><a class="line" href="structreiserfs__journal__header.html#ab9fd1ae12c1c929419eef9a24d9982f4"> 2751</a></span>&#160;    __le32 <a class="code" href="structreiserfs__journal__header.html#ab9fd1ae12c1c929419eef9a24d9982f4">j_first_unflushed_offset</a>;</div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;</div><div class="line"><a name="l02753"></a><span class="lineno"><a class="line" href="structreiserfs__journal__header.html#a6b13e8966265b8ad7de1caf6930ee2f5"> 2753</a></span>&#160;    __le32 <a class="code" href="structreiserfs__journal__header.html#a6b13e8966265b8ad7de1caf6930ee2f5">j_mount_id</a>;</div><div class="line"><a name="l02754"></a><span class="lineno"><a class="line" href="structreiserfs__journal__header.html#a712eee6c2084c1c3ca5057410e7fceb7"> 2754</a></span>&#160;    <span class="comment">/* 12 */</span> <span class="keyword">struct </span><a class="code" href="structjournal__params.html">journal_params</a> jh_journal;</div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;};</div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;</div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;<span class="comment">/* biggest tunable defines are right here */</span></div><div class="line"><a name="l02758"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a3e7cfeba6c1d2d9cda7dcb9e6b25bd04"> 2758</a></span>&#160;<span class="preprocessor">#define JOURNAL_BLOCK_COUNT 8192    </span><span class="comment">/* number of blocks in the journal */</span><span class="preprocessor"></span></div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;</div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;<span class="comment">/* biggest possible single transaction, don&#39;t change for now (8/3/99) */</span></div><div class="line"><a name="l02761"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a38e46b7c75e0fa2bc6980466a7763c8d"> 2761</a></span>&#160;<span class="preprocessor">#define JOURNAL_TRANS_MAX_DEFAULT 1024</span></div><div class="line"><a name="l02762"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#add204c66601fa2a929a35e14b4210a4d"> 2762</a></span>&#160;<span class="preprocessor">#define JOURNAL_TRANS_MIN_DEFAULT 256</span></div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;</div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;<span class="comment"> * max blocks to batch into one transaction,</span></div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;<span class="comment"> * don&#39;t make this any bigger than 900</span></div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02768"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a6caf25cdbdcfa4456b4d5e0323bea0ca"> 2768</a></span>&#160;<span class="preprocessor">#define JOURNAL_MAX_BATCH_DEFAULT   900</span></div><div class="line"><a name="l02769"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a293b293ce1ad9393a7e6cbefe6eef978"> 2769</a></span>&#160;<span class="preprocessor">#define JOURNAL_MIN_RATIO 2</span></div><div class="line"><a name="l02770"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a281eed474103a83cf1f1d7f8626bdb72"> 2770</a></span>&#160;<span class="preprocessor">#define JOURNAL_MAX_COMMIT_AGE 30</span></div><div class="line"><a name="l02771"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ac9c794a3a1075c54b4d3835df1276d36"> 2771</a></span>&#160;<span class="preprocessor">#define JOURNAL_MAX_TRANS_AGE 30</span></div><div class="line"><a name="l02772"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a740c2b2e2180cf04a92fcd12747bdc74"> 2772</a></span>&#160;<span class="preprocessor">#define JOURNAL_PER_BALANCE_CNT (3 * (MAX_HEIGHT-2) + 9)</span></div><div class="line"><a name="l02773"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ae6db8d47443a6cb3a17053e6a50e6f62"> 2773</a></span>&#160;<span class="preprocessor">#define JOURNAL_BLOCKS_PER_OBJECT(sb)  (JOURNAL_PER_BALANCE_CNT * 3 + \</span></div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;<span class="preprocessor">                     2 * (REISERFS_QUOTA_INIT_BLOCKS(sb) + \</span></div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;<span class="preprocessor">                          REISERFS_QUOTA_TRANS_BLOCKS(sb)))</span></div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;</div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;<span class="preprocessor">#ifdef CONFIG_QUOTA</span></div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;<span class="preprocessor">#define REISERFS_QUOTA_OPTS ((1 &lt;&lt; REISERFS_USRQUOTA) | (1 &lt;&lt; REISERFS_GRPQUOTA))</span></div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;<span class="comment">/* We need to update data and inode (atime) */</span></div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;<span class="preprocessor">#define REISERFS_QUOTA_TRANS_BLOCKS(s) (REISERFS_SB(s)-&gt;s_mount_opt &amp; REISERFS_QUOTA_OPTS ? 2 : 0)</span></div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;<span class="comment">/* 1 balancing, 1 bitmap, 1 data per write + stat data update */</span></div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;<span class="preprocessor">#define REISERFS_QUOTA_INIT_BLOCKS(s) (REISERFS_SB(s)-&gt;s_mount_opt &amp; REISERFS_QUOTA_OPTS ? \</span></div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;<span class="preprocessor">(DQUOT_INIT_ALLOC*(JOURNAL_PER_BALANCE_CNT+2)+DQUOT_INIT_REWRITE+1) : 0)</span></div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;<span class="comment">/* same as with INIT */</span></div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;<span class="preprocessor">#define REISERFS_QUOTA_DEL_BLOCKS(s) (REISERFS_SB(s)-&gt;s_mount_opt &amp; REISERFS_QUOTA_OPTS ? \</span></div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;<span class="preprocessor">(DQUOT_DEL_ALLOC*(JOURNAL_PER_BALANCE_CNT+2)+DQUOT_DEL_REWRITE+1) : 0)</span></div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l02788"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a303aeef94aad545aa070b0152a597d7e"> 2788</a></span>&#160;<span class="preprocessor">#define REISERFS_QUOTA_TRANS_BLOCKS(s) 0</span></div><div class="line"><a name="l02789"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a711ef871d7d6380942db6eb091fc9e38"> 2789</a></span>&#160;<span class="preprocessor">#define REISERFS_QUOTA_INIT_BLOCKS(s) 0</span></div><div class="line"><a name="l02790"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a56a167b9cd10816d25111ffdfa41b0a3"> 2790</a></span>&#160;<span class="preprocessor">#define REISERFS_QUOTA_DEL_BLOCKS(s) 0</span></div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;</div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;<span class="comment"> * both of these can be as low as 1, or as high as you want.  The min is the</span></div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;<span class="comment"> * number of 4k bitmap nodes preallocated on mount. New nodes are allocated</span></div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;<span class="comment"> * as needed, and released when transactions are committed.  On release, if</span></div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;<span class="comment"> * the current number of nodes is &gt; max, the node is freed, otherwise,</span></div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;<span class="comment"> * it is put on a free list for faster use later.</span></div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l02800"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a8f1ea9f96494708e15fcb69e6729a2c3"> 2800</a></span>&#160;<span class="preprocessor">#define REISERFS_MIN_BITMAP_NODES 10</span></div><div class="line"><a name="l02801"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#af7492d098cea93a388737023746ed9cf"> 2801</a></span>&#160;<span class="preprocessor">#define REISERFS_MAX_BITMAP_NODES 100</span></div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;</div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;<span class="comment">/* these are based on journal hash size of 8192 */</span></div><div class="line"><a name="l02804"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ab37fe6ace20e8f7b7ea68cbf0f9a4062"> 2804</a></span>&#160;<span class="preprocessor">#define JBH_HASH_SHIFT 13</span></div><div class="line"><a name="l02805"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#abf91ede1924261b9d8641194a55077c4"> 2805</a></span>&#160;<span class="preprocessor">#define JBH_HASH_MASK 8191</span></div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;</div><div class="line"><a name="l02807"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a58d6f3fd43e4ceb8f0a1c83963a0e025"> 2807</a></span>&#160;<span class="preprocessor">#define _jhashfn(sb,block)  \</span></div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;<span class="preprocessor">    (((unsigned long)sb&gt;&gt;L1_CACHE_SHIFT) ^ \</span></div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;<span class="preprocessor">     (((block)&lt;&lt;(JBH_HASH_SHIFT - 6)) ^ ((block) &gt;&gt; 13) ^ ((block) &lt;&lt; (JBH_HASH_SHIFT - 12))))</span></div><div class="line"><a name="l02810"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ac468a86f5dbb70dbf9b4ca2c121f03ba"> 2810</a></span>&#160;<span class="preprocessor">#define journal_hash(t,sb,block) ((t)[_jhashfn((sb),(block)) &amp; JBH_HASH_MASK])</span></div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;</div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;<span class="comment">/* We need these to make journal.c code more readable */</span></div><div class="line"><a name="l02813"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a8f0e852b2ae1c41a27a11380ebe87172"> 2813</a></span>&#160;<span class="preprocessor">#define journal_find_get_block(s, block) __find_get_block(SB_JOURNAL(s)-&gt;j_dev_bd, block, s-&gt;s_blocksize)</span></div><div class="line"><a name="l02814"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a1c1682a197dbb3a7e4e5ec7a6e2125e5"> 2814</a></span>&#160;<span class="preprocessor">#define journal_getblk(s, block) __getblk(SB_JOURNAL(s)-&gt;j_dev_bd, block, s-&gt;s_blocksize)</span></div><div class="line"><a name="l02815"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a102ba7a44d37d4e1493747cc23c70777"> 2815</a></span>&#160;<span class="preprocessor">#define journal_bread(s, block) __bread(SB_JOURNAL(s)-&gt;j_dev_bd, block, s-&gt;s_blocksize)</span></div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;</div><div class="line"><a name="l02817"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a2a3acf57dd79e917a2677f5515dff21f"> 2817</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="reiserfs_8h.html#a2a3acf57dd79e917a2677f5515dff21f">reiserfs_bh_state_bits</a> {</div><div class="line"><a name="l02818"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a2a3acf57dd79e917a2677f5515dff21fa4948b5c1da06cd5645f9b093171604e7"> 2818</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a2a3acf57dd79e917a2677f5515dff21fa4948b5c1da06cd5645f9b093171604e7">BH_JDirty</a> = BH_PrivateStart,    <span class="comment">/* buffer is in current transaction */</span></div><div class="line"><a name="l02819"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a2a3acf57dd79e917a2677f5515dff21fab1fd96e1d9c4d1f194a50802095d92e6"> 2819</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a2a3acf57dd79e917a2677f5515dff21fab1fd96e1d9c4d1f194a50802095d92e6">BH_JDirty_wait</a>,</div><div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;<span class="comment">     * disk block was taken off free list before being in a</span></div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;<span class="comment">     * finished transaction, or written to disk. Can be reused immed.</span></div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l02824"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a2a3acf57dd79e917a2677f5515dff21faf2f1122b106fbb52b3ab0d1d52cf4b48"> 2824</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a2a3acf57dd79e917a2677f5515dff21faf2f1122b106fbb52b3ab0d1d52cf4b48">BH_JNew</a>,</div><div class="line"><a name="l02825"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a2a3acf57dd79e917a2677f5515dff21fab07058d1fea689ec56cbe26875a8991e"> 2825</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a2a3acf57dd79e917a2677f5515dff21fab07058d1fea689ec56cbe26875a8991e">BH_JPrepared</a>,</div><div class="line"><a name="l02826"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a2a3acf57dd79e917a2677f5515dff21fa76394ac72e895b1293ac59e644e3f95b"> 2826</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a2a3acf57dd79e917a2677f5515dff21fa76394ac72e895b1293ac59e644e3f95b">BH_JRestore_dirty</a>,</div><div class="line"><a name="l02827"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a2a3acf57dd79e917a2677f5515dff21fa17b57c4698edfeda2b84b3862ee8b8a3"> 2827</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a2a3acf57dd79e917a2677f5515dff21fa17b57c4698edfeda2b84b3862ee8b8a3">BH_JTest</a>,       <span class="comment">/* debugging only will go away */</span></div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;};</div><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;</div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;<a class="code" href="reiserfs_8h.html#a7fe904848bdd140c75270449a1cb9941">BUFFER_FNS</a>(JDirty, journaled);</div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;<a class="code" href="reiserfs_8h.html#a741a6594f2d098e9a77de43163e8bf2b">TAS_BUFFER_FNS</a>(JDirty, journaled);</div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;<a class="code" href="reiserfs_8h.html#a7fe904848bdd140c75270449a1cb9941">BUFFER_FNS</a>(JDirty_wait, journal_dirty);</div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;<a class="code" href="reiserfs_8h.html#a741a6594f2d098e9a77de43163e8bf2b">TAS_BUFFER_FNS</a>(JDirty_wait, journal_dirty);</div><div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;<a class="code" href="reiserfs_8h.html#a7fe904848bdd140c75270449a1cb9941">BUFFER_FNS</a>(JNew, journal_new);</div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;<a class="code" href="reiserfs_8h.html#a741a6594f2d098e9a77de43163e8bf2b">TAS_BUFFER_FNS</a>(JNew, journal_new);</div><div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;<a class="code" href="reiserfs_8h.html#a7fe904848bdd140c75270449a1cb9941">BUFFER_FNS</a>(JPrepared, journal_prepared);</div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;<a class="code" href="reiserfs_8h.html#a741a6594f2d098e9a77de43163e8bf2b">TAS_BUFFER_FNS</a>(JPrepared, journal_prepared);</div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;<a class="code" href="reiserfs_8h.html#a7fe904848bdd140c75270449a1cb9941">BUFFER_FNS</a>(JRestore_dirty, journal_restore_dirty);</div><div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;<a class="code" href="reiserfs_8h.html#a741a6594f2d098e9a77de43163e8bf2b">TAS_BUFFER_FNS</a>(JRestore_dirty, journal_restore_dirty);</div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;<a class="code" href="reiserfs_8h.html#a7fe904848bdd140c75270449a1cb9941">BUFFER_FNS</a>(JTest, journal_test);</div><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;<a class="code" href="reiserfs_8h.html#a741a6594f2d098e9a77de43163e8bf2b">TAS_BUFFER_FNS</a>(JTest, journal_test);</div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;</div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;<span class="comment">/* transaction handle which is passed around for all journal calls */</span></div><div class="line"><a name="l02844"></a><span class="lineno"><a class="line" href="structreiserfs__transaction__handle.html"> 2844</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a> {</div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;<span class="comment">     * super for this FS when journal_begin was called. saves calls to</span></div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;<span class="comment">     * reiserfs_get_super also used by nested transactions to make</span></div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;<span class="comment">     * sure they are nesting on the right FS _must_ be first</span></div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;<span class="comment">     * in the handle</span></div><div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l02851"></a><span class="lineno"><a class="line" href="structreiserfs__transaction__handle.html#a4b9b9cd0aea008670abeedf79708421b"> 2851</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structsuper__block.html">super_block</a> *<a class="code" href="structreiserfs__transaction__handle.html#a4b9b9cd0aea008670abeedf79708421b">t_super</a>;</div><div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;</div><div class="line"><a name="l02853"></a><span class="lineno"><a class="line" href="structreiserfs__transaction__handle.html#a6d189e1c902afa30c1fe331666d98719"> 2853</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__transaction__handle.html#a6d189e1c902afa30c1fe331666d98719">t_refcount</a>;</div><div class="line"><a name="l02854"></a><span class="lineno"><a class="line" href="structreiserfs__transaction__handle.html#a8df56eff59ad35d9c4e446592bf94ba2"> 2854</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__transaction__handle.html#a8df56eff59ad35d9c4e446592bf94ba2">t_blocks_logged</a>;    <span class="comment">/* number of blocks this writer has logged */</span></div><div class="line"><a name="l02855"></a><span class="lineno"><a class="line" href="structreiserfs__transaction__handle.html#ade9aa7a44dcce4863915d8dfc8b370f7"> 2855</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structreiserfs__transaction__handle.html#ade9aa7a44dcce4863915d8dfc8b370f7">t_blocks_allocated</a>; <span class="comment">/* number of blocks this writer allocated */</span></div><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;</div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;    <span class="comment">/* sanity check, equals the current trans id */</span></div><div class="line"><a name="l02858"></a><span class="lineno"><a class="line" href="structreiserfs__transaction__handle.html#a1b5fbde77563c19d6c3d7a0effbd391b"> 2858</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structreiserfs__transaction__handle.html#a1b5fbde77563c19d6c3d7a0effbd391b">t_trans_id</a>;</div><div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;</div><div class="line"><a name="l02860"></a><span class="lineno"><a class="line" href="structreiserfs__transaction__handle.html#a2709deefa1fb6610f4989e3f39f1598d"> 2860</a></span>&#160;    <span class="keywordtype">void</span> *<a class="code" href="structreiserfs__transaction__handle.html#a2709deefa1fb6610f4989e3f39f1598d">t_handle_save</a>;    <span class="comment">/* save existing current-&gt;journal_info */</span></div><div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;</div><div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;<span class="comment">     * if new block allocation occurres, that block</span></div><div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;<span class="comment">     * should be displaced from others</span></div><div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l02866"></a><span class="lineno"><a class="line" href="structreiserfs__transaction__handle.html#a67a088517e184671d8db0f780cb2d3f1"> 2866</a></span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="structreiserfs__transaction__handle.html#a67a088517e184671d8db0f780cb2d3f1">displace_new_blocks</a>:1;</div><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;</div><div class="line"><a name="l02868"></a><span class="lineno"><a class="line" href="structreiserfs__transaction__handle.html#acb400ead9a891beaa8497af5db1ab21d"> 2868</a></span>&#160;    <span class="keyword">struct </span>list_head t_list;</div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;};</div><div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;</div><div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;<span class="comment"> * used to keep track of ordered and tail writes, attached to the buffer</span></div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;<span class="comment"> * head through b_journal_head.</span></div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02875"></a><span class="lineno"><a class="line" href="structreiserfs__jh.html"> 2875</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structreiserfs__jh.html">reiserfs_jh</a> {</div><div class="line"><a name="l02876"></a><span class="lineno"><a class="line" href="structreiserfs__jh.html#ad742dbef5868ec22ba791f7e526c80b4"> 2876</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structreiserfs__journal__list.html">reiserfs_journal_list</a> *<a class="code" href="structreiserfs__jh.html#ad742dbef5868ec22ba791f7e526c80b4">jl</a>;</div><div class="line"><a name="l02877"></a><span class="lineno"><a class="line" href="structreiserfs__jh.html#ae498b78e4b7e30894ab2ce207b44a781"> 2877</a></span>&#160;    <span class="keyword">struct </span>buffer_head *<a class="code" href="structreiserfs__jh.html#ae498b78e4b7e30894ab2ce207b44a781">bh</a>;</div><div class="line"><a name="l02878"></a><span class="lineno"><a class="line" href="structreiserfs__jh.html#a6fc64a2752fc22ea10d82a4d6e125403"> 2878</a></span>&#160;    <span class="keyword">struct </span>list_head <a class="code" href="cifspdu_8h.html#a7e28d0d49fe972b6aea4a399c7bc0cb0">list</a>;</div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;};</div><div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;</div><div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a83390ea91e66867341737a681591baad">reiserfs_free_jh</a>(<span class="keyword">struct</span> buffer_head *bh);</div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a7e5ef88f9994e7aa7e67c0c07d8b0f66">reiserfs_add_tail_list</a>(<span class="keyword">struct</span> inode *inode, <span class="keyword">struct</span> buffer_head *bh);</div><div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a0c6b2cad56d79cec62384dda564b89a0">reiserfs_add_ordered_list</a>(<span class="keyword">struct</span> inode *inode, <span class="keyword">struct</span> buffer_head *bh);</div><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#affe7792fb285b721cf317d2643e36c31">journal_mark_dirty</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a> *,</div><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;               <span class="keyword">struct</span> buffer_head *bh);</div><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;</div><div class="line"><a name="l02887"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#afb5381c36d62fc8dd539a01f4a74a686"> 2887</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#afb5381c36d62fc8dd539a01f4a74a686">reiserfs_file_data_log</a>(<span class="keyword">struct</span> inode *inode)</div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;{</div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="reiserfs_8h.html#afcc8c6aec0ae67fbfd708896dab893b4">reiserfs_data_log</a>(inode-&gt;i_sb) ||</div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;        (<a class="code" href="reiserfs_8h.html#a54c4b0f2afaa082072400dec2264284e">REISERFS_I</a>(inode)-&gt;<a class="code" href="structreiserfs__inode__info.html#a08045363dd99c56bf8a7b66697898e7c">i_flags</a> &amp; <a class="code" href="reiserfs_8h.html#a849778a95da790b103b5f35d542ed7ada6afad6e1b3c74bdf9c4e9c71cf810c25">i_data_log</a>))</div><div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;        <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;}</div><div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;</div><div class="line"><a name="l02895"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a11a768e1a14a5a0d90a7f023c65938f9"> 2895</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a11a768e1a14a5a0d90a7f023c65938f9">reiserfs_transaction_running</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *s)</div><div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;{</div><div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;    <span class="keyword">struct </span><a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a> *th = current-&gt;journal_info;</div><div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;    <span class="keywordflow">if</span> (th &amp;&amp; th-&gt;<a class="code" href="structreiserfs__transaction__handle.html#a4b9b9cd0aea008670abeedf79708421b">t_super</a> == s)</div><div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;        <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;    <span class="keywordflow">if</span> (th &amp;&amp; th-&gt;<a class="code" href="structreiserfs__transaction__handle.html#a4b9b9cd0aea008670abeedf79708421b">t_super</a> == NULL)</div><div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;        BUG();</div><div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;}</div><div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;</div><div class="line"><a name="l02905"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a3ef61fb28815592a43e3afd60f91757f"> 2905</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a3ef61fb28815592a43e3afd60f91757f">reiserfs_transaction_free_space</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a> *th)</div><div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;{</div><div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;    <span class="keywordflow">return</span> th-&gt;<a class="code" href="structreiserfs__transaction__handle.html#ade9aa7a44dcce4863915d8dfc8b370f7">t_blocks_allocated</a> - th-&gt;<a class="code" href="structreiserfs__transaction__handle.html#a8df56eff59ad35d9c4e446592bf94ba2">t_blocks_logged</a>;</div><div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;}</div><div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;</div><div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;<span class="keyword">struct </span><a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a> *<a class="code" href="reiserfs_8h.html#a4d1ad07d37690ada8e1f4a549a158f5d">reiserfs_persistent_transaction</a>(<span class="keyword">struct</span></div><div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;                                    <a class="code" href="structsuper__block.html">super_block</a></div><div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;                                    *,</div><div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;                                    <span class="keywordtype">int</span> <a class="code" href="exec_8c.html#a36dcaf63ad8fe9783c81b418943e2346">count</a>);</div><div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#aa31f16f82da823ae1a1d134eb32de408">reiserfs_end_persistent_transaction</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a> *);</div><div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#ac7b5d13470d9050767d1beee902186c4">reiserfs_vfs_truncate_file</a>(<span class="keyword">struct</span> inode *inode);</div><div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a1f6febedfaaf5d81fbb13f86c514ef28">reiserfs_commit_page</a>(<span class="keyword">struct</span> inode *inode, <span class="keyword">struct</span> page *page,</div><div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;             <span class="keywordtype">unsigned</span> from, <span class="keywordtype">unsigned</span> to);</div><div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#ab00b28e7e3b96c332b8ee507dd8a8904">reiserfs_flush_old_commits</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *);</div><div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a97fb4c18403cae9997f692e0807e3926">reiserfs_commit_for_inode</a>(<span class="keyword">struct</span> inode *);</div><div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a013c8bdb97ad7fb7fd02955b3e70239f">reiserfs_inode_needs_commit</a>(<span class="keyword">struct</span> inode *);</div><div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#aa5689b096d842db3b8ba5cada877e66e">reiserfs_update_inode_transaction</a>(<span class="keyword">struct</span> inode *);</div><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#ac30be6cab8741cba91969f4155380c08">reiserfs_wait_on_write_block</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *s);</div><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a4af5c20505b1d565d15a6504b0d27d6d">reiserfs_block_writes</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a> *th);</div><div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a1cba568f04f8856993a5f0182116a477">reiserfs_allow_writes</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *s);</div><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a1c52a4fb22f47e4db29dab3fec7e50b2">reiserfs_check_lock_depth</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *s, <span class="keywordtype">char</span> *caller);</div><div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a95ea4bf9ede449b32208bd63fd2b62fb">reiserfs_prepare_for_journal</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *, <span class="keyword">struct</span> buffer_head *bh,</div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;                 <span class="keywordtype">int</span> wait);</div><div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a61e8fcfb3c4c70f92fafb62576f46fde">reiserfs_restore_prepared_buffer</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *,</div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;                      <span class="keyword">struct</span> buffer_head *bh);</div><div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a037b297f34c91bd852c527340da7254a">journal_init</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *, <span class="keyword">const</span> <span class="keywordtype">char</span> *j_dev_name, <span class="keywordtype">int</span> old_format,</div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>);</div><div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#adcb55645b0b93a5ea67b60798a9c1515">journal_release</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a> *, <span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *);</div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#aac8a37cf4d6613e972331737d06b76cd">journal_release_error</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a> *,</div><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;              <span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *);</div><div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a464fd58fd314122bf59fd6c8d49daf64">journal_end</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a> *);</div><div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#ae11c7520980f6117cc56daf476e47657">journal_end_sync</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a> *);</div><div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#addc3ae6ccca80cb76ab01c534af67fd0">journal_mark_freed</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a> *,</div><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;               <span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *, <a class="code" href="reiserfs_8h.html#a91181c7f8b91aa6aff623c5d7efb89cf">b_blocknr_t</a> blocknr);</div><div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a51445e447f4a72a1862048faf97dfb69">journal_transaction_should_end</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a> *, <span class="keywordtype">int</span>);</div><div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#ae350d95aa8c238486e028ae20e1ab9d0">reiserfs_in_journal</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *<a class="code" href="ntfs_2debug_8h.html#a65b1b0602e37268ec9bc2c240a676c39">sb</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bmap_nr,</div><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;             <span class="keywordtype">int</span> bit_nr, <span class="keywordtype">int</span> searchall, <a class="code" href="reiserfs_8h.html#a91181c7f8b91aa6aff623c5d7efb89cf">b_blocknr_t</a> *<a class="code" href="summary_8h.html#adaf683eb12983f696904c6c0c0002721">next</a>);</div><div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a7355dabff177c8c0a922edcba440caba">journal_begin</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a> *,</div><div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;          <span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *sb, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>);</div><div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#aceb589d55eba24b09214fd180a361dc3">journal_join_abort</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a> *,</div><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;               <span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *sb);</div><div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a4fb8029f56b0549c6993d84dd1418a9b">reiserfs_abort_journal</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *sb, <span class="keywordtype">int</span> <a class="code" href="ctree_8h.html#aa5cdcfb6e464dcdd3cbfed516d65d07c">errno</a>);</div><div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#af41e4f85336d8246d0d9695dbfb4d3b9">reiserfs_abort</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *sb, <span class="keywordtype">int</span> errno, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="adfs_8h.html#a0cf5f0ccb15b6e951fd1b6af112439e1">fmt</a>, ...);</div><div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#aa5f39071b55cabf448e11994909a5d0f">reiserfs_allocate_list_bitmaps</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *s,</div><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;                   <span class="keyword">struct</span> <a class="code" href="structreiserfs__list__bitmap.html">reiserfs_list_bitmap</a> *, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>);</div><div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;</div><div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a569175804405d7321879d9d28254e901">reiserfs_schedule_old_flush</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *s);</div><div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#ac6621bc98c1a611e1b1b516fbe8e5e05">reiserfs_cancel_old_flush</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *s);</div><div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#acc11245ca051ca832e4d6a5a1e2b4739">add_save_link</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a> *th,</div><div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;           <span class="keyword">struct</span> inode *inode, <span class="keywordtype">int</span> <a class="code" href="itree__common_8c.html#ae461e1d2e7084d9c36aa21af0225941d">truncate</a>);</div><div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a70b154acbe6ea2bc404348439c7b8114">remove_save_link</a>(<span class="keyword">struct</span> inode *inode, <span class="keywordtype">int</span> truncate);</div><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;</div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;<span class="comment">/* objectid.c */</span></div><div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;__u32 <a class="code" href="reiserfs_8h.html#acba269526322def454e6b81740de8a72">reiserfs_get_unused_objectid</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a> *th);</div><div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a6a454842e29d7fe8af4b081279f79041">reiserfs_release_objectid</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a> *th,</div><div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;                   __u32 objectid_to_release);</div><div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a369de855dae3bff6629d14901a873922">reiserfs_convert_objectid_map_v1</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *);</div><div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;</div><div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;<span class="comment">/* stree.c */</span></div><div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#ae0e2d8866196537b150f2dc0c34a9fa8">B_IS_IN_TREE</a>(<span class="keyword">const</span> <span class="keyword">struct</span> buffer_head *);</div><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a7b4a97cd3439f6a2e54e961d49dccddb">copy_item_head</a>(<span class="keyword">struct</span> <a class="code" href="structitem__head.html">item_head</a> *to,</div><div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;               <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structitem__head.html">item_head</a> *from);</div><div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;</div><div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;<span class="comment">/* first key is in cpu form, second - le */</span></div><div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a665f4e791864e9849723ec7eff5c7d3a">comp_short_keys</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structreiserfs__key.html">reiserfs_key</a> *le_key,</div><div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;               <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structcpu__key.html">cpu_key</a> *<a class="code" href="structcpu__key.html">cpu_key</a>);</div><div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a9465d4d001a53ca6c16e09ecd182850e">le_key2cpu_key</a>(<span class="keyword">struct</span> cpu_key *to, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structreiserfs__key.html">reiserfs_key</a> *from);</div><div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;</div><div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;<span class="comment">/* both are in le form */</span></div><div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#ac7882a6a0112b1cedaedee5b962d35c3">comp_le_keys</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structreiserfs__key.html">reiserfs_key</a> *,</div><div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;            <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structreiserfs__key.html">reiserfs_key</a> *);</div><div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a9a1709980736268d6ce9b7df1c4e2b29">comp_short_le_keys</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structreiserfs__key.html">reiserfs_key</a> *,</div><div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;                  <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structreiserfs__key.html">reiserfs_key</a> *);</div><div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;</div><div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;<span class="comment">/* * get key version from on disk key - kludge */</span></div><div class="line"><a name="l02980"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#addd3f441c6f82ae08002a90f19877170"> 2980</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#addd3f441c6f82ae08002a90f19877170">le_key_version</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structreiserfs__key.html">reiserfs_key</a> *key)</div><div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;{</div><div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="cifsacl_8h.html#a1d127017fb298b889f4ba24752d08b8e">type</a>;</div><div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;</div><div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;    type = <a class="code" href="reiserfs_8h.html#a4777fbe92047586f192fb3de56ed270a">offset_v2_k_type</a>(&amp;(key-&gt;u.<a class="code" href="structreiserfs__key.html#aec914444597d34590eade817c6496158">k_offset_v2</a>));</div><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;    <span class="keywordflow">if</span> (type != <a class="code" href="reiserfs_8h.html#a4fb007f8114a0807fa711a21296cf704">TYPE_DIRECT</a> &amp;&amp; type != <a class="code" href="reiserfs_8h.html#a14b6f866d67b9e4b0184b865fd9aaa3c">TYPE_INDIRECT</a></div><div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;        &amp;&amp; type != <a class="code" href="reiserfs_8h.html#af52a53f0ef9bc7c5790028a0f81889d1">TYPE_DIRENTRY</a>)</div><div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="reiserfs_8h.html#a71b67ce5511178998ab99ae6fddfbe30">KEY_FORMAT_3_5</a>;</div><div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;</div><div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="reiserfs_8h.html#af59ee5a605e74ced210abcda48ec7750">KEY_FORMAT_3_6</a>;</div><div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;</div><div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;}</div><div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;</div><div class="line"><a name="l02993"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a5e662d62a78eae945f3ca9dbc067281b"> 2993</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a5e662d62a78eae945f3ca9dbc067281b">copy_key</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__key.html">reiserfs_key</a> *to,</div><div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;                <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structreiserfs__key.html">reiserfs_key</a> *from)</div><div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;{</div><div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;    memcpy(to, from, <a class="code" href="reiserfs_8h.html#a2d996237e082b78b41771b5aa1a6eae1">KEY_SIZE</a>);</div><div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;}</div><div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;</div><div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#ab414c2ad0b7be06a3f25427ce32563db">comp_items</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structitem__head.html">item_head</a> *stored_ih, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structtreepath.html">treepath</a> *path);</div><div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;<span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structreiserfs__key.html">reiserfs_key</a> *<a class="code" href="reiserfs_8h.html#a316b3d545627ad9a0ba2ccbb523b217f">get_rkey</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structtreepath.html">treepath</a> *chk_path,</div><div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;                    <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *sb);</div><div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a05b999f8f783c39fae7f82e29b684476">search_by_key</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *, <span class="keyword">const</span> <span class="keyword">struct</span> cpu_key *,</div><div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;          <span class="keyword">struct</span> <a class="code" href="structtreepath.html">treepath</a> *, <span class="keywordtype">int</span>);</div><div class="line"><a name="l03004"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a549d9fd931d91e6c7e951a517d962fa8"> 3004</a></span>&#160;<span class="preprocessor">#define search_item(s,key,path) search_by_key (s, key, path, DISK_LEAF_NODE_LEVEL)</span></div><div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a0f9f350a2564418a31ccae4d76db4e76">search_for_position_by_key</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *sb,</div><div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;                   <span class="keyword">const</span> <span class="keyword">struct</span> cpu_key *cpu_key,</div><div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;                   <span class="keyword">struct</span> <a class="code" href="structtreepath.html">treepath</a> *search_path);</div><div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#ab6d6b37971431b2fa066948f3b5ccbe5">decrement_bcount</a>(<span class="keyword">struct</span> buffer_head *bh);</div><div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#afedea353bd068267956316e212fae9ab">decrement_counters_in_path</a>(<span class="keyword">struct</span> <a class="code" href="structtreepath.html">treepath</a> *search_path);</div><div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a92ddb7f95feff3f2a45484b20c6a5840">pathrelse</a>(<span class="keyword">struct</span> <a class="code" href="structtreepath.html">treepath</a> *search_path);</div><div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#af5f317ff176e8f8f150e5d0a02b7c5a4">reiserfs_check_path</a>(<span class="keyword">struct</span> <a class="code" href="structtreepath.html">treepath</a> *p);</div><div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#acf796e5c52ff8a9f23e3dbf2bb49c1fb">pathrelse_and_restore</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *s, <span class="keyword">struct</span> <a class="code" href="structtreepath.html">treepath</a> *search_path);</div><div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;</div><div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#ad32ad8e61feff374e939a32c38906af6">reiserfs_insert_item</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a> *th,</div><div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;             <span class="keyword">struct</span> <a class="code" href="structtreepath.html">treepath</a> *path,</div><div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;             <span class="keyword">const</span> <span class="keyword">struct</span> cpu_key *key,</div><div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;             <span class="keyword">struct</span> <a class="code" href="structitem__head.html">item_head</a> *ih,</div><div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;             <span class="keyword">struct</span> inode *inode, <span class="keyword">const</span> <span class="keywordtype">char</span> *body);</div><div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;</div><div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a32920826f9d7560603d7102ee6956a31">reiserfs_paste_into_item</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a> *th,</div><div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;                 <span class="keyword">struct</span> <a class="code" href="structtreepath.html">treepath</a> *path,</div><div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;                 <span class="keyword">const</span> <span class="keyword">struct</span> cpu_key *key,</div><div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;                 <span class="keyword">struct</span> inode *inode,</div><div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;                 <span class="keyword">const</span> <span class="keywordtype">char</span> *body, <span class="keywordtype">int</span> paste_size);</div><div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;</div><div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#addbc26dd92a0be29bd61159488b08312">reiserfs_cut_from_item</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a> *th,</div><div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;               <span class="keyword">struct</span> <a class="code" href="structtreepath.html">treepath</a> *path,</div><div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;               <span class="keyword">struct</span> cpu_key *key,</div><div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;               <span class="keyword">struct</span> inode *inode,</div><div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;               <span class="keyword">struct</span> page *page, loff_t new_file_size);</div><div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;</div><div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a0383e737349f3beaa1281f08c2c2814d">reiserfs_delete_item</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a> *th,</div><div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;             <span class="keyword">struct</span> <a class="code" href="structtreepath.html">treepath</a> *path,</div><div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;             <span class="keyword">const</span> <span class="keyword">struct</span> cpu_key *key,</div><div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;             <span class="keyword">struct</span> inode *inode, <span class="keyword">struct</span> buffer_head *un_bh);</div><div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;</div><div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#af3f21f4e542dcd5ae1eb60fa1a05c027">reiserfs_delete_solid_item</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a> *th,</div><div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;                <span class="keyword">struct</span> inode *inode, <span class="keyword">struct</span> <a class="code" href="structreiserfs__key.html">reiserfs_key</a> *key);</div><div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#ace348e797d04fe00030103c8ae5c1081">reiserfs_delete_object</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a> *th,</div><div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;               <span class="keyword">struct</span> inode *inode);</div><div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a2aa0a9d931c009df12e8103187aa87c8">reiserfs_do_truncate</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a> *th,</div><div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;             <span class="keyword">struct</span> inode *inode, <span class="keyword">struct</span> page *,</div><div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;             <span class="keywordtype">int</span> update_timestamps);</div><div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;</div><div class="line"><a name="l03045"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a48bf74607f3d91b2924a5987c29ce919"> 3045</a></span>&#160;<span class="preprocessor">#define i_block_size(inode) ((inode)-&gt;i_sb-&gt;s_blocksize)</span></div><div class="line"><a name="l03046"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a2d266bd08cc0825a45d738785716b6c5"> 3046</a></span>&#160;<span class="preprocessor">#define file_size(inode) ((inode)-&gt;i_size)</span></div><div class="line"><a name="l03047"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a5ea4e8bb5186a4e517af773f827d8063"> 3047</a></span>&#160;<span class="preprocessor">#define tail_size(inode) (file_size (inode) &amp; (i_block_size (inode) - 1))</span></div><div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;</div><div class="line"><a name="l03049"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ac635f36b9247f299131b3fe61c26acb1"> 3049</a></span>&#160;<span class="preprocessor">#define tail_has_to_be_packed(inode) (have_large_tails ((inode)-&gt;i_sb)?\</span></div><div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;<span class="preprocessor">!STORE_TAIL_IN_UNFM_S1(file_size (inode), tail_size(inode), inode-&gt;i_sb-&gt;s_blocksize):have_small_tails ((inode)-&gt;i_sb)?!STORE_TAIL_IN_UNFM_S2(file_size (inode), tail_size(inode), inode-&gt;i_sb-&gt;s_blocksize):0 )</span></div><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;</div><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a7bd6d9dff38ecaaa4daa380a8c28a1c4">padd_item</a>(<span class="keywordtype">char</span> *item, <span class="keywordtype">int</span> total_length, <span class="keywordtype">int</span> <a class="code" href="cifspdu_8h.html#ae809d5359ac030c60a30a8f0b2294b82">length</a>);</div><div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;</div><div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;<span class="comment">/* inode.c */</span></div><div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;<span class="comment">/* args for the create parameter of reiserfs_get_block */</span></div><div class="line"><a name="l03056"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a3f229be67b499ecd95ba4e48641628c0"> 3056</a></span>&#160;<span class="preprocessor">#define GET_BLOCK_NO_CREATE 0    </span><span class="comment">/* don&#39;t create new blocks or convert tails */</span><span class="preprocessor"></span></div><div class="line"><a name="l03057"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ae732148d8b1d09ac309b322381bd83ea"> 3057</a></span>&#160;<span class="preprocessor">#define GET_BLOCK_CREATE 1   </span><span class="comment">/* add anything you need to find block */</span><span class="preprocessor"></span></div><div class="line"><a name="l03058"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a8a7316e1696abd92f61c42c23c06d586"> 3058</a></span>&#160;<span class="preprocessor">#define GET_BLOCK_NO_HOLE 2  </span><span class="comment">/* return -ENOENT for file holes */</span><span class="preprocessor"></span></div><div class="line"><a name="l03059"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a7ccba22c9c27751a706d6c8a332a3175"> 3059</a></span>&#160;<span class="preprocessor">#define GET_BLOCK_READ_DIRECT 4  </span><span class="comment">/* read the tail if indirect item not found */</span><span class="preprocessor"></span></div><div class="line"><a name="l03060"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a29e0f44ddf81be84df80d123005dd8f4"> 3060</a></span>&#160;<span class="preprocessor">#define GET_BLOCK_NO_IMUX     8  </span><span class="comment">/* i_mutex is not held, don&#39;t preallocate */</span><span class="preprocessor"></span></div><div class="line"><a name="l03061"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ae9ed81f9ee4ca84da2ad63f89996d065"> 3061</a></span>&#160;<span class="preprocessor">#define GET_BLOCK_NO_DANGLE   16 </span><span class="comment">/* don&#39;t leave any transactions running */</span><span class="preprocessor"></span></div><div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;</div><div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#aa2bd44ac5d40bc37c53bac529f7ce05e">reiserfs_read_locked_inode</a>(<span class="keyword">struct</span> inode *inode,</div><div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;                <span class="keyword">struct</span> <a class="code" href="structreiserfs__iget__args.html">reiserfs_iget_args</a> *args);</div><div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#ac4850e38fe243947a75d4d04e25ed030">reiserfs_find_actor</a>(<span class="keyword">struct</span> inode *inode, <span class="keywordtype">void</span> *p);</div><div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#ab34cae05ff7bf82367627d73ebf8d83c">reiserfs_init_locked_inode</a>(<span class="keyword">struct</span> inode *inode, <span class="keywordtype">void</span> *p);</div><div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a3f4fd21bda4c7e9487b7275dbee329c4">reiserfs_evict_inode</a>(<span class="keyword">struct</span> inode *inode);</div><div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#ad3c7e03645c81c346bdc0038446d2d57">reiserfs_write_inode</a>(<span class="keyword">struct</span> inode *inode, <span class="keyword">struct</span> writeback_control *wbc);</div><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#ad819eee928d0e1a88845926672727c81">reiserfs_get_block</a>(<span class="keyword">struct</span> inode *inode, sector_t <a class="code" href="sysv_2super_8c.html#a6f5f3480b66f3cc414fd0d6dfcf54046">block</a>,</div><div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;               <span class="keyword">struct</span> buffer_head *bh_result, <span class="keywordtype">int</span> create);</div><div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;<span class="keyword">struct </span>dentry *<a class="code" href="reiserfs_8h.html#ac2e579b4b366cffc89474058d947870b">reiserfs_fh_to_dentry</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *sb, <span class="keyword">struct</span> fid *fid,</div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;                     <span class="keywordtype">int</span> fh_len, <span class="keywordtype">int</span> fh_type);</div><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;<span class="keyword">struct </span>dentry *<a class="code" href="reiserfs_8h.html#ac0b3a53c1c87a383fa61bcf8246e3174">reiserfs_fh_to_parent</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *sb, <span class="keyword">struct</span> fid *fid,</div><div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;                     <span class="keywordtype">int</span> fh_len, <span class="keywordtype">int</span> fh_type);</div><div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#afa7dd8196906ad2d66c16172593144fb">reiserfs_encode_fh</a>(<span class="keyword">struct</span> inode *inode, __u32 * <a class="code" href="cifspdu_8h.html#aaa61af584164f982573a6890174ef943">data</a>, <span class="keywordtype">int</span> *lenp,</div><div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;               <span class="keyword">struct</span> inode *parent);</div><div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;</div><div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a1bb57dc479a88358255ae9482b66c846">reiserfs_truncate_file</a>(<span class="keyword">struct</span> inode *, <span class="keywordtype">int</span> update_timestamps);</div><div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a3962c4fe5db1dedab486c1660bb69daf">make_cpu_key</a>(<span class="keyword">struct</span> cpu_key *cpu_key, <span class="keyword">struct</span> inode *inode, loff_t offset,</div><div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;          <span class="keywordtype">int</span> type, <span class="keywordtype">int</span> key_length);</div><div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a3c68cb1b6b17bc6e286e72cebb8c6c4b">make_le_item_head</a>(<span class="keyword">struct</span> <a class="code" href="structitem__head.html">item_head</a> *ih, <span class="keyword">const</span> <span class="keyword">struct</span> cpu_key *key,</div><div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;               <span class="keywordtype">int</span> <a class="code" href="send_8h.html#ac21c5e21e8a44a607c448b05de413ed4">version</a>,</div><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;               loff_t offset, <span class="keywordtype">int</span> type, <span class="keywordtype">int</span> <a class="code" href="cifspdu_8h.html#ae809d5359ac030c60a30a8f0b2294b82">length</a>, <span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a9278b096bf862a17fbfe6c262ffe3e39">entry_count</a>);</div><div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;<span class="keyword">struct </span>inode *<a class="code" href="reiserfs_8h.html#a7d307f9bc1e70e2e8a593757e06256c0">reiserfs_iget</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *s, <span class="keyword">const</span> <span class="keyword">struct</span> cpu_key *key);</div><div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;</div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;<span class="keyword">struct </span>reiserfs_security_handle;</div><div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#ae4862da741fa47ccb6a99ae32ef5701f">reiserfs_new_inode</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a> *th,</div><div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;               <span class="keyword">struct</span> inode *dir, umode_t mode,</div><div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;               <span class="keyword">const</span> <span class="keywordtype">char</span> *symname, loff_t i_size,</div><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;               <span class="keyword">struct</span> dentry *dentry, <span class="keyword">struct</span> inode *inode,</div><div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;               <span class="keyword">struct</span> reiserfs_security_handle *security);</div><div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;</div><div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a09be0d4c5e1599b93afaa63f39fcb1b7">reiserfs_update_sd_size</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a> *th,</div><div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;                 <span class="keyword">struct</span> inode *inode, loff_t <a class="code" href="ctree_8h.html#a370d10a726e7596cd6c17d656fa8c8ad">size</a>);</div><div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;</div><div class="line"><a name="l03096"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#af2c4d7e7a9065d5c2b940eaa7ca7a824"> 3096</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#af2c4d7e7a9065d5c2b940eaa7ca7a824">reiserfs_update_sd</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a> *th,</div><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;                      <span class="keyword">struct</span> inode *inode)</div><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;{</div><div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;    <a class="code" href="reiserfs_8h.html#a09be0d4c5e1599b93afaa63f39fcb1b7">reiserfs_update_sd_size</a>(th, inode, inode-&gt;i_size);</div><div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;}</div><div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;</div><div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a46ee180c98e02931efee2124110a776d">sd_attrs_to_i_attrs</a>(__u16 sd_attrs, <span class="keyword">struct</span> inode *inode);</div><div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a2441673e8b4e42908a8f4abb3c78d010">reiserfs_setattr</a>(<span class="keyword">struct</span> dentry *dentry, <span class="keyword">struct</span> iattr *<a class="code" href="cifspdu_8h.html#a254afd421351a8d5ceee95b4084d9291">attr</a>);</div><div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;</div><div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#afbf5a612d808e777139bf16a9dd9a786">__reiserfs_write_begin</a>(<span class="keyword">struct</span> page *page, <span class="keywordtype">unsigned</span> from, <span class="keywordtype">unsigned</span> <a class="code" href="send_8h.html#ac6c61fc2d54b5e017432ab28daf5a7a9">len</a>);</div><div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;</div><div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;<span class="comment">/* namei.c */</span></div><div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a18294c5b52c621daf71ba650155a4f33">set_de_name_and_namelen</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__dir__entry.html">reiserfs_dir_entry</a> *de);</div><div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#adfd6277d9be10f5153de97089a202a17">search_by_entry_key</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *sb, <span class="keyword">const</span> <span class="keyword">struct</span> cpu_key *key,</div><div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;            <span class="keyword">struct</span> <a class="code" href="structtreepath.html">treepath</a> *path, <span class="keyword">struct</span> <a class="code" href="structreiserfs__dir__entry.html">reiserfs_dir_entry</a> *de);</div><div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;<span class="keyword">struct </span>dentry *<a class="code" href="reiserfs_8h.html#abb8e64396a169dde8e409c706a3f2bfb">reiserfs_get_parent</a>(<span class="keyword">struct</span> dentry *);</div><div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;</div><div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;<span class="preprocessor">#ifdef CONFIG_REISERFS_PROC_INFO</span></div><div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#ab919d12209450517710db71b8d75b483">reiserfs_proc_info_init</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *sb);</div><div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a004541f1492cf7d78fc57fd419730fb4">reiserfs_proc_info_done</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *sb);</div><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#aa30349979901d9c838ed928dd142e0c4">reiserfs_proc_info_global_init</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a53836a0a2c703d953f241e93c547a97b">reiserfs_proc_info_global_done</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;</div><div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;<span class="preprocessor">#define PROC_EXP( e )   e</span></div><div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;</div><div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;<span class="preprocessor">#define __PINFO( sb ) REISERFS_SB(sb) -&gt; s_proc_info_data</span></div><div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;<span class="preprocessor">#define PROC_INFO_MAX( sb, field, value )                               \</span></div><div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;<span class="preprocessor">    __PINFO( sb ).field =                                               \</span></div><div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;<span class="preprocessor">        max( REISERFS_SB( sb ) -&gt; s_proc_info_data.field, value )</span></div><div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;<span class="preprocessor">#define PROC_INFO_INC( sb, field ) ( ++ ( __PINFO( sb ).field ) )</span></div><div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;<span class="preprocessor">#define PROC_INFO_ADD( sb, field, val ) ( __PINFO( sb ).field += ( val ) )</span></div><div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;<span class="preprocessor">#define PROC_INFO_BH_STAT( sb, bh, level )                          \</span></div><div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;<span class="preprocessor">    PROC_INFO_INC( sb, sbk_read_at[ ( level ) ] );                      \</span></div><div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;<span class="preprocessor">    PROC_INFO_ADD( sb, free_at[ ( level ) ], B_FREE_SPACE( bh ) );  \</span></div><div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;<span class="preprocessor">    PROC_INFO_ADD( sb, items_at[ ( level ) ], B_NR_ITEMS( bh ) )</span></div><div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l03132"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ab919d12209450517710db71b8d75b483"> 3132</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#ab919d12209450517710db71b8d75b483">reiserfs_proc_info_init</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *sb)</div><div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;{</div><div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;}</div><div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;</div><div class="line"><a name="l03137"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a004541f1492cf7d78fc57fd419730fb4"> 3137</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a004541f1492cf7d78fc57fd419730fb4">reiserfs_proc_info_done</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *sb)</div><div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;{</div><div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;}</div><div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;</div><div class="line"><a name="l03142"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aa30349979901d9c838ed928dd142e0c4"> 3142</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#aa30349979901d9c838ed928dd142e0c4">reiserfs_proc_info_global_init</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;{</div><div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;}</div><div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;</div><div class="line"><a name="l03147"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a53836a0a2c703d953f241e93c547a97b"> 3147</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a53836a0a2c703d953f241e93c547a97b">reiserfs_proc_info_global_done</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;{</div><div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;}</div><div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;</div><div class="line"><a name="l03152"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a522b166ac1fd54a7bfc6b41f95df0a48"> 3152</a></span>&#160;<span class="preprocessor">#define PROC_EXP( e )</span></div><div class="line"><a name="l03153"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aa5323730130705e5ade82b61cce865da"> 3153</a></span>&#160;<span class="preprocessor">#define VOID_V ( ( void ) 0 )</span></div><div class="line"><a name="l03154"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a94f849545f77d539efd78f6b9ad50139"> 3154</a></span>&#160;<span class="preprocessor">#define PROC_INFO_MAX( sb, field, value ) VOID_V</span></div><div class="line"><a name="l03155"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#af3a8a69e6180ee331884d7ec440c39f6"> 3155</a></span>&#160;<span class="preprocessor">#define PROC_INFO_INC( sb, field ) VOID_V</span></div><div class="line"><a name="l03156"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#afa92c728c7e90b139bcd9d0f9f1d9cd9"> 3156</a></span>&#160;<span class="preprocessor">#define PROC_INFO_ADD( sb, field, val ) VOID_V</span></div><div class="line"><a name="l03157"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a6f861203b7cc250f45382e543ad1e224"> 3157</a></span>&#160;<span class="preprocessor">#define PROC_INFO_BH_STAT(sb, bh, n_node_level) VOID_V</span></div><div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;</div><div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;<span class="comment">/* dir.c */</span></div><div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <span class="keyword">struct </span>inode_operations <a class="code" href="reiserfs_8h.html#ac71a1d698967f5af5a9c8c1f5d168c48">reiserfs_dir_inode_operations</a>;</div><div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <span class="keyword">struct </span>inode_operations <a class="code" href="reiserfs_8h.html#af053124ef6638e77541226c921dd004f">reiserfs_symlink_inode_operations</a>;</div><div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <span class="keyword">struct </span>inode_operations <a class="code" href="reiserfs_8h.html#a64f33f1d2d7e4715a7f6c5077662dfb8">reiserfs_special_inode_operations</a>;</div><div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <span class="keyword">struct </span>file_operations <a class="code" href="reiserfs_8h.html#afe5b8b8a725768b03a92c0e21e3a77a2">reiserfs_dir_operations</a>;</div><div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a2fe996e622d3d304e120ea5413931694">reiserfs_readdir_inode</a>(<span class="keyword">struct</span> inode *, <span class="keyword">struct</span> dir_context *);</div><div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;</div><div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;<span class="comment">/* tail_conversion.c */</span></div><div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#aef5d8c9122635369f917bd5e828757cc">direct2indirect</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a> *, <span class="keyword">struct</span> inode *,</div><div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;            <span class="keyword">struct</span> <a class="code" href="structtreepath.html">treepath</a> *, <span class="keyword">struct</span> buffer_head *, loff_t);</div><div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a76f10759afd7f50cba641a626645d3ba">indirect2direct</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a> *, <span class="keyword">struct</span> inode *,</div><div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;            <span class="keyword">struct</span> page *, <span class="keyword">struct</span> <a class="code" href="structtreepath.html">treepath</a> *, <span class="keyword">const</span> <span class="keyword">struct</span> cpu_key *,</div><div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;            loff_t, <span class="keywordtype">char</span> *);</div><div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#aa8743da37ca29249b1d6d963dc5159b2">reiserfs_unmap_buffer</a>(<span class="keyword">struct</span> buffer_head *);</div><div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;</div><div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;<span class="comment">/* file.c */</span></div><div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <span class="keyword">struct </span>inode_operations <a class="code" href="reiserfs_8h.html#afded4ce13cca5cb1e71a811a5fa5607d">reiserfs_file_inode_operations</a>;</div><div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <span class="keyword">struct </span>file_operations <a class="code" href="reiserfs_8h.html#a484e2735b57001c95bb8f9ed49cce527">reiserfs_file_operations</a>;</div><div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <span class="keyword">struct </span>address_space_operations <a class="code" href="reiserfs_8h.html#a64ad01856524b1024f02138ac5262795">reiserfs_address_space_operations</a>;</div><div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;</div><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;<span class="comment">/* fix_nodes.c */</span></div><div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;</div><div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#ab25b3acfc9d572a1805e224c3eecdb09">fix_nodes</a>(<span class="keywordtype">int</span> n_op_mode, <span class="keyword">struct</span> <a class="code" href="structtree__balance.html">tree_balance</a> *tb,</div><div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;          <span class="keyword">struct</span> <a class="code" href="structitem__head.html">item_head</a> *ins_ih, <span class="keyword">const</span> <span class="keywordtype">void</span> *);</div><div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#ab42328ed894c942af8d100841d58e1dd">unfix_nodes</a>(<span class="keyword">struct</span> <a class="code" href="structtree__balance.html">tree_balance</a> *);</div><div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;</div><div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;<span class="comment">/* prints.c */</span></div><div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a7f9317382ce2c3c3d3fb27e46ad917d7">__reiserfs_panic</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *s, <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keywordtype">id</span>,</div><div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;              <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">function</span>, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ...)</div><div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;    <a class="code" href="struct____attribute____.html">__attribute__</a> ((noreturn));</div><div class="line"><a name="l03190"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a4ddde0f7a212fc9a5c9ef258b919a80b"> 3190</a></span>&#160;<span class="preprocessor">#define reiserfs_panic(s, id, fmt, args...) \</span></div><div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;<span class="preprocessor">    __reiserfs_panic(s, id, __func__, fmt, ##args)</span></div><div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#aa8ae45b40e2a74948632132946cca93f">__reiserfs_error</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *s, <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keywordtype">id</span>,</div><div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;              <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">function</span>, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ...);</div><div class="line"><a name="l03194"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ac5bf6a7715c2422bbe9a6e0eeb570dff"> 3194</a></span>&#160;<span class="preprocessor">#define reiserfs_error(s, id, fmt, args...) \</span></div><div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;<span class="preprocessor">     __reiserfs_error(s, id, __func__, fmt, ##args)</span></div><div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#aeadd53d64ca8b52ee6c5c5c7d4b143ff">reiserfs_info</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *s, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ...);</div><div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a8b057a181befbc573cdf98d7b58a0df4">reiserfs_debug</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *s, <span class="keywordtype">int</span> <a class="code" href="ctree_8h.html#a07f45a3c5ac818042e4818e9b430f05c">level</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ...);</div><div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a504488878ebeb97740d397b170da1fa1">print_indirect_item</a>(<span class="keyword">struct</span> buffer_head *bh, <span class="keywordtype">int</span> item_num);</div><div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a24de026cfbfb14d9279f1456d995fd4b">store_print_tb</a>(<span class="keyword">struct</span> <a class="code" href="structtree__balance.html">tree_balance</a> *tb);</div><div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a11222c7e41f48a276c4082f872894843">print_cur_tb</a>(<span class="keywordtype">char</span> *mes);</div><div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a18dd171cd82b2b967d761e2d917e9914">print_de</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__dir__entry.html">reiserfs_dir_entry</a> *de);</div><div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#aaa50232125ae99d092fc11d759e2c684">print_bi</a>(<span class="keyword">struct</span> <a class="code" href="structbuffer__info.html">buffer_info</a> *bi, <span class="keywordtype">char</span> *mes);</div><div class="line"><a name="l03203"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a4f2a25057767a74493e52e82d5aa3696"> 3203</a></span>&#160;<span class="preprocessor">#define PRINT_LEAF_ITEMS 1  </span><span class="comment">/* print all items */</span><span class="preprocessor"></span></div><div class="line"><a name="l03204"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a223be827d43b0961ddb841ba09efa5bd"> 3204</a></span>&#160;<span class="preprocessor">#define PRINT_DIRECTORY_ITEMS 2 </span><span class="comment">/* print directory items */</span><span class="preprocessor"></span></div><div class="line"><a name="l03205"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#abd67457c800f6886037728d86db7a353"> 3205</a></span>&#160;<span class="preprocessor">#define PRINT_DIRECT_ITEMS 4    </span><span class="comment">/* print contents of direct items */</span><span class="preprocessor"></span></div><div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a8e7b2bb1878c0eb4280ffe49557d6f3a">print_block</a>(<span class="keyword">struct</span> buffer_head *bh, ...);</div><div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#aa6ebdf6fc6b6cfe5c48ef6e7688ce9e2">print_bmap</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *s, <span class="keywordtype">int</span> silent);</div><div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#aa9129d38d59a79460f0e94689564911b">print_bmap_block</a>(<span class="keywordtype">int</span> i, <span class="keywordtype">char</span> *<a class="code" href="cifspdu_8h.html#aaa61af584164f982573a6890174ef943">data</a>, <span class="keywordtype">int</span> <a class="code" href="ctree_8h.html#a370d10a726e7596cd6c17d656fa8c8ad">size</a>, <span class="keywordtype">int</span> silent);</div><div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;<span class="comment">/*void print_super_block (struct super_block * s, char * mes);*/</span></div><div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a108416fabd4302d9ba34f6f27d82d825">print_objectid_map</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *s);</div><div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a3642b9d6d617cfbfd86842b384d0101f">print_block_head</a>(<span class="keyword">struct</span> buffer_head *bh, <span class="keywordtype">char</span> *mes);</div><div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a2fe27e28adb6691e527556cb976b4eaa">check_leaf</a>(<span class="keyword">struct</span> buffer_head *bh);</div><div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a8603f71d52465b85aaf7309890b3bb0c">check_internal</a>(<span class="keyword">struct</span> buffer_head *bh);</div><div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#ae809d8ae762dec0a19e311d33fd04e01">print_statistics</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *s);</div><div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;<span class="keywordtype">char</span> *<a class="code" href="reiserfs_8h.html#a3db5cba730cc38df9598c82ed079cb38">reiserfs_hashname</a>(<span class="keywordtype">int</span> code);</div><div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;</div><div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;<span class="comment">/* lbalance.c */</span></div><div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#ac6077015cae75ba753bea3013357f235">leaf_move_items</a>(<span class="keywordtype">int</span> shift_mode, <span class="keyword">struct</span> <a class="code" href="structtree__balance.html">tree_balance</a> *tb, <span class="keywordtype">int</span> mov_num,</div><div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;            <span class="keywordtype">int</span> mov_bytes, <span class="keyword">struct</span> buffer_head *Snew);</div><div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a322ccee988a506008586ac738bff9754">leaf_shift_left</a>(<span class="keyword">struct</span> <a class="code" href="structtree__balance.html">tree_balance</a> *tb, <span class="keywordtype">int</span> shift_num, <span class="keywordtype">int</span> shift_bytes);</div><div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#af54bf92ea413df4b30505982c604195f">leaf_shift_right</a>(<span class="keyword">struct</span> <a class="code" href="structtree__balance.html">tree_balance</a> *tb, <span class="keywordtype">int</span> shift_num, <span class="keywordtype">int</span> shift_bytes);</div><div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a189d1ded9f88c9b13fa33b06d99abf5c">leaf_delete_items</a>(<span class="keyword">struct</span> <a class="code" href="structbuffer__info.html">buffer_info</a> *cur_bi, <span class="keywordtype">int</span> last_first, <span class="keywordtype">int</span> first,</div><div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;               <span class="keywordtype">int</span> del_num, <span class="keywordtype">int</span> del_bytes);</div><div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a43be9efbd93c512df923fc05fda89444">leaf_insert_into_buf</a>(<span class="keyword">struct</span> <a class="code" href="structbuffer__info.html">buffer_info</a> *bi, <span class="keywordtype">int</span> before,</div><div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;              <span class="keyword">struct</span> <a class="code" href="structitem__head.html">item_head</a> * <span class="keyword">const</span> inserted_item_ih,</div><div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;              <span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> inserted_item_body,</div><div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;              <span class="keywordtype">int</span> zeros_number);</div><div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a364539b08ad935255565f91f32d500fc">leaf_paste_in_buffer</a>(<span class="keyword">struct</span> <a class="code" href="structbuffer__info.html">buffer_info</a> *bi, <span class="keywordtype">int</span> pasted_item_num,</div><div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;              <span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a8c9f52a6d75a5a5857a2d1b1a1a0f8bd">pos_in_item</a>, <span class="keywordtype">int</span> paste_size,</div><div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;              <span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> body, <span class="keywordtype">int</span> zeros_number);</div><div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a89e926209197f65221f777a74feeab88">leaf_cut_from_buffer</a>(<span class="keyword">struct</span> <a class="code" href="structbuffer__info.html">buffer_info</a> *bi, <span class="keywordtype">int</span> cut_item_num,</div><div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;              <span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a8c9f52a6d75a5a5857a2d1b1a1a0f8bd">pos_in_item</a>, <span class="keywordtype">int</span> cut_size);</div><div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a07a69d819eeff64a782d555c609ff7e7">leaf_paste_entries</a>(<span class="keyword">struct</span> <a class="code" href="structbuffer__info.html">buffer_info</a> *bi, <span class="keywordtype">int</span> item_num, <span class="keywordtype">int</span> before,</div><div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;            <span class="keywordtype">int</span> new_entry_count, <span class="keyword">struct</span> <a class="code" href="structreiserfs__de__head.html">reiserfs_de_head</a> *new_dehs,</div><div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span> *records, <span class="keywordtype">int</span> paste_size);</div><div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;<span class="comment">/* ibalance.c */</span></div><div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a0205af0fdbd187bedeb4876ca019217b">balance_internal</a>(<span class="keyword">struct</span> <a class="code" href="structtree__balance.html">tree_balance</a> *, <span class="keywordtype">int</span>, <span class="keywordtype">int</span>, <span class="keyword">struct</span> <a class="code" href="structitem__head.html">item_head</a> *,</div><div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;             <span class="keyword">struct</span> buffer_head **);</div><div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;</div><div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;<span class="comment">/* do_balance.c */</span></div><div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a136bfbe4bac47c74a867eb6e07182f9f">do_balance_mark_leaf_dirty</a>(<span class="keyword">struct</span> <a class="code" href="structtree__balance.html">tree_balance</a> *tb,</div><div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;                <span class="keyword">struct</span> buffer_head *bh, <span class="keywordtype">int</span> flag);</div><div class="line"><a name="l03243"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a9dc30562886fe0ea7526ff88f6d83693"> 3243</a></span>&#160;<span class="preprocessor">#define do_balance_mark_internal_dirty do_balance_mark_leaf_dirty</span></div><div class="line"><a name="l03244"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#abe7a54caec53966b0a47f6af84ab8e5d"> 3244</a></span>&#160;<span class="preprocessor">#define do_balance_mark_sb_dirty do_balance_mark_leaf_dirty</span></div><div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;</div><div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a633866bcfdc41d2c0ccfb0f846537755">do_balance</a>(<span class="keyword">struct</span> <a class="code" href="structtree__balance.html">tree_balance</a> *tb, <span class="keyword">struct</span> <a class="code" href="structitem__head.html">item_head</a> *ih,</div><div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *body, <span class="keywordtype">int</span> flag);</div><div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a4c0e59721e3b1ea2f5ced1c9b64833af">reiserfs_invalidate_buffer</a>(<span class="keyword">struct</span> <a class="code" href="structtree__balance.html">tree_balance</a> *tb,</div><div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;                <span class="keyword">struct</span> buffer_head *bh);</div><div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;</div><div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a0d07fbb088439e6e95e30c84c4827d59">get_left_neighbor_position</a>(<span class="keyword">struct</span> <a class="code" href="structtree__balance.html">tree_balance</a> *tb, <span class="keywordtype">int</span> h);</div><div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#ab3613a10dd9d644751b575aaf45f3566">get_right_neighbor_position</a>(<span class="keyword">struct</span> <a class="code" href="structtree__balance.html">tree_balance</a> *tb, <span class="keywordtype">int</span> h);</div><div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a060395f2a2adc5ad370c4fde15b3ba9e">replace_key</a>(<span class="keyword">struct</span> <a class="code" href="structtree__balance.html">tree_balance</a> *tb, <span class="keyword">struct</span> buffer_head *, <span class="keywordtype">int</span>,</div><div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;         <span class="keyword">struct</span> buffer_head *, <span class="keywordtype">int</span>);</div><div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a3ae286f67fc60881b96ec93781936062">make_empty_node</a>(<span class="keyword">struct</span> <a class="code" href="structbuffer__info.html">buffer_info</a> *);</div><div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;<span class="keyword">struct </span>buffer_head *<a class="code" href="reiserfs_8h.html#a2d80aa8ba0d240a470389ccc91f78864">get_FEB</a>(<span class="keyword">struct</span> <a class="code" href="structtree__balance.html">tree_balance</a> *);</div><div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;</div><div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;<span class="comment">/* bitmap.c */</span></div><div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;</div><div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;<span class="comment"> * structure contains hints for block allocator, and it is a container for</span></div><div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;<span class="comment"> * arguments, such as node, search path, transaction_handle, etc.</span></div><div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03264"></a><span class="lineno"><a class="line" href="struct____reiserfs__blocknr__hint.html"> 3264</a></span>&#160;<span class="keyword">struct </span><a class="code" href="struct____reiserfs__blocknr__hint.html">__reiserfs_blocknr_hint</a> {</div><div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;    <span class="comment">/* inode passed to allocator, if we allocate unf. nodes */</span></div><div class="line"><a name="l03266"></a><span class="lineno"><a class="line" href="struct____reiserfs__blocknr__hint.html#abc10e97169be18d92579bb1b2b5d6aae"> 3266</a></span>&#160;    <span class="keyword">struct </span>inode *<a class="code" href="struct____reiserfs__blocknr__hint.html#abc10e97169be18d92579bb1b2b5d6aae">inode</a>;</div><div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;</div><div class="line"><a name="l03268"></a><span class="lineno"><a class="line" href="struct____reiserfs__blocknr__hint.html#ad8abdb60397f454fe16bf024a8472517"> 3268</a></span>&#160;    sector_t <a class="code" href="struct____reiserfs__blocknr__hint.html#ad8abdb60397f454fe16bf024a8472517">block</a>;     <span class="comment">/* file offset, in blocks */</span></div><div class="line"><a name="l03269"></a><span class="lineno"><a class="line" href="struct____reiserfs__blocknr__hint.html#ac5875035227a8e5bcfb13eb082d89aaf"> 3269</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structin__core__key.html">in_core_key</a> key;</div><div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;</div><div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;<span class="comment">     * search path, used by allocator to deternine search_start by</span></div><div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;<span class="comment">     * various ways</span></div><div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l03275"></a><span class="lineno"><a class="line" href="struct____reiserfs__blocknr__hint.html#a0a318f3d373bfb064f590a9ab65cdae2"> 3275</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structtreepath.html">treepath</a> *<a class="code" href="struct____reiserfs__blocknr__hint.html#a0a318f3d373bfb064f590a9ab65cdae2">path</a>;</div><div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;</div><div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;<span class="comment">     * transaction handle is needed to log super blocks</span></div><div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;<span class="comment">     * and bitmap blocks changes</span></div><div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l03281"></a><span class="lineno"><a class="line" href="struct____reiserfs__blocknr__hint.html#a8c37d3c76a5ad5a4e137330ccc587754"> 3281</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a> *<a class="code" href="struct____reiserfs__blocknr__hint.html#a8c37d3c76a5ad5a4e137330ccc587754">th</a>;</div><div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;</div><div class="line"><a name="l03283"></a><span class="lineno"><a class="line" href="struct____reiserfs__blocknr__hint.html#acc6f866987fb82f2412a922744bc1e31"> 3283</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a91181c7f8b91aa6aff623c5d7efb89cf">b_blocknr_t</a> beg, <a class="code" href="struct____reiserfs__blocknr__hint.html#acc6f866987fb82f2412a922744bc1e31">end</a>;</div><div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;</div><div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;<span class="comment">     * a field used to transfer search start value (block number)</span></div><div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;<span class="comment">     * between different block allocator procedures</span></div><div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;<span class="comment">     * (determine_search_start() and others)</span></div><div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l03290"></a><span class="lineno"><a class="line" href="struct____reiserfs__blocknr__hint.html#a4ca59fbaa87e61adf27fb4d69b8811ca"> 3290</a></span>&#160;    <a class="code" href="reiserfs_8h.html#a91181c7f8b91aa6aff623c5d7efb89cf">b_blocknr_t</a> <a class="code" href="struct____reiserfs__blocknr__hint.html#a4ca59fbaa87e61adf27fb4d69b8811ca">search_start</a>;</div><div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;</div><div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;<span class="comment">     * is set in determine_prealloc_size() function,</span></div><div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;<span class="comment">     * used by underlayed function that do actual allocation</span></div><div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l03296"></a><span class="lineno"><a class="line" href="struct____reiserfs__blocknr__hint.html#ae18af36b6674de6e657c0b344575c77f"> 3296</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct____reiserfs__blocknr__hint.html#ae18af36b6674de6e657c0b344575c77f">prealloc_size</a>;</div><div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;</div><div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;<span class="comment">     * the allocator uses different polices for getting disk</span></div><div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;<span class="comment">     * space for formatted/unformatted blocks with/without preallocation</span></div><div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l03302"></a><span class="lineno"><a class="line" href="struct____reiserfs__blocknr__hint.html#a65214f06dc34fa15e6efb6eb5962e6e6"> 3302</a></span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="struct____reiserfs__blocknr__hint.html#a65214f06dc34fa15e6efb6eb5962e6e6">formatted_node</a>:1;</div><div class="line"><a name="l03303"></a><span class="lineno"><a class="line" href="struct____reiserfs__blocknr__hint.html#a4305cb8f985e737fca060c9f9f6e000d"> 3303</a></span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="struct____reiserfs__blocknr__hint.html#a4305cb8f985e737fca060c9f9f6e000d">preallocate</a>:1;</div><div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;};</div><div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;</div><div class="line"><a name="l03306"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a7ec139eb4aab34629786dec32251ef5c"> 3306</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct____reiserfs__blocknr__hint.html">__reiserfs_blocknr_hint</a> <a class="code" href="struct____reiserfs__blocknr__hint.html">reiserfs_blocknr_hint_t</a>;</div><div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;</div><div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a5bf5274cdaa958c15ee7701e1c5557c0">reiserfs_parse_alloc_options</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *, <span class="keywordtype">char</span> *);</div><div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#accb82f84975c3982e1882326429fe9bd">reiserfs_init_alloc_options</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *s);</div><div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;</div><div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;<span class="comment"> * given a directory, this will tell you what packing locality</span></div><div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;<span class="comment"> * to use for a new object underneat it.  The locality is returned</span></div><div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;<span class="comment"> * in disk byte order (le).</span></div><div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;__le32 <a class="code" href="reiserfs_8h.html#a93b470de9c99e50130c7bfbc05098db3">reiserfs_choose_packing</a>(<span class="keyword">struct</span> inode *dir);</div><div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;</div><div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a2482eec7d114cba0cc54d89e225a7944">show_alloc_options</a>(<span class="keyword">struct</span> seq_file *seq, <span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *s);</div><div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#abeed81412aedf88b6a7fdd560f944d77">reiserfs_init_bitmap_cache</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *sb);</div><div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#aec71079dc30c251753a81cac72b9dffc">reiserfs_free_bitmap_cache</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *sb);</div><div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#aa21a34a7d4c6cc8ae4b868dbdab8d726">reiserfs_cache_bitmap_metadata</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *sb, <span class="keyword">struct</span> buffer_head *bh, <span class="keyword">struct</span> <a class="code" href="structreiserfs__bitmap__info.html">reiserfs_bitmap_info</a> *info);</div><div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;<span class="keyword">struct </span>buffer_head *<a class="code" href="reiserfs_8h.html#abea185527d26799785fd032bfa486849">reiserfs_read_bitmap_block</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *sb, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bitmap);</div><div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a5068da821cd2ebef6a0eafdc08f22f31">is_reusable</a>(<span class="keyword">struct</span> <a class="code" href="structsuper__block.html">super_block</a> *s, <a class="code" href="reiserfs_8h.html#a91181c7f8b91aa6aff623c5d7efb89cf">b_blocknr_t</a> <a class="code" href="sysv_2super_8c.html#a6f5f3480b66f3cc414fd0d6dfcf54046">block</a>, <span class="keywordtype">int</span> bit_value);</div><div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#a0cb8ef687ab28c192c4d55c57769e84b">reiserfs_free_block</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a> *th, <span class="keyword">struct</span> inode *,</div><div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;             <a class="code" href="reiserfs_8h.html#a91181c7f8b91aa6aff623c5d7efb89cf">b_blocknr_t</a>, <span class="keywordtype">int</span> for_unformatted);</div><div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a2960b49de1e1b379bd0aa65af2452fcf">reiserfs_allocate_blocknrs</a>(<a class="code" href="struct____reiserfs__blocknr__hint.html">reiserfs_blocknr_hint_t</a> *, <a class="code" href="reiserfs_8h.html#a91181c7f8b91aa6aff623c5d7efb89cf">b_blocknr_t</a> *, <span class="keywordtype">int</span>,</div><div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;                   <span class="keywordtype">int</span>);</div><div class="line"><a name="l03328"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a6a251a53b6c4751b32be555266b744fa"> 3328</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a6a251a53b6c4751b32be555266b744fa">reiserfs_new_form_blocknrs</a>(<span class="keyword">struct</span> <a class="code" href="structtree__balance.html">tree_balance</a> *tb,</div><div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;                         <a class="code" href="reiserfs_8h.html#a91181c7f8b91aa6aff623c5d7efb89cf">b_blocknr_t</a> * new_blocknrs,</div><div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;                         <span class="keywordtype">int</span> amount_needed)</div><div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;{</div><div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;    <a class="code" href="struct____reiserfs__blocknr__hint.html">reiserfs_blocknr_hint_t</a> hint = {</div><div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;        .<a class="code" href="struct____reiserfs__blocknr__hint.html#a8c37d3c76a5ad5a4e137330ccc587754">th</a> = tb-&gt;<a class="code" href="structtree__balance.html#a8eae60641ab72c8786a3ea9c227bdac7">transaction_handle</a>,</div><div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;        .path = tb-&gt;<a class="code" href="structtree__balance.html#ae55246757bcccd60505d87d00f99ebf4">tb_path</a>,</div><div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;        .inode = NULL,</div><div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;        .key = tb-&gt;<a class="code" href="structtree__balance.html#a3ba6e7e0bbbfde14fe91d4f75409d0ad">key</a>,</div><div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;        .block = 0,</div><div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;        .formatted_node = 1</div><div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;    };</div><div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="reiserfs_8h.html#a2960b49de1e1b379bd0aa65af2452fcf">reiserfs_allocate_blocknrs</a>(&amp;hint, new_blocknrs, amount_needed,</div><div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;                      0);</div><div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;}</div><div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;</div><div class="line"><a name="l03344"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a8fbd456d2dd20c544c6ae4975c274223"> 3344</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a8fbd456d2dd20c544c6ae4975c274223">reiserfs_new_unf_blocknrs</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a></div><div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;                        *th, <span class="keyword">struct</span> inode *inode,</div><div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;                        <a class="code" href="reiserfs_8h.html#a91181c7f8b91aa6aff623c5d7efb89cf">b_blocknr_t</a> * new_blocknrs,</div><div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;                        <span class="keyword">struct</span> <a class="code" href="structtreepath.html">treepath</a> *path,</div><div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;                        sector_t <a class="code" href="sysv_2super_8c.html#a6f5f3480b66f3cc414fd0d6dfcf54046">block</a>)</div><div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;{</div><div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;    <a class="code" href="struct____reiserfs__blocknr__hint.html">reiserfs_blocknr_hint_t</a> hint = {</div><div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;        .<a class="code" href="struct____reiserfs__blocknr__hint.html#a8c37d3c76a5ad5a4e137330ccc587754">th</a> = th,</div><div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;        .path = path,</div><div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;        .inode = <a class="code" href="summary_8h.html#a63c41f9614ee9a4e1beb75eabad72f22">inode</a>,</div><div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;        .block = <a class="code" href="sysv_2super_8c.html#a6f5f3480b66f3cc414fd0d6dfcf54046">block</a>,</div><div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;        .formatted_node = 0,</div><div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;        .preallocate = 0</div><div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;    };</div><div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="reiserfs_8h.html#a2960b49de1e1b379bd0aa65af2452fcf">reiserfs_allocate_blocknrs</a>(&amp;hint, new_blocknrs, 1, 0);</div><div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;}</div><div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;</div><div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;<span class="preprocessor">#ifdef REISERFS_PREALLOCATE</span></div><div class="line"><a name="l03362"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#aa154d9c62a68f6c5e52e467c9239ab4f"> 3362</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#aa154d9c62a68f6c5e52e467c9239ab4f">reiserfs_new_unf_blocknrs2</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a></div><div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;                         *th, <span class="keyword">struct</span> inode *inode,</div><div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;                         <a class="code" href="reiserfs_8h.html#a91181c7f8b91aa6aff623c5d7efb89cf">b_blocknr_t</a> * new_blocknrs,</div><div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;                         <span class="keyword">struct</span> <a class="code" href="structtreepath.html">treepath</a> *path,</div><div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;                         sector_t <a class="code" href="sysv_2super_8c.html#a6f5f3480b66f3cc414fd0d6dfcf54046">block</a>)</div><div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;{</div><div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;    <a class="code" href="struct____reiserfs__blocknr__hint.html">reiserfs_blocknr_hint_t</a> hint = {</div><div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;        .<a class="code" href="struct____reiserfs__blocknr__hint.html#a8c37d3c76a5ad5a4e137330ccc587754">th</a> = th,</div><div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;        .path = path,</div><div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;        .inode = <a class="code" href="summary_8h.html#a63c41f9614ee9a4e1beb75eabad72f22">inode</a>,</div><div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;        .block = <a class="code" href="sysv_2super_8c.html#a6f5f3480b66f3cc414fd0d6dfcf54046">block</a>,</div><div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;        .formatted_node = 0,</div><div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;        .preallocate = 1</div><div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;    };</div><div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="reiserfs_8h.html#a2960b49de1e1b379bd0aa65af2452fcf">reiserfs_allocate_blocknrs</a>(&amp;hint, new_blocknrs, 1, 0);</div><div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;}</div><div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;</div><div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#ada4b23eb1c816283b3fb7a3c249fbf54">reiserfs_discard_prealloc</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a> *th,</div><div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;                   <span class="keyword">struct</span> inode *inode);</div><div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;<span class="keywordtype">void</span> <a class="code" href="reiserfs_8h.html#abe7b265d327dbb5ae2dc118cedc28b4a">reiserfs_discard_all_prealloc</a>(<span class="keyword">struct</span> <a class="code" href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a> *th);</div><div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;</div><div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;<span class="comment">/* hashes.c */</span></div><div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;__u32 <a class="code" href="reiserfs_8h.html#add38ae772aca9ec259d5fcfed238fd5e">keyed_hash</a>(<span class="keyword">const</span> <span class="keywordtype">signed</span> <span class="keywordtype">char</span> *msg, <span class="keywordtype">int</span> len);</div><div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;__u32 <a class="code" href="reiserfs_8h.html#a668ae38dda410e1b6cf612cb912d40a8">yura_hash</a>(<span class="keyword">const</span> <span class="keywordtype">signed</span> <span class="keywordtype">char</span> *msg, <span class="keywordtype">int</span> len);</div><div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;__u32 <a class="code" href="reiserfs_8h.html#a0b8591c9e1f96e249245cc9734e90271">r5_hash</a>(<span class="keyword">const</span> <span class="keywordtype">signed</span> <span class="keywordtype">char</span> *msg, <span class="keywordtype">int</span> len);</div><div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;</div><div class="line"><a name="l03389"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ab3bb23314373cc115ebd405d0ba213c4"> 3389</a></span>&#160;<span class="preprocessor">#define reiserfs_set_le_bit     __set_bit_le</span></div><div class="line"><a name="l03390"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a96ddfb077f78f301cbb9b1411a3b0a64"> 3390</a></span>&#160;<span class="preprocessor">#define reiserfs_test_and_set_le_bit    __test_and_set_bit_le</span></div><div class="line"><a name="l03391"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#add3c38064f4d2af6d8a1a0dc95302dfe"> 3391</a></span>&#160;<span class="preprocessor">#define reiserfs_clear_le_bit       __clear_bit_le</span></div><div class="line"><a name="l03392"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ae8e6d1b0e22d341e3087b28454a7cfc3"> 3392</a></span>&#160;<span class="preprocessor">#define reiserfs_test_and_clear_le_bit  __test_and_clear_bit_le</span></div><div class="line"><a name="l03393"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a3ba72d6a55febe6059491b3c530fa17e"> 3393</a></span>&#160;<span class="preprocessor">#define reiserfs_test_le_bit        test_bit_le</span></div><div class="line"><a name="l03394"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#ac7c86daf91d8b28b61be5c35595dddc6"> 3394</a></span>&#160;<span class="preprocessor">#define reiserfs_find_next_zero_le_bit  find_next_zero_bit_le</span></div><div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;</div><div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;<span class="comment"> * sometimes reiserfs_truncate may require to allocate few new blocks</span></div><div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;<span class="comment"> * to perform indirect2direct conversion. People probably used to</span></div><div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;<span class="comment"> * think, that truncate should work without problems on a filesystem</span></div><div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;<span class="comment"> * without free disk space. They may complain that they can not</span></div><div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;<span class="comment"> * truncate due to lack of free disk space. This spare space allows us</span></div><div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;<span class="comment"> * to not worry about it. 500 is probably too much, but it should be</span></div><div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;<span class="comment"> * absolutely safe</span></div><div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03405"></a><span class="lineno"><a class="line" href="reiserfs_8h.html#a8020b47c191936ec4cc03069dbcb56ad"> 3405</a></span>&#160;<span class="preprocessor">#define SPARE_SPACE 500</span></div><div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;</div><div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;<span class="comment">/* prototypes from ioctl.c */</span></div><div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;<span class="keywordtype">long</span> <a class="code" href="reiserfs_8h.html#a665d08dda577d2d36f1433406dc8bcb1">reiserfs_ioctl</a>(<span class="keyword">struct</span> file *filp, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="send_8h.html#aba87c031cbb3e372df508f4153bd3f1c">cmd</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> arg);</div><div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;<span class="keywordtype">long</span> <a class="code" href="reiserfs_8h.html#a28f23e81f8cae721e948c8a969b4dd9b">reiserfs_compat_ioctl</a>(<span class="keyword">struct</span> file *filp,</div><div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;           <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="send_8h.html#aba87c031cbb3e372df508f4153bd3f1c">cmd</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> arg);</div><div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;<span class="keywordtype">int</span> <a class="code" href="reiserfs_8h.html#a935095b2e858148ef00609f2fa5008de">reiserfs_unpack</a>(<span class="keyword">struct</span> inode *inode, <span class="keyword">struct</span> file *filp);</div><div class="ttc" id="structtree__balance_html_a6c0ac6f6328256e28a7a4bb872da4245"><div class="ttname"><a href="structtree__balance.html#a6c0ac6f6328256e28a7a4bb872da4245">tree_balance::tb_sb</a></div><div class="ttdeci">struct super_block * tb_sb</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2407</div></div>
<div class="ttc" id="reiserfs_8h_html_a97fb4c18403cae9997f692e0807e3926"><div class="ttname"><a href="reiserfs_8h.html#a97fb4c18403cae9997f692e0807e3926">reiserfs_commit_for_inode</a></div><div class="ttdeci">int reiserfs_commit_for_inode(struct inode *)</div><div class="ttdef"><b>Definition:</b> journal.c:3901</div></div>
<div class="ttc" id="struct____reiserfs__blocknr__hint_html_a0a318f3d373bfb064f590a9ab65cdae2"><div class="ttname"><a href="struct____reiserfs__blocknr__hint.html#a0a318f3d373bfb064f590a9ab65cdae2">__reiserfs_blocknr_hint::path</a></div><div class="ttdeci">struct treepath * path</div><div class="ttdef"><b>Definition:</b> reiserfs.h:3275</div></div>
<div class="ttc" id="cifspdu_8h_html_a254afd421351a8d5ceee95b4084d9291"><div class="ttname"><a href="cifspdu_8h.html#a254afd421351a8d5ceee95b4084d9291">attr</a></div><div class="ttdeci">__le16 attr</div><div class="ttdef"><b>Definition:</b> cifspdu.h:458</div></div>
<div class="ttc" id="structreiserfs__super__block__v1_html_a482dbb3665275692ce3288c39464d1b0"><div class="ttname"><a href="structreiserfs__super__block__v1.html#a482dbb3665275692ce3288c39464d1b0">reiserfs_super_block_v1::s_umount_state</a></div><div class="ttdeci">__le16 s_umount_state</div><div class="ttdef"><b>Definition:</b> reiserfs.h:987</div></div>
<div class="ttc" id="structvirtual__node_html_ac5016c0fdc974c07b0e03b9b8989b9a6"><div class="ttname"><a href="structvirtual__node.html#ac5016c0fdc974c07b0e03b9b8989b9a6">virtual_node::vn_free_ptr</a></div><div class="ttdeci">char * vn_free_ptr</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2349</div></div>
<div class="ttc" id="structreiserfs__inode__info_html_adee78f440abcf3b25e3b3dcc3d5da332"><div class="ttname"><a href="structreiserfs__inode__info.html#adee78f440abcf3b25e3b3dcc3d5da332">reiserfs_inode_info::i_key</a></div><div class="ttdeci">__u32 i_key[4]</div><div class="ttdef"><b>Definition:</b> reiserfs.h:61</div></div>
<div class="ttc" id="reiserfs_8h_html_ab7975dd6e7eabb14edda7ba2f3286576"><div class="ttname"><a href="reiserfs_8h.html#ab7975dd6e7eabb14edda7ba2f3286576">is_reiserfs_3_5</a></div><div class="ttdeci">int is_reiserfs_3_5(struct reiserfs_super_block *rs)</div><div class="ttdef"><b>Definition:</b> super.c:40</div></div>
<div class="ttc" id="structreiserfs__inode__info_html_a21435b7e15f15807ab5e5a586f0b4bf0"><div class="ttname"><a href="structreiserfs__inode__info.html#a21435b7e15f15807ab5e5a586f0b4bf0">reiserfs_inode_info::new_packing_locality</a></div><div class="ttdeci">unsigned new_packing_locality</div><div class="ttdef"><b>Definition:</b> reiserfs.h:86</div></div>
<div class="ttc" id="reiserfs_8h_html_afa7dd8196906ad2d66c16172593144fb"><div class="ttname"><a href="reiserfs_8h.html#afa7dd8196906ad2d66c16172593144fb">reiserfs_encode_fh</a></div><div class="ttdeci">int reiserfs_encode_fh(struct inode *inode, __u32 *data, int *lenp, struct inode *parent)</div><div class="ttdef"><b>Definition:</b> inode.c:1735</div></div>
<div class="ttc" id="structreiserfs__bitmap__info_html"><div class="ttname"><a href="structreiserfs__bitmap__info.html">reiserfs_bitmap_info</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:433</div></div>
<div class="ttc" id="struct____reiserfs__blocknr__hint_html_a8c37d3c76a5ad5a4e137330ccc587754"><div class="ttname"><a href="struct____reiserfs__blocknr__hint.html#a8c37d3c76a5ad5a4e137330ccc587754">__reiserfs_blocknr_hint::th</a></div><div class="ttdeci">struct reiserfs_transaction_handle * th</div><div class="ttdef"><b>Definition:</b> reiserfs.h:3281</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_a336c4d67914767441651aa41966a82ca"><div class="ttname"><a href="structreiserfs__sb__info.html#a336c4d67914767441651aa41966a82ca">reiserfs_sb_info::s_journal</a></div><div class="ttdeci">struct reiserfs_journal * s_journal</div><div class="ttdef"><b>Definition:</b> reiserfs.h:527</div></div>
<div class="ttc" id="reiserfs_8h_html_a4c0e59721e3b1ea2f5ced1c9b64833af"><div class="ttname"><a href="reiserfs_8h.html#a4c0e59721e3b1ea2f5ced1c9b64833af">reiserfs_invalidate_buffer</a></div><div class="ttdeci">void reiserfs_invalidate_buffer(struct tree_balance *tb, struct buffer_head *bh)</div><div class="ttdef"><b>Definition:</b> do_balan.c:1551</div></div>
<div class="ttc" id="structreiserfs__journal_html_a769e7cf2d78cee197e1d0fcde9a74341"><div class="ttname"><a href="structreiserfs__journal.html#a769e7cf2d78cee197e1d0fcde9a74341">reiserfs_journal::j_last_commit_id</a></div><div class="ttdeci">unsigned int j_last_commit_id</div><div class="ttdef"><b>Definition:</b> reiserfs.h:387</div></div>
<div class="ttc" id="reiserfs_8h_html_a54c4b0f2afaa082072400dec2264284e"><div class="ttname"><a href="reiserfs_8h.html#a54c4b0f2afaa082072400dec2264284e">REISERFS_I</a></div><div class="ttdeci">static struct reiserfs_inode_info * REISERFS_I(const struct inode *inode)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1147</div></div>
<div class="ttc" id="fix__node_8c_html_ac5ada1bdfc89f7b42693e461d4cb3011"><div class="ttname"><a href="fix__node_8c.html#ac5ada1bdfc89f7b42693e461d4cb3011">can_node_be_removed</a></div><div class="ttdeci">static int can_node_be_removed(int mode, int lfree, int sfree, int rfree, struct tree_balance *tb, int h)</div><div class="ttdef"><b>Definition:</b> fix_node.c:1275</div></div>
<div class="ttc" id="structreiserfs__super__block__v1_html_a3b861cb895fa1252d3aea06910651124"><div class="ttname"><a href="structreiserfs__super__block__v1.html#a3b861cb895fa1252d3aea06910651124">reiserfs_super_block_v1::s_blocksize</a></div><div class="ttdeci">__le16 s_blocksize</div><div class="ttdef"><b>Definition:</b> reiserfs.h:980</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_aa1cbb3f4dd1a2d19741e635bcbbe9345"><div class="ttname"><a href="structreiserfs__sb__info.html#aa1cbb3f4dd1a2d19741e635bcbbe9345">reiserfs_sb_info::commit_wq</a></div><div class="ttdeci">struct workqueue_struct * commit_wq</div><div class="ttdef"><b>Definition:</b> reiserfs.h:540</div></div>
<div class="ttc" id="structreiserfs__journal__desc_html_a7e1eebbbfa028b37431c3c0bc48a0381"><div class="ttname"><a href="structreiserfs__journal__desc.html#a7e1eebbbfa028b37431c3c0bc48a0381">reiserfs_journal_desc::j_trans_id</a></div><div class="ttdeci">__le32 j_trans_id</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2709</div></div>
<div class="ttc" id="structreiserfs__journal_html_ac09ad464205e07fbae3888cd57a4c7ad"><div class="ttname"><a href="structreiserfs__journal.html#ac09ad464205e07fbae3888cd57a4c7ad">reiserfs_journal::j_state</a></div><div class="ttdeci">unsigned long j_state</div><div class="ttdef"><b>Definition:</b> reiserfs.h:310</div></div>
<div class="ttc" id="structreiserfs__journal_html_a3412d5b03f12df5e4750f5e244751b57"><div class="ttname"><a href="structreiserfs__journal.html#a3412d5b03f12df5e4750f5e244751b57">reiserfs_journal::j_cnode_free_list</a></div><div class="ttdeci">struct reiserfs_journal_cnode * j_cnode_free_list</div><div class="ttdef"><b>Definition:</b> reiserfs.h:371</div></div>
<div class="ttc" id="reiserfs_8h_html_a504488878ebeb97740d397b170da1fa1"><div class="ttname"><a href="reiserfs_8h.html#a504488878ebeb97740d397b170da1fa1">print_indirect_item</a></div><div class="ttdeci">void print_indirect_item(struct buffer_head *bh, int item_num)</div></div>
<div class="ttc" id="structreiserfs__jh_html_ae498b78e4b7e30894ab2ce207b44a781"><div class="ttname"><a href="structreiserfs__jh.html#ae498b78e4b7e30894ab2ce207b44a781">reiserfs_jh::bh</a></div><div class="ttdeci">struct buffer_head * bh</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2877</div></div>
<div class="ttc" id="reiserfs_8h_html_a849778a95da790b103b5f35d542ed7adad4d6b9d9f8ef9a87a8119f3e05730ae8"><div class="ttname"><a href="reiserfs_8h.html#a849778a95da790b103b5f35d542ed7adad4d6b9d9f8ef9a87a8119f3e05730ae8">i_item_key_version_mask</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:34</div></div>
<div class="ttc" id="reiserfs_8h_html_addd3f441c6f82ae08002a90f19877170"><div class="ttname"><a href="reiserfs_8h.html#addd3f441c6f82ae08002a90f19877170">le_key_version</a></div><div class="ttdeci">static int le_key_version(const struct reiserfs_key *key)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2980</div></div>
<div class="ttc" id="reiserfs_8h_html_accb82f84975c3982e1882326429fe9bd"><div class="ttname"><a href="reiserfs_8h.html#accb82f84975c3982e1882326429fe9bd">reiserfs_init_alloc_options</a></div><div class="ttdeci">void reiserfs_init_alloc_options(struct super_block *s)</div><div class="ttdef"><b>Definition:</b> bitmap.c:566</div></div>
<div class="ttc" id="structstat__data__v1_html_a26fbc2b21381b2814fa70d54e4d3b065"><div class="ttname"><a href="structstat__data__v1.html#a26fbc2b21381b2814fa70d54e4d3b065">stat_data_v1::sd_first_direct_byte</a></div><div class="ttdeci">__le32 sd_first_direct_byte</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1736</div></div>
<div class="ttc" id="reiserfs_8h_html_a09d5f52e00d6dacf0bbcc53e1a2f2a85a5d37a2d04db021d9c41696a549a97bd2"><div class="ttname"><a href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a5d37a2d04db021d9c41696a549a97bd2">REISERFS_DATA_LOG</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:682</div></div>
<div class="ttc" id="reiserfs_8h_html_a09d5f52e00d6dacf0bbcc53e1a2f2a85adca7a5e47b77aaf45e0d2ec028456076"><div class="ttname"><a href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85adca7a5e47b77aaf45e0d2ec028456076">REISERFS_ERROR_RO</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:704</div></div>
<div class="ttc" id="reiserfs_8h_html_a28f23e81f8cae721e948c8a969b4dd9b"><div class="ttname"><a href="reiserfs_8h.html#a28f23e81f8cae721e948c8a969b4dd9b">reiserfs_compat_ioctl</a></div><div class="ttdeci">long reiserfs_compat_ioctl(struct file *filp, unsigned int cmd, unsigned long arg)</div></div>
<div class="ttc" id="reiserfs_8h_html_a09d5f52e00d6dacf0bbcc53e1a2f2a85a1fe592ddbbd4b84f27638f7355f1fc19"><div class="ttname"><a href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a1fe592ddbbd4b84f27638f7355f1fc19">REISERFS_DATA_WRITEBACK</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:684</div></div>
<div class="ttc" id="reiserfs_8h_html_a58e1148564b46929f3dfeeb36438c7ef"><div class="ttname"><a href="reiserfs_8h.html#a58e1148564b46929f3dfeeb36438c7ef">reiserfs_write_lock</a></div><div class="ttdeci">void reiserfs_write_lock(struct super_block *s)</div><div class="ttdef"><b>Definition:</b> lock.c:22</div></div>
<div class="ttc" id="reiserfs_8h_html_a29d94d1fcd4d46c5c8851c7dfb525485"><div class="ttname"><a href="reiserfs_8h.html#a29d94d1fcd4d46c5c8851c7dfb525485">sd_rdev</a></div><div class="ttdeci">__le32 sd_rdev</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1724</div></div>
<div class="ttc" id="reiserfs_8h_html_ad6f8c43345aec774d56d664dd2cdcf85"><div class="ttname"><a href="reiserfs_8h.html#ad6f8c43345aec774d56d664dd2cdcf85">set_offset_v2_k_type</a></div><div class="ttdeci">static void set_offset_v2_k_type(struct offset_v2 *v2, int type)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1266</div></div>
<div class="ttc" id="structreiserfs__journal__header_html_ab9fd1ae12c1c929419eef9a24d9982f4"><div class="ttname"><a href="structreiserfs__journal__header.html#ab9fd1ae12c1c929419eef9a24d9982f4">reiserfs_journal_header::j_first_unflushed_offset</a></div><div class="ttdeci">__le32 j_first_unflushed_offset</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2751</div></div>
<div class="ttc" id="reiserfs_8h_html_ac6077015cae75ba753bea3013357f235"><div class="ttname"><a href="reiserfs_8h.html#ac6077015cae75ba753bea3013357f235">leaf_move_items</a></div><div class="ttdeci">int leaf_move_items(int shift_mode, struct tree_balance *tb, int mov_num, int mov_bytes, struct buffer_head *Snew)</div><div class="ttdef"><b>Definition:</b> lbalance.c:715</div></div>
<div class="ttc" id="reiserfs_8h_html_a139414bd121e02b9c3e64be89e2f3c5b"><div class="ttname"><a href="reiserfs_8h.html#a139414bd121e02b9c3e64be89e2f3c5b">ih_location</a></div><div class="ttdeci">#define ih_location(ih)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1399</div></div>
<div class="ttc" id="structreiserfs__transaction__handle_html_a8df56eff59ad35d9c4e446592bf94ba2"><div class="ttname"><a href="structreiserfs__transaction__handle.html#a8df56eff59ad35d9c4e446592bf94ba2">reiserfs_transaction_handle::t_blocks_logged</a></div><div class="ttdeci">int t_blocks_logged</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2854</div></div>
<div class="ttc" id="structstat__data_html_a90e139da65619ebefeb25f4a23fdd20f"><div class="ttname"><a href="structstat__data.html#a90e139da65619ebefeb25f4a23fdd20f">stat_data::sd_size</a></div><div class="ttdeci">__le64 sd_size</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1799</div></div>
<div class="ttc" id="structitem__head_html_a070db1a4a2984e3eff5e530e87556ea6"><div class="ttname"><a href="structitem__head.html#a070db1a4a2984e3eff5e530e87556ea6">item_head::ih_item_len</a></div><div class="ttdeci">__le16 ih_item_len</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1382</div></div>
<div class="ttc" id="reiserfs_8h_html_aeadf70ec41303a31671baed14804b5f4"><div class="ttname"><a href="reiserfs_8h.html#aeadf70ec41303a31671baed14804b5f4">reiserfs_lock_check_recursive</a></div><div class="ttdeci">static void reiserfs_lock_check_recursive(struct super_block *s)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:780</div></div>
<div class="ttc" id="reiserfs_8h_html_affe7792fb285b721cf317d2643e36c31"><div class="ttname"><a href="reiserfs_8h.html#affe7792fb285b721cf317d2643e36c31">journal_mark_dirty</a></div><div class="ttdeci">int journal_mark_dirty(struct reiserfs_transaction_handle *, struct buffer_head *bh)</div><div class="ttdef"><b>Definition:</b> journal.c:3273</div></div>
<div class="ttc" id="reiserfs_8h_html_ae350d95aa8c238486e028ae20e1ab9d0"><div class="ttname"><a href="reiserfs_8h.html#ae350d95aa8c238486e028ae20e1ab9d0">reiserfs_in_journal</a></div><div class="ttdeci">int reiserfs_in_journal(struct super_block *sb, unsigned int bmap_nr, int bit_nr, int searchall, b_blocknr_t *next)</div><div class="ttdef"><b>Definition:</b> journal.c:460</div></div>
<div class="ttc" id="structstat__data__v1_html_ab902c1f16f4297b56fcabdf1498e5acb"><div class="ttname"><a href="structstat__data__v1.html#ab902c1f16f4297b56fcabdf1498e5acb">stat_data_v1::sd_nlink</a></div><div class="ttdeci">__le16 sd_nlink</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1712</div></div>
<div class="ttc" id="reiserfs_8h_html_af5f317ff176e8f8f150e5d0a02b7c5a4"><div class="ttname"><a href="reiserfs_8h.html#af5f317ff176e8f8f150e5d0a02b7c5a4">reiserfs_check_path</a></div><div class="ttdeci">int reiserfs_check_path(struct treepath *p)</div><div class="ttdef"><b>Definition:</b> stree.c:347</div></div>
<div class="ttc" id="reiserfs_8h_html_a484e2735b57001c95bb8f9ed49cce527"><div class="ttname"><a href="reiserfs_8h.html#a484e2735b57001c95bb8f9ed49cce527">reiserfs_file_operations</a></div><div class="ttdeci">const struct file_operations reiserfs_file_operations</div><div class="ttdef"><b>Definition:</b> file.c:245</div></div>
<div class="ttc" id="structreiserfs__transaction__handle_html_a1b5fbde77563c19d6c3d7a0effbd391b"><div class="ttname"><a href="structreiserfs__transaction__handle.html#a1b5fbde77563c19d6c3d7a0effbd391b">reiserfs_transaction_handle::t_trans_id</a></div><div class="ttdeci">unsigned int t_trans_id</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2858</div></div>
<div class="ttc" id="structreiserfs__super__block__v1_html_af68675b5a348268f4adb00e3b795f8a2"><div class="ttname"><a href="structreiserfs__super__block__v1.html#af68675b5a348268f4adb00e3b795f8a2">reiserfs_super_block_v1::s_oid_cursize</a></div><div class="ttdeci">__le16 s_oid_cursize</div><div class="ttdef"><b>Definition:</b> reiserfs.h:984</div></div>
<div class="ttc" id="reiserfs_8h_html_ac1e9bd179d42a15d3bc394d629ad3e9c"><div class="ttname"><a href="reiserfs_8h.html#ac1e9bd179d42a15d3bc394d629ad3e9c">set_le_key_k_type</a></div><div class="ttdeci">static void set_le_key_k_type(int version, struct reiserfs_key *key, int type)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1525</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_a691a25b84d073eaaf3b551b90279051f"><div class="ttname"><a href="structreiserfs__sb__info.html#a691a25b84d073eaaf3b551b90279051f">reiserfs_sb_info::preallocmin</a></div><div class="ttdeci">int preallocmin</div><div class="ttdef"><b>Definition:</b> reiserfs.h:571</div></div>
<div class="ttc" id="structunfm__nodeinfo_html_aaa3fb573240703e2954237f95a7196cb"><div class="ttname"><a href="structunfm__nodeinfo.html#aaa3fb573240703e2954237f95a7196cb">unfm_nodeinfo::unfm_nodenum</a></div><div class="ttdeci">unp_t unfm_nodenum</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1135</div></div>
<div class="ttc" id="fix__node_8c_html_a4c191477f574b5026f3446ea576de62d"><div class="ttname"><a href="fix__node_8c.html#a4c191477f574b5026f3446ea576de62d">check_right</a></div><div class="ttdeci">static void check_right(struct tree_balance *tb, int h, int cur_free)</div><div class="ttdef"><b>Definition:</b> fix_node.c:280</div></div>
<div class="ttc" id="structstat__data__v1_html_a3115409b6d51e572e943c063dc8aed40"><div class="ttname"><a href="structstat__data__v1.html#a3115409b6d51e572e943c063dc8aed40">stat_data_v1::sd_ctime</a></div><div class="ttdeci">__le32 sd_ctime</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1723</div></div>
<div class="ttc" id="reiserfs_8h_html_a79640a36b37453c64cf9ee81d753c531"><div class="ttname"><a href="reiserfs_8h.html#a79640a36b37453c64cf9ee81d753c531">TYPE_MAXTYPE</a></div><div class="ttdeci">#define TYPE_MAXTYPE</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1243</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_a69078b5eab2f5c813881f30de8a429e8"><div class="ttname"><a href="structreiserfs__sb__info.html#a69078b5eab2f5c813881f30de8a429e8">reiserfs_sb_info::preallocsize</a></div><div class="ttdeci">int preallocsize</div><div class="ttdef"><b>Definition:</b> reiserfs.h:578</div></div>
<div class="ttc" id="reiserfs_8h_html_a8b057a181befbc573cdf98d7b58a0df4"><div class="ttname"><a href="reiserfs_8h.html#a8b057a181befbc573cdf98d7b58a0df4">reiserfs_debug</a></div><div class="ttdeci">void reiserfs_debug(struct super_block *s, int level, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> prints.c:295</div></div>
<div class="ttc" id="structtreepath_html"><div class="ttname"><a href="structtreepath.html">treepath</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:2131</div></div>
<div class="ttc" id="reiserfs_8h_html_aa979f8afc12407cb4954a40a2be8fa27a2d4d150e98b299ab1afd23618d93fee0"><div class="ttname"><a href="reiserfs_8h.html#aa979f8afc12407cb4954a40a2be8fa27a2d4d150e98b299ab1afd23618d93fee0">J_ABORTED</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:425</div></div>
<div class="ttc" id="reiserfs_8h_html_af3f21f4e542dcd5ae1eb60fa1a05c027"><div class="ttname"><a href="reiserfs_8h.html#af3f21f4e542dcd5ae1eb60fa1a05c027">reiserfs_delete_solid_item</a></div><div class="ttdeci">void reiserfs_delete_solid_item(struct reiserfs_transaction_handle *th, struct inode *inode, struct reiserfs_key *key)</div><div class="ttdef"><b>Definition:</b> stree.c:1387</div></div>
<div class="ttc" id="reiserfs_8h_html_a2b87be5696e3915b3c61c36f8960fa60"><div class="ttname"><a href="reiserfs_8h.html#a2b87be5696e3915b3c61c36f8960fa60">uniqueness2type</a></div><div class="ttdeci">static int uniqueness2type(__u32 uniqueness) CONSTF</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1432</div></div>
<div class="ttc" id="reiserfs_8h_html_a665d08dda577d2d36f1433406dc8bcb1"><div class="ttname"><a href="reiserfs_8h.html#a665d08dda577d2d36f1433406dc8bcb1">reiserfs_ioctl</a></div><div class="ttdeci">long reiserfs_ioctl(struct file *filp, unsigned int cmd, unsigned long arg)</div><div class="ttdef"><b>Definition:</b> ioctl.c:23</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_ae4f51636b9abaad4fb30a39181534443"><div class="ttname"><a href="structreiserfs__sb__info.html#ae4f51636b9abaad4fb30a39181534443">reiserfs_sb_info::s_proc_info_data</a></div><div class="ttdeci">reiserfs_proc_info_data_t s_proc_info_data</div><div class="ttdef"><b>Definition:</b> reiserfs.h:608</div></div>
<div class="ttc" id="structreiserfs__dir__entry_html_a401e10ccc82a7b4a1e0a5781c2e6f48f"><div class="ttname"><a href="structreiserfs__dir__entry.html#a401e10ccc82a7b4a1e0a5781c2e6f48f">reiserfs_dir_entry::de_gen_number_bit_string</a></div><div class="ttdeci">unsigned long * de_gen_number_bit_string</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1990</div></div>
<div class="ttc" id="reiserfs_8h_html_ac2e579b4b366cffc89474058d947870b"><div class="ttname"><a href="reiserfs_8h.html#ac2e579b4b366cffc89474058d947870b">reiserfs_fh_to_dentry</a></div><div class="ttdeci">struct dentry * reiserfs_fh_to_dentry(struct super_block *sb, struct fid *fid, int fh_len, int fh_type)</div><div class="ttdef"><b>Definition:</b> inode.c:1691</div></div>
<div class="ttc" id="structreiserfs__journal__list_html_a4446bca167e181dd29da7b7b6c94f3f2"><div class="ttname"><a href="structreiserfs__journal__list.html#a4446bca167e181dd29da7b7b6c94f3f2">reiserfs_journal_list::j_freedlist</a></div><div class="ttdeci">struct reiserfs_journal_cnode * j_freedlist</div><div class="ttdef"><b>Definition:</b> reiserfs.h:278</div></div>
<div class="ttc" id="reiserfs_8h_html_af54bf92ea413df4b30505982c604195f"><div class="ttname"><a href="reiserfs_8h.html#af54bf92ea413df4b30505982c604195f">leaf_shift_right</a></div><div class="ttdeci">int leaf_shift_right(struct tree_balance *tb, int shift_num, int shift_bytes)</div><div class="ttdef"><b>Definition:</b> lbalance.c:794</div></div>
<div class="ttc" id="reiserfs_8h_html_a46ee180c98e02931efee2124110a776d"><div class="ttname"><a href="reiserfs_8h.html#a46ee180c98e02931efee2124110a776d">sd_attrs_to_i_attrs</a></div><div class="ttdeci">void sd_attrs_to_i_attrs(__u16 sd_attrs, struct inode *inode)</div><div class="ttdef"><b>Definition:</b> inode.c:3065</div></div>
<div class="ttc" id="reiserfs_8h_html_a11a768e1a14a5a0d90a7f023c65938f9"><div class="ttname"><a href="reiserfs_8h.html#a11a768e1a14a5a0d90a7f023c65938f9">reiserfs_transaction_running</a></div><div class="ttdeci">static int reiserfs_transaction_running(struct super_block *s)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2895</div></div>
<div class="ttc" id="reiserfs_8h_html_a364539b08ad935255565f91f32d500fc"><div class="ttname"><a href="reiserfs_8h.html#a364539b08ad935255565f91f32d500fc">leaf_paste_in_buffer</a></div><div class="ttdeci">void leaf_paste_in_buffer(struct buffer_info *bi, int pasted_item_num, int pos_in_item, int paste_size, const char *const body, int zeros_number)</div><div class="ttdef"><b>Definition:</b> lbalance.c:978</div></div>
<div class="ttc" id="structin__core__key_html_a70bb564426efab5bf6e8308ca2c7aafa"><div class="ttname"><a href="structin__core__key.html#a70bb564426efab5bf6e8308ca2c7aafa">in_core_key::k_objectid</a></div><div class="ttdeci">__u32 k_objectid</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1301</div></div>
<div class="ttc" id="reiserfs_8h_html_a91181c7f8b91aa6aff623c5d7efb89cf"><div class="ttname"><a href="reiserfs_8h.html#a91181c7f8b91aa6aff623c5d7efb89cf">b_blocknr_t</a></div><div class="ttdeci">__u32 b_blocknr_t</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1131</div></div>
<div class="ttc" id="reiserfs_8h_html_a09d5f52e00d6dacf0bbcc53e1a2f2a85"><div class="ttname"><a href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85">reiserfs_mount_options</a></div><div class="ttdeci">reiserfs_mount_options</div><div class="ttdef"><b>Definition:</b> reiserfs.h:648</div></div>
<div class="ttc" id="structreiserfs__journal_html_a08062c938f4a11a94ca1792c25424d38"><div class="ttname"><a href="structreiserfs__journal.html#a08062c938f4a11a94ca1792c25424d38">reiserfs_journal::j_trans_start_time</a></div><div class="ttdeci">time_t j_trans_start_time</div><div class="ttdef"><b>Definition:</b> reiserfs.h:334</div></div>
<div class="ttc" id="reiserfs_8h_html_a24de026cfbfb14d9279f1456d995fd4b"><div class="ttname"><a href="reiserfs_8h.html#a24de026cfbfb14d9279f1456d995fd4b">store_print_tb</a></div><div class="ttdeci">void store_print_tb(struct tree_balance *tb)</div><div class="ttdef"><b>Definition:</b> prints.c:619</div></div>
<div class="ttc" id="reiserfs_8h_html_a0b8591c9e1f96e249245cc9734e90271"><div class="ttname"><a href="reiserfs_8h.html#a0b8591c9e1f96e249245cc9734e90271">r5_hash</a></div><div class="ttdeci">__u32 r5_hash(const signed char *msg, int len)</div><div class="ttdef"><b>Definition:</b> hashes.c:167</div></div>
<div class="ttc" id="structreiserfs__list__bitmap_html"><div class="ttname"><a href="structreiserfs__list__bitmap.html">reiserfs_list_bitmap</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:250</div></div>
<div class="ttc" id="structtree__balance_html_a628f5576310a644cc3ce45ef81b147fe"><div class="ttname"><a href="structtree__balance.html#a628f5576310a644cc3ce45ef81b147fe">tree_balance::vn_buf_size</a></div><div class="ttdeci">int vn_buf_size</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2531</div></div>
<div class="ttc" id="struct____reiserfs__blocknr__hint_html_a4ca59fbaa87e61adf27fb4d69b8811ca"><div class="ttname"><a href="struct____reiserfs__blocknr__hint.html#a4ca59fbaa87e61adf27fb4d69b8811ca">__reiserfs_blocknr_hint::search_start</a></div><div class="ttdeci">b_blocknr_t search_start</div><div class="ttdef"><b>Definition:</b> reiserfs.h:3290</div></div>
<div class="ttc" id="reiserfs_8h_html_a569175804405d7321879d9d28254e901"><div class="ttname"><a href="reiserfs_8h.html#a569175804405d7321879d9d28254e901">reiserfs_schedule_old_flush</a></div><div class="ttdeci">void reiserfs_schedule_old_flush(struct super_block *s)</div><div class="ttdef"><b>Definition:</b> super.c:115</div></div>
<div class="ttc" id="reiserfs_8h_html_ab919d12209450517710db71b8d75b483"><div class="ttname"><a href="reiserfs_8h.html#ab919d12209450517710db71b8d75b483">reiserfs_proc_info_init</a></div><div class="ttdeci">static int reiserfs_proc_info_init(struct super_block *sb)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:3132</div></div>
<div class="ttc" id="reiserfs_8h_html_a849778a95da790b103b5f35d542ed7ada31e660d60db8e321fe3637673488e660"><div class="ttname"><a href="reiserfs_8h.html#a849778a95da790b103b5f35d542ed7ada31e660d60db8e321fe3637673488e660">i_nopack_mask</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:46</div></div>
<div class="ttc" id="reiserfs_8h_html_a0205af0fdbd187bedeb4876ca019217b"><div class="ttname"><a href="reiserfs_8h.html#a0205af0fdbd187bedeb4876ca019217b">balance_internal</a></div><div class="ttdeci">int balance_internal(struct tree_balance *, int, int, struct item_head *, struct buffer_head **)</div><div class="ttdef"><b>Definition:</b> ibalance.c:803</div></div>
<div class="ttc" id="reiserfs_8h_html_a2a3acf57dd79e917a2677f5515dff21fa4948b5c1da06cd5645f9b093171604e7"><div class="ttname"><a href="reiserfs_8h.html#a2a3acf57dd79e917a2677f5515dff21fa4948b5c1da06cd5645f9b093171604e7">BH_JDirty</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:2818</div></div>
<div class="ttc" id="reiserfs_8h_html_acf796e5c52ff8a9f23e3dbf2bb49c1fb"><div class="ttname"><a href="reiserfs_8h.html#acf796e5c52ff8a9f23e3dbf2bb49c1fb">pathrelse_and_restore</a></div><div class="ttdeci">void pathrelse_and_restore(struct super_block *s, struct treepath *search_path)</div><div class="ttdef"><b>Definition:</b> stree.c:359</div></div>
<div class="ttc" id="structreiserfs__journal_html_ac136a9b84f043a946bcc088e5a25cbb8"><div class="ttname"><a href="structreiserfs__journal.html#ac136a9b84f043a946bcc088e5a25cbb8">reiserfs_journal::j_wcount</a></div><div class="ttdeci">atomic_t j_wcount</div><div class="ttdef"><b>Definition:</b> reiserfs.h:321</div></div>
<div class="ttc" id="reiserfs_8h_html_afedea353bd068267956316e212fae9ab"><div class="ttname"><a href="reiserfs_8h.html#afedea353bd068267956316e212fae9ab">decrement_counters_in_path</a></div><div class="ttdeci">void decrement_counters_in_path(struct treepath *search_path)</div></div>
<div class="ttc" id="reiserfs_8h_html_a8e7b2bb1878c0eb4280ffe49557d6f3a"><div class="ttname"><a href="reiserfs_8h.html#a8e7b2bb1878c0eb4280ffe49557d6f3a">print_block</a></div><div class="ttdeci">void print_block(struct buffer_head *bh,...)</div><div class="ttdef"><b>Definition:</b> prints.c:590</div></div>
<div class="ttc" id="structsuper__block_html"><div class="ttname"><a href="structsuper__block.html">super_block</a></div><div class="ttdef"><b>Definition:</b> ubifs.h:968</div></div>
<div class="ttc" id="reiserfs_8h_html_a09d5f52e00d6dacf0bbcc53e1a2f2a85a5e5e2bbe1a852f37b904ed3e79ecc3ee"><div class="ttname"><a href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a5e5e2bbe1a852f37b904ed3e79ecc3ee">FORCE_RUPASOV_HASH</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:678</div></div>
<div class="ttc" id="structreiserfs__super__block__v1_html_a1ad5541142683abe1c68492f40d92da1"><div class="ttname"><a href="structreiserfs__super__block__v1.html#a1ad5541142683abe1c68492f40d92da1">reiserfs_super_block_v1::s_root_block</a></div><div class="ttdeci">__le32 s_root_block</div><div class="ttdef"><b>Definition:</b> reiserfs.h:978</div></div>
<div class="ttc" id="mds__client_8c_html_a5f584af691004d9ca3bb703c82c071cc"><div class="ttname"><a href="mds__client_8c.html#a5f584af691004d9ca3bb703c82c071cc">delayed_work</a></div><div class="ttdeci">static void delayed_work(struct work_struct *work)</div><div class="ttdef"><b>Definition:</b> mds_client.c:3528</div></div>
<div class="ttc" id="structjournal__params_html_ad28c888d224f26355a5393bb8a02987b"><div class="ttname"><a href="structjournal__params.html#ad28c888d224f26355a5393bb8a02987b">journal_params::jp_journal_max_batch</a></div><div class="ttdeci">__le32 jp_journal_max_batch</div><div class="ttdef"><b>Definition:</b> reiserfs.h:965</div></div>
<div class="ttc" id="cifspdu_8h_html_a29e94a3da97728e39afcbafa40610788"><div class="ttname"><a href="cifspdu_8h.html#a29e94a3da97728e39afcbafa40610788">free</a></div><div class="ttdeci">void(* free)(struct data_blob *data_blob)</div><div class="ttdef"><b>Definition:</b> cifspdu.h:459</div></div>
<div class="ttc" id="structreiserfs__super__block_html_a0da4e7579c2adc3bad30eba9a6d67fbd"><div class="ttname"><a href="structreiserfs__super__block.html#a0da4e7579c2adc3bad30eba9a6d67fbd">reiserfs_super_block::s_mnt_count</a></div><div class="ttdeci">__le16 s_mnt_count</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1037</div></div>
<div class="ttc" id="reiserfs_8h_html_aa70479542fd6681109abefbe5296a5bba9384754fd144fdbb8134078a9e2f0881"><div class="ttname"><a href="reiserfs_8h.html#aa70479542fd6681109abefbe5296a5bba9384754fd144fdbb8134078a9e2f0881">reiserfs_attrs_cleared</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:109</div></div>
<div class="ttc" id="structreiserfs__journal_html_a3a62cf080ead416c75ecf7f16237e7a3"><div class="ttname"><a href="structreiserfs__journal.html#a3a62cf080ead416c75ecf7f16237e7a3">reiserfs_journal::j_persistent_trans</a></div><div class="ttdeci">int j_persistent_trans</div><div class="ttdef"><b>Definition:</b> reiserfs.h:410</div></div>
<div class="ttc" id="structreiserfs__journal_html_a1efbf70a78479bb751ca9c10f5fa4223"><div class="ttname"><a href="structreiserfs__journal.html#a1efbf70a78479bb751ca9c10f5fa4223">reiserfs_journal::j_free_bitmap_nodes</a></div><div class="ttdeci">int j_free_bitmap_nodes</div><div class="ttdef"><b>Definition:</b> reiserfs.h:377</div></div>
<div class="ttc" id="structreiserfs__sb__info_html"><div class="ttname"><a href="structreiserfs__sb__info.html">reiserfs_sb_info</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:518</div></div>
<div class="ttc" id="reiserfs_8h_html_a09d5f52e00d6dacf0bbcc53e1a2f2a85a4121a5ec9dfa574b8f5329b05a00bb34"><div class="ttname"><a href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a4121a5ec9dfa574b8f5329b05a00bb34">REISERFS_XATTRS_USER</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:696</div></div>
<div class="ttc" id="structtree__balance_html_a3ba6e7e0bbbfde14fe91d4f75409d0ad"><div class="ttname"><a href="structtree__balance.html#a3ba6e7e0bbbfde14fe91d4f75409d0ad">tree_balance::key</a></div><div class="ttdeci">struct in_core_key key</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2547</div></div>
<div class="ttc" id="dquot_8c_html_a78a0deba7a34cea1fc4576102f98db4f"><div class="ttname"><a href="dquot_8c.html#a78a0deba7a34cea1fc4576102f98db4f">i_dquot</a></div><div class="ttdeci">static struct dquot ** i_dquot(struct inode *inode)</div><div class="ttdef"><b>Definition:</b> dquot.c:921</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_a2129eee6bd959e8602f15081fed4d059"><div class="ttname"><a href="structreiserfs__sb__info.html#a2129eee6bd959e8602f15081fed4d059">reiserfs_sb_info::s_properties</a></div><div class="ttdeci">unsigned long s_properties</div><div class="ttdef"><b>Definition:</b> reiserfs.h:587</div></div>
<div class="ttc" id="structreiserfs__de__head_html_aea49c5f8601d697f53af1b6f64a5c13a"><div class="ttname"><a href="structreiserfs__de__head.html#aea49c5f8601d697f53af1b6f64a5c13a">reiserfs_de_head::deh_objectid</a></div><div class="ttdeci">__le32 deh_objectid</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1895</div></div>
<div class="ttc" id="reiserfs_8h_html_ac4850e38fe243947a75d4d04e25ed030"><div class="ttname"><a href="reiserfs_8h.html#ac4850e38fe243947a75d4d04e25ed030">reiserfs_find_actor</a></div><div class="ttdeci">int reiserfs_find_actor(struct inode *inode, void *p)</div><div class="ttdef"><b>Definition:</b> inode.c:1631</div></div>
<div class="ttc" id="structreiserfs__journal__list_html_a62cc70db692abb27f2b0c4a2e2bed268"><div class="ttname"><a href="structreiserfs__journal__list.html#a62cc70db692abb27f2b0c4a2e2bed268">reiserfs_journal_list::j_commit_left</a></div><div class="ttdeci">atomic_t j_commit_left</div><div class="ttdef"><b>Definition:</b> reiserfs.h:267</div></div>
<div class="ttc" id="reiserfs_8h_html_a09d5f52e00d6dacf0bbcc53e1a2f2a85a094f76523cec885faed273181c7e4440"><div class="ttname"><a href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a094f76523cec885faed273181c7e4440">REISERFS_UNSUPPORTED_OPT</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:714</div></div>
<div class="ttc" id="reiserfs_8h_html_a849778a95da790b103b5f35d542ed7ada7d7243131c21f862c22138cf5ea31426"><div class="ttname"><a href="reiserfs_8h.html#a849778a95da790b103b5f35d542ed7ada7d7243131c21f862c22138cf5ea31426">i_pack_on_close_mask</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:43</div></div>
<div class="ttc" id="reiserfs_8h_html_adfd6277d9be10f5153de97089a202a17"><div class="ttname"><a href="reiserfs_8h.html#adfd6277d9be10f5153de97089a202a17">search_by_entry_key</a></div><div class="ttdeci">int search_by_entry_key(struct super_block *sb, const struct cpu_key *key, struct treepath *path, struct reiserfs_dir_entry *de)</div><div class="ttdef"><b>Definition:</b> namei.c:120</div></div>
<div class="ttc" id="reiserfs_8h_html_ac997796b0f86fd89e9bdb329e10d7b0e"><div class="ttname"><a href="reiserfs_8h.html#ac997796b0f86fd89e9bdb329e10d7b0e">V1_DIRENTRY_UNIQUENESS</a></div><div class="ttdeci">#define V1_DIRENTRY_UNIQUENESS</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1427</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_a8aaaf71c120ba83d0381cde6e91f8afd"><div class="ttname"><a href="structreiserfs__sb__info.html#a8aaaf71c120ba83d0381cde6e91f8afd">reiserfs_sb_info::work_queued</a></div><div class="ttdeci">int work_queued</div><div class="ttdef"><b>Definition:</b> reiserfs.h:621</div></div>
<div class="ttc" id="reiserfs_8h_html_a04406a0dab63afd8218dd8694182ce20"><div class="ttname"><a href="reiserfs_8h.html#a04406a0dab63afd8218dd8694182ce20">set_cpu_key_k_offset</a></div><div class="ttdeci">static void set_cpu_key_k_offset(struct cpu_key *key, loff_t offset)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1592</div></div>
<div class="ttc" id="structreiserfs__dir__entry_html"><div class="ttname"><a href="structreiserfs__dir__entry.html">reiserfs_dir_entry</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:1981</div></div>
<div class="ttc" id="reiserfs_8h_html_a32920826f9d7560603d7102ee6956a31"><div class="ttname"><a href="reiserfs_8h.html#a32920826f9d7560603d7102ee6956a31">reiserfs_paste_into_item</a></div><div class="ttdeci">int reiserfs_paste_into_item(struct reiserfs_transaction_handle *th, struct treepath *path, const struct cpu_key *key, struct inode *inode, const char *body, int paste_size)</div><div class="ttdef"><b>Definition:</b> stree.c:2065</div></div>
<div class="ttc" id="structcpu__key_html_ad7ca5672de26dc398777b13dd7debd85"><div class="ttname"><a href="structcpu__key.html#ad7ca5672de26dc398777b13dd7debd85">cpu_key::on_disk_key</a></div><div class="ttdeci">struct in_core_key on_disk_key</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1307</div></div>
<div class="ttc" id="reiserfs_8h_html_a7660367196176fd0271fe6b1838240f0"><div class="ttname"><a href="reiserfs_8h.html#a7660367196176fd0271fe6b1838240f0">ih_item_len</a></div><div class="ttdeci">#define ih_item_len(ih)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1400</div></div>
<div class="ttc" id="reiserfs_8h_html_ab414c2ad0b7be06a3f25427ce32563db"><div class="ttname"><a href="reiserfs_8h.html#ab414c2ad0b7be06a3f25427ce32563db">comp_items</a></div><div class="ttdeci">int comp_items(const struct item_head *stored_ih, const struct treepath *path)</div><div class="ttdef"><b>Definition:</b> stree.c:907</div></div>
<div class="ttc" id="reiserfs_8h_html_a8c9f52a6d75a5a5857a2d1b1a1a0f8bd"><div class="ttname"><a href="reiserfs_8h.html#a8c9f52a6d75a5a5857a2d1b1a1a0f8bd">pos_in_item</a></div><div class="ttdeci">#define pos_in_item(path)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2139</div></div>
<div class="ttc" id="reiserfs_8h_html_ab34cae05ff7bf82367627d73ebf8d83c"><div class="ttname"><a href="reiserfs_8h.html#ab34cae05ff7bf82367627d73ebf8d83c">reiserfs_init_locked_inode</a></div><div class="ttdeci">int reiserfs_init_locked_inode(struct inode *inode, void *p)</div><div class="ttdef"><b>Definition:</b> inode.c:1529</div></div>
<div class="ttc" id="reiserfs_8h_html_af0039763222cd55a130cb04b227f84b9"><div class="ttname"><a href="reiserfs_8h.html#af0039763222cd55a130cb04b227f84b9">is_indirect_le_ih</a></div><div class="ttdeci">static int is_indirect_le_ih(struct item_head *ih)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1571</div></div>
<div class="ttc" id="struct____reiserfs__blocknr__hint_html_acc6f866987fb82f2412a922744bc1e31"><div class="ttname"><a href="struct____reiserfs__blocknr__hint.html#acc6f866987fb82f2412a922744bc1e31">__reiserfs_blocknr_hint::end</a></div><div class="ttdeci">b_blocknr_t end</div><div class="ttdef"><b>Definition:</b> reiserfs.h:3283</div></div>
<div class="ttc" id="reiserfs_8h_html_a09d5f52e00d6dacf0bbcc53e1a2f2a85a4d61db96dd731b024a039ef80f8255d0"><div class="ttname"><a href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a4d61db96dd731b024a039ef80f8255d0">REISERFS_ERROR_PANIC</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:703</div></div>
<div class="ttc" id="structreiserfs__de__head_html_ab6bac79593505f931e7d7a71e9ee344f"><div class="ttname"><a href="structreiserfs__de__head.html#ab6bac79593505f931e7d7a71e9ee344f">reiserfs_de_head::deh_offset</a></div><div class="ttdeci">__le32 deh_offset</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1886</div></div>
<div class="ttc" id="structreiserfs__list__bitmap_html_a3d0084a7cfe7cf371d6d21d65d39e612"><div class="ttname"><a href="structreiserfs__list__bitmap.html#a3d0084a7cfe7cf371d6d21d65d39e612">reiserfs_list_bitmap::journal_list</a></div><div class="ttdeci">struct reiserfs_journal_list * journal_list</div><div class="ttdef"><b>Definition:</b> reiserfs.h:251</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_ae20a49593fe1e5b03b9999b6f3236119"><div class="ttname"><a href="structreiserfs__sb__info.html#ae20a49593fe1e5b03b9999b6f3236119">reiserfs_sb_info::s_unneeded_left_neighbor</a></div><div class="ttdeci">int s_unneeded_left_neighbor</div><div class="ttdef"><b>Definition:</b> reiserfs.h:594</div></div>
<div class="ttc" id="cifsacl_8h_html_a1d127017fb298b889f4ba24752d08b8e"><div class="ttname"><a href="cifsacl_8h.html#a1d127017fb298b889f4ba24752d08b8e">type</a></div><div class="ttdeci">__le16 type</div><div class="ttdef"><b>Definition:</b> cifsacl.h:1175</div></div>
<div class="ttc" id="structpath__element_html"><div class="ttname"><a href="structpath__element.html">path_element</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:2084</div></div>
<div class="ttc" id="reiserfs_8h_html_a3ef61fb28815592a43e3afd60f91757f"><div class="ttname"><a href="reiserfs_8h.html#a3ef61fb28815592a43e3afd60f91757f">reiserfs_transaction_free_space</a></div><div class="ttdeci">static int reiserfs_transaction_free_space(struct reiserfs_transaction_handle *th)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2905</div></div>
<div class="ttc" id="reiserfs_8h_html_ac7882a6a0112b1cedaedee5b962d35c3"><div class="ttname"><a href="reiserfs_8h.html#ac7882a6a0112b1cedaedee5b962d35c3">comp_le_keys</a></div><div class="ttdeci">int comp_le_keys(const struct reiserfs_key *, const struct reiserfs_key *)</div><div class="ttdef"><b>Definition:</b> stree.c:132</div></div>
<div class="ttc" id="structjournal__params_html_a2e99f81d6c6dd06a1adca2f0443ce85b"><div class="ttname"><a href="structjournal__params.html#a2e99f81d6c6dd06a1adca2f0443ce85b">journal_params::jp_journal_max_commit_age</a></div><div class="ttdeci">__le32 jp_journal_max_commit_age</div><div class="ttdef"><b>Definition:</b> reiserfs.h:968</div></div>
<div class="ttc" id="reiserfs_8h_html_addd83b3b05f4c8ef6a898df8b54655c0"><div class="ttname"><a href="reiserfs_8h.html#addd83b3b05f4c8ef6a898df8b54655c0">bmap_would_wrap</a></div><div class="ttdeci">static int bmap_would_wrap(unsigned bmap_nr)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1166</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_a08884c0d591abe9aced34b010d679c74"><div class="ttname"><a href="structreiserfs__sb__info.html#a08884c0d591abe9aced34b010d679c74">reiserfs_sb_info::large_file_size</a></div><div class="ttdeci">unsigned long large_file_size</div><div class="ttdef"><b>Definition:</b> reiserfs.h:563</div></div>
<div class="ttc" id="structvirtual__item_html_a9fb0534d5a045d332f81d75c608345b4"><div class="ttname"><a href="structvirtual__item.html#a9fb0534d5a045d332f81d75c608345b4">virtual_item::vi_item</a></div><div class="ttdeci">const char * vi_item</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2342</div></div>
<div class="ttc" id="reiserfs_8h_html_a849778a95da790b103b5f35d542ed7ada9e620b4b5a2a3a522c3a7c7391100c2f"><div class="ttname"><a href="reiserfs_8h.html#a849778a95da790b103b5f35d542ed7ada9e620b4b5a2a3a522c3a7c7391100c2f">i_has_xattr_dir</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:56</div></div>
<div class="ttc" id="structreiserfs__journal_html_af85746a72811ebbc4066f871f9584890"><div class="ttname"><a href="structreiserfs__journal.html#af85746a72811ebbc4066f871f9584890">reiserfs_journal::j_join_wait</a></div><div class="ttdeci">wait_queue_head_t j_join_wait</div><div class="ttdef"><b>Definition:</b> reiserfs.h:339</div></div>
<div class="ttc" id="reiserfs_8h_html_a3ae286f67fc60881b96ec93781936062"><div class="ttname"><a href="reiserfs_8h.html#a3ae286f67fc60881b96ec93781936062">make_empty_node</a></div><div class="ttdeci">void make_empty_node(struct buffer_info *)</div><div class="ttdef"><b>Definition:</b> do_balan.c:1479</div></div>
<div class="ttc" id="reiserfs_8h_html_a849778a95da790b103b5f35d542ed7ada836422b68b3137896c8f62210f46c443"><div class="ttname"><a href="reiserfs_8h.html#a849778a95da790b103b5f35d542ed7ada836422b68b3137896c8f62210f46c443">i_link_saved_truncate_mask</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:54</div></div>
<div class="ttc" id="structreiserfs__list__bitmap_html_a760817c992d1deeb78b6bfe4c7ab2421"><div class="ttname"><a href="structreiserfs__list__bitmap.html#a760817c992d1deeb78b6bfe4c7ab2421">reiserfs_list_bitmap::bitmaps</a></div><div class="ttdeci">struct reiserfs_bitmap_node ** bitmaps</div><div class="ttdef"><b>Definition:</b> reiserfs.h:252</div></div>
<div class="ttc" id="structreiserfs__journal_html_a041afb7d61a4c9182e92c5e54b501bac"><div class="ttname"><a href="structreiserfs__journal.html#a041afb7d61a4c9182e92c5e54b501bac">reiserfs_journal::j_cnode_used</a></div><div class="ttdeci">int j_cnode_used</div><div class="ttdef"><b>Definition:</b> reiserfs.h:353</div></div>
<div class="ttc" id="reiserfs_8h_html_a3f4fd21bda4c7e9487b7275dbee329c4"><div class="ttname"><a href="reiserfs_8h.html#a3f4fd21bda4c7e9487b7275dbee329c4">reiserfs_evict_inode</a></div><div class="ttdeci">void reiserfs_evict_inode(struct inode *inode)</div><div class="ttdef"><b>Definition:</b> inode.c:27</div></div>
<div class="ttc" id="reiserfs_8h_html_a09d5f52e00d6dacf0bbcc53e1a2f2a85a1847249aa868d633efc07e16aabab8b4"><div class="ttname"><a href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a1847249aa868d633efc07e16aabab8b4">FORCE_HASH_DETECT</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:680</div></div>
<div class="ttc" id="reiserfs_8h_html_a64ad01856524b1024f02138ac5262795"><div class="ttname"><a href="reiserfs_8h.html#a64ad01856524b1024f02138ac5262795">reiserfs_address_space_operations</a></div><div class="ttdeci">const struct address_space_operations reiserfs_address_space_operations</div><div class="ttdef"><b>Definition:</b> inode.c:3425</div></div>
<div class="ttc" id="reiserfs_8h_html_ada4b23eb1c816283b3fb7a3c249fbf54"><div class="ttname"><a href="reiserfs_8h.html#ada4b23eb1c816283b3fb7a3c249fbf54">reiserfs_discard_prealloc</a></div><div class="ttdeci">void reiserfs_discard_prealloc(struct reiserfs_transaction_handle *th, struct inode *inode)</div><div class="ttdef"><b>Definition:</b> bitmap.c:536</div></div>
<div class="ttc" id="reiserfs_8h_html_a2a3acf57dd79e917a2677f5515dff21fa76394ac72e895b1293ac59e644e3f95b"><div class="ttname"><a href="reiserfs_8h.html#a2a3acf57dd79e917a2677f5515dff21fa76394ac72e895b1293ac59e644e3f95b">BH_JRestore_dirty</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:2826</div></div>
<div class="ttc" id="reiserfs_8h_html_a2441673e8b4e42908a8f4abb3c78d010"><div class="ttname"><a href="reiserfs_8h.html#a2441673e8b4e42908a8f4abb3c78d010">reiserfs_setattr</a></div><div class="ttdeci">int reiserfs_setattr(struct dentry *dentry, struct iattr *attr)</div><div class="ttdef"><b>Definition:</b> inode.c:3281</div></div>
<div class="ttc" id="structreiserfs__journal__list_html_ad4407cbd60265908d2c96e94e9e310b6"><div class="ttname"><a href="structreiserfs__journal__list.html#ad4407cbd60265908d2c96e94e9e310b6">reiserfs_journal_list::j_nonzerolen</a></div><div class="ttdeci">atomic_t j_nonzerolen</div><div class="ttdef"><b>Definition:</b> reiserfs.h:266</div></div>
<div class="ttc" id="reiserfs_8h_html_ace348e797d04fe00030103c8ae5c1081"><div class="ttname"><a href="reiserfs_8h.html#ace348e797d04fe00030103c8ae5c1081">reiserfs_delete_object</a></div><div class="ttdeci">int reiserfs_delete_object(struct reiserfs_transaction_handle *th, struct inode *inode)</div><div class="ttdef"><b>Definition:</b> stree.c:1477</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_abdcebcd505f633ee7332680a57c3a6d1"><div class="ttname"><a href="structreiserfs__sb__info.html#abdcebcd505f633ee7332680a57c3a6d1">reiserfs_sb_info::s_good_search_by_key_reada</a></div><div class="ttdeci">int s_good_search_by_key_reada</div><div class="ttdef"><b>Definition:</b> reiserfs.h:595</div></div>
<div class="ttc" id="structtree__balance_html_ae45a9eb9452a1381786920ba3924358f"><div class="ttname"><a href="structtree__balance.html#ae45a9eb9452a1381786920ba3924358f">tree_balance::item_pos</a></div><div class="ttdeci">int item_pos</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2499</div></div>
<div class="ttc" id="structstat__data_html_a74d013cbaa0ae4220a0968e383a18088"><div class="ttname"><a href="structstat__data.html#a74d013cbaa0ae4220a0968e383a18088">stat_data::sd_generation</a></div><div class="ttdeci">__le32 sd_generation</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1813</div></div>
<div class="ttc" id="structjournal__params_html_a78c6afcbd1ea280cb8061b6aeb9f4fcf"><div class="ttname"><a href="structjournal__params.html#a78c6afcbd1ea280cb8061b6aeb9f4fcf">journal_params::jp_journal_1st_block</a></div><div class="ttdeci">__le32 jp_journal_1st_block</div><div class="ttdef"><b>Definition:</b> reiserfs.h:947</div></div>
<div class="ttc" id="reiserfs_8h_html_a6d1761c8e1733df0ffcb6574cc7af0ba"><div class="ttname"><a href="reiserfs_8h.html#a6d1761c8e1733df0ffcb6574cc7af0ba">le_key_k_type</a></div><div class="ttdeci">static loff_t le_key_k_type(int version, const struct reiserfs_key *key)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1485</div></div>
<div class="ttc" id="adfs_8h_html_a0cf5f0ccb15b6e951fd1b6af112439e1"><div class="ttname"><a href="adfs_8h.html#a0cf5f0ccb15b6e951fd1b6af112439e1">fmt</a></div><div class="ttdeci">const char const char * fmt</div><div class="ttdef"><b>Definition:</b> adfs.h:158</div></div>
<div class="ttc" id="structreiserfs__super__block__v1_html_a196aae185d7bf6599d01cac8fae07f67"><div class="ttname"><a href="structreiserfs__super__block__v1.html#a196aae185d7bf6599d01cac8fae07f67">reiserfs_super_block_v1::s_free_blocks</a></div><div class="ttdeci">__le32 s_free_blocks</div><div class="ttdef"><b>Definition:</b> reiserfs.h:977</div></div>
<div class="ttc" id="reiserfs_8h_html_a3db5cba730cc38df9598c82ed079cb38"><div class="ttname"><a href="reiserfs_8h.html#a3db5cba730cc38df9598c82ed079cb38">reiserfs_hashname</a></div><div class="ttdeci">char * reiserfs_hashname(int code)</div><div class="ttdef"><b>Definition:</b> prints.c:512</div></div>
<div class="ttc" id="structreiserfs__journal__list_html_ab88e10199e5d2aa3805b0c8170dafd84"><div class="ttname"><a href="structreiserfs__journal__list.html#ab88e10199e5d2aa3805b0c8170dafd84">reiserfs_journal_list::j_trans_id</a></div><div class="ttdeci">unsigned int j_trans_id</div><div class="ttdef"><b>Definition:</b> reiserfs.h:273</div></div>
<div class="ttc" id="struct____reiserfs__blocknr__hint_html_a65214f06dc34fa15e6efb6eb5962e6e6"><div class="ttname"><a href="struct____reiserfs__blocknr__hint.html#a65214f06dc34fa15e6efb6eb5962e6e6">__reiserfs_blocknr_hint::formatted_node</a></div><div class="ttdeci">unsigned formatted_node</div><div class="ttdef"><b>Definition:</b> reiserfs.h:3302</div></div>
<div class="ttc" id="reiserfs_8h_html_a7a18eb87edf9b13864eadf32bccd747d"><div class="ttname"><a href="reiserfs_8h.html#a7a18eb87edf9b13864eadf32bccd747d">cpu_key_k_offset</a></div><div class="ttdeci">static loff_t cpu_key_k_offset(const struct cpu_key *key)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1582</div></div>
<div class="ttc" id="structreiserfs__inode__info_html_aad8e400d8cd5866bedaade711ced03f9"><div class="ttname"><a href="structreiserfs__inode__info.html#aad8e400d8cd5866bedaade711ced03f9">reiserfs_inode_info::i_prealloc_block</a></div><div class="ttdeci">int i_prealloc_block</div><div class="ttdef"><b>Definition:</b> reiserfs.h:76</div></div>
<div class="ttc" id="reiserfs_8h_html_a3821112b18f4886e48afd975b23ab46b"><div class="ttname"><a href="reiserfs_8h.html#a3821112b18f4886e48afd975b23ab46b">is_reiserfs_3_6</a></div><div class="ttdeci">int is_reiserfs_3_6(struct reiserfs_super_block *rs)</div><div class="ttdef"><b>Definition:</b> super.c:46</div></div>
<div class="ttc" id="ctree_8h_html_a370d10a726e7596cd6c17d656fa8c8ad"><div class="ttname"><a href="ctree_8h.html#a370d10a726e7596cd6c17d656fa8c8ad">size</a></div><div class="ttdeci">__le32 size</div><div class="ttdef"><b>Definition:</b> ctree.h:107</div></div>
<div class="ttc" id="structstat__data__v1_html_ad3cb0b64c8ab7bcb584fbaafa8568aef"><div class="ttname"><a href="structstat__data__v1.html#ad3cb0b64c8ab7bcb584fbaafa8568aef">stat_data_v1::sd_blocks</a></div><div class="ttdeci">__le32 sd_blocks</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1726</div></div>
<div class="ttc" id="structreiserfs__journal_html_a30f1b8996be3ad8838a2f81745dafb93"><div class="ttname"><a href="structreiserfs__journal.html#a30f1b8996be3ad8838a2f81745dafb93">reiserfs_journal::j_first_unflushed_offset</a></div><div class="ttdeci">unsigned long j_first_unflushed_offset</div><div class="ttdef"><b>Definition:</b> reiserfs.h:327</div></div>
<div class="ttc" id="structstat__data_html_a5a816a78a1873ddcbfda5137c699622b"><div class="ttname"><a href="structstat__data.html#a5a816a78a1873ddcbfda5137c699622b">stat_data::sd_atime</a></div><div class="ttdeci">__le32 sd_atime</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1802</div></div>
<div class="ttc" id="reiserfs_8h_html_a2ca7bbf03268b5169d45c11dd78c4ee2"><div class="ttname"><a href="reiserfs_8h.html#a2ca7bbf03268b5169d45c11dd78c4ee2">leaf_key</a></div><div class="ttdeci">static struct reiserfs_key * leaf_key(const struct buffer_head *bh, int item_num)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2206</div></div>
<div class="ttc" id="reiserfs_8h_html_a2fe27e28adb6691e527556cb976b4eaa"><div class="ttname"><a href="reiserfs_8h.html#a2fe27e28adb6691e527556cb976b4eaa">check_leaf</a></div><div class="ttdeci">void check_leaf(struct buffer_head *bh)</div><div class="ttdef"><b>Definition:</b> prints.c:744</div></div>
<div class="ttc" id="structreiserfs__super__block_html"><div class="ttname"><a href="structreiserfs__super__block.html">reiserfs_super_block</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:1028</div></div>
<div class="ttc" id="reiserfs_8h_html_acc11245ca051ca832e4d6a5a1e2b4739"><div class="ttname"><a href="reiserfs_8h.html#acc11245ca051ca832e4d6a5a1e2b4739">add_save_link</a></div><div class="ttdeci">void add_save_link(struct reiserfs_transaction_handle *th, struct inode *inode, int truncate)</div><div class="ttdef"><b>Definition:</b> super.c:429</div></div>
<div class="ttc" id="reiserfs_8h_html_a05b20d0d23fc98b593f6c68574395ed1"><div class="ttname"><a href="reiserfs_8h.html#a05b20d0d23fc98b593f6c68574395ed1">cpu_key_k_type</a></div><div class="ttdeci">static loff_t cpu_key_k_type(const struct cpu_key *key)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1587</div></div>
<div class="ttc" id="reiserfs_8h_html_a09d5f52e00d6dacf0bbcc53e1a2f2a85ae95aecc46eecaad09ff7eafc53721bde"><div class="ttname"><a href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85ae95aecc46eecaad09ff7eafc53721bde">REISERFS_NO_BORDER</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:692</div></div>
<div class="ttc" id="reiserfs_8h_html_afcc8c6aec0ae67fbfd708896dab893b4"><div class="ttname"><a href="reiserfs_8h.html#afcc8c6aec0ae67fbfd708896dab893b4">reiserfs_data_log</a></div><div class="ttdeci">#define reiserfs_data_log(s)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:732</div></div>
<div class="ttc" id="reiserfs_8h_html_a665f4e791864e9849723ec7eff5c7d3a"><div class="ttname"><a href="reiserfs_8h.html#a665f4e791864e9849723ec7eff5c7d3a">comp_short_keys</a></div><div class="ttdeci">int comp_short_keys(const struct reiserfs_key *le_key, const struct cpu_key *cpu_key)</div><div class="ttdef"><b>Definition:</b> stree.c:44</div></div>
<div class="ttc" id="structreiserfs__inode__info_html_a242e3200b7b8d64c221c38452017a6e6"><div class="ttname"><a href="structreiserfs__inode__info.html#a242e3200b7b8d64c221c38452017a6e6">reiserfs_inode_info::i_attrs</a></div><div class="ttdeci">__u32 i_attrs</div><div class="ttdef"><b>Definition:</b> reiserfs.h:73</div></div>
<div class="ttc" id="structtreepath_html_a4629ffff122cc7c97bba374493ea3357"><div class="ttname"><a href="structtreepath.html#a4629ffff122cc7c97bba374493ea3357">treepath::reada</a></div><div class="ttdeci">int reada</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2133</div></div>
<div class="ttc" id="reiserfs_8h_html_a61e8fcfb3c4c70f92fafb62576f46fde"><div class="ttname"><a href="reiserfs_8h.html#a61e8fcfb3c4c70f92fafb62576f46fde">reiserfs_restore_prepared_buffer</a></div><div class="ttdeci">void reiserfs_restore_prepared_buffer(struct super_block *, struct buffer_head *bh)</div><div class="ttdef"><b>Definition:</b> journal.c:3919</div></div>
<div class="ttc" id="reiserfs_8h_html_aac8a37cf4d6613e972331737d06b76cd"><div class="ttname"><a href="reiserfs_8h.html#aac8a37cf4d6613e972331737d06b76cd">journal_release_error</a></div><div class="ttdeci">int journal_release_error(struct reiserfs_transaction_handle *, struct super_block *)</div><div class="ttdef"><b>Definition:</b> journal.c:1984</div></div>
<div class="ttc" id="structreiserfs__super__block__v1_html_adeffb42489b7837e0f3c8334a055df75"><div class="ttname"><a href="structreiserfs__super__block__v1.html#adeffb42489b7837e0f3c8334a055df75">reiserfs_super_block_v1::s_hash_function_code</a></div><div class="ttdeci">__le32 s_hash_function_code</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1004</div></div>
<div class="ttc" id="structreiserfs__journal__cnode_html"><div class="ttname"><a href="structreiserfs__journal__cnode.html">reiserfs_journal_cnode</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:226</div></div>
<div class="ttc" id="structitem__operations_html"><div class="ttname"><a href="structitem__operations.html">item_operations</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:2626</div></div>
<div class="ttc" id="structreiserfs__journal_html_a9f087ce1da2cf35db2c13bbc217bff62"><div class="ttname"><a href="structreiserfs__journal.html#a9f087ce1da2cf35db2c13bbc217bff62">reiserfs_journal::j_ap_blocks</a></div><div class="ttdeci">struct buffer_head ** j_ap_blocks</div><div class="ttdef"><b>Definition:</b> reiserfs.h:297</div></div>
<div class="ttc" id="structreiserfs__journal_html_a12fa9a9252dc49e678771f862d025fa0"><div class="ttname"><a href="structreiserfs__journal.html#a12fa9a9252dc49e678771f862d025fa0">reiserfs_journal::j_default_max_commit_age</a></div><div class="ttdeci">unsigned int j_default_max_commit_age</div><div class="ttdef"><b>Definition:</b> reiserfs.h:369</div></div>
<div class="ttc" id="reiserfs_8h_html_a217596f2d243c107da5efba998900f0a"><div class="ttname"><a href="reiserfs_8h.html#a217596f2d243c107da5efba998900f0a">internal_key</a></div><div class="ttdeci">static struct reiserfs_key * internal_key(struct buffer_head *bh, int item_num)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2188</div></div>
<div class="ttc" id="reiserfs_8h_html_a4a68f7df26b1ccb85d562eb99d4bbb4c"><div class="ttname"><a href="reiserfs_8h.html#a4a68f7df26b1ccb85d562eb99d4bbb4c">make_empty_dir_item_v1</a></div><div class="ttdeci">void make_empty_dir_item_v1(char *body, __le32 dirid, __le32 objid, __le32 par_dirid, __le32 par_objid)</div><div class="ttdef"><b>Definition:</b> dir.c:281</div></div>
<div class="ttc" id="struct____reiserfs__blocknr__hint_html_abc10e97169be18d92579bb1b2b5d6aae"><div class="ttname"><a href="struct____reiserfs__blocknr__hint.html#abc10e97169be18d92579bb1b2b5d6aae">__reiserfs_blocknr_hint::inode</a></div><div class="ttdeci">struct inode * inode</div><div class="ttdef"><b>Definition:</b> reiserfs.h:3266</div></div>
<div class="ttc" id="struct____reiserfs__blocknr__hint_html_a4305cb8f985e737fca060c9f9f6e000d"><div class="ttname"><a href="struct____reiserfs__blocknr__hint.html#a4305cb8f985e737fca060c9f9f6e000d">__reiserfs_blocknr_hint::preallocate</a></div><div class="ttdeci">unsigned preallocate</div><div class="ttdef"><b>Definition:</b> reiserfs.h:3303</div></div>
<div class="ttc" id="reiserfs_8h_html_ac8a69c96fa8ad0c9303aa2331f3dc5d3"><div class="ttname"><a href="reiserfs_8h.html#ac8a69c96fa8ad0c9303aa2331f3dc5d3">is_direct_le_ih</a></div><div class="ttdeci">static int is_direct_le_ih(struct item_head *ih)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1566</div></div>
<div class="ttc" id="reiserfs_8h_html_a0159ef9841f33716a8c68876a913f800"><div class="ttname"><a href="reiserfs_8h.html#a0159ef9841f33716a8c68876a913f800">s_unused</a></div><div class="ttdeci">char s_unused[76]</div><div class="ttdef"><b>Definition:</b> reiserfs.h:919</div></div>
<div class="ttc" id="reiserfs_8h_html_ab648f2f3bae0aaef3770bcb18289e0dc"><div class="ttname"><a href="reiserfs_8h.html#ab648f2f3bae0aaef3770bcb18289e0dc">is_direntry_le_ih</a></div><div class="ttdeci">static int is_direntry_le_ih(struct item_head *ih)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1561</div></div>
<div class="ttc" id="structreiserfs__transaction__handle_html"><div class="ttname"><a href="structreiserfs__transaction__handle.html">reiserfs_transaction_handle</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:2844</div></div>
<div class="ttc" id="structtree__balance_html_a7ef1a5e1112d1b3974d9c09df7f451fc"><div class="ttname"><a href="structtree__balance.html#a7ef1a5e1112d1b3974d9c09df7f451fc">tree_balance::cur_blknum</a></div><div class="ttdeci">int cur_blknum</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2475</div></div>
<div class="ttc" id="structreiserfs__journal__cnode_html_a173a8571530dedd37d219e19b791977b"><div class="ttname"><a href="structreiserfs__journal__cnode.html#a173a8571530dedd37d219e19b791977b">reiserfs_journal_cnode::bh</a></div><div class="ttdeci">struct buffer_head * bh</div><div class="ttdef"><b>Definition:</b> reiserfs.h:227</div></div>
<div class="ttc" id="structreiserfs__dir__entry_html_a9a35fb05122f067abcf6189c2e95876d"><div class="ttname"><a href="structreiserfs__dir__entry.html#a9a35fb05122f067abcf6189c2e95876d">reiserfs_dir_entry::de_dir_id</a></div><div class="ttdeci">__u32 de_dir_id</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1992</div></div>
<div class="ttc" id="structreiserfs__journal__list_html_a828da12b70cae73d79902525dfa598ab"><div class="ttname"><a href="structreiserfs__journal__list.html#a828da12b70cae73d79902525dfa598ab">reiserfs_journal_list::j_state</a></div><div class="ttdeci">unsigned long j_state</div><div class="ttdef"><b>Definition:</b> reiserfs.h:264</div></div>
<div class="ttc" id="reiserfs_8h_html_a09d5f52e00d6dacf0bbcc53e1a2f2a85ae19d19a04028eb19cb47ffe9c4adabbe"><div class="ttname"><a href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85ae19d19a04028eb19cb47ffe9c4adabbe">REISERFS_POSIXACL</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:697</div></div>
<div class="ttc" id="reiserfs_8h_html_ab1c250d9d7e8ed1d5d36b4f395167b68"><div class="ttname"><a href="reiserfs_8h.html#ab1c250d9d7e8ed1d5d36b4f395167b68">reiserfs_down_read_safe</a></div><div class="ttdeci">static void reiserfs_down_read_safe(struct rw_semaphore *sem, struct super_block *s)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:832</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_accb3b002b63b76fd072246c3c72ba0ec"><div class="ttname"><a href="structreiserfs__sb__info.html#accb3b002b63b76fd072246c3c72ba0ec">reiserfs_sb_info::s_disk_reads</a></div><div class="ttdeci">int s_disk_reads</div><div class="ttdef"><b>Definition:</b> reiserfs.h:590</div></div>
<div class="ttc" id="reiserfs_8h_html_abecc4f6ccf3ea24d7c84b1732769f8c2"><div class="ttname"><a href="reiserfs_8h.html#abecc4f6ccf3ea24d7c84b1732769f8c2">le_key_k_offset</a></div><div class="ttdeci">static loff_t le_key_k_offset(int version, const struct reiserfs_key *key)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1472</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_afc33b967bef86fd629293f55590fa163"><div class="ttname"><a href="structreiserfs__sb__info.html#afc33b967bef86fd629293f55590fa163">reiserfs_sb_info::s_indirect2direct</a></div><div class="ttdeci">int s_indirect2direct</div><div class="ttdef"><b>Definition:</b> reiserfs.h:599</div></div>
<div class="ttc" id="protocol_8h_html_ad56754751edde9686250d5005b525abf"><div class="ttname"><a href="protocol_8h.html#ad56754751edde9686250d5005b525abf">u</a></div><div class="ttdeci">unsigned char u[16]</div><div class="ttdef"><b>Definition:</b> protocol.h:31</div></div>
<div class="ttc" id="reiserfs_8h_html_a53836a0a2c703d953f241e93c547a97b"><div class="ttname"><a href="reiserfs_8h.html#a53836a0a2c703d953f241e93c547a97b">reiserfs_proc_info_global_done</a></div><div class="ttdeci">static int reiserfs_proc_info_global_done(void)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:3147</div></div>
<div class="ttc" id="structreiserfs__super__block__v1_html_a44ae0fe3d1963322409a75513a80ea63"><div class="ttname"><a href="structreiserfs__super__block__v1.html#a44ae0fe3d1963322409a75513a80ea63">reiserfs_super_block_v1::s_bmap_nr</a></div><div class="ttdeci">__le16 s_bmap_nr</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1011</div></div>
<div class="ttc" id="structcpu__key_html_a9cd532834a43c0309eb927b8e35e69bf"><div class="ttname"><a href="structcpu__key.html#a9cd532834a43c0309eb927b8e35e69bf">cpu_key::version</a></div><div class="ttdeci">int version</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1308</div></div>
<div class="ttc" id="structvirtual__item_html_a4660ac2f654b830163df7a514a2bfaaa"><div class="ttname"><a href="structvirtual__item.html#a4660ac2f654b830163df7a514a2bfaaa">virtual_item::vi_index</a></div><div class="ttdeci">int vi_index</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2335</div></div>
<div class="ttc" id="reiserfs_2bitmap_8c_html_a07606fb68673f63ac428d55149dd8842"><div class="ttname"><a href="reiserfs_2bitmap_8c.html#a07606fb68673f63ac428d55149dd8842">scan_bitmap</a></div><div class="ttdeci">static int scan_bitmap(struct reiserfs_transaction_handle *th, b_blocknr_t *start, b_blocknr_t finish, int min, int max, int unfm, sector_t file_block)</div><div class="ttdef"><b>Definition:</b> bitmap.c:347</div></div>
<div class="ttc" id="structreiserfs__journal__list_html_a4ced38506f62d32a5e1f20f0303fc1ad"><div class="ttname"><a href="structreiserfs__journal__list.html#a4ced38506f62d32a5e1f20f0303fc1ad">reiserfs_journal_list::j_start</a></div><div class="ttdeci">unsigned long j_start</div><div class="ttdef"><b>Definition:</b> reiserfs.h:263</div></div>
<div class="ttc" id="reiserfs_8h_html_a0cb8ef687ab28c192c4d55c57769e84b"><div class="ttname"><a href="reiserfs_8h.html#a0cb8ef687ab28c192c4d55c57769e84b">reiserfs_free_block</a></div><div class="ttdeci">void reiserfs_free_block(struct reiserfs_transaction_handle *th, struct inode *, b_blocknr_t, int for_unformatted)</div><div class="ttdef"><b>Definition:</b> bitmap.c:467</div></div>
<div class="ttc" id="reiserfs_8h_html_ad0284bb396d6005ec72c7b62ebaf9eb6"><div class="ttname"><a href="reiserfs_8h.html#ad0284bb396d6005ec72c7b62ebaf9eb6">B_I_DEH</a></div><div class="ttdeci">#define B_I_DEH(bh, ih)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2241</div></div>
<div class="ttc" id="reiserfs_8h_html_ac30be6cab8741cba91969f4155380c08"><div class="ttname"><a href="reiserfs_8h.html#ac30be6cab8741cba91969f4155380c08">reiserfs_wait_on_write_block</a></div><div class="ttdeci">void reiserfs_wait_on_write_block(struct super_block *s)</div><div class="ttdef"><b>Definition:</b> journal.c:2951</div></div>
<div class="ttc" id="reiserfs_8h_html_a09d5f52e00d6dacf0bbcc53e1a2f2a85a5a77c8c90431d37ed9227a7d5d6388b9"><div class="ttname"><a href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a5a77c8c90431d37ed9227a7d5d6388b9">REISERFS_DATA_ORDERED</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:683</div></div>
<div class="ttc" id="reiserfs_8h_html_ad500ee6be538ab9e5e4c4782444949a9"><div class="ttname"><a href="reiserfs_8h.html#ad500ee6be538ab9e5e4c4782444949a9">is_indirect_le_key</a></div><div class="ttdeci">static int is_indirect_le_key(int version, struct reiserfs_key *key)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1550</div></div>
<div class="ttc" id="structreiserfs__iget__args_html_a86a910f9d2dfb584992bacbb125f4c45"><div class="ttname"><a href="structreiserfs__iget__args.html#a86a910f9d2dfb584992bacbb125f4c45">reiserfs_iget_args::dirid</a></div><div class="ttdeci">__u32 dirid</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2693</div></div>
<div class="ttc" id="reiserfs_8h_html_a849778a95da790b103b5f35d542ed7ada22f5a71b656263a6d2745f80abcf3428"><div class="ttname"><a href="reiserfs_8h.html#a849778a95da790b103b5f35d542ed7ada22f5a71b656263a6d2745f80abcf3428">i_link_saved_unlink_mask</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:53</div></div>
<div class="ttc" id="reiserfs_8h_html_ad3c7e03645c81c346bdc0038446d2d57"><div class="ttname"><a href="reiserfs_8h.html#ad3c7e03645c81c346bdc0038446d2d57">reiserfs_write_inode</a></div><div class="ttdeci">int reiserfs_write_inode(struct inode *inode, struct writeback_control *wbc)</div><div class="ttdef"><b>Definition:</b> inode.c:1774</div></div>
<div class="ttc" id="ctree_8h_html_aa5cdcfb6e464dcdd3cbfed516d65d07c"><div class="ttname"><a href="ctree_8h.html#aa5cdcfb6e464dcdd3cbfed516d65d07c">errno</a></div><div class="ttdeci">const char unsigned int int errno</div><div class="ttdef"><b>Definition:</b> ctree.h:3535</div></div>
<div class="ttc" id="reiserfs_8h_html_aa31f16f82da823ae1a1d134eb32de408"><div class="ttname"><a href="reiserfs_8h.html#aa31f16f82da823ae1a1d134eb32de408">reiserfs_end_persistent_transaction</a></div><div class="ttdeci">int reiserfs_end_persistent_transaction(struct reiserfs_transaction_handle *)</div><div class="ttdef"><b>Definition:</b> journal.c:3173</div></div>
<div class="ttc" id="structreiserfs__journal_html_ae8ab100a847cd727ff6ad9d689ef0c19"><div class="ttname"><a href="structreiserfs__journal.html#ae8ab100a847cd727ff6ad9d689ef0c19">reiserfs_journal::j_max_batch_size</a></div><div class="ttdeci">unsigned long j_max_batch_size</div><div class="ttdef"><b>Definition:</b> reiserfs.h:412</div></div>
<div class="ttc" id="reiserfs_8h_html_ab00b28e7e3b96c332b8ee507dd8a8904"><div class="ttname"><a href="reiserfs_8h.html#ab00b28e7e3b96c332b8ee507dd8a8904">reiserfs_flush_old_commits</a></div><div class="ttdeci">void reiserfs_flush_old_commits(struct super_block *)</div><div class="ttdef"><b>Definition:</b> journal.c:3557</div></div>
<div class="ttc" id="reiserfs_8h_html_afded4ce13cca5cb1e71a811a5fa5607d"><div class="ttname"><a href="reiserfs_8h.html#afded4ce13cca5cb1e71a811a5fa5607d">reiserfs_file_inode_operations</a></div><div class="ttdeci">const struct inode_operations reiserfs_file_inode_operations</div><div class="ttdef"><b>Definition:</b> file.c:261</div></div>
<div class="ttc" id="structreiserfs__journal_html_afdfa651e6aef38bbc94787ec93ce228c"><div class="ttname"><a href="structreiserfs__journal.html#afdfa651e6aef38bbc94787ec93ce228c">reiserfs_journal::j_max_trans_size</a></div><div class="ttdeci">unsigned long j_max_trans_size</div><div class="ttdef"><b>Definition:</b> reiserfs.h:411</div></div>
<div class="ttc" id="structreiserfs__journal_html_accd86f8f6df0d07f7733e4ea37455a91"><div class="ttname"><a href="structreiserfs__journal.html#accd86f8f6df0d07f7733e4ea37455a91">reiserfs_journal::j_trans_id</a></div><div class="ttdeci">unsigned int j_trans_id</div><div class="ttdef"><b>Definition:</b> reiserfs.h:311</div></div>
<div class="ttc" id="structtree__balance_html_a9946364826c7943514195041c43d6168"><div class="ttname"><a href="structtree__balance.html#a9946364826c7943514195041c43d6168">tree_balance::zeroes_num</a></div><div class="ttdeci">int zeroes_num</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2517</div></div>
<div class="ttc" id="structbuffer__info_html_aa064f343deeaec56db8b2c713b00ec1f"><div class="ttname"><a href="structbuffer__info.html#aa064f343deeaec56db8b2c713b00ec1f">buffer_info::bi_parent</a></div><div class="ttdeci">struct buffer_head * bi_parent</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2592</div></div>
<div class="ttc" id="structreiserfs__journal_html_a85bceff7c9faea1d9ec35fb0edd15a23"><div class="ttname"><a href="structreiserfs__journal.html#a85bceff7c9faea1d9ec35fb0edd15a23">reiserfs_journal::j_jlock</a></div><div class="ttdeci">atomic_t j_jlock</div><div class="ttdef"><b>Definition:</b> reiserfs.h:341</div></div>
<div class="ttc" id="reiserfs_8h_html_a89e926209197f65221f777a74feeab88"><div class="ttname"><a href="reiserfs_8h.html#a89e926209197f65221f777a74feeab88">leaf_cut_from_buffer</a></div><div class="ttdeci">void leaf_cut_from_buffer(struct buffer_info *bi, int cut_item_num, int pos_in_item, int cut_size)</div><div class="ttdef"><b>Definition:</b> lbalance.c:1145</div></div>
<div class="ttc" id="reiserfs_8h_html_a09be0d4c5e1599b93afaa63f39fcb1b7"><div class="ttname"><a href="reiserfs_8h.html#a09be0d4c5e1599b93afaa63f39fcb1b7">reiserfs_update_sd_size</a></div><div class="ttdeci">void reiserfs_update_sd_size(struct reiserfs_transaction_handle *th, struct inode *inode, loff_t size)</div><div class="ttdef"><b>Definition:</b> inode.c:1446</div></div>
<div class="ttc" id="reiserfs_8h_html_a8603f71d52465b85aaf7309890b3bb0c"><div class="ttname"><a href="reiserfs_8h.html#a8603f71d52465b85aaf7309890b3bb0c">check_internal</a></div><div class="ttdeci">void check_internal(struct buffer_head *bh)</div><div class="ttdef"><b>Definition:</b> prints.c:756</div></div>
<div class="ttc" id="reiserfs_8h_html_a2d80aa8ba0d240a470389ccc91f78864"><div class="ttname"><a href="reiserfs_8h.html#a2d80aa8ba0d240a470389ccc91f78864">get_FEB</a></div><div class="ttdeci">struct buffer_head * get_FEB(struct tree_balance *)</div><div class="ttdef"><b>Definition:</b> do_balan.c:1494</div></div>
<div class="ttc" id="reiserfs_8h_html_a4fb8029f56b0549c6993d84dd1418a9b"><div class="ttname"><a href="reiserfs_8h.html#a4fb8029f56b0549c6993d84dd1418a9b">reiserfs_abort_journal</a></div><div class="ttdeci">void reiserfs_abort_journal(struct super_block *sb, int errno)</div><div class="ttdef"><b>Definition:</b> journal.c:4387</div></div>
<div class="ttc" id="structtree__balance_html_ae55246757bcccd60505d87d00f99ebf4"><div class="ttname"><a href="structtree__balance.html#ae55246757bcccd60505d87d00f99ebf4">tree_balance::tb_path</a></div><div class="ttdeci">struct treepath * tb_path</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2409</div></div>
<div class="ttc" id="structreiserfs__proc__info__data_html"><div class="ttname"><a href="structreiserfs__proc__info__data.html">reiserfs_proc_info_data</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:510</div></div>
<div class="ttc" id="reiserfs_8h_html_a70b154acbe6ea2bc404348439c7b8114"><div class="ttname"><a href="reiserfs_8h.html#a70b154acbe6ea2bc404348439c7b8114">remove_save_link</a></div><div class="ttdeci">int remove_save_link(struct inode *inode, int truncate)</div><div class="ttdef"><b>Definition:</b> super.c:510</div></div>
<div class="ttc" id="struct____attribute_____html"><div class="ttname"><a href="struct____attribute____.html">__attribute__</a></div><div class="ttdef"><b>Definition:</b> cifspdu.h:2154</div></div>
<div class="ttc" id="reiserfs_8h_html_a38bdab97ac511f3bb9e19f2e511d2066"><div class="ttname"><a href="reiserfs_8h.html#a38bdab97ac511f3bb9e19f2e511d2066">k_dir_id</a></div><div class="ttdeci">__le32 k_dir_id</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1279</div></div>
<div class="ttc" id="structjournal__params_html_ac2757d6b4520417356ca6373db0fcd18"><div class="ttname"><a href="structjournal__params.html#ac2757d6b4520417356ca6373db0fcd18">journal_params::jp_journal_max_trans_age</a></div><div class="ttdeci">__le32 jp_journal_max_trans_age</div><div class="ttdef"><b>Definition:</b> reiserfs.h:971</div></div>
<div class="ttc" id="reiserfs_8h_html_a2a3acf57dd79e917a2677f5515dff21fa17b57c4698edfeda2b84b3862ee8b8a3"><div class="ttname"><a href="reiserfs_8h.html#a2a3acf57dd79e917a2677f5515dff21fa17b57c4698edfeda2b84b3862ee8b8a3">BH_JTest</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:2827</div></div>
<div class="ttc" id="reiserfs_8h_html_a6a454842e29d7fe8af4b081279f79041"><div class="ttname"><a href="reiserfs_8h.html#a6a454842e29d7fe8af4b081279f79041">reiserfs_release_objectid</a></div><div class="ttdeci">void reiserfs_release_objectid(struct reiserfs_transaction_handle *th, __u32 objectid_to_release)</div><div class="ttdef"><b>Definition:</b> objectid.c:97</div></div>
<div class="ttc" id="structreiserfs__super__block_html_a0de4424f5d622bf0f3d97fbe3220c3a6"><div class="ttname"><a href="structreiserfs__super__block.html#a0de4424f5d622bf0f3d97fbe3220c3a6">reiserfs_super_block::s_max_mnt_count</a></div><div class="ttdeci">__le16 s_max_mnt_count</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1038</div></div>
<div class="ttc" id="structunfm__nodeinfo_html"><div class="ttname"><a href="structunfm__nodeinfo.html">unfm_nodeinfo</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:1134</div></div>
<div class="ttc" id="structvirtual__item_html_a4b0fe1c8932d44a464c0713dfb450ef5"><div class="ttname"><a href="structvirtual__item.html#a4b0fe1c8932d44a464c0713dfb450ef5">virtual_item::vi_item_len</a></div><div class="ttdeci">unsigned short vi_item_len</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2339</div></div>
<div class="ttc" id="reiserfs_8h_html_a64f33f1d2d7e4715a7f6c5077662dfb8"><div class="ttname"><a href="reiserfs_8h.html#a64f33f1d2d7e4715a7f6c5077662dfb8">reiserfs_special_inode_operations</a></div><div class="ttdeci">const struct inode_operations reiserfs_special_inode_operations</div><div class="ttdef"><b>Definition:</b> namei.c:1673</div></div>
<div class="ttc" id="reiserfs_8h_html_a2420bda537e8a3790276f63c901ef0c3"><div class="ttname"><a href="reiserfs_8h.html#a2420bda537e8a3790276f63c901ef0c3">sb_from_tb</a></div><div class="ttdeci">static struct super_block * sb_from_tb(struct tree_balance *tb)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2596</div></div>
<div class="ttc" id="structreiserfs__transaction__handle_html_a67a088517e184671d8db0f780cb2d3f1"><div class="ttname"><a href="structreiserfs__transaction__handle.html#a67a088517e184671d8db0f780cb2d3f1">reiserfs_transaction_handle::displace_new_blocks</a></div><div class="ttdeci">unsigned displace_new_blocks</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2866</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_a6668f6b75f77612a1e427cbc93f39d67"><div class="ttname"><a href="structreiserfs__sb__info.html#a6668f6b75f77612a1e427cbc93f39d67">reiserfs_sb_info::reserved_blocks</a></div><div class="ttdeci">int reserved_blocks</div><div class="ttdef"><b>Definition:</b> reiserfs.h:612</div></div>
<div class="ttc" id="reiserfs_8h_html_a9fd8ffa2dc584322b88b0853a147fb5c"><div class="ttname"><a href="reiserfs_8h.html#a9fd8ffa2dc584322b88b0853a147fb5c">reiserfs_cond_resched</a></div><div class="ttdeci">static void reiserfs_cond_resched(struct super_block *s)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:844</div></div>
<div class="ttc" id="reiserfs_8h_html_abfab7e6372147db1a346c2d19dc6a7b8"><div class="ttname"><a href="reiserfs_8h.html#abfab7e6372147db1a346c2d19dc6a7b8">reiserfs_write_unlock</a></div><div class="ttdeci">void reiserfs_write_unlock(struct super_block *s)</div><div class="ttdef"><b>Definition:</b> lock.c:35</div></div>
<div class="ttc" id="reiserfs_8h_html_a935095b2e858148ef00609f2fa5008de"><div class="ttname"><a href="reiserfs_8h.html#a935095b2e858148ef00609f2fa5008de">reiserfs_unpack</a></div><div class="ttdeci">int reiserfs_unpack(struct inode *inode, struct file *filp)</div><div class="ttdef"><b>Definition:</b> ioctl.c:170</div></div>
<div class="ttc" id="structreiserfs__inode__info_html_a08045363dd99c56bf8a7b66697898e7c"><div class="ttname"><a href="structreiserfs__inode__info.html#a08045363dd99c56bf8a7b66697898e7c">reiserfs_inode_info::i_flags</a></div><div class="ttdeci">__u32 i_flags</div><div class="ttdef"><b>Definition:</b> reiserfs.h:67</div></div>
<div class="ttc" id="reiserfs_8h_html_a09d5f52e00d6dacf0bbcc53e1a2f2a85ae08742994539d4c47773afb11a279ff5"><div class="ttname"><a href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85ae08742994539d4c47773afb11a279ff5">REISERFS_SMALLTAIL</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:655</div></div>
<div class="ttc" id="reiserfs_8h_html_a3962c4fe5db1dedab486c1660bb69daf"><div class="ttname"><a href="reiserfs_8h.html#a3962c4fe5db1dedab486c1660bb69daf">make_cpu_key</a></div><div class="ttdeci">void make_cpu_key(struct cpu_key *cpu_key, struct inode *inode, loff_t offset, int type, int key_length)</div><div class="ttdef"><b>Definition:</b> inode.c:127</div></div>
<div class="ttc" id="reiserfs_8h_html_ac3fa26a2c2dc860e45291fd8eb0f6a6f"><div class="ttname"><a href="reiserfs_8h.html#ac3fa26a2c2dc860e45291fd8eb0f6a6f">ih_key</a></div><div class="ttdeci">struct reiserfs_key ih_key</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1282</div></div>
<div class="ttc" id="structreiserfs__journal__desc_html"><div class="ttname"><a href="structreiserfs__journal__desc.html">reiserfs_journal_desc</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:2708</div></div>
<div class="ttc" id="structreiserfs__journal__commit_html_a4af83b6b04a274d7cd969cdabf7a621a"><div class="ttname"><a href="structreiserfs__journal__commit.html#a4af83b6b04a274d7cd969cdabf7a621a">reiserfs_journal_commit::j_len</a></div><div class="ttdeci">__le32 j_len</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2729</div></div>
<div class="ttc" id="reiserfs_8h_html_a1e2b0184009e9c66b7ad1f26a821671d"><div class="ttname"><a href="reiserfs_8h.html#a1e2b0184009e9c66b7ad1f26a821671d">set_le_ih_k_offset</a></div><div class="ttdeci">static void set_le_ih_k_offset(struct item_head *ih, loff_t offset)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1520</div></div>
<div class="ttc" id="reiserfs_8h_html_a8601ed16bb23016aebbdc349f2b72bbf"><div class="ttname"><a href="reiserfs_8h.html#a8601ed16bb23016aebbdc349f2b72bbf">PATH_PLAST_BUFFER</a></div><div class="ttdeci">#define PATH_PLAST_BUFFER(path)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2153</div></div>
<div class="ttc" id="reiserfs_8h_html_a30ddb3ce24367e8fb417d778a1f1113c"><div class="ttname"><a href="reiserfs_8h.html#a30ddb3ce24367e8fb417d778a1f1113c">tp_item_head</a></div><div class="ttdeci">static struct item_head * tp_item_head(const struct treepath *path)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2224</div></div>
<div class="ttc" id="reiserfs_8h_html_adc2a2a07fcfa19259b8cb44e250976df"><div class="ttname"><a href="reiserfs_8h.html#adc2a2a07fcfa19259b8cb44e250976df">sb_from_bi</a></div><div class="ttdeci">static struct super_block * sb_from_bi(struct buffer_info *bi)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2601</div></div>
<div class="ttc" id="structreiserfs__journal_html_a5ed8b13003b468f2b2cc0e0e944ddca5"><div class="ttname"><a href="structreiserfs__journal.html#a5ed8b13003b468f2b2cc0e0e944ddca5">reiserfs_journal::j_next_full_flush</a></div><div class="ttdeci">int j_next_full_flush</div><div class="ttdef"><b>Definition:</b> reiserfs.h:348</div></div>
<div class="ttc" id="reiserfs_8h_html_a0352e0fe22c2a184d6f6b1f9d0d29b0b"><div class="ttname"><a href="reiserfs_8h.html#a0352e0fe22c2a184d6f6b1f9d0d29b0b">reiserfs_mutex_lock_nested_safe</a></div><div class="ttdeci">static void reiserfs_mutex_lock_nested_safe(struct mutex *m, unsigned int subclass, struct super_block *s)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:821</div></div>
<div class="ttc" id="reiserfs_8h_html_a43e4f55c1d3f88a6917dfafb09180def"><div class="ttname"><a href="reiserfs_8h.html#a43e4f55c1d3f88a6917dfafb09180def">cpu_key_k_offset_dec</a></div><div class="ttdeci">static void cpu_key_k_offset_dec(struct cpu_key *key)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1602</div></div>
<div class="ttc" id="structdisk__child_html_a52e673bba4c72a8939c53fc760294037"><div class="ttname"><a href="structdisk__child.html#a52e673bba4c72a8939c53fc760294037">disk_child::dc_block_number</a></div><div class="ttdeci">__le32 dc_block_number</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2036</div></div>
<div class="ttc" id="reiserfs_8h_html_ae809d8ae762dec0a19e311d33fd04e01"><div class="ttname"><a href="reiserfs_8h.html#ae809d8ae762dec0a19e311d33fd04e01">print_statistics</a></div><div class="ttdeci">void print_statistics(struct super_block *s)</div><div class="ttdef"><b>Definition:</b> prints.c:763</div></div>
<div class="ttc" id="reiserfs_8h_html_a9a1709980736268d6ce9b7df1c4e2b29"><div class="ttname"><a href="reiserfs_8h.html#a9a1709980736268d6ce9b7df1c4e2b29">comp_short_le_keys</a></div><div class="ttdeci">int comp_short_le_keys(const struct reiserfs_key *, const struct reiserfs_key *)</div><div class="ttdef"><b>Definition:</b> stree.c:98</div></div>
<div class="ttc" id="structitem__head_html_adb63f16ade27a1c0c0279d5568ea7118"><div class="ttname"><a href="structitem__head.html#adb63f16ade27a1c0c0279d5568ea7118">item_head::ih_item_location</a></div><div class="ttdeci">__le16 ih_item_location</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1385</div></div>
<div class="ttc" id="reiserfs_8h_html_a369de855dae3bff6629d14901a873922"><div class="ttname"><a href="reiserfs_8h.html#a369de855dae3bff6629d14901a873922">reiserfs_convert_objectid_map_v1</a></div><div class="ttdeci">int reiserfs_convert_objectid_map_v1(struct super_block *)</div><div class="ttdef"><b>Definition:</b> objectid.c:179</div></div>
<div class="ttc" id="reiserfs_8h_html_a8f5f18c01d13554cd8e3589f3cf48ffe"><div class="ttname"><a href="reiserfs_8h.html#a8f5f18c01d13554cd8e3589f3cf48ffe">ih_item_body</a></div><div class="ttdeci">static void * ih_item_body(const struct buffer_head *bh, const struct item_head *ih)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2212</div></div>
<div class="ttc" id="reiserfs_8h_html_a26222ea9304fc598061f100243d7d9ef"><div class="ttname"><a href="reiserfs_8h.html#a26222ea9304fc598061f100243d7d9ef">JOURNAL_HASH_SIZE</a></div><div class="ttdeci">#define JOURNAL_HASH_SIZE</div><div class="ttdef"><b>Definition:</b> reiserfs.h:211</div></div>
<div class="ttc" id="structreiserfs__transaction__handle_html_a6d189e1c902afa30c1fe331666d98719"><div class="ttname"><a href="structreiserfs__transaction__handle.html#a6d189e1c902afa30c1fe331666d98719">reiserfs_transaction_handle::t_refcount</a></div><div class="ttdeci">int t_refcount</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2853</div></div>
<div class="ttc" id="structreiserfs__inode__info_html_ab880e34e8d158dbc0db607d1bece8bfd"><div class="ttname"><a href="structreiserfs__inode__info.html#ab880e34e8d158dbc0db607d1bece8bfd">reiserfs_inode_info::tailpack</a></div><div class="ttdeci">struct mutex tailpack</div><div class="ttdef"><b>Definition:</b> reiserfs.h:97</div></div>
<div class="ttc" id="structtree__balance_html_a3570d24528b0cb71f0833f6c7decda2d"><div class="ttname"><a href="structtree__balance.html#a3570d24528b0cb71f0833f6c7decda2d">tree_balance::tb_mode</a></div><div class="ttdeci">int tb_mode</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2405</div></div>
<div class="ttc" id="reiserfs_8h_html_aef5d8c9122635369f917bd5e828757cc"><div class="ttname"><a href="reiserfs_8h.html#aef5d8c9122635369f917bd5e828757cc">direct2indirect</a></div><div class="ttdeci">int direct2indirect(struct reiserfs_transaction_handle *, struct inode *, struct treepath *, struct buffer_head *, loff_t)</div><div class="ttdef"><b>Definition:</b> tail_conversion.c:25</div></div>
<div class="ttc" id="reiserfs_8h_html_ab367f44139fc1f298915d77367bc783d"><div class="ttname"><a href="reiserfs_8h.html#ab367f44139fc1f298915d77367bc783d">REISERFS_MAXQUOTAS</a></div><div class="ttdeci">#define REISERFS_MAXQUOTAS</div><div class="ttdef"><b>Definition:</b> reiserfs.h:515</div></div>
<div class="ttc" id="reiserfs_8h_html_aa30349979901d9c838ed928dd142e0c4"><div class="ttname"><a href="reiserfs_8h.html#aa30349979901d9c838ed928dd142e0c4">reiserfs_proc_info_global_init</a></div><div class="ttdeci">static int reiserfs_proc_info_global_init(void)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:3142</div></div>
<div class="ttc" id="reiserfs_8h_html_aa154d9c62a68f6c5e52e467c9239ab4f"><div class="ttname"><a href="reiserfs_8h.html#aa154d9c62a68f6c5e52e467c9239ab4f">reiserfs_new_unf_blocknrs2</a></div><div class="ttdeci">static int reiserfs_new_unf_blocknrs2(struct reiserfs_transaction_handle *th, struct inode *inode, b_blocknr_t *new_blocknrs, struct treepath *path, sector_t block)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:3362</div></div>
<div class="ttc" id="reiserfs_8h_html_a5bf5274cdaa958c15ee7701e1c5557c0"><div class="ttname"><a href="reiserfs_8h.html#a5bf5274cdaa958c15ee7701e1c5557c0">reiserfs_parse_alloc_options</a></div><div class="ttdeci">int reiserfs_parse_alloc_options(struct super_block *, char *)</div><div class="ttdef"><b>Definition:</b> bitmap.c:574</div></div>
<div class="ttc" id="structvirtual__node_html_a14622e4ec69d16502d7d0b18f1531c6d"><div class="ttname"><a href="structvirtual__node.html#a14622e4ec69d16502d7d0b18f1531c6d">virtual_node::vn_mode</a></div><div class="ttdeci">short vn_mode</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2360</div></div>
<div class="ttc" id="structreiserfs__inode__info_html_ad1a254fe26c2cee7ef823e8a215985ff"><div class="ttname"><a href="structreiserfs__inode__info.html#ad1a254fe26c2cee7ef823e8a215985ff">reiserfs_inode_info::i_jl</a></div><div class="ttdeci">struct reiserfs_journal_list * i_jl</div><div class="ttdef"><b>Definition:</b> reiserfs.h:95</div></div>
<div class="ttc" id="reiserfs_8h_html_a09d5f52e00d6dacf0bbcc53e1a2f2a85a7fb95424e400f3421800cff5abc4e917"><div class="ttname"><a href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a7fb95424e400f3421800cff5abc4e917">REISERFS_BARRIER_FLUSH</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:700</div></div>
<div class="ttc" id="reiserfs_8h_html_a0f9f350a2564418a31ccae4d76db4e76"><div class="ttname"><a href="reiserfs_8h.html#a0f9f350a2564418a31ccae4d76db4e76">search_for_position_by_key</a></div><div class="ttdeci">int search_for_position_by_key(struct super_block *sb, const struct cpu_key *cpu_key, struct treepath *search_path)</div><div class="ttdef"><b>Definition:</b> stree.c:831</div></div>
<div class="ttc" id="reiserfs_8h_html_a2a3acf57dd79e917a2677f5515dff21fab1fd96e1d9c4d1f194a50802095d92e6"><div class="ttname"><a href="reiserfs_8h.html#a2a3acf57dd79e917a2677f5515dff21fab1fd96e1d9c4d1f194a50802095d92e6">BH_JDirty_wait</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:2819</div></div>
<div class="ttc" id="fix__node_8c_html_a31e1e78c0c51488df790f4cae64c5df4"><div class="ttname"><a href="fix__node_8c.html#a31e1e78c0c51488df790f4cae64c5df4">check_left</a></div><div class="ttdeci">static void check_left(struct tree_balance *tb, int h, int cur_free)</div><div class="ttdef"><b>Definition:</b> fix_node.c:194</div></div>
<div class="ttc" id="reiserfs_8h_html_a51445e447f4a72a1862048faf97dfb69"><div class="ttname"><a href="reiserfs_8h.html#a51445e447f4a72a1862048faf97dfb69">journal_transaction_should_end</a></div><div class="ttdeci">int journal_transaction_should_end(struct reiserfs_transaction_handle *, int)</div><div class="ttdef"><b>Definition:</b> journal.c:2910</div></div>
<div class="ttc" id="reiserfs_8h_html_a09d5f52e00d6dacf0bbcc53e1a2f2a85ac487054305e939e92a7d066819cbd0be"><div class="ttname"><a href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85ac487054305e939e92a7d066819cbd0be">REISERFS_TEST4</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:713</div></div>
<div class="ttc" id="structreiserfs__journal__commit_html_a2c79444784b535d36a86e3ba0a8b5bde"><div class="ttname"><a href="structreiserfs__journal__commit.html#a2c79444784b535d36a86e3ba0a8b5bde">reiserfs_journal_commit::j_trans_id</a></div><div class="ttdeci">__le32 j_trans_id</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2728</div></div>
<div class="ttc" id="reiserfs_8h_html_a9e261a6d9efb4e748a301450788ec143"><div class="ttname"><a href="reiserfs_8h.html#a9e261a6d9efb4e748a301450788ec143">TYPE_ANY</a></div><div class="ttdeci">#define TYPE_ANY</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1244</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_af7061242bd682e8c97f5a170bdd7a14a"><div class="ttname"><a href="structreiserfs__sb__info.html#af7061242bd682e8c97f5a170bdd7a14a">reiserfs_sb_info::border</a></div><div class="ttdeci">int border</div><div class="ttdef"><b>Definition:</b> reiserfs.h:565</div></div>
<div class="ttc" id="structreiserfs__journal_html_a0462d8b9e85de45dceb8271dbc94863d"><div class="ttname"><a href="structreiserfs__journal.html#a0462d8b9e85de45dceb8271dbc94863d">reiserfs_journal::j_used_bitmap_nodes</a></div><div class="ttdeci">int j_used_bitmap_nodes</div><div class="ttdef"><b>Definition:</b> reiserfs.h:378</div></div>
<div class="ttc" id="structreiserfs__inode__info_html"><div class="ttname"><a href="structreiserfs__inode__info.html">reiserfs_inode_info</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:60</div></div>
<div class="ttc" id="structstat__data__v1_html_a5031d71b18d555fe00e6c3fafe7f424f"><div class="ttname"><a href="structstat__data__v1.html#a5031d71b18d555fe00e6c3fafe7f424f">stat_data_v1::sd_size</a></div><div class="ttdeci">__le32 sd_size</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1715</div></div>
<div class="ttc" id="reiserfs_8h_html_a0387e14c04753333ae0f331abca47e52"><div class="ttname"><a href="reiserfs_8h.html#a0387e14c04753333ae0f331abca47e52">s_journal</a></div><div class="ttdeci">struct journal_params s_journal</div><div class="ttdef"><b>Definition:</b> reiserfs.h:906</div></div>
<div class="ttc" id="structreiserfs__dir__entry_html_a8b42a6a2acd45e1223a6f29ad8a85344"><div class="ttname"><a href="structreiserfs__dir__entry.html#a8b42a6a2acd45e1223a6f29ad8a85344">reiserfs_dir_entry::de_entry_num</a></div><div class="ttdeci">int de_entry_num</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1985</div></div>
<div class="ttc" id="reiserfs_8h_html_a2a3acf57dd79e917a2677f5515dff21f"><div class="ttname"><a href="reiserfs_8h.html#a2a3acf57dd79e917a2677f5515dff21f">reiserfs_bh_state_bits</a></div><div class="ttdeci">reiserfs_bh_state_bits</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2817</div></div>
<div class="ttc" id="reiserfs_8h_html_ad2689bf3721b0ccd9bb15efe4f5c758c"><div class="ttname"><a href="reiserfs_8h.html#ad2689bf3721b0ccd9bb15efe4f5c758c">entry_sizes</a></div><div class="ttdeci">__u16 entry_sizes[1]</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2282</div></div>
<div class="ttc" id="structreiserfs__journal__cnode_html_abd2f79878d99f7b6b56a90730eccc885"><div class="ttname"><a href="structreiserfs__journal__cnode.html#abd2f79878d99f7b6b56a90730eccc885">reiserfs_journal_cnode::state</a></div><div class="ttdeci">unsigned long state</div><div class="ttdef"><b>Definition:</b> reiserfs.h:233</div></div>
<div class="ttc" id="reiserfs_8h_html_a93b470de9c99e50130c7bfbc05098db3"><div class="ttname"><a href="reiserfs_8h.html#a93b470de9c99e50130c7bfbc05098db3">reiserfs_choose_packing</a></div><div class="ttdeci">__le32 reiserfs_choose_packing(struct inode *dir)</div><div class="ttdef"><b>Definition:</b> bitmap.c:325</div></div>
<div class="ttc" id="reiserfs_8h_html_aa70479542fd6681109abefbe5296a5bb"><div class="ttname"><a href="reiserfs_8h.html#aa70479542fd6681109abefbe5296a5bb">reiserfs_super_block_flags</a></div><div class="ttdeci">reiserfs_super_block_flags</div><div class="ttdef"><b>Definition:</b> reiserfs.h:108</div></div>
<div class="ttc" id="reiserfs_8h_html_a6a251a53b6c4751b32be555266b744fa"><div class="ttname"><a href="reiserfs_8h.html#a6a251a53b6c4751b32be555266b744fa">reiserfs_new_form_blocknrs</a></div><div class="ttdeci">static int reiserfs_new_form_blocknrs(struct tree_balance *tb, b_blocknr_t *new_blocknrs, int amount_needed)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:3328</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_acd36942730ec79c111c68dd36ff2699e"><div class="ttname"><a href="structreiserfs__sb__info.html#acd36942730ec79c111c68dd36ff2699e">reiserfs_sb_info::bitmap_lock</a></div><div class="ttdeci">spinlock_t bitmap_lock</div><div class="ttdef"><b>Definition:</b> reiserfs.h:616</div></div>
<div class="ttc" id="reiserfs_8h_html_a668ae38dda410e1b6cf612cb912d40a8"><div class="ttname"><a href="reiserfs_8h.html#a668ae38dda410e1b6cf612cb912d40a8">yura_hash</a></div><div class="ttdeci">__u32 yura_hash(const signed char *msg, int len)</div><div class="ttdef"><b>Definition:</b> hashes.c:128</div></div>
<div class="ttc" id="structreiserfs__inode__info_html_a8bd47389eddb66e65b72bf4851e6ae8c"><div class="ttname"><a href="structreiserfs__inode__info.html#a8bd47389eddb66e65b72bf4851e6ae8c">reiserfs_inode_info::i_trans_id</a></div><div class="ttdeci">unsigned int i_trans_id</div><div class="ttdef"><b>Definition:</b> reiserfs.h:93</div></div>
<div class="ttc" id="structreiserfs__super__block__v1_html_a281fa21f7f7953168cfdb7a5f1c6d3f4"><div class="ttname"><a href="structreiserfs__super__block__v1.html#a281fa21f7f7953168cfdb7a5f1c6d3f4">reiserfs_super_block_v1::s_block_count</a></div><div class="ttdeci">__le32 s_block_count</div><div class="ttdef"><b>Definition:</b> reiserfs.h:976</div></div>
<div class="ttc" id="structreiserfs__transaction__handle_html_a2709deefa1fb6610f4989e3f39f1598d"><div class="ttname"><a href="structreiserfs__transaction__handle.html#a2709deefa1fb6610f4989e3f39f1598d">reiserfs_transaction_handle::t_handle_save</a></div><div class="ttdeci">void * t_handle_save</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2860</div></div>
<div class="ttc" id="structreiserfs__de__head_html_a61d9c99b4f4b75661c55619c5729387b"><div class="ttname"><a href="structreiserfs__de__head.html#a61d9c99b4f4b75661c55619c5729387b">reiserfs_de_head::deh_dir_id</a></div><div class="ttdeci">__le32 deh_dir_id</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1892</div></div>
<div class="ttc" id="reiserfs_8h_html_aae05bbe4a4af49871f9f3ec68bacbe94"><div class="ttname"><a href="reiserfs_8h.html#aae05bbe4a4af49871f9f3ec68bacbe94">add_le_key_k_offset</a></div><div class="ttdeci">static void add_le_key_k_offset(int version, struct reiserfs_key *key, loff_t offset)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1508</div></div>
<div class="ttc" id="structtree__balance_html_a3c481edaaf3e8e8edbdfbcb25f5aa163"><div class="ttname"><a href="structtree__balance.html#a3c481edaaf3e8e8edbdfbcb25f5aa163">tree_balance::need_balance_dirty</a></div><div class="ttdeci">int need_balance_dirty</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2406</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_a06ce31d699e52c3c13f527bc50f54f98"><div class="ttname"><a href="structreiserfs__sb__info.html#a06ce31d699e52c3c13f527bc50f54f98">reiserfs_sb_info::s_rs</a></div><div class="ttdeci">struct reiserfs_super_block * s_rs</div><div class="ttdef"><b>Definition:</b> reiserfs.h:523</div></div>
<div class="ttc" id="structitem__head_html_a395626a228d057c0c84df8805543ab87"><div class="ttname"><a href="structitem__head.html#a395626a228d057c0c84df8805543ab87">item_head::ih_free_space_reserved</a></div><div class="ttdeci">__le16 ih_free_space_reserved</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1374</div></div>
<div class="ttc" id="structtree__balance_html_a8eae60641ab72c8786a3ea9c227bdac7"><div class="ttname"><a href="structtree__balance.html#a8eae60641ab72c8786a3ea9c227bdac7">tree_balance::transaction_handle</a></div><div class="ttdeci">struct reiserfs_transaction_handle * transaction_handle</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2408</div></div>
<div class="ttc" id="structitem__head_html_aca01d08b3bcfb693b5437ee00a065a78"><div class="ttname"><a href="structitem__head.html#aca01d08b3bcfb693b5437ee00a065a78">item_head::ih_version</a></div><div class="ttdeci">__le16 ih_version</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1391</div></div>
<div class="ttc" id="reiserfs_8h_html_a191afab1972fe09a20ff74fc244ade0a"><div class="ttname"><a href="reiserfs_8h.html#a191afab1972fe09a20ff74fc244ade0a">V1_ANY_UNIQUENESS</a></div><div class="ttdeci">#define V1_ANY_UNIQUENESS</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1428</div></div>
<div class="ttc" id="structreiserfs__bitmap__node_html_a3ac1fb902f64a4dbcd9cc6d64b6f8d49"><div class="ttname"><a href="structreiserfs__bitmap__node.html#a3ac1fb902f64a4dbcd9cc6d64b6f8d49">reiserfs_bitmap_node::data</a></div><div class="ttdeci">char * data</div><div class="ttdef"><b>Definition:</b> reiserfs.h:246</div></div>
<div class="ttc" id="structdirentry__uarea_html_a3bf9aa6e64e8ef4e79bac40c5eac675b"><div class="ttname"><a href="structdirentry__uarea.html#a3bf9aa6e64e8ef4e79bac40c5eac675b">direntry_uarea::entry_count</a></div><div class="ttdeci">__u16 entry_count</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2376</div></div>
<div class="ttc" id="reiserfs_8h_html_ae0e2d8866196537b150f2dc0c34a9fa8"><div class="ttname"><a href="reiserfs_8h.html#ae0e2d8866196537b150f2dc0c34a9fa8">B_IS_IN_TREE</a></div><div class="ttdeci">int B_IS_IN_TREE(const struct buffer_head *)</div><div class="ttdef"><b>Definition:</b> stree.c:20</div></div>
<div class="ttc" id="structreiserfs__super__block__v1_html"><div class="ttname"><a href="structreiserfs__super__block__v1.html">reiserfs_super_block_v1</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:975</div></div>
<div class="ttc" id="reiserfs_8h_html_aca3a3f20199a0f9089951f7b77acc83c"><div class="ttname"><a href="reiserfs_8h.html#aca3a3f20199a0f9089951f7b77acc83c">entry_length</a></div><div class="ttdeci">static int entry_length(const struct buffer_head *bh, const struct item_head *ih, int pos_in_item)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2251</div></div>
<div class="ttc" id="send_8h_html_aba87c031cbb3e372df508f4153bd3f1c"><div class="ttname"><a href="send_8h.html#aba87c031cbb3e372df508f4153bd3f1c">cmd</a></div><div class="ttdeci">__le16 cmd</div><div class="ttdef"><b>Definition:</b> send.h:4584</div></div>
<div class="ttc" id="reiserfs_8h_html_add38ae772aca9ec259d5fcfed238fd5e"><div class="ttname"><a href="reiserfs_8h.html#add38ae772aca9ec259d5fcfed238fd5e">keyed_hash</a></div><div class="ttdeci">__u32 keyed_hash(const signed char *msg, int len)</div><div class="ttdef"><b>Definition:</b> hashes.c:44</div></div>
<div class="ttc" id="reiserfs_8h_html_ad32ad8e61feff374e939a32c38906af6"><div class="ttname"><a href="reiserfs_8h.html#ad32ad8e61feff374e939a32c38906af6">reiserfs_insert_item</a></div><div class="ttdeci">int reiserfs_insert_item(struct reiserfs_transaction_handle *th, struct treepath *path, const struct cpu_key *key, struct item_head *ih, struct inode *inode, const char *body)</div><div class="ttdef"><b>Definition:</b> stree.c:2168</div></div>
<div class="ttc" id="reiserfs_8h_html_a09d5f52e00d6dacf0bbcc53e1a2f2a85aa07e1c78ec3a7b71439bf1a27acf7aa5"><div class="ttname"><a href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85aa07e1c78ec3a7b71439bf1a27acf7aa5">REISERFS_TEST1</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:710</div></div>
<div class="ttc" id="reiserfs_8h_html_a09d5f52e00d6dacf0bbcc53e1a2f2a85aca76b960f4dff3c863746cf9fa3ce4cf"><div class="ttname"><a href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85aca76b960f4dff3c863746cf9fa3ce4cf">REISERFS_TEST2</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:711</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_adcad24d25a8bdf6fdd52511c028a5404"><div class="ttname"><a href="structreiserfs__sb__info.html#adcad24d25a8bdf6fdd52511c028a5404">reiserfs_sb_info::s_do_balance</a></div><div class="ttdeci">int s_do_balance</div><div class="ttdef"><b>Definition:</b> reiserfs.h:593</div></div>
<div class="ttc" id="reiserfs_8h_html_a40518f9d84ad2c5883922eac9d713d09"><div class="ttname"><a href="reiserfs_8h.html#a40518f9d84ad2c5883922eac9d713d09">k_offset_v2</a></div><div class="ttdeci">struct offset_v2 k_offset_v2</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1293</div></div>
<div class="ttc" id="structreiserfs__journal__commit_html"><div class="ttname"><a href="structreiserfs__journal__commit.html">reiserfs_journal_commit</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:2727</div></div>
<div class="ttc" id="structstat__data_html_ae99f06e00a09f7895e322236848c2d38"><div class="ttname"><a href="structstat__data.html#ae99f06e00a09f7895e322236848c2d38">stat_data::sd_gid</a></div><div class="ttdeci">__le32 sd_gid</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1801</div></div>
<div class="ttc" id="reiserfs_8h_html_a7e5ef88f9994e7aa7e67c0c07d8b0f66"><div class="ttname"><a href="reiserfs_8h.html#a7e5ef88f9994e7aa7e67c0c07d8b0f66">reiserfs_add_tail_list</a></div><div class="ttdeci">int reiserfs_add_tail_list(struct inode *inode, struct buffer_head *bh)</div><div class="ttdef"><b>Definition:</b> journal.c:783</div></div>
<div class="ttc" id="reiserfs_8h_html_af59ee5a605e74ced210abcda48ec7750"><div class="ttname"><a href="reiserfs_8h.html#af59ee5a605e74ced210abcda48ec7750">KEY_FORMAT_3_6</a></div><div class="ttdeci">#define KEY_FORMAT_3_6</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1141</div></div>
<div class="ttc" id="reiserfs_8h_html_a108416fabd4302d9ba34f6f27d82d825"><div class="ttname"><a href="reiserfs_8h.html#a108416fabd4302d9ba34f6f27d82d825">print_objectid_map</a></div><div class="ttdeci">void print_objectid_map(struct super_block *s)</div></div>
<div class="ttc" id="structreiserfs__dir__entry_html_a47bfbf176548fcbe232653934187eba7"><div class="ttname"><a href="structreiserfs__dir__entry.html#a47bfbf176548fcbe232653934187eba7">reiserfs_dir_entry::de_objectid</a></div><div class="ttdeci">__u32 de_objectid</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1993</div></div>
<div class="ttc" id="reiserfs_8h_html_a09d5f52e00d6dacf0bbcc53e1a2f2a85a1d90fcfaf015918bedb10825e7af74c9"><div class="ttname"><a href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a1d90fcfaf015918bedb10825e7af74c9">REPLAYONLY</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:658</div></div>
<div class="ttc" id="structreiserfs__journal_html_a0cf386c20d802700fb14a44bd3ef1a41"><div class="ttname"><a href="structreiserfs__journal.html#a0cf386c20d802700fb14a44bd3ef1a41">reiserfs_journal::j_work_sb</a></div><div class="ttdeci">struct super_block * j_work_sb</div><div class="ttdef"><b>Definition:</b> reiserfs.h:418</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_a91522b8b92104e95d06896529dfb288d"><div class="ttname"><a href="structreiserfs__sb__info.html#a91522b8b92104e95d06896529dfb288d">reiserfs_sb_info::j_errno</a></div><div class="ttdeci">int j_errno</div><div class="ttdef"><b>Definition:</b> reiserfs.h:619</div></div>
<div class="ttc" id="structreiserfs__journal__cnode_html_a1fc89fefba889d7d8306e02589da987c"><div class="ttname"><a href="structreiserfs__journal__cnode.html#a1fc89fefba889d7d8306e02589da987c">reiserfs_journal_cnode::hprev</a></div><div class="ttdeci">struct reiserfs_journal_cnode * hprev</div><div class="ttdef"><b>Definition:</b> reiserfs.h:240</div></div>
<div class="ttc" id="structreiserfs__journal_html_a8ec1ff98cc4fbe89184f4ffa374a80bf"><div class="ttname"><a href="structreiserfs__journal.html#a8ec1ff98cc4fbe89184f4ffa374a80bf">reiserfs_journal::j_len</a></div><div class="ttdeci">unsigned long j_len</div><div class="ttdef"><b>Definition:</b> reiserfs.h:316</div></div>
<div class="ttc" id="structreiserfs__dir__entry_html_a492cdbc187daf50f0338e7797941a0f2"><div class="ttname"><a href="structreiserfs__dir__entry.html#a492cdbc187daf50f0338e7797941a0f2">reiserfs_dir_entry::de_item_num</a></div><div class="ttdeci">int de_item_num</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1983</div></div>
<div class="ttc" id="reiserfs_8h_html_a1bb57dc479a88358255ae9482b66c846"><div class="ttname"><a href="reiserfs_8h.html#a1bb57dc479a88358255ae9482b66c846">reiserfs_truncate_file</a></div><div class="ttdeci">int reiserfs_truncate_file(struct inode *, int update_timestamps)</div><div class="ttdef"><b>Definition:</b> inode.c:2258</div></div>
<div class="ttc" id="structreiserfs__journal_html_aaf1ee9ef3313bb245e5f60ff3b81d520"><div class="ttname"><a href="structreiserfs__journal.html#aaf1ee9ef3313bb245e5f60ff3b81d520">reiserfs_journal::j_start</a></div><div class="ttdeci">unsigned long j_start</div><div class="ttdef"><b>Definition:</b> reiserfs.h:315</div></div>
<div class="ttc" id="structvirtual__node_html"><div class="ttname"><a href="structvirtual__node.html">virtual_node</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:2347</div></div>
<div class="ttc" id="reiserfs_8h_html_adcb599ad65666266f8267b9dc735e5b5"><div class="ttname"><a href="reiserfs_8h.html#adcb599ad65666266f8267b9dc735e5b5">set_cpu_key_k_type</a></div><div class="ttdeci">static void set_cpu_key_k_type(struct cpu_key *key, int type)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1597</div></div>
<div class="ttc" id="structjournal__params_html_a6c4411979cca5217b533442684209644"><div class="ttname"><a href="structjournal__params.html#a6c4411979cca5217b533442684209644">journal_params::jp_journal_trans_max</a></div><div class="ttdeci">__le32 jp_journal_trans_max</div><div class="ttdef"><b>Definition:</b> reiserfs.h:956</div></div>
<div class="ttc" id="structjournal__params_html_ab120ce8f2ffac5dc91f9af53d4ecd687"><div class="ttname"><a href="structjournal__params.html#ab120ce8f2ffac5dc91f9af53d4ecd687">journal_params::jp_journal_size</a></div><div class="ttdeci">__le32 jp_journal_size</div><div class="ttdef"><b>Definition:</b> reiserfs.h:953</div></div>
<div class="ttc" id="reiserfs_8h_html_a5c23b0f790477c3b309d85fe01008b4e"><div class="ttname"><a href="reiserfs_8h.html#a5c23b0f790477c3b309d85fe01008b4e">is_reiserfs_jr</a></div><div class="ttdeci">int is_reiserfs_jr(struct reiserfs_super_block *rs)</div><div class="ttdef"><b>Definition:</b> super.c:52</div></div>
<div class="ttc" id="structblock__head_html_a5e9433022752ef516c80e66b2b019ce2"><div class="ttname"><a href="structblock__head.html#a5e9433022752ef516c80e66b2b019ce2">block_head::blk_nr_item</a></div><div class="ttdeci">__le16 blk_nr_item</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1647</div></div>
<div class="ttc" id="struct____reiserfs__blocknr__hint_html_ad8abdb60397f454fe16bf024a8472517"><div class="ttname"><a href="struct____reiserfs__blocknr__hint.html#ad8abdb60397f454fe16bf024a8472517">__reiserfs_blocknr_hint::block</a></div><div class="ttdeci">sector_t block</div><div class="ttdef"><b>Definition:</b> reiserfs.h:3268</div></div>
<div class="ttc" id="fix__node_8c_html_acdcac7ab6c27403827be3ba7c023425e"><div class="ttname"><a href="fix__node_8c.html#acdcac7ab6c27403827be3ba7c023425e">decrement_key</a></div><div class="ttdeci">static void decrement_key(struct cpu_key *key)</div><div class="ttdef"><b>Definition:</b> fix_node.c:1008</div></div>
<div class="ttc" id="structoffset__v1_html_ac4e7eed34358c5a86df76cf8bacf53a8"><div class="ttname"><a href="structoffset__v1.html#ac4e7eed34358c5a86df76cf8bacf53a8">offset_v1::k_uniqueness</a></div><div class="ttdeci">__le32 k_uniqueness</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1253</div></div>
<div class="ttc" id="summary_8h_html_a63c41f9614ee9a4e1beb75eabad72f22"><div class="ttname"><a href="summary_8h.html#a63c41f9614ee9a4e1beb75eabad72f22">inode</a></div><div class="ttdeci">jint32_t inode</div><div class="ttdef"><b>Definition:</b> summary.h:848</div></div>
<div class="ttc" id="reiserfs_8h_html_a4777fbe92047586f192fb3de56ed270a"><div class="ttname"><a href="reiserfs_8h.html#a4777fbe92047586f192fb3de56ed270a">offset_v2_k_type</a></div><div class="ttdeci">static __u16 offset_v2_k_type(const struct offset_v2 *v2)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1260</div></div>
<div class="ttc" id="structpath__element_html_a741f303b0dbbdf6b0f3ee3e7c9c131d6"><div class="ttname"><a href="structpath__element.html#a741f303b0dbbdf6b0f3ee3e7c9c131d6">path_element::pe_position</a></div><div class="ttdeci">int pe_position</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2088</div></div>
<div class="ttc" id="structreiserfs__bitmap__node_html_a689a4322113b159c2cc837ff37c42499"><div class="ttname"><a href="structreiserfs__bitmap__node.html#a689a4322113b159c2cc837ff37c42499">reiserfs_bitmap_node::id</a></div><div class="ttdeci">int id</div><div class="ttdef"><b>Definition:</b> reiserfs.h:245</div></div>
<div class="ttc" id="reiserfs_8h_html_a11222c7e41f48a276c4082f872894843"><div class="ttname"><a href="reiserfs_8h.html#a11222c7e41f48a276c4082f872894843">print_cur_tb</a></div><div class="ttdeci">void print_cur_tb(char *mes)</div><div class="ttdef"><b>Definition:</b> prints.c:705</div></div>
<div class="ttc" id="structreiserfs__journal__header_html"><div class="ttname"><a href="structreiserfs__journal__header.html">reiserfs_journal_header</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:2746</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_aa9be28cdbc60b73b91267c51bbfd516d"><div class="ttname"><a href="structreiserfs__sb__info.html#aa9be28cdbc60b73b91267c51bbfd516d">reiserfs_sb_info::s_disk_writes</a></div><div class="ttdeci">int s_disk_writes</div><div class="ttdef"><b>Definition:</b> reiserfs.h:591</div></div>
<div class="ttc" id="reiserfs_8h_html_a4af5c20505b1d565d15a6504b0d27d6d"><div class="ttname"><a href="reiserfs_8h.html#a4af5c20505b1d565d15a6504b0d27d6d">reiserfs_block_writes</a></div><div class="ttdeci">void reiserfs_block_writes(struct reiserfs_transaction_handle *th)</div><div class="ttdef"><b>Definition:</b> journal.c:2933</div></div>
<div class="ttc" id="structreiserfs__journal_html"><div class="ttname"><a href="structreiserfs__journal.html">reiserfs_journal</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:296</div></div>
<div class="ttc" id="structreiserfs__dir__entry_html_acd51d1e2e65da99a4a8f0ba108256527"><div class="ttname"><a href="structreiserfs__dir__entry.html#acd51d1e2e65da99a4a8f0ba108256527">reiserfs_dir_entry::de_ih</a></div><div class="ttdeci">struct item_head * de_ih</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1984</div></div>
<div class="ttc" id="reiserfs_8h_html_a0f2513f8a463690873e1ce4919c64144"><div class="ttname"><a href="reiserfs_8h.html#a0f2513f8a463690873e1ce4919c64144">s_magic</a></div><div class="ttdeci">char s_magic[10]</div><div class="ttdef"><b>Definition:</b> reiserfs.h:920</div></div>
<div class="ttc" id="reiserfs_8h_html_a09d5f52e00d6dacf0bbcc53e1a2f2a85aeafa6c96183649c9e865d92691cf418c"><div class="ttname"><a href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85aeafa6c96183649c9e865d92691cf418c">REISERFS_GRPQUOTA</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:708</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_a55c3d39c69b700ff7e9dd4471759dc08"><div class="ttname"><a href="structreiserfs__sb__info.html#a55c3d39c69b700ff7e9dd4471759dc08">reiserfs_sb_info::bits</a></div><div class="ttdeci">unsigned long bits</div><div class="ttdef"><b>Definition:</b> reiserfs.h:557</div></div>
<div class="ttc" id="structreiserfs__journal_html_a773f1d1d523dcd4095cd55a50e13b0e1"><div class="ttname"><a href="structreiserfs__journal.html#a773f1d1d523dcd4095cd55a50e13b0e1">reiserfs_journal::j_dev_bd</a></div><div class="ttdeci">struct block_device * j_dev_bd</div><div class="ttdef"><b>Definition:</b> reiserfs.h:304</div></div>
<div class="ttc" id="structoffset__v2_html"><div class="ttname"><a href="structoffset__v2.html">offset_v2</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:1256</div></div>
<div class="ttc" id="reiserfs_8h_html_aa979f8afc12407cb4954a40a2be8fa27"><div class="ttname"><a href="reiserfs_8h.html#aa979f8afc12407cb4954a40a2be8fa27">journal_state_bits</a></div><div class="ttdeci">journal_state_bits</div><div class="ttdef"><b>Definition:</b> reiserfs.h:422</div></div>
<div class="ttc" id="reiserfs_8h_html_a09d5f52e00d6dacf0bbcc53e1a2f2a85aaf92b0174e48efa387e58e763376a8ff"><div class="ttname"><a href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85aaf92b0174e48efa387e58e763376a8ff">REISERFS_TEST3</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:712</div></div>
<div class="ttc" id="reiserfs_8h_html_a18dd171cd82b2b967d761e2d917e9914"><div class="ttname"><a href="reiserfs_8h.html#a18dd171cd82b2b967d761e2d917e9914">print_de</a></div><div class="ttdeci">void print_de(struct reiserfs_dir_entry *de)</div></div>
<div class="ttc" id="reiserfs_8h_html_a037b297f34c91bd852c527340da7254a"><div class="ttname"><a href="reiserfs_8h.html#a037b297f34c91bd852c527340da7254a">journal_init</a></div><div class="ttdeci">int journal_init(struct super_block *, const char *j_dev_name, int old_format, unsigned int)</div><div class="ttdef"><b>Definition:</b> journal.c:2718</div></div>
<div class="ttc" id="reiserfs_8h_html_a83390ea91e66867341737a681591baad"><div class="ttname"><a href="reiserfs_8h.html#a83390ea91e66867341737a681591baad">reiserfs_free_jh</a></div><div class="ttdeci">void reiserfs_free_jh(struct buffer_head *bh)</div><div class="ttdef"><b>Definition:</b> journal.c:730</div></div>
<div class="ttc" id="reiserfs_8h_html_aa9129d38d59a79460f0e94689564911b"><div class="ttname"><a href="reiserfs_8h.html#aa9129d38d59a79460f0e94689564911b">print_bmap_block</a></div><div class="ttdeci">void print_bmap_block(int i, char *data, int size, int silent)</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_a62112edc64000ce2979fadcd5401984b"><div class="ttname"><a href="structreiserfs__sb__info.html#a62112edc64000ce2979fadcd5401984b">reiserfs_sb_info::s_bmaps</a></div><div class="ttdeci">int s_bmaps</div><div class="ttdef"><b>Definition:</b> reiserfs.h:596</div></div>
<div class="ttc" id="reiserfs_8h_html_a2aa0a9d931c009df12e8103187aa87c8"><div class="ttname"><a href="reiserfs_8h.html#a2aa0a9d931c009df12e8103187aa87c8">reiserfs_do_truncate</a></div><div class="ttdeci">int reiserfs_do_truncate(struct reiserfs_transaction_handle *th, struct inode *inode, struct page *, int update_timestamps)</div><div class="ttdef"><b>Definition:</b> stree.c:1862</div></div>
<div class="ttc" id="reiserfs_8h_html_abc525204c07d1774902248af7f34e479"><div class="ttname"><a href="reiserfs_8h.html#abc525204c07d1774902248af7f34e479">s_v1</a></div><div class="ttdeci">struct reiserfs_super_block_v1 s_v1</div><div class="ttdef"><b>Definition:</b> reiserfs.h:903</div></div>
<div class="ttc" id="hpfs_2super_8c_html_ab8d9243816c39ae44a406c55cba5d2de"><div class="ttname"><a href="hpfs_2super_8c.html#ab8d9243816c39ae44a406c55cba5d2de">mark_dirty</a></div><div class="ttdeci">static void mark_dirty(struct super_block *s, int remount)</div><div class="ttdef"><b>Definition:</b> super.c:22</div></div>
<div class="ttc" id="reiserfs_8h_html_af2c4d7e7a9065d5c2b940eaa7ca7a824"><div class="ttname"><a href="reiserfs_8h.html#af2c4d7e7a9065d5c2b940eaa7ca7a824">reiserfs_update_sd</a></div><div class="ttdeci">static void reiserfs_update_sd(struct reiserfs_transaction_handle *th, struct inode *inode)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:3096</div></div>
<div class="ttc" id="reiserfs_8h_html_a12f0cf258ca7b09eff63744fbec18107"><div class="ttname"><a href="reiserfs_8h.html#a12f0cf258ca7b09eff63744fbec18107">hashf_t</a></div><div class="ttdeci">__u32(* hashf_t)(const signed char *, int)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:431</div></div>
<div class="ttc" id="reiserfs_8h_html_a938f2919fc542842e2ab5dc28f522823"><div class="ttname"><a href="reiserfs_8h.html#a938f2919fc542842e2ab5dc28f522823">is_direntry_le_key</a></div><div class="ttdeci">static int is_direntry_le_key(int version, struct reiserfs_key *key)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1540</div></div>
<div class="ttc" id="reiserfs_8h_html_a165602502b28476804696a40e83722d5"><div class="ttname"><a href="reiserfs_8h.html#a165602502b28476804696a40e83722d5">le_ih_k_type</a></div><div class="ttdeci">static loff_t le_ih_k_type(const struct item_head *ih)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1494</div></div>
<div class="ttc" id="reiserfs_8h_html_a98af7bd7310f2d9ed4ea14d179174b57"><div class="ttname"><a href="reiserfs_8h.html#a98af7bd7310f2d9ed4ea14d179174b57">reiserfs_resize</a></div><div class="ttdeci">int reiserfs_resize(struct super_block *, unsigned long)</div><div class="ttdef"><b>Definition:</b> resize.c:19</div></div>
<div class="ttc" id="reiserfs_8h_html_ae31c47945bf7fcdeb2d305fe3d6c18c3"><div class="ttname"><a href="reiserfs_8h.html#ae31c47945bf7fcdeb2d305fe3d6c18c3">item_body</a></div><div class="ttdeci">static void * item_body(const struct buffer_head *bh, int item_num)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2219</div></div>
<div class="ttc" id="structtree__balance_html_a9dd23ead7f60bcac3551db737629a892"><div class="ttname"><a href="structtree__balance.html#a9dd23ead7f60bcac3551db737629a892">tree_balance::s0num</a></div><div class="ttdeci">int s0num</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2478</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_a113cc4454f01cf38d600d83475682799"><div class="ttname"><a href="structreiserfs__sb__info.html#a113cc4454f01cf38d600d83475682799">reiserfs_sb_info::s_direct2indirect</a></div><div class="ttdeci">int s_direct2indirect</div><div class="ttdef"><b>Definition:</b> reiserfs.h:598</div></div>
<div class="ttc" id="reiserfs_8h_html_a76914864efc914fae2333a5b7de610c6"><div class="ttname"><a href="reiserfs_8h.html#a76914864efc914fae2333a5b7de610c6">__reiserfs_warning</a></div><div class="ttdeci">void __reiserfs_warning(struct super_block *s, const char *id, const char *func, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> prints.c:264</div></div>
<div class="ttc" id="structreiserfs__journal__desc_html_a0f3b2b9973d07a19a80b0d9546e8358d"><div class="ttname"><a href="structreiserfs__journal__desc.html#a0f3b2b9973d07a19a80b0d9546e8358d">reiserfs_journal_desc::j_mount_id</a></div><div class="ttdeci">__le32 j_mount_id</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2714</div></div>
<div class="ttc" id="ntfs_2debug_8h_html_a65b1b0602e37268ec9bc2c240a676c39"><div class="ttname"><a href="ntfs_2debug_8h.html#a65b1b0602e37268ec9bc2c240a676c39">sb</a></div><div class="ttdeci">const struct super_block * sb</div><div class="ttdef"><b>Definition:</b> debug.h:62</div></div>
<div class="ttc" id="reiserfs_8h_html_aaa50232125ae99d092fc11d759e2c684"><div class="ttname"><a href="reiserfs_8h.html#aaa50232125ae99d092fc11d759e2c684">print_bi</a></div><div class="ttdeci">void print_bi(struct buffer_info *bi, char *mes)</div></div>
<div class="ttc" id="structreiserfs__jh_html_ad742dbef5868ec22ba791f7e526c80b4"><div class="ttname"><a href="structreiserfs__jh.html#ad742dbef5868ec22ba791f7e526c80b4">reiserfs_jh::jl</a></div><div class="ttdeci">struct reiserfs_journal_list * jl</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2876</div></div>
<div class="ttc" id="struct____reiserfs__blocknr__hint_html"><div class="ttname"><a href="struct____reiserfs__blocknr__hint.html">__reiserfs_blocknr_hint</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:3264</div></div>
<div class="ttc" id="reiserfs_8h_html_ad8221357dc80c0f8d4f0425625aac410"><div class="ttname"><a href="reiserfs_8h.html#ad8221357dc80c0f8d4f0425625aac410">is_statdata_le_key</a></div><div class="ttdeci">static int is_statdata_le_key(int version, struct reiserfs_key *key)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1555</div></div>
<div class="ttc" id="structbuffer__info_html_ab7adcf61c84c0945f7df382ebcee0bd8"><div class="ttname"><a href="structbuffer__info.html#ab7adcf61c84c0945f7df382ebcee0bd8">buffer_info::tb</a></div><div class="ttdeci">struct tree_balance * tb</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2590</div></div>
<div class="ttc" id="structreiserfs__inode__info_html_ab40cf95011bc71b40236e0fb583f0fa1"><div class="ttname"><a href="structreiserfs__inode__info.html#ab40cf95011bc71b40236e0fb583f0fa1">reiserfs_inode_info::i_prealloc_list</a></div><div class="ttdeci">struct list_head i_prealloc_list</div><div class="ttdef"><b>Definition:</b> reiserfs.h:80</div></div>
<div class="ttc" id="reiserfs_8h_html_a741a6594f2d098e9a77de43163e8bf2b"><div class="ttname"><a href="reiserfs_8h.html#a741a6594f2d098e9a77de43163e8bf2b">TAS_BUFFER_FNS</a></div><div class="ttdeci">TAS_BUFFER_FNS(JDirty, journaled)</div></div>
<div class="ttc" id="reiserfs_8h_html_a2a3acf57dd79e917a2677f5515dff21fab07058d1fea689ec56cbe26875a8991e"><div class="ttname"><a href="reiserfs_8h.html#a2a3acf57dd79e917a2677f5515dff21fab07058d1fea689ec56cbe26875a8991e">BH_JPrepared</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:2825</div></div>
<div class="ttc" id="reiserfs_8h_html_aa5f39071b55cabf448e11994909a5d0f"><div class="ttname"><a href="reiserfs_8h.html#aa5f39071b55cabf448e11994909a5d0f">reiserfs_allocate_list_bitmaps</a></div><div class="ttdeci">int reiserfs_allocate_list_bitmaps(struct super_block *s, struct reiserfs_list_bitmap *, unsigned int)</div><div class="ttdef"><b>Definition:</b> journal.c:280</div></div>
<div class="ttc" id="structtree__balance_html_a5d727d5d0a5ab5e7669faeb674d0f71a"><div class="ttname"><a href="structtree__balance.html#a5d727d5d0a5ab5e7669faeb674d0f71a">tree_balance::rbytes</a></div><div class="ttdeci">int rbytes</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2492</div></div>
<div class="ttc" id="structreiserfs__de__head_html_a29c97b148a4116daec8ffc8812fb6392"><div class="ttname"><a href="structreiserfs__de__head.html#a29c97b148a4116daec8ffc8812fb6392">reiserfs_de_head::deh_location</a></div><div class="ttdeci">__le16 deh_location</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1896</div></div>
<div class="ttc" id="structunfm__nodeinfo_html_a98126b6046dfa862cb89f4f7d69ab450"><div class="ttname"><a href="structunfm__nodeinfo.html#a98126b6046dfa862cb89f4f7d69ab450">unfm_nodeinfo::unfm_freespace</a></div><div class="ttdeci">unsigned short unfm_freespace</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1136</div></div>
<div class="ttc" id="reiserfs_8h_html_adcb55645b0b93a5ea67b60798a9c1515"><div class="ttname"><a href="reiserfs_8h.html#adcb55645b0b93a5ea67b60798a9c1515">journal_release</a></div><div class="ttdeci">int journal_release(struct reiserfs_transaction_handle *, struct super_block *)</div><div class="ttdef"><b>Definition:</b> journal.c:1977</div></div>
<div class="ttc" id="reiserfs_8h_html_a56d09856772826b8a556a73eb40c25bb"><div class="ttname"><a href="reiserfs_8h.html#a56d09856772826b8a556a73eb40c25bb">reiserfs_proc_info_data_t</a></div><div class="ttdeci">struct reiserfs_proc_info_data reiserfs_proc_info_data_t</div></div>
<div class="ttc" id="structreiserfs__journal__cnode_html_ad5ce4dc25327c329846b7d4b77c7a102"><div class="ttname"><a href="structreiserfs__journal__cnode.html#ad5ce4dc25327c329846b7d4b77c7a102">reiserfs_journal_cnode::hnext</a></div><div class="ttdeci">struct reiserfs_journal_cnode * hnext</div><div class="ttdef"><b>Definition:</b> reiserfs.h:241</div></div>
<div class="ttc" id="structtreepath_html_adb94be694cdafa6bbf9f0f0357faddca"><div class="ttname"><a href="structtreepath.html#adb94be694cdafa6bbf9f0f0357faddca">treepath::pos_in_item</a></div><div class="ttdeci">int pos_in_item</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2136</div></div>
<div class="ttc" id="structvirtual__item_html_a373cb0800cd3fbf605d41272ba312318"><div class="ttname"><a href="structvirtual__item.html#a373cb0800cd3fbf605d41272ba312318">virtual_item::vi_new_data</a></div><div class="ttdeci">const void * vi_new_data</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2343</div></div>
<div class="ttc" id="structstat__data__v1_html_a730e52fecb3b470693d2b7fe9ca0dbba"><div class="ttname"><a href="structstat__data__v1.html#a730e52fecb3b470693d2b7fe9ca0dbba">stat_data_v1::sd_gid</a></div><div class="ttdeci">__le16 sd_gid</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1714</div></div>
<div class="ttc" id="reiserfs_8h_html_a060395f2a2adc5ad370c4fde15b3ba9e"><div class="ttname"><a href="reiserfs_8h.html#a060395f2a2adc5ad370c4fde15b3ba9e">replace_key</a></div><div class="ttdeci">void replace_key(struct tree_balance *tb, struct buffer_head *, int, struct buffer_head *, int)</div><div class="ttdef"><b>Definition:</b> do_balan.c:1563</div></div>
<div class="ttc" id="summary_8h_html_adaf683eb12983f696904c6c0c0002721"><div class="ttname"><a href="summary_8h.html#adaf683eb12983f696904c6c0c0002721">next</a></div><div class="ttdeci">union jffs2_sum_mem * next</div><div class="ttdef"><b>Definition:</b> summary.h:847</div></div>
<div class="ttc" id="structdisk__child_html"><div class="ttname"><a href="structdisk__child.html">disk_child</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:2035</div></div>
<div class="ttc" id="reiserfs_8h_html_a069fd69f5a3f514b4daec09d11d154a7"><div class="ttname"><a href="reiserfs_8h.html#a069fd69f5a3f514b4daec09d11d154a7">PATH_LAST_POSITION</a></div><div class="ttdeci">#define PATH_LAST_POSITION(path)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2160</div></div>
<div class="ttc" id="structreiserfs__journal__cnode_html_a41d2457773f9969e87c39015ac330529"><div class="ttname"><a href="structreiserfs__journal__cnode.html#a41d2457773f9969e87c39015ac330529">reiserfs_journal_cnode::prev</a></div><div class="ttdeci">struct reiserfs_journal_cnode * prev</div><div class="ttdef"><b>Definition:</b> reiserfs.h:239</div></div>
<div class="ttc" id="structreiserfs__journal_html_a6dbfa8964373e4167d70f8e9d36770e5"><div class="ttname"><a href="structreiserfs__journal.html#a6dbfa8964373e4167d70f8e9d36770e5">reiserfs_journal::j_header_bh</a></div><div class="ttdeci">struct buffer_head * j_header_bh</div><div class="ttdef"><b>Definition:</b> reiserfs.h:332</div></div>
<div class="ttc" id="reiserfs_8h_html_a7355dabff177c8c0a922edcba440caba"><div class="ttname"><a href="reiserfs_8h.html#a7355dabff177c8c0a922edcba440caba">journal_begin</a></div><div class="ttdeci">int journal_begin(struct reiserfs_transaction_handle *, struct super_block *sb, unsigned long)</div><div class="ttdef"><b>Definition:</b> journal.c:3216</div></div>
<div class="ttc" id="reiserfs_8h_html_ac6621bc98c1a611e1b1b516fbe8e5e05"><div class="ttname"><a href="reiserfs_8h.html#ac6621bc98c1a611e1b1b516fbe8e5e05">reiserfs_cancel_old_flush</a></div><div class="ttdeci">void reiserfs_cancel_old_flush(struct super_block *s)</div><div class="ttdef"><b>Definition:</b> super.c:136</div></div>
<div class="ttc" id="reiserfs_8h_html_af605ee607cdcf8f8bc2e661160f1d5d5"><div class="ttname"><a href="reiserfs_8h.html#af605ee607cdcf8f8bc2e661160f1d5d5">item_head</a></div><div class="ttdeci">static struct item_head * item_head(const struct buffer_head *bh, int item_num)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2197</div></div>
<div class="ttc" id="structreiserfs__journal_html_a49327501fd0885551e8a18d849a320a5"><div class="ttname"><a href="structreiserfs__journal.html#a49327501fd0885551e8a18d849a320a5">reiserfs_journal::j_num_work_lists</a></div><div class="ttdeci">int j_num_work_lists</div><div class="ttdef"><b>Definition:</b> reiserfs.h:381</div></div>
<div class="ttc" id="structreiserfs__dir__entry_html_a597bfef6af11143160d780c956d1388e"><div class="ttname"><a href="structreiserfs__dir__entry.html#a597bfef6af11143160d780c956d1388e">reiserfs_dir_entry::de_namelen</a></div><div class="ttdeci">int de_namelen</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1988</div></div>
<div class="ttc" id="structreiserfs__journal__cnode_html_a64b0db6efa359a9fad8d727bba45556e"><div class="ttname"><a href="structreiserfs__journal__cnode.html#a64b0db6efa359a9fad8d727bba45556e">reiserfs_journal_cnode::blocknr</a></div><div class="ttdeci">__u32 blocknr</div><div class="ttdef"><b>Definition:</b> reiserfs.h:231</div></div>
<div class="ttc" id="structreiserfs__journal_html_afc67211e1a1eea132a2aeca93b57d846"><div class="ttname"><a href="structreiserfs__journal.html#afc67211e1a1eea132a2aeca93b57d846">reiserfs_journal::j_max_batch</a></div><div class="ttdeci">unsigned int j_max_batch</div><div class="ttdef"><b>Definition:</b> reiserfs.h:360</div></div>
<div class="ttc" id="reiserfs_8h_html_a76f10759afd7f50cba641a626645d3ba"><div class="ttname"><a href="reiserfs_8h.html#a76f10759afd7f50cba641a626645d3ba">indirect2direct</a></div><div class="ttdeci">int indirect2direct(struct reiserfs_transaction_handle *, struct inode *, struct page *, struct treepath *, const struct cpu_key *, loff_t, char *)</div><div class="ttdef"><b>Definition:</b> tail_conversion.c:202</div></div>
<div class="ttc" id="reiserfs_8h_html_a05b999f8f783c39fae7f82e29b684476"><div class="ttname"><a href="reiserfs_8h.html#a05b999f8f783c39fae7f82e29b684476">search_by_key</a></div><div class="ttdeci">int search_by_key(struct super_block *, const struct cpu_key *, struct treepath *, int)</div><div class="ttdef"><b>Definition:</b> stree.c:588</div></div>
<div class="ttc" id="reiserfs_8h_html_a2fe996e622d3d304e120ea5413931694"><div class="ttname"><a href="reiserfs_8h.html#a2fe996e622d3d304e120ea5413931694">reiserfs_readdir_inode</a></div><div class="ttdeci">int reiserfs_readdir_inode(struct inode *, struct dir_context *)</div><div class="ttdef"><b>Definition:</b> dir.c:60</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_abb3eb74c219233dbee19bdc773eecfb2"><div class="ttname"><a href="structreiserfs__sb__info.html#abb3eb74c219233dbee19bdc773eecfb2">reiserfs_sb_info::s_ap_bitmap</a></div><div class="ttdeci">struct reiserfs_bitmap_info * s_ap_bitmap</div><div class="ttdef"><b>Definition:</b> reiserfs.h:524</div></div>
<div class="ttc" id="reiserfs_8h_html_a9f4ba55040202b318137a6dedc21579b"><div class="ttname"><a href="reiserfs_8h.html#a9f4ba55040202b318137a6dedc21579b">set_le_ih_k_type</a></div><div class="ttdeci">static void set_le_ih_k_type(struct item_head *ih, int type)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1535</div></div>
<div class="ttc" id="structbuffer__info_html_a49e049192e9f74676cd0af1acc5db6c8"><div class="ttname"><a href="structbuffer__info.html#a49e049192e9f74676cd0af1acc5db6c8">buffer_info::bi_position</a></div><div class="ttdeci">int bi_position</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2593</div></div>
<div class="ttc" id="reiserfs_8h_html_a0c6b2cad56d79cec62384dda564b89a0"><div class="ttname"><a href="reiserfs_8h.html#a0c6b2cad56d79cec62384dda564b89a0">reiserfs_add_ordered_list</a></div><div class="ttdeci">int reiserfs_add_ordered_list(struct inode *inode, struct buffer_head *bh)</div><div class="ttdef"><b>Definition:</b> journal.c:787</div></div>
<div class="ttc" id="structvirtual__node_html_a7a265c6552d8841ff3f11c46df30eddf"><div class="ttname"><a href="structvirtual__node.html#a7a265c6552d8841ff3f11c46df30eddf">virtual_node::vn_size</a></div><div class="ttdeci">short vn_size</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2357</div></div>
<div class="ttc" id="exec_8c_html_a36dcaf63ad8fe9783c81b418943e2346"><div class="ttname"><a href="exec_8c.html#a36dcaf63ad8fe9783c81b418943e2346">count</a></div><div class="ttdeci">static int count(struct user_arg_ptr argv, int max)</div><div class="ttdef"><b>Definition:</b> exec.c:470</div></div>
<div class="ttc" id="structtree__balance_html"><div class="ttname"><a href="structtree__balance.html">tree_balance</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:2404</div></div>
<div class="ttc" id="structreiserfs__journal_html_a1e9c578314b0327a28d771f861c09fd3"><div class="ttname"><a href="structreiserfs__journal.html#a1e9c578314b0327a28d771f861c09fd3">reiserfs_journal::j_first</a></div><div class="ttdeci">struct reiserfs_journal_cnode * j_first</div><div class="ttdef"><b>Definition:</b> reiserfs.h:302</div></div>
<div class="ttc" id="structreiserfs__key_html_ab16c2159abec804a6f3c0bab0713576b"><div class="ttname"><a href="structreiserfs__key.html#ab16c2159abec804a6f3c0bab0713576b">reiserfs_key::k_offset_v1</a></div><div class="ttdeci">struct offset_v1 k_offset_v1</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1293</div></div>
<div class="ttc" id="reiserfs_8h_html_a5e662d62a78eae945f3ca9dbc067281b"><div class="ttname"><a href="reiserfs_8h.html#a5e662d62a78eae945f3ca9dbc067281b">copy_key</a></div><div class="ttdeci">static void copy_key(struct reiserfs_key *to, const struct reiserfs_key *from)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2993</div></div>
<div class="ttc" id="reiserfs_8h_html_a43be9efbd93c512df923fc05fda89444"><div class="ttname"><a href="reiserfs_8h.html#a43be9efbd93c512df923fc05fda89444">leaf_insert_into_buf</a></div><div class="ttdeci">void leaf_insert_into_buf(struct buffer_info *bi, int before, struct item_head *const inserted_item_ih, const char *const inserted_item_body, int zeros_number)</div><div class="ttdef"><b>Definition:</b> lbalance.c:901</div></div>
<div class="ttc" id="reiserfs_8h_html_a7d307f9bc1e70e2e8a593757e06256c0"><div class="ttname"><a href="reiserfs_8h.html#a7d307f9bc1e70e2e8a593757e06256c0">reiserfs_iget</a></div><div class="ttdeci">struct inode * reiserfs_iget(struct super_block *s, const struct cpu_key *key)</div><div class="ttdef"><b>Definition:</b> inode.c:1641</div></div>
<div class="ttc" id="structreiserfs__transaction__handle_html_ade9aa7a44dcce4863915d8dfc8b370f7"><div class="ttname"><a href="structreiserfs__transaction__handle.html#ade9aa7a44dcce4863915d8dfc8b370f7">reiserfs_transaction_handle::t_blocks_allocated</a></div><div class="ttdeci">int t_blocks_allocated</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2855</div></div>
<div class="ttc" id="structstat__data__v1_html_a090615f64d42777aa82de70365d3f998"><div class="ttname"><a href="structstat__data__v1.html#a090615f64d42777aa82de70365d3f998">stat_data_v1::sd_uid</a></div><div class="ttdeci">__le16 sd_uid</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1713</div></div>
<div class="ttc" id="reiserfs_8h_html_a09d5f52e00d6dacf0bbcc53e1a2f2a85a900427c872d5b43ca863d8c7c3c5f193"><div class="ttname"><a href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a900427c872d5b43ca863d8c7c3c5f193">REISERFS_BARRIER_NONE</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:699</div></div>
<div class="ttc" id="structreiserfs__journal__cnode_html_a8ec3fdd91d21341bfcbc450d94b94235"><div class="ttname"><a href="structreiserfs__journal__cnode.html#a8ec3fdd91d21341bfcbc450d94b94235">reiserfs_journal_cnode::jlist</a></div><div class="ttdeci">struct reiserfs_journal_list * jlist</div><div class="ttdef"><b>Definition:</b> reiserfs.h:236</div></div>
<div class="ttc" id="structreiserfs__iget__args_html"><div class="ttname"><a href="structreiserfs__iget__args.html">reiserfs_iget_args</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:2691</div></div>
<div class="ttc" id="reiserfs_8h_html_abeed81412aedf88b6a7fdd560f944d77"><div class="ttname"><a href="reiserfs_8h.html#abeed81412aedf88b6a7fdd560f944d77">reiserfs_init_bitmap_cache</a></div><div class="ttdeci">int reiserfs_init_bitmap_cache(struct super_block *sb)</div><div class="ttdef"><b>Definition:</b> bitmap.c:1454</div></div>
<div class="ttc" id="reiserfs_8h_html_acffafbcd9e9d400a9018c23375afed69"><div class="ttname"><a href="reiserfs_8h.html#acffafbcd9e9d400a9018c23375afed69">reiserfs_write_unlock_nested</a></div><div class="ttdeci">int __must_check reiserfs_write_unlock_nested(struct super_block *s)</div><div class="ttdef"><b>Definition:</b> lock.c:52</div></div>
<div class="ttc" id="reiserfs_8h_html_ac0b3a53c1c87a383fa61bcf8246e3174"><div class="ttname"><a href="reiserfs_8h.html#ac0b3a53c1c87a383fa61bcf8246e3174">reiserfs_fh_to_parent</a></div><div class="ttdeci">struct dentry * reiserfs_fh_to_parent(struct super_block *sb, struct fid *fid, int fh_len, int fh_type)</div><div class="ttdef"><b>Definition:</b> inode.c:1721</div></div>
<div class="ttc" id="structdirentry__uarea_html"><div class="ttname"><a href="structdirentry__uarea.html">direntry_uarea</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:2374</div></div>
<div class="ttc" id="reiserfs_8h_html_addbc26dd92a0be29bd61159488b08312"><div class="ttname"><a href="reiserfs_8h.html#addbc26dd92a0be29bd61159488b08312">reiserfs_cut_from_item</a></div><div class="ttdeci">int reiserfs_cut_from_item(struct reiserfs_transaction_handle *th, struct treepath *path, struct cpu_key *key, struct inode *inode, struct page *page, loff_t new_file_size)</div><div class="ttdef"><b>Definition:</b> stree.c:1622</div></div>
<div class="ttc" id="ctree_8h_html_aa668e7809c8e0ee68dd5049ead875006"><div class="ttname"><a href="ctree_8h.html#aa668e7809c8e0ee68dd5049ead875006">key</a></div><div class="ttdeci">struct btrfs_disk_key key</div><div class="ttdef"><b>Definition:</b> ctree.h:105</div></div>
<div class="ttc" id="structreiserfs__journal_html_ae2a95d794d66774728119051ce01c167"><div class="ttname"><a href="structreiserfs__journal.html#ae2a95d794d66774728119051ce01c167">reiserfs_journal::j_list_bitmap_index</a></div><div class="ttdeci">int j_list_bitmap_index</div><div class="ttdef"><b>Definition:</b> reiserfs.h:342</div></div>
<div class="ttc" id="structreiserfs__inode__info_html_ac8d6afc2a40eb51764751457880c3e76"><div class="ttname"><a href="structreiserfs__inode__info.html#ac8d6afc2a40eb51764751457880c3e76">reiserfs_inode_info::openers</a></div><div class="ttdeci">atomic_t openers</div><div class="ttdef"><b>Definition:</b> reiserfs.h:96</div></div>
<div class="ttc" id="structreiserfs__super__block__v1_html_a4e9bb5d84c394e41dbc8b76a3297a936"><div class="ttname"><a href="structreiserfs__super__block__v1.html#a4e9bb5d84c394e41dbc8b76a3297a936">reiserfs_super_block_v1::s_fs_state</a></div><div class="ttdeci">__le16 s_fs_state</div><div class="ttdef"><b>Definition:</b> reiserfs.h:999</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_a90e1c9750d6494fa23a1e104772fbd81"><div class="ttname"><a href="structreiserfs__sb__info.html#a90e1c9750d6494fa23a1e104772fbd81">reiserfs_sb_info::lock_depth</a></div><div class="ttdeci">int lock_depth</div><div class="ttdef"><b>Definition:</b> reiserfs.h:538</div></div>
<div class="ttc" id="structreiserfs__key_html_aec914444597d34590eade817c6496158"><div class="ttname"><a href="structreiserfs__key.html#aec914444597d34590eade817c6496158">reiserfs_key::k_offset_v2</a></div><div class="ttdeci">struct offset_v2 k_offset_v2</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1294</div></div>
<div class="ttc" id="structstat__data_html_aa5c059e561159c4e6afe211cb59987ee"><div class="ttname"><a href="structstat__data.html#aa5c059e561159c4e6afe211cb59987ee">stat_data::sd_mtime</a></div><div class="ttdeci">__le32 sd_mtime</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1803</div></div>
<div class="ttc" id="structtree__balance_html_a95d064ebd99b5a4f42818ff98d25778b"><div class="ttname"><a href="structtree__balance.html#a95d064ebd99b5a4f42818ff98d25778b">tree_balance::lbytes</a></div><div class="ttdeci">int lbytes</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2485</div></div>
<div class="ttc" id="reiserfs_8h_html_ab25b3acfc9d572a1805e224c3eecdb09"><div class="ttname"><a href="reiserfs_8h.html#ab25b3acfc9d572a1805e224c3eecdb09">fix_nodes</a></div><div class="ttdeci">int fix_nodes(int n_op_mode, struct tree_balance *tb, struct item_head *ins_ih, const void *)</div><div class="ttdef"><b>Definition:</b> fix_node.c:2549</div></div>
<div class="ttc" id="structreiserfs__transaction__handle_html_a4b9b9cd0aea008670abeedf79708421b"><div class="ttname"><a href="structreiserfs__transaction__handle.html#a4b9b9cd0aea008670abeedf79708421b">reiserfs_transaction_handle::t_super</a></div><div class="ttdeci">struct super_block * t_super</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2851</div></div>
<div class="ttc" id="structreiserfs__journal_html_a54e8f7e0518918f3053cfd05739f4c6f"><div class="ttname"><a href="structreiserfs__journal.html#a54e8f7e0518918f3053cfd05739f4c6f">reiserfs_journal::j_max_trans_age</a></div><div class="ttdeci">unsigned int j_max_trans_age</div><div class="ttdef"><b>Definition:</b> reiserfs.h:366</div></div>
<div class="ttc" id="reiserfs_8h_html_a1c52a4fb22f47e4db29dab3fec7e50b2"><div class="ttname"><a href="reiserfs_8h.html#a1c52a4fb22f47e4db29dab3fec7e50b2">reiserfs_check_lock_depth</a></div><div class="ttdeci">void reiserfs_check_lock_depth(struct super_block *s, char *caller)</div><div class="ttdef"><b>Definition:</b> lock.c:87</div></div>
<div class="ttc" id="structbuffer__info_html_a9c2824f74e9510fa592c8b07f3746ece"><div class="ttname"><a href="structbuffer__info.html#a9c2824f74e9510fa592c8b07f3746ece">buffer_info::bi_bh</a></div><div class="ttdeci">struct buffer_head * bi_bh</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2591</div></div>
<div class="ttc" id="struct____reiserfs__blocknr__hint_html_ae18af36b6674de6e657c0b344575c77f"><div class="ttname"><a href="struct____reiserfs__blocknr__hint.html#ae18af36b6674de6e657c0b344575c77f">__reiserfs_blocknr_hint::prealloc_size</a></div><div class="ttdeci">int prealloc_size</div><div class="ttdef"><b>Definition:</b> reiserfs.h:3296</div></div>
<div class="ttc" id="reiserfs_8h_html_acba269526322def454e6b81740de8a72"><div class="ttname"><a href="reiserfs_8h.html#acba269526322def454e6b81740de8a72">reiserfs_get_unused_objectid</a></div><div class="ttdeci">__u32 reiserfs_get_unused_objectid(struct reiserfs_transaction_handle *th)</div><div class="ttdef"><b>Definition:</b> objectid.c:49</div></div>
<div class="ttc" id="structproc__dir__entry_html"><div class="ttname"><a href="structproc__dir__entry.html">proc_dir_entry</a></div><div class="ttdef"><b>Definition:</b> internal.h:34</div></div>
<div class="ttc" id="reiserfs_8h_html_af41e4f85336d8246d0d9695dbfb4d3b9"><div class="ttname"><a href="reiserfs_8h.html#af41e4f85336d8246d0d9695dbfb4d3b9">reiserfs_abort</a></div><div class="ttdeci">void reiserfs_abort(struct super_block *sb, int errno, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> prints.c:397</div></div>
<div class="ttc" id="structreiserfs__bitmap__info_html_a43f466f0b7ba7829eda0763419fce384"><div class="ttname"><a href="structreiserfs__bitmap__info.html#a43f466f0b7ba7829eda0763419fce384">reiserfs_bitmap_info::free_count</a></div><div class="ttdeci">__u32 free_count</div><div class="ttdef"><b>Definition:</b> reiserfs.h:434</div></div>
<div class="ttc" id="reiserfs_8h_html_a7b4a97cd3439f6a2e54e961d49dccddb"><div class="ttname"><a href="reiserfs_8h.html#a7b4a97cd3439f6a2e54e961d49dccddb">copy_item_head</a></div><div class="ttdeci">void copy_item_head(struct item_head *to, const struct item_head *from)</div><div class="ttdef"><b>Definition:</b> stree.c:30</div></div>
<div class="ttc" id="structblock__head_html_ad07c0b0a815f7e0288a5870cdb7d9273"><div class="ttname"><a href="structblock__head.html#ad07c0b0a815f7e0288a5870cdb7d9273">block_head::blk_reserved</a></div><div class="ttdeci">__le16 blk_reserved</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1649</div></div>
<div class="ttc" id="structdirentry__uarea_html_a9a857bdeca38dca2366ad43a9bac8499"><div class="ttname"><a href="structdirentry__uarea.html#a9a857bdeca38dca2366ad43a9bac8499">direntry_uarea::flags</a></div><div class="ttdeci">int flags</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2375</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_aee26edc42ec0d179110d074f1441b26a"><div class="ttname"><a href="structreiserfs__sb__info.html#aee26edc42ec0d179110d074f1441b26a">reiserfs_sb_info::priv_root</a></div><div class="ttdeci">struct dentry * priv_root</div><div class="ttdef"><b>Definition:</b> reiserfs.h:617</div></div>
<div class="ttc" id="reiserfs_8h_html_abb8e64396a169dde8e409c706a3f2bfb"><div class="ttname"><a href="reiserfs_8h.html#abb8e64396a169dde8e409c706a3f2bfb">reiserfs_get_parent</a></div><div class="ttdeci">struct dentry * reiserfs_get_parent(struct dentry *)</div><div class="ttdef"><b>Definition:</b> namei.c:397</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_a5c0085c15ece0dea445a0614604a2d7b"><div class="ttname"><a href="structreiserfs__sb__info.html#a5c0085c15ece0dea445a0614604a2d7b">reiserfs_sb_info::s_wait</a></div><div class="ttdeci">wait_queue_head_t s_wait</div><div class="ttdef"><b>Definition:</b> reiserfs.h:582</div></div>
<div class="ttc" id="structreiserfs__de__head_html_a8fc4b9b72db5d51c97419763e0395288"><div class="ttname"><a href="structreiserfs__de__head.html#a8fc4b9b72db5d51c97419763e0395288">reiserfs_de_head::deh_state</a></div><div class="ttdeci">__le16 deh_state</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1902</div></div>
<div class="ttc" id="reiserfs_8h_html_a63f109110f80024832d4504d659aaa85"><div class="ttname"><a href="reiserfs_8h.html#a63f109110f80024832d4504d659aaa85">__reiserfs_is_journal_aborted</a></div><div class="ttdeci">static int __reiserfs_is_journal_aborted(struct reiserfs_journal *journal)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:761</div></div>
<div class="ttc" id="reiserfs_8h_html_a4d1ad07d37690ada8e1f4a549a158f5d"><div class="ttname"><a href="reiserfs_8h.html#a4d1ad07d37690ada8e1f4a549a158f5d">reiserfs_persistent_transaction</a></div><div class="ttdeci">struct reiserfs_transaction_handle * reiserfs_persistent_transaction(struct super_block *, int count)</div><div class="ttdef"><b>Definition:</b> journal.c:3141</div></div>
<div class="ttc" id="structreiserfs__journal_html_a82f1e232a154b1b59e1d0814cba8dfbb"><div class="ttname"><a href="structreiserfs__journal.html#a82f1e232a154b1b59e1d0814cba8dfbb">reiserfs_journal::j_mount_id</a></div><div class="ttdeci">unsigned long j_mount_id</div><div class="ttdef"><b>Definition:</b> reiserfs.h:312</div></div>
<div class="ttc" id="reiserfs_8h_html_aa979f8afc12407cb4954a40a2be8fa27a52f680e736e07a95e961d84611ca30af"><div class="ttname"><a href="reiserfs_8h.html#aa979f8afc12407cb4954a40a2be8fa27a52f680e736e07a95e961d84611ca30af">J_WRITERS_BLOCKED</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:423</div></div>
<div class="ttc" id="structreiserfs__journal__list_html_ae7e1268a246897c28cee1fedd0a5c0e6"><div class="ttname"><a href="structreiserfs__journal__list.html#ae7e1268a246897c28cee1fedd0a5c0e6">reiserfs_journal_list::j_timestamp</a></div><div class="ttdeci">time_t j_timestamp</div><div class="ttdef"><b>Definition:</b> reiserfs.h:274</div></div>
<div class="ttc" id="structtree__balance_html_ab3917b9da600a824de3ffd13beb266a9"><div class="ttname"><a href="structtree__balance.html#ab3917b9da600a824de3ffd13beb266a9">tree_balance::fs_gen</a></div><div class="ttdeci">int fs_gen</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2540</div></div>
<div class="ttc" id="structreiserfs__journal_html_afe0d7888dbb3c14f62474f5a3661eabe"><div class="ttname"><a href="structreiserfs__journal.html#afe0d7888dbb3c14f62474f5a3661eabe">reiserfs_journal::j_current_jl</a></div><div class="ttdeci">struct reiserfs_journal_list * j_current_jl</div><div class="ttdef"><b>Definition:</b> reiserfs.h:376</div></div>
<div class="ttc" id="sysv_2super_8c_html_a6f5f3480b66f3cc414fd0d6dfcf54046"><div class="ttname"><a href="sysv_2super_8c.html#a6f5f3480b66f3cc414fd0d6dfcf54046">block</a></div><div class="ttdeci">int block</div><div class="ttdef"><b>Definition:</b> super.c:273</div></div>
<div class="ttc" id="structreiserfs__key_html"><div class="ttname"><a href="structreiserfs__key.html">reiserfs_key</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:1287</div></div>
<div class="ttc" id="reiserfs_8h_html_a013c8bdb97ad7fb7fd02955b3e70239f"><div class="ttname"><a href="reiserfs_8h.html#a013c8bdb97ad7fb7fd02955b3e70239f">reiserfs_inode_needs_commit</a></div><div class="ttdeci">int reiserfs_inode_needs_commit(struct inode *)</div></div>
<div class="ttc" id="reiserfs_8h_html_a714feb957a605f854a00c74b309c73de"><div class="ttname"><a href="reiserfs_8h.html#a714feb957a605f854a00c74b309c73de">ih_version</a></div><div class="ttdeci">#define ih_version(ih)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1397</div></div>
<div class="ttc" id="structreiserfs__journal_html_ae3014f096ff176c6286c48e865a1522f"><div class="ttname"><a href="structreiserfs__journal.html#ae3014f096ff176c6286c48e865a1522f">reiserfs_journal::j_len_alloc</a></div><div class="ttdeci">unsigned long j_len_alloc</div><div class="ttdef"><b>Definition:</b> reiserfs.h:319</div></div>
<div class="ttc" id="reiserfs_8h_html_a09d5f52e00d6dacf0bbcc53e1a2f2a85a1a03e62a877c3fff8a09ec784de0a857"><div class="ttname"><a href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a1a03e62a877c3fff8a09ec784de0a857">REISERFS_ATTRS</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:695</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_adb9d2be731b19dfcb1be8f90e3a9521b"><div class="ttname"><a href="structreiserfs__sb__info.html#adb9d2be731b19dfcb1be8f90e3a9521b">reiserfs_sb_info::s_sbh</a></div><div class="ttdeci">struct buffer_head * s_sbh</div><div class="ttdef"><b>Definition:</b> reiserfs.h:520</div></div>
<div class="ttc" id="reiserfs_8h_html_aa5f0b311a6ed68bfb09d068352c9b24d"><div class="ttname"><a href="reiserfs_8h.html#aa5f0b311a6ed68bfb09d068352c9b24d">is_statdata_le_ih</a></div><div class="ttdeci">static int is_statdata_le_ih(struct item_head *ih)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1576</div></div>
<div class="ttc" id="reiserfs_8h_html_aa2bd44ac5d40bc37c53bac529f7ce05e"><div class="ttname"><a href="reiserfs_8h.html#aa2bd44ac5d40bc37c53bac529f7ce05e">reiserfs_read_locked_inode</a></div><div class="ttdeci">void reiserfs_read_locked_inode(struct inode *inode, struct reiserfs_iget_args *args)</div><div class="ttdef"><b>Definition:</b> inode.c:1541</div></div>
<div class="ttc" id="reiserfs_8h_html_aceb589d55eba24b09214fd180a361dc3"><div class="ttname"><a href="reiserfs_8h.html#aceb589d55eba24b09214fd180a361dc3">journal_join_abort</a></div><div class="ttdeci">int journal_join_abort(struct reiserfs_transaction_handle *, struct super_block *sb)</div><div class="ttdef"><b>Definition:</b> journal.c:3202</div></div>
<div class="ttc" id="reiserfs_8h_html_aa21a34a7d4c6cc8ae4b868dbdab8d726"><div class="ttname"><a href="reiserfs_8h.html#aa21a34a7d4c6cc8ae4b868dbdab8d726">reiserfs_cache_bitmap_metadata</a></div><div class="ttdeci">void reiserfs_cache_bitmap_metadata(struct super_block *sb, struct buffer_head *bh, struct reiserfs_bitmap_info *info)</div><div class="ttdef"><b>Definition:</b> bitmap.c:1393</div></div>
<div class="ttc" id="structstat__data_html_ab5fbb0c95aa0809329ae3567183de78d"><div class="ttname"><a href="structstat__data.html#ab5fbb0c95aa0809329ae3567183de78d">stat_data::sd_uid</a></div><div class="ttdeci">__le32 sd_uid</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1800</div></div>
<div class="ttc" id="reiserfs_8h_html_a136bfbe4bac47c74a867eb6e07182f9f"><div class="ttname"><a href="reiserfs_8h.html#a136bfbe4bac47c74a867eb6e07182f9f">do_balance_mark_leaf_dirty</a></div><div class="ttdeci">void do_balance_mark_leaf_dirty(struct tree_balance *tb, struct buffer_head *bh, int flag)</div><div class="ttdef"><b>Definition:</b> do_balan.c:56</div></div>
<div class="ttc" id="structjournal__params_html_a6c02acf250dfebeaa8cc172b14372dbf"><div class="ttname"><a href="structjournal__params.html#a6c02acf250dfebeaa8cc172b14372dbf">journal_params::jp_journal_dev</a></div><div class="ttdeci">__le32 jp_journal_dev</div><div class="ttdef"><b>Definition:</b> reiserfs.h:950</div></div>
<div class="ttc" id="reiserfs_8h_html_a44a8520eb5aefc28dd3167ed5ac1e9df"><div class="ttname"><a href="reiserfs_8h.html#a44a8520eb5aefc28dd3167ed5ac1e9df">TYPE_STAT_DATA</a></div><div class="ttdeci">#define TYPE_STAT_DATA</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1239</div></div>
<div class="ttc" id="send_8h_html_ac21c5e21e8a44a607c448b05de413ed4"><div class="ttname"><a href="send_8h.html#ac21c5e21e8a44a607c448b05de413ed4">version</a></div><div class="ttdeci">__le32 version</div><div class="ttdef"><b>Definition:</b> send.h:4583</div></div>
<div class="ttc" id="structpath__element_html_a0b7560f6da092d48d3cde117d0ab22b2"><div class="ttname"><a href="structpath__element.html#a0b7560f6da092d48d3cde117d0ab22b2">path_element::pe_buffer</a></div><div class="ttdeci">struct buffer_head * pe_buffer</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2086</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_a2d10bddd60b623475686d2cb0bb1808c"><div class="ttname"><a href="structreiserfs__sb__info.html#a2d10bddd60b623475686d2cb0bb1808c">reiserfs_sb_info::s_hash_function</a></div><div class="ttdeci">hashf_t s_hash_function</div><div class="ttdef"><b>Definition:</b> reiserfs.h:549</div></div>
<div class="ttc" id="reiserfs_8h_html_ad09f69dea33069c12159ff2264009fc2"><div class="ttname"><a href="reiserfs_8h.html#ad09f69dea33069c12159ff2264009fc2">k_offset_v1</a></div><div class="ttdeci">struct offset_v1 k_offset_v1</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1292</div></div>
<div class="ttc" id="reiserfs_8h_html_ac71a1d698967f5af5a9c8c1f5d168c48"><div class="ttname"><a href="reiserfs_8h.html#ac71a1d698967f5af5a9c8c1f5d168c48">reiserfs_dir_inode_operations</a></div><div class="ttdeci">const struct inode_operations reiserfs_dir_inode_operations</div><div class="ttdef"><b>Definition:</b> namei.c:1642</div></div>
<div class="ttc" id="structin__core__key_html_a0466e6d88adce4e51ce77411109539f4"><div class="ttname"><a href="structin__core__key.html#a0466e6d88adce4e51ce77411109539f4">in_core_key::k_type</a></div><div class="ttdeci">__u8 k_type</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1303</div></div>
<div class="ttc" id="cifspdu_8h_html_aaa61af584164f982573a6890174ef943"><div class="ttname"><a href="cifspdu_8h.html#aaa61af584164f982573a6890174ef943">data</a></div><div class="ttdeci">__u8 * data</div><div class="ttdef"><b>Definition:</b> cifspdu.h:457</div></div>
<div class="ttc" id="structtree__balance_html_aade8ecab1fe07e2f5589b6514258cabe"><div class="ttname"><a href="structtree__balance.html#aade8ecab1fe07e2f5589b6514258cabe">tree_balance::vn_buf</a></div><div class="ttdeci">char * vn_buf</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2529</div></div>
<div class="ttc" id="reiserfs_8h_html_a14b6f866d67b9e4b0184b865fd9aaa3c"><div class="ttname"><a href="reiserfs_8h.html#a14b6f866d67b9e4b0184b865fd9aaa3c">TYPE_INDIRECT</a></div><div class="ttdeci">#define TYPE_INDIRECT</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1240</div></div>
<div class="ttc" id="reiserfs_8h_html_aa979f8afc12407cb4954a40a2be8fa27abd7ff2a922b3f09d3e0b71264ad75b69"><div class="ttname"><a href="reiserfs_8h.html#aa979f8afc12407cb4954a40a2be8fa27abd7ff2a922b3f09d3e0b71264ad75b69">J_WRITERS_QUEUED</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:424</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_a24f55651511a31e70b1aa0048b2fc8a3"><div class="ttname"><a href="structreiserfs__sb__info.html#a24f55651511a31e70b1aa0048b2fc8a3">reiserfs_sb_info::procdir</a></div><div class="ttdeci">struct proc_dir_entry * procdir</div><div class="ttdef"><b>Definition:</b> reiserfs.h:609</div></div>
<div class="ttc" id="reiserfs_8h_html_aa6ebdf6fc6b6cfe5c48ef6e7688ce9e2"><div class="ttname"><a href="reiserfs_8h.html#aa6ebdf6fc6b6cfe5c48ef6e7688ce9e2">print_bmap</a></div><div class="ttdeci">void print_bmap(struct super_block *s, int silent)</div></div>
<div class="ttc" id="structreiserfs__inode__info_html_ab7e656b6991c4ced1deabc8c8d4193e4"><div class="ttname"><a href="structreiserfs__inode__info.html#ab7e656b6991c4ced1deabc8c8d4193e4">reiserfs_inode_info::i_prealloc_count</a></div><div class="ttdeci">int i_prealloc_count</div><div class="ttdef"><b>Definition:</b> reiserfs.h:77</div></div>
<div class="ttc" id="reiserfs_8h_html_a849778a95da790b103b5f35d542ed7ad"><div class="ttname"><a href="reiserfs_8h.html#a849778a95da790b103b5f35d542ed7ad">reiserfs_inode_flags</a></div><div class="ttdeci">reiserfs_inode_flags</div><div class="ttdef"><b>Definition:</b> reiserfs.h:29</div></div>
<div class="ttc" id="reiserfs_8h_html_aee164f5dc31c6f78f6460b9147dfab91"><div class="ttname"><a href="reiserfs_8h.html#aee164f5dc31c6f78f6460b9147dfab91">s_label</a></div><div class="ttdeci">unsigned char s_label[16]</div><div class="ttdef"><b>Definition:</b> reiserfs.h:910</div></div>
<div class="ttc" id="reiserfs_8h_html_a07a69d819eeff64a782d555c609ff7e7"><div class="ttname"><a href="reiserfs_8h.html#a07a69d819eeff64a782d555c609ff7e7">leaf_paste_entries</a></div><div class="ttdeci">void leaf_paste_entries(struct buffer_info *bi, int item_num, int before, int new_entry_count, struct reiserfs_de_head *new_dehs, const char *records, int paste_size)</div><div class="ttdef"><b>Definition:</b> lbalance.c:1314</div></div>
<div class="ttc" id="reiserfs_8h_html_a7483a2c7dd08cecc2c7dff62efbc769d"><div class="ttname"><a href="reiserfs_8h.html#a7483a2c7dd08cecc2c7dff62efbc769d">reiserfs_file_buffer</a></div><div class="ttdeci">void reiserfs_file_buffer(struct buffer_head *bh, int list)</div></div>
<div class="ttc" id="structitem__head_html_acfa02c91a5f6b7645cc9c0366eeb0956"><div class="ttname"><a href="structitem__head.html#acfa02c91a5f6b7645cc9c0366eeb0956">item_head::ih_key</a></div><div class="ttdeci">struct reiserfs_key ih_key</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1364</div></div>
<div class="ttc" id="send_8h_html_ac6c61fc2d54b5e017432ab28daf5a7a9"><div class="ttname"><a href="send_8h.html#ac6c61fc2d54b5e017432ab28daf5a7a9">len</a></div><div class="ttdeci">__le32 len</div><div class="ttdef"><b>Definition:</b> send.h:4583</div></div>
<div class="ttc" id="reiserfs_8h_html_a464fd58fd314122bf59fd6c8d49daf64"><div class="ttname"><a href="reiserfs_8h.html#a464fd58fd314122bf59fd6c8d49daf64">journal_end</a></div><div class="ttdeci">int journal_end(struct reiserfs_transaction_handle *)</div><div class="ttdef"><b>Definition:</b> journal.c:3380</div></div>
<div class="ttc" id="structblock__head_html_a1a49b861d2f44ae3f72f025c31469ad5"><div class="ttname"><a href="structblock__head.html#a1a49b861d2f44ae3f72f025c31469ad5">block_head::blk_free_space</a></div><div class="ttdeci">__le16 blk_free_space</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1648</div></div>
<div class="ttc" id="structstat__data_html"><div class="ttname"><a href="structstat__data.html">stat_data</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:1795</div></div>
<div class="ttc" id="structreiserfs__journal__list_html_a33610a5057e3f04d7847ef191db2b649"><div class="ttname"><a href="structreiserfs__journal__list.html#a33610a5057e3f04d7847ef191db2b649">reiserfs_journal_list::j_refcount</a></div><div class="ttdeci">int j_refcount</div><div class="ttdef"><b>Definition:</b> reiserfs.h:293</div></div>
<div class="ttc" id="reiserfs_8h_html_a189d1ded9f88c9b13fa33b06d99abf5c"><div class="ttname"><a href="reiserfs_8h.html#a189d1ded9f88c9b13fa33b06d99abf5c">leaf_delete_items</a></div><div class="ttdeci">void leaf_delete_items(struct buffer_info *cur_bi, int last_first, int first, int del_num, int del_bytes)</div><div class="ttdef"><b>Definition:</b> lbalance.c:827</div></div>
<div class="ttc" id="inode_8c_html_abe0d76959e4da14fa8aa24a78e0da45c"><div class="ttname"><a href="inode_8c.html#abe0d76959e4da14fa8aa24a78e0da45c">bmap</a></div><div class="ttdeci">sector_t bmap(struct inode *inode, sector_t block)</div><div class="ttdef"><b>Definition:</b> inode.c:1562</div></div>
<div class="ttc" id="reiserfs_8h_html_a9278b096bf862a17fbfe6c262ffe3e39"><div class="ttname"><a href="reiserfs_8h.html#a9278b096bf862a17fbfe6c262ffe3e39">entry_count</a></div><div class="ttdeci">__u16 entry_count</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2281</div></div>
<div class="ttc" id="structvirtual__item_html"><div class="ttname"><a href="structvirtual__item.html">virtual_item</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:2334</div></div>
<div class="ttc" id="reiserfs_8h_html_a3c68cb1b6b17bc6e286e72cebb8c6c4b"><div class="ttname"><a href="reiserfs_8h.html#a3c68cb1b6b17bc6e286e72cebb8c6c4b">make_le_item_head</a></div><div class="ttdeci">void make_le_item_head(struct item_head *ih, const struct cpu_key *key, int version, loff_t offset, int type, int length, int entry_count)</div><div class="ttdef"><b>Definition:</b> inode.c:137</div></div>
<div class="ttc" id="structvirtual__node_html_a1a24b0db05c384d92345df349af5fa79"><div class="ttname"><a href="structvirtual__node.html#a1a24b0db05c384d92345df349af5fa79">virtual_node::vn_vi</a></div><div class="ttdeci">struct virtual_item * vn_vi</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2370</div></div>
<div class="ttc" id="structreiserfs__journal_html_ab605881b497714809c900b44b657a5c1"><div class="ttname"><a href="structreiserfs__journal.html#ab605881b497714809c900b44b657a5c1">reiserfs_journal::j_bcount</a></div><div class="ttdeci">unsigned long j_bcount</div><div class="ttdef"><b>Definition:</b> reiserfs.h:324</div></div>
<div class="ttc" id="structreiserfs__journal__list_html_a9f9936a49219dd995413557fc4c8ba84"><div class="ttname"><a href="structreiserfs__journal__list.html#a9f9936a49219dd995413557fc4c8ba84">reiserfs_journal_list::j_realblock</a></div><div class="ttdeci">struct reiserfs_journal_cnode * j_realblock</div><div class="ttdef"><b>Definition:</b> reiserfs.h:277</div></div>
<div class="ttc" id="structoffset__v1_html"><div class="ttname"><a href="structoffset__v1.html">offset_v1</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:1251</div></div>
<div class="ttc" id="structreiserfs__journal__cnode_html_a1463b987188780cba17fa6b359bb9c8c"><div class="ttname"><a href="structreiserfs__journal__cnode.html#a1463b987188780cba17fa6b359bb9c8c">reiserfs_journal_cnode::next</a></div><div class="ttdeci">struct reiserfs_journal_cnode * next</div><div class="ttdef"><b>Definition:</b> reiserfs.h:238</div></div>
<div class="ttc" id="structreiserfs__journal__cnode_html_a54106f2c08d2cca697a437275882dc79"><div class="ttname"><a href="structreiserfs__journal__cnode.html#a54106f2c08d2cca697a437275882dc79">reiserfs_journal_cnode::sb</a></div><div class="ttdeci">struct super_block * sb</div><div class="ttdef"><b>Definition:</b> reiserfs.h:228</div></div>
<div class="ttc" id="reiserfs_8h_html_a555cc6ae291141d1d93c7e5c78d2d0c4"><div class="ttname"><a href="reiserfs_8h.html#a555cc6ae291141d1d93c7e5c78d2d0c4">EXTENDED_MAX_HEIGHT</a></div><div class="ttdeci">#define EXTENDED_MAX_HEIGHT</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2098</div></div>
<div class="ttc" id="reiserfs_8h_html_a09d5f52e00d6dacf0bbcc53e1a2f2a85aa9834e801e36a59fd864b739821c78ca"><div class="ttname"><a href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85aa9834e801e36a59fd864b739821c78ca">REISERFS_CONVERT</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:665</div></div>
<div class="ttc" id="reiserfs_8h_html_a18294c5b52c621daf71ba650155a4f33"><div class="ttname"><a href="reiserfs_8h.html#a18294c5b52c621daf71ba650155a4f33">set_de_name_and_namelen</a></div><div class="ttdeci">void set_de_name_and_namelen(struct reiserfs_dir_entry *de)</div><div class="ttdef"><b>Definition:</b> namei.c:72</div></div>
<div class="ttc" id="structvirtual__item_html_a1cabe29edd0e2a2b7aa8c91cfd0153b1"><div class="ttname"><a href="structvirtual__item.html#a1cabe29edd0e2a2b7aa8c91cfd0153b1">virtual_item::vi_ih</a></div><div class="ttdeci">struct item_head * vi_ih</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2341</div></div>
<div class="ttc" id="structreiserfs__super__block__v1_html_a092cea1eb87a57cacdc010e2e0675bdc"><div class="ttname"><a href="structreiserfs__super__block__v1.html#a092cea1eb87a57cacdc010e2e0675bdc">reiserfs_super_block_v1::s_tree_height</a></div><div class="ttdeci">__le16 s_tree_height</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1005</div></div>
<div class="ttc" id="reiserfs_8h_html_a9059fa76eb5e8e86f870405d63e72c4c"><div class="ttname"><a href="reiserfs_8h.html#a9059fa76eb5e8e86f870405d63e72c4c">MAX_HEIGHT</a></div><div class="ttdeci">#define MAX_HEIGHT</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2095</div></div>
<div class="ttc" id="reiserfs_2journal_8c_html_ac7fea8804393fb7204d6cb84b542aa00"><div class="ttname"><a href="reiserfs_2journal_8c.html#ac7fea8804393fb7204d6cb84b542aa00">cur_tb</a></div><div class="ttdeci">struct tree_balance * cur_tb</div></div>
<div class="ttc" id="ctree_8h_html_a07f45a3c5ac818042e4818e9b430f05c"><div class="ttname"><a href="ctree_8h.html#a07f45a3c5ac818042e4818e9b430f05c">level</a></div><div class="ttdeci">u8 level</div><div class="ttdef"><b>Definition:</b> ctree.h:116</div></div>
<div class="ttc" id="structreiserfs__journal_html_a6e182b7c5c8df2afc90481fecdd8bcf6"><div class="ttname"><a href="structreiserfs__journal.html#a6e182b7c5c8df2afc90481fecdd8bcf6">reiserfs_journal::j_last_flush_trans_id</a></div><div class="ttdeci">unsigned j_last_flush_trans_id</div><div class="ttdef"><b>Definition:</b> reiserfs.h:330</div></div>
<div class="ttc" id="reiserfs_8h_html_aa8ae45b40e2a74948632132946cca93f"><div class="ttname"><a href="reiserfs_8h.html#aa8ae45b40e2a74948632132946cca93f">__reiserfs_error</a></div><div class="ttdeci">void __reiserfs_error(struct super_block *s, const char *id, const char *function, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> prints.c:372</div></div>
<div class="ttc" id="structreiserfs__journal__list_html_a5a18f4b4da8602337da5430db90e70e7"><div class="ttname"><a href="structreiserfs__journal__list.html#a5a18f4b4da8602337da5430db90e70e7">reiserfs_journal_list::j_commit_bh</a></div><div class="ttdeci">struct buffer_head * j_commit_bh</div><div class="ttdef"><b>Definition:</b> reiserfs.h:276</div></div>
<div class="ttc" id="reiserfs_8h_html_a43bfdda5012a205dbe2d8b44a2c9aeb9"><div class="ttname"><a href="reiserfs_8h.html#a43bfdda5012a205dbe2d8b44a2c9aeb9">type2uniqueness</a></div><div class="ttdeci">static __u32 type2uniqueness(int type) CONSTF</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1450</div></div>
<div class="ttc" id="structstat__data__v1_html"><div class="ttname"><a href="structstat__data__v1.html">stat_data_v1</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:1710</div></div>
<div class="ttc" id="reiserfs_8h_html_aa7446dc6c1694d660a356415419a9be9"><div class="ttname"><a href="reiserfs_8h.html#aa7446dc6c1694d660a356415419a9be9">reiserfs_mutex_lock_safe</a></div><div class="ttdeci">static void reiserfs_mutex_lock_safe(struct mutex *m, struct super_block *s)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:810</div></div>
<div class="ttc" id="reiserfs_8h_html_a8560b424ea449ece6c2c7ae0b4bf9ab4"><div class="ttname"><a href="reiserfs_8h.html#a8560b424ea449ece6c2c7ae0b4bf9ab4">unp_t</a></div><div class="ttdeci">__le32 unp_t</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1132</div></div>
<div class="ttc" id="structreiserfs__journal_html_a877e3eec0210649968325fc6a272bb53"><div class="ttname"><a href="structreiserfs__journal.html#a877e3eec0210649968325fc6a272bb53">reiserfs_journal::j_errno</a></div><div class="ttdeci">int j_errno</div><div class="ttdef"><b>Definition:</b> reiserfs.h:414</div></div>
<div class="ttc" id="reiserfs_8h_html_aee137f65e23ae211b8f6240c690d0926"><div class="ttname"><a href="reiserfs_8h.html#aee137f65e23ae211b8f6240c690d0926">V1_DIRECT_UNIQUENESS</a></div><div class="ttdeci">#define V1_DIRECT_UNIQUENESS</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1426</div></div>
<div class="ttc" id="reiserfs_8h_html_a1d14324aa3d6c9511a1250799d88d5d7"><div class="ttname"><a href="reiserfs_8h.html#a1d14324aa3d6c9511a1250799d88d5d7">MAX_FEB_SIZE</a></div><div class="ttdeci">#define MAX_FEB_SIZE</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2107</div></div>
<div class="ttc" id="structoffset__v2_html_ab97d4529410db653ac442844ba353053"><div class="ttname"><a href="structoffset__v2.html#ab97d4529410db653ac442844ba353053">offset_v2::v</a></div><div class="ttdeci">__le64 v</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1257</div></div>
<div class="ttc" id="structreiserfs__de__head_html"><div class="ttname"><a href="structreiserfs__de__head.html">reiserfs_de_head</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:1885</div></div>
<div class="ttc" id="structstat__data__v1_html_ae56065e5a88a814e639b4cc2ec8db980"><div class="ttname"><a href="structstat__data__v1.html#ae56065e5a88a814e639b4cc2ec8db980">stat_data_v1::sd_atime</a></div><div class="ttdeci">__le32 sd_atime</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1716</div></div>
<div class="ttc" id="reiserfs_8h_html_ae4862da741fa47ccb6a99ae32ef5701f"><div class="ttname"><a href="reiserfs_8h.html#ae4862da741fa47ccb6a99ae32ef5701f">reiserfs_new_inode</a></div><div class="ttdeci">int reiserfs_new_inode(struct reiserfs_transaction_handle *th, struct inode *dir, umode_t mode, const char *symname, loff_t i_size, struct dentry *dentry, struct inode *inode, struct reiserfs_security_handle *security)</div><div class="ttdef"><b>Definition:</b> inode.c:1925</div></div>
<div class="ttc" id="reiserfs_8h_html_a85a76f845efdbea5dce50b19a6862a7e"><div class="ttname"><a href="reiserfs_8h.html#a85a76f845efdbea5dce50b19a6862a7e">get_inode_item_key_version</a></div><div class="ttdeci">#define get_inode_item_key_version(inode)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1175</div></div>
<div class="ttc" id="reiserfs_8h_html_ae11c7520980f6117cc56daf476e47657"><div class="ttname"><a href="reiserfs_8h.html#ae11c7520980f6117cc56daf476e47657">journal_end_sync</a></div><div class="ttdeci">int journal_end_sync(struct reiserfs_transaction_handle *)</div><div class="ttdef"><b>Definition:</b> journal.c:3518</div></div>
<div class="ttc" id="structreiserfs__super__block_html_a8e51bcece65aad15bd68ace5e7ad9474"><div class="ttname"><a href="structreiserfs__super__block.html#a8e51bcece65aad15bd68ace5e7ad9474">reiserfs_super_block::s_inode_generation</a></div><div class="ttdeci">__le32 s_inode_generation</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1030</div></div>
<div class="ttc" id="reiserfs_8h_html_a09d5f52e00d6dacf0bbcc53e1a2f2a85a0dcbd0a6a4ed5c749a5e08b3b93d69c6"><div class="ttname"><a href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a0dcbd0a6a4ed5c749a5e08b3b93d69c6">REISERFS_ERROR_CONTINUE</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:705</div></div>
<div class="ttc" id="structreiserfs__journal__header_html_a20c255fbfbc3bedd9f0296e64c935824"><div class="ttname"><a href="structreiserfs__journal__header.html#a20c255fbfbc3bedd9f0296e64c935824">reiserfs_journal_header::j_last_flush_trans_id</a></div><div class="ttdeci">__le32 j_last_flush_trans_id</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2748</div></div>
<div class="ttc" id="structreiserfs__super__block__v1_html_a1eaa791e3ddf30070b7c96e253739d27"><div class="ttname"><a href="structreiserfs__super__block__v1.html#a1eaa791e3ddf30070b7c96e253739d27">reiserfs_super_block_v1::s_version</a></div><div class="ttdeci">__le16 s_version</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1016</div></div>
<div class="ttc" id="structvirtual__item_html_af82cba7b591795ba2a9149aaee23d6ca"><div class="ttname"><a href="structvirtual__item.html#af82cba7b591795ba2a9149aaee23d6ca">virtual_item::vi_type</a></div><div class="ttdeci">unsigned short vi_type</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2336</div></div>
<div class="ttc" id="reiserfs_8h_html_a3b09748c0965c583099242d6b0b15901"><div class="ttname"><a href="reiserfs_8h.html#a3b09748c0965c583099242d6b0b15901">tp_item_body</a></div><div class="ttdeci">static void * tp_item_body(const struct treepath *path)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2229</div></div>
<div class="ttc" id="structvirtual__node_html_aaba873b72aaa89ad51b003d7be0d95b7"><div class="ttname"><a href="structvirtual__node.html#aaba873b72aaa89ad51b003d7be0d95b7">virtual_node::vn_nr_item</a></div><div class="ttdeci">unsigned short vn_nr_item</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2351</div></div>
<div class="ttc" id="reiserfs_8h_html_af053124ef6638e77541226c921dd004f"><div class="ttname"><a href="reiserfs_8h.html#af053124ef6638e77541226c921dd004f">reiserfs_symlink_inode_operations</a></div><div class="ttdeci">const struct inode_operations reiserfs_symlink_inode_operations</div><div class="ttdef"><b>Definition:</b> namei.c:1663</div></div>
<div class="ttc" id="structvirtual__node_html_a2e97e12468eb6c066b8c83e0bfd79bec"><div class="ttname"><a href="structvirtual__node.html#a2e97e12468eb6c066b8c83e0bfd79bec">virtual_node::vn_data</a></div><div class="ttdeci">const void * vn_data</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2367</div></div>
<div class="ttc" id="structdisk__child_html_a4d5ae4dcd073e17f07be8918acc46c75"><div class="ttname"><a href="structdisk__child.html#a4d5ae4dcd073e17f07be8918acc46c75">disk_child::dc_size</a></div><div class="ttdeci">__le16 dc_size</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2037</div></div>
<div class="ttc" id="reiserfs_8h_html_a33484167c99e971825098c9557874409"><div class="ttname"><a href="reiserfs_8h.html#a33484167c99e971825098c9557874409">add_le_ih_k_offset</a></div><div class="ttdeci">static void add_le_ih_k_offset(struct item_head *ih, loff_t offset)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1515</div></div>
<div class="ttc" id="reiserfs_8h_html_a92ddb7f95feff3f2a45484b20c6a5840"><div class="ttname"><a href="reiserfs_8h.html#a92ddb7f95feff3f2a45484b20c6a5840">pathrelse</a></div><div class="ttdeci">void pathrelse(struct treepath *search_path)</div><div class="ttdef"><b>Definition:</b> stree.c:377</div></div>
<div class="ttc" id="reiserfs_8h_html_a2960b49de1e1b379bd0aa65af2452fcf"><div class="ttname"><a href="reiserfs_8h.html#a2960b49de1e1b379bd0aa65af2452fcf">reiserfs_allocate_blocknrs</a></div><div class="ttdeci">int reiserfs_allocate_blocknrs(reiserfs_blocknr_hint_t *, b_blocknr_t *, int, int)</div><div class="ttdef"><b>Definition:</b> bitmap.c:1334</div></div>
<div class="ttc" id="structreiserfs__journal_html_aa70ca26840bbe31d5bd3417d84361e19"><div class="ttname"><a href="structreiserfs__journal.html#aa70ca26840bbe31d5bd3417d84361e19">reiserfs_journal::j_dev_mode</a></div><div class="ttdeci">fmode_t j_dev_mode</div><div class="ttdef"><b>Definition:</b> reiserfs.h:305</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_a536081b8b9693365468274b2f8b07007"><div class="ttname"><a href="structreiserfs__sb__info.html#a536081b8b9693365468274b2f8b07007">reiserfs_sb_info::s_generation_counter</a></div><div class="ttdeci">atomic_t s_generation_counter</div><div class="ttdef"><b>Definition:</b> reiserfs.h:584</div></div>
<div class="ttc" id="reiserfs_8h_html_a8fbd456d2dd20c544c6ae4975c274223"><div class="ttname"><a href="reiserfs_8h.html#a8fbd456d2dd20c544c6ae4975c274223">reiserfs_new_unf_blocknrs</a></div><div class="ttdeci">static int reiserfs_new_unf_blocknrs(struct reiserfs_transaction_handle *th, struct inode *inode, b_blocknr_t *new_blocknrs, struct treepath *path, sector_t block)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:3344</div></div>
<div class="ttc" id="reiserfs_8h_html_a09d5f52e00d6dacf0bbcc53e1a2f2a85ab9c3a8df5fff83f5a606c05af14f73c2"><div class="ttname"><a href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85ab9c3a8df5fff83f5a606c05af14f73c2">REISERFS_LARGETAIL</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:650</div></div>
<div class="ttc" id="structreiserfs__journal_html_ad8fe60f6d6785da555cb39f9d834eb3b"><div class="ttname"><a href="structreiserfs__journal.html#ad8fe60f6d6785da555cb39f9d834eb3b">reiserfs_journal::j_must_wait</a></div><div class="ttdeci">int j_must_wait</div><div class="ttdef"><b>Definition:</b> reiserfs.h:345</div></div>
<div class="ttc" id="reiserfs_8h_html_ad819eee928d0e1a88845926672727c81"><div class="ttname"><a href="reiserfs_8h.html#ad819eee928d0e1a88845926672727c81">reiserfs_get_block</a></div><div class="ttdeci">int reiserfs_get_block(struct inode *inode, sector_t block, struct buffer_head *bh_result, int create)</div><div class="ttdef"><b>Definition:</b> inode.c:657</div></div>
<div class="ttc" id="structreiserfs__journal_html_a0a797bb0ea0e5491b8e34659e4163b0d"><div class="ttname"><a href="structreiserfs__journal.html#a0a797bb0ea0e5491b8e34659e4163b0d">reiserfs_journal::j_next_async_flush</a></div><div class="ttdeci">int j_next_async_flush</div><div class="ttdef"><b>Definition:</b> reiserfs.h:351</div></div>
<div class="ttc" id="structreiserfs__super__block_html_a06388ec059ef1cb653c85fc39c52544f"><div class="ttname"><a href="structreiserfs__super__block.html#a06388ec059ef1cb653c85fc39c52544f">reiserfs_super_block::s_flags</a></div><div class="ttdeci">__le32 s_flags</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1033</div></div>
<div class="ttc" id="reiserfs_8h_html_a7a6dac47406663c737862809fcf4d74e"><div class="ttname"><a href="reiserfs_8h.html#a7a6dac47406663c737862809fcf4d74e">reiserfs_node_data</a></div><div class="ttdeci">static void * reiserfs_node_data(const struct buffer_head *bh)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2182</div></div>
<div class="ttc" id="reiserfs_8h_html_afb5381c36d62fc8dd539a01f4a74a686"><div class="ttname"><a href="reiserfs_8h.html#afb5381c36d62fc8dd539a01f4a74a686">reiserfs_file_data_log</a></div><div class="ttdeci">static int reiserfs_file_data_log(struct inode *inode)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2887</div></div>
<div class="ttc" id="reiserfs_8h_html_aa8743da37ca29249b1d6d963dc5159b2"><div class="ttname"><a href="reiserfs_8h.html#aa8743da37ca29249b1d6d963dc5159b2">reiserfs_unmap_buffer</a></div><div class="ttdeci">void reiserfs_unmap_buffer(struct buffer_head *)</div><div class="ttdef"><b>Definition:</b> tail_conversion.c:167</div></div>
<div class="ttc" id="fix__node_8c_html_a8704eb3688ed72bd6ec50fa6bd4637fa"><div class="ttname"><a href="fix__node_8c.html#a8704eb3688ed72bd6ec50fa6bd4637fa">get_neighbors</a></div><div class="ttdeci">static int get_neighbors(struct tree_balance *tb, int h)</div><div class="ttdef"><b>Definition:</b> fix_node.c:2155</div></div>
<div class="ttc" id="structreiserfs__jh_html"><div class="ttname"><a href="structreiserfs__jh.html">reiserfs_jh</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:2875</div></div>
<div class="ttc" id="structreiserfs__journal_html_a65a81e6033ab2e55f2a73bb0c6d0954c"><div class="ttname"><a href="structreiserfs__journal.html#a65a81e6033ab2e55f2a73bb0c6d0954c">reiserfs_journal::j_trans_max</a></div><div class="ttdeci">unsigned int j_trans_max</div><div class="ttdef"><b>Definition:</b> reiserfs.h:357</div></div>
<div class="ttc" id="structcpu__key_html_a124063a384c03a344752aa0371d0c222"><div class="ttname"><a href="structcpu__key.html#a124063a384c03a344752aa0371d0c222">cpu_key::key_length</a></div><div class="ttdeci">int key_length</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1310</div></div>
<div class="ttc" id="reiserfs_8h_html_a212bdf7584c8485d8e67b88205cb91e3"><div class="ttname"><a href="reiserfs_8h.html#a212bdf7584c8485d8e67b88205cb91e3">make_empty_dir_item</a></div><div class="ttdeci">void make_empty_dir_item(char *body, __le32 dirid, __le32 objid, __le32 par_dirid, __le32 par_objid)</div><div class="ttdef"><b>Definition:</b> dir.c:315</div></div>
<div class="ttc" id="structreiserfs__journal_html_af2688773514e397d3f298828a1026d24"><div class="ttname"><a href="structreiserfs__journal.html#af2688773514e397d3f298828a1026d24">reiserfs_journal::j_async_throttle</a></div><div class="ttdeci">atomic_t j_async_throttle</div><div class="ttdef"><b>Definition:</b> reiserfs.h:419</div></div>
<div class="ttc" id="reiserfs_8h_html_a7a27cd57b6894fda1650a419512068d1"><div class="ttname"><a href="reiserfs_8h.html#a7a27cd57b6894fda1650a419512068d1">item_ops</a></div><div class="ttdeci">struct item_operations * item_ops[TYPE_ANY+1]</div><div class="ttdef"><b>Definition:</b> item_ops.c:745</div></div>
<div class="ttc" id="structreiserfs__super__block__v1_html_a61651b8d9a1b83e5e19982b1c976e353"><div class="ttname"><a href="structreiserfs__super__block__v1.html#a61651b8d9a1b83e5e19982b1c976e353">reiserfs_super_block_v1::s_reserved_for_journal</a></div><div class="ttdeci">__le16 s_reserved_for_journal</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1022</div></div>
<div class="ttc" id="structtree__balance_html_aa3cbe30ccbcc9422bbc83828ac9f95b3"><div class="ttname"><a href="structtree__balance.html#aa3cbe30ccbcc9422bbc83828ac9f95b3">tree_balance::tb_vn</a></div><div class="ttdeci">struct virtual_node * tb_vn</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2534</div></div>
<div class="ttc" id="structitem__head_html_ab09ddd23c56e62ab39ff1f468551c5ec"><div class="ttname"><a href="structitem__head.html#ab09ddd23c56e62ab39ff1f468551c5ec">item_head::ih_entry_count</a></div><div class="ttdeci">__le16 ih_entry_count</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1380</div></div>
<div class="ttc" id="structvirtual__node_html_a24afa0271d5f5c5f4842d2280848fd08"><div class="ttname"><a href="structvirtual__node.html#a24afa0271d5f5c5f4842d2280848fd08">virtual_node::vn_affected_item_num</a></div><div class="ttdeci">short vn_affected_item_num</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2362</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_a373af6da8c8f988c92e9aaa974dfa30d"><div class="ttname"><a href="structreiserfs__sb__info.html#a373af6da8c8f988c92e9aaa974dfa30d">reiserfs_sb_info::s_is_unlinked_ok</a></div><div class="ttdeci">int s_is_unlinked_ok</div><div class="ttdef"><b>Definition:</b> reiserfs.h:606</div></div>
<div class="ttc" id="reiserfs_8h_html_a09d5f52e00d6dacf0bbcc53e1a2f2a85a3a23adc9643c69c804fb9c4263637dfd"><div class="ttname"><a href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a3a23adc9643c69c804fb9c4263637dfd">REISERFS_NO_UNHASHED_RELOCATION</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:693</div></div>
<div class="ttc" id="structvirtual__node_html_afce3b63859a4980feb1871bbceb572f1"><div class="ttname"><a href="structvirtual__node.html#afce3b63859a4980feb1871bbceb572f1">virtual_node::vn_pos_in_item</a></div><div class="ttdeci">short vn_pos_in_item</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2363</div></div>
<div class="ttc" id="reiserfs_8h_html_a0313399c6e50402c0966324bc961d2f1"><div class="ttname"><a href="reiserfs_8h.html#a0313399c6e50402c0966324bc961d2f1">root_key</a></div><div class="ttdeci">struct reiserfs_key root_key</div></div>
<div class="ttc" id="reiserfs_8h_html_a340707d69035995c991dfd2de6693360"><div class="ttname"><a href="reiserfs_8h.html#a340707d69035995c991dfd2de6693360">reiserfs_write_lock_nested</a></div><div class="ttdeci">void reiserfs_write_lock_nested(struct super_block *s, int depth)</div><div class="ttdef"><b>Definition:</b> lock.c:70</div></div>
<div class="ttc" id="structreiserfs__journal_html_a25d33382a6314d63b716d2f6b1b3e089"><div class="ttname"><a href="structreiserfs__journal.html#a25d33382a6314d63b716d2f6b1b3e089">reiserfs_journal::j_max_commit_age</a></div><div class="ttdeci">unsigned int j_max_commit_age</div><div class="ttdef"><b>Definition:</b> reiserfs.h:363</div></div>
<div class="ttc" id="reiserfs_8h_html_a3642b9d6d617cfbfd86842b384d0101f"><div class="ttname"><a href="reiserfs_8h.html#a3642b9d6d617cfbfd86842b384d0101f">print_block_head</a></div><div class="ttdeci">void print_block_head(struct buffer_head *bh, char *mes)</div></div>
<div class="ttc" id="reiserfs_8h_html_afa4268e4fd13ac1ce152becac8a58b08"><div class="ttname"><a href="reiserfs_8h.html#afa4268e4fd13ac1ce152becac8a58b08">deh_location</a></div><div class="ttdeci">#define deh_location(p_deh)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1908</div></div>
<div class="ttc" id="structreiserfs__journal__header_html_a6b13e8966265b8ad7de1caf6930ee2f5"><div class="ttname"><a href="structreiserfs__journal__header.html#a6b13e8966265b8ad7de1caf6930ee2f5">reiserfs_journal_header::j_mount_id</a></div><div class="ttdeci">__le32 j_mount_id</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2753</div></div>
<div class="ttc" id="structvirtual__item_html_a7f43914266473b9e4d622a241ec9b83d"><div class="ttname"><a href="structvirtual__item.html#a7f43914266473b9e4d622a241ec9b83d">virtual_item::vi_uarea</a></div><div class="ttdeci">void * vi_uarea</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2344</div></div>
<div class="ttc" id="reiserfs_8h_html_aff8b30122f030ef444959232d1882cba"><div class="ttname"><a href="reiserfs_8h.html#aff8b30122f030ef444959232d1882cba">set_offset_v2_k_offset</a></div><div class="ttdeci">static void set_offset_v2_k_offset(struct offset_v2 *v2, loff_t offset)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1277</div></div>
<div class="ttc" id="reiserfs_8h_html_a849778a95da790b103b5f35d542ed7ada6afad6e1b3c74bdf9c4e9c71cf810c25"><div class="ttname"><a href="reiserfs_8h.html#a849778a95da790b103b5f35d542ed7ada6afad6e1b3c74bdf9c4e9c71cf810c25">i_data_log</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:57</div></div>
<div class="ttc" id="structin__core__key_html_aa30f59ae51019f38ecea646d6b0f6b2e"><div class="ttname"><a href="structin__core__key.html#aa30f59ae51019f38ecea646d6b0f6b2e">in_core_key::k_offset</a></div><div class="ttdeci">__u64 k_offset</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1302</div></div>
<div class="ttc" id="reiserfs_8h_html_aabec935e367343b39df96915f520a9b2"><div class="ttname"><a href="reiserfs_8h.html#aabec935e367343b39df96915f520a9b2">set_le_key_k_offset</a></div><div class="ttdeci">static void set_le_key_k_offset(int version, struct reiserfs_key *key, loff_t offset)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1499</div></div>
<div class="ttc" id="structreiserfs__journal_html_a4a960beb6cfd213bd7dc290c8298be38"><div class="ttname"><a href="structreiserfs__journal.html#a4a960beb6cfd213bd7dc290c8298be38">reiserfs_journal::j_last</a></div><div class="ttdeci">struct reiserfs_journal_cnode * j_last</div><div class="ttdef"><b>Definition:</b> reiserfs.h:299</div></div>
<div class="ttc" id="reiserfs_8h_html_a1f6febedfaaf5d81fbb13f86c514ef28"><div class="ttname"><a href="reiserfs_8h.html#a1f6febedfaaf5d81fbb13f86c514ef28">reiserfs_commit_page</a></div><div class="ttdeci">int reiserfs_commit_page(struct inode *inode, struct page *page, unsigned from, unsigned to)</div><div class="ttdef"><b>Definition:</b> file.c:176</div></div>
<div class="ttc" id="reiserfs_8h_html_a1cba568f04f8856993a5f0182116a477"><div class="ttname"><a href="reiserfs_8h.html#a1cba568f04f8856993a5f0182116a477">reiserfs_allow_writes</a></div><div class="ttdeci">void reiserfs_allow_writes(struct super_block *s)</div><div class="ttdef"><b>Definition:</b> journal.c:2943</div></div>
<div class="ttc" id="structstat__data_html_a60db741ee4962f3024121a52f97ab924"><div class="ttname"><a href="structstat__data.html#a60db741ee4962f3024121a52f97ab924">stat_data::sd_attrs</a></div><div class="ttdeci">__le16 sd_attrs</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1797</div></div>
<div class="ttc" id="structreiserfs__journal_html_addf3a395f6b60d908101ac097ddd8902"><div class="ttname"><a href="structreiserfs__journal.html#addf3a395f6b60d908101ac097ddd8902">reiserfs_journal::j_cnode_free_orig</a></div><div class="ttdeci">struct reiserfs_journal_cnode * j_cnode_free_orig</div><div class="ttdef"><b>Definition:</b> reiserfs.h:374</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_a3e902b029dcc81fa8d9b10b59aed247d"><div class="ttname"><a href="structreiserfs__sb__info.html#a3e902b029dcc81fa8d9b10b59aed247d">reiserfs_sb_info::s_mount_opt</a></div><div class="ttdeci">unsigned long s_mount_opt</div><div class="ttdef"><b>Definition:</b> reiserfs.h:552</div></div>
<div class="ttc" id="structreiserfs__super__block__v1_html_adb63f75cba2c48d46b511c4861ebc92b"><div class="ttname"><a href="structreiserfs__super__block__v1.html#adb63f75cba2c48d46b511c4861ebc92b">reiserfs_super_block_v1::s_oid_maxsize</a></div><div class="ttdeci">__le16 s_oid_maxsize</div><div class="ttdef"><b>Definition:</b> reiserfs.h:983</div></div>
<div class="ttc" id="reiserfs_8h_html_a0d07fbb088439e6e95e30c84c4827d59"><div class="ttname"><a href="reiserfs_8h.html#a0d07fbb088439e6e95e30c84c4827d59">get_left_neighbor_position</a></div><div class="ttdeci">int get_left_neighbor_position(struct tree_balance *tb, int h)</div><div class="ttdef"><b>Definition:</b> do_balan.c:1590</div></div>
<div class="ttc" id="structstat__data_html_a96a4f8acadd7904827e5713ea63fdc9c"><div class="ttname"><a href="structstat__data.html#a96a4f8acadd7904827e5713ea63fdc9c">stat_data::sd_blocks</a></div><div class="ttdeci">__le32 sd_blocks</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1810</div></div>
<div class="ttc" id="structreiserfs__iget__args_html_a91abb1ba0bec5784c31c250c844f832a"><div class="ttname"><a href="structreiserfs__iget__args.html#a91abb1ba0bec5784c31c250c844f832a">reiserfs_iget_args::objectid</a></div><div class="ttdeci">__u32 objectid</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2692</div></div>
<div class="ttc" id="structblock__head_html_a962d0c08395a6e81f5a9028233802f73"><div class="ttname"><a href="structblock__head.html#a962d0c08395a6e81f5a9028233802f73">block_head::blk_level</a></div><div class="ttdeci">__le16 blk_level</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1646</div></div>
<div class="ttc" id="reiserfs_8h_html_af52a53f0ef9bc7c5790028a0f81889d1"><div class="ttname"><a href="reiserfs_8h.html#af52a53f0ef9bc7c5790028a0f81889d1">TYPE_DIRENTRY</a></div><div class="ttdeci">#define TYPE_DIRENTRY</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1242</div></div>
<div class="ttc" id="reiserfs_8h_html_a09d5f52e00d6dacf0bbcc53e1a2f2a85a60d2dda6ef43656863ca29f6d93d4db1"><div class="ttname"><a href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a60d2dda6ef43656863ca29f6d93d4db1">REISERFS_USRQUOTA</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:707</div></div>
<div class="ttc" id="structblock__head_html"><div class="ttname"><a href="structblock__head.html">block_head</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:1645</div></div>
<div class="ttc" id="structitem__head_html"><div class="ttname"><a href="structitem__head.html">item_head</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:1359</div></div>
<div class="ttc" id="reiserfs_8h_html_a29038a7fc175d42736263b3f85730b5f"><div class="ttname"><a href="reiserfs_8h.html#a29038a7fc175d42736263b3f85730b5f">V1_INDIRECT_UNIQUENESS</a></div><div class="ttdeci">#define V1_INDIRECT_UNIQUENESS</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1425</div></div>
<div class="ttc" id="structbuffer__info_html"><div class="ttname"><a href="structbuffer__info.html">buffer_info</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:2589</div></div>
<div class="ttc" id="structreiserfs__super__block_html_adf2dcbcd711aaf4d62530dc73fd2986e"><div class="ttname"><a href="structreiserfs__super__block.html#adf2dcbcd711aaf4d62530dc73fd2986e">reiserfs_super_block::s_lastcheck</a></div><div class="ttdeci">__le32 s_lastcheck</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1039</div></div>
<div class="ttc" id="structjournal__params_html_a3f8d129b7b55dac769db9bd5cc7268ea"><div class="ttname"><a href="structjournal__params.html#a3f8d129b7b55dac769db9bd5cc7268ea">journal_params::jp_journal_magic</a></div><div class="ttdeci">__le32 jp_journal_magic</div><div class="ttdef"><b>Definition:</b> reiserfs.h:962</div></div>
<div class="ttc" id="structreiserfs__journal__list_html"><div class="ttname"><a href="structreiserfs__journal__list.html">reiserfs_journal_list</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:262</div></div>
<div class="ttc" id="reiserfs_8h_html_ac84ab8f1cc1f9c7990fecf622c509e15"><div class="ttname"><a href="reiserfs_8h.html#ac84ab8f1cc1f9c7990fecf622c509e15">V1_SD_UNIQUENESS</a></div><div class="ttdeci">#define V1_SD_UNIQUENESS</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1424</div></div>
<div class="ttc" id="structreiserfs__inode__info_html_ae4a8d0bd6710a283584f657be4eeca02"><div class="ttname"><a href="structreiserfs__inode__info.html#ae4a8d0bd6710a283584f657be4eeca02">reiserfs_inode_info::i_first_direct_byte</a></div><div class="ttdeci">__u32 i_first_direct_byte</div><div class="ttdef"><b>Definition:</b> reiserfs.h:70</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_a97f48be742bb3b33edd6b63561e6701e"><div class="ttname"><a href="structreiserfs__sb__info.html#a97f48be742bb3b33edd6b63561e6701e">reiserfs_sb_info::s_fix_nodes</a></div><div class="ttdeci">int s_fix_nodes</div><div class="ttdef"><b>Definition:</b> reiserfs.h:592</div></div>
<div class="ttc" id="structjournal__params_html"><div class="ttname"><a href="structjournal__params.html">journal_params</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:945</div></div>
<div class="ttc" id="structreiserfs__inode__info_html_a9206d17789076687d2c00a5a1f759ac1"><div class="ttname"><a href="structreiserfs__inode__info.html#a9206d17789076687d2c00a5a1f759ac1">reiserfs_inode_info::vfs_inode</a></div><div class="ttdeci">struct inode vfs_inode</div><div class="ttdef"><b>Definition:</b> reiserfs.h:105</div></div>
<div class="ttc" id="reiserfs_8h_html_a0383e737349f3beaa1281f08c2c2814d"><div class="ttname"><a href="reiserfs_8h.html#a0383e737349f3beaa1281f08c2c2814d">reiserfs_delete_item</a></div><div class="ttdeci">int reiserfs_delete_item(struct reiserfs_transaction_handle *th, struct treepath *path, const struct cpu_key *key, struct inode *inode, struct buffer_head *un_bh)</div><div class="ttdef"><b>Definition:</b> stree.c:1234</div></div>
<div class="ttc" id="reiserfs_8h_html_a95ea4bf9ede449b32208bd63fd2b62fb"><div class="ttname"><a href="reiserfs_8h.html#a95ea4bf9ede449b32208bd63fd2b62fb">reiserfs_prepare_for_journal</a></div><div class="ttdeci">int reiserfs_prepare_for_journal(struct super_block *, struct buffer_head *bh, int wait)</div><div class="ttdef"><b>Definition:</b> journal.c:3950</div></div>
<div class="ttc" id="reiserfs_8h_html_a9d8311084dce3b8ef4ac8dbc2ed4c0f3"><div class="ttname"><a href="reiserfs_8h.html#a9d8311084dce3b8ef4ac8dbc2ed4c0f3">JOURNAL_NUM_BITMAPS</a></div><div class="ttdeci">#define JOURNAL_NUM_BITMAPS</div><div class="ttdef"><b>Definition:</b> reiserfs.h:214</div></div>
<div class="ttc" id="reiserfs_8h_html_a09d5f52e00d6dacf0bbcc53e1a2f2a85a22a590a11963a403e5fe74054e312a31"><div class="ttname"><a href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a22a590a11963a403e5fe74054e312a31">FORCE_TEA_HASH</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:677</div></div>
<div class="ttc" id="structreiserfs__dir__entry_html_ab492a0cded7be46124b42816a5d29896"><div class="ttname"><a href="structreiserfs__dir__entry.html#ab492a0cded7be46124b42816a5d29896">reiserfs_dir_entry::de_entrylen</a></div><div class="ttdeci">int de_entrylen</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1987</div></div>
<div class="ttc" id="structreiserfs__super__block_html_a547fdd6a628e7ee93a0d7f24e3aa74ae"><div class="ttname"><a href="structreiserfs__super__block.html#a547fdd6a628e7ee93a0d7f24e3aa74ae">reiserfs_super_block::s_check_interval</a></div><div class="ttdeci">__le32 s_check_interval</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1040</div></div>
<div class="ttc" id="reiserfs_8h_html_a1ae8e78233e567fec6eb87d087d0aef1"><div class="ttname"><a href="reiserfs_8h.html#a1ae8e78233e567fec6eb87d087d0aef1">le_ih_k_offset</a></div><div class="ttdeci">static loff_t le_ih_k_offset(const struct item_head *ih)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1480</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_a4ef5d858b355a258204559fd2e330ac6"><div class="ttname"><a href="structreiserfs__sb__info.html#a4ef5d858b355a258204559fd2e330ac6">reiserfs_sb_info::s_jdev</a></div><div class="ttdeci">char * s_jdev</div><div class="ttdef"><b>Definition:</b> reiserfs.h:629</div></div>
<div class="ttc" id="reiserfs_8h_html_a9e8debb0bd40d42a3bab8ba8184d72e4"><div class="ttname"><a href="reiserfs_8h.html#a9e8debb0bd40d42a3bab8ba8184d72e4">SB_BLOCK_COUNT</a></div><div class="ttdeci">#define SB_BLOCK_COUNT(s)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1058</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_ace6e93f639e2f6479c54cc3a8b43f015"><div class="ttname"><a href="structreiserfs__sb__info.html#ace6e93f639e2f6479c54cc3a8b43f015">reiserfs_sb_info::s_mount_state</a></div><div class="ttdeci">unsigned short s_mount_state</div><div class="ttdef"><b>Definition:</b> reiserfs.h:529</div></div>
<div class="ttc" id="reiserfs_8h_html_aa7ea2155c7cfd12c8b2426363e75552c"><div class="ttname"><a href="reiserfs_8h.html#aa7ea2155c7cfd12c8b2426363e75552c">is_direct_le_key</a></div><div class="ttdeci">static int is_direct_le_key(int version, struct reiserfs_key *key)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1545</div></div>
<div class="ttc" id="reiserfs_8h_html_ac8f3360e70fa8b2a51b2157d11682994"><div class="ttname"><a href="reiserfs_8h.html#ac8f3360e70fa8b2a51b2157d11682994">CONSTF</a></div><div class="ttdeci">#define CONSTF</div><div class="ttdef"><b>Definition:</b> reiserfs.h:925</div></div>
<div class="ttc" id="reiserfs_8h_html_a9465d4d001a53ca6c16e09ecd182850e"><div class="ttname"><a href="reiserfs_8h.html#a9465d4d001a53ca6c16e09ecd182850e">le_key2cpu_key</a></div><div class="ttdeci">void le_key2cpu_key(struct cpu_key *to, const struct reiserfs_key *from)</div><div class="ttdef"><b>Definition:</b> stree.c:115</div></div>
<div class="ttc" id="reiserfs_8h_html_addc3ae6ccca80cb76ab01c534af67fd0"><div class="ttname"><a href="reiserfs_8h.html#addc3ae6ccca80cb76ab01c534af67fd0">journal_mark_freed</a></div><div class="ttdeci">int journal_mark_freed(struct reiserfs_transaction_handle *, struct super_block *, b_blocknr_t blocknr)</div><div class="ttdef"><b>Definition:</b> journal.c:3735</div></div>
<div class="ttc" id="itree__common_8c_html_ae461e1d2e7084d9c36aa21af0225941d"><div class="ttname"><a href="itree__common_8c.html#ae461e1d2e7084d9c36aa21af0225941d">truncate</a></div><div class="ttdeci">static void truncate(struct inode *inode)</div><div class="ttdef"><b>Definition:</b> itree_common.c:294</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_afb83c381693b5f48ca4d01e74e14f607"><div class="ttname"><a href="structreiserfs__sb__info.html#afb83c381693b5f48ca4d01e74e14f607">reiserfs_sb_info::lock_owner</a></div><div class="ttdeci">struct task_struct * lock_owner</div><div class="ttdef"><b>Definition:</b> reiserfs.h:535</div></div>
<div class="ttc" id="reiserfs_8h_html_a7f9317382ce2c3c3d3fb27e46ad917d7"><div class="ttname"><a href="reiserfs_8h.html#a7f9317382ce2c3c3d3fb27e46ad917d7">__reiserfs_panic</a></div><div class="ttdeci">void __reiserfs_panic(struct super_block *s, const char *id, const char *function, const char *fmt,...) __attribute__((noreturn))</div><div class="ttdef"><b>Definition:</b> prints.c:354</div></div>
<div class="ttc" id="structreiserfs__key_html_a9b5977a9a89cf70e3deb159795ea0542"><div class="ttname"><a href="structreiserfs__key.html#a9b5977a9a89cf70e3deb159795ea0542">reiserfs_key::k_dir_id</a></div><div class="ttdeci">__le32 k_dir_id</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1289</div></div>
<div class="ttc" id="reiserfs_8h_html_abea185527d26799785fd032bfa486849"><div class="ttname"><a href="reiserfs_8h.html#abea185527d26799785fd032bfa486849">reiserfs_read_bitmap_block</a></div><div class="ttdeci">struct buffer_head * reiserfs_read_bitmap_block(struct super_block *sb, unsigned int bitmap)</div><div class="ttdef"><b>Definition:</b> bitmap.c:1415</div></div>
<div class="ttc" id="structdisk__child_html_a4b6e70efcd9cd2333b49c5d770c17f7a"><div class="ttname"><a href="structdisk__child.html#a4b6e70efcd9cd2333b49c5d770c17f7a">disk_child::dc_reserved</a></div><div class="ttdeci">__le16 dc_reserved</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2038</div></div>
<div class="ttc" id="structreiserfs__dir__entry_html_ac3cb28e974a71ffe623baa7be0ad912a"><div class="ttname"><a href="structreiserfs__dir__entry.html#ac3cb28e974a71ffe623baa7be0ad912a">reiserfs_dir_entry::de_bh</a></div><div class="ttdeci">struct buffer_head * de_bh</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1982</div></div>
<div class="ttc" id="structreiserfs__key_html_a4de5557c57687c6db942536930b8fa40"><div class="ttname"><a href="structreiserfs__key.html#a4de5557c57687c6db942536930b8fa40">reiserfs_key::k_objectid</a></div><div class="ttdeci">__le32 k_objectid</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1291</div></div>
<div class="ttc" id="structoffset__v1_html_aa90c371f3edb623236b0ef5822d9f59f"><div class="ttname"><a href="structoffset__v1.html#aa90c371f3edb623236b0ef5822d9f59f">offset_v1::k_offset</a></div><div class="ttdeci">__le32 k_offset</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1252</div></div>
<div class="ttc" id="reiserfs_8h_html_a4fb007f8114a0807fa711a21296cf704"><div class="ttname"><a href="reiserfs_8h.html#a4fb007f8114a0807fa711a21296cf704">TYPE_DIRECT</a></div><div class="ttdeci">#define TYPE_DIRECT</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1241</div></div>
<div class="ttc" id="structreiserfs__journal_html_abe62eda2b9d3705ced6db292546a2557"><div class="ttname"><a href="structreiserfs__journal.html#abe62eda2b9d3705ced6db292546a2557">reiserfs_journal::j_dirty_buffers_lock</a></div><div class="ttdeci">spinlock_t j_dirty_buffers_lock</div><div class="ttdef"><b>Definition:</b> reiserfs.h:391</div></div>
<div class="ttc" id="reiserfs_8h_html_a09d5f52e00d6dacf0bbcc53e1a2f2a85a08a20916e5419b499b857dbd4d5381a6"><div class="ttname"><a href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a08a20916e5419b499b857dbd4d5381a6">REISERFS_HASHED_RELOCATION</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:694</div></div>
<div class="ttc" id="structreiserfs__journal_html_ace9b7800de39195443bc21d07fba2789"><div class="ttname"><a href="structreiserfs__journal.html#ace9b7800de39195443bc21d07fba2789">reiserfs_journal::j_last_flush_id</a></div><div class="ttdeci">unsigned int j_last_flush_id</div><div class="ttdef"><b>Definition:</b> reiserfs.h:384</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_a21b95f2f99e3fb29be7902b89f2e7304"><div class="ttname"><a href="structreiserfs__sb__info.html#a21b95f2f99e3fb29be7902b89f2e7304">reiserfs_sb_info::xattr_root</a></div><div class="ttdeci">struct dentry * xattr_root</div><div class="ttdef"><b>Definition:</b> reiserfs.h:618</div></div>
<div class="ttc" id="reiserfs_8h_html_ab3613a10dd9d644751b575aaf45f3566"><div class="ttname"><a href="reiserfs_8h.html#ab3613a10dd9d644751b575aaf45f3566">get_right_neighbor_position</a></div><div class="ttdeci">int get_right_neighbor_position(struct tree_balance *tb, int h)</div><div class="ttdef"><b>Definition:</b> do_balan.c:1604</div></div>
<div class="ttc" id="reiserfs_8h_html_a2a3acf57dd79e917a2677f5515dff21faf2f1122b106fbb52b3ab0d1d52cf4b48"><div class="ttname"><a href="reiserfs_8h.html#a2a3acf57dd79e917a2677f5515dff21faf2f1122b106fbb52b3ab0d1d52cf4b48">BH_JNew</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:2824</div></div>
<div class="ttc" id="reiserfs_8h_html_ab42328ed894c942af8d100841d58e1dd"><div class="ttname"><a href="reiserfs_8h.html#ab42328ed894c942af8d100841d58e1dd">unfix_nodes</a></div><div class="ttdeci">void unfix_nodes(struct tree_balance *)</div><div class="ttdef"><b>Definition:</b> fix_node.c:2781</div></div>
<div class="ttc" id="structreiserfs__dir__entry_html_a96bc4535e91087e743626ad79b6f656a"><div class="ttname"><a href="structreiserfs__dir__entry.html#a96bc4535e91087e743626ad79b6f656a">reiserfs_dir_entry::de_deh</a></div><div class="ttdeci">struct reiserfs_de_head * de_deh</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1986</div></div>
<div class="ttc" id="reiserfs_8h_html_a67e0e7a33f122df8324e635d7d1eed04"><div class="ttname"><a href="reiserfs_8h.html#a67e0e7a33f122df8324e635d7d1eed04">offset_v2_k_offset</a></div><div class="ttdeci">static loff_t offset_v2_k_offset(const struct offset_v2 *v2)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1272</div></div>
<div class="ttc" id="structstat__data_html_a7ca4bfd71972940941b1a6cbab3ce881"><div class="ttname"><a href="structstat__data.html#a7ca4bfd71972940941b1a6cbab3ce881">stat_data::sd_mode</a></div><div class="ttdeci">__le16 sd_mode</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1796</div></div>
<div class="ttc" id="structreiserfs__journal__list_html_ad5da045675f31d561963819993f650f8"><div class="ttname"><a href="structreiserfs__journal__list.html#ad5da045675f31d561963819993f650f8">reiserfs_journal_list::j_older_commits_done</a></div><div class="ttdeci">atomic_t j_older_commits_done</div><div class="ttdef"><b>Definition:</b> reiserfs.h:270</div></div>
<div class="ttc" id="reiserfs_8h_html_a2482eec7d114cba0cc54d89e225a7944"><div class="ttname"><a href="reiserfs_8h.html#a2482eec7d114cba0cc54d89e225a7944">show_alloc_options</a></div><div class="ttdeci">void show_alloc_options(struct seq_file *seq, struct super_block *s)</div><div class="ttdef"><b>Definition:</b> bitmap.c:691</div></div>
<div class="ttc" id="reiserfs_8h_html_afbf5a612d808e777139bf16a9dd9a786"><div class="ttname"><a href="reiserfs_8h.html#afbf5a612d808e777139bf16a9dd9a786">__reiserfs_write_begin</a></div><div class="ttdeci">int __reiserfs_write_begin(struct page *page, unsigned from, unsigned len)</div><div class="ttdef"><b>Definition:</b> inode.c:2826</div></div>
<div class="ttc" id="cifspdu_8h_html_a7e28d0d49fe972b6aea4a399c7bc0cb0"><div class="ttname"><a href="cifspdu_8h.html#a7e28d0d49fe972b6aea4a399c7bc0cb0">list</a></div><div class="ttdeci">struct gea list[1]</div><div class="ttdef"><b>Definition:</b> cifspdu.h:458</div></div>
<div class="ttc" id="structstat__data__v1_html_a98cb75a272c2299f89462a11082e258a"><div class="ttname"><a href="structstat__data__v1.html#a98cb75a272c2299f89462a11082e258a">stat_data_v1::sd_mtime</a></div><div class="ttdeci">__le32 sd_mtime</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1717</div></div>
<div class="ttc" id="reiserfs_8h_html_ac7b5d13470d9050767d1beee902186c4"><div class="ttname"><a href="reiserfs_8h.html#ac7b5d13470d9050767d1beee902186c4">reiserfs_vfs_truncate_file</a></div><div class="ttdeci">void reiserfs_vfs_truncate_file(struct inode *inode)</div><div class="ttdef"><b>Definition:</b> file.c:136</div></div>
<div class="ttc" id="reiserfs_8h_html_afe5b8b8a725768b03a92c0e21e3a77a2"><div class="ttname"><a href="reiserfs_8h.html#afe5b8b8a725768b03a92c0e21e3a77a2">reiserfs_dir_operations</a></div><div class="ttdeci">const struct file_operations reiserfs_dir_operations</div><div class="ttdef"><b>Definition:</b> dir.c:20</div></div>
<div class="ttc" id="structreiserfs__journal_html_a13acb2e1c53044eb1886c761fd8c617c"><div class="ttname"><a href="structreiserfs__journal.html#a13acb2e1c53044eb1886c761fd8c617c">reiserfs_journal::j_1st_reserved_block</a></div><div class="ttdeci">int j_1st_reserved_block</div><div class="ttdef"><b>Definition:</b> reiserfs.h:308</div></div>
<div class="ttc" id="reiserfs_8h_html_aeadd53d64ca8b52ee6c5c5c7d4b143ff"><div class="ttname"><a href="reiserfs_8h.html#aeadd53d64ca8b52ee6c5c5c7d4b143ff">reiserfs_info</a></div><div class="ttdeci">void reiserfs_info(struct super_block *s, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> prints.c:278</div></div>
<div class="ttc" id="reiserfs_8h_html_a4b3097e1e9ab6d5821fde62a6b86c57d"><div class="ttname"><a href="reiserfs_8h.html#a4b3097e1e9ab6d5821fde62a6b86c57d">max_reiserfs_offset</a></div><div class="ttdeci">static loff_t max_reiserfs_offset(struct inode *inode)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2279</div></div>
<div class="ttc" id="reiserfs_8h_html_ab6d6b37971431b2fa066948f3b5ccbe5"><div class="ttname"><a href="reiserfs_8h.html#ab6d6b37971431b2fa066948f3b5ccbe5">decrement_bcount</a></div><div class="ttdeci">void decrement_bcount(struct buffer_head *bh)</div></div>
<div class="ttc" id="structstat__data_html_aff6c924d2616fd186613897594b66baa"><div class="ttname"><a href="structstat__data.html#aff6c924d2616fd186613897594b66baa">stat_data::sd_nlink</a></div><div class="ttdeci">__le32 sd_nlink</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1798</div></div>
<div class="ttc" id="reiserfs_8h_html_aa5689b096d842db3b8ba5cada877e66e"><div class="ttname"><a href="reiserfs_8h.html#aa5689b096d842db3b8ba5cada877e66e">reiserfs_update_inode_transaction</a></div><div class="ttdeci">void reiserfs_update_inode_transaction(struct inode *)</div><div class="ttdef"><b>Definition:</b> journal.c:3826</div></div>
<div class="ttc" id="structreiserfs__journal__list_html_af611117da1d5c5cf104964b70b62ec3d"><div class="ttname"><a href="structreiserfs__journal__list.html#af611117da1d5c5cf104964b70b62ec3d">reiserfs_journal_list::j_list_bitmap</a></div><div class="ttdeci">struct reiserfs_list_bitmap * j_list_bitmap</div><div class="ttdef"><b>Definition:</b> reiserfs.h:275</div></div>
<div class="ttc" id="masklog_8h_html_afc4e949c7b7d0ab565ecfb62c3380171"><div class="ttname"><a href="masklog_8h.html#afc4e949c7b7d0ab565ecfb62c3380171">func</a></div><div class="ttdeci">const char * func</div><div class="ttdef"><b>Definition:</b> masklog.h:166</div></div>
<div class="ttc" id="reiserfs_8h_html_a7adaef6cab9f7e48447d26425a4b8ace"><div class="ttname"><a href="reiserfs_8h.html#a7adaef6cab9f7e48447d26425a4b8ace">MAX_FREE_BLOCK</a></div><div class="ttdeci">#define MAX_FREE_BLOCK</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2398</div></div>
<div class="ttc" id="reiserfs_8h_html_a0e265314d75fff703a39c90e48f4462b"><div class="ttname"><a href="reiserfs_8h.html#a0e265314d75fff703a39c90e48f4462b">REISERFS_SB</a></div><div class="ttdeci">static struct reiserfs_sb_info * REISERFS_SB(const struct super_block *sb)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1152</div></div>
<div class="ttc" id="reiserfs_8h_html_aa4ff29884bea3444df9bcf07d9ecad9c"><div class="ttname"><a href="reiserfs_8h.html#aa4ff29884bea3444df9bcf07d9ecad9c">__attribute__</a></div><div class="ttdeci">struct unfm_nodeinfo __attribute__</div></div>
<div class="ttc" id="reiserfs_8h_html_afb31406146a3383235947f2c1cc3740f"><div class="ttname"><a href="reiserfs_8h.html#afb31406146a3383235947f2c1cc3740f">s_uuid</a></div><div class="ttdeci">unsigned char s_uuid[16]</div><div class="ttdef"><b>Definition:</b> reiserfs.h:909</div></div>
<div class="ttc" id="structstat__data__v1_html_a9fa697274eeeee09b3453f78ecb1894f"><div class="ttname"><a href="structstat__data__v1.html#a9fa697274eeeee09b3453f78ecb1894f">stat_data_v1::sd_mode</a></div><div class="ttdeci">__le16 sd_mode</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1711</div></div>
<div class="ttc" id="reiserfs_8h_html_a322ccee988a506008586ac738bff9754"><div class="ttname"><a href="reiserfs_8h.html#a322ccee988a506008586ac738bff9754">leaf_shift_left</a></div><div class="ttdeci">int leaf_shift_left(struct tree_balance *tb, int shift_num, int shift_bytes)</div><div class="ttdef"><b>Definition:</b> lbalance.c:741</div></div>
<div class="ttc" id="reiserfs_8h_html_a5068da821cd2ebef6a0eafdc08f22f31"><div class="ttname"><a href="reiserfs_8h.html#a5068da821cd2ebef6a0eafdc08f22f31">is_reusable</a></div><div class="ttdeci">int is_reusable(struct super_block *s, b_blocknr_t block, int bit_value)</div><div class="ttdef"><b>Definition:</b> bitmap.c:62</div></div>
<div class="ttc" id="reiserfs_8h_html_a2d996237e082b78b41771b5aa1a6eae1"><div class="ttname"><a href="reiserfs_8h.html#a2d996237e082b78b41771b5aa1a6eae1">KEY_SIZE</a></div><div class="ttdeci">#define KEY_SIZE</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1329</div></div>
<div class="ttc" id="reiserfs_8h_html_a004541f1492cf7d78fc57fd419730fb4"><div class="ttname"><a href="reiserfs_8h.html#a004541f1492cf7d78fc57fd419730fb4">reiserfs_proc_info_done</a></div><div class="ttdeci">static int reiserfs_proc_info_done(struct super_block *sb)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:3137</div></div>
<div class="ttc" id="reiserfs_8h_html_a7fe904848bdd140c75270449a1cb9941"><div class="ttname"><a href="reiserfs_8h.html#a7fe904848bdd140c75270449a1cb9941">BUFFER_FNS</a></div><div class="ttdeci">BUFFER_FNS(JDirty, journaled)</div></div>
<div class="ttc" id="structreiserfs__journal_html_ae0cb8b18422648a98e33006ddc8969bf"><div class="ttname"><a href="structreiserfs__journal.html#ae0cb8b18422648a98e33006ddc8969bf">reiserfs_journal::j_cnode_free</a></div><div class="ttdeci">int j_cnode_free</div><div class="ttdef"><b>Definition:</b> reiserfs.h:354</div></div>
<div class="ttc" id="reiserfs_8h_html_a71b67ce5511178998ab99ae6fddfbe30"><div class="ttname"><a href="reiserfs_8h.html#a71b67ce5511178998ab99ae6fddfbe30">KEY_FORMAT_3_5</a></div><div class="ttdeci">#define KEY_FORMAT_3_5</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1140</div></div>
<div class="ttc" id="reiserfs_8h_html_a7bd6d9dff38ecaaa4daa380a8c28a1c4"><div class="ttname"><a href="reiserfs_8h.html#a7bd6d9dff38ecaaa4daa380a8c28a1c4">padd_item</a></div><div class="ttdeci">void padd_item(char *item, int total_length, int length)</div><div class="ttdef"><b>Definition:</b> stree.c:1190</div></div>
<div class="ttc" id="reiserfs_2journal_8c_html_adc320802d7bf2737cf6e78c68974df0f"><div class="ttname"><a href="reiserfs_2journal_8c.html#adc320802d7bf2737cf6e78c68974df0f">lock_journal</a></div><div class="ttdeci">static void lock_journal(struct super_block *sb)</div><div class="ttdef"><b>Definition:</b> journal.c:533</div></div>
<div class="ttc" id="cifspdu_8h_html_ae809d5359ac030c60a30a8f0b2294b82"><div class="ttname"><a href="cifspdu_8h.html#ae809d5359ac030c60a30a8f0b2294b82">length</a></div><div class="ttdeci">__le16 length</div><div class="ttdef"><b>Definition:</b> cifspdu.h:458</div></div>
<div class="ttc" id="structreiserfs__bitmap__node_html"><div class="ttname"><a href="structreiserfs__bitmap__node.html">reiserfs_bitmap_node</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:244</div></div>
<div class="ttc" id="structcpu__key_html"><div class="ttname"><a href="structcpu__key.html">cpu_key</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:1306</div></div>
<div class="ttc" id="structvirtual__node_html_a02877675233a49f4d212a1f36484aa88"><div class="ttname"><a href="structvirtual__node.html#a02877675233a49f4d212a1f36484aa88">virtual_node::vn_ins_ih</a></div><div class="ttdeci">struct item_head * vn_ins_ih</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2366</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_a2d2f27deb3dcc8d0858eead0de2c7a9d"><div class="ttname"><a href="structreiserfs__sb__info.html#a2d2f27deb3dcc8d0858eead0de2c7a9d">reiserfs_sb_info::old_work_lock</a></div><div class="ttdeci">spinlock_t old_work_lock</div><div class="ttdef"><b>Definition:</b> reiserfs.h:623</div></div>
<div class="ttc" id="structtreepath_html_ae068a46b4432cd41a2575ba4ba88a66c"><div class="ttname"><a href="structtreepath.html#ae068a46b4432cd41a2575ba4ba88a66c">treepath::path_length</a></div><div class="ttdeci">int path_length</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2132</div></div>
<div class="ttc" id="reiserfs_8h_html_a09d5f52e00d6dacf0bbcc53e1a2f2a85a72af62b4b8a91f0ad0817db28e3718a6"><div class="ttname"><a href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a72af62b4b8a91f0ad0817db28e3718a6">REISERFS_EXPOSE_PRIVROOT</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:698</div></div>
<div class="ttc" id="reiserfs_8h_html_a1331d20c421de1074e0e861aeb2288e5"><div class="ttname"><a href="reiserfs_8h.html#a1331d20c421de1074e0e861aeb2288e5">reiserfs_fs_type</a></div><div class="ttdeci">struct file_system_type reiserfs_fs_type</div><div class="ttdef"><b>Definition:</b> super.c:2637</div></div>
<div class="ttc" id="reiserfs_8h_html_a316b3d545627ad9a0ba2ccbb523b217f"><div class="ttname"><a href="reiserfs_8h.html#a316b3d545627ad9a0ba2ccbb523b217f">get_rkey</a></div><div class="ttdeci">const struct reiserfs_key * get_rkey(const struct treepath *chk_path, const struct super_block *sb)</div><div class="ttdef"><b>Definition:</b> stree.c:262</div></div>
<div class="ttc" id="structtree__balance_html_adc1c156a0bcfe40234a94d5dcb997ed4"><div class="ttname"><a href="structtree__balance.html#adc1c156a0bcfe40234a94d5dcb997ed4">tree_balance::pos_in_item</a></div><div class="ttdeci">int pos_in_item</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2516</div></div>
<div class="ttc" id="reiserfs_8h_html_abe7b265d327dbb5ae2dc118cedc28b4a"><div class="ttname"><a href="reiserfs_8h.html#abe7b265d327dbb5ae2dc118cedc28b4a">reiserfs_discard_all_prealloc</a></div><div class="ttdeci">void reiserfs_discard_all_prealloc(struct reiserfs_transaction_handle *th)</div><div class="ttdef"><b>Definition:</b> bitmap.c:546</div></div>
<div class="ttc" id="structstat__data_html_a8704b143db1c48b846d620e90aaaa892"><div class="ttname"><a href="structstat__data.html#a8704b143db1c48b846d620e90aaaa892">stat_data::sd_ctime</a></div><div class="ttdeci">__le32 sd_ctime</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1809</div></div>
<div class="ttc" id="reiserfs_8h_html_a09d5f52e00d6dacf0bbcc53e1a2f2a85a2bf918e4453e2000eb4cb9850be1e285"><div class="ttname"><a href="reiserfs_8h.html#a09d5f52e00d6dacf0bbcc53e1a2f2a85a2bf918e4453e2000eb4cb9850be1e285">FORCE_R5_HASH</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:679</div></div>
<div class="ttc" id="structreiserfs__journal__list_html_a356f0500bbf8db47380ec8883e393095"><div class="ttname"><a href="structreiserfs__journal__list.html#a356f0500bbf8db47380ec8883e393095">reiserfs_journal_list::j_len</a></div><div class="ttdeci">unsigned long j_len</div><div class="ttdef"><b>Definition:</b> reiserfs.h:265</div></div>
<div class="ttc" id="reiserfs_8h_html_aec71079dc30c251753a81cac72b9dffc"><div class="ttname"><a href="reiserfs_8h.html#aec71079dc30c251753a81cac72b9dffc">reiserfs_free_bitmap_cache</a></div><div class="ttdeci">void reiserfs_free_bitmap_cache(struct super_block *sb)</div><div class="ttdef"><b>Definition:</b> bitmap.c:1470</div></div>
<div class="ttc" id="structreiserfs__sb__info_html_ae156eb95410d05ca2d969a7fb4ffb955"><div class="ttname"><a href="structreiserfs__sb__info.html#ae156eb95410d05ca2d969a7fb4ffb955">reiserfs_sb_info::s_bmaps_without_search</a></div><div class="ttdeci">int s_bmaps_without_search</div><div class="ttdef"><b>Definition:</b> reiserfs.h:597</div></div>
<div class="ttc" id="structreiserfs__dir__entry_html_aea5d81abbaf4948e74d74a0b95f4c582"><div class="ttname"><a href="structreiserfs__dir__entry.html#aea5d81abbaf4948e74d74a0b95f4c582">reiserfs_dir_entry::de_name</a></div><div class="ttdeci">char * de_name</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1989</div></div>
<div class="ttc" id="ctree_8h_html_a3875b4f2ee8a9d27ac3b3b145f934f86"><div class="ttname"><a href="ctree_8h.html#a3875b4f2ee8a9d27ac3b3b145f934f86">offset</a></div><div class="ttdeci">__le32 offset</div><div class="ttdef"><b>Definition:</b> ctree.h:106</div></div>
<div class="ttc" id="structreiserfs__journal__desc_html_ac9879b698a194f500fbb591f7ddde171"><div class="ttname"><a href="structreiserfs__journal__desc.html#ac9879b698a194f500fbb591f7ddde171">reiserfs_journal_desc::j_len</a></div><div class="ttdeci">__le32 j_len</div><div class="ttdef"><b>Definition:</b> reiserfs.h:2712</div></div>
<div class="ttc" id="reiserfs_8h_html_a11723b717ae0e6ca3ad3c2c7d911f569"><div class="ttname"><a href="reiserfs_8h.html#a11723b717ae0e6ca3ad3c2c7d911f569">reiserfs_bmap_count</a></div><div class="ttdeci">static __u32 reiserfs_bmap_count(struct super_block *sb)</div><div class="ttdef"><b>Definition:</b> reiserfs.h:1161</div></div>
<div class="ttc" id="reiserfs_8h_html_a849778a95da790b103b5f35d542ed7ada7d1c850af0ed86a64c51db1b0f387496"><div class="ttname"><a href="reiserfs_8h.html#a849778a95da790b103b5f35d542ed7ada7d1c850af0ed86a64c51db1b0f387496">i_stat_data_version_mask</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:40</div></div>
<div class="ttc" id="reiserfs_8h_html_a633866bcfdc41d2c0ccfb0f846537755"><div class="ttname"><a href="reiserfs_8h.html#a633866bcfdc41d2c0ccfb0f846537755">do_balance</a></div><div class="ttdeci">void do_balance(struct tree_balance *tb, struct item_head *ih, const char *body, int flag)</div><div class="ttdef"><b>Definition:</b> do_balan.c:1858</div></div>
<div class="ttc" id="structreiserfs__journal_html_ad8b0f32d0bda11a75e5b2a0780e0558e"><div class="ttname"><a href="structreiserfs__journal.html#ad8b0f32d0bda11a75e5b2a0780e0558e">reiserfs_journal::j_num_lists</a></div><div class="ttdeci">int j_num_lists</div><div class="ttdef"><b>Definition:</b> reiserfs.h:380</div></div>
<div class="ttc" id="structin__core__key_html"><div class="ttname"><a href="structin__core__key.html">in_core_key</a></div><div class="ttdef"><b>Definition:</b> reiserfs.h:1298</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d62259be1d85694f00103b28643c4de6.html">reiserfs</a></li><li class="navelem"><a class="el" href="reiserfs_8h.html">reiserfs.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>

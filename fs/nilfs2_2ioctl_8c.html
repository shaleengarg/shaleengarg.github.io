<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>linux/fs: nilfs2/ioctl.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">linux/fs
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('nilfs2_2ioctl_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ioctl.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;linux/fs.h&gt;</code><br />
<code>#include &lt;linux/wait.h&gt;</code><br />
<code>#include &lt;linux/slab.h&gt;</code><br />
<code>#include &lt;linux/capability.h&gt;</code><br />
<code>#include &lt;linux/uaccess.h&gt;</code><br />
<code>#include &lt;linux/vmalloc.h&gt;</code><br />
<code>#include &lt;linux/compat.h&gt;</code><br />
<code>#include &lt;linux/mount.h&gt;</code><br />
<code>#include &lt;linux/buffer_head.h&gt;</code><br />
<code>#include &quot;<a class="el" href="nilfs_8h_source.html">nilfs.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="nilfs2_2segment_8h_source.html">segment.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="nilfs2_2bmap_8h_source.html">bmap.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="cpfile_8h_source.html">cpfile.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sufile_8h_source.html">sufile.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dat_8h_source.html">dat.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ioctl.c:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c__incl.png" border="0" usemap="#nilfs2_2ioctl_8c" alt=""/></div>
<map name="nilfs2_2ioctl_8c" id="nilfs2_2ioctl_8c">
<area shape="rect" id="node11" href="nilfs_8h.html" title="nilfs.h" alt="" coords="958,304,1015,331"/>
<area shape="rect" id="node22" href="nilfs2_2bmap_8h.html" title="bmap.h" alt="" coords="427,379,493,405"/>
<area shape="rect" id="node24" href="dat_8h.html" title="dat.h" alt="" coords="435,453,485,480"/>
<area shape="rect" id="node25" href="nilfs2_2segment_8h.html" title="segment.h" alt="" coords="721,229,804,256"/>
<area shape="rect" id="node27" href="cpfile_8h.html" title="cpfile.h" alt="" coords="347,453,411,480"/>
<area shape="rect" id="node28" href="sufile_8h.html" title="sufile.h" alt="" coords="980,80,1044,107"/>
<area shape="rect" id="node17" href="the__nilfs_8h.html" title="the_nilfs.h" alt="" coords="1056,379,1139,405"/>
<area shape="rect" id="node23" href="nilfs2_2alloc_8h.html" title="alloc.h" alt="" coords="611,453,671,480"/>
<area shape="rect" id="node29" href="mdt_8h.html" title="mdt.h" alt="" coords="1083,155,1138,181"/>
<area shape="rect" id="node31" href="page_8h.html" title="page.h" alt="" coords="1215,229,1276,256"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3626cb1946214b98710af19046930e2b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2ioctl_8c.html#a3626cb1946214b98710af19046930e2b">nilfs_ioctl_wrap_copy</a> (struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *nilfs, struct nilfs_argv *argv, int dir, ssize_t(*dofunc)(struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *, __u64 *, int, void *, size_t, size_t))</td></tr>
<tr class="separator:a3626cb1946214b98710af19046930e2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55aaf10d549966d587542363201f3ca3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2ioctl_8c.html#a55aaf10d549966d587542363201f3ca3">nilfs_ioctl_getflags</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *<a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a>, void __user *argp)</td></tr>
<tr class="separator:a55aaf10d549966d587542363201f3ca3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ad02ae5704ccd6ef70f0c0eb418d4ac"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac">nilfs_ioctl_setflags</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *<a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a>, struct file *filp, void __user *argp)</td></tr>
<tr class="separator:a1ad02ae5704ccd6ef70f0c0eb418d4ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a4e242100f37f0822d78615c333aabb"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2ioctl_8c.html#a8a4e242100f37f0822d78615c333aabb">nilfs_ioctl_getversion</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *<a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a>, void __user *argp)</td></tr>
<tr class="separator:a8a4e242100f37f0822d78615c333aabb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ed1e719c57f862e13c505ee25cb2d7c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2ioctl_8c.html#a2ed1e719c57f862e13c505ee25cb2d7c">nilfs_ioctl_change_cpmode</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *<a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a>, struct file *filp, unsigned int <a class="el" href="send_8h.html#aba87c031cbb3e372df508f4153bd3f1c">cmd</a>, void __user *argp)</td></tr>
<tr class="separator:a2ed1e719c57f862e13c505ee25cb2d7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3ff49abdd05f571d15c3d7fb185f7c0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2ioctl_8c.html#ab3ff49abdd05f571d15c3d7fb185f7c0">nilfs_ioctl_delete_checkpoint</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *<a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a>, struct file *filp, unsigned int <a class="el" href="send_8h.html#aba87c031cbb3e372df508f4153bd3f1c">cmd</a>, void __user *argp)</td></tr>
<tr class="separator:ab3ff49abdd05f571d15c3d7fb185f7c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a052bde2d471171e3c79d95c1c39c1561"><td class="memItemLeft" align="right" valign="top">static ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2ioctl_8c.html#a052bde2d471171e3c79d95c1c39c1561">nilfs_ioctl_do_get_cpinfo</a> (struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *nilfs, __u64 *posp, int <a class="el" href="structflags.html">flags</a>, void *buf, size_t <a class="el" href="cifspdu_8h.html#a9eb13703e1b3d14d62f2666b1c09b41f">size</a>, size_t nmembs)</td></tr>
<tr class="separator:a052bde2d471171e3c79d95c1c39c1561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39cf54b1fc6701f6616f08fefcf4260b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2ioctl_8c.html#a39cf54b1fc6701f6616f08fefcf4260b">nilfs_ioctl_get_cpstat</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *<a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a>, struct file *filp, unsigned int <a class="el" href="send_8h.html#aba87c031cbb3e372df508f4153bd3f1c">cmd</a>, void __user *argp)</td></tr>
<tr class="separator:a39cf54b1fc6701f6616f08fefcf4260b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34169b6b8da0810dd6b289d1ac8f192f"><td class="memItemLeft" align="right" valign="top">static ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f">nilfs_ioctl_do_get_suinfo</a> (struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *nilfs, __u64 *posp, int <a class="el" href="structflags.html">flags</a>, void *buf, size_t <a class="el" href="cifspdu_8h.html#a9eb13703e1b3d14d62f2666b1c09b41f">size</a>, size_t nmembs)</td></tr>
<tr class="separator:a34169b6b8da0810dd6b289d1ac8f192f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0841eacabd5d2f65cc1e4e903cb0b9c9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9">nilfs_ioctl_get_sustat</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *<a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a>, struct file *filp, unsigned int <a class="el" href="send_8h.html#aba87c031cbb3e372df508f4153bd3f1c">cmd</a>, void __user *argp)</td></tr>
<tr class="separator:a0841eacabd5d2f65cc1e4e903cb0b9c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2621da9c473ed9a128f03148bb502c4f"><td class="memItemLeft" align="right" valign="top">static ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2ioctl_8c.html#a2621da9c473ed9a128f03148bb502c4f">nilfs_ioctl_do_get_vinfo</a> (struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *nilfs, __u64 *posp, int <a class="el" href="structflags.html">flags</a>, void *buf, size_t <a class="el" href="cifspdu_8h.html#a9eb13703e1b3d14d62f2666b1c09b41f">size</a>, size_t nmembs)</td></tr>
<tr class="separator:a2621da9c473ed9a128f03148bb502c4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbe42ccd4ccc56d484156885e0e0bcc2"><td class="memItemLeft" align="right" valign="top">static ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2ioctl_8c.html#abbe42ccd4ccc56d484156885e0e0bcc2">nilfs_ioctl_do_get_bdescs</a> (struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *nilfs, __u64 *posp, int <a class="el" href="structflags.html">flags</a>, void *buf, size_t <a class="el" href="cifspdu_8h.html#a9eb13703e1b3d14d62f2666b1c09b41f">size</a>, size_t nmembs)</td></tr>
<tr class="separator:abbe42ccd4ccc56d484156885e0e0bcc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae74437bf40467cd7ef392867b1506518"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2ioctl_8c.html#ae74437bf40467cd7ef392867b1506518">nilfs_ioctl_get_bdescs</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *<a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a>, struct file *filp, unsigned int <a class="el" href="send_8h.html#aba87c031cbb3e372df508f4153bd3f1c">cmd</a>, void __user *argp)</td></tr>
<tr class="separator:ae74437bf40467cd7ef392867b1506518"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb151dcfb7c15835996fcfe3f602bb23"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2ioctl_8c.html#abb151dcfb7c15835996fcfe3f602bb23">nilfs_ioctl_move_inode_block</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *<a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a>, struct nilfs_vdesc *vdesc, struct list_head *buffers)</td></tr>
<tr class="separator:abb151dcfb7c15835996fcfe3f602bb23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30a0a343bac14fc5cf5591ee64c4830b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2ioctl_8c.html#a30a0a343bac14fc5cf5591ee64c4830b">nilfs_ioctl_move_blocks</a> (struct <a class="el" href="structsuper__block.html">super_block</a> *<a class="el" href="ntfs_2debug_8h.html#a65b1b0602e37268ec9bc2c240a676c39">sb</a>, struct nilfs_argv *argv, void *buf)</td></tr>
<tr class="separator:a30a0a343bac14fc5cf5591ee64c4830b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cd529efbea1f81e36a61c98a622c17b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2ioctl_8c.html#a5cd529efbea1f81e36a61c98a622c17b">nilfs_ioctl_delete_checkpoints</a> (struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *nilfs, struct nilfs_argv *argv, void *buf)</td></tr>
<tr class="separator:a5cd529efbea1f81e36a61c98a622c17b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7d5c78fbd6a179cb3f39f87cb63285d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2ioctl_8c.html#ab7d5c78fbd6a179cb3f39f87cb63285d">nilfs_ioctl_free_vblocknrs</a> (struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *nilfs, struct nilfs_argv *argv, void *buf)</td></tr>
<tr class="separator:ab7d5c78fbd6a179cb3f39f87cb63285d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0e598551ac90d5ab9b0aae8416dbf40"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2ioctl_8c.html#ab0e598551ac90d5ab9b0aae8416dbf40">nilfs_ioctl_mark_blocks_dirty</a> (struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *nilfs, struct nilfs_argv *argv, void *buf)</td></tr>
<tr class="separator:ab0e598551ac90d5ab9b0aae8416dbf40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a4a3b447f57cba6a9d7e2c8c2ed3049"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2ioctl_8c.html#a0a4a3b447f57cba6a9d7e2c8c2ed3049">nilfs_ioctl_prepare_clean_segments</a> (struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *nilfs, struct nilfs_argv *argv, void **kbufs)</td></tr>
<tr class="separator:a0a4a3b447f57cba6a9d7e2c8c2ed3049"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80c0559fcfd518a664113365f15d1096"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096">nilfs_ioctl_clean_segments</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *<a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a>, struct file *filp, unsigned int <a class="el" href="send_8h.html#aba87c031cbb3e372df508f4153bd3f1c">cmd</a>, void __user *argp)</td></tr>
<tr class="separator:a80c0559fcfd518a664113365f15d1096"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88f66d269c57dae4d6eaf9eae22016b9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2ioctl_8c.html#a88f66d269c57dae4d6eaf9eae22016b9">nilfs_ioctl_sync</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *<a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a>, struct file *filp, unsigned int <a class="el" href="send_8h.html#aba87c031cbb3e372df508f4153bd3f1c">cmd</a>, void __user *argp)</td></tr>
<tr class="separator:a88f66d269c57dae4d6eaf9eae22016b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae197bb230d6c201248dcabcc2df73e20"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20">nilfs_ioctl_resize</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *<a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a>, struct file *filp, void __user *argp)</td></tr>
<tr class="separator:ae197bb230d6c201248dcabcc2df73e20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8913a80e32e55bd55c20461949a3e6b6"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2ioctl_8c.html#a8913a80e32e55bd55c20461949a3e6b6">nilfs_ioctl_trim_fs</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *<a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a>, void __user *argp)</td></tr>
<tr class="separator:a8913a80e32e55bd55c20461949a3e6b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f41bf53459a54ba4c2d14e01aaad2b7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7">nilfs_ioctl_set_alloc_range</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *<a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a>, void __user *argp)</td></tr>
<tr class="separator:a7f41bf53459a54ba4c2d14e01aaad2b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae948a990322013d9aaff456311e9b7bd"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2ioctl_8c.html#ae948a990322013d9aaff456311e9b7bd">nilfs_ioctl_get_info</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *<a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a>, struct file *filp, unsigned int <a class="el" href="send_8h.html#aba87c031cbb3e372df508f4153bd3f1c">cmd</a>, void __user *argp, size_t membsz, ssize_t(*dofunc)(struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *, __u64 *, int, void *, size_t, size_t))</td></tr>
<tr class="separator:ae948a990322013d9aaff456311e9b7bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a879fc213e33210988660173aec449143"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2ioctl_8c.html#a879fc213e33210988660173aec449143">nilfs_ioctl_set_suinfo</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *<a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a>, struct file *filp, unsigned int <a class="el" href="send_8h.html#aba87c031cbb3e372df508f4153bd3f1c">cmd</a>, void __user *argp)</td></tr>
<tr class="separator:a879fc213e33210988660173aec449143"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9413c5631e50168d0f3dfc06c0ae3355"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2ioctl_8c.html#a9413c5631e50168d0f3dfc06c0ae3355">nilfs_ioctl</a> (struct file *filp, unsigned int <a class="el" href="send_8h.html#aba87c031cbb3e372df508f4153bd3f1c">cmd</a>, unsigned long arg)</td></tr>
<tr class="separator:a9413c5631e50168d0f3dfc06c0ae3355"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a9413c5631e50168d0f3dfc06c0ae3355"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9413c5631e50168d0f3dfc06c0ae3355">&#9670;&nbsp;</a></span>nilfs_ioctl()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long nilfs_ioctl </td>
          <td>(</td>
          <td class="paramtype">struct file *&#160;</td>
          <td class="paramname"><em>filp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a9413c5631e50168d0f3dfc06c0ae3355_cgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a9413c5631e50168d0f3dfc06c0ae3355_cgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a9413c5631e50168d0f3dfc06c0ae3355_cgraph" id="nilfs2_2ioctl_8c_a9413c5631e50168d0f3dfc06c0ae3355_cgraph">
<area shape="rect" id="node2" href="nilfs2_2ioctl_8c.html#a55aaf10d549966d587542363201f3ca3" title="nilfs_ioctl_getflags" alt="" coords="155,157,285,184"/>
<area shape="rect" id="node4" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="155,335,285,361"/>
<area shape="rect" id="node8" href="nilfs_8h.html#a8098e56658b7f301db310017eb2febc2" title="nilfs_compat_ioctl" alt="" coords="599,5,725,32"/>
<area shape="rect" id="node17" href="nilfs2_2ioctl_8c.html#a8a4e242100f37f0822d78615c333aabb" title="nilfs_ioctl_getversion" alt="" coords="148,517,292,544"/>
<area shape="rect" id="node18" href="nilfs2_2ioctl_8c.html#a2ed1e719c57f862e13c505ee25cb2d7c" title="nilfs_ioctl_change\l_cpmode" alt="" coords="157,569,283,610"/>
<area shape="rect" id="node21" href="nilfs2_2ioctl_8c.html#ab3ff49abdd05f571d15c3d7fb185f7c0" title="nilfs_ioctl_delete\l_checkpoint" alt="" coords="161,634,279,675"/>
<area shape="rect" id="node23" href="nilfs2_2ioctl_8c.html#ae948a990322013d9aaff456311e9b7bd" title="nilfs_ioctl_get_info" alt="" coords="155,1163,285,1189"/>
<area shape="rect" id="node25" href="nilfs2_2ioctl_8c.html#a052bde2d471171e3c79d95c1c39c1561" title="nilfs_ioctl_do_get\l_cpinfo" alt="" coords="159,1266,281,1307"/>
<area shape="rect" id="node27" href="nilfs2_2ioctl_8c.html#a39cf54b1fc6701f6616f08fefcf4260b" title="nilfs_ioctl_get_cpstat" alt="" coords="147,1332,293,1359"/>
<area shape="rect" id="node29" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="159,1383,281,1425"/>
<area shape="rect" id="node31" href="nilfs2_2ioctl_8c.html#a879fc213e33210988660173aec449143" title="nilfs_ioctl_set_suinfo" alt="" coords="148,700,292,727"/>
<area shape="rect" id="node33" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="147,1449,293,1476"/>
<area shape="rect" id="node35" href="nilfs2_2ioctl_8c.html#a2621da9c473ed9a128f03148bb502c4f" title="nilfs_ioctl_do_get\l_vinfo" alt="" coords="159,1501,281,1542"/>
<area shape="rect" id="node37" href="nilfs2_2ioctl_8c.html#ae74437bf40467cd7ef392867b1506518" title="nilfs_ioctl_get_bdescs" alt="" coords="145,1111,295,1137"/>
<area shape="rect" id="node39" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096" title="nilfs_ioctl_clean_segments" alt="" coords="131,949,309,976"/>
<area shape="rect" id="node44" href="nilfs2_2ioctl_8c.html#a88f66d269c57dae4d6eaf9eae22016b9" title="nilfs_ioctl_sync" alt="" coords="164,1215,276,1241"/>
<area shape="rect" id="node46" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="161,825,279,852"/>
<area shape="rect" id="node49" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="152,1566,288,1607"/>
<area shape="rect" id="node50" href="nilfs2_2ioctl_8c.html#a8913a80e32e55bd55c20461949a3e6b6" title="nilfs_ioctl_trim_fs" alt="" coords="158,1632,282,1659"/>
<area shape="rect" id="node3" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="627,360,697,387"/>
<area shape="rect" id="node5" href="inode_8c.html#a2359f9f4ea541a79ff23035a6c89cb03" title="inode_owner_or_capable" alt="" coords="362,157,527,184"/>
<area shape="rect" id="node6" href="namespace_8c.html#abec48677d6bf1090f17dd8b54cdee81d" title="mnt_want_write_file" alt="" coords="375,696,514,723"/>
<area shape="rect" id="node7" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="385,56,505,83"/>
<area shape="rect" id="node9" href="nilfs_8h.html#aacff7fe9750a849356475b2063b69e3b" title="nilfs_transaction_begin" alt="" coords="367,477,522,504"/>
<area shape="rect" id="node10" href="nilfs2_2inode_8c.html#a3709db610911a00ce98363ee8d9938fd" title="nilfs_set_inode_flags" alt="" coords="373,360,517,387"/>
<area shape="rect" id="node11" href="inode_8c.html#ab2eaca3b9ec87b9dd6568776059cb715" title="current_time" alt="" coords="397,208,492,235"/>
<area shape="rect" id="node12" href="nilfs_8h.html#aba5331e09f07f496f54e260a9d59789c" title="nilfs_set_transaction_flag" alt="" coords="359,259,530,285"/>
<area shape="rect" id="node13" href="nilfs_8h.html#ad992361808dc77d1402ce35e1ccefc0d" title="nilfs_mark_inode_dirty" alt="" coords="369,107,521,133"/>
<area shape="rect" id="node14" href="nilfs_8h.html#a576ee8d20fe7a5d7c5889cb118fe0533" title="nilfs_transaction_commit" alt="" coords="361,528,528,555"/>
<area shape="rect" id="node16" href="namespace_8c.html#a0ce94dc25dc93a0b5e1a9282e43e0a97" title="mnt_drop_write_file" alt="" coords="377,747,512,773"/>
<area shape="rect" id="node15" href="nilfs2_2segment_8c.html#ad8bab60b16b37c93e180e1ea3e1580ad" title="nilfs_construct_segment" alt="" coords="580,899,744,925"/>
<area shape="rect" id="node19" href="cpfile_8c.html#a85e742bbbbe3ba2317b16e11acec1466" title="nilfs_cpfile_change\l_cpmode" alt="" coords="378,411,511,453"/>
<area shape="rect" id="node20" href="nilfs_8h.html#a155140033fba0977ed043367001c3384" title="nilfs_transaction_abort" alt="" coords="368,579,521,605"/>
<area shape="rect" id="node22" href="cpfile_8c.html#a87526dd5f2e1726e569bd7bf58dc9562" title="nilfs_cpfile_delete\l_checkpoint" alt="" coords="381,630,508,671"/>
<area shape="rect" id="node24" href="nilfs2_2ioctl_8c.html#a3626cb1946214b98710af19046930e2b" title="nilfs_ioctl_wrap_copy" alt="" coords="371,1168,518,1195"/>
<area shape="rect" id="node26" href="cpfile_8c.html#a826c418383caea450a332055f0b568e6" title="nilfs_cpfile_get_cpinfo" alt="" coords="369,1320,520,1347"/>
<area shape="rect" id="node28" href="cpfile_8c.html#a929716373573b8e3682a2081e6b99a56" title="nilfs_cpfile_get_stat" alt="" coords="375,1371,514,1397"/>
<area shape="rect" id="node30" href="sufile_8c.html#a1e877b67f3c19b343311b97a6554c0ba" title="nilfs_sufile_get_suinfo" alt="" coords="369,1421,520,1448"/>
<area shape="rect" id="node32" href="sufile_8c.html#ac063361c980263bb8906571633cfcf2d" title="nilfs_sufile_set_suinfo" alt="" coords="369,797,520,824"/>
<area shape="rect" id="node34" href="sufile_8c.html#a9e2abc1d2040e49935a1448ce3c3c43e" title="nilfs_sufile_get_stat" alt="" coords="375,1472,514,1499"/>
<area shape="rect" id="node36" href="dat_8c.html#a3f5272e9420b7a85207243daace2b072" title="nilfs_dat_get_vinfo" alt="" coords="379,1523,510,1549"/>
<area shape="rect" id="node38" href="nilfs2_2ioctl_8c.html#abbe42ccd4ccc56d484156885e0e0bcc2" title="nilfs_ioctl_do_get\l_bdescs" alt="" coords="383,1102,506,1143"/>
<area shape="rect" id="node40" href="nilfs2_2ioctl_8c.html#a30a0a343bac14fc5cf5591ee64c4830b" title="nilfs_ioctl_move_blocks" alt="" coords="364,848,525,875"/>
<area shape="rect" id="node41" href="the__nilfs_8h.html#a9151c9e879ecd826e57e7a77e249a066" title="nilfs_sb_need_update" alt="" coords="371,1000,519,1027"/>
<area shape="rect" id="node42" href="nilfs2_2segment_8c.html#a3b57268547a16ef8a641cb8cb0fdf876" title="nilfs_clean_segments" alt="" coords="371,1051,519,1077"/>
<area shape="rect" id="node43" href="gcinode_8c.html#ab723a73e1cf2e36b4636b61007f9e74d" title="nilfs_remove_all_gcinodes" alt="" coords="357,949,532,976"/>
<area shape="rect" id="node45" href="the__nilfs_8h.html#a8f2cf136125bb291f917d2741a2ecdec" title="nilfs_flush_device" alt="" coords="381,1269,508,1296"/>
<area shape="rect" id="node47" href="nilfs_8h.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="391,899,498,925"/>
<area shape="rect" id="node48" href="sufile_8c.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="591,1258,733,1299"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a9413c5631e50168d0f3dfc06c0ae3355_icgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a9413c5631e50168d0f3dfc06c0ae3355_icgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a9413c5631e50168d0f3dfc06c0ae3355_icgraph" id="nilfs2_2ioctl_8c_a9413c5631e50168d0f3dfc06c0ae3355_icgraph">
<area shape="rect" id="node2" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="131,132,208,159"/>
<area shape="rect" id="node3" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="256,81,376,108"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="432,81,547,108"/>
<area shape="rect" id="node9" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="424,132,555,159"/>
<area shape="rect" id="node5" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="607,5,697,32"/>
<area shape="rect" id="node6" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="606,56,698,83"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="603,107,701,133"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="609,157,695,184"/>
</map>
</div>

</div>
</div>
<a id="a2ed1e719c57f862e13c505ee25cb2d7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ed1e719c57f862e13c505ee25cb2d7c">&#9670;&nbsp;</a></span>nilfs_ioctl_change_cpmode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_ioctl_change_cpmode </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct file *&#160;</td>
          <td class="paramname"><em>filp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void __user *&#160;</td>
          <td class="paramname"><em>argp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_ioctl_change_cpmode - change checkpoint mode (checkpoint/snapshot) : inode object : file object : ioctl's request code : pointer on argument from userspace</p>
<p>Description: <a class="el" href="nilfs2_2ioctl_8c.html#a2ed1e719c57f862e13c505ee25cb2d7c">nilfs_ioctl_change_cpmode()</a> function changes mode of given checkpoint between checkpoint and snapshot state. This ioctl is used in chcp and mkcp utilities.</p>
<p>Return Value: On success, 0 is returned and mode of a checkpoint is changed. On error, one of the following negative error codes is returned.</p>
<p>%-EPERM - Operation not permitted.</p>
<p>%-EFAULT - Failure during checkpoint mode changing. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a2ed1e719c57f862e13c505ee25cb2d7c_cgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a2ed1e719c57f862e13c505ee25cb2d7c_cgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a2ed1e719c57f862e13c505ee25cb2d7c_cgraph" id="nilfs2_2ioctl_8c_a2ed1e719c57f862e13c505ee25cb2d7c_cgraph">
<area shape="rect" id="node2" href="namespace_8c.html#abec48677d6bf1090f17dd8b54cdee81d" title="mnt_want_write_file" alt="" coords="194,223,333,249"/>
<area shape="rect" id="node13" href="nilfs_8h.html#aacff7fe9750a849356475b2063b69e3b" title="nilfs_transaction_begin" alt="" coords="186,452,341,479"/>
<area shape="rect" id="node19" href="cpfile_8c.html#a85e742bbbbe3ba2317b16e11acec1466" title="nilfs_cpfile_change\l_cpmode" alt="" coords="197,603,330,645"/>
<area shape="rect" id="node42" href="nilfs_8h.html#a155140033fba0977ed043367001c3384" title="nilfs_transaction_abort" alt="" coords="187,669,340,696"/>
<area shape="rect" id="node43" href="nilfs_8h.html#a576ee8d20fe7a5d7c5889cb118fe0533" title="nilfs_transaction_commit" alt="" coords="180,1323,347,1349"/>
<area shape="rect" id="node48" href="namespace_8c.html#a0ce94dc25dc93a0b5e1a9282e43e0a97" title="mnt_drop_write_file" alt="" coords="419,299,554,325"/>
<area shape="rect" id="node3" href="namespace_8c.html#af19741fc533f0e0a2acda44e925f80eb" title="may_write_real" alt="" coords="431,121,542,148"/>
<area shape="rect" id="node4" href="namespace_8c.html#afc62e617cec97974d570093f778e30e0" title="__mnt_want_write_file" alt="" coords="411,172,563,199"/>
<area shape="rect" id="node10" href="namespace_8c.html#a14b50b29ea751e02e86a7c9a2fa01128" title="EXPORT_SYMBOL_GPL" alt="" coords="1232,71,1404,97"/>
<area shape="rect" id="node5" href="namespace_8c.html#ae8d4c494f66a0cda8744bf47ebeba01f" title="__mnt_want_write" alt="" coords="654,147,782,173"/>
<area shape="rect" id="node12" href="namespace_8c.html#aba77afe1262e538d2854159761e6bcb2" title="mnt_clone_write" alt="" coords="659,45,777,72"/>
<area shape="rect" id="node6" href="mount_8h.html#a799ce35ff6ad0c45266cbe2b631ac610" title="real_mount" alt="" coords="888,96,975,123"/>
<area shape="rect" id="node7" href="namespace_8c.html#a24aaa0bb913baa617bc4d19fad011a99" title="mnt_inc_writers" alt="" coords="874,45,989,72"/>
<area shape="rect" id="node8" href="namespace_8c.html#a1e8eac40e0b14fb052603f900a411760" title="mnt_is_readonly" alt="" coords="873,147,990,173"/>
<area shape="rect" id="node11" href="namespace_8c.html#a6b6223aa5bccbed87645de18e8b0abac" title="mnt_dec_writers" alt="" coords="872,197,991,224"/>
<area shape="rect" id="node9" href="namespace_8c.html#ae435f6295042ca4769078d0b11c47713" title="__mnt_is_readonly" alt="" coords="1053,71,1184,97"/>
<area shape="rect" id="node14" href="nilfs2_2segment_8c.html#ada0ba1bf162679380f6096c9f83b94ea" title="nilfs_prepare_segment_lock" alt="" coords="395,401,579,428"/>
<area shape="rect" id="node15" href="the__nilfs_8c.html#a137faca9117bfef2a2264ccf3a9aa809" title="nilfs_near_disk_full" alt="" coords="420,452,553,479"/>
<area shape="rect" id="node16" href="sufile_8c.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="627,349,809,376"/>
<area shape="rect" id="node17" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="886,349,977,376"/>
<area shape="rect" id="node18" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1071,519,1167,545"/>
<area shape="rect" id="node20" href="nilfs_8h.html#a796f3b9955c39e7c656354e47b79362e" title="nilfs_checkpoint_is\l_mounted" alt="" coords="420,1201,553,1242"/>
<area shape="rect" id="node32" href="cpfile_8c.html#a89e33b9de3faac99d87d1c55ddcaf8b7" title="nilfs_cpfile_clear\l_snapshot" alt="" coords="427,779,546,821"/>
<area shape="rect" id="node41" href="cpfile_8c.html#a987eccfb76e10b13685d86b96f740c2e" title="nilfs_cpfile_set_snapshot" alt="" coords="402,611,571,637"/>
<area shape="rect" id="node21" href="the__nilfs_8h.html#ade82c185e7dd753033a0bc34b0a14bc9" title="nilfs_last_cno" alt="" coords="667,1107,769,1133"/>
<area shape="rect" id="node22" href="the__nilfs_8c.html#ab515063d92ea4e8384e70d37bcaa46ff" title="nilfs_lookup_root" alt="" coords="658,1157,778,1184"/>
<area shape="rect" id="node23" href="nilfs2_2inode_8c.html#a4f88fdc579c23ff4f443113fe7066b31" title="nilfs_ilookup" alt="" coords="671,1259,765,1285"/>
<area shape="rect" id="node25" href="inode_8c.html#a378733dcbf0fb08359b9a02145ac8fc3" title="iput" alt="" coords="1097,1309,1140,1336"/>
<area shape="rect" id="node27" href="dcache_8c.html#a9f042046c19f277000ddfc09b02e3633" title="d_find_alias" alt="" coords="673,1360,763,1387"/>
<area shape="rect" id="node29" href="nilfs2_2super_8c.html#a3048287dba544c5960a5968dbf586839" title="nilfs_tree_is_busy" alt="" coords="655,1411,781,1437"/>
<area shape="rect" id="node30" href="dcache_8c.html#aebcca358185b5176b69b97e7eab12dfd" title="dput" alt="" coords="695,1056,741,1083"/>
<area shape="rect" id="node31" href="the__nilfs_8c.html#a59cc4f3286a6c2bdf7626a4093351fd9" title="nilfs_put_root" alt="" coords="881,1360,981,1387"/>
<area shape="rect" id="node24" href="inode_8c.html#a3ce24c611eed82b98fb4775b3db0a8b6" title="ilookup5" alt="" coords="896,1309,967,1336"/>
<area shape="rect" id="node26" href="nilfs2_2inode_8c.html#a42350b0b59e53776755f5a0b17efd97f" title="nilfs_iget_test" alt="" coords="880,1259,983,1285"/>
<area shape="rect" id="node28" href="dcache_8c.html#a3eb221591429fdc67dec907c0d09d26a" title="__d_find_alias" alt="" coords="879,1411,984,1437"/>
<area shape="rect" id="node33" href="cpfile_8c.html#a3aefee4421b37e13cdc047fbd1765eef" title="nilfs_cpfile_get_checkpoint\l_block" alt="" coords="629,721,807,762"/>
<area shape="rect" id="node35" href="cpfile_8c.html#a61f50ee8f6946771fe618e3ac414fae4" title="nilfs_cpfile_block\l_get_checkpoint" alt="" coords="870,705,993,746"/>
<area shape="rect" id="node36" href="cpfile_8c.html#a9ff8012cf954ee1e283e981e7c92c4cf" title="nilfs_cpfile_get_header\l_block" alt="" coords="641,603,795,645"/>
<area shape="rect" id="node37" href="cpfile_8c.html#a4e272672608da2a064e85f8db0d38e32" title="nilfs_cpfile_block\l_get_snapshot_list" alt="" coords="653,838,783,879"/>
<area shape="rect" id="node38" href="cpfile_8c.html#af5bb4325de3f70ecd2e2b03ea43205cb" title="nilfs_cpfile_block\l_get_header" alt="" coords="870,838,993,879"/>
<area shape="rect" id="node39" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="657,669,779,696"/>
<area shape="rect" id="node40" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="647,787,789,813"/>
<area shape="rect" id="node34" href="cpfile_8c.html#a67d134834f89f92295956bc0532ebc00" title="nilfs_cpfile_get_blkoff" alt="" coords="857,519,1005,545"/>
<area shape="rect" id="node44" href="nilfs2_2segment_8c.html#aa55509ef3ea01cc74488f916f1d551f3" title="nilfs_segctor_start\l_timer" alt="" coords="422,1286,551,1327"/>
<area shape="rect" id="node45" href="nilfs2_2segment_8c.html#a23c179e5f28f728a442e31641f71c795" title="nilfs_segctor_do_flush" alt="" coords="411,1352,563,1379"/>
<area shape="rect" id="node46" href="nilfs2_2segment_8c.html#ad8bab60b16b37c93e180e1ea3e1580ad" title="nilfs_construct_segment" alt="" coords="405,1441,569,1468"/>
<area shape="rect" id="node47" href="nilfs2_2segment_8c.html#aece5ba8b7c1a8df29083370bfb0f3aad" title="nilfs_segctor_sync" alt="" coords="653,1461,783,1488"/>
<area shape="rect" id="node49" href="namespace_8c.html#ad990c81af66b82e8c66b009dd531b77b" title="__mnt_drop_write" alt="" coords="655,197,781,224"/>
<area shape="rect" id="node50" href="namespace_8c.html#aaa6b04953fbfe2185e8e0f5431d89c79" title="EXPORT_SYMBOL" alt="" coords="649,299,787,325"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a2ed1e719c57f862e13c505ee25cb2d7c_icgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a2ed1e719c57f862e13c505ee25cb2d7c_icgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a2ed1e719c57f862e13c505ee25cb2d7c_icgraph" id="nilfs2_2ioctl_8c_a2ed1e719c57f862e13c505ee25cb2d7c_icgraph">
<area shape="rect" id="node2" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="180,107,257,133"/>
<area shape="rect" id="node3" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="305,81,425,108"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="481,81,596,108"/>
<area shape="rect" id="node9" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="473,132,604,159"/>
<area shape="rect" id="node5" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="657,5,746,32"/>
<area shape="rect" id="node6" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="655,56,747,83"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="652,107,751,133"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="659,157,744,184"/>
</map>
</div>

</div>
</div>
<a id="a80c0559fcfd518a664113365f15d1096"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80c0559fcfd518a664113365f15d1096">&#9670;&nbsp;</a></span>nilfs_ioctl_clean_segments()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_ioctl_clean_segments </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct file *&#160;</td>
          <td class="paramname"><em>filp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void __user *&#160;</td>
          <td class="paramname"><em>argp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_ioctl_clean_segments - clean segments : inode object : file object : ioctl's request code : pointer on argument from userspace</p>
<p>Description: <a class="el" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096">nilfs_ioctl_clean_segments()</a> function makes garbage collection operation in the environment of requested parameters from userspace. The NILFS_IOCTL_CLEAN_SEGMENTS ioctl is used by nilfs_cleanerd daemon.</p>
<p>Return Value: On success, 0 is returned or error code, otherwise. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a80c0559fcfd518a664113365f15d1096_cgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a80c0559fcfd518a664113365f15d1096_cgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a80c0559fcfd518a664113365f15d1096_cgraph" id="nilfs2_2ioctl_8c_a80c0559fcfd518a664113365f15d1096_cgraph">
<area shape="rect" id="node2" href="namespace_8c.html#abec48677d6bf1090f17dd8b54cdee81d" title="mnt_want_write_file" alt="" coords="243,80,382,107"/>
<area shape="rect" id="node8" href="nilfs2_2ioctl_8c.html#a30a0a343bac14fc5cf5591ee64c4830b" title="nilfs_ioctl_move_blocks" alt="" coords="232,585,393,612"/>
<area shape="rect" id="node29" href="the__nilfs_8h.html#a9151c9e879ecd826e57e7a77e249a066" title="nilfs_sb_need_update" alt="" coords="239,687,387,713"/>
<area shape="rect" id="node30" href="nilfs2_2segment_8c.html#a3b57268547a16ef8a641cb8cb0fdf876" title="nilfs_clean_segments" alt="" coords="445,1113,593,1140"/>
<area shape="rect" id="node47" href="gcinode_8c.html#ab723a73e1cf2e36b4636b61007f9e74d" title="nilfs_remove_all_gcinodes" alt="" coords="663,552,837,579"/>
<area shape="rect" id="node48" href="namespace_8c.html#a0ce94dc25dc93a0b5e1a9282e43e0a97" title="mnt_drop_write_file" alt="" coords="245,1164,380,1191"/>
<area shape="rect" id="node3" href="namespace_8c.html#af19741fc533f0e0a2acda44e925f80eb" title="may_write_real" alt="" coords="463,105,574,132"/>
<area shape="rect" id="node4" href="namespace_8c.html#afc62e617cec97974d570093f778e30e0" title="__mnt_want_write_file" alt="" coords="443,55,595,81"/>
<area shape="rect" id="node7" href="namespace_8c.html#a14b50b29ea751e02e86a7c9a2fa01128" title="EXPORT_SYMBOL_GPL" alt="" coords="910,29,1082,56"/>
<area shape="rect" id="node5" href="namespace_8c.html#ae8d4c494f66a0cda8744bf47ebeba01f" title="__mnt_want_write" alt="" coords="686,29,814,56"/>
<area shape="rect" id="node6" href="namespace_8c.html#aba77afe1262e538d2854159761e6bcb2" title="mnt_clone_write" alt="" coords="691,80,809,107"/>
<area shape="rect" id="node9" href="v9fs_8c.html#a962ef1b35907bdda12de2cddce8bc638" title="LIST_HEAD" alt="" coords="471,1004,566,1031"/>
<area shape="rect" id="node10" href="nilfs2_2inode_8c.html#ad35645870060c9d83e6c1ca96a402675" title="nilfs_iget_for_gc" alt="" coords="460,585,577,612"/>
<area shape="rect" id="node12" href="inode_8c.html#a378733dcbf0fb08359b9a02145ac8fc3" title="iput" alt="" coords="975,472,1017,499"/>
<area shape="rect" id="node16" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="961,895,1031,921"/>
<area shape="rect" id="node21" href="inode_8c.html#ad2a7d900c04745e54c8d2f3847922a59" title="igrab" alt="" coords="493,181,544,208"/>
<area shape="rect" id="node23" href="nilfs2_2ioctl_8c.html#abb151dcfb7c15835996fcfe3f602bb23" title="nilfs_ioctl_move_inode\l_block" alt="" coords="441,822,596,863"/>
<area shape="rect" id="node26" href="gcinode_8c.html#a44422968054e086ec9ea0e7bbf30db32" title="nilfs_gccache_wait\l_and_mark_dirty" alt="" coords="452,283,585,325"/>
<area shape="rect" id="node11" href="inode_8c.html#a0e9a0440646ab0424be87f1ee6387c64" title="iget5_locked" alt="" coords="703,400,797,427"/>
<area shape="rect" id="node15" href="nilfs2_2inode_8c.html#a42350b0b59e53776755f5a0b17efd97f" title="nilfs_iget_test" alt="" coords="699,720,801,747"/>
<area shape="rect" id="node17" href="nilfs2_2inode_8c.html#ab596c6b27b262ff881fb811a5d25990a" title="nilfs_iget_set" alt="" coords="701,771,799,797"/>
<area shape="rect" id="node18" href="gcinode_8c.html#a2c5af5602d5da89eda7b8b207a141f8d" title="nilfs_init_gcinode" alt="" coords="689,669,811,696"/>
<area shape="rect" id="node19" href="bad__inode_8c.html#a8c027cf52e2b7669b11b0bfa09bbcd45" title="iget_failed" alt="" coords="709,501,791,528"/>
<area shape="rect" id="node20" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="931,349,1061,376"/>
<area shape="rect" id="node14" href="debugfs_2inode_8c.html#a16e485b5debd4cd96a200844c38df190" title="EXPORT_SYMBOL" alt="" coords="1136,375,1275,401"/>
<area shape="rect" id="node13" href="inode_8c.html#a7e99b25ac29d19bc82fbddcb773c4f25" title="iput_final" alt="" coords="1168,472,1243,499"/>
<area shape="rect" id="node22" href="inode_8c.html#ab5747108c3d9a3f113b72a10a9be6a2f" title="__iget" alt="" coords="721,181,779,208"/>
<area shape="rect" id="node24" href="gcinode_8c.html#abe1de7444253292fcc51c2c2acc75c7f" title="nilfs_gccache_submit\l_read_data" alt="" coords="676,822,824,863"/>
<area shape="rect" id="node25" href="gcinode_8c.html#aaa0597974fc3784d67c54f87273a623e" title="nilfs_gccache_submit\l_read_node" alt="" coords="676,887,824,929"/>
<area shape="rect" id="node27" href="nilfs2_2btree_8c.html#a4b18a3ec3488cabf390f7e32a7368068" title="nilfs_btree_broken\l_node_block" alt="" coords="686,283,814,325"/>
<area shape="rect" id="node28" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="689,232,811,259"/>
<area shape="rect" id="node31" href="nilfs2_2segment_8c.html#a8b69f4181745f44662620421e0f88ab0" title="nilfs_transaction_lock" alt="" coords="676,1055,824,1081"/>
<area shape="rect" id="node33" href="mdt_8c.html#a1b91aea5f3e024d438f92e11efb9309b" title="nilfs_mdt_save_to_shadow_map" alt="" coords="644,1223,856,1249"/>
<area shape="rect" id="node37" href="nilfs2_2ioctl_8c.html#a0a4a3b447f57cba6a9d7e2c8c2ed3049" title="nilfs_ioctl_prepare\l_clean_segments" alt="" coords="687,1375,813,1417"/>
<area shape="rect" id="node40" href="mdt_8c.html#a673c8a81a5993668b02111eccc3f2b93" title="nilfs_mdt_restore_from\l_shadow_map" alt="" coords="673,1106,827,1147"/>
<area shape="rect" id="node41" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="671,1273,829,1300"/>
<area shape="rect" id="node42" href="nilfs2_2segment_8c.html#aff101f52e4bf1099c796f00b25b4c3b1" title="nilfs_remove_written\l_gcinodes" alt="" coords="679,603,821,645"/>
<area shape="rect" id="node44" href="the__nilfs_8c.html#a7791ded5e1399589f827371de0638a52" title="nilfs_discard_segments" alt="" coords="671,1324,829,1351"/>
<area shape="rect" id="node45" href="mdt_8c.html#a49d73bacfcef709cc1cb5956355ee9d3" title="nilfs_mdt_clear_shadow_map" alt="" coords="653,1172,847,1199"/>
<area shape="rect" id="node46" href="nilfs2_2segment_8c.html#a183704facbe2e823d313437cf1ef2672" title="nilfs_transaction_unlock" alt="" coords="669,1004,831,1031"/>
<area shape="rect" id="node32" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="904,1047,1088,1089"/>
<area shape="rect" id="node34" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="948,1172,1044,1199"/>
<area shape="rect" id="node35" href="nilfs2_2page_8c.html#ab1f505f6520c69332f0ee920a731e817" title="nilfs_copy_dirty_pages" alt="" coords="919,1273,1073,1300"/>
<area shape="rect" id="node36" href="nilfs2_2bmap_8c.html#aa549c9215d24ae7f44f0128fa9d81f98" title="nilfs_bmap_save" alt="" coords="936,1223,1056,1249"/>
<area shape="rect" id="node38" href="nilfs2_2ioctl_8c.html#a5cd529efbea1f81e36a61c98a622c17b" title="nilfs_ioctl_delete\l_checkpoints" alt="" coords="937,1405,1055,1446"/>
<area shape="rect" id="node39" href="nilfs2_2ioctl_8c.html#ab7d5c78fbd6a179cb3f39f87cb63285d" title="nilfs_ioctl_free_vblocknrs" alt="" coords="911,1353,1081,1380"/>
<area shape="rect" id="node43" href="btnode_8c.html#acd52f7f39a72cca11a6240f97c821d20" title="nilfs_btnode_cache\l_clear" alt="" coords="929,574,1063,615"/>
<area shape="rect" id="node49" href="namespace_8c.html#ad990c81af66b82e8c66b009dd531b77b" title="__mnt_drop_write" alt="" coords="456,1164,581,1191"/>
<area shape="rect" id="node50" href="namespace_8c.html#aaa6b04953fbfe2185e8e0f5431d89c79" title="EXPORT_SYMBOL" alt="" coords="449,1215,588,1241"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a80c0559fcfd518a664113365f15d1096_icgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a80c0559fcfd518a664113365f15d1096_icgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a80c0559fcfd518a664113365f15d1096_icgraph" id="nilfs2_2ioctl_8c_a80c0559fcfd518a664113365f15d1096_icgraph">
<area shape="rect" id="node2" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="232,107,309,133"/>
<area shape="rect" id="node3" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="357,81,477,108"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="533,81,648,108"/>
<area shape="rect" id="node9" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="525,132,656,159"/>
<area shape="rect" id="node5" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="709,5,798,32"/>
<area shape="rect" id="node6" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="707,56,799,83"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="704,107,803,133"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="711,157,796,184"/>
</map>
</div>

</div>
</div>
<a id="ab3ff49abdd05f571d15c3d7fb185f7c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3ff49abdd05f571d15c3d7fb185f7c0">&#9670;&nbsp;</a></span>nilfs_ioctl_delete_checkpoint()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_ioctl_delete_checkpoint </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct file *&#160;</td>
          <td class="paramname"><em>filp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void __user *&#160;</td>
          <td class="paramname"><em>argp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_ioctl_delete_checkpoint - remove checkpoint : inode object : file object : ioctl's request code : pointer on argument from userspace</p>
<p>Description: <a class="el" href="nilfs2_2ioctl_8c.html#ab3ff49abdd05f571d15c3d7fb185f7c0">nilfs_ioctl_delete_checkpoint()</a> function removes checkpoint from NILFS2 file system. This ioctl is used in rmcp utility.</p>
<p>Return Value: On success, 0 is returned and a checkpoint is removed. On error, one of the following negative error codes is returned.</p>
<p>%-EPERM - Operation not permitted.</p>
<p>%-EFAULT - Failure during checkpoint removing. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_ab3ff49abdd05f571d15c3d7fb185f7c0_cgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_ab3ff49abdd05f571d15c3d7fb185f7c0_cgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_ab3ff49abdd05f571d15c3d7fb185f7c0_cgraph" id="nilfs2_2ioctl_8c_ab3ff49abdd05f571d15c3d7fb185f7c0_cgraph">
<area shape="rect" id="node2" href="namespace_8c.html#abec48677d6bf1090f17dd8b54cdee81d" title="mnt_want_write_file" alt="" coords="186,144,325,171"/>
<area shape="rect" id="node13" href="nilfs_8h.html#aacff7fe9750a849356475b2063b69e3b" title="nilfs_transaction_begin" alt="" coords="178,1024,333,1051"/>
<area shape="rect" id="node19" href="cpfile_8c.html#a87526dd5f2e1726e569bd7bf58dc9562" title="nilfs_cpfile_delete\l_checkpoint" alt="" coords="192,713,319,754"/>
<area shape="rect" id="node42" href="nilfs_8h.html#a155140033fba0977ed043367001c3384" title="nilfs_transaction_abort" alt="" coords="179,779,332,805"/>
<area shape="rect" id="node43" href="nilfs_8h.html#a576ee8d20fe7a5d7c5889cb118fe0533" title="nilfs_transaction_commit" alt="" coords="172,1275,339,1301"/>
<area shape="rect" id="node48" href="namespace_8c.html#a0ce94dc25dc93a0b5e1a9282e43e0a97" title="mnt_drop_write_file" alt="" coords="411,296,546,323"/>
<area shape="rect" id="node3" href="namespace_8c.html#af19741fc533f0e0a2acda44e925f80eb" title="may_write_real" alt="" coords="423,119,534,145"/>
<area shape="rect" id="node4" href="namespace_8c.html#afc62e617cec97974d570093f778e30e0" title="__mnt_want_write_file" alt="" coords="403,169,555,196"/>
<area shape="rect" id="node10" href="namespace_8c.html#a14b50b29ea751e02e86a7c9a2fa01128" title="EXPORT_SYMBOL_GPL" alt="" coords="1256,43,1428,69"/>
<area shape="rect" id="node5" href="namespace_8c.html#ae8d4c494f66a0cda8744bf47ebeba01f" title="__mnt_want_write" alt="" coords="646,195,774,221"/>
<area shape="rect" id="node12" href="namespace_8c.html#aba77afe1262e538d2854159761e6bcb2" title="mnt_clone_write" alt="" coords="651,144,769,171"/>
<area shape="rect" id="node6" href="mount_8h.html#a799ce35ff6ad0c45266cbe2b631ac610" title="real_mount" alt="" coords="881,195,967,221"/>
<area shape="rect" id="node7" href="namespace_8c.html#a24aaa0bb913baa617bc4d19fad011a99" title="mnt_inc_writers" alt="" coords="867,144,981,171"/>
<area shape="rect" id="node8" href="namespace_8c.html#a1e8eac40e0b14fb052603f900a411760" title="mnt_is_readonly" alt="" coords="865,245,983,272"/>
<area shape="rect" id="node11" href="namespace_8c.html#a6b6223aa5bccbed87645de18e8b0abac" title="mnt_dec_writers" alt="" coords="865,296,983,323"/>
<area shape="rect" id="node9" href="namespace_8c.html#ae435f6295042ca4769078d0b11c47713" title="__mnt_is_readonly" alt="" coords="1062,93,1193,120"/>
<area shape="rect" id="node14" href="nilfs2_2segment_8c.html#ada0ba1bf162679380f6096c9f83b94ea" title="nilfs_prepare_segment_lock" alt="" coords="387,1075,571,1101"/>
<area shape="rect" id="node15" href="the__nilfs_8c.html#a137faca9117bfef2a2264ccf3a9aa809" title="nilfs_near_disk_full" alt="" coords="412,1024,545,1051"/>
<area shape="rect" id="node16" href="sufile_8c.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="619,1309,801,1336"/>
<area shape="rect" id="node17" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="1082,1277,1173,1304"/>
<area shape="rect" id="node18" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1294,673,1390,700"/>
<area shape="rect" id="node20" href="cpfile_8c.html#adcc12fdd10ce1288436abf623cafddf6" title="nilfs_cpfile_do_get\l_cpinfo" alt="" coords="413,523,544,565"/>
<area shape="rect" id="node31" href="cpfile_8c.html#a741424beec629d3d2eb990ebf4ba1da4" title="nilfs_cpfile_delete\l_checkpoints" alt="" coords="415,902,542,943"/>
<area shape="rect" id="node21" href="mdt_8h.html#a6726d332d6af4468ef3bc1a2ab975b56" title="nilfs_mdt_cno" alt="" coords="659,413,761,440"/>
<area shape="rect" id="node22" href="cpfile_8c.html#aef70b3a4a8a5ff5520368acfc981309c" title="nilfs_cpfile_find_checkpoint\l_block" alt="" coords="619,465,801,506"/>
<area shape="rect" id="node27" href="cpfile_8c.html#aee514232b0632a21e05f667f33704ade" title="nilfs_cpfile_checkpoints\l_in_block" alt="" coords="629,582,791,623"/>
<area shape="rect" id="node29" href="cpfile_8c.html#a61f50ee8f6946771fe618e3ac414fae4" title="nilfs_cpfile_block\l_get_checkpoint" alt="" coords="649,647,771,689"/>
<area shape="rect" id="node30" href="cpfile_8c.html#accc61d49896374c113383a0f8eb50db2" title="nilfs_cpfile_checkpoint\l_to_cpinfo" alt="" coords="633,347,787,389"/>
<area shape="rect" id="node23" href="cpfile_8c.html#a67d134834f89f92295956bc0532ebc00" title="nilfs_cpfile_get_blkoff" alt="" coords="850,749,998,776"/>
<area shape="rect" id="node25" href="mdt_8c.html#adaed5e8667743afd0be01cfa99101c9f" title="nilfs_mdt_find_block" alt="" coords="853,413,995,440"/>
<area shape="rect" id="node26" href="cpfile_8c.html#a064a874e7effb026597d663177f77af0" title="nilfs_cpfile_first\l_checkpoint_in_block" alt="" coords="851,465,997,506"/>
<area shape="rect" id="node24" href="cpfile_8c.html#aeabb5bf5c2379caa588e3302673b1a30" title="nilfs_cpfile_checkpoints\l_per_block" alt="" coords="1047,582,1208,623"/>
<area shape="rect" id="node28" href="cpfile_8c.html#af3192909ddb88c2575bb1828d746310a" title="nilfs_cpfile_get_offset" alt="" coords="849,644,999,671"/>
<area shape="rect" id="node32" href="exec_8c.html#a36dcaf63ad8fe9783c81b418943e2346" title="count" alt="" coords="897,1196,951,1223"/>
<area shape="rect" id="node34" href="cpfile_8c.html#a9ff8012cf954ee1e283e981e7c92c4cf" title="nilfs_cpfile_get_header\l_block" alt="" coords="633,1193,787,1234"/>
<area shape="rect" id="node35" href="cpfile_8c.html#a3aefee4421b37e13cdc047fbd1765eef" title="nilfs_cpfile_get_checkpoint\l_block" alt="" coords="621,713,799,754"/>
<area shape="rect" id="node36" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="649,909,771,936"/>
<area shape="rect" id="node37" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="639,960,781,987"/>
<area shape="rect" id="node38" href="cpfile_8c.html#a3426549677cf51101b5df35dc01aa4a7" title="nilfs_cpfile_is_in\l_first" alt="" coords="651,778,769,819"/>
<area shape="rect" id="node39" href="cpfile_8c.html#a637e7231d3a234bdf6405fc8aa2bde40" title="nilfs_cpfile_block\l_sub_valid_checkpoints" alt="" coords="629,1127,791,1169"/>
<area shape="rect" id="node40" href="cpfile_8c.html#a3eae0b4142d9167d13e5d57535dbb5aa" title="nilfs_cpfile_delete\l_checkpoint_block" alt="" coords="645,843,775,885"/>
<area shape="rect" id="node41" href="cpfile_8c.html#af5bb4325de3f70ecd2e2b03ea43205cb" title="nilfs_cpfile_block\l_get_header" alt="" coords="649,1062,771,1103"/>
<area shape="rect" id="node33" href="exec_8c.html#a9ea507497a5718b67a987a1c91a5becb" title="get_user_arg_ptr" alt="" coords="1068,1196,1187,1223"/>
<area shape="rect" id="node44" href="nilfs2_2segment_8c.html#aa55509ef3ea01cc74488f916f1d551f3" title="nilfs_segctor_start\l_timer" alt="" coords="414,1238,543,1279"/>
<area shape="rect" id="node45" href="nilfs2_2segment_8c.html#a23c179e5f28f728a442e31641f71c795" title="nilfs_segctor_do_flush" alt="" coords="403,1355,555,1381"/>
<area shape="rect" id="node46" href="nilfs2_2segment_8c.html#ad8bab60b16b37c93e180e1ea3e1580ad" title="nilfs_construct_segment" alt="" coords="397,1304,561,1331"/>
<area shape="rect" id="node47" href="nilfs2_2segment_8c.html#aece5ba8b7c1a8df29083370bfb0f3aad" title="nilfs_segctor_sync" alt="" coords="645,1360,775,1387"/>
<area shape="rect" id="node49" href="namespace_8c.html#ad990c81af66b82e8c66b009dd531b77b" title="__mnt_drop_write" alt="" coords="647,245,773,272"/>
<area shape="rect" id="node50" href="namespace_8c.html#aaa6b04953fbfe2185e8e0f5431d89c79" title="EXPORT_SYMBOL" alt="" coords="641,296,779,323"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_ab3ff49abdd05f571d15c3d7fb185f7c0_icgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_ab3ff49abdd05f571d15c3d7fb185f7c0_icgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_ab3ff49abdd05f571d15c3d7fb185f7c0_icgraph" id="nilfs2_2ioctl_8c_ab3ff49abdd05f571d15c3d7fb185f7c0_icgraph">
<area shape="rect" id="node2" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="172,107,249,133"/>
<area shape="rect" id="node3" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="297,81,417,108"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="473,81,588,108"/>
<area shape="rect" id="node9" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="465,132,596,159"/>
<area shape="rect" id="node5" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="649,5,738,32"/>
<area shape="rect" id="node6" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="647,56,739,83"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="644,107,743,133"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="651,157,736,184"/>
</map>
</div>

</div>
</div>
<a id="a5cd529efbea1f81e36a61c98a622c17b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cd529efbea1f81e36a61c98a622c17b">&#9670;&nbsp;</a></span>nilfs_ioctl_delete_checkpoints()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_ioctl_delete_checkpoints </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *&#160;</td>
          <td class="paramname"><em>nilfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct nilfs_argv *&#160;</td>
          <td class="paramname"><em>argv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_ioctl_delete_checkpoints - delete checkpoints : nilfs object : vector of arguments from userspace : array of periods of checkpoints numbers</p>
<p>Description: <a class="el" href="nilfs2_2ioctl_8c.html#a5cd529efbea1f81e36a61c98a622c17b">nilfs_ioctl_delete_checkpoints()</a> function deletes checkpoints in the period from p_start to p_end, excluding p_end itself. The checkpoints which have been already deleted are ignored.</p>
<p>Return Value: Number of processed nilfs_period structures or error code, otherwise.</p>
<p>%-EIO - I/O error.</p>
<p>%-ENOMEM - Insufficient amount of memory available.</p>
<p>%-EINVAL - invalid checkpoints. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a5cd529efbea1f81e36a61c98a622c17b_cgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a5cd529efbea1f81e36a61c98a622c17b_cgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a5cd529efbea1f81e36a61c98a622c17b_cgraph" id="nilfs2_2ioctl_8c_a5cd529efbea1f81e36a61c98a622c17b_cgraph">
<area shape="rect" id="node2" href="cpfile_8c.html#a741424beec629d3d2eb990ebf4ba1da4" title="nilfs_cpfile_delete\l_checkpoints" alt="" coords="172,331,299,372"/>
<area shape="rect" id="node3" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1021,390,1117,417"/>
<area shape="rect" id="node4" href="exec_8c.html#a36dcaf63ad8fe9783c81b418943e2346" title="count" alt="" coords="623,78,678,105"/>
<area shape="rect" id="node6" href="cpfile_8c.html#a9ff8012cf954ee1e283e981e7c92c4cf" title="nilfs_cpfile_get_header\l_block" alt="" coords="359,180,513,221"/>
<area shape="rect" id="node18" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1210,187,1333,214"/>
<area shape="rect" id="node30" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="1200,542,1343,569"/>
<area shape="rect" id="node33" href="cpfile_8c.html#aee514232b0632a21e05f667f33704ade" title="nilfs_cpfile_checkpoints\l_in_block" alt="" coords="355,363,517,404"/>
<area shape="rect" id="node36" href="cpfile_8c.html#a3aefee4421b37e13cdc047fbd1765eef" title="nilfs_cpfile_get_checkpoint\l_block" alt="" coords="347,428,525,469"/>
<area shape="rect" id="node39" href="cpfile_8c.html#a61f50ee8f6946771fe618e3ac414fae4" title="nilfs_cpfile_block\l_get_checkpoint" alt="" coords="375,297,497,339"/>
<area shape="rect" id="node40" href="cpfile_8c.html#a3426549677cf51101b5df35dc01aa4a7" title="nilfs_cpfile_is_in\l_first" alt="" coords="377,493,495,535"/>
<area shape="rect" id="node41" href="cpfile_8c.html#a637e7231d3a234bdf6405fc8aa2bde40" title="nilfs_cpfile_block\l_sub_valid_checkpoints" alt="" coords="355,63,517,104"/>
<area shape="rect" id="node42" href="cpfile_8c.html#a3eae0b4142d9167d13e5d57535dbb5aa" title="nilfs_cpfile_delete\l_checkpoint_block" alt="" coords="371,559,501,600"/>
<area shape="rect" id="node50" href="cpfile_8c.html#af5bb4325de3f70ecd2e2b03ea43205cb" title="nilfs_cpfile_block\l_get_header" alt="" coords="375,828,497,869"/>
<area shape="rect" id="node5" href="exec_8c.html#a9ea507497a5718b67a987a1c91a5becb" title="get_user_arg_ptr" alt="" coords="797,78,916,105"/>
<area shape="rect" id="node7" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="581,187,720,214"/>
<area shape="rect" id="node8" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="784,187,929,214"/>
<area shape="rect" id="node15" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="779,137,935,163"/>
<area shape="rect" id="node9" href="mdt_8c.html#a43ded315f7122596d14b88c43fe9c98d" title="nilfs_mdt_submit_block" alt="" coords="989,339,1148,366"/>
<area shape="rect" id="node10" href="nilfs2_2page_8c.html#aa4a24cc5a684ba71b9e4423f2ea38970" title="nilfs_grab_buffer" alt="" coords="1212,289,1331,315"/>
<area shape="rect" id="node11" href="buffer_8c.html#a5fc92b2c44523c64e98193eaa4f46541" title="unlock_buffer" alt="" coords="1221,441,1321,467"/>
<area shape="rect" id="node13" href="nilfs2_2bmap_8h.html#a282d60470960949277ac67e31c97f05b" title="nilfs_bmap_lookup" alt="" coords="1206,390,1337,417"/>
<area shape="rect" id="node14" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1425,467,1495,494"/>
<area shape="rect" id="node12" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1391,383,1529,410"/>
<area shape="rect" id="node16" href="nilfs_8h.html#aacff7fe9750a849356475b2063b69e3b" title="nilfs_transaction_begin" alt="" coords="991,70,1146,97"/>
<area shape="rect" id="node17" href="mdt_8c.html#a759ca943427ead8bb22ecdc82a9338ee" title="nilfs_mdt_insert_new\l_block" alt="" coords="996,223,1141,264"/>
<area shape="rect" id="node31" href="nilfs_8h.html#a576ee8d20fe7a5d7c5889cb118fe0533" title="nilfs_transaction_commit" alt="" coords="985,121,1152,147"/>
<area shape="rect" id="node32" href="nilfs_8h.html#a155140033fba0977ed043367001c3384" title="nilfs_transaction_abort" alt="" coords="992,171,1145,198"/>
<area shape="rect" id="node19" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1399,145,1521,171"/>
<area shape="rect" id="node21" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1393,231,1527,258"/>
<area shape="rect" id="node20" href="buffer_8c.html#ae236845de65ed065f74eecf8f6ee9742" title="EXPORT_SYMBOL_GPL" alt="" coords="1581,107,1753,134"/>
<area shape="rect" id="node22" href="fs-writeback_8c.html#af5890cdc0a937a4f944928bd1880d49b" title="block_dump___mark_inode\l_dirty" alt="" coords="1577,341,1757,383"/>
<area shape="rect" id="node25" href="fs-writeback_8c.html#ad0ca24311e1c0ba76d3810d240f72b08" title="locked_inode_to_wb\l_and_lock_list" alt="" coords="1597,159,1737,200"/>
<area shape="rect" id="node26" href="fs-writeback_8c.html#a2a36a21e075aa2a912f5c3cb027692cf" title="inode_io_list_move\l_locked" alt="" coords="1601,224,1734,265"/>
<area shape="rect" id="node29" href="fs-writeback_8c.html#a044f1d7ff09b03f639232ec0e6a88ee1" title="EXPORT_SYMBOL" alt="" coords="1598,290,1737,317"/>
<area shape="rect" id="node23" href="dcache_8c.html#a9f042046c19f277000ddfc09b02e3633" title="d_find_alias" alt="" coords="1842,315,1933,342"/>
<area shape="rect" id="node24" href="dcache_8c.html#aebcca358185b5176b69b97e7eab12dfd" title="dput" alt="" coords="1864,366,1911,393"/>
<area shape="rect" id="node27" href="fs-writeback_8c.html#ad9e6fcccf4baffa8e6c91881c6e428a9" title="wb_io_lists_populated" alt="" coords="1812,198,1963,225"/>
<area shape="rect" id="node28" href="fs-writeback_8c.html#aa31b94b7a70c8c8d396a5f0f3e8ef1ec" title="wb_io_lists_depopulated" alt="" coords="1805,249,1969,275"/>
<area shape="rect" id="node34" href="cpfile_8c.html#aeabb5bf5c2379caa588e3302673b1a30" title="nilfs_cpfile_checkpoints\l_per_block" alt="" coords="776,391,937,432"/>
<area shape="rect" id="node35" href="cpfile_8c.html#af3192909ddb88c2575bb1828d746310a" title="nilfs_cpfile_get_offset" alt="" coords="576,339,725,366"/>
<area shape="rect" id="node37" href="cpfile_8c.html#a67d134834f89f92295956bc0532ebc00" title="nilfs_cpfile_get_blkoff" alt="" coords="577,501,725,527"/>
<area shape="rect" id="node38" href="cpfile_8c.html#ad532d334d0ba51974d655e439bbd513c" title="nilfs_cpfile_block_init" alt="" coords="577,441,724,467"/>
<area shape="rect" id="node43" href="mdt_8c.html#a920f1cd6bb101e5f43a349fe7531e096" title="nilfs_mdt_delete_block" alt="" coords="573,609,728,635"/>
<area shape="rect" id="node44" href="nilfs2_2bmap_8c.html#a4d8c849b61993e58b8939b406cc3d72a" title="nilfs_bmap_delete" alt="" coords="793,659,920,686"/>
<area shape="rect" id="node47" href="mdt_8c.html#a309c3290c2f50bdeab9db8bd3569dc8d" title="nilfs_mdt_forget_block" alt="" coords="780,558,933,585"/>
<area shape="rect" id="node45" href="nilfs2_2bmap_8c.html#a54e619b4cf86165cb313e3e79ddc1964" title="nilfs_bmap_do_delete" alt="" coords="995,609,1143,635"/>
<area shape="rect" id="node46" href="nilfs2_2bmap_8c.html#a7a7ea41075313d317e5036ebc1fbbe3b" title="nilfs_bmap_convert\l_error" alt="" coords="1001,660,1136,701"/>
<area shape="rect" id="node48" href="page_8h.html#aaad58f68fa9675f7e9803744d0e3f414" title="nilfs_page_get_nth\l_block" alt="" coords="1003,492,1134,533"/>
<area shape="rect" id="node49" href="nilfs2_2page_8c.html#a866283c71b48e2aec59af06e7dd9d0ac" title="nilfs_forget_buffer" alt="" coords="1005,441,1132,467"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a5cd529efbea1f81e36a61c98a622c17b_icgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a5cd529efbea1f81e36a61c98a622c17b_icgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a5cd529efbea1f81e36a61c98a622c17b_icgraph" id="nilfs2_2ioctl_8c_a5cd529efbea1f81e36a61c98a622c17b_icgraph">
<area shape="rect" id="node2" href="nilfs_8h.html#aae05e8590cbb2a7f5e5ddc5a9a044a41" title="nilfs_ioctl_prepare\l_clean_segments" alt="" coords="172,49,299,90"/>
<area shape="rect" id="node3" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="347,31,495,57"/>
<area shape="rect" id="node6" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="895,81,1015,108"/>
<area shape="rect" id="node4" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096" title="nilfs_ioctl_clean_segments" alt="" coords="543,31,721,57"/>
<area shape="rect" id="node5" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="769,31,847,57"/>
<area shape="rect" id="node7" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="1071,81,1185,108"/>
<area shape="rect" id="node12" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="1063,31,1193,57"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="1246,5,1335,32"/>
<area shape="rect" id="node9" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="1245,56,1337,83"/>
<area shape="rect" id="node10" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="1241,107,1340,133"/>
<area shape="rect" id="node11" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="1248,157,1333,184"/>
</map>
</div>

</div>
</div>
<a id="abbe42ccd4ccc56d484156885e0e0bcc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbe42ccd4ccc56d484156885e0e0bcc2">&#9670;&nbsp;</a></span>nilfs_ioctl_do_get_bdescs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ssize_t nilfs_ioctl_do_get_bdescs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *&#160;</td>
          <td class="paramname"><em>nilfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64 *&#160;</td>
          <td class="paramname"><em>posp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nmembs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_ioctl_do_get_bdescs - callback method getting disk block descriptors : nilfs object : <em>not used</em> : <em>not used</em> : buffer for storing array of nilfs_bdesc structures : size in bytes of one bdesc item in array : count of bdescs in array</p>
<p>Description: <a class="el" href="nilfs2_2ioctl_8c.html#abbe42ccd4ccc56d484156885e0e0bcc2">nilfs_ioctl_do_get_bdescs()</a> function returns information about descriptors of disk block numbers. The NILFS_IOCTL_GET_BDESCS ioctl is used by nilfs_cleanerd daemon.</p>
<p>Return value: count of nilfs_bdescs structures in output buffer. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_abbe42ccd4ccc56d484156885e0e0bcc2_cgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_abbe42ccd4ccc56d484156885e0e0bcc2_cgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_abbe42ccd4ccc56d484156885e0e0bcc2_cgraph" id="nilfs2_2ioctl_8c_abbe42ccd4ccc56d484156885e0e0bcc2_cgraph">
<area shape="rect" id="node2" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="2414,493,2485,520"/>
<area shape="rect" id="node3" href="nilfs2_2bmap_8c.html#a01ec88eea126f6a0861c9da00aadb1d7" title="nilfs_bmap_lookup_at\l_level" alt="" coords="176,206,324,247"/>
<area shape="rect" id="node4" href="nilfs2_2bmap_8c.html#a7a7ea41075313d317e5036ebc1fbbe3b" title="nilfs_bmap_convert\l_error" alt="" coords="372,235,507,277"/>
<area shape="rect" id="node18" href="dat_8c.html#a1641d48ed89a1de35dda5513abd31cc3" title="nilfs_dat_translate" alt="" coords="375,184,503,211"/>
<area shape="rect" id="node50" href="nilfs2_2bmap_8c.html#aef6e9d2acff7b7d161389bb790483d06" title="nilfs_bmap_get_dat" alt="" coords="372,301,507,328"/>
<area shape="rect" id="node5" href="nilfs2_2super_8c.html#a5f424aefed531edcd064bfa930d96670" title="__nilfs_error" alt="" coords="990,933,1083,960"/>
<area shape="rect" id="node6" href="nilfs2_2super_8c.html#a9c0186bd7dabac457a10733abdbafc76" title="nilfs_set_error" alt="" coords="1163,940,1267,967"/>
<area shape="rect" id="node7" href="nilfs2_2super_8c.html#a8e2908caf99fa61e4da3134daa205dd0" title="nilfs_prepare_super" alt="" coords="1353,991,1487,1017"/>
<area shape="rect" id="node9" href="nilfs2_2super_8c.html#a0955c5c7387c5d5ea561c70b3eeb5925" title="nilfs_commit_super" alt="" coords="1353,940,1487,967"/>
<area shape="rect" id="node8" href="the__nilfs_8c.html#ab41ad60b507d8f217c2062c254a00367" title="nilfs_swap_super_block" alt="" coords="1561,991,1723,1017"/>
<area shape="rect" id="node10" href="nilfs2_2super_8c.html#a7f749f73b57e01f7d7b45df9c3cc836b" title="nilfs_sync_super" alt="" coords="1582,940,1702,967"/>
<area shape="rect" id="node11" href="buffer_8c.html#ad14d5a18ab22cf24baa474870664c128" title="__sync_dirty_buffer" alt="" coords="1975,900,2111,927"/>
<area shape="rect" id="node16" href="buffer_8c.html#aa6e73e23b9f75a73cf4112fb3d19b668" title="sync_dirty_buffer" alt="" coords="1784,945,1907,972"/>
<area shape="rect" id="node17" href="the__nilfs_8c.html#a6809c74809ebc6547ec0168ba3303ad8" title="nilfs_fall_back_super\l_block" alt="" coords="1773,997,1917,1038"/>
<area shape="rect" id="node12" href="buffer_8c.html#aac5852df82371e20e891b02a37461248" title="end_buffer_write_sync" alt="" coords="2176,911,2329,937"/>
<area shape="rect" id="node13" href="buffer_8c.html#a5fc92b2c44523c64e98193eaa4f46541" title="unlock_buffer" alt="" coords="2399,860,2499,887"/>
<area shape="rect" id="node14" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="2563,911,2701,937"/>
<area shape="rect" id="node15" href="buffer_8c.html#ab65df498c54845f497bae7afe9222c91" title="submit_bh" alt="" coords="2408,809,2491,836"/>
<area shape="rect" id="node19" href="nilfs2_2alloc_8c.html#abe8a4c8cbae85745a1a9b5e380bc2568" title="nilfs_palloc_get_entry\l_block" alt="" coords="555,330,703,371"/>
<area shape="rect" id="node45" href="nilfs_8h.html#aa2547b587fff139262e053241c6d5165" title="nilfs_doing_gc" alt="" coords="576,68,681,95"/>
<area shape="rect" id="node47" href="mdt_8c.html#ac812454a88416aae4c77cdb630f97716" title="nilfs_mdt_get_frozen\l_buffer" alt="" coords="557,145,700,186"/>
<area shape="rect" id="node49" href="nilfs2_2alloc_8c.html#a2a24fff0c9ab30080b5d2c08913b41ab" title="nilfs_palloc_block\l_get_entry" alt="" coords="775,210,901,251"/>
<area shape="rect" id="node20" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1797,347,1893,373"/>
<area shape="rect" id="node21" href="nilfs2_2alloc_8c.html#a539250d301eb19ff68f4f0ac0e54279f" title="nilfs_palloc_get_block" alt="" coords="1567,885,1717,912"/>
<area shape="rect" id="node32" href="nilfs2_2alloc_8c.html#a6075e80e07eb1fb451fc65d559e35484" title="nilfs_palloc_entry\l_blkoff" alt="" coords="777,390,899,431"/>
<area shape="rect" id="node22" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="1776,759,1915,785"/>
<area shape="rect" id="node23" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="1971,759,2116,785"/>
<area shape="rect" id="node27" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="1965,632,2121,659"/>
<area shape="rect" id="node24" href="mdt_8c.html#a43ded315f7122596d14b88c43fe9c98d" title="nilfs_mdt_submit_block" alt="" coords="2173,759,2332,785"/>
<area shape="rect" id="node25" href="nilfs2_2page_8c.html#aa4a24cc5a684ba71b9e4423f2ea38970" title="nilfs_grab_buffer" alt="" coords="2390,708,2509,735"/>
<area shape="rect" id="node26" href="nilfs2_2bmap_8h.html#a282d60470960949277ac67e31c97f05b" title="nilfs_bmap_lookup" alt="" coords="2384,759,2515,785"/>
<area shape="rect" id="node28" href="nilfs_8h.html#aacff7fe9750a849356475b2063b69e3b" title="nilfs_transaction_begin" alt="" coords="2175,657,2330,684"/>
<area shape="rect" id="node29" href="mdt_8c.html#a759ca943427ead8bb22ecdc82a9338ee" title="nilfs_mdt_insert_new\l_block" alt="" coords="2180,541,2325,582"/>
<area shape="rect" id="node30" href="nilfs_8h.html#a576ee8d20fe7a5d7c5889cb118fe0533" title="nilfs_transaction_commit" alt="" coords="2169,489,2336,516"/>
<area shape="rect" id="node31" href="nilfs_8h.html#a155140033fba0977ed043367001c3384" title="nilfs_transaction_abort" alt="" coords="2176,607,2329,633"/>
<area shape="rect" id="node33" href="nilfs2_2alloc_8c.html#a82746f35ce0628ca7fefdc6333713ae2" title="nilfs_palloc_group" alt="" coords="973,303,1100,329"/>
<area shape="rect" id="node43" href="nilfs2_2alloc_8c.html#aac6b438f00cbb6f14307701ffeb19c68" title="nilfs_palloc_bitmap\l_blkoff" alt="" coords="1353,733,1487,774"/>
<area shape="rect" id="node34" href="nilfs2_2alloc_8h.html#a80b91fe3100bd11e343f72a96ca838bd" title="nilfs_palloc_entries\l_per_group" alt="" coords="1148,331,1281,373"/>
<area shape="rect" id="node35" href="nilfs2_2alloc_8h.html#afccd9ef569bdfd1cf59338965c95fb1c" title="nilfs_palloc_init_blockgroup" alt="" coords="1329,339,1511,365"/>
<area shape="rect" id="node38" href="nilfs2_2alloc_8h.html#a10901166e88f0e569da3f5aa39eeab9d" title="nilfs_palloc_get_entry\l_block" alt="" coords="1346,514,1494,555"/>
<area shape="rect" id="node39" href="nilfs2_2alloc_8h.html#a9fde8cc073bd6c3157f774c7e33b5a5c" title="nilfs_palloc_block\l_get_entry" alt="" coords="1357,273,1483,314"/>
<area shape="rect" id="node40" href="nilfs2_2alloc_8h.html#a3d17a08175d8f5c51ebb5787acebad9c" title="nilfs_palloc_count\l_max_entries" alt="" coords="1357,449,1483,490"/>
<area shape="rect" id="node36" href="mdt_8c.html#ae0d853ce1775f22eb93823f6423e6fac" title="nilfs_mdt_set_entry_size" alt="" coords="1559,296,1725,323"/>
<area shape="rect" id="node37" href="nilfs2_2alloc_8c.html#a311c71ab31da7903a8a0ec492e1b8c66" title="nilfs_palloc_groups\l_per_desc_block" alt="" coords="1779,675,1912,717"/>
<area shape="rect" id="node41" href="nilfs2_2alloc_8c.html#af34d5e7d52a6f35ebc2bc99307ff3bd7" title="nilfs_palloc_count\l_desc_blocks" alt="" coords="1579,449,1705,490"/>
<area shape="rect" id="node42" href="nilfs2_2alloc_8c.html#a6ee53eba3cfc5dd453ba431de18f15b4" title="nilfs_palloc_mdt_file\l_can_grow" alt="" coords="1572,617,1712,658"/>
<area shape="rect" id="node44" href="nilfs2_2alloc_8c.html#a9e6fc04ad7375ca78f8b38b69bc2131b" title="nilfs_palloc_desc_blkoff" alt="" coords="1561,784,1723,811"/>
<area shape="rect" id="node46" href="nilfs_8h.html#a0e51be0290a47aca596f1257148b18d1" title="nilfs_test_transaction_flag" alt="" coords="751,43,925,69"/>
<area shape="rect" id="node48" href="page_8h.html#aaad58f68fa9675f7e9803744d0e3f414" title="nilfs_page_get_nth\l_block" alt="" coords="773,145,903,186"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_abbe42ccd4ccc56d484156885e0e0bcc2_icgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_abbe42ccd4ccc56d484156885e0e0bcc2_icgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_abbe42ccd4ccc56d484156885e0e0bcc2_icgraph" id="nilfs2_2ioctl_8c_abbe42ccd4ccc56d484156885e0e0bcc2_icgraph">
<area shape="rect" id="node2" href="nilfs2_2ioctl_8c.html#ae74437bf40467cd7ef392867b1506518" title="nilfs_ioctl_get_bdescs" alt="" coords="176,107,327,133"/>
<area shape="rect" id="node3" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="375,107,452,133"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="500,81,620,108"/>
<area shape="rect" id="node5" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="676,81,791,108"/>
<area shape="rect" id="node10" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="668,132,799,159"/>
<area shape="rect" id="node6" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="851,5,941,32"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="850,56,942,83"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="847,107,945,133"/>
<area shape="rect" id="node9" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="853,157,939,184"/>
</map>
</div>

</div>
</div>
<a id="a052bde2d471171e3c79d95c1c39c1561"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a052bde2d471171e3c79d95c1c39c1561">&#9670;&nbsp;</a></span>nilfs_ioctl_do_get_cpinfo()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ssize_t nilfs_ioctl_do_get_cpinfo </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *&#160;</td>
          <td class="paramname"><em>nilfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64 *&#160;</td>
          <td class="paramname"><em>posp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nmembs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_ioctl_do_get_cpinfo - callback method getting info about checkpoints : nilfs object : pointer on array of checkpoint's numbers : checkpoint mode (checkpoint or snapshot) : buffer for storing checkponts' info : size in bytes of one checkpoint info item in array : number of checkpoints in array (numbers and infos)</p>
<p>Description: <a class="el" href="nilfs2_2ioctl_8c.html#a052bde2d471171e3c79d95c1c39c1561">nilfs_ioctl_do_get_cpinfo()</a> function returns info about requested checkpoints. The NILFS_IOCTL_GET_CPINFO ioctl is used in lscp utility and by nilfs_cleanerd daemon.</p>
<p>Return value: count of nilfs_cpinfo structures in output buffer. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a052bde2d471171e3c79d95c1c39c1561_cgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a052bde2d471171e3c79d95c1c39c1561_cgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a052bde2d471171e3c79d95c1c39c1561_cgraph" id="nilfs2_2ioctl_8c_a052bde2d471171e3c79d95c1c39c1561_cgraph">
<area shape="rect" id="node2" href="cpfile_8c.html#a826c418383caea450a332055f0b568e6" title="nilfs_cpfile_get_cpinfo" alt="" coords="176,748,327,775"/>
<area shape="rect" id="node3" href="cpfile_8c.html#adcc12fdd10ce1288436abf623cafddf6" title="nilfs_cpfile_do_get\l_cpinfo" alt="" coords="375,838,505,879"/>
<area shape="rect" id="node32" href="cpfile_8c.html#a063fdfbdf57b5c77444ea3bee7eea7c5" title="nilfs_cpfile_do_get\l_ssinfo" alt="" coords="375,613,505,654"/>
<area shape="rect" id="node4" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1226,832,1322,859"/>
<area shape="rect" id="node5" href="mdt_8h.html#a6726d332d6af4468ef3bc1a2ab975b56" title="nilfs_mdt_cno" alt="" coords="593,904,696,931"/>
<area shape="rect" id="node6" href="cpfile_8c.html#aef70b3a4a8a5ff5520368acfc981309c" title="nilfs_cpfile_find_checkpoint\l_block" alt="" coords="553,773,736,814"/>
<area shape="rect" id="node28" href="cpfile_8c.html#aee514232b0632a21e05f667f33704ade" title="nilfs_cpfile_checkpoints\l_in_block" alt="" coords="564,955,725,997"/>
<area shape="rect" id="node30" href="cpfile_8c.html#a61f50ee8f6946771fe618e3ac414fae4" title="nilfs_cpfile_block\l_get_checkpoint" alt="" coords="583,838,706,879"/>
<area shape="rect" id="node31" href="cpfile_8c.html#accc61d49896374c113383a0f8eb50db2" title="nilfs_cpfile_checkpoint\l_to_cpinfo" alt="" coords="567,707,722,749"/>
<area shape="rect" id="node7" href="cpfile_8c.html#a67d134834f89f92295956bc0532ebc00" title="nilfs_cpfile_get_blkoff" alt="" coords="785,727,933,753"/>
<area shape="rect" id="node9" href="mdt_8c.html#adaed5e8667743afd0be01cfa99101c9f" title="nilfs_mdt_find_block" alt="" coords="788,600,929,627"/>
<area shape="rect" id="node27" href="cpfile_8c.html#a064a874e7effb026597d663177f77af0" title="nilfs_cpfile_first\l_checkpoint_in_block" alt="" coords="785,829,932,870"/>
<area shape="rect" id="node8" href="cpfile_8c.html#aeabb5bf5c2379caa588e3302673b1a30" title="nilfs_cpfile_checkpoints\l_per_block" alt="" coords="981,829,1143,870"/>
<area shape="rect" id="node10" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="989,575,1135,601"/>
<area shape="rect" id="node21" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1693,384,1764,411"/>
<area shape="rect" id="node26" href="nilfs2_2bmap_8c.html#a0eb8b386860fba82ebb80f18f00c50d3" title="nilfs_bmap_seek_key" alt="" coords="988,625,1136,652"/>
<area shape="rect" id="node11" href="mdt_8c.html#a43ded315f7122596d14b88c43fe9c98d" title="nilfs_mdt_submit_block" alt="" coords="1195,577,1353,604"/>
<area shape="rect" id="node12" href="nilfs2_2page_8c.html#aa4a24cc5a684ba71b9e4423f2ea38970" title="nilfs_grab_buffer" alt="" coords="1438,308,1557,335"/>
<area shape="rect" id="node14" href="buffer_8c.html#a5fc92b2c44523c64e98193eaa4f46541" title="unlock_buffer" alt="" coords="1885,628,1985,655"/>
<area shape="rect" id="node16" href="nilfs2_2bmap_8h.html#a282d60470960949277ac67e31c97f05b" title="nilfs_bmap_lookup" alt="" coords="1432,577,1563,604"/>
<area shape="rect" id="node22" href="buffer_8c.html#ade60786fa99b4fbb4cf607434af395db" title="end_buffer_read_sync" alt="" coords="1422,628,1573,655"/>
<area shape="rect" id="node24" href="buffer_8c.html#ab65df498c54845f497bae7afe9222c91" title="submit_bh" alt="" coords="1456,729,1539,756"/>
<area shape="rect" id="node13" href="nilfs2_2page_8c.html#a051d0268f3af219ba3e2a9ca79a8843c" title="__nilfs_get_page_block" alt="" coords="1649,308,1808,335"/>
<area shape="rect" id="node15" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="2051,603,2189,629"/>
<area shape="rect" id="node17" href="nilfs2_2bmap_8h.html#a47e39e91829ba28e44d1b0913f5ef480" title="nilfs_bmap_lookup_at\l_level" alt="" coords="1655,461,1803,502"/>
<area shape="rect" id="node20" href="nilfs2_2bmap_8h.html#abd107e6c373b3d12d3817a32d403001b" title="nilfs_bmap_get_dat" alt="" coords="1661,527,1796,553"/>
<area shape="rect" id="node18" href="nilfs2_2bmap_8c.html#a7a7ea41075313d317e5036ebc1fbbe3b" title="nilfs_bmap_convert\l_error" alt="" coords="1868,461,2003,502"/>
<area shape="rect" id="node19" href="nilfs2_2super_8c.html#a5f424aefed531edcd064bfa930d96670" title="__nilfs_error" alt="" coords="2073,468,2167,495"/>
<area shape="rect" id="node23" href="buffer_8c.html#a85e290b32d9599acd25df3b159392ab7" title="__end_buffer_read_notouch" alt="" coords="1637,628,1820,655"/>
<area shape="rect" id="node25" href="buffer_8c.html#a5fd6f01c5f9cff0945cb999cbefa412d" title="submit_bh_wbc" alt="" coords="1672,729,1785,756"/>
<area shape="rect" id="node29" href="cpfile_8c.html#af3192909ddb88c2575bb1828d746310a" title="nilfs_cpfile_get_offset" alt="" coords="784,945,933,972"/>
<area shape="rect" id="node33" href="cpfile_8c.html#a9ff8012cf954ee1e283e981e7c92c4cf" title="nilfs_cpfile_get_header\l_block" alt="" coords="567,459,722,501"/>
<area shape="rect" id="node48" href="cpfile_8c.html#af5bb4325de3f70ecd2e2b03ea43205cb" title="nilfs_cpfile_block\l_get_header" alt="" coords="583,642,706,683"/>
<area shape="rect" id="node49" href="cpfile_8c.html#a3aefee4421b37e13cdc047fbd1765eef" title="nilfs_cpfile_get_checkpoint\l_block" alt="" coords="555,525,734,566"/>
<area shape="rect" id="node34" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="789,499,928,525"/>
<area shape="rect" id="node35" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="984,283,1140,309"/>
<area shape="rect" id="node36" href="nilfs_8h.html#aacff7fe9750a849356475b2063b69e3b" title="nilfs_transaction_begin" alt="" coords="1197,207,1351,233"/>
<area shape="rect" id="node39" href="mdt_8c.html#a759ca943427ead8bb22ecdc82a9338ee" title="nilfs_mdt_insert_new\l_block" alt="" coords="1201,47,1347,89"/>
<area shape="rect" id="node43" href="nilfs_8h.html#a576ee8d20fe7a5d7c5889cb118fe0533" title="nilfs_transaction_commit" alt="" coords="1191,359,1357,385"/>
<area shape="rect" id="node47" href="nilfs_8h.html#a155140033fba0977ed043367001c3384" title="nilfs_transaction_abort" alt="" coords="1197,308,1351,335"/>
<area shape="rect" id="node37" href="nilfs2_2segment_8c.html#ada0ba1bf162679380f6096c9f83b94ea" title="nilfs_prepare_segment_lock" alt="" coords="1405,156,1589,183"/>
<area shape="rect" id="node38" href="the__nilfs_8c.html#a137faca9117bfef2a2264ccf3a9aa809" title="nilfs_near_disk_full" alt="" coords="1431,207,1564,233"/>
<area shape="rect" id="node40" href="nilfs2_2bmap_8c.html#a4e7fd87b553f99a5d10b2f1d0cbbec0b" title="nilfs_bmap_insert" alt="" coords="1667,131,1791,157"/>
<area shape="rect" id="node41" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1874,181,1997,208"/>
<area shape="rect" id="node42" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="1426,55,1569,81"/>
<area shape="rect" id="node44" href="nilfs2_2segment_8c.html#aa55509ef3ea01cc74488f916f1d551f3" title="nilfs_segctor_start\l_timer" alt="" coords="1433,410,1562,451"/>
<area shape="rect" id="node45" href="nilfs2_2segment_8c.html#a23c179e5f28f728a442e31641f71c795" title="nilfs_segctor_do_flush" alt="" coords="1421,257,1573,284"/>
<area shape="rect" id="node46" href="nilfs2_2segment_8c.html#ad8bab60b16b37c93e180e1ea3e1580ad" title="nilfs_construct_segment" alt="" coords="1415,359,1579,385"/>
<area shape="rect" id="node50" href="cpfile_8c.html#ad532d334d0ba51974d655e439bbd513c" title="nilfs_cpfile_block_init" alt="" coords="785,676,932,703"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a052bde2d471171e3c79d95c1c39c1561_icgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a052bde2d471171e3c79d95c1c39c1561_icgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a052bde2d471171e3c79d95c1c39c1561_icgraph" id="nilfs2_2ioctl_8c_a052bde2d471171e3c79d95c1c39c1561_icgraph">
<area shape="rect" id="node2" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="176,107,253,133"/>
<area shape="rect" id="node3" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="301,81,421,108"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="477,81,592,108"/>
<area shape="rect" id="node9" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="469,132,600,159"/>
<area shape="rect" id="node5" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="653,5,742,32"/>
<area shape="rect" id="node6" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="651,56,743,83"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="648,107,747,133"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="655,157,740,184"/>
</map>
</div>

</div>
</div>
<a id="a34169b6b8da0810dd6b289d1ac8f192f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34169b6b8da0810dd6b289d1ac8f192f">&#9670;&nbsp;</a></span>nilfs_ioctl_do_get_suinfo()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ssize_t nilfs_ioctl_do_get_suinfo </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *&#160;</td>
          <td class="paramname"><em>nilfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64 *&#160;</td>
          <td class="paramname"><em>posp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nmembs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_ioctl_do_get_suinfo - callback method getting segment usage info : nilfs object : pointer on array of segment numbers : <em>not used</em> : buffer for storing suinfo array : size in bytes of one suinfo item in array : count of segment numbers and suinfos in array</p>
<p>Description: <a class="el" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f">nilfs_ioctl_do_get_suinfo()</a> function returns segment usage info about requested segments. The NILFS_IOCTL_GET_SUINFO ioctl is used in lssu, nilfs_resize utilities and by nilfs_cleanerd daemon.</p>
<p>Return value: count of nilfs_suinfo structures in output buffer. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a34169b6b8da0810dd6b289d1ac8f192f_cgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a34169b6b8da0810dd6b289d1ac8f192f_cgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a34169b6b8da0810dd6b289d1ac8f192f_cgraph" id="nilfs2_2ioctl_8c_a34169b6b8da0810dd6b289d1ac8f192f_cgraph">
<area shape="rect" id="node2" href="sufile_8c.html#a1e877b67f3c19b343311b97a6554c0ba" title="nilfs_sufile_get_suinfo" alt="" coords="176,1501,327,1528"/>
<area shape="rect" id="node3" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1700,1257,1796,1284"/>
<area shape="rect" id="node4" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="1503,1713,1645,1754"/>
<area shape="rect" id="node5" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="375,929,555,956"/>
<area shape="rect" id="node14" href="sufile_8c.html#a38f2abf7ef7577b1af4b9e8fc9316727" title="nilfs_sufile_get_segment\l_usage_block" alt="" coords="1063,1494,1230,1535"/>
<area shape="rect" id="node16" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="1073,1006,1220,1047"/>
<area shape="rect" id="node17" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="1290,1712,1439,1739"/>
<area shape="rect" id="node28" href="the__nilfs_8h.html#a51bb53199a62a87f269e03404136d00f" title="nilfs_segment_is_active" alt="" coords="1065,1661,1228,1688"/>
<area shape="rect" id="node6" href="sufile_8h.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="603,467,785,493"/>
<area shape="rect" id="node8" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="623,291,765,333"/>
<area shape="rect" id="node9" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="863,1283,982,1309"/>
<area shape="rect" id="node23" href="sufile_8h.html#ae5c9db186be6baf07d66e049a0fd9b9b" title="nilfs_sufile_mark_dirty" alt="" coords="847,839,999,865"/>
<area shape="rect" id="node24" href="sufile_8h.html#ac6379742426c30d02072b1a5b0f527f8" title="nilfs_sufile_set_segment\l_usage" alt="" coords="839,897,1006,938"/>
<area shape="rect" id="node25" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033" title="nblocks" alt="" coords="1113,2504,1180,2531"/>
<area shape="rect" id="node26" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="625,651,763,677"/>
<area shape="rect" id="node27" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="847,1581,998,1608"/>
<area shape="rect" id="node29" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687" title="nilfs_sufile_set_suinfo" alt="" coords="847,775,998,801"/>
<area shape="rect" id="node31" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="854,1333,991,1360"/>
<area shape="rect" id="node32" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="857,1384,988,1411"/>
<area shape="rect" id="node33" href="sufile_8h.html#acad60c93c0f7f6c3a8a9dc843107f1ed" title="nilfs_sufile_do_scrap" alt="" coords="851,616,995,643"/>
<area shape="rect" id="node34" href="sufile_8h.html#a577d0d35a7907909b6c0a139d8cc1704" title="nilfs_sufile_do_free" alt="" coords="855,667,990,693"/>
<area shape="rect" id="node35" href="sufile_8h.html#aff87ff4257115842ff3c7940e5f8e769" title="nilfs_sufile_do_cancel_free" alt="" coords="833,499,1012,525"/>
<area shape="rect" id="node36" href="sufile_8h.html#a7e943e59486cd6176a3317bed589b7c9" title="nilfs_sufile_do_set\l_error" alt="" coords="857,550,988,591"/>
<area shape="rect" id="node37" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="631,412,757,439"/>
<area shape="rect" id="node41" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="865,2057,981,2084"/>
<area shape="rect" id="node48" href="sufile_8h.html#a202058a1d5a7ee3658e8e7cda1ffee37" title="nilfs_sufile_trim_fs" alt="" coords="857,2235,988,2261"/>
<area shape="rect" id="node7" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="1101,397,1192,424"/>
<area shape="rect" id="node10" href="sufile_8c.html#a7df3cdff37c5aa00cca3458f1d7d400e" title="nilfs_sufile_get_header\l_block" alt="" coords="1069,1275,1224,1317"/>
<area shape="rect" id="node18" href="sufile_8c.html#a34ecb984fd0f57101d2ee0b4bde4bf95" title="nilfs_sufile_segment\l_usages_in_block" alt="" coords="1076,1814,1217,1855"/>
<area shape="rect" id="node19" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1303,549,1426,576"/>
<area shape="rect" id="node22" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="1075,600,1218,627"/>
<area shape="rect" id="node11" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="1295,1299,1434,1325"/>
<area shape="rect" id="node12" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="1501,1273,1647,1300"/>
<area shape="rect" id="node13" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="1496,1324,1652,1351"/>
<area shape="rect" id="node15" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="1291,1443,1439,1469"/>
<area shape="rect" id="node20" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1513,524,1635,551"/>
<area shape="rect" id="node21" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1507,575,1641,601"/>
<area shape="rect" id="node30" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="1063,499,1230,525"/>
<area shape="rect" id="node38" href="the__nilfs_8c.html#aa7bf85e7bb9022b3680b22d945d17f91" title="nilfs_nrsvsegs" alt="" coords="1093,144,1200,171"/>
<area shape="rect" id="node39" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="853,1115,992,1157"/>
<area shape="rect" id="node40" href="the__nilfs_8c.html#a38632ac69509070865038bf0120a1509" title="nilfs_set_nsegments" alt="" coords="851,144,994,171"/>
<area shape="rect" id="node42" href="nilfs2_2inode_8c.html#ae758d8edf633a8af3535ac0af248f1d1" title="nilfs_iget_locked" alt="" coords="1087,2032,1206,2059"/>
<area shape="rect" id="node43" href="mdt_8c.html#a9d24c6e56a98e581fc30fd8a65841e2a" title="nilfs_mdt_init" alt="" coords="1097,2083,1196,2109"/>
<area shape="rect" id="node44" href="mdt_8c.html#ae0d853ce1775f22eb93823f6423e6fac" title="nilfs_mdt_set_entry_size" alt="" coords="1281,2273,1448,2300"/>
<area shape="rect" id="node45" href="nilfs2_2inode_8c.html#affec0e84c605c1d9028332974ba58cd3" title="nilfs_read_inode_common" alt="" coords="1060,2133,1233,2160"/>
<area shape="rect" id="node46" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="1300,2197,1429,2224"/>
<area shape="rect" id="node47" href="bad__inode_8c.html#a8c027cf52e2b7669b11b0bfa09bbcd45" title="iget_failed" alt="" coords="1106,2184,1187,2211"/>
<area shape="rect" id="node49" href="the__nilfs_8h.html#acbe15a8b57f8ecf5e4777294c2f7303d" title="nilfs_get_segnum_of\l_block" alt="" coords="1075,2387,1218,2429"/>
<area shape="rect" id="node50" href="the__nilfs_8h.html#a0dc161eb6c4f6bad9212b67517b46a37" title="nilfs_get_segment_range" alt="" coords="1063,2336,1230,2363"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a34169b6b8da0810dd6b289d1ac8f192f_icgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a34169b6b8da0810dd6b289d1ac8f192f_icgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a34169b6b8da0810dd6b289d1ac8f192f_icgraph" id="nilfs2_2ioctl_8c_a34169b6b8da0810dd6b289d1ac8f192f_icgraph">
<area shape="rect" id="node2" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="176,107,253,133"/>
<area shape="rect" id="node3" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="301,81,421,108"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="477,81,592,108"/>
<area shape="rect" id="node9" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="469,132,600,159"/>
<area shape="rect" id="node5" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="653,5,742,32"/>
<area shape="rect" id="node6" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="651,56,743,83"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="648,107,747,133"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="655,157,740,184"/>
</map>
</div>

</div>
</div>
<a id="a2621da9c473ed9a128f03148bb502c4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2621da9c473ed9a128f03148bb502c4f">&#9670;&nbsp;</a></span>nilfs_ioctl_do_get_vinfo()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ssize_t nilfs_ioctl_do_get_vinfo </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *&#160;</td>
          <td class="paramname"><em>nilfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64 *&#160;</td>
          <td class="paramname"><em>posp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nmembs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_ioctl_do_get_vinfo - callback method getting virtual blocks info : nilfs object : <em>not used</em> : <em>not used</em> : buffer for storing array of nilfs_vinfo structures : size in bytes of one vinfo item in array : count of vinfos in array</p>
<p>Description: <a class="el" href="nilfs2_2ioctl_8c.html#a2621da9c473ed9a128f03148bb502c4f">nilfs_ioctl_do_get_vinfo()</a> function returns information on virtual block addresses. The NILFS_IOCTL_GET_VINFO ioctl is used by nilfs_cleanerd daemon.</p>
<p>Return value: count of nilfs_vinfo structures in output buffer. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a2621da9c473ed9a128f03148bb502c4f_cgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a2621da9c473ed9a128f03148bb502c4f_cgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a2621da9c473ed9a128f03148bb502c4f_cgraph" id="nilfs2_2ioctl_8c_a2621da9c473ed9a128f03148bb502c4f_cgraph">
<area shape="rect" id="node2" href="dat_8c.html#a3f5272e9420b7a85207243daace2b072" title="nilfs_dat_get_vinfo" alt="" coords="176,1068,307,1095"/>
<area shape="rect" id="node3" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1547,981,1643,1008"/>
<area shape="rect" id="node4" href="nilfs2_2alloc_8c.html#abe8a4c8cbae85745a1a9b5e380bc2568" title="nilfs_palloc_get_entry\l_block" alt="" coords="355,981,503,1022"/>
<area shape="rect" id="node50" href="nilfs2_2alloc_8c.html#a2a24fff0c9ab30080b5d2c08913b41ab" title="nilfs_palloc_block\l_get_entry" alt="" coords="551,1061,676,1102"/>
<area shape="rect" id="node5" href="nilfs2_2alloc_8c.html#a539250d301eb19ff68f4f0ac0e54279f" title="nilfs_palloc_get_block" alt="" coords="1317,444,1468,471"/>
<area shape="rect" id="node35" href="nilfs2_2alloc_8c.html#a6075e80e07eb1fb451fc65d559e35484" title="nilfs_palloc_entry\l_blkoff" alt="" coords="552,966,675,1007"/>
<area shape="rect" id="node6" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="1525,427,1664,453"/>
<area shape="rect" id="node7" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="1719,604,1864,631"/>
<area shape="rect" id="node21" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="1713,249,1869,276"/>
<area shape="rect" id="node8" href="mdt_8c.html#a43ded315f7122596d14b88c43fe9c98d" title="nilfs_mdt_submit_block" alt="" coords="1921,629,2080,656"/>
<area shape="rect" id="node9" href="nilfs2_2page_8c.html#aa4a24cc5a684ba71b9e4423f2ea38970" title="nilfs_grab_buffer" alt="" coords="2165,275,2283,301"/>
<area shape="rect" id="node11" href="buffer_8c.html#a5fc92b2c44523c64e98193eaa4f46541" title="unlock_buffer" alt="" coords="2606,747,2706,773"/>
<area shape="rect" id="node13" href="nilfs2_2bmap_8h.html#a282d60470960949277ac67e31c97f05b" title="nilfs_bmap_lookup" alt="" coords="2159,680,2289,707"/>
<area shape="rect" id="node16" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="2420,477,2491,504"/>
<area shape="rect" id="node17" href="buffer_8c.html#ade60786fa99b4fbb4cf607434af395db" title="end_buffer_read_sync" alt="" coords="2149,797,2299,824"/>
<area shape="rect" id="node19" href="buffer_8c.html#ab65df498c54845f497bae7afe9222c91" title="submit_bh" alt="" coords="2183,629,2265,656"/>
<area shape="rect" id="node10" href="nilfs2_2page_8c.html#a051d0268f3af219ba3e2a9ca79a8843c" title="__nilfs_get_page_block" alt="" coords="2376,275,2535,301"/>
<area shape="rect" id="node12" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="2765,637,2904,664"/>
<area shape="rect" id="node14" href="nilfs2_2bmap_8h.html#a47e39e91829ba28e44d1b0913f5ef480" title="nilfs_bmap_lookup_at\l_level" alt="" coords="2381,681,2529,722"/>
<area shape="rect" id="node15" href="nilfs2_2bmap_8h.html#abd107e6c373b3d12d3817a32d403001b" title="nilfs_bmap_get_dat" alt="" coords="2388,629,2523,656"/>
<area shape="rect" id="node18" href="buffer_8c.html#a85e290b32d9599acd25df3b159392ab7" title="__end_buffer_read_notouch" alt="" coords="2364,797,2547,824"/>
<area shape="rect" id="node20" href="buffer_8c.html#a5fd6f01c5f9cff0945cb999cbefa412d" title="submit_bh_wbc" alt="" coords="2399,579,2512,605"/>
<area shape="rect" id="node22" href="nilfs_8h.html#aacff7fe9750a849356475b2063b69e3b" title="nilfs_transaction_begin" alt="" coords="1923,224,2078,251"/>
<area shape="rect" id="node26" href="mdt_8c.html#a759ca943427ead8bb22ecdc82a9338ee" title="nilfs_mdt_insert_new\l_block" alt="" coords="1928,369,2073,410"/>
<area shape="rect" id="node30" href="nilfs_8h.html#a576ee8d20fe7a5d7c5889cb118fe0533" title="nilfs_transaction_commit" alt="" coords="1917,93,2084,120"/>
<area shape="rect" id="node34" href="nilfs_8h.html#a155140033fba0977ed043367001c3384" title="nilfs_transaction_abort" alt="" coords="1924,173,2077,200"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8c.html#ada0ba1bf162679380f6096c9f83b94ea" title="nilfs_prepare_segment_lock" alt="" coords="2132,224,2316,251"/>
<area shape="rect" id="node24" href="the__nilfs_8c.html#a137faca9117bfef2a2264ccf3a9aa809" title="nilfs_near_disk_full" alt="" coords="2157,173,2291,200"/>
<area shape="rect" id="node25" href="sufile_8c.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="2364,173,2547,200"/>
<area shape="rect" id="node27" href="nilfs2_2bmap_8c.html#a4e7fd87b553f99a5d10b2f1d0cbbec0b" title="nilfs_bmap_insert" alt="" coords="2162,376,2286,403"/>
<area shape="rect" id="node28" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="2595,401,2717,428"/>
<area shape="rect" id="node29" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="2153,477,2295,504"/>
<area shape="rect" id="node31" href="nilfs2_2segment_8c.html#aa55509ef3ea01cc74488f916f1d551f3" title="nilfs_segctor_start\l_timer" alt="" coords="2159,57,2289,98"/>
<area shape="rect" id="node32" href="nilfs2_2segment_8c.html#a23c179e5f28f728a442e31641f71c795" title="nilfs_segctor_do_flush" alt="" coords="2148,123,2300,149"/>
<area shape="rect" id="node33" href="nilfs2_2segment_8c.html#ad8bab60b16b37c93e180e1ea3e1580ad" title="nilfs_construct_segment" alt="" coords="2142,5,2306,32"/>
<area shape="rect" id="node36" href="nilfs2_2alloc_8c.html#a82746f35ce0628ca7fefdc6333713ae2" title="nilfs_palloc_group" alt="" coords="724,973,851,1000"/>
<area shape="rect" id="node48" href="nilfs2_2alloc_8c.html#aac6b438f00cbb6f14307701ffeb19c68" title="nilfs_palloc_bitmap\l_blkoff" alt="" coords="1104,839,1237,881"/>
<area shape="rect" id="node37" href="nilfs2_2alloc_8h.html#a80b91fe3100bd11e343f72a96ca838bd" title="nilfs_palloc_entries\l_per_group" alt="" coords="899,903,1032,945"/>
<area shape="rect" id="node38" href="nilfs2_2alloc_8h.html#afccd9ef569bdfd1cf59338965c95fb1c" title="nilfs_palloc_init_blockgroup" alt="" coords="1080,911,1261,937"/>
<area shape="rect" id="node41" href="nilfs2_2alloc_8h.html#a10901166e88f0e569da3f5aa39eeab9d" title="nilfs_palloc_get_entry\l_block" alt="" coords="1097,619,1245,661"/>
<area shape="rect" id="node42" href="nilfs2_2alloc_8h.html#a9fde8cc073bd6c3157f774c7e33b5a5c" title="nilfs_palloc_block\l_get_entry" alt="" coords="1108,966,1233,1007"/>
<area shape="rect" id="node43" href="nilfs2_2alloc_8h.html#a3d17a08175d8f5c51ebb5787acebad9c" title="nilfs_palloc_count\l_max_entries" alt="" coords="1107,685,1234,726"/>
<area shape="rect" id="node39" href="mdt_8c.html#ae0d853ce1775f22eb93823f6423e6fac" title="nilfs_mdt_set_entry_size" alt="" coords="1309,981,1476,1008"/>
<area shape="rect" id="node40" href="nilfs2_2alloc_8c.html#a311c71ab31da7903a8a0ec492e1b8c66" title="nilfs_palloc_groups\l_per_desc_block" alt="" coords="1528,721,1661,762"/>
<area shape="rect" id="node44" href="nilfs2_2alloc_8c.html#af34d5e7d52a6f35ebc2bc99307ff3bd7" title="nilfs_palloc_count\l_desc_blocks" alt="" coords="1329,495,1456,537"/>
<area shape="rect" id="node46" href="nilfs2_2alloc_8c.html#a6ee53eba3cfc5dd453ba431de18f15b4" title="nilfs_palloc_mdt_file\l_can_grow" alt="" coords="1323,561,1463,602"/>
<area shape="rect" id="node45" href="nilfs2_2bmap_8c.html#a8a08ae054741730726fedb65362f507f" title="nilfs_bmap_last_key" alt="" coords="1524,477,1665,504"/>
<area shape="rect" id="node47" href="nilfs2_2alloc_8c.html#ada4790e3b7421b6ed7ced5419b5d5dc5" title="nilfs_palloc_groups\l_count" alt="" coords="1528,579,1661,621"/>
<area shape="rect" id="node49" href="nilfs2_2alloc_8c.html#a9e6fc04ad7375ca78f8b38b69bc2131b" title="nilfs_palloc_desc_blkoff" alt="" coords="1312,829,1473,856"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a2621da9c473ed9a128f03148bb502c4f_icgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a2621da9c473ed9a128f03148bb502c4f_icgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a2621da9c473ed9a128f03148bb502c4f_icgraph" id="nilfs2_2ioctl_8c_a2621da9c473ed9a128f03148bb502c4f_icgraph">
<area shape="rect" id="node2" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="176,107,253,133"/>
<area shape="rect" id="node3" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="301,81,421,108"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="477,81,592,108"/>
<area shape="rect" id="node9" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="469,132,600,159"/>
<area shape="rect" id="node5" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="653,5,742,32"/>
<area shape="rect" id="node6" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="651,56,743,83"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="648,107,747,133"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="655,157,740,184"/>
</map>
</div>

</div>
</div>
<a id="ab7d5c78fbd6a179cb3f39f87cb63285d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7d5c78fbd6a179cb3f39f87cb63285d">&#9670;&nbsp;</a></span>nilfs_ioctl_free_vblocknrs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_ioctl_free_vblocknrs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *&#160;</td>
          <td class="paramname"><em>nilfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct nilfs_argv *&#160;</td>
          <td class="paramname"><em>argv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_ioctl_free_vblocknrs - free virtual block numbers : nilfs object : vector of arguments from userspace : array of virtual block numbers</p>
<p>Description: <a class="el" href="nilfs2_2ioctl_8c.html#ab7d5c78fbd6a179cb3f39f87cb63285d">nilfs_ioctl_free_vblocknrs()</a> function frees the virtual block numbers specified by  and -&gt;v_nmembs.</p>
<p>Return Value: Number of processed virtual block numbers or error code, otherwise.</p>
<p>%-EIO - I/O error.</p>
<p>%-ENOMEM - Insufficient amount of memory available.</p>
<p>%-ENOENT - The virtual block number have not been allocated. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_ab7d5c78fbd6a179cb3f39f87cb63285d_cgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_ab7d5c78fbd6a179cb3f39f87cb63285d_cgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_ab7d5c78fbd6a179cb3f39f87cb63285d_cgraph" id="nilfs2_2ioctl_8c_ab7d5c78fbd6a179cb3f39f87cb63285d_cgraph">
<area shape="rect" id="node2" href="dat_8c.html#a91e8f9af4bb7b8f3e12f9344f70c058f" title="nilfs_dat_freev" alt="" coords="223,452,329,479"/>
<area shape="rect" id="node3" href="nilfs2_2alloc_8c.html#a12ba11e974447995be8fa927aaea6f4b" title="nilfs_palloc_freev" alt="" coords="377,452,500,479"/>
<area shape="rect" id="node4" href="nilfs2_2alloc_8h.html#a80b91fe3100bd11e343f72a96ca838bd" title="nilfs_palloc_entries\l_per_group" alt="" coords="998,742,1131,783"/>
<area shape="rect" id="node6" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="2080,584,2176,611"/>
<area shape="rect" id="node15" href="nilfs2_2alloc_8c.html#a82746f35ce0628ca7fefdc6333713ae2" title="nilfs_palloc_group" alt="" coords="1641,407,1767,433"/>
<area shape="rect" id="node25" href="nilfs2_2alloc_8c.html#a98fa52b7d8afb8ee8f46e61b545baf32" title="nilfs_palloc_get_desc\l_block" alt="" coords="548,897,695,938"/>
<area shape="rect" id="node27" href="nilfs2_2alloc_8c.html#adad584204b57f762d00f67fad39b515f" title="nilfs_palloc_get_bitmap\l_block" alt="" coords="1205,813,1364,854"/>
<area shape="rect" id="node28" href="mdt_8h.html#a3cdb2c26d17013a183fe241b115dd589" title="nilfs_mdt_bgl_lock" alt="" coords="556,305,687,332"/>
<area shape="rect" id="node29" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="560,1513,683,1540"/>
<area shape="rect" id="node42" href="nilfs2_2alloc_8c.html#a94cff05fa5abd31449187412146a49f3" title="nilfs_palloc_delete\l_entry_block" alt="" coords="1220,174,1349,215"/>
<area shape="rect" id="node46" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="1855,8,1997,35"/>
<area shape="rect" id="node48" href="nilfs2_2alloc_8c.html#abd4c4ac38f5955b50e2d1ed3a4cfe194" title="nilfs_palloc_block\l_get_group_desc" alt="" coords="772,1263,897,1305"/>
<area shape="rect" id="node49" href="nilfs2_2alloc_8c.html#a52d2388c44c82795fb085bdba291a3c0" title="nilfs_palloc_group\l_desc_add_entries" alt="" coords="556,1014,687,1055"/>
<area shape="rect" id="node50" href="nilfs2_2alloc_8c.html#a3216027ff788f54c4e96c564568c893d" title="nilfs_palloc_delete\l_bitmap_block" alt="" coords="1220,239,1349,281"/>
<area shape="rect" id="node5" href="nilfs2_2alloc_8h.html#afccd9ef569bdfd1cf59338965c95fb1c" title="nilfs_palloc_init_blockgroup" alt="" coords="1613,753,1795,780"/>
<area shape="rect" id="node9" href="nilfs2_2alloc_8h.html#a10901166e88f0e569da3f5aa39eeab9d" title="nilfs_palloc_get_entry\l_block" alt="" coords="1211,631,1359,673"/>
<area shape="rect" id="node18" href="nilfs2_2alloc_8h.html#a9fde8cc073bd6c3157f774c7e33b5a5c" title="nilfs_palloc_block\l_get_entry" alt="" coords="1427,458,1553,499"/>
<area shape="rect" id="node19" href="nilfs2_2alloc_8h.html#a3d17a08175d8f5c51ebb5787acebad9c" title="nilfs_palloc_count\l_max_entries" alt="" coords="1641,934,1767,975"/>
<area shape="rect" id="node7" href="mdt_8c.html#ae0d853ce1775f22eb93823f6423e6fac" title="nilfs_mdt_set_entry_size" alt="" coords="1843,711,2009,737"/>
<area shape="rect" id="node8" href="nilfs2_2alloc_8c.html#a311c71ab31da7903a8a0ec492e1b8c66" title="nilfs_palloc_groups\l_per_desc_block" alt="" coords="2061,1175,2195,1217"/>
<area shape="rect" id="node10" href="nilfs2_2alloc_8c.html#a539250d301eb19ff68f4f0ac0e54279f" title="nilfs_palloc_get_block" alt="" coords="1415,816,1565,843"/>
<area shape="rect" id="node14" href="nilfs2_2alloc_8c.html#a6075e80e07eb1fb451fc65d559e35484" title="nilfs_palloc_entry\l_blkoff" alt="" coords="1429,523,1551,565"/>
<area shape="rect" id="node11" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="1635,808,1773,835"/>
<area shape="rect" id="node12" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="1853,761,1999,788"/>
<area shape="rect" id="node13" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="1848,812,2004,839"/>
<area shape="rect" id="node16" href="nilfs2_2alloc_8c.html#aac6b438f00cbb6f14307701ffeb19c68" title="nilfs_palloc_bitmap\l_blkoff" alt="" coords="1637,859,1771,901"/>
<area shape="rect" id="node17" href="nilfs2_2alloc_8c.html#a9e6fc04ad7375ca78f8b38b69bc2131b" title="nilfs_palloc_desc_blkoff" alt="" coords="1845,1132,2007,1159"/>
<area shape="rect" id="node20" href="nilfs2_2alloc_8c.html#af34d5e7d52a6f35ebc2bc99307ff3bd7" title="nilfs_palloc_count\l_desc_blocks" alt="" coords="1863,914,1989,955"/>
<area shape="rect" id="node23" href="nilfs2_2alloc_8c.html#a6ee53eba3cfc5dd453ba431de18f15b4" title="nilfs_palloc_mdt_file\l_can_grow" alt="" coords="1856,1285,1996,1326"/>
<area shape="rect" id="node21" href="nilfs2_2bmap_8c.html#a8a08ae054741730726fedb65362f507f" title="nilfs_bmap_last_key" alt="" coords="2057,921,2199,948"/>
<area shape="rect" id="node22" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="2093,160,2163,187"/>
<area shape="rect" id="node24" href="nilfs2_2alloc_8c.html#ada4790e3b7421b6ed7ced5419b5d5dc5" title="nilfs_palloc_groups\l_count" alt="" coords="2061,1285,2195,1326"/>
<area shape="rect" id="node26" href="nilfs2_2alloc_8c.html#adbbabe3bdf5bb646714ce22855ca16b9" title="nilfs_palloc_desc_block_init" alt="" coords="743,929,927,956"/>
<area shape="rect" id="node30" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="774,1629,895,1656"/>
<area shape="rect" id="node32" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="767,1488,902,1515"/>
<area shape="rect" id="node41" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="765,1539,904,1565"/>
<area shape="rect" id="node31" href="buffer_8c.html#ae236845de65ed065f74eecf8f6ee9742" title="EXPORT_SYMBOL_GPL" alt="" coords="979,1651,1151,1677"/>
<area shape="rect" id="node33" href="fs-writeback_8c.html#af5890cdc0a937a4f944928bd1880d49b" title="block_dump___mark_inode\l_dirty" alt="" coords="975,1402,1155,1443"/>
<area shape="rect" id="node36" href="fs-writeback_8c.html#ad0ca24311e1c0ba76d3810d240f72b08" title="locked_inode_to_wb\l_and_lock_list" alt="" coords="995,1585,1135,1626"/>
<area shape="rect" id="node37" href="fs-writeback_8c.html#a2a36a21e075aa2a912f5c3cb027692cf" title="inode_io_list_move\l_locked" alt="" coords="998,1519,1131,1561"/>
<area shape="rect" id="node40" href="fs-writeback_8c.html#a044f1d7ff09b03f639232ec0e6a88ee1" title="EXPORT_SYMBOL" alt="" coords="995,1468,1134,1495"/>
<area shape="rect" id="node34" href="dcache_8c.html#a9f042046c19f277000ddfc09b02e3633" title="d_find_alias" alt="" coords="1239,1405,1330,1432"/>
<area shape="rect" id="node35" href="dcache_8c.html#aebcca358185b5176b69b97e7eab12dfd" title="dput" alt="" coords="1261,1456,1308,1483"/>
<area shape="rect" id="node38" href="fs-writeback_8c.html#ad9e6fcccf4baffa8e6c91881c6e428a9" title="wb_io_lists_populated" alt="" coords="1209,1519,1360,1545"/>
<area shape="rect" id="node39" href="fs-writeback_8c.html#aa31b94b7a70c8c8d396a5f0f3e8ef1ec" title="wb_io_lists_depopulated" alt="" coords="1203,1569,1367,1596"/>
<area shape="rect" id="node43" href="nilfs2_2alloc_8c.html#a91a03cbc72624b3e78db8cb4ddaf6ad6" title="nilfs_palloc_delete\l_block" alt="" coords="1425,182,1555,223"/>
<area shape="rect" id="node44" href="mdt_8c.html#a920f1cd6bb101e5f43a349fe7531e096" title="nilfs_mdt_delete_block" alt="" coords="1627,189,1781,216"/>
<area shape="rect" id="node45" href="nilfs2_2bmap_8c.html#a4d8c849b61993e58b8939b406cc3d72a" title="nilfs_bmap_delete" alt="" coords="1863,261,1989,288"/>
<area shape="rect" id="node47" href="mdt_8c.html#a309c3290c2f50bdeab9db8bd3569dc8d" title="nilfs_mdt_forget_block" alt="" coords="1849,211,2003,237"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_ab7d5c78fbd6a179cb3f39f87cb63285d_icgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_ab7d5c78fbd6a179cb3f39f87cb63285d_icgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_ab7d5c78fbd6a179cb3f39f87cb63285d_icgraph" id="nilfs2_2ioctl_8c_ab7d5c78fbd6a179cb3f39f87cb63285d_icgraph">
<area shape="rect" id="node2" href="nilfs_8h.html#aae05e8590cbb2a7f5e5ddc5a9a044a41" title="nilfs_ioctl_prepare\l_clean_segments" alt="" coords="223,49,349,90"/>
<area shape="rect" id="node3" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="397,31,545,57"/>
<area shape="rect" id="node6" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="945,81,1065,108"/>
<area shape="rect" id="node4" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096" title="nilfs_ioctl_clean_segments" alt="" coords="593,31,772,57"/>
<area shape="rect" id="node5" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="820,31,897,57"/>
<area shape="rect" id="node7" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="1121,81,1236,108"/>
<area shape="rect" id="node12" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="1113,31,1244,57"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="1297,5,1386,32"/>
<area shape="rect" id="node9" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="1295,56,1387,83"/>
<area shape="rect" id="node10" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="1292,107,1391,133"/>
<area shape="rect" id="node11" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="1299,157,1384,184"/>
</map>
</div>

</div>
</div>
<a id="ae74437bf40467cd7ef392867b1506518"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae74437bf40467cd7ef392867b1506518">&#9670;&nbsp;</a></span>nilfs_ioctl_get_bdescs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_ioctl_get_bdescs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct file *&#160;</td>
          <td class="paramname"><em>filp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void __user *&#160;</td>
          <td class="paramname"><em>argp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_ioctl_get_bdescs - get disk block descriptors : inode object : file object : ioctl's request code : pointer on argument from userspace</p>
<p>Description: <a class="el" href="nilfs2_2ioctl_8c.html#abbe42ccd4ccc56d484156885e0e0bcc2">nilfs_ioctl_do_get_bdescs()</a> function returns information about descriptors of disk block numbers. The NILFS_IOCTL_GET_BDESCS ioctl is used by nilfs_cleanerd daemon.</p>
<p>Return Value: On success, 0 is returned, and disk block descriptors are copied into userspace pointer . On error, one of the following negative error codes is returned.</p>
<p>%-EINVAL - Invalid arguments from userspace.</p>
<p>%-EIO - I/O error.</p>
<p>%-ENOMEM - Insufficient amount of memory available.</p>
<p>%-EFAULT - Failure during getting disk block descriptors. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_ae74437bf40467cd7ef392867b1506518_cgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_ae74437bf40467cd7ef392867b1506518_cgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_ae74437bf40467cd7ef392867b1506518_cgraph" id="nilfs2_2ioctl_8c_ae74437bf40467cd7ef392867b1506518_cgraph">
<area shape="rect" id="node2" href="nilfs2_2ioctl_8c.html#a3626cb1946214b98710af19046930e2b" title="nilfs_ioctl_wrap_copy" alt="" coords="204,313,351,340"/>
<area shape="rect" id="node3" href="nilfs2_2ioctl_8c.html#abbe42ccd4ccc56d484156885e0e0bcc2" title="nilfs_ioctl_do_get\l_bdescs" alt="" coords="216,365,339,406"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="2631,264,2701,291"/>
<area shape="rect" id="node5" href="nilfs2_2bmap_8c.html#a01ec88eea126f6a0861c9da00aadb1d7" title="nilfs_bmap_lookup_at\l_level" alt="" coords="399,761,547,802"/>
<area shape="rect" id="node6" href="nilfs2_2bmap_8c.html#a7a7ea41075313d317e5036ebc1fbbe3b" title="nilfs_bmap_convert\l_error" alt="" coords="595,899,729,941"/>
<area shape="rect" id="node19" href="dat_8c.html#a1641d48ed89a1de35dda5513abd31cc3" title="nilfs_dat_translate" alt="" coords="598,793,726,820"/>
<area shape="rect" id="node50" href="nilfs2_2bmap_8c.html#aef6e9d2acff7b7d161389bb790483d06" title="nilfs_bmap_get_dat" alt="" coords="595,743,729,769"/>
<area shape="rect" id="node7" href="nilfs2_2super_8c.html#a5f424aefed531edcd064bfa930d96670" title="__nilfs_error" alt="" coords="1213,977,1306,1004"/>
<area shape="rect" id="node8" href="nilfs2_2super_8c.html#a9c0186bd7dabac457a10733abdbafc76" title="nilfs_set_error" alt="" coords="1385,965,1489,992"/>
<area shape="rect" id="node9" href="nilfs2_2super_8c.html#a8e2908caf99fa61e4da3134daa205dd0" title="nilfs_prepare_super" alt="" coords="1575,915,1710,941"/>
<area shape="rect" id="node11" href="nilfs2_2super_8c.html#a0955c5c7387c5d5ea561c70b3eeb5925" title="nilfs_commit_super" alt="" coords="1575,965,1710,992"/>
<area shape="rect" id="node10" href="the__nilfs_8c.html#ab41ad60b507d8f217c2062c254a00367" title="nilfs_swap_super_block" alt="" coords="1784,915,1945,941"/>
<area shape="rect" id="node12" href="nilfs2_2super_8c.html#a7f749f73b57e01f7d7b45df9c3cc836b" title="nilfs_sync_super" alt="" coords="1805,965,1925,992"/>
<area shape="rect" id="node13" href="buffer_8c.html#ad14d5a18ab22cf24baa474870664c128" title="__sync_dirty_buffer" alt="" coords="2198,877,2334,904"/>
<area shape="rect" id="node17" href="buffer_8c.html#aa6e73e23b9f75a73cf4112fb3d19b668" title="sync_dirty_buffer" alt="" coords="2007,877,2129,904"/>
<area shape="rect" id="node18" href="the__nilfs_8c.html#a6809c74809ebc6547ec0168ba3303ad8" title="nilfs_fall_back_super\l_block" alt="" coords="1996,929,2140,970"/>
<area shape="rect" id="node14" href="buffer_8c.html#aac5852df82371e20e891b02a37461248" title="end_buffer_write_sync" alt="" coords="2399,852,2552,879"/>
<area shape="rect" id="node15" href="buffer_8c.html#a5fc92b2c44523c64e98193eaa4f46541" title="unlock_buffer" alt="" coords="2616,852,2716,879"/>
<area shape="rect" id="node16" href="buffer_8c.html#ab65df498c54845f497bae7afe9222c91" title="submit_bh" alt="" coords="2625,725,2707,752"/>
<area shape="rect" id="node20" href="nilfs2_2alloc_8c.html#abe8a4c8cbae85745a1a9b5e380bc2568" title="nilfs_palloc_get_entry\l_block" alt="" coords="777,743,925,785"/>
<area shape="rect" id="node45" href="nilfs_8h.html#aa2547b587fff139262e053241c6d5165" title="nilfs_doing_gc" alt="" coords="799,923,904,949"/>
<area shape="rect" id="node47" href="mdt_8c.html#ac812454a88416aae4c77cdb630f97716" title="nilfs_mdt_get_frozen\l_buffer" alt="" coords="780,827,923,869"/>
<area shape="rect" id="node49" href="nilfs2_2alloc_8c.html#a2a24fff0c9ab30080b5d2c08913b41ab" title="nilfs_palloc_block\l_get_entry" alt="" coords="998,547,1123,589"/>
<area shape="rect" id="node21" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="2020,531,2116,557"/>
<area shape="rect" id="node22" href="nilfs2_2alloc_8c.html#a539250d301eb19ff68f4f0ac0e54279f" title="nilfs_palloc_get_block" alt="" coords="1789,784,1940,811"/>
<area shape="rect" id="node32" href="nilfs2_2alloc_8c.html#a6075e80e07eb1fb451fc65d559e35484" title="nilfs_palloc_entry\l_blkoff" alt="" coords="999,617,1122,658"/>
<area shape="rect" id="node23" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="1999,649,2137,676"/>
<area shape="rect" id="node24" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="2193,599,2339,625"/>
<area shape="rect" id="node27" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="2188,649,2344,676"/>
<area shape="rect" id="node25" href="mdt_8c.html#a43ded315f7122596d14b88c43fe9c98d" title="nilfs_mdt_submit_block" alt="" coords="2396,599,2555,625"/>
<area shape="rect" id="node26" href="nilfs2_2page_8c.html#aa4a24cc5a684ba71b9e4423f2ea38970" title="nilfs_grab_buffer" alt="" coords="2607,573,2725,600"/>
<area shape="rect" id="node28" href="nilfs_8h.html#aacff7fe9750a849356475b2063b69e3b" title="nilfs_transaction_begin" alt="" coords="2398,649,2553,676"/>
<area shape="rect" id="node29" href="mdt_8c.html#a759ca943427ead8bb22ecdc82a9338ee" title="nilfs_mdt_insert_new\l_block" alt="" coords="2403,351,2548,393"/>
<area shape="rect" id="node30" href="nilfs_8h.html#a576ee8d20fe7a5d7c5889cb118fe0533" title="nilfs_transaction_commit" alt="" coords="2392,700,2559,727"/>
<area shape="rect" id="node31" href="nilfs_8h.html#a155140033fba0977ed043367001c3384" title="nilfs_transaction_abort" alt="" coords="2399,751,2552,777"/>
<area shape="rect" id="node33" href="nilfs2_2alloc_8c.html#a82746f35ce0628ca7fefdc6333713ae2" title="nilfs_palloc_group" alt="" coords="1196,555,1323,581"/>
<area shape="rect" id="node43" href="nilfs2_2alloc_8c.html#aac6b438f00cbb6f14307701ffeb19c68" title="nilfs_palloc_bitmap\l_blkoff" alt="" coords="1576,317,1709,358"/>
<area shape="rect" id="node34" href="nilfs2_2alloc_8h.html#a80b91fe3100bd11e343f72a96ca838bd" title="nilfs_palloc_entries\l_per_group" alt="" coords="1371,483,1504,525"/>
<area shape="rect" id="node35" href="nilfs2_2alloc_8h.html#afccd9ef569bdfd1cf59338965c95fb1c" title="nilfs_palloc_init_blockgroup" alt="" coords="1552,491,1733,517"/>
<area shape="rect" id="node38" href="nilfs2_2alloc_8h.html#a10901166e88f0e569da3f5aa39eeab9d" title="nilfs_palloc_get_entry\l_block" alt="" coords="1569,617,1717,658"/>
<area shape="rect" id="node39" href="nilfs2_2alloc_8h.html#a9fde8cc073bd6c3157f774c7e33b5a5c" title="nilfs_palloc_block\l_get_entry" alt="" coords="1580,547,1705,589"/>
<area shape="rect" id="node40" href="nilfs2_2alloc_8h.html#a3d17a08175d8f5c51ebb5787acebad9c" title="nilfs_palloc_count\l_max_entries" alt="" coords="1579,161,1706,202"/>
<area shape="rect" id="node36" href="mdt_8c.html#ae0d853ce1775f22eb93823f6423e6fac" title="nilfs_mdt_set_entry_size" alt="" coords="1781,531,1948,557"/>
<area shape="rect" id="node37" href="nilfs2_2alloc_8c.html#a311c71ab31da7903a8a0ec492e1b8c66" title="nilfs_palloc_groups\l_per_desc_block" alt="" coords="2001,219,2135,261"/>
<area shape="rect" id="node41" href="nilfs2_2alloc_8c.html#af34d5e7d52a6f35ebc2bc99307ff3bd7" title="nilfs_palloc_count\l_desc_blocks" alt="" coords="1801,161,1928,202"/>
<area shape="rect" id="node42" href="nilfs2_2alloc_8c.html#a6ee53eba3cfc5dd453ba431de18f15b4" title="nilfs_palloc_mdt_file\l_can_grow" alt="" coords="1795,43,1935,85"/>
<area shape="rect" id="node44" href="nilfs2_2alloc_8c.html#a9e6fc04ad7375ca78f8b38b69bc2131b" title="nilfs_palloc_desc_blkoff" alt="" coords="1784,277,1945,304"/>
<area shape="rect" id="node46" href="nilfs_8h.html#a0e51be0290a47aca596f1257148b18d1" title="nilfs_test_transaction_flag" alt="" coords="973,952,1148,979"/>
<area shape="rect" id="node48" href="page_8h.html#aaad58f68fa9675f7e9803744d0e3f414" title="nilfs_page_get_nth\l_block" alt="" coords="995,886,1126,927"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_ae74437bf40467cd7ef392867b1506518_icgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_ae74437bf40467cd7ef392867b1506518_icgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_ae74437bf40467cd7ef392867b1506518_icgraph" id="nilfs2_2ioctl_8c_ae74437bf40467cd7ef392867b1506518_icgraph">
<area shape="rect" id="node2" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="204,107,281,133"/>
<area shape="rect" id="node3" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="329,81,449,108"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="505,81,620,108"/>
<area shape="rect" id="node9" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="497,132,628,159"/>
<area shape="rect" id="node5" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="681,5,770,32"/>
<area shape="rect" id="node6" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="679,56,771,83"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="676,107,775,133"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="683,157,768,184"/>
</map>
</div>

</div>
</div>
<a id="a39cf54b1fc6701f6616f08fefcf4260b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39cf54b1fc6701f6616f08fefcf4260b">&#9670;&nbsp;</a></span>nilfs_ioctl_get_cpstat()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_ioctl_get_cpstat </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct file *&#160;</td>
          <td class="paramname"><em>filp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void __user *&#160;</td>
          <td class="paramname"><em>argp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_ioctl_get_cpstat - get checkpoints statistics : inode object : file object : ioctl's request code : pointer on argument from userspace</p>
<p>Description: <a class="el" href="nilfs2_2ioctl_8c.html#a39cf54b1fc6701f6616f08fefcf4260b">nilfs_ioctl_get_cpstat()</a> returns information about checkpoints. The NILFS_IOCTL_GET_CPSTAT ioctl is used by lscp, rmcp utilities and by nilfs_cleanerd daemon.</p>
<p>Return Value: On success, 0 is returned, and checkpoints information is copied into userspace pointer . On error, one of the following negative error codes is returned.</p>
<p>%-EIO - I/O error.</p>
<p>%-ENOMEM - Insufficient amount of memory available.</p>
<p>%-EFAULT - Failure during getting checkpoints statistics. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a39cf54b1fc6701f6616f08fefcf4260b_cgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a39cf54b1fc6701f6616f08fefcf4260b_cgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a39cf54b1fc6701f6616f08fefcf4260b_cgraph" id="nilfs2_2ioctl_8c_a39cf54b1fc6701f6616f08fefcf4260b_cgraph">
<area shape="rect" id="node2" href="cpfile_8c.html#a929716373573b8e3682a2081e6b99a56" title="nilfs_cpfile_get_stat" alt="" coords="199,189,337,216"/>
<area shape="rect" id="node3" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1873,56,1969,83"/>
<area shape="rect" id="node4" href="cpfile_8c.html#a9ff8012cf954ee1e283e981e7c92c4cf" title="nilfs_cpfile_get_header\l_block" alt="" coords="385,149,540,190"/>
<area shape="rect" id="node49" href="cpfile_8c.html#af5bb4325de3f70ecd2e2b03ea43205cb" title="nilfs_cpfile_block\l_get_header" alt="" coords="401,214,524,255"/>
<area shape="rect" id="node50" href="mdt_8h.html#a6726d332d6af4468ef3bc1a2ab975b56" title="nilfs_mdt_cno" alt="" coords="411,280,514,307"/>
<area shape="rect" id="node5" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="588,261,727,288"/>
<area shape="rect" id="node6" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="780,464,925,491"/>
<area shape="rect" id="node29" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="775,261,931,288"/>
<area shape="rect" id="node7" href="mdt_8c.html#a43ded315f7122596d14b88c43fe9c98d" title="nilfs_mdt_submit_block" alt="" coords="983,616,1141,643"/>
<area shape="rect" id="node8" href="nilfs2_2page_8c.html#aa4a24cc5a684ba71b9e4423f2ea38970" title="nilfs_grab_buffer" alt="" coords="1226,312,1345,339"/>
<area shape="rect" id="node15" href="buffer_8c.html#a5fc92b2c44523c64e98193eaa4f46541" title="unlock_buffer" alt="" coords="1680,809,1780,836"/>
<area shape="rect" id="node16" href="nilfs2_2bmap_8h.html#a282d60470960949277ac67e31c97f05b" title="nilfs_bmap_lookup" alt="" coords="1220,700,1351,727"/>
<area shape="rect" id="node22" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1481,439,1552,465"/>
<area shape="rect" id="node23" href="buffer_8c.html#ade60786fa99b4fbb4cf607434af395db" title="end_buffer_read_sync" alt="" coords="1210,860,1361,887"/>
<area shape="rect" id="node25" href="buffer_8c.html#ab65df498c54845f497bae7afe9222c91" title="submit_bh" alt="" coords="1244,616,1327,643"/>
<area shape="rect" id="node9" href="nilfs2_2page_8c.html#a051d0268f3af219ba3e2a9ca79a8843c" title="__nilfs_get_page_block" alt="" coords="1437,236,1596,263"/>
<area shape="rect" id="node10" href="buffer_8c.html#a4844b8163e94b4a214fbf85d86fe88d0" title="create_empty_buffers" alt="" coords="1656,236,1804,263"/>
<area shape="rect" id="node13" href="page_8h.html#aaad58f68fa9675f7e9803744d0e3f414" title="nilfs_page_get_nth\l_block" alt="" coords="1665,170,1795,211"/>
<area shape="rect" id="node14" href="buffer_8c.html#a59a45ba914a951c36f0cabe79be9756b" title="touch_buffer" alt="" coords="1683,287,1777,313"/>
<area shape="rect" id="node11" href="buffer_8c.html#a94ca9132735bfcb0b0b2ae9531461cc8" title="alloc_page_buffers" alt="" coords="1856,236,1987,263"/>
<area shape="rect" id="node12" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1852,489,1991,516"/>
<area shape="rect" id="node17" href="nilfs2_2bmap_8h.html#a47e39e91829ba28e44d1b0913f5ef480" title="nilfs_bmap_lookup_at\l_level" alt="" coords="1443,693,1591,734"/>
<area shape="rect" id="node21" href="nilfs2_2bmap_8h.html#abd107e6c373b3d12d3817a32d403001b" title="nilfs_bmap_get_dat" alt="" coords="1449,759,1584,785"/>
<area shape="rect" id="node18" href="nilfs2_2bmap_8c.html#a7a7ea41075313d317e5036ebc1fbbe3b" title="nilfs_bmap_convert\l_error" alt="" coords="1663,577,1797,618"/>
<area shape="rect" id="node19" href="dat_8c.html#a1641d48ed89a1de35dda5513abd31cc3" title="nilfs_dat_translate" alt="" coords="1666,697,1794,724"/>
<area shape="rect" id="node20" href="nilfs2_2bmap_8c.html#aef6e9d2acff7b7d161389bb790483d06" title="nilfs_bmap_get_dat" alt="" coords="1663,748,1797,775"/>
<area shape="rect" id="node24" href="buffer_8c.html#a85e290b32d9599acd25df3b159392ab7" title="__end_buffer_read_notouch" alt="" coords="1425,860,1608,887"/>
<area shape="rect" id="node26" href="buffer_8c.html#a5fd6f01c5f9cff0945cb999cbefa412d" title="submit_bh_wbc" alt="" coords="1460,540,1573,567"/>
<area shape="rect" id="node27" href="buffer_8c.html#a2463267e7636f2be0fc2b44fb65cb5ba" title="end_bio_bh_io_sync" alt="" coords="1660,475,1800,501"/>
<area shape="rect" id="node28" href="buffer_8c.html#aa35a4aa9ac3d40858082aabb83e2a44c" title="guard_bio_eod" alt="" coords="1677,525,1783,552"/>
<area shape="rect" id="node30" href="nilfs_8h.html#aacff7fe9750a849356475b2063b69e3b" title="nilfs_transaction_begin" alt="" coords="985,211,1139,237"/>
<area shape="rect" id="node35" href="mdt_8c.html#a759ca943427ead8bb22ecdc82a9338ee" title="nilfs_mdt_insert_new\l_block" alt="" coords="989,406,1135,447"/>
<area shape="rect" id="node43" href="nilfs_8h.html#a576ee8d20fe7a5d7c5889cb118fe0533" title="nilfs_transaction_commit" alt="" coords="979,131,1145,157"/>
<area shape="rect" id="node48" href="nilfs_8h.html#a155140033fba0977ed043367001c3384" title="nilfs_transaction_abort" alt="" coords="985,261,1139,288"/>
<area shape="rect" id="node31" href="nilfs2_2segment_8c.html#ada0ba1bf162679380f6096c9f83b94ea" title="nilfs_prepare_segment_lock" alt="" coords="1193,261,1377,288"/>
<area shape="rect" id="node32" href="the__nilfs_8c.html#a137faca9117bfef2a2264ccf3a9aa809" title="nilfs_near_disk_full" alt="" coords="1219,211,1352,237"/>
<area shape="rect" id="node33" href="sufile_8c.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="1425,127,1608,153"/>
<area shape="rect" id="node34" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="1685,93,1775,120"/>
<area shape="rect" id="node36" href="nilfs2_2bmap_8c.html#a4e7fd87b553f99a5d10b2f1d0cbbec0b" title="nilfs_bmap_insert" alt="" coords="1223,565,1347,592"/>
<area shape="rect" id="node39" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1224,363,1347,389"/>
<area shape="rect" id="node42" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="1214,464,1357,491"/>
<area shape="rect" id="node37" href="nilfs2_2bmap_8c.html#ac5f71baa604f8d2043ceb4c11aa72ff3" title="nilfs_bmap_do_insert" alt="" coords="1444,489,1589,516"/>
<area shape="rect" id="node38" href="nilfs2_2btree_8c.html#a6f8ff0cabbdb9b0241bf032c6a5ac11d" title="nilfs_btree_convert\l_and_insert" alt="" coords="1664,409,1796,450"/>
<area shape="rect" id="node40" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1456,388,1577,415"/>
<area shape="rect" id="node41" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1449,287,1584,313"/>
<area shape="rect" id="node44" href="nilfs2_2segment_8c.html#aa55509ef3ea01cc74488f916f1d551f3" title="nilfs_segctor_start\l_timer" alt="" coords="1221,94,1350,135"/>
<area shape="rect" id="node45" href="nilfs2_2segment_8c.html#a23c179e5f28f728a442e31641f71c795" title="nilfs_segctor_do_flush" alt="" coords="1209,160,1361,187"/>
<area shape="rect" id="node46" href="nilfs2_2segment_8c.html#ad8bab60b16b37c93e180e1ea3e1580ad" title="nilfs_construct_segment" alt="" coords="1203,43,1367,69"/>
<area shape="rect" id="node47" href="nilfs2_2segment_8c.html#aece5ba8b7c1a8df29083370bfb0f3aad" title="nilfs_segctor_sync" alt="" coords="1451,43,1582,69"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a39cf54b1fc6701f6616f08fefcf4260b_icgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a39cf54b1fc6701f6616f08fefcf4260b_icgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a39cf54b1fc6701f6616f08fefcf4260b_icgraph" id="nilfs2_2ioctl_8c_a39cf54b1fc6701f6616f08fefcf4260b_icgraph">
<area shape="rect" id="node2" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="199,107,276,133"/>
<area shape="rect" id="node3" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="324,81,444,108"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="500,81,615,108"/>
<area shape="rect" id="node9" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="492,132,623,159"/>
<area shape="rect" id="node5" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="675,5,765,32"/>
<area shape="rect" id="node6" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="674,56,766,83"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="671,107,769,133"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="677,157,763,184"/>
</map>
</div>

</div>
</div>
<a id="ae948a990322013d9aaff456311e9b7bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae948a990322013d9aaff456311e9b7bd">&#9670;&nbsp;</a></span>nilfs_ioctl_get_info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_ioctl_get_info </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct file *&#160;</td>
          <td class="paramname"><em>filp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void __user *&#160;</td>
          <td class="paramname"><em>argp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>membsz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ssize_t(*)(struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *, __u64 *, int, void *, size_t, size_t)&#160;</td>
          <td class="paramname"><em>dofunc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_ioctl_get_info - wrapping function of get metadata info : inode object : file object : ioctl's request code : pointer on argument from userspace : size of an item in bytes : concrete function of getting metadata info</p>
<p>Description: <a class="el" href="nilfs2_2ioctl_8c.html#ae948a990322013d9aaff456311e9b7bd">nilfs_ioctl_get_info()</a> gets metadata info by means of calling dofunc() function.</p>
<p>Return Value: On success, 0 is returned and requested metadata info is copied into userspace. On error, one of the following negative error codes is returned.</p>
<p>%-EINVAL - Invalid arguments from userspace.</p>
<p>%-ENOMEM - Insufficient amount of memory available.</p>
<p>%-EFAULT - Failure during execution of requested operation. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_ae948a990322013d9aaff456311e9b7bd_cgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_ae948a990322013d9aaff456311e9b7bd_cgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_ae948a990322013d9aaff456311e9b7bd_cgraph" id="nilfs2_2ioctl_8c_ae948a990322013d9aaff456311e9b7bd_cgraph">
<area shape="rect" id="node2" href="nilfs2_2ioctl_8c.html#a3626cb1946214b98710af19046930e2b" title="nilfs_ioctl_wrap_copy" alt="" coords="184,5,331,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_ae948a990322013d9aaff456311e9b7bd_icgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_ae948a990322013d9aaff456311e9b7bd_icgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_ae948a990322013d9aaff456311e9b7bd_icgraph" id="nilfs2_2ioctl_8c_ae948a990322013d9aaff456311e9b7bd_icgraph">
<area shape="rect" id="node2" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="184,107,261,133"/>
<area shape="rect" id="node3" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="309,81,429,108"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="485,81,600,108"/>
<area shape="rect" id="node9" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="477,132,608,159"/>
<area shape="rect" id="node5" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="661,5,750,32"/>
<area shape="rect" id="node6" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="659,56,751,83"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="656,107,755,133"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="663,157,748,184"/>
</map>
</div>

</div>
</div>
<a id="a0841eacabd5d2f65cc1e4e903cb0b9c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0841eacabd5d2f65cc1e4e903cb0b9c9">&#9670;&nbsp;</a></span>nilfs_ioctl_get_sustat()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_ioctl_get_sustat </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct file *&#160;</td>
          <td class="paramname"><em>filp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void __user *&#160;</td>
          <td class="paramname"><em>argp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_ioctl_get_sustat - get segment usage statistics : inode object : file object : ioctl's request code : pointer on argument from userspace</p>
<p>Description: <a class="el" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9">nilfs_ioctl_get_sustat()</a> returns segment usage statistics. The NILFS_IOCTL_GET_SUSTAT ioctl is used in lssu, nilfs_resize utilities and by nilfs_cleanerd daemon.</p>
<p>Return Value: On success, 0 is returned, and segment usage information is copied into userspace pointer . On error, one of the following negative error codes is returned.</p>
<p>%-EIO - I/O error.</p>
<p>%-ENOMEM - Insufficient amount of memory available.</p>
<p>%-EFAULT - Failure during getting segment usage statistics. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a0841eacabd5d2f65cc1e4e903cb0b9c9_cgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a0841eacabd5d2f65cc1e4e903cb0b9c9_cgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a0841eacabd5d2f65cc1e4e903cb0b9c9_cgraph" id="nilfs2_2ioctl_8c_a0841eacabd5d2f65cc1e4e903cb0b9c9_cgraph">
<area shape="rect" id="node2" href="sufile_8c.html#a9e2abc1d2040e49935a1448ce3c3c43e" title="nilfs_sufile_get_stat" alt="" coords="199,1131,337,1157"/>
<area shape="rect" id="node3" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1735,1427,1831,1453"/>
<area shape="rect" id="node4" href="sufile_8c.html#a7df3cdff37c5aa00cca3458f1d7d400e" title="nilfs_sufile_get_header\l_block" alt="" coords="1080,2185,1235,2226"/>
<area shape="rect" id="node10" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="385,1131,565,1157"/>
<area shape="rect" id="node5" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="1297,2188,1436,2215"/>
<area shape="rect" id="node6" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="1500,2149,1645,2176"/>
<area shape="rect" id="node8" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="1495,2200,1651,2227"/>
<area shape="rect" id="node7" href="mdt_8c.html#a43ded315f7122596d14b88c43fe9c98d" title="nilfs_mdt_submit_block" alt="" coords="1704,2149,1863,2176"/>
<area shape="rect" id="node9" href="nilfs_8h.html#aacff7fe9750a849356475b2063b69e3b" title="nilfs_transaction_begin" alt="" coords="1706,2200,1861,2227"/>
<area shape="rect" id="node11" href="sufile_8h.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="613,703,796,729"/>
<area shape="rect" id="node13" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="633,513,776,554"/>
<area shape="rect" id="node14" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="874,1271,993,1297"/>
<area shape="rect" id="node23" href="sufile_8h.html#ae5c9db186be6baf07d66e049a0fd9b9b" title="nilfs_sufile_mark_dirty" alt="" coords="857,1021,1009,1048"/>
<area shape="rect" id="node24" href="sufile_8h.html#ac6379742426c30d02072b1a5b0f527f8" title="nilfs_sufile_set_segment\l_usage" alt="" coords="850,1123,1017,1165"/>
<area shape="rect" id="node25" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033" title="nblocks" alt="" coords="1124,2301,1191,2328"/>
<area shape="rect" id="node26" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="635,1679,774,1705"/>
<area shape="rect" id="node27" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="858,1655,1009,1681"/>
<area shape="rect" id="node29" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687" title="nilfs_sufile_set_suinfo" alt="" coords="858,1072,1009,1099"/>
<area shape="rect" id="node31" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="865,2343,1002,2369"/>
<area shape="rect" id="node32" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="868,2083,999,2109"/>
<area shape="rect" id="node33" href="sufile_8h.html#acad60c93c0f7f6c3a8a9dc843107f1ed" title="nilfs_sufile_do_scrap" alt="" coords="861,803,1005,829"/>
<area shape="rect" id="node34" href="sufile_8h.html#a577d0d35a7907909b6c0a139d8cc1704" title="nilfs_sufile_do_free" alt="" coords="866,752,1001,779"/>
<area shape="rect" id="node35" href="sufile_8h.html#aff87ff4257115842ff3c7940e5f8e769" title="nilfs_sufile_do_cancel_free" alt="" coords="844,853,1023,880"/>
<area shape="rect" id="node36" href="sufile_8h.html#a7e943e59486cd6176a3317bed589b7c9" title="nilfs_sufile_do_set\l_error" alt="" coords="868,905,999,946"/>
<area shape="rect" id="node37" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="641,651,768,677"/>
<area shape="rect" id="node41" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="875,271,991,297"/>
<area shape="rect" id="node48" href="sufile_8h.html#a202058a1d5a7ee3658e8e7cda1ffee37" title="nilfs_sufile_trim_fs" alt="" coords="868,1872,999,1899"/>
<area shape="rect" id="node12" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="1112,600,1203,627"/>
<area shape="rect" id="node15" href="sufile_8c.html#a38f2abf7ef7577b1af4b9e8fc9316727" title="nilfs_sufile_get_segment\l_usage_block" alt="" coords="1074,1849,1241,1890"/>
<area shape="rect" id="node18" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="1084,1107,1231,1149"/>
<area shape="rect" id="node20" href="sufile_8c.html#a34ecb984fd0f57101d2ee0b4bde4bf95" title="nilfs_sufile_segment\l_usages_in_block" alt="" coords="1087,1731,1228,1773"/>
<area shape="rect" id="node21" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1305,803,1428,829"/>
<area shape="rect" id="node22" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="1086,853,1229,880"/>
<area shape="rect" id="node16" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="1293,1848,1441,1875"/>
<area shape="rect" id="node17" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="1502,1601,1643,1642"/>
<area shape="rect" id="node19" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="1292,1528,1441,1555"/>
<area shape="rect" id="node28" href="the__nilfs_8h.html#a51bb53199a62a87f269e03404136d00f" title="nilfs_segment_is_active" alt="" coords="1076,1629,1239,1656"/>
<area shape="rect" id="node30" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="1074,752,1241,779"/>
<area shape="rect" id="node38" href="the__nilfs_8c.html#aa7bf85e7bb9022b3680b22d945d17f91" title="nilfs_nrsvsegs" alt="" coords="1104,448,1211,475"/>
<area shape="rect" id="node39" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="864,1189,1003,1230"/>
<area shape="rect" id="node40" href="the__nilfs_8c.html#a38632ac69509070865038bf0120a1509" title="nilfs_set_nsegments" alt="" coords="862,499,1005,525"/>
<area shape="rect" id="node42" href="nilfs2_2inode_8c.html#ae758d8edf633a8af3535ac0af248f1d1" title="nilfs_iget_locked" alt="" coords="1098,144,1217,171"/>
<area shape="rect" id="node43" href="mdt_8c.html#a9d24c6e56a98e581fc30fd8a65841e2a" title="nilfs_mdt_init" alt="" coords="1108,195,1207,221"/>
<area shape="rect" id="node44" href="mdt_8c.html#ae0d853ce1775f22eb93823f6423e6fac" title="nilfs_mdt_set_entry_size" alt="" coords="1489,296,1656,323"/>
<area shape="rect" id="node45" href="nilfs2_2inode_8c.html#affec0e84c605c1d9028332974ba58cd3" title="nilfs_read_inode_common" alt="" coords="1071,245,1244,272"/>
<area shape="rect" id="node46" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="1302,68,1431,95"/>
<area shape="rect" id="node47" href="bad__inode_8c.html#a8c027cf52e2b7669b11b0bfa09bbcd45" title="iget_failed" alt="" coords="1117,43,1198,69"/>
<area shape="rect" id="node49" href="the__nilfs_8h.html#acbe15a8b57f8ecf5e4777294c2f7303d" title="nilfs_get_segnum_of\l_block" alt="" coords="1086,2017,1229,2058"/>
<area shape="rect" id="node50" href="the__nilfs_8h.html#a0dc161eb6c4f6bad9212b67517b46a37" title="nilfs_get_segment_range" alt="" coords="1074,2083,1241,2109"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a0841eacabd5d2f65cc1e4e903cb0b9c9_icgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a0841eacabd5d2f65cc1e4e903cb0b9c9_icgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a0841eacabd5d2f65cc1e4e903cb0b9c9_icgraph" id="nilfs2_2ioctl_8c_a0841eacabd5d2f65cc1e4e903cb0b9c9_icgraph">
<area shape="rect" id="node2" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="199,107,276,133"/>
<area shape="rect" id="node3" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="324,81,444,108"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="500,81,615,108"/>
<area shape="rect" id="node9" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="492,132,623,159"/>
<area shape="rect" id="node5" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="675,5,765,32"/>
<area shape="rect" id="node6" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="674,56,766,83"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="671,107,769,133"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="677,157,763,184"/>
</map>
</div>

</div>
</div>
<a id="a55aaf10d549966d587542363201f3ca3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55aaf10d549966d587542363201f3ca3">&#9670;&nbsp;</a></span>nilfs_ioctl_getflags()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_ioctl_getflags </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void __user *&#160;</td>
          <td class="paramname"><em>argp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_ioctl_getflags - ioctl to support lsattr </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a55aaf10d549966d587542363201f3ca3_cgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a55aaf10d549966d587542363201f3ca3_cgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a55aaf10d549966d587542363201f3ca3_cgraph" id="nilfs2_2ioctl_8c_a55aaf10d549966d587542363201f3ca3_cgraph">
<area shape="rect" id="node2" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="184,5,255,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a55aaf10d549966d587542363201f3ca3_icgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a55aaf10d549966d587542363201f3ca3_icgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a55aaf10d549966d587542363201f3ca3_icgraph" id="nilfs2_2ioctl_8c_a55aaf10d549966d587542363201f3ca3_icgraph">
<area shape="rect" id="node2" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="184,107,261,133"/>
<area shape="rect" id="node3" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="309,81,429,108"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="485,81,600,108"/>
<area shape="rect" id="node9" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="477,132,608,159"/>
<area shape="rect" id="node5" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="661,5,750,32"/>
<area shape="rect" id="node6" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="659,56,751,83"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="656,107,755,133"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="663,157,748,184"/>
</map>
</div>

</div>
</div>
<a id="a8a4e242100f37f0822d78615c333aabb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a4e242100f37f0822d78615c333aabb">&#9670;&nbsp;</a></span>nilfs_ioctl_getversion()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_ioctl_getversion </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void __user *&#160;</td>
          <td class="paramname"><em>argp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_ioctl_getversion - get info about a file's version (generation number) </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a8a4e242100f37f0822d78615c333aabb_icgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a8a4e242100f37f0822d78615c333aabb_icgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a8a4e242100f37f0822d78615c333aabb_icgraph" id="nilfs2_2ioctl_8c_a8a4e242100f37f0822d78615c333aabb_icgraph">
<area shape="rect" id="node2" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="197,107,275,133"/>
<area shape="rect" id="node3" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="323,81,443,108"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="499,81,613,108"/>
<area shape="rect" id="node9" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="491,132,621,159"/>
<area shape="rect" id="node5" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="674,5,763,32"/>
<area shape="rect" id="node6" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="673,56,765,83"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="669,107,768,133"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="676,157,761,184"/>
</map>
</div>

</div>
</div>
<a id="ab0e598551ac90d5ab9b0aae8416dbf40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0e598551ac90d5ab9b0aae8416dbf40">&#9670;&nbsp;</a></span>nilfs_ioctl_mark_blocks_dirty()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_ioctl_mark_blocks_dirty </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *&#160;</td>
          <td class="paramname"><em>nilfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct nilfs_argv *&#160;</td>
          <td class="paramname"><em>argv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_ioctl_mark_blocks_dirty - mark blocks dirty : nilfs object : vector of arguments from userspace : array of block descriptors</p>
<p>Description: <a class="el" href="nilfs2_2ioctl_8c.html#ab0e598551ac90d5ab9b0aae8416dbf40">nilfs_ioctl_mark_blocks_dirty()</a> function marks metadata file or data blocks as dirty.</p>
<p>Return Value: Number of processed block descriptors or error code, otherwise.</p>
<p>%-ENOMEM - Insufficient memory available.</p>
<p>%-EIO - I/O error</p>
<p>%-ENOENT - the specified block does not exist (hole block) </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_ab0e598551ac90d5ab9b0aae8416dbf40_cgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_ab0e598551ac90d5ab9b0aae8416dbf40_cgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_ab0e598551ac90d5ab9b0aae8416dbf40_cgraph" id="nilfs2_2ioctl_8c_ab0e598551ac90d5ab9b0aae8416dbf40_cgraph">
<area shape="rect" id="node2" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1891,469,1961,496"/>
<area shape="rect" id="node3" href="nilfs2_2bmap_8c.html#a01ec88eea126f6a0861c9da00aadb1d7" title="nilfs_bmap_lookup_at\l_level" alt="" coords="212,717,360,758"/>
<area shape="rect" id="node11" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="1009,405,1148,432"/>
<area shape="rect" id="node28" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1645,933,1768,960"/>
<area shape="rect" id="node37" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="1635,629,1778,656"/>
<area shape="rect" id="node50" href="nilfs2_2bmap_8c.html#ada48e8abd9d75673881ee7c8fb799d00" title="nilfs_bmap_mark" alt="" coords="225,863,347,889"/>
<area shape="rect" id="node4" href="nilfs2_2bmap_8c.html#a7a7ea41075313d317e5036ebc1fbbe3b" title="nilfs_bmap_convert\l_error" alt="" coords="1859,825,1993,866"/>
<area shape="rect" id="node7" href="dat_8c.html#a1641d48ed89a1de35dda5513abd31cc3" title="nilfs_dat_translate" alt="" coords="411,652,539,679"/>
<area shape="rect" id="node49" href="nilfs2_2bmap_8c.html#aef6e9d2acff7b7d161389bb790483d06" title="nilfs_bmap_get_dat" alt="" coords="408,703,543,729"/>
<area shape="rect" id="node5" href="nilfs2_2super_8c.html#a5f424aefed531edcd064bfa930d96670" title="__nilfs_error" alt="" coords="2097,832,2190,859"/>
<area shape="rect" id="node6" href="nilfs2_2super_8c.html#a9c0186bd7dabac457a10733abdbafc76" title="nilfs_set_error" alt="" coords="2281,832,2385,859"/>
<area shape="rect" id="node8" href="nilfs2_2alloc_8c.html#abe8a4c8cbae85745a1a9b5e380bc2568" title="nilfs_palloc_get_entry\l_block" alt="" coords="591,573,739,614"/>
<area shape="rect" id="node45" href="nilfs_8h.html#aa2547b587fff139262e053241c6d5165" title="nilfs_doing_gc" alt="" coords="612,652,717,679"/>
<area shape="rect" id="node47" href="mdt_8c.html#ac812454a88416aae4c77cdb630f97716" title="nilfs_mdt_get_frozen\l_buffer" alt="" coords="803,715,945,757"/>
<area shape="rect" id="node48" href="nilfs2_2alloc_8c.html#a2a24fff0c9ab30080b5d2c08913b41ab" title="nilfs_palloc_block\l_get_entry" alt="" coords="811,482,937,523"/>
<area shape="rect" id="node9" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1031,593,1127,620"/>
<area shape="rect" id="node10" href="nilfs2_2alloc_8c.html#a539250d301eb19ff68f4f0ac0e54279f" title="nilfs_palloc_get_block" alt="" coords="799,431,949,457"/>
<area shape="rect" id="node43" href="nilfs2_2alloc_8c.html#a6075e80e07eb1fb451fc65d559e35484" title="nilfs_palloc_entry\l_blkoff" alt="" coords="813,547,935,589"/>
<area shape="rect" id="node12" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="1201,208,1347,235"/>
<area shape="rect" id="node22" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="1196,465,1352,492"/>
<area shape="rect" id="node13" href="mdt_8c.html#a43ded315f7122596d14b88c43fe9c98d" title="nilfs_mdt_submit_block" alt="" coords="1404,157,1563,184"/>
<area shape="rect" id="node14" href="nilfs2_2page_8c.html#aa4a24cc5a684ba71b9e4423f2ea38970" title="nilfs_grab_buffer" alt="" coords="1647,208,1766,235"/>
<area shape="rect" id="node17" href="buffer_8c.html#a5fc92b2c44523c64e98193eaa4f46541" title="unlock_buffer" alt="" coords="1657,56,1757,83"/>
<area shape="rect" id="node19" href="nilfs2_2bmap_8h.html#a282d60470960949277ac67e31c97f05b" title="nilfs_bmap_lookup" alt="" coords="1641,157,1772,184"/>
<area shape="rect" id="node20" href="buffer_8c.html#ade60786fa99b4fbb4cf607434af395db" title="end_buffer_read_sync" alt="" coords="1631,107,1782,133"/>
<area shape="rect" id="node21" href="buffer_8c.html#ab65df498c54845f497bae7afe9222c91" title="submit_bh" alt="" coords="1665,5,1748,32"/>
<area shape="rect" id="node15" href="nilfs2_2page_8c.html#a051d0268f3af219ba3e2a9ca79a8843c" title="__nilfs_get_page_block" alt="" coords="1847,233,2005,260"/>
<area shape="rect" id="node16" href="page_8h.html#aaad58f68fa9675f7e9803744d0e3f414" title="nilfs_page_get_nth\l_block" alt="" coords="2078,462,2209,503"/>
<area shape="rect" id="node18" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1857,81,1995,108"/>
<area shape="rect" id="node23" href="nilfs_8h.html#aacff7fe9750a849356475b2063b69e3b" title="nilfs_transaction_begin" alt="" coords="1406,501,1561,528"/>
<area shape="rect" id="node26" href="mdt_8c.html#a759ca943427ead8bb22ecdc82a9338ee" title="nilfs_mdt_insert_new\l_block" alt="" coords="1411,665,1556,706"/>
<area shape="rect" id="node38" href="nilfs_8h.html#a576ee8d20fe7a5d7c5889cb118fe0533" title="nilfs_transaction_commit" alt="" coords="1400,429,1567,456"/>
<area shape="rect" id="node42" href="nilfs_8h.html#a155140033fba0977ed043367001c3384" title="nilfs_transaction_abort" alt="" coords="1407,552,1560,579"/>
<area shape="rect" id="node24" href="nilfs2_2segment_8c.html#ada0ba1bf162679380f6096c9f83b94ea" title="nilfs_prepare_segment_lock" alt="" coords="1615,579,1799,605"/>
<area shape="rect" id="node25" href="the__nilfs_8c.html#a137faca9117bfef2a2264ccf3a9aa809" title="nilfs_near_disk_full" alt="" coords="1640,528,1773,555"/>
<area shape="rect" id="node27" href="nilfs2_2bmap_8c.html#a4e7fd87b553f99a5d10b2f1d0cbbec0b" title="nilfs_bmap_insert" alt="" coords="1645,781,1769,808"/>
<area shape="rect" id="node29" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1865,912,1987,939"/>
<area shape="rect" id="node31" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1859,1011,1993,1037"/>
<area shape="rect" id="node30" href="buffer_8c.html#ae236845de65ed065f74eecf8f6ee9742" title="EXPORT_SYMBOL_GPL" alt="" coords="2057,887,2229,913"/>
<area shape="rect" id="node32" href="fs-writeback_8c.html#af5890cdc0a937a4f944928bd1880d49b" title="block_dump___mark_inode\l_dirty" alt="" coords="2053,1121,2233,1162"/>
<area shape="rect" id="node34" href="fs-writeback_8c.html#ad0ca24311e1c0ba76d3810d240f72b08" title="locked_inode_to_wb\l_and_lock_list" alt="" coords="2073,938,2213,979"/>
<area shape="rect" id="node35" href="fs-writeback_8c.html#a2a36a21e075aa2a912f5c3cb027692cf" title="inode_io_list_move\l_locked" alt="" coords="2077,1003,2210,1045"/>
<area shape="rect" id="node36" href="fs-writeback_8c.html#a044f1d7ff09b03f639232ec0e6a88ee1" title="EXPORT_SYMBOL" alt="" coords="2074,1069,2213,1096"/>
<area shape="rect" id="node33" href="dcache_8c.html#a9f042046c19f277000ddfc09b02e3633" title="d_find_alias" alt="" coords="2288,1128,2379,1155"/>
<area shape="rect" id="node39" href="nilfs2_2segment_8c.html#aa55509ef3ea01cc74488f916f1d551f3" title="nilfs_segctor_start\l_timer" alt="" coords="1642,411,1771,453"/>
<area shape="rect" id="node40" href="nilfs2_2segment_8c.html#a23c179e5f28f728a442e31641f71c795" title="nilfs_segctor_do_flush" alt="" coords="1631,477,1783,504"/>
<area shape="rect" id="node41" href="nilfs2_2segment_8c.html#ad8bab60b16b37c93e180e1ea3e1580ad" title="nilfs_construct_segment" alt="" coords="1625,360,1789,387"/>
<area shape="rect" id="node44" href="nilfs2_2alloc_8c.html#a82746f35ce0628ca7fefdc6333713ae2" title="nilfs_palloc_group" alt="" coords="1015,521,1142,548"/>
<area shape="rect" id="node46" href="nilfs_8h.html#a0e51be0290a47aca596f1257148b18d1" title="nilfs_test_transaction_flag" alt="" coords="787,664,961,691"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_ab0e598551ac90d5ab9b0aae8416dbf40_icgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_ab0e598551ac90d5ab9b0aae8416dbf40_icgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_ab0e598551ac90d5ab9b0aae8416dbf40_icgraph" id="nilfs2_2ioctl_8c_ab0e598551ac90d5ab9b0aae8416dbf40_icgraph">
<area shape="rect" id="node2" href="nilfs_8h.html#aae05e8590cbb2a7f5e5ddc5a9a044a41" title="nilfs_ioctl_prepare\l_clean_segments" alt="" coords="212,49,339,90"/>
<area shape="rect" id="node3" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="387,31,535,57"/>
<area shape="rect" id="node6" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="935,81,1055,108"/>
<area shape="rect" id="node4" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096" title="nilfs_ioctl_clean_segments" alt="" coords="583,31,761,57"/>
<area shape="rect" id="node5" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="809,31,887,57"/>
<area shape="rect" id="node7" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="1111,81,1225,108"/>
<area shape="rect" id="node12" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="1103,31,1233,57"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="1286,5,1375,32"/>
<area shape="rect" id="node9" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="1285,56,1377,83"/>
<area shape="rect" id="node10" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="1281,107,1380,133"/>
<area shape="rect" id="node11" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="1288,157,1373,184"/>
</map>
</div>

</div>
</div>
<a id="a30a0a343bac14fc5cf5591ee64c4830b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30a0a343bac14fc5cf5591ee64c4830b">&#9670;&nbsp;</a></span>nilfs_ioctl_move_blocks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_ioctl_move_blocks </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structsuper__block.html">super_block</a> *&#160;</td>
          <td class="paramname"><em>sb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct nilfs_argv *&#160;</td>
          <td class="paramname"><em>argv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_ioctl_move_blocks - move valid inode's blocks during garbage collection : superblock object : vector of arguments from userspace : array of nilfs_vdesc structures</p>
<p>Description: <a class="el" href="nilfs2_2ioctl_8c.html#a30a0a343bac14fc5cf5591ee64c4830b">nilfs_ioctl_move_blocks()</a> function reads valid data/node blocks that garbage collector specified with the array of nilfs_vdesc structures and stores them into page caches of GC inodes.</p>
<p>Return Value: Number of processed nilfs_vdesc structures or error code, otherwise. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a30a0a343bac14fc5cf5591ee64c4830b_cgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a30a0a343bac14fc5cf5591ee64c4830b_cgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a30a0a343bac14fc5cf5591ee64c4830b_cgraph" id="nilfs2_2ioctl_8c_a30a0a343bac14fc5cf5591ee64c4830b_cgraph">
<area shape="rect" id="node2" href="v9fs_8c.html#a962ef1b35907bdda12de2cddce8bc638" title="LIST_HEAD" alt="" coords="245,195,339,221"/>
<area shape="rect" id="node3" href="nilfs2_2inode_8c.html#ad35645870060c9d83e6c1ca96a402675" title="nilfs_iget_for_gc" alt="" coords="233,549,351,576"/>
<area shape="rect" id="node9" href="inode_8c.html#a378733dcbf0fb08359b9a02145ac8fc3" title="iput" alt="" coords="673,423,716,449"/>
<area shape="rect" id="node24" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="659,727,730,753"/>
<area shape="rect" id="node34" href="inode_8c.html#ad2a7d900c04745e54c8d2f3847922a59" title="igrab" alt="" coords="669,43,720,69"/>
<area shape="rect" id="node35" href="nilfs2_2ioctl_8c.html#abb151dcfb7c15835996fcfe3f602bb23" title="nilfs_ioctl_move_inode\l_block" alt="" coords="215,778,369,819"/>
<area shape="rect" id="node45" href="gcinode_8c.html#a44422968054e086ec9ea0e7bbf30db32" title="nilfs_gccache_wait\l_and_mark_dirty" alt="" coords="225,953,359,994"/>
<area shape="rect" id="node4" href="inode_8c.html#a0e9a0440646ab0424be87f1ee6387c64" title="iget5_locked" alt="" coords="444,296,539,323"/>
<area shape="rect" id="node23" href="nilfs2_2inode_8c.html#a42350b0b59e53776755f5a0b17efd97f" title="nilfs_iget_test" alt="" coords="440,676,543,703"/>
<area shape="rect" id="node25" href="nilfs2_2inode_8c.html#ab596c6b27b262ff881fb811a5d25990a" title="nilfs_iget_set" alt="" coords="442,625,541,652"/>
<area shape="rect" id="node27" href="gcinode_8c.html#a2c5af5602d5da89eda7b8b207a141f8d" title="nilfs_init_gcinode" alt="" coords="430,575,553,601"/>
<area shape="rect" id="node30" href="bad__inode_8c.html#a8c027cf52e2b7669b11b0bfa09bbcd45" title="iget_failed" alt="" coords="451,524,532,551"/>
<area shape="rect" id="node33" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="630,473,759,500"/>
<area shape="rect" id="node5" href="inode_8c.html#aa1822403d896f1040c371de082022045" title="hash" alt="" coords="669,347,720,373"/>
<area shape="rect" id="node6" href="inode_8c.html#af827e753dda790b4b798f86e933bb380" title="find_inode" alt="" coords="654,93,735,120"/>
<area shape="rect" id="node15" href="inode_8c.html#a076b86296ed39596f96ef03ea8aa74d7" title="destroy_inode" alt="" coords="1242,271,1345,297"/>
<area shape="rect" id="node17" href="debugfs_2inode_8c.html#a16e485b5debd4cd96a200844c38df190" title="EXPORT_SYMBOL" alt="" coords="1569,220,1708,247"/>
<area shape="rect" id="node19" href="inode_8c.html#a6328f7a2621c5365a1df969e8c7ab998" title="alloc_inode" alt="" coords="1070,195,1157,221"/>
<area shape="rect" id="node21" href="inode_8c.html#a1871c58d9c393006e24f7fea1bcc288d" title="inode_sb_list_add" alt="" coords="631,296,758,323"/>
<area shape="rect" id="node7" href="inode_8c.html#a6bdbb5661dff23968a2a67170a4ffccf" title="__wait_on_freeing_inode" alt="" coords="827,93,993,120"/>
<area shape="rect" id="node8" href="inode_8c.html#ab5747108c3d9a3f113b72a10a9be6a2f" title="__iget" alt="" coords="881,43,939,69"/>
<area shape="rect" id="node10" href="inode_8c.html#a7e99b25ac29d19bc82fbddcb773c4f25" title="iput_final" alt="" coords="873,397,947,424"/>
<area shape="rect" id="node11" href="inode_8c.html#a943dee860d20f57552f168683dcb4b5d" title="inode_add_lru" alt="" coords="1062,296,1165,323"/>
<area shape="rect" id="node12" href="fs-writeback_8c.html#aceeba3df6a433f68c665086a2ee53faa" title="write_inode_now" alt="" coords="1054,347,1173,373"/>
<area shape="rect" id="node13" href="inode_8c.html#a1f2fe8883e70882e845560b2ccf4ab16" title="inode_lru_list_del" alt="" coords="1052,448,1175,475"/>
<area shape="rect" id="node14" href="inode_8c.html#a4b62e1e360840615442b8ad6a9f16bc7" title="evict" alt="" coords="1088,397,1139,424"/>
<area shape="rect" id="node16" href="inode_8c.html#acc59c5a81bf40ee903f9feb03ac7b7fa" title="__destroy_inode" alt="" coords="1404,245,1521,272"/>
<area shape="rect" id="node18" href="inode_8c.html#af3846da666673695a3040ee40b92bf0e" title="i_callback" alt="" coords="1423,296,1503,323"/>
<area shape="rect" id="node20" href="inode_8c.html#a844185001176cf3da6e2195a24931015" title="inode_init_always" alt="" coords="1231,195,1356,221"/>
<area shape="rect" id="node22" href="debugfs_2inode_8c.html#ab0e32a685998ab4f1be52f66ddedfca1" title="EXPORT_SYMBOL_GPL" alt="" coords="824,296,996,323"/>
<area shape="rect" id="node26" href="the__nilfs_8h.html#a4af5a977af148ee222180ae10226f487" title="nilfs_get_root" alt="" coords="645,676,745,703"/>
<area shape="rect" id="node28" href="nilfs2_2bmap_8c.html#a38787acb7ae6f453116bac88c530f3f4" title="nilfs_bmap_init_gc" alt="" coords="629,625,760,652"/>
<area shape="rect" id="node29" href="nilfs_8h.html#ab02aecb562f6c74a04aad6d769ac9f1e" title="NILFS_BMAP_I" alt="" coords="852,651,968,677"/>
<area shape="rect" id="node31" href="bad__inode_8c.html#ab9cc2af6161530b35e5f86e29f977033" title="make_bad_inode" alt="" coords="635,575,755,601"/>
<area shape="rect" id="node32" href="bad__inode_8c.html#a74ff3566c64350315f12163f4ddfdae7" title="EXPORT_SYMBOL" alt="" coords="841,600,979,627"/>
<area shape="rect" id="node36" href="gcinode_8c.html#abe1de7444253292fcc51c2c2acc75c7f" title="nilfs_gccache_submit\l_read_data" alt="" coords="621,778,769,819"/>
<area shape="rect" id="node43" href="gcinode_8c.html#aaa0597974fc3784d67c54f87273a623e" title="nilfs_gccache_submit\l_read_node" alt="" coords="417,837,565,878"/>
<area shape="rect" id="node37" href="nilfs2_2page_8c.html#aa4a24cc5a684ba71b9e4423f2ea38970" title="nilfs_grab_buffer" alt="" coords="851,937,969,964"/>
<area shape="rect" id="node38" href="dat_8c.html#a1641d48ed89a1de35dda5513abd31cc3" title="nilfs_dat_translate" alt="" coords="846,785,974,812"/>
<area shape="rect" id="node39" href="buffer_8c.html#a5fc92b2c44523c64e98193eaa4f46541" title="unlock_buffer" alt="" coords="860,887,960,913"/>
<area shape="rect" id="node41" href="buffer_8c.html#ade60786fa99b4fbb4cf607434af395db" title="end_buffer_read_sync" alt="" coords="835,735,985,761"/>
<area shape="rect" id="node42" href="buffer_8c.html#ab65df498c54845f497bae7afe9222c91" title="submit_bh" alt="" coords="869,836,951,863"/>
<area shape="rect" id="node40" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1044,861,1183,888"/>
<area shape="rect" id="node44" href="btnode_8c.html#a50bdab0d1ee22669ead7c135ceaa384a" title="nilfs_btnode_submit\l_block" alt="" coords="625,843,764,885"/>
<area shape="rect" id="node46" href="nilfs2_2btree_8c.html#a4b18a3ec3488cabf390f7e32a7368068" title="nilfs_btree_broken\l_node_block" alt="" coords="427,1033,555,1074"/>
<area shape="rect" id="node48" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="430,960,553,987"/>
<area shape="rect" id="node47" href="nilfs2_2btree_8c.html#a727f4544a953b2192576f877249bba18" title="nilfs_btree_node_broken" alt="" coords="613,1061,776,1088"/>
<area shape="rect" id="node49" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="634,960,755,987"/>
<area shape="rect" id="node50" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="627,909,762,936"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a30a0a343bac14fc5cf5591ee64c4830b_icgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a30a0a343bac14fc5cf5591ee64c4830b_icgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a30a0a343bac14fc5cf5591ee64c4830b_icgraph" id="nilfs2_2ioctl_8c_a30a0a343bac14fc5cf5591ee64c4830b_icgraph">
<area shape="rect" id="node2" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096" title="nilfs_ioctl_clean_segments" alt="" coords="215,107,393,133"/>
<area shape="rect" id="node3" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="441,107,519,133"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="567,81,687,108"/>
<area shape="rect" id="node5" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="743,81,857,108"/>
<area shape="rect" id="node10" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="735,132,865,159"/>
<area shape="rect" id="node6" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="918,5,1007,32"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="917,56,1009,83"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="913,107,1012,133"/>
<area shape="rect" id="node9" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="920,157,1005,184"/>
</map>
</div>

</div>
</div>
<a id="abb151dcfb7c15835996fcfe3f602bb23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb151dcfb7c15835996fcfe3f602bb23">&#9670;&nbsp;</a></span>nilfs_ioctl_move_inode_block()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_ioctl_move_inode_block </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct nilfs_vdesc *&#160;</td>
          <td class="paramname"><em>vdesc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct list_head *&#160;</td>
          <td class="paramname"><em>buffers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_ioctl_move_inode_block - prepare data/node block for moving by GC : inode object : descriptor of virtual block number : list of moving buffers</p>
<p>Description: <a class="el" href="nilfs2_2ioctl_8c.html#abb151dcfb7c15835996fcfe3f602bb23">nilfs_ioctl_move_inode_block()</a> function registers data/node buffer in the GC pagecache and submit read request.</p>
<p>Return Value: On success, 0 is returned. On error, one of the following negative error codes is returned.</p>
<p>%-EIO - I/O error.</p>
<p>%-ENOMEM - Insufficient amount of memory available.</p>
<p>%-ENOENT - Requested block doesn't exist.</p>
<p>%-EEXIST - Blocks conflict is detected. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_abb151dcfb7c15835996fcfe3f602bb23_cgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_abb151dcfb7c15835996fcfe3f602bb23_cgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_abb151dcfb7c15835996fcfe3f602bb23_cgraph" id="nilfs2_2ioctl_8c_abb151dcfb7c15835996fcfe3f602bb23_cgraph">
<area shape="rect" id="node2" href="gcinode_8c.html#abe1de7444253292fcc51c2c2acc75c7f" title="nilfs_gccache_submit\l_read_data" alt="" coords="404,681,552,722"/>
<area shape="rect" id="node48" href="gcinode_8c.html#aaa0597974fc3784d67c54f87273a623e" title="nilfs_gccache_submit\l_read_node" alt="" coords="208,162,356,203"/>
<area shape="rect" id="node3" href="nilfs2_2page_8c.html#aa4a24cc5a684ba71b9e4423f2ea38970" title="nilfs_grab_buffer" alt="" coords="2600,195,2719,221"/>
<area shape="rect" id="node15" href="dat_8c.html#a1641d48ed89a1de35dda5513abd31cc3" title="nilfs_dat_translate" alt="" coords="600,397,728,424"/>
<area shape="rect" id="node22" href="buffer_8c.html#a5fc92b2c44523c64e98193eaa4f46541" title="unlock_buffer" alt="" coords="3037,540,3137,567"/>
<area shape="rect" id="node24" href="buffer_8c.html#ade60786fa99b4fbb4cf607434af395db" title="end_buffer_read_sync" alt="" coords="2584,565,2735,592"/>
<area shape="rect" id="node26" href="buffer_8c.html#ab65df498c54845f497bae7afe9222c91" title="submit_bh" alt="" coords="2618,1019,2701,1045"/>
<area shape="rect" id="node4" href="nilfs2_2page_8c.html#a051d0268f3af219ba3e2a9ca79a8843c" title="__nilfs_get_page_block" alt="" coords="2795,144,2953,171"/>
<area shape="rect" id="node5" href="buffer_8c.html#a4844b8163e94b4a214fbf85d86fe88d0" title="create_empty_buffers" alt="" coords="3013,312,3161,339"/>
<area shape="rect" id="node13" href="page_8h.html#aaad58f68fa9675f7e9803744d0e3f414" title="nilfs_page_get_nth\l_block" alt="" coords="3022,111,3153,153"/>
<area shape="rect" id="node14" href="buffer_8c.html#a59a45ba914a951c36f0cabe79be9756b" title="touch_buffer" alt="" coords="3227,489,3322,516"/>
<area shape="rect" id="node6" href="buffer_8c.html#a94ca9132735bfcb0b0b2ae9531461cc8" title="alloc_page_buffers" alt="" coords="3209,312,3340,339"/>
<area shape="rect" id="node9" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="3608,464,3747,491"/>
<area shape="rect" id="node7" href="buffer_8c.html#a981702f40cf45ec9b31ad0139bef0ad4" title="alloc_buffer_head" alt="" coords="3412,236,3536,263"/>
<area shape="rect" id="node10" href="buffer_8c.html#a3b86ea46b7b35adeb32cc031574c6caf" title="set_bh_page" alt="" coords="3426,388,3522,415"/>
<area shape="rect" id="node11" href="buffer_8c.html#a075f98dd5ac2332bbf2f2f7093c9f131" title="free_buffer_head" alt="" coords="3415,287,3533,313"/>
<area shape="rect" id="node12" href="buffer_8c.html#ae236845de65ed065f74eecf8f6ee9742" title="EXPORT_SYMBOL_GPL" alt="" coords="3388,337,3560,364"/>
<area shape="rect" id="node8" href="buffer_8c.html#a47e9ba092637c653e61f12f9a14cdd4a" title="recalc_bh_state" alt="" coords="3620,261,3735,288"/>
<area shape="rect" id="node16" href="nilfs2_2alloc_8c.html#abe8a4c8cbae85745a1a9b5e380bc2568" title="nilfs_palloc_get_entry\l_block" alt="" coords="776,430,924,471"/>
<area shape="rect" id="node44" href="nilfs_8h.html#aa2547b587fff139262e053241c6d5165" title="nilfs_doing_gc" alt="" coords="797,357,903,384"/>
<area shape="rect" id="node46" href="mdt_8c.html#ac812454a88416aae4c77cdb630f97716" title="nilfs_mdt_get_frozen\l_buffer" alt="" coords="1570,297,1713,338"/>
<area shape="rect" id="node47" href="nilfs2_2alloc_8c.html#a2a24fff0c9ab30080b5d2c08913b41ab" title="nilfs_palloc_block\l_get_entry" alt="" coords="997,622,1122,663"/>
<area shape="rect" id="node17" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1807,581,1903,608"/>
<area shape="rect" id="node18" href="nilfs2_2alloc_8c.html#a539250d301eb19ff68f4f0ac0e54279f" title="nilfs_palloc_get_block" alt="" coords="1780,443,1931,469"/>
<area shape="rect" id="node34" href="nilfs2_2alloc_8c.html#a6075e80e07eb1fb451fc65d559e35484" title="nilfs_palloc_entry\l_blkoff" alt="" coords="998,521,1121,562"/>
<area shape="rect" id="node19" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="1979,443,2117,469"/>
<area shape="rect" id="node20" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="2171,476,2316,503"/>
<area shape="rect" id="node30" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="2165,413,2321,440"/>
<area shape="rect" id="node21" href="mdt_8c.html#a43ded315f7122596d14b88c43fe9c98d" title="nilfs_mdt_submit_block" alt="" coords="2373,515,2532,541"/>
<area shape="rect" id="node23" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="2624,355,2695,381"/>
<area shape="rect" id="node25" href="buffer_8c.html#a85e290b32d9599acd25df3b159392ab7" title="__end_buffer_read_notouch" alt="" coords="2783,565,2965,592"/>
<area shape="rect" id="node27" href="buffer_8c.html#a5fd6f01c5f9cff0945cb999cbefa412d" title="submit_bh_wbc" alt="" coords="2817,1044,2931,1071"/>
<area shape="rect" id="node28" href="buffer_8c.html#a2463267e7636f2be0fc2b44fb65cb5ba" title="end_bio_bh_io_sync" alt="" coords="3017,1044,3157,1071"/>
<area shape="rect" id="node29" href="buffer_8c.html#aa35a4aa9ac3d40858082aabb83e2a44c" title="guard_bio_eod" alt="" coords="3034,1095,3141,1121"/>
<area shape="rect" id="node31" href="nilfs_8h.html#aacff7fe9750a849356475b2063b69e3b" title="nilfs_transaction_begin" alt="" coords="2375,413,2530,440"/>
<area shape="rect" id="node32" href="mdt_8c.html#a759ca943427ead8bb22ecdc82a9338ee" title="nilfs_mdt_insert_new\l_block" alt="" coords="2380,347,2525,389"/>
<area shape="rect" id="node33" href="nilfs_8h.html#a576ee8d20fe7a5d7c5889cb118fe0533" title="nilfs_transaction_commit" alt="" coords="2369,464,2536,491"/>
<area shape="rect" id="node35" href="nilfs2_2alloc_8c.html#a82746f35ce0628ca7fefdc6333713ae2" title="nilfs_palloc_group" alt="" coords="1195,736,1321,763"/>
<area shape="rect" id="node42" href="nilfs2_2alloc_8c.html#aac6b438f00cbb6f14307701ffeb19c68" title="nilfs_palloc_bitmap\l_blkoff" alt="" coords="1369,654,1503,695"/>
<area shape="rect" id="node36" href="nilfs2_2alloc_8h.html#a80b91fe3100bd11e343f72a96ca838bd" title="nilfs_palloc_entries\l_per_group" alt="" coords="1369,843,1503,885"/>
<area shape="rect" id="node37" href="nilfs2_2alloc_8h.html#afccd9ef569bdfd1cf59338965c95fb1c" title="nilfs_palloc_init_blockgroup" alt="" coords="1551,851,1732,877"/>
<area shape="rect" id="node39" href="nilfs2_2alloc_8h.html#a10901166e88f0e569da3f5aa39eeab9d" title="nilfs_palloc_get_entry\l_block" alt="" coords="1567,465,1715,506"/>
<area shape="rect" id="node40" href="nilfs2_2alloc_8h.html#a9fde8cc073bd6c3157f774c7e33b5a5c" title="nilfs_palloc_block\l_get_entry" alt="" coords="1579,785,1704,826"/>
<area shape="rect" id="node41" href="nilfs2_2alloc_8h.html#a3d17a08175d8f5c51ebb5787acebad9c" title="nilfs_palloc_count\l_max_entries" alt="" coords="1578,902,1705,943"/>
<area shape="rect" id="node38" href="nilfs2_2alloc_8c.html#a311c71ab31da7903a8a0ec492e1b8c66" title="nilfs_palloc_groups\l_per_desc_block" alt="" coords="1789,785,1922,826"/>
<area shape="rect" id="node43" href="nilfs2_2alloc_8c.html#a9e6fc04ad7375ca78f8b38b69bc2131b" title="nilfs_palloc_desc_blkoff" alt="" coords="1561,683,1722,709"/>
<area shape="rect" id="node45" href="nilfs_8h.html#a0e51be0290a47aca596f1257148b18d1" title="nilfs_test_transaction_flag" alt="" coords="972,347,1147,373"/>
<area shape="rect" id="node49" href="btnode_8c.html#a50bdab0d1ee22669ead7c135ceaa384a" title="nilfs_btnode_submit\l_block" alt="" coords="409,162,547,203"/>
<area shape="rect" id="node50" href="nilfs_8h.html#a4dc3ec1228b57cf218654a728557a7db" title="NILFS_BTNC_I" alt="" coords="607,93,721,120"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_abb151dcfb7c15835996fcfe3f602bb23_icgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_abb151dcfb7c15835996fcfe3f602bb23_icgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_abb151dcfb7c15835996fcfe3f602bb23_icgraph" id="nilfs2_2ioctl_8c_abb151dcfb7c15835996fcfe3f602bb23_icgraph">
<area shape="rect" id="node2" href="nilfs2_2ioctl_8c.html#a30a0a343bac14fc5cf5591ee64c4830b" title="nilfs_ioctl_move_blocks" alt="" coords="208,107,369,133"/>
<area shape="rect" id="node3" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096" title="nilfs_ioctl_clean_segments" alt="" coords="417,107,596,133"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="644,107,721,133"/>
<area shape="rect" id="node5" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="769,81,889,108"/>
<area shape="rect" id="node6" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="945,81,1060,108"/>
<area shape="rect" id="node11" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="937,132,1068,159"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="1121,5,1210,32"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="1119,56,1211,83"/>
<area shape="rect" id="node9" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="1116,107,1215,133"/>
<area shape="rect" id="node10" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="1123,157,1208,184"/>
</map>
</div>

</div>
</div>
<a id="a0a4a3b447f57cba6a9d7e2c8c2ed3049"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a4a3b447f57cba6a9d7e2c8c2ed3049">&#9670;&nbsp;</a></span>nilfs_ioctl_prepare_clean_segments()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nilfs_ioctl_prepare_clean_segments </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *&#160;</td>
          <td class="paramname"><em>nilfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct nilfs_argv *&#160;</td>
          <td class="paramname"><em>argv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>kbufs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a0a4a3b447f57cba6a9d7e2c8c2ed3049_cgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a0a4a3b447f57cba6a9d7e2c8c2ed3049_cgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a0a4a3b447f57cba6a9d7e2c8c2ed3049_cgraph" id="nilfs2_2ioctl_8c_a0a4a3b447f57cba6a9d7e2c8c2ed3049_cgraph">
<area shape="rect" id="node2" href="nilfs2_2ioctl_8c.html#a5cd529efbea1f81e36a61c98a622c17b" title="nilfs_ioctl_delete\l_checkpoints" alt="" coords="205,731,324,772"/>
<area shape="rect" id="node29" href="nilfs2_2ioctl_8c.html#ab7d5c78fbd6a179cb3f39f87cb63285d" title="nilfs_ioctl_free_vblocknrs" alt="" coords="180,922,349,949"/>
<area shape="rect" id="node41" href="nilfs2_2ioctl_8c.html#ab0e598551ac90d5ab9b0aae8416dbf40" title="nilfs_ioctl_mark_blocks\l_dirty" alt="" coords="397,973,556,1015"/>
<area shape="rect" id="node3" href="cpfile_8c.html#a741424beec629d3d2eb990ebf4ba1da4" title="nilfs_cpfile_delete\l_checkpoints" alt="" coords="413,473,540,515"/>
<area shape="rect" id="node4" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1264,834,1360,861"/>
<area shape="rect" id="node5" href="exec_8c.html#a36dcaf63ad8fe9783c81b418943e2346" title="count" alt="" coords="881,42,935,69"/>
<area shape="rect" id="node7" href="cpfile_8c.html#a9ff8012cf954ee1e283e981e7c92c4cf" title="nilfs_cpfile_get_header\l_block" alt="" coords="616,669,771,711"/>
<area shape="rect" id="node11" href="cpfile_8c.html#aee514232b0632a21e05f667f33704ade" title="nilfs_cpfile_checkpoints\l_in_block" alt="" coords="613,473,774,515"/>
<area shape="rect" id="node14" href="cpfile_8c.html#a3aefee4421b37e13cdc047fbd1765eef" title="nilfs_cpfile_get_checkpoint\l_block" alt="" coords="604,604,783,645"/>
<area shape="rect" id="node17" href="cpfile_8c.html#a61f50ee8f6946771fe618e3ac414fae4" title="nilfs_cpfile_block\l_get_checkpoint" alt="" coords="632,539,755,580"/>
<area shape="rect" id="node18" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1053,1585,1175,1611"/>
<area shape="rect" id="node22" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="1043,282,1185,309"/>
<area shape="rect" id="node24" href="cpfile_8c.html#a3426549677cf51101b5df35dc01aa4a7" title="nilfs_cpfile_is_in\l_first" alt="" coords="634,356,753,397"/>
<area shape="rect" id="node25" href="cpfile_8c.html#a637e7231d3a234bdf6405fc8aa2bde40" title="nilfs_cpfile_block\l_sub_valid_checkpoints" alt="" coords="613,5,774,47"/>
<area shape="rect" id="node26" href="cpfile_8c.html#a3eae0b4142d9167d13e5d57535dbb5aa" title="nilfs_cpfile_delete\l_checkpoint_block" alt="" coords="628,173,759,215"/>
<area shape="rect" id="node28" href="cpfile_8c.html#af5bb4325de3f70ecd2e2b03ea43205cb" title="nilfs_cpfile_block\l_get_header" alt="" coords="632,239,755,280"/>
<area shape="rect" id="node6" href="exec_8c.html#a9ea507497a5718b67a987a1c91a5becb" title="get_user_arg_ptr" alt="" coords="1055,42,1173,69"/>
<area shape="rect" id="node8" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="839,677,977,703"/>
<area shape="rect" id="node9" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="1041,653,1187,679"/>
<area shape="rect" id="node10" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="1036,703,1192,730"/>
<area shape="rect" id="node12" href="cpfile_8c.html#aeabb5bf5c2379caa588e3302673b1a30" title="nilfs_cpfile_checkpoints\l_per_block" alt="" coords="1033,435,1195,476"/>
<area shape="rect" id="node13" href="cpfile_8c.html#af3192909ddb88c2575bb1828d746310a" title="nilfs_cpfile_get_offset" alt="" coords="833,501,983,527"/>
<area shape="rect" id="node15" href="cpfile_8c.html#a67d134834f89f92295956bc0532ebc00" title="nilfs_cpfile_get_blkoff" alt="" coords="834,399,982,426"/>
<area shape="rect" id="node16" href="cpfile_8c.html#ad532d334d0ba51974d655e439bbd513c" title="nilfs_cpfile_block_init" alt="" coords="835,602,981,629"/>
<area shape="rect" id="node19" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1251,1585,1373,1611"/>
<area shape="rect" id="node20" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1245,1635,1379,1662"/>
<area shape="rect" id="node21" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1243,1534,1381,1561"/>
<area shape="rect" id="node23" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1277,282,1347,309"/>
<area shape="rect" id="node27" href="mdt_8c.html#a920f1cd6bb101e5f43a349fe7531e096" title="nilfs_mdt_delete_block" alt="" coords="831,231,985,258"/>
<area shape="rect" id="node30" href="dat_8c.html#a91e8f9af4bb7b8f3e12f9344f70c058f" title="nilfs_dat_freev" alt="" coords="640,925,747,951"/>
<area shape="rect" id="node31" href="nilfs2_2alloc_8c.html#a12ba11e974447995be8fa927aaea6f4b" title="nilfs_palloc_freev" alt="" coords="847,1046,969,1073"/>
<area shape="rect" id="node32" href="nilfs2_2alloc_8h.html#a80b91fe3100bd11e343f72a96ca838bd" title="nilfs_palloc_entries\l_per_group" alt="" coords="1245,1319,1379,1360"/>
<area shape="rect" id="node33" href="nilfs2_2alloc_8c.html#a82746f35ce0628ca7fefdc6333713ae2" title="nilfs_palloc_group" alt="" coords="1051,1351,1177,1378"/>
<area shape="rect" id="node34" href="nilfs2_2alloc_8c.html#a98fa52b7d8afb8ee8f46e61b545baf32" title="nilfs_palloc_get_desc\l_block" alt="" coords="1041,856,1187,897"/>
<area shape="rect" id="node35" href="nilfs2_2alloc_8c.html#adad584204b57f762d00f67fad39b515f" title="nilfs_palloc_get_bitmap\l_block" alt="" coords="1035,921,1193,963"/>
<area shape="rect" id="node36" href="mdt_8h.html#a3cdb2c26d17013a183fe241b115dd589" title="nilfs_mdt_bgl_lock" alt="" coords="1049,987,1179,1014"/>
<area shape="rect" id="node37" href="nilfs2_2alloc_8c.html#a94cff05fa5abd31449187412146a49f3" title="nilfs_palloc_delete\l_entry_block" alt="" coords="1049,1039,1179,1080"/>
<area shape="rect" id="node38" href="nilfs2_2alloc_8c.html#abd4c4ac38f5955b50e2d1ed3a4cfe194" title="nilfs_palloc_block\l_get_group_desc" alt="" coords="1051,1104,1177,1145"/>
<area shape="rect" id="node39" href="nilfs2_2alloc_8c.html#a52d2388c44c82795fb085bdba291a3c0" title="nilfs_palloc_group\l_desc_add_entries" alt="" coords="1049,1169,1179,1211"/>
<area shape="rect" id="node40" href="nilfs2_2alloc_8c.html#a3216027ff788f54c4e96c564568c893d" title="nilfs_palloc_delete\l_bitmap_block" alt="" coords="1049,1235,1179,1276"/>
<area shape="rect" id="node42" href="nilfs2_2bmap_8c.html#a01ec88eea126f6a0861c9da00aadb1d7" title="nilfs_bmap_lookup_at\l_level" alt="" coords="619,1511,767,1552"/>
<area shape="rect" id="node50" href="nilfs2_2bmap_8c.html#ada48e8abd9d75673881ee7c8fb799d00" title="nilfs_bmap_mark" alt="" coords="633,1631,754,1658"/>
<area shape="rect" id="node43" href="nilfs2_2bmap_8c.html#a7a7ea41075313d317e5036ebc1fbbe3b" title="nilfs_bmap_convert\l_error" alt="" coords="841,1628,975,1669"/>
<area shape="rect" id="node45" href="dat_8c.html#a1641d48ed89a1de35dda5513abd31cc3" title="nilfs_dat_translate" alt="" coords="844,1410,972,1437"/>
<area shape="rect" id="node49" href="nilfs2_2bmap_8c.html#aef6e9d2acff7b7d161389bb790483d06" title="nilfs_bmap_get_dat" alt="" coords="841,1518,975,1545"/>
<area shape="rect" id="node44" href="nilfs2_2super_8c.html#a5f424aefed531edcd064bfa930d96670" title="__nilfs_error" alt="" coords="1067,1635,1161,1662"/>
<area shape="rect" id="node46" href="nilfs2_2alloc_8c.html#abe8a4c8cbae85745a1a9b5e380bc2568" title="nilfs_palloc_get_entry\l_block" alt="" coords="1040,1403,1188,1444"/>
<area shape="rect" id="node47" href="nilfs_8h.html#aa2547b587fff139262e053241c6d5165" title="nilfs_doing_gc" alt="" coords="1061,1534,1167,1561"/>
<area shape="rect" id="node48" href="mdt_8c.html#ac812454a88416aae4c77cdb630f97716" title="nilfs_mdt_get_frozen\l_buffer" alt="" coords="1043,1468,1185,1509"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a0a4a3b447f57cba6a9d7e2c8c2ed3049_icgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a0a4a3b447f57cba6a9d7e2c8c2ed3049_icgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a0a4a3b447f57cba6a9d7e2c8c2ed3049_icgraph" id="nilfs2_2ioctl_8c_a0a4a3b447f57cba6a9d7e2c8c2ed3049_icgraph">
<area shape="rect" id="node2" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="180,31,328,57"/>
<area shape="rect" id="node5" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="728,81,848,108"/>
<area shape="rect" id="node3" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096" title="nilfs_ioctl_clean_segments" alt="" coords="376,31,555,57"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="603,31,680,57"/>
<area shape="rect" id="node6" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="904,81,1019,108"/>
<area shape="rect" id="node11" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="896,31,1027,57"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="1079,5,1169,32"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="1078,56,1170,83"/>
<area shape="rect" id="node9" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="1075,107,1173,133"/>
<area shape="rect" id="node10" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="1081,157,1167,184"/>
</map>
</div>

</div>
</div>
<a id="ae197bb230d6c201248dcabcc2df73e20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae197bb230d6c201248dcabcc2df73e20">&#9670;&nbsp;</a></span>nilfs_ioctl_resize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_ioctl_resize </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct file *&#160;</td>
          <td class="paramname"><em>filp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void __user *&#160;</td>
          <td class="paramname"><em>argp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_ioctl_resize - resize NILFS2 volume : inode object : file object : pointer on argument from userspace</p>
<p>Return Value: On success, 0 is returned or error code, otherwise. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_ae197bb230d6c201248dcabcc2df73e20_cgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_ae197bb230d6c201248dcabcc2df73e20_cgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_ae197bb230d6c201248dcabcc2df73e20_cgraph" id="nilfs2_2ioctl_8c_ae197bb230d6c201248dcabcc2df73e20_cgraph">
<area shape="rect" id="node2" href="namespace_8c.html#abec48677d6bf1090f17dd8b54cdee81d" title="mnt_want_write_file" alt="" coords="172,278,311,305"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="188,1317,295,1343"/>
<area shape="rect" id="node48" href="namespace_8c.html#a0ce94dc25dc93a0b5e1a9282e43e0a97" title="mnt_drop_write_file" alt="" coords="373,354,508,381"/>
<area shape="rect" id="node3" href="namespace_8c.html#af19741fc533f0e0a2acda44e925f80eb" title="may_write_real" alt="" coords="385,303,496,330"/>
<area shape="rect" id="node4" href="namespace_8c.html#afc62e617cec97974d570093f778e30e0" title="__mnt_want_write_file" alt="" coords="365,126,517,153"/>
<area shape="rect" id="node10" href="namespace_8c.html#a14b50b29ea751e02e86a7c9a2fa01128" title="EXPORT_SYMBOL_GPL" alt="" coords="1239,75,1411,102"/>
<area shape="rect" id="node5" href="namespace_8c.html#ae8d4c494f66a0cda8744bf47ebeba01f" title="__mnt_want_write" alt="" coords="587,126,715,153"/>
<area shape="rect" id="node12" href="namespace_8c.html#aba77afe1262e538d2854159761e6bcb2" title="mnt_clone_write" alt="" coords="593,50,710,77"/>
<area shape="rect" id="node6" href="mount_8h.html#a799ce35ff6ad0c45266cbe2b631ac610" title="real_mount" alt="" coords="827,101,913,127"/>
<area shape="rect" id="node7" href="namespace_8c.html#a24aaa0bb913baa617bc4d19fad011a99" title="mnt_inc_writers" alt="" coords="813,50,927,77"/>
<area shape="rect" id="node8" href="namespace_8c.html#a1e8eac40e0b14fb052603f900a411760" title="mnt_is_readonly" alt="" coords="811,151,929,178"/>
<area shape="rect" id="node11" href="namespace_8c.html#a6b6223aa5bccbed87645de18e8b0abac" title="mnt_dec_writers" alt="" coords="811,202,929,229"/>
<area shape="rect" id="node9" href="namespace_8c.html#ae435f6295042ca4769078d0b11c47713" title="__mnt_is_readonly" alt="" coords="1034,75,1165,102"/>
<area shape="rect" id="node14" href="sufile_8c.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="377,1291,504,1318"/>
<area shape="rect" id="node38" href="nilfs2_2segment_8c.html#ad8bab60b16b37c93e180e1ea3e1580ad" title="nilfs_construct_segment" alt="" coords="359,1850,523,1877"/>
<area shape="rect" id="node40" href="nilfs2_2super_8c.html#aa7e39a5604ca9a0da8224d92ff0f9554" title="nilfs_move_2nd_super" alt="" coords="365,1799,517,1826"/>
<area shape="rect" id="node41" href="nilfs2_2super_8c.html#a8e2908caf99fa61e4da3134daa205dd0" title="nilfs_prepare_super" alt="" coords="373,575,508,602"/>
<area shape="rect" id="node43" href="nilfs2_2super_8c.html#a6cb8ff08bb40fc6f664e18570efacb50" title="nilfs_set_log_cursor" alt="" coords="801,1791,939,1818"/>
<area shape="rect" id="node45" href="nilfs2_2super_8c.html#a0955c5c7387c5d5ea561c70b3eeb5925" title="nilfs_commit_super" alt="" coords="373,967,508,994"/>
<area shape="rect" id="node47" href="sufile_8c.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="580,1683,723,1724"/>
<area shape="rect" id="node15" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="1279,1117,1370,1143"/>
<area shape="rect" id="node16" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1459,1218,1555,1245"/>
<area shape="rect" id="node17" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="780,1226,960,1253"/>
<area shape="rect" id="node21" href="sufile_8c.html#a7df3cdff37c5aa00cca3458f1d7d400e" title="nilfs_sufile_get_header\l_block" alt="" coords="1247,1320,1402,1361"/>
<area shape="rect" id="node22" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1263,838,1386,865"/>
<area shape="rect" id="node23" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="1253,889,1396,915"/>
<area shape="rect" id="node35" href="the__nilfs_8c.html#aa7bf85e7bb9022b3680b22d945d17f91" title="nilfs_nrsvsegs" alt="" coords="817,1487,923,1514"/>
<area shape="rect" id="node36" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="582,1059,721,1100"/>
<area shape="rect" id="node37" href="the__nilfs_8c.html#a38632ac69509070865038bf0120a1509" title="nilfs_set_nsegments" alt="" coords="580,1467,723,1494"/>
<area shape="rect" id="node18" href="sufile_8h.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="1008,1167,1191,1194"/>
<area shape="rect" id="node19" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="1028,1219,1171,1260"/>
<area shape="rect" id="node20" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="1040,1117,1159,1143"/>
<area shape="rect" id="node24" href="sufile_8h.html#ae5c9db186be6baf07d66e049a0fd9b9b" title="nilfs_sufile_mark_dirty" alt="" coords="1023,711,1175,738"/>
<area shape="rect" id="node25" href="sufile_8h.html#ac6379742426c30d02072b1a5b0f527f8" title="nilfs_sufile_set_segment\l_usage" alt="" coords="1016,645,1183,687"/>
<area shape="rect" id="node26" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033" title="nblocks" alt="" coords="1066,1285,1133,1311"/>
<area shape="rect" id="node27" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="1030,1386,1169,1413"/>
<area shape="rect" id="node28" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="1024,1487,1175,1514"/>
<area shape="rect" id="node29" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687" title="nilfs_sufile_set_suinfo" alt="" coords="1024,1015,1175,1042"/>
<area shape="rect" id="node30" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="1031,1437,1168,1463"/>
<area shape="rect" id="node31" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="1034,1335,1165,1362"/>
<area shape="rect" id="node32" href="sufile_8h.html#acad60c93c0f7f6c3a8a9dc843107f1ed" title="nilfs_sufile_do_scrap" alt="" coords="1027,914,1171,941"/>
<area shape="rect" id="node33" href="sufile_8h.html#a577d0d35a7907909b6c0a139d8cc1704" title="nilfs_sufile_do_free" alt="" coords="1032,965,1167,991"/>
<area shape="rect" id="node34" href="sufile_8h.html#aff87ff4257115842ff3c7940e5f8e769" title="nilfs_sufile_do_cancel_free" alt="" coords="1010,863,1189,890"/>
<area shape="rect" id="node39" href="nilfs2_2segment_8c.html#aece5ba8b7c1a8df29083370bfb0f3aad" title="nilfs_segctor_sync" alt="" coords="586,1850,717,1877"/>
<area shape="rect" id="node42" href="the__nilfs_8c.html#ab41ad60b507d8f217c2062c254a00367" title="nilfs_swap_super_block" alt="" coords="571,379,732,406"/>
<area shape="rect" id="node44" href="the__nilfs_8c.html#afbb3b8234eb658d4f2535b173d3553a0" title="nilfs_count_free_blocks" alt="" coords="1245,1791,1404,1818"/>
<area shape="rect" id="node46" href="nilfs2_2super_8c.html#a7f749f73b57e01f7d7b45df9c3cc836b" title="nilfs_sync_super" alt="" coords="591,430,711,457"/>
<area shape="rect" id="node49" href="namespace_8c.html#ad990c81af66b82e8c66b009dd531b77b" title="__mnt_drop_write" alt="" coords="589,202,714,229"/>
<area shape="rect" id="node50" href="namespace_8c.html#aaa6b04953fbfe2185e8e0f5431d89c79" title="EXPORT_SYMBOL" alt="" coords="582,329,721,355"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_ae197bb230d6c201248dcabcc2df73e20_icgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_ae197bb230d6c201248dcabcc2df73e20_icgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_ae197bb230d6c201248dcabcc2df73e20_icgraph" id="nilfs2_2ioctl_8c_ae197bb230d6c201248dcabcc2df73e20_icgraph">
<area shape="rect" id="node2" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="172,107,249,133"/>
<area shape="rect" id="node3" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="297,81,417,108"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="473,81,588,108"/>
<area shape="rect" id="node9" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="465,132,596,159"/>
<area shape="rect" id="node5" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="649,5,738,32"/>
<area shape="rect" id="node6" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="647,56,739,83"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="644,107,743,133"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="651,157,736,184"/>
</map>
</div>

</div>
</div>
<a id="a7f41bf53459a54ba4c2d14e01aaad2b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f41bf53459a54ba4c2d14e01aaad2b7">&#9670;&nbsp;</a></span>nilfs_ioctl_set_alloc_range()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_ioctl_set_alloc_range </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void __user *&#160;</td>
          <td class="paramname"><em>argp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_ioctl_set_alloc_range - limit range of segments to be allocated : inode object : pointer on argument from userspace</p>
<p>Decription: <a class="el" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7">nilfs_ioctl_set_alloc_range()</a> function defines lower limit of segments in bytes and upper limit of segments in bytes. The NILFS_IOCTL_SET_ALLOC_RANGE is used by nilfs_resize utility.</p>
<p>Return Value: On success, 0 is returned or error code, otherwise. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a7f41bf53459a54ba4c2d14e01aaad2b7_cgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a7f41bf53459a54ba4c2d14e01aaad2b7_cgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a7f41bf53459a54ba4c2d14e01aaad2b7_cgraph" id="nilfs2_2ioctl_8c_a7f41bf53459a54ba4c2d14e01aaad2b7_cgraph">
<area shape="rect" id="node2" href="sufile_8c.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="189,238,332,279"/>
<area shape="rect" id="node3" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="1107,499,1197,525"/>
<area shape="rect" id="node4" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1699,1540,1795,1567"/>
<area shape="rect" id="node5" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="380,1207,560,1233"/>
<area shape="rect" id="node6" href="sufile_8h.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="608,665,791,692"/>
<area shape="rect" id="node7" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="628,913,771,954"/>
<area shape="rect" id="node8" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="869,1477,987,1504"/>
<area shape="rect" id="node23" href="sufile_8h.html#ae5c9db186be6baf07d66e049a0fd9b9b" title="nilfs_sufile_mark_dirty" alt="" coords="852,1232,1004,1259"/>
<area shape="rect" id="node24" href="sufile_8h.html#ac6379742426c30d02072b1a5b0f527f8" title="nilfs_sufile_set_segment\l_usage" alt="" coords="845,1529,1011,1570"/>
<area shape="rect" id="node25" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033" title="nblocks" alt="" coords="1119,2453,1185,2480"/>
<area shape="rect" id="node26" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="630,1304,769,1331"/>
<area shape="rect" id="node27" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="853,1709,1003,1736"/>
<area shape="rect" id="node29" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687" title="nilfs_sufile_set_suinfo" alt="" coords="853,988,1003,1015"/>
<area shape="rect" id="node31" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="859,1595,997,1621"/>
<area shape="rect" id="node32" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="863,1645,993,1672"/>
<area shape="rect" id="node33" href="sufile_8h.html#acad60c93c0f7f6c3a8a9dc843107f1ed" title="nilfs_sufile_do_scrap" alt="" coords="856,701,1000,728"/>
<area shape="rect" id="node34" href="sufile_8h.html#a577d0d35a7907909b6c0a139d8cc1704" title="nilfs_sufile_do_free" alt="" coords="861,651,995,677"/>
<area shape="rect" id="node35" href="sufile_8h.html#aff87ff4257115842ff3c7940e5f8e769" title="nilfs_sufile_do_cancel_free" alt="" coords="839,752,1017,779"/>
<area shape="rect" id="node36" href="sufile_8h.html#a7e943e59486cd6176a3317bed589b7c9" title="nilfs_sufile_do_set\l_error" alt="" coords="863,803,993,845"/>
<area shape="rect" id="node37" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="636,576,763,603"/>
<area shape="rect" id="node41" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="870,195,986,221"/>
<area shape="rect" id="node48" href="sufile_8h.html#a202058a1d5a7ee3658e8e7cda1ffee37" title="nilfs_sufile_trim_fs" alt="" coords="863,2080,993,2107"/>
<area shape="rect" id="node9" href="sufile_8c.html#a7df3cdff37c5aa00cca3458f1d7d400e" title="nilfs_sufile_get_header\l_block" alt="" coords="1075,1478,1229,1519"/>
<area shape="rect" id="node11" href="sufile_8c.html#a38f2abf7ef7577b1af4b9e8fc9316727" title="nilfs_sufile_get_segment\l_usage_block" alt="" coords="1069,1747,1235,1789"/>
<area shape="rect" id="node14" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="1079,1259,1225,1301"/>
<area shape="rect" id="node16" href="sufile_8c.html#a34ecb984fd0f57101d2ee0b4bde4bf95" title="nilfs_sufile_segment\l_usages_in_block" alt="" coords="1081,1966,1223,2007"/>
<area shape="rect" id="node17" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1300,752,1423,779"/>
<area shape="rect" id="node21" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="1081,803,1223,829"/>
<area shape="rect" id="node10" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="1292,1591,1431,1617"/>
<area shape="rect" id="node12" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="1287,1805,1435,1832"/>
<area shape="rect" id="node13" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="1497,1857,1638,1898"/>
<area shape="rect" id="node15" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="1287,1871,1436,1897"/>
<area shape="rect" id="node18" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1507,701,1628,728"/>
<area shape="rect" id="node19" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1500,752,1635,779"/>
<area shape="rect" id="node20" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1498,803,1637,829"/>
<area shape="rect" id="node22" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1326,321,1397,348"/>
<area shape="rect" id="node28" href="the__nilfs_8h.html#a51bb53199a62a87f269e03404136d00f" title="nilfs_segment_is_active" alt="" coords="1071,1595,1233,1621"/>
<area shape="rect" id="node30" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="1069,701,1235,728"/>
<area shape="rect" id="node38" href="the__nilfs_8c.html#aa7bf85e7bb9022b3680b22d945d17f91" title="nilfs_nrsvsegs" alt="" coords="1099,347,1205,373"/>
<area shape="rect" id="node39" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="859,1166,997,1207"/>
<area shape="rect" id="node40" href="the__nilfs_8c.html#a38632ac69509070865038bf0120a1509" title="nilfs_set_nsegments" alt="" coords="857,347,999,373"/>
<area shape="rect" id="node42" href="nilfs2_2inode_8c.html#ae758d8edf633a8af3535ac0af248f1d1" title="nilfs_iget_locked" alt="" coords="1093,93,1211,120"/>
<area shape="rect" id="node43" href="mdt_8c.html#a9d24c6e56a98e581fc30fd8a65841e2a" title="nilfs_mdt_init" alt="" coords="1103,144,1201,171"/>
<area shape="rect" id="node44" href="mdt_8c.html#ae0d853ce1775f22eb93823f6423e6fac" title="nilfs_mdt_set_entry_size" alt="" coords="1484,296,1651,323"/>
<area shape="rect" id="node45" href="nilfs2_2inode_8c.html#affec0e84c605c1d9028332974ba58cd3" title="nilfs_read_inode_common" alt="" coords="1065,296,1239,323"/>
<area shape="rect" id="node46" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="1297,119,1426,145"/>
<area shape="rect" id="node47" href="bad__inode_8c.html#a8c027cf52e2b7669b11b0bfa09bbcd45" title="iget_failed" alt="" coords="1111,195,1193,221"/>
<area shape="rect" id="node49" href="the__nilfs_8h.html#acbe15a8b57f8ecf5e4777294c2f7303d" title="nilfs_get_segnum_of\l_block" alt="" coords="1081,2387,1223,2429"/>
<area shape="rect" id="node50" href="the__nilfs_8h.html#a0dc161eb6c4f6bad9212b67517b46a37" title="nilfs_get_segment_range" alt="" coords="1069,2336,1235,2363"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a7f41bf53459a54ba4c2d14e01aaad2b7_icgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a7f41bf53459a54ba4c2d14e01aaad2b7_icgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a7f41bf53459a54ba4c2d14e01aaad2b7_icgraph" id="nilfs2_2ioctl_8c_a7f41bf53459a54ba4c2d14e01aaad2b7_icgraph">
<area shape="rect" id="node2" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="189,107,267,133"/>
<area shape="rect" id="node3" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="315,81,435,108"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="491,81,605,108"/>
<area shape="rect" id="node9" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="483,132,613,159"/>
<area shape="rect" id="node5" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="666,5,755,32"/>
<area shape="rect" id="node6" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="665,56,757,83"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="661,107,760,133"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="668,157,753,184"/>
</map>
</div>

</div>
</div>
<a id="a879fc213e33210988660173aec449143"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a879fc213e33210988660173aec449143">&#9670;&nbsp;</a></span>nilfs_ioctl_set_suinfo()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_ioctl_set_suinfo </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct file *&#160;</td>
          <td class="paramname"><em>filp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void __user *&#160;</td>
          <td class="paramname"><em>argp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_ioctl_set_suinfo - set segment usage info : inode object : file object : ioctl's request code : pointer on argument from userspace</p>
<p>Description: Expects an array of nilfs_suinfo_update structures encapsulated in nilfs_argv and updates the segment usage info according to the flags in nilfs_suinfo_update.</p>
<p>Return Value: On success, 0 is returned. On error, one of the following negative error codes is returned.</p>
<p>%-EPERM - Not enough permissions</p>
<p>%-EFAULT - Error copying input data</p>
<p>%-EIO - I/O error.</p>
<p>%-ENOMEM - Insufficient amount of memory available.</p>
<p>%-EINVAL - Invalid values in input (segment number, flags or nblocks) </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a879fc213e33210988660173aec449143_cgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a879fc213e33210988660173aec449143_cgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a879fc213e33210988660173aec449143_cgraph" id="nilfs2_2ioctl_8c_a879fc213e33210988660173aec449143_cgraph">
<area shape="rect" id="node2" href="namespace_8c.html#abec48677d6bf1090f17dd8b54cdee81d" title="mnt_want_write_file" alt="" coords="203,120,342,147"/>
<area shape="rect" id="node13" href="nilfs_8h.html#aacff7fe9750a849356475b2063b69e3b" title="nilfs_transaction_begin" alt="" coords="1007,832,1162,859"/>
<area shape="rect" id="node19" href="sufile_8c.html#ac063361c980263bb8906571633cfcf2d" title="nilfs_sufile_set_suinfo" alt="" coords="197,689,348,716"/>
<area shape="rect" id="node37" href="nilfs_8h.html#a576ee8d20fe7a5d7c5889cb118fe0533" title="nilfs_transaction_commit" alt="" coords="1001,1035,1168,1061"/>
<area shape="rect" id="node42" href="nilfs_8h.html#a155140033fba0977ed043367001c3384" title="nilfs_transaction_abort" alt="" coords="1008,933,1161,960"/>
<area shape="rect" id="node48" href="namespace_8c.html#a0ce94dc25dc93a0b5e1a9282e43e0a97" title="mnt_drop_write_file" alt="" coords="412,360,547,387"/>
<area shape="rect" id="node3" href="namespace_8c.html#af19741fc533f0e0a2acda44e925f80eb" title="may_write_real" alt="" coords="424,5,535,32"/>
<area shape="rect" id="node4" href="namespace_8c.html#afc62e617cec97974d570093f778e30e0" title="__mnt_want_write_file" alt="" coords="403,183,555,209"/>
<area shape="rect" id="node10" href="namespace_8c.html#a14b50b29ea751e02e86a7c9a2fa01128" title="EXPORT_SYMBOL_GPL" alt="" coords="1222,107,1394,133"/>
<area shape="rect" id="node5" href="namespace_8c.html#ae8d4c494f66a0cda8744bf47ebeba01f" title="__mnt_want_write" alt="" coords="616,259,744,285"/>
<area shape="rect" id="node12" href="namespace_8c.html#aba77afe1262e538d2854159761e6bcb2" title="mnt_clone_write" alt="" coords="621,183,739,209"/>
<area shape="rect" id="node6" href="mount_8h.html#a799ce35ff6ad0c45266cbe2b631ac610" title="real_mount" alt="" coords="832,259,919,285"/>
<area shape="rect" id="node7" href="namespace_8c.html#a24aaa0bb913baa617bc4d19fad011a99" title="mnt_inc_writers" alt="" coords="818,208,933,235"/>
<area shape="rect" id="node8" href="namespace_8c.html#a1e8eac40e0b14fb052603f900a411760" title="mnt_is_readonly" alt="" coords="817,309,934,336"/>
<area shape="rect" id="node11" href="namespace_8c.html#a6b6223aa5bccbed87645de18e8b0abac" title="mnt_dec_writers" alt="" coords="816,360,935,387"/>
<area shape="rect" id="node9" href="namespace_8c.html#ae435f6295042ca4769078d0b11c47713" title="__mnt_is_readonly" alt="" coords="1019,157,1150,184"/>
<area shape="rect" id="node14" href="nilfs2_2segment_8c.html#ada0ba1bf162679380f6096c9f83b94ea" title="nilfs_prepare_segment_lock" alt="" coords="1216,832,1400,859"/>
<area shape="rect" id="node15" href="the__nilfs_8c.html#a137faca9117bfef2a2264ccf3a9aa809" title="nilfs_near_disk_full" alt="" coords="1241,883,1375,909"/>
<area shape="rect" id="node16" href="sufile_8c.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="1448,883,1631,909"/>
<area shape="rect" id="node17" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="1723,883,1814,909"/>
<area shape="rect" id="node18" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1907,773,2003,800"/>
<area shape="rect" id="node20" href="sufile_8c.html#a7df3cdff37c5aa00cca3458f1d7d400e" title="nilfs_sufile_get_header\l_block" alt="" coords="402,653,557,694"/>
<area shape="rect" id="node21" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="611,705,749,732"/>
<area shape="rect" id="node28" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1247,461,1369,488"/>
<area shape="rect" id="node36" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="1237,563,1379,589"/>
<area shape="rect" id="node43" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="1465,576,1613,603"/>
<area shape="rect" id="node45" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="1235,766,1381,807"/>
<area shape="rect" id="node47" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="396,461,563,488"/>
<area shape="rect" id="node22" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="803,680,948,707"/>
<area shape="rect" id="node26" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="797,731,953,757"/>
<area shape="rect" id="node23" href="mdt_8c.html#a43ded315f7122596d14b88c43fe9c98d" title="nilfs_mdt_submit_block" alt="" coords="1005,680,1164,707"/>
<area shape="rect" id="node24" href="nilfs2_2page_8c.html#aa4a24cc5a684ba71b9e4423f2ea38970" title="nilfs_grab_buffer" alt="" coords="1249,715,1367,741"/>
<area shape="rect" id="node25" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1504,627,1575,653"/>
<area shape="rect" id="node27" href="mdt_8c.html#a759ca943427ead8bb22ecdc82a9338ee" title="nilfs_mdt_insert_new\l_block" alt="" coords="1012,614,1157,655"/>
<area shape="rect" id="node29" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1479,517,1600,544"/>
<area shape="rect" id="node31" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1472,408,1607,435"/>
<area shape="rect" id="node35" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1470,461,1609,488"/>
<area shape="rect" id="node30" href="buffer_8c.html#ae236845de65ed065f74eecf8f6ee9742" title="EXPORT_SYMBOL_GPL" alt="" coords="1683,525,1855,552"/>
<area shape="rect" id="node32" href="fs-writeback_8c.html#af5890cdc0a937a4f944928bd1880d49b" title="block_dump___mark_inode\l_dirty" alt="" coords="1679,329,1859,370"/>
<area shape="rect" id="node33" href="fs-writeback_8c.html#ad0ca24311e1c0ba76d3810d240f72b08" title="locked_inode_to_wb\l_and_lock_list" alt="" coords="1699,394,1839,435"/>
<area shape="rect" id="node34" href="fs-writeback_8c.html#a2a36a21e075aa2a912f5c3cb027692cf" title="inode_io_list_move\l_locked" alt="" coords="1702,459,1835,501"/>
<area shape="rect" id="node38" href="nilfs2_2segment_8c.html#aa55509ef3ea01cc74488f916f1d551f3" title="nilfs_segctor_start\l_timer" alt="" coords="1243,1086,1373,1127"/>
<area shape="rect" id="node39" href="nilfs2_2segment_8c.html#a23c179e5f28f728a442e31641f71c795" title="nilfs_segctor_do_flush" alt="" coords="1232,984,1384,1011"/>
<area shape="rect" id="node40" href="nilfs2_2segment_8c.html#ad8bab60b16b37c93e180e1ea3e1580ad" title="nilfs_construct_segment" alt="" coords="1226,1035,1390,1061"/>
<area shape="rect" id="node41" href="nilfs2_2segment_8c.html#aece5ba8b7c1a8df29083370bfb0f3aad" title="nilfs_segctor_sync" alt="" coords="1474,1035,1605,1061"/>
<area shape="rect" id="node44" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="1698,682,1839,723"/>
<area shape="rect" id="node46" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="1465,748,1614,775"/>
<area shape="rect" id="node49" href="namespace_8c.html#ad990c81af66b82e8c66b009dd531b77b" title="__mnt_drop_write" alt="" coords="617,360,743,387"/>
<area shape="rect" id="node50" href="namespace_8c.html#aaa6b04953fbfe2185e8e0f5431d89c79" title="EXPORT_SYMBOL" alt="" coords="611,309,749,336"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a879fc213e33210988660173aec449143_icgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a879fc213e33210988660173aec449143_icgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a879fc213e33210988660173aec449143_icgraph" id="nilfs2_2ioctl_8c_a879fc213e33210988660173aec449143_icgraph">
<area shape="rect" id="node2" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="197,107,275,133"/>
<area shape="rect" id="node3" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="323,81,443,108"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="499,81,613,108"/>
<area shape="rect" id="node9" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="491,132,621,159"/>
<area shape="rect" id="node5" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="674,5,763,32"/>
<area shape="rect" id="node6" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="673,56,765,83"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="669,107,768,133"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="676,157,761,184"/>
</map>
</div>

</div>
</div>
<a id="a1ad02ae5704ccd6ef70f0c0eb418d4ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ad02ae5704ccd6ef70f0c0eb418d4ac">&#9670;&nbsp;</a></span>nilfs_ioctl_setflags()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_ioctl_setflags </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct file *&#160;</td>
          <td class="paramname"><em>filp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void __user *&#160;</td>
          <td class="paramname"><em>argp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_ioctl_setflags - ioctl to support chattr </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a1ad02ae5704ccd6ef70f0c0eb418d4ac_cgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a1ad02ae5704ccd6ef70f0c0eb418d4ac_cgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a1ad02ae5704ccd6ef70f0c0eb418d4ac_cgraph" id="nilfs2_2ioctl_8c_a1ad02ae5704ccd6ef70f0c0eb418d4ac_cgraph">
<area shape="rect" id="node2" href="inode_8c.html#a2359f9f4ea541a79ff23035a6c89cb03" title="inode_owner_or_capable" alt="" coords="184,98,349,124"/>
<area shape="rect" id="node4" href="namespace_8c.html#abec48677d6bf1090f17dd8b54cdee81d" title="mnt_want_write_file" alt="" coords="197,2140,336,2167"/>
<area shape="rect" id="node8" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="207,1051,327,1078"/>
<area shape="rect" id="node10" href="inode_8c.html#ab2eaca3b9ec87b9dd6568776059cb715" title="current_time" alt="" coords="658,486,753,512"/>
<area shape="rect" id="node11" href="nilfs_8h.html#ad992361808dc77d1402ce35e1ccefc0d" title="nilfs_mark_inode_dirty" alt="" coords="629,1482,781,1508"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1063,1142,1133,1168"/>
<area shape="rect" id="node28" href="nilfs2_2inode_8c.html#a3709db610911a00ce98363ee8d9938fd" title="nilfs_set_inode_flags" alt="" coords="633,435,777,462"/>
<area shape="rect" id="node31" href="nilfs_8h.html#aacff7fe9750a849356475b2063b69e3b" title="nilfs_transaction_begin" alt="" coords="628,1786,783,1812"/>
<area shape="rect" id="node32" href="nilfs_8h.html#a576ee8d20fe7a5d7c5889cb118fe0533" title="nilfs_transaction_commit" alt="" coords="622,1836,789,1863"/>
<area shape="rect" id="node42" href="nilfs_8h.html#aba5331e09f07f496f54e260a9d59789c" title="nilfs_set_transaction_flag" alt="" coords="620,1684,791,1711"/>
<area shape="rect" id="node50" href="namespace_8c.html#a0ce94dc25dc93a0b5e1a9282e43e0a97" title="mnt_drop_write_file" alt="" coords="199,2191,334,2218"/>
<area shape="rect" id="node3" href="debugfs_2inode_8c.html#a16e485b5debd4cd96a200844c38df190" title="EXPORT_SYMBOL" alt="" coords="859,486,997,512"/>
<area shape="rect" id="node5" href="namespace_8c.html#af19741fc533f0e0a2acda44e925f80eb" title="may_write_real" alt="" coords="428,2140,539,2167"/>
<area shape="rect" id="node6" href="namespace_8c.html#afc62e617cec97974d570093f778e30e0" title="__mnt_want_write_file" alt="" coords="407,2191,559,2218"/>
<area shape="rect" id="node7" href="namespace_8c.html#a14b50b29ea751e02e86a7c9a2fa01128" title="EXPORT_SYMBOL_GPL" alt="" coords="397,2242,569,2268"/>
<area shape="rect" id="node9" href="nilfs_8h.html#ae2f258ae9bc693a21d8dfaa98f1a5c2d" title="nilfs_add_link" alt="" coords="433,874,534,900"/>
<area shape="rect" id="node12" href="nilfs_8h.html#a46e169872ed27278f3e5c506282e6ffe" title="__nilfs_mark_inode\l_dirty" alt="" coords="861,1322,995,1364"/>
<area shape="rect" id="node14" href="nilfs_8h.html#a4921cc9c395d4bccf21c9fab807958e2" title="nilfs_inode_by_name" alt="" coords="411,1583,555,1610"/>
<area shape="rect" id="node15" href="nilfs_8h.html#a0b5a6c13f206782e032dce17783e2b3f" title="nilfs_make_empty" alt="" coords="419,1634,547,1660"/>
<area shape="rect" id="node16" href="nilfs_8h.html#a95fc5e85c4eba314d446f9360ad4f941" title="nilfs_find_entry" alt="" coords="873,835,983,862"/>
<area shape="rect" id="node17" href="nilfs_8h.html#a3e382832dc0a0bcaa7b1548042db3258" title="nilfs_delete_entry" alt="" coords="421,250,545,276"/>
<area shape="rect" id="node18" href="nilfs_8h.html#a8b9cb15185d1c143cacce2c35a6ec1e3" title="nilfs_empty_dir" alt="" coords="428,351,539,378"/>
<area shape="rect" id="node19" href="nilfs_8h.html#afc485a03de87f5828fa0b84dec464f58" title="nilfs_dotdot" alt="" coords="439,402,528,428"/>
<area shape="rect" id="node20" href="nilfs_8h.html#a08aeacd7127780bda067e82f9aed21e7" title="nilfs_set_link" alt="" coords="434,300,533,327"/>
<area shape="rect" id="node21" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="431,452,536,479"/>
<area shape="rect" id="node22" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="445,1431,522,1458"/>
<area shape="rect" id="node23" href="nilfs_8h.html#a8098e56658b7f301db310017eb2febc2" title="nilfs_compat_ioctl" alt="" coords="642,1406,769,1432"/>
<area shape="rect" id="node24" href="nilfs_8h.html#aae05e8590cbb2a7f5e5ddc5a9a044a41" title="nilfs_ioctl_prepare\l_clean_segments" alt="" coords="420,504,547,545"/>
<area shape="rect" id="node25" href="nilfs_8h.html#a4c71b629def228b5da94615b61c71844" title="nilfs_inode_add_blocks" alt="" coords="849,950,1007,976"/>
<area shape="rect" id="node26" href="nilfs_8h.html#a0ae8f828aecc4c4ff36c5893608741fc" title="nilfs_inode_sub_blocks" alt="" coords="849,1031,1007,1058"/>
<area shape="rect" id="node27" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="426,722,541,748"/>
<area shape="rect" id="node29" href="nilfs_8h.html#ab0549bcfb2d4c05d48c81fec9e8b666e" title="nilfs_free_inode" alt="" coords="427,570,540,596"/>
<area shape="rect" id="node30" href="nilfs_8h.html#ac6f027abd7712740e465f16c41e7d69e" title="nilfs_get_block" alt="" coords="429,1887,538,1914"/>
<area shape="rect" id="node33" href="nilfs_8h.html#a4c6fe7b3a2114aa02f9e72dff291825b" title="nilfs_set_inode_flags" alt="" coords="856,1083,1000,1110"/>
<area shape="rect" id="node34" href="nilfs_8h.html#a5a108c5a1277a073e6a59f8e283bb072" title="nilfs_read_inode_common" alt="" coords="841,1136,1015,1163"/>
<area shape="rect" id="node35" href="nilfs_8h.html#a124dc262bd3aba953462c70d91c5a8c4" title="nilfs_write_inode_common" alt="" coords="617,1224,793,1251"/>
<area shape="rect" id="node36" href="nilfs_8h.html#a4f88fdc579c23ff4f443113fe7066b31" title="nilfs_ilookup" alt="" coords="436,620,531,647"/>
<area shape="rect" id="node37" href="nilfs_8h.html#ae758d8edf633a8af3535ac0af248f1d1" title="nilfs_iget_locked" alt="" coords="424,671,543,698"/>
<area shape="rect" id="node38" href="nilfs_8h.html#ab64be592aa4e2bde69277e23529d0646" title="nilfs_iget" alt="" coords="446,823,521,850"/>
<area shape="rect" id="node39" href="nilfs_8h.html#ad35645870060c9d83e6c1ca96a402675" title="nilfs_iget_for_gc" alt="" coords="425,975,542,1002"/>
<area shape="rect" id="node40" href="nilfs_8h.html#a033d1115f2e3c0535725dedc0b0e8eec" title="nilfs_update_inode" alt="" coords="863,1250,993,1276"/>
<area shape="rect" id="node41" href="nilfs_8h.html#a09611eebbba5a083ef8bc7e99be0f4a1" title="nilfs_truncate" alt="" coords="433,1532,533,1559"/>
<area shape="rect" id="node43" href="nilfs_8h.html#a83b6688ab0aed44d51559794d660c5ca" title="nilfs_evict_inode" alt="" coords="424,1735,543,1762"/>
<area shape="rect" id="node44" href="nilfs_8h.html#a6397167aefce0988e92601bcc79770d6" title="nilfs_setattr" alt="" coords="438,1786,529,1812"/>
<area shape="rect" id="node45" href="nilfs_8h.html#a5c3f5e67f9f8c1d512363b1b93f23d3a" title="nilfs_write_failed" alt="" coords="424,1178,543,1204"/>
<area shape="rect" id="node46" href="nilfs_8h.html#a96d07c3f360f0e8048851ddacd3010e9" title="nilfs_permission" alt="" coords="647,1938,763,1964"/>
<area shape="rect" id="node47" href="nilfs_8h.html#abf9a4c6110fc70239efa38c7ffa04ec8" title="nilfs_load_inode_block" alt="" coords="851,1988,1005,2015"/>
<area shape="rect" id="node48" href="nilfs_8h.html#a7f6eda390d32838099fe2e4887c9c30f" title="nilfs_inode_dirty" alt="" coords="647,2039,763,2066"/>
<area shape="rect" id="node49" href="nilfs_8h.html#ac5555ab9881841d4884f09d25c9e398d" title="nilfs_set_file_dirty" alt="" coords="865,215,991,242"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a1ad02ae5704ccd6ef70f0c0eb418d4ac_icgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a1ad02ae5704ccd6ef70f0c0eb418d4ac_icgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a1ad02ae5704ccd6ef70f0c0eb418d4ac_icgraph" id="nilfs2_2ioctl_8c_a1ad02ae5704ccd6ef70f0c0eb418d4ac_icgraph">
<area shape="rect" id="node2" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="184,56,261,83"/>
<area shape="rect" id="node3" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="309,81,429,108"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="477,81,592,108"/>
<area shape="rect" id="node5" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="645,5,734,32"/>
<area shape="rect" id="node6" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="643,56,735,83"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="640,107,739,133"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="647,157,732,184"/>
</map>
</div>

</div>
</div>
<a id="a88f66d269c57dae4d6eaf9eae22016b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88f66d269c57dae4d6eaf9eae22016b9">&#9670;&nbsp;</a></span>nilfs_ioctl_sync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_ioctl_sync </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct file *&#160;</td>
          <td class="paramname"><em>filp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void __user *&#160;</td>
          <td class="paramname"><em>argp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_ioctl_sync - make a checkpoint : inode object : file object : ioctl's request code : pointer on argument from userspace</p>
<p>Description: <a class="el" href="nilfs2_2ioctl_8c.html#a88f66d269c57dae4d6eaf9eae22016b9">nilfs_ioctl_sync()</a> function constructs a logical segment for checkpointing. This function guarantees that all modified data and metadata are written out to the device when it successfully returned.</p>
<p>Return Value: On success, 0 is retured. On errors, one of the following negative error code is returned.</p>
<p>%-EROFS - Read only filesystem.</p>
<p>%-EIO - I/O error</p>
<p>%-ENOSPC - No space left on device (only in a panic state).</p>
<p>%-ERESTARTSYS - Interrupted.</p>
<p>%-ENOMEM - Insufficient memory available.</p>
<p>%-EFAULT - Failure during execution of requested operation. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a88f66d269c57dae4d6eaf9eae22016b9_cgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a88f66d269c57dae4d6eaf9eae22016b9_cgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a88f66d269c57dae4d6eaf9eae22016b9_cgraph" id="nilfs2_2ioctl_8c_a88f66d269c57dae4d6eaf9eae22016b9_cgraph">
<area shape="rect" id="node2" href="nilfs2_2segment_8c.html#ad8bab60b16b37c93e180e1ea3e1580ad" title="nilfs_construct_segment" alt="" coords="165,5,329,32"/>
<area shape="rect" id="node4" href="the__nilfs_8h.html#a8f2cf136125bb291f917d2741a2ecdec" title="nilfs_flush_device" alt="" coords="184,56,311,83"/>
<area shape="rect" id="node3" href="nilfs2_2segment_8c.html#aece5ba8b7c1a8df29083370bfb0f3aad" title="nilfs_segctor_sync" alt="" coords="377,5,508,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a88f66d269c57dae4d6eaf9eae22016b9_icgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a88f66d269c57dae4d6eaf9eae22016b9_icgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a88f66d269c57dae4d6eaf9eae22016b9_icgraph" id="nilfs2_2ioctl_8c_a88f66d269c57dae4d6eaf9eae22016b9_icgraph">
<area shape="rect" id="node2" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="165,107,243,133"/>
<area shape="rect" id="node3" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="291,81,411,108"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="467,81,581,108"/>
<area shape="rect" id="node9" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="459,132,589,159"/>
<area shape="rect" id="node5" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="642,5,731,32"/>
<area shape="rect" id="node6" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="641,56,733,83"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="637,107,736,133"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="644,157,729,184"/>
</map>
</div>

</div>
</div>
<a id="a8913a80e32e55bd55c20461949a3e6b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8913a80e32e55bd55c20461949a3e6b6">&#9670;&nbsp;</a></span>nilfs_ioctl_trim_fs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_ioctl_trim_fs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void __user *&#160;</td>
          <td class="paramname"><em>argp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p><a class="el" href="nilfs2_2ioctl_8c.html#a8913a80e32e55bd55c20461949a3e6b6">nilfs_ioctl_trim_fs()</a> - trim ioctl handle function : inode object : pointer on argument from userspace</p>
<p>Decription: nilfs_ioctl_trim_fs is the FITRIM ioctl handle function. It checks the arguments from userspace and calls nilfs_sufile_trim_fs, which performs the actual trim operation.</p>
<p>Return Value: On success, 0 is returned or negative error code, otherwise. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a8913a80e32e55bd55c20461949a3e6b6_cgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a8913a80e32e55bd55c20461949a3e6b6_cgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a8913a80e32e55bd55c20461949a3e6b6_cgraph" id="nilfs2_2ioctl_8c_a8913a80e32e55bd55c20461949a3e6b6_cgraph">
<area shape="rect" id="node2" href="sufile_8c.html#a202058a1d5a7ee3658e8e7cda1ffee37" title="nilfs_sufile_trim_fs" alt="" coords="177,277,308,304"/>
<area shape="rect" id="node3" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="993,161,1089,188"/>
<area shape="rect" id="node4" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033" title="nblocks" alt="" coords="406,336,473,363"/>
<area shape="rect" id="node5" href="the__nilfs_8h.html#acbe15a8b57f8ecf5e4777294c2f7303d" title="nilfs_get_segnum_of\l_block" alt="" coords="368,387,511,429"/>
<area shape="rect" id="node6" href="sufile_8c.html#a34ecb984fd0f57101d2ee0b4bde4bf95" title="nilfs_sufile_segment\l_usages_in_block" alt="" coords="369,205,510,246"/>
<area shape="rect" id="node9" href="sufile_8c.html#a38f2abf7ef7577b1af4b9e8fc9316727" title="nilfs_sufile_get_segment\l_usage_block" alt="" coords="356,270,523,311"/>
<area shape="rect" id="node49" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="366,139,513,181"/>
<area shape="rect" id="node50" href="the__nilfs_8h.html#a0dc161eb6c4f6bad9212b67517b46a37" title="nilfs_get_segment_range" alt="" coords="356,453,523,480"/>
<area shape="rect" id="node7" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="770,213,911,254"/>
<area shape="rect" id="node8" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="571,161,720,188"/>
<area shape="rect" id="node10" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="576,329,715,356"/>
<area shape="rect" id="node48" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="571,277,719,304"/>
<area shape="rect" id="node11" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="768,456,913,483"/>
<area shape="rect" id="node30" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="963,271,1119,297"/>
<area shape="rect" id="node12" href="mdt_8c.html#a43ded315f7122596d14b88c43fe9c98d" title="nilfs_mdt_submit_block" alt="" coords="961,616,1120,643"/>
<area shape="rect" id="node13" href="nilfs2_2page_8c.html#aa4a24cc5a684ba71b9e4423f2ea38970" title="nilfs_grab_buffer" alt="" coords="1192,528,1311,555"/>
<area shape="rect" id="node19" href="buffer_8c.html#a5fc92b2c44523c64e98193eaa4f46541" title="unlock_buffer" alt="" coords="1656,747,1756,773"/>
<area shape="rect" id="node20" href="nilfs2_2bmap_8h.html#a282d60470960949277ac67e31c97f05b" title="nilfs_bmap_lookup" alt="" coords="1186,616,1317,643"/>
<area shape="rect" id="node25" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1671,360,1741,387"/>
<area shape="rect" id="node26" href="buffer_8c.html#ade60786fa99b4fbb4cf607434af395db" title="end_buffer_read_sync" alt="" coords="1176,747,1327,773"/>
<area shape="rect" id="node28" href="buffer_8c.html#ab65df498c54845f497bae7afe9222c91" title="submit_bh" alt="" coords="1210,848,1293,875"/>
<area shape="rect" id="node14" href="nilfs2_2page_8c.html#a051d0268f3af219ba3e2a9ca79a8843c" title="__nilfs_get_page_block" alt="" coords="1395,528,1554,555"/>
<area shape="rect" id="node15" href="buffer_8c.html#a4844b8163e94b4a214fbf85d86fe88d0" title="create_empty_buffers" alt="" coords="1632,579,1780,605"/>
<area shape="rect" id="node17" href="page_8h.html#aaad58f68fa9675f7e9803744d0e3f414" title="nilfs_page_get_nth\l_block" alt="" coords="1641,462,1771,503"/>
<area shape="rect" id="node18" href="buffer_8c.html#a59a45ba914a951c36f0cabe79be9756b" title="touch_buffer" alt="" coords="1659,528,1753,555"/>
<area shape="rect" id="node16" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1845,663,1984,689"/>
<area shape="rect" id="node21" href="nilfs2_2bmap_8h.html#a47e39e91829ba28e44d1b0913f5ef480" title="nilfs_bmap_lookup_at\l_level" alt="" coords="1401,579,1549,621"/>
<area shape="rect" id="node24" href="nilfs2_2bmap_8h.html#abd107e6c373b3d12d3817a32d403001b" title="nilfs_bmap_get_dat" alt="" coords="1407,645,1542,672"/>
<area shape="rect" id="node22" href="nilfs2_2bmap_8c.html#a7a7ea41075313d317e5036ebc1fbbe3b" title="nilfs_bmap_convert\l_error" alt="" coords="1639,630,1773,671"/>
<area shape="rect" id="node23" href="dat_8c.html#a1641d48ed89a1de35dda5513abd31cc3" title="nilfs_dat_translate" alt="" coords="1642,696,1770,723"/>
<area shape="rect" id="node27" href="buffer_8c.html#a85e290b32d9599acd25df3b159392ab7" title="__end_buffer_read_notouch" alt="" coords="1383,747,1566,773"/>
<area shape="rect" id="node29" href="buffer_8c.html#a5fd6f01c5f9cff0945cb999cbefa412d" title="submit_bh_wbc" alt="" coords="1418,899,1531,925"/>
<area shape="rect" id="node31" href="nilfs_8h.html#aacff7fe9750a849356475b2063b69e3b" title="nilfs_transaction_begin" alt="" coords="1174,84,1329,111"/>
<area shape="rect" id="node35" href="mdt_8c.html#a759ca943427ead8bb22ecdc82a9338ee" title="nilfs_mdt_insert_new\l_block" alt="" coords="1179,318,1324,359"/>
<area shape="rect" id="node42" href="nilfs_8h.html#a576ee8d20fe7a5d7c5889cb118fe0533" title="nilfs_transaction_commit" alt="" coords="1168,189,1335,216"/>
<area shape="rect" id="node47" href="nilfs_8h.html#a155140033fba0977ed043367001c3384" title="nilfs_transaction_abort" alt="" coords="1175,33,1328,60"/>
<area shape="rect" id="node32" href="nilfs2_2segment_8c.html#ada0ba1bf162679380f6096c9f83b94ea" title="nilfs_prepare_segment_lock" alt="" coords="1383,5,1567,32"/>
<area shape="rect" id="node33" href="the__nilfs_8c.html#a137faca9117bfef2a2264ccf3a9aa809" title="nilfs_near_disk_full" alt="" coords="1408,56,1541,83"/>
<area shape="rect" id="node34" href="sufile_8c.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="1615,56,1797,83"/>
<area shape="rect" id="node36" href="nilfs2_2bmap_8c.html#a4e7fd87b553f99a5d10b2f1d0cbbec0b" title="nilfs_bmap_insert" alt="" coords="1413,477,1537,504"/>
<area shape="rect" id="node38" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1413,275,1536,301"/>
<area shape="rect" id="node41" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="1403,376,1546,403"/>
<area shape="rect" id="node37" href="nilfs2_2bmap_8c.html#ac5f71baa604f8d2043ceb4c11aa72ff3" title="nilfs_bmap_do_insert" alt="" coords="1633,411,1779,437"/>
<area shape="rect" id="node39" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1645,208,1767,235"/>
<area shape="rect" id="node40" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1639,259,1773,285"/>
<area shape="rect" id="node43" href="nilfs2_2segment_8c.html#aa55509ef3ea01cc74488f916f1d551f3" title="nilfs_segctor_start\l_timer" alt="" coords="1410,209,1539,250"/>
<area shape="rect" id="node44" href="nilfs2_2segment_8c.html#a23c179e5f28f728a442e31641f71c795" title="nilfs_segctor_do_flush" alt="" coords="1399,107,1551,133"/>
<area shape="rect" id="node45" href="nilfs2_2segment_8c.html#ad8bab60b16b37c93e180e1ea3e1580ad" title="nilfs_construct_segment" alt="" coords="1393,157,1557,184"/>
<area shape="rect" id="node46" href="nilfs2_2segment_8c.html#aece5ba8b7c1a8df29083370bfb0f3aad" title="nilfs_segctor_sync" alt="" coords="1641,157,1771,184"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a8913a80e32e55bd55c20461949a3e6b6_icgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a8913a80e32e55bd55c20461949a3e6b6_icgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a8913a80e32e55bd55c20461949a3e6b6_icgraph" id="nilfs2_2ioctl_8c_a8913a80e32e55bd55c20461949a3e6b6_icgraph">
<area shape="rect" id="node2" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="177,107,255,133"/>
<area shape="rect" id="node3" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="303,81,423,108"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="479,81,593,108"/>
<area shape="rect" id="node9" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="471,132,601,159"/>
<area shape="rect" id="node5" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="654,5,743,32"/>
<area shape="rect" id="node6" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="653,56,745,83"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="649,107,748,133"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="656,157,741,184"/>
</map>
</div>

</div>
</div>
<a id="a3626cb1946214b98710af19046930e2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3626cb1946214b98710af19046930e2b">&#9670;&nbsp;</a></span>nilfs_ioctl_wrap_copy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_ioctl_wrap_copy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *&#160;</td>
          <td class="paramname"><em>nilfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct nilfs_argv *&#160;</td>
          <td class="paramname"><em>argv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ssize_t(*)(struct <a class="el" href="structthe__nilfs.html">the_nilfs</a> *, __u64 *, int, void *, size_t, size_t)&#160;</td>
          <td class="paramname"><em>dofunc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2ioctl_8c_a3626cb1946214b98710af19046930e2b_icgraph.png" border="0" usemap="#nilfs2_2ioctl_8c_a3626cb1946214b98710af19046930e2b_icgraph" alt=""/></div>
<map name="nilfs2_2ioctl_8c_a3626cb1946214b98710af19046930e2b_icgraph" id="nilfs2_2ioctl_8c_a3626cb1946214b98710af19046930e2b_icgraph">
<area shape="rect" id="node2" href="nilfs2_2ioctl_8c.html#ae74437bf40467cd7ef392867b1506518" title="nilfs_ioctl_get_bdescs" alt="" coords="200,81,351,108"/>
<area shape="rect" id="node11" href="nilfs2_2ioctl_8c.html#ae948a990322013d9aaff456311e9b7bd" title="nilfs_ioctl_get_info" alt="" coords="210,132,341,159"/>
<area shape="rect" id="node3" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="399,107,476,133"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="524,81,644,108"/>
<area shape="rect" id="node5" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="700,81,815,108"/>
<area shape="rect" id="node10" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="692,132,823,159"/>
<area shape="rect" id="node6" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="875,5,965,32"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="874,56,966,83"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="871,107,969,133"/>
<area shape="rect" id="node9" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="877,157,963,184"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_8fac9e178a1e3eec5aa774d52dddfbee.html">nilfs2</a></li><li class="navelem"><a class="el" href="nilfs2_2ioctl_8c.html">ioctl.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>linux/fs: ubifs/budget.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">linux/fs
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('budget_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">budget.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="ubifs_8h_source.html">ubifs.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for budget.c:</div>
<div class="dyncontent">
<div class="center"><img src="budget_8c__incl.png" border="0" usemap="#ubifs_2budget_8c" alt=""/></div>
<map name="ubifs_2budget_8c" id="ubifs_2budget_8c">
<area shape="rect" id="node2" href="ubifs_8h.html" title="ubifs.h" alt="" coords="1225,80,1287,107"/>
<area shape="rect" id="node20" href="ubifs-media_8h.html" title="ubifs&#45;media.h" alt="" coords="2143,155,2243,181"/>
<area shape="rect" id="node21" href="ubifs_2debug_8h.html" title="debug.h" alt="" coords="2267,155,2335,181"/>
<area shape="rect" id="node22" href="misc_8h.html" title="misc.h" alt="" coords="2360,155,2421,181"/>
<area shape="rect" id="node23" href="key_8h.html" title="key.h" alt="" coords="2446,155,2501,181"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a86d591c657c803075a7270c12b4f25e1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="budget_8c.html#a86d591c657c803075a7270c12b4f25e1">shrink_liability</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, int nr_to_write)</td></tr>
<tr class="separator:a86d591c657c803075a7270c12b4f25e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ccd81c906fb851139ba3da031d26f12"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="budget_8c.html#a5ccd81c906fb851139ba3da031d26f12">run_gc</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:a5ccd81c906fb851139ba3da031d26f12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6ffce775afbdd84428a42c48116af4d"><td class="memItemLeft" align="right" valign="top">static long long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="budget_8c.html#af6ffce775afbdd84428a42c48116af4d">get_liability</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:af6ffce775afbdd84428a42c48116af4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81a06ebf4e0ee67caf867120d2110e8b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b">make_free_space</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:a81a06ebf4e0ee67caf867120d2110e8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6109e1d36eaa593c345944d0d4b30745"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="budget_8c.html#a6109e1d36eaa593c345944d0d4b30745">ubifs_calc_min_idx_lebs</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:a6109e1d36eaa593c345944d0d4b30745"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaa1427281786d8bfca793236b5f0457"><td class="memItemLeft" align="right" valign="top">long long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="budget_8c.html#adaa1427281786d8bfca793236b5f0457">ubifs_calc_available</a> (const struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, int min_idx_lebs)</td></tr>
<tr class="separator:adaa1427281786d8bfca793236b5f0457"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2defe97e005967f0deab94271d273ff1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="budget_8c.html#a2defe97e005967f0deab94271d273ff1">can_use_rp</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:a2defe97e005967f0deab94271d273ff1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0376da215ef10226bf8949db1efe446"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="budget_8c.html#ae0376da215ef10226bf8949db1efe446">do_budget_space</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:ae0376da215ef10226bf8949db1efe446"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3fe021e20fd3d248577fe5d2623ad96"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="budget_8c.html#ac3fe021e20fd3d248577fe5d2623ad96">calc_idx_growth</a> (const struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, const struct <a class="el" href="structubifs__budget__req.html">ubifs_budget_req</a> *req)</td></tr>
<tr class="separator:ac3fe021e20fd3d248577fe5d2623ad96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7fb821f0bda60b202ba1bd7b8445634"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="budget_8c.html#ae7fb821f0bda60b202ba1bd7b8445634">calc_data_growth</a> (const struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, const struct <a class="el" href="structubifs__budget__req.html">ubifs_budget_req</a> *req)</td></tr>
<tr class="separator:ae7fb821f0bda60b202ba1bd7b8445634"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad59159f2a92429bd81d6bcb530d7c5c5"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="budget_8c.html#ad59159f2a92429bd81d6bcb530d7c5c5">calc_dd_growth</a> (const struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, const struct <a class="el" href="structubifs__budget__req.html">ubifs_budget_req</a> *req)</td></tr>
<tr class="separator:ad59159f2a92429bd81d6bcb530d7c5c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97c8a1e101f1eb52eafc1200ef0544ae"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="budget_8c.html#a97c8a1e101f1eb52eafc1200ef0544ae">ubifs_budget_space</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, struct <a class="el" href="structubifs__budget__req.html">ubifs_budget_req</a> *req)</td></tr>
<tr class="separator:a97c8a1e101f1eb52eafc1200ef0544ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb4a050131358f08985939fa532bc694"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="budget_8c.html#afb4a050131358f08985939fa532bc694">ubifs_release_budget</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, struct <a class="el" href="structubifs__budget__req.html">ubifs_budget_req</a> *req)</td></tr>
<tr class="separator:afb4a050131358f08985939fa532bc694"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5dcf8189b7afa1fce3cb515f617feb84"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="budget_8c.html#a5dcf8189b7afa1fce3cb515f617feb84">ubifs_convert_page_budget</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:a5dcf8189b7afa1fce3cb515f617feb84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42a33c943c4f8862342d84cc1b152182"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="budget_8c.html#a42a33c943c4f8862342d84cc1b152182">ubifs_release_dirty_inode_budget</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, struct <a class="el" href="structubifs__inode.html">ubifs_inode</a> *ui)</td></tr>
<tr class="separator:a42a33c943c4f8862342d84cc1b152182"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66e49aaeea4680a7b2c9973ba0dde86c"><td class="memItemLeft" align="right" valign="top">long long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="budget_8c.html#a66e49aaeea4680a7b2c9973ba0dde86c">ubifs_reported_space</a> (const struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, long long <a class="el" href="cifspdu_8h.html#a29e94a3da97728e39afcbafa40610788">free</a>)</td></tr>
<tr class="separator:a66e49aaeea4680a7b2c9973ba0dde86c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6323235e83f399d119f1deb54fa2f144"><td class="memItemLeft" align="right" valign="top">long long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="budget_8c.html#a6323235e83f399d119f1deb54fa2f144">ubifs_get_free_space_nolock</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:a6323235e83f399d119f1deb54fa2f144"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88a8f2bce74b5f5ab48b7afa5b8ce02a"><td class="memItemLeft" align="right" valign="top">long long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="budget_8c.html#a88a8f2bce74b5f5ab48b7afa5b8ce02a">ubifs_get_free_space</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:a88a8f2bce74b5f5ab48b7afa5b8ce02a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ae7fb821f0bda60b202ba1bd7b8445634"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7fb821f0bda60b202ba1bd7b8445634">&#9670;&nbsp;</a></span>calc_data_growth()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int calc_data_growth </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structubifs__budget__req.html">ubifs_budget_req</a> *&#160;</td>
          <td class="paramname"><em>req</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>calc_data_growth - calculate approximate amount of new data from budgeting request. <code></code>: UBIFS file-system description object : budgeting request </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="budget_8c_ae7fb821f0bda60b202ba1bd7b8445634_icgraph.png" border="0" usemap="#budget_8c_ae7fb821f0bda60b202ba1bd7b8445634_icgraph" alt=""/></div>
<map name="budget_8c_ae7fb821f0bda60b202ba1bd7b8445634_icgraph" id="budget_8c_ae7fb821f0bda60b202ba1bd7b8445634_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="181,579,319,605"/>
<area shape="rect" id="node34" href="ubifs_8h.html#afb4a050131358f08985939fa532bc694" title="ubifs_release_budget" alt="" coords="177,1364,323,1391"/>
<area shape="rect" id="node3" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="988,1219,1079,1245"/>
<area shape="rect" id="node8" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="410,883,507,909"/>
<area shape="rect" id="node9" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="409,528,508,555"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="987,671,1080,697"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="992,1269,1075,1296"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1145,1472,1232,1499"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="995,1320,1072,1347"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="988,1371,1079,1397"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="990,1421,1077,1448"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="989,305,1078,332"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="985,387,1081,413"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="982,499,1085,525"/>
<area shape="rect" id="node21" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="615,1219,737,1245"/>
<area shape="rect" id="node23" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="402,731,515,757"/>
<area shape="rect" id="node24" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="983,1168,1083,1195"/>
<area shape="rect" id="node26" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="419,579,499,605"/>
<area shape="rect" id="node27" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="379,984,539,1011"/>
<area shape="rect" id="node28" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="621,864,731,891"/>
<area shape="rect" id="node30" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="595,1320,757,1347"/>
<area shape="rect" id="node31" href="ubifs_2ioctl_8c.html#a06251cc4602342e44b5ed0a1b39f7e60" title="setflags" alt="" coords="425,781,493,808"/>
<area shape="rect" id="node4" href="ubifs_2xattr_8c.html#a2c0f8e28d408b8e89b4ce7d6047af912" title="ubifs_xattr_set" alt="" coords="1135,793,1243,820"/>
<area shape="rect" id="node5" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1305,347,1438,373"/>
<area shape="rect" id="node6" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="1500,571,1573,597"/>
<area shape="rect" id="node7" href="ubifs_2crypto_8c.html#a4984848c1f6ebc630f98d30a9bbf2ed3" title="ubifs_crypt_set_context" alt="" coords="1291,743,1452,769"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="1141,1269,1237,1296"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="1321,1497,1421,1524"/>
<area shape="rect" id="node22" href="ubifs_2file_8c.html#a63bbd02975453f3f42af79e561948912" title="ubifs_write_begin" alt="" coords="807,1016,930,1043"/>
<area shape="rect" id="node25" href="ubifs_8h.html#aaebf1c80e366c0f2702f58b91d7a9d38" title="ubifs_setattr" alt="" coords="1141,397,1236,424"/>
<area shape="rect" id="node29" href="ubifs_2file_8c.html#a8cca742dfff2189dce5332cb5f013793" title="ubifs_write_iter" alt="" coords="813,864,924,891"/>
<area shape="rect" id="node32" href="ubifs_8h.html#a9831447969acb35c927f7530bc47158e" title="ubifs_ioctl" alt="" coords="635,805,717,832"/>
<area shape="rect" id="node33" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="805,275,932,301"/>
<area shape="rect" id="node35" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="980,1560,1087,1587"/>
<area shape="rect" id="node36" href="ubifs_2file_8c.html#a01989f957629450ab7009eb5df5129a9" title="release_new_page_budget" alt="" coords="371,1557,547,1584"/>
<area shape="rect" id="node42" href="ubifs_2file_8c.html#adcc5939bd48e791a796e320711c9fd84" title="release_existing_page\l_budget" alt="" coords="383,1609,534,1650"/>
<area shape="rect" id="node43" href="ubifs_8h.html#a42a33c943c4f8862342d84cc1b152182" title="ubifs_release_dirty\l_inode_budget" alt="" coords="393,1491,524,1533"/>
<area shape="rect" id="node37" href="ubifs_2file_8c.html#a6e8d6bd20f19e6df845b44c32800a704" title="cancel_budget" alt="" coords="623,1472,729,1499"/>
<area shape="rect" id="node39" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="627,1573,725,1600"/>
<area shape="rect" id="node41" href="ubifs_2file_8c.html#aa4c1180586f8cacea1cd78baabb7594a" title="ubifs_invalidatepage" alt="" coords="606,1624,746,1651"/>
<area shape="rect" id="node38" href="ubifs_2file_8c.html#ad4a3e116a3a56c3a7ffded1d91b0c564" title="ubifs_write_end" alt="" coords="812,1269,925,1296"/>
<area shape="rect" id="node40" href="ubifs_2file_8c.html#a2ad22c013a0dccfd9f49e114ed89dfa6" title="ubifs_writepage" alt="" coords="812,1611,925,1637"/>
<area shape="rect" id="node44" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="615,1421,737,1448"/>
<area shape="rect" id="node45" href="ubifs_2super_8c.html#a063c51fb658c01f325e4a0744d2f28ce" title="ubifs_evict_inode" alt="" coords="615,1371,737,1397"/>
<area shape="rect" id="node46" href="ubifs_2journal_8c.html#aed47b114c8f20052b62f78e27cbada07" title="mark_inode_clean" alt="" coords="613,1523,739,1549"/>
<area shape="rect" id="node47" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="811,1371,927,1397"/>
<area shape="rect" id="node48" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="805,1560,932,1587"/>
<area shape="rect" id="node49" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="809,1459,929,1485"/>
<area shape="rect" id="node50" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="807,1320,931,1347"/>
</map>
</div>

</div>
</div>
<a id="ad59159f2a92429bd81d6bcb530d7c5c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad59159f2a92429bd81d6bcb530d7c5c5">&#9670;&nbsp;</a></span>calc_dd_growth()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int calc_dd_growth </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structubifs__budget__req.html">ubifs_budget_req</a> *&#160;</td>
          <td class="paramname"><em>req</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>calc_dd_growth - calculate approximate amount of data which makes other data dirty from budgeting request. <code></code>: UBIFS file-system description object : budgeting request </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="budget_8c_ad59159f2a92429bd81d6bcb530d7c5c5_icgraph.png" border="0" usemap="#budget_8c_ad59159f2a92429bd81d6bcb530d7c5c5_icgraph" alt=""/></div>
<map name="budget_8c_ad59159f2a92429bd81d6bcb530d7c5c5_icgraph" id="budget_8c_ad59159f2a92429bd81d6bcb530d7c5c5_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="170,579,309,605"/>
<area shape="rect" id="node34" href="ubifs_8h.html#afb4a050131358f08985939fa532bc694" title="ubifs_release_budget" alt="" coords="167,1364,312,1391"/>
<area shape="rect" id="node3" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="977,1219,1068,1245"/>
<area shape="rect" id="node8" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="399,883,497,909"/>
<area shape="rect" id="node9" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="399,528,497,555"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="976,671,1069,697"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="981,1269,1064,1296"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1135,1472,1221,1499"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="984,1320,1061,1347"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="977,1371,1068,1397"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="979,1421,1066,1448"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="978,305,1067,332"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="975,387,1071,413"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="971,499,1074,525"/>
<area shape="rect" id="node21" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="604,1219,727,1245"/>
<area shape="rect" id="node23" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="391,731,505,757"/>
<area shape="rect" id="node24" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="973,1168,1073,1195"/>
<area shape="rect" id="node26" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="408,579,488,605"/>
<area shape="rect" id="node27" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="368,984,528,1011"/>
<area shape="rect" id="node28" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="610,864,721,891"/>
<area shape="rect" id="node30" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="584,1320,747,1347"/>
<area shape="rect" id="node31" href="ubifs_2ioctl_8c.html#a06251cc4602342e44b5ed0a1b39f7e60" title="setflags" alt="" coords="414,781,482,808"/>
<area shape="rect" id="node4" href="ubifs_2xattr_8c.html#a2c0f8e28d408b8e89b4ce7d6047af912" title="ubifs_xattr_set" alt="" coords="1124,793,1232,820"/>
<area shape="rect" id="node5" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1294,347,1427,373"/>
<area shape="rect" id="node6" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="1489,571,1563,597"/>
<area shape="rect" id="node7" href="ubifs_2crypto_8c.html#a4984848c1f6ebc630f98d30a9bbf2ed3" title="ubifs_crypt_set_context" alt="" coords="1280,743,1441,769"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="1130,1269,1226,1296"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="1311,1497,1411,1524"/>
<area shape="rect" id="node22" href="ubifs_2file_8c.html#a63bbd02975453f3f42af79e561948912" title="ubifs_write_begin" alt="" coords="797,1016,919,1043"/>
<area shape="rect" id="node25" href="ubifs_8h.html#aaebf1c80e366c0f2702f58b91d7a9d38" title="ubifs_setattr" alt="" coords="1131,397,1225,424"/>
<area shape="rect" id="node29" href="ubifs_2file_8c.html#a8cca742dfff2189dce5332cb5f013793" title="ubifs_write_iter" alt="" coords="803,864,913,891"/>
<area shape="rect" id="node32" href="ubifs_8h.html#a9831447969acb35c927f7530bc47158e" title="ubifs_ioctl" alt="" coords="625,805,706,832"/>
<area shape="rect" id="node33" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="795,275,921,301"/>
<area shape="rect" id="node35" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="969,1560,1076,1587"/>
<area shape="rect" id="node36" href="ubifs_2file_8c.html#a01989f957629450ab7009eb5df5129a9" title="release_new_page_budget" alt="" coords="360,1557,536,1584"/>
<area shape="rect" id="node42" href="ubifs_2file_8c.html#adcc5939bd48e791a796e320711c9fd84" title="release_existing_page\l_budget" alt="" coords="373,1609,523,1650"/>
<area shape="rect" id="node43" href="ubifs_8h.html#a42a33c943c4f8862342d84cc1b152182" title="ubifs_release_dirty\l_inode_budget" alt="" coords="383,1491,513,1533"/>
<area shape="rect" id="node37" href="ubifs_2file_8c.html#a6e8d6bd20f19e6df845b44c32800a704" title="cancel_budget" alt="" coords="612,1472,719,1499"/>
<area shape="rect" id="node39" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="616,1573,715,1600"/>
<area shape="rect" id="node41" href="ubifs_2file_8c.html#aa4c1180586f8cacea1cd78baabb7594a" title="ubifs_invalidatepage" alt="" coords="595,1624,735,1651"/>
<area shape="rect" id="node38" href="ubifs_2file_8c.html#ad4a3e116a3a56c3a7ffded1d91b0c564" title="ubifs_write_end" alt="" coords="801,1269,915,1296"/>
<area shape="rect" id="node40" href="ubifs_2file_8c.html#a2ad22c013a0dccfd9f49e114ed89dfa6" title="ubifs_writepage" alt="" coords="801,1611,915,1637"/>
<area shape="rect" id="node44" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="604,1421,727,1448"/>
<area shape="rect" id="node45" href="ubifs_2super_8c.html#a063c51fb658c01f325e4a0744d2f28ce" title="ubifs_evict_inode" alt="" coords="604,1371,727,1397"/>
<area shape="rect" id="node46" href="ubifs_2journal_8c.html#aed47b114c8f20052b62f78e27cbada07" title="mark_inode_clean" alt="" coords="602,1523,729,1549"/>
<area shape="rect" id="node47" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="800,1371,916,1397"/>
<area shape="rect" id="node48" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="795,1560,921,1587"/>
<area shape="rect" id="node49" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="798,1459,918,1485"/>
<area shape="rect" id="node50" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="796,1320,920,1347"/>
</map>
</div>

</div>
</div>
<a id="ac3fe021e20fd3d248577fe5d2623ad96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3fe021e20fd3d248577fe5d2623ad96">&#9670;&nbsp;</a></span>calc_idx_growth()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int calc_idx_growth </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structubifs__budget__req.html">ubifs_budget_req</a> *&#160;</td>
          <td class="paramname"><em>req</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>calc_idx_growth - calculate approximate index growth from budgeting request. <code></code>: UBIFS file-system description object : budgeting request</p>
<p>For now we assume each new node adds one znode. But this is rather poor approximation, though. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="budget_8c_ac3fe021e20fd3d248577fe5d2623ad96_icgraph.png" border="0" usemap="#budget_8c_ac3fe021e20fd3d248577fe5d2623ad96_icgraph" alt=""/></div>
<map name="budget_8c_ac3fe021e20fd3d248577fe5d2623ad96_icgraph" id="budget_8c_ac3fe021e20fd3d248577fe5d2623ad96_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="173,579,311,605"/>
<area shape="rect" id="node34" href="ubifs_8h.html#afb4a050131358f08985939fa532bc694" title="ubifs_release_budget" alt="" coords="169,1364,315,1391"/>
<area shape="rect" id="node3" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="980,1219,1071,1245"/>
<area shape="rect" id="node8" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="402,883,499,909"/>
<area shape="rect" id="node9" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="401,528,500,555"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="979,671,1072,697"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="984,1269,1067,1296"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1137,1472,1224,1499"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="987,1320,1064,1347"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="980,1371,1071,1397"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="982,1421,1069,1448"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="981,305,1070,332"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="977,387,1073,413"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="974,499,1077,525"/>
<area shape="rect" id="node21" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="607,1219,729,1245"/>
<area shape="rect" id="node23" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="394,731,507,757"/>
<area shape="rect" id="node24" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="975,1168,1075,1195"/>
<area shape="rect" id="node26" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="411,579,491,605"/>
<area shape="rect" id="node27" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="371,984,531,1011"/>
<area shape="rect" id="node28" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="613,864,723,891"/>
<area shape="rect" id="node30" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="587,1320,749,1347"/>
<area shape="rect" id="node31" href="ubifs_2ioctl_8c.html#a06251cc4602342e44b5ed0a1b39f7e60" title="setflags" alt="" coords="417,781,485,808"/>
<area shape="rect" id="node4" href="ubifs_2xattr_8c.html#a2c0f8e28d408b8e89b4ce7d6047af912" title="ubifs_xattr_set" alt="" coords="1127,793,1235,820"/>
<area shape="rect" id="node5" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1297,347,1430,373"/>
<area shape="rect" id="node6" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="1492,571,1565,597"/>
<area shape="rect" id="node7" href="ubifs_2crypto_8c.html#a4984848c1f6ebc630f98d30a9bbf2ed3" title="ubifs_crypt_set_context" alt="" coords="1283,743,1444,769"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="1133,1269,1229,1296"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="1313,1497,1413,1524"/>
<area shape="rect" id="node22" href="ubifs_2file_8c.html#a63bbd02975453f3f42af79e561948912" title="ubifs_write_begin" alt="" coords="799,1016,922,1043"/>
<area shape="rect" id="node25" href="ubifs_8h.html#aaebf1c80e366c0f2702f58b91d7a9d38" title="ubifs_setattr" alt="" coords="1133,397,1228,424"/>
<area shape="rect" id="node29" href="ubifs_2file_8c.html#a8cca742dfff2189dce5332cb5f013793" title="ubifs_write_iter" alt="" coords="805,864,916,891"/>
<area shape="rect" id="node32" href="ubifs_8h.html#a9831447969acb35c927f7530bc47158e" title="ubifs_ioctl" alt="" coords="627,805,709,832"/>
<area shape="rect" id="node33" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="797,275,924,301"/>
<area shape="rect" id="node35" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="972,1560,1079,1587"/>
<area shape="rect" id="node36" href="ubifs_2file_8c.html#a01989f957629450ab7009eb5df5129a9" title="release_new_page_budget" alt="" coords="363,1557,539,1584"/>
<area shape="rect" id="node42" href="ubifs_2file_8c.html#adcc5939bd48e791a796e320711c9fd84" title="release_existing_page\l_budget" alt="" coords="375,1609,526,1650"/>
<area shape="rect" id="node43" href="ubifs_8h.html#a42a33c943c4f8862342d84cc1b152182" title="ubifs_release_dirty\l_inode_budget" alt="" coords="385,1491,516,1533"/>
<area shape="rect" id="node37" href="ubifs_2file_8c.html#a6e8d6bd20f19e6df845b44c32800a704" title="cancel_budget" alt="" coords="615,1472,721,1499"/>
<area shape="rect" id="node39" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="619,1573,717,1600"/>
<area shape="rect" id="node41" href="ubifs_2file_8c.html#aa4c1180586f8cacea1cd78baabb7594a" title="ubifs_invalidatepage" alt="" coords="598,1624,738,1651"/>
<area shape="rect" id="node38" href="ubifs_2file_8c.html#ad4a3e116a3a56c3a7ffded1d91b0c564" title="ubifs_write_end" alt="" coords="804,1269,917,1296"/>
<area shape="rect" id="node40" href="ubifs_2file_8c.html#a2ad22c013a0dccfd9f49e114ed89dfa6" title="ubifs_writepage" alt="" coords="804,1611,917,1637"/>
<area shape="rect" id="node44" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="607,1421,729,1448"/>
<area shape="rect" id="node45" href="ubifs_2super_8c.html#a063c51fb658c01f325e4a0744d2f28ce" title="ubifs_evict_inode" alt="" coords="607,1371,729,1397"/>
<area shape="rect" id="node46" href="ubifs_2journal_8c.html#aed47b114c8f20052b62f78e27cbada07" title="mark_inode_clean" alt="" coords="605,1523,731,1549"/>
<area shape="rect" id="node47" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="803,1371,919,1397"/>
<area shape="rect" id="node48" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="797,1560,924,1587"/>
<area shape="rect" id="node49" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="801,1459,921,1485"/>
<area shape="rect" id="node50" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="799,1320,923,1347"/>
</map>
</div>

</div>
</div>
<a id="a2defe97e005967f0deab94271d273ff1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2defe97e005967f0deab94271d273ff1">&#9670;&nbsp;</a></span>can_use_rp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int can_use_rp </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>can_use_rp - check whether the user is allowed to use reserved pool. <code></code>: UBIFS file-system description object</p>
<p>UBIFS has so-called "reserved pool" which is flash space reserved for the superuser and for uses whose UID/GID is recorded in UBIFS superblock. This function checks whether current user is allowed to use reserved pool. Returns %1 current user is allowed to use reserved pool and %0 otherwise. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="budget_8c_a2defe97e005967f0deab94271d273ff1_icgraph.png" border="0" usemap="#budget_8c_a2defe97e005967f0deab94271d273ff1_icgraph" alt=""/></div>
<map name="budget_8c_a2defe97e005967f0deab94271d273ff1_icgraph" id="budget_8c_a2defe97e005967f0deab94271d273ff1_icgraph">
<area shape="rect" id="node2" href="budget_8c.html#ae0376da215ef10226bf8949db1efe446" title="do_budget_space" alt="" coords="143,536,267,563"/>
<area shape="rect" id="node3" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="315,511,453,537"/>
<area shape="rect" id="node4" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="536,5,627,32"/>
<area shape="rect" id="node9" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="533,56,630,83"/>
<area shape="rect" id="node10" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="951,107,1050,133"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1149,176,1243,203"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1155,283,1237,309"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1315,409,1402,436"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="543,536,620,563"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="536,587,627,613"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="538,637,625,664"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1151,333,1241,360"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1148,384,1244,411"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1145,435,1247,461"/>
<area shape="rect" id="node22" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="520,688,643,715"/>
<area shape="rect" id="node24" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="525,739,638,765"/>
<area shape="rect" id="node25" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="531,789,631,816"/>
<area shape="rect" id="node27" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="541,840,621,867"/>
<area shape="rect" id="node28" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="501,941,661,968"/>
<area shape="rect" id="node29" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="735,916,846,943"/>
<area shape="rect" id="node31" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="709,979,872,1005"/>
<area shape="rect" id="node32" href="ubifs_2ioctl_8c.html#a06251cc4602342e44b5ed0a1b39f7e60" title="setflags" alt="" coords="547,283,615,309"/>
<area shape="rect" id="node5" href="ubifs_2xattr_8c.html#a2c0f8e28d408b8e89b4ce7d6047af912" title="ubifs_xattr_set" alt="" coords="737,5,845,32"/>
<area shape="rect" id="node6" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1129,88,1263,115"/>
<area shape="rect" id="node7" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="1322,12,1395,39"/>
<area shape="rect" id="node8" href="ubifs_2crypto_8c.html#a4984848c1f6ebc630f98d30a9bbf2ed3" title="ubifs_crypt_set_context" alt="" coords="920,56,1081,83"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="1311,283,1407,309"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="1455,409,1555,436"/>
<area shape="rect" id="node23" href="ubifs_2file_8c.html#a63bbd02975453f3f42af79e561948912" title="ubifs_write_begin" alt="" coords="729,713,852,740"/>
<area shape="rect" id="node26" href="ubifs_8h.html#aaebf1c80e366c0f2702f58b91d7a9d38" title="ubifs_setattr" alt="" coords="743,815,838,841"/>
<area shape="rect" id="node30" href="ubifs_2file_8c.html#a8cca742dfff2189dce5332cb5f013793" title="ubifs_write_iter" alt="" coords="945,916,1056,943"/>
<area shape="rect" id="node33" href="ubifs_8h.html#a9831447969acb35c927f7530bc47158e" title="ubifs_ioctl" alt="" coords="750,283,831,309"/>
<area shape="rect" id="node34" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="937,283,1064,309"/>
</map>
</div>

</div>
</div>
<a id="ae0376da215ef10226bf8949db1efe446"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0376da215ef10226bf8949db1efe446">&#9670;&nbsp;</a></span>do_budget_space()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int do_budget_space </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>do_budget_space - reserve flash space for index and data growth. <code></code>: UBIFS file-system description object</p>
<p>This function makes sure UBIFS has enough free LEBs for index growth and data.</p>
<p>When budgeting index space, UBIFS reserves thrice as many LEBs as the index would take if it was consolidated and written to the flash. This guarantees that the "in-the-gaps" commit method always succeeds and UBIFS will always be able to commit dirty index. So this function basically adds amount of budgeted index space to the size of the current index, multiplies this by 3, and makes sure this does not exceed the amount of free LEBs.</p>
<p>Notes about <code></code>-&gt;bi.min_idx_lebs and <code></code>-&gt;lst.idx_lebs variables: o <code></code>-&gt;lst.idx_lebs is the number of LEBs the index currently uses. It might be large, because UBIFS does not do any index consolidation as long as there is free space. IOW, the index may take a lot of LEBs, but the LEBs will contain a lot of dirt. o <code></code>-&gt;bi.min_idx_lebs is the number of LEBS the index presumably takes. IOW, the index may be consolidated to take up to <code></code>-&gt;bi.min_idx_lebs LEBs.</p>
<p>This function returns zero in case of success, and %-ENOSPC in case of failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="budget_8c_ae0376da215ef10226bf8949db1efe446_cgraph.png" border="0" usemap="#budget_8c_ae0376da215ef10226bf8949db1efe446_cgraph" alt=""/></div>
<map name="budget_8c_ae0376da215ef10226bf8949db1efe446_cgraph" id="budget_8c_ae0376da215ef10226bf8949db1efe446_cgraph">
<area shape="rect" id="node2" href="budget_8c.html#a6109e1d36eaa593c345944d0d4b30745" title="ubifs_calc_min_idx_lebs" alt="" coords="177,5,341,32"/>
<area shape="rect" id="node3" href="budget_8c.html#adaa1427281786d8bfca793236b5f0457" title="ubifs_calc_available" alt="" coords="190,56,329,83"/>
<area shape="rect" id="node4" href="budget_8c.html#a2defe97e005967f0deab94271d273ff1" title="can_use_rp" alt="" coords="215,107,304,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="budget_8c_ae0376da215ef10226bf8949db1efe446_icgraph.png" border="0" usemap="#budget_8c_ae0376da215ef10226bf8949db1efe446_icgraph" alt=""/></div>
<map name="budget_8c_ae0376da215ef10226bf8949db1efe446_icgraph" id="budget_8c_ae0376da215ef10226bf8949db1efe446_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="177,511,316,537"/>
<area shape="rect" id="node3" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="399,5,489,32"/>
<area shape="rect" id="node8" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="395,56,493,83"/>
<area shape="rect" id="node9" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="814,107,913,133"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1012,176,1105,203"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1017,283,1100,309"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1178,409,1265,436"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="405,536,483,563"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="399,587,489,613"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="401,637,487,664"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1014,333,1103,360"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1011,384,1107,411"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1007,435,1110,461"/>
<area shape="rect" id="node21" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="383,688,505,715"/>
<area shape="rect" id="node23" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="387,739,501,765"/>
<area shape="rect" id="node24" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="394,789,494,816"/>
<area shape="rect" id="node26" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="404,840,484,867"/>
<area shape="rect" id="node27" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="364,941,524,968"/>
<area shape="rect" id="node28" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="598,916,709,943"/>
<area shape="rect" id="node30" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="572,979,735,1005"/>
<area shape="rect" id="node31" href="ubifs_2ioctl_8c.html#a06251cc4602342e44b5ed0a1b39f7e60" title="setflags" alt="" coords="410,283,478,309"/>
<area shape="rect" id="node4" href="ubifs_2xattr_8c.html#a2c0f8e28d408b8e89b4ce7d6047af912" title="ubifs_xattr_set" alt="" coords="599,5,707,32"/>
<area shape="rect" id="node5" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="992,88,1125,115"/>
<area shape="rect" id="node6" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="1185,12,1258,39"/>
<area shape="rect" id="node7" href="ubifs_2crypto_8c.html#a4984848c1f6ebc630f98d30a9bbf2ed3" title="ubifs_crypt_set_context" alt="" coords="783,56,944,83"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="1173,283,1269,309"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="1317,409,1417,436"/>
<area shape="rect" id="node22" href="ubifs_2file_8c.html#a63bbd02975453f3f42af79e561948912" title="ubifs_write_begin" alt="" coords="592,713,715,740"/>
<area shape="rect" id="node25" href="ubifs_8h.html#aaebf1c80e366c0f2702f58b91d7a9d38" title="ubifs_setattr" alt="" coords="606,815,701,841"/>
<area shape="rect" id="node29" href="ubifs_2file_8c.html#a8cca742dfff2189dce5332cb5f013793" title="ubifs_write_iter" alt="" coords="808,916,919,943"/>
<area shape="rect" id="node32" href="ubifs_8h.html#a9831447969acb35c927f7530bc47158e" title="ubifs_ioctl" alt="" coords="613,283,694,309"/>
<area shape="rect" id="node33" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="800,283,927,309"/>
</map>
</div>

</div>
</div>
<a id="af6ffce775afbdd84428a42c48116af4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6ffce775afbdd84428a42c48116af4d">&#9670;&nbsp;</a></span>get_liability()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static long long get_liability </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>get_liability - calculate current liability. <code></code>: UBIFS file-system description object</p>
<p>This function calculates and returns current UBIFS liability, i.e. the amount of bytes UBIFS has "promised" to write to the media. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="budget_8c_af6ffce775afbdd84428a42c48116af4d_icgraph.png" border="0" usemap="#budget_8c_af6ffce775afbdd84428a42c48116af4d_icgraph" alt=""/></div>
<map name="budget_8c_af6ffce775afbdd84428a42c48116af4d_icgraph" id="budget_8c_af6ffce775afbdd84428a42c48116af4d_icgraph">
<area shape="rect" id="node2" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="140,511,265,537"/>
<area shape="rect" id="node3" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="313,511,452,537"/>
<area shape="rect" id="node4" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="535,5,625,32"/>
<area shape="rect" id="node9" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="531,56,629,83"/>
<area shape="rect" id="node10" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="950,107,1049,133"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1148,176,1241,203"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1153,283,1236,309"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1314,409,1401,436"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="541,536,619,563"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="535,587,625,613"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="537,637,623,664"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1150,333,1239,360"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1147,384,1243,411"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1143,435,1246,461"/>
<area shape="rect" id="node22" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="519,688,641,715"/>
<area shape="rect" id="node24" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="523,739,637,765"/>
<area shape="rect" id="node25" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="530,789,630,816"/>
<area shape="rect" id="node27" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="540,840,620,867"/>
<area shape="rect" id="node28" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="500,941,660,968"/>
<area shape="rect" id="node29" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="734,916,845,943"/>
<area shape="rect" id="node31" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="708,979,871,1005"/>
<area shape="rect" id="node32" href="ubifs_2ioctl_8c.html#a06251cc4602342e44b5ed0a1b39f7e60" title="setflags" alt="" coords="546,283,614,309"/>
<area shape="rect" id="node5" href="ubifs_2xattr_8c.html#a2c0f8e28d408b8e89b4ce7d6047af912" title="ubifs_xattr_set" alt="" coords="735,5,843,32"/>
<area shape="rect" id="node6" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1128,88,1261,115"/>
<area shape="rect" id="node7" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="1321,12,1394,39"/>
<area shape="rect" id="node8" href="ubifs_2crypto_8c.html#a4984848c1f6ebc630f98d30a9bbf2ed3" title="ubifs_crypt_set_context" alt="" coords="919,56,1080,83"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="1309,283,1405,309"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="1453,409,1553,436"/>
<area shape="rect" id="node23" href="ubifs_2file_8c.html#a63bbd02975453f3f42af79e561948912" title="ubifs_write_begin" alt="" coords="728,713,851,740"/>
<area shape="rect" id="node26" href="ubifs_8h.html#aaebf1c80e366c0f2702f58b91d7a9d38" title="ubifs_setattr" alt="" coords="742,815,837,841"/>
<area shape="rect" id="node30" href="ubifs_2file_8c.html#a8cca742dfff2189dce5332cb5f013793" title="ubifs_write_iter" alt="" coords="944,916,1055,943"/>
<area shape="rect" id="node33" href="ubifs_8h.html#a9831447969acb35c927f7530bc47158e" title="ubifs_ioctl" alt="" coords="749,283,830,309"/>
<area shape="rect" id="node34" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="936,283,1063,309"/>
</map>
</div>

</div>
</div>
<a id="a81a06ebf4e0ee67caf867120d2110e8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81a06ebf4e0ee67caf867120d2110e8b">&#9670;&nbsp;</a></span>make_free_space()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int make_free_space </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>make_free_space - make more free space on the file-system. <code></code>: UBIFS file-system description object</p>
<p>This function is called when an operation cannot be budgeted because there is supposedly no free space. But in most cases there is some free space: o budgeting is pessimistic, so it always budgets more than it is actually needed, so shrinking the liability is one way to make free space - the cached data will take less space then it was budgeted for; o GC may turn some dark space into free space (budgeting treats dark space as not available); o commit may free some LEB, i.e., turn freeable LEBs into free LEBs.</p>
<p>So this function tries to do the above. Returns %-EAGAIN if some free space was presumably made and the caller has to re-try budgeting the operation. Returns %-ENOSPC if it couldn't do more free space, and other negative error codes on failures. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="budget_8c_a81a06ebf4e0ee67caf867120d2110e8b_cgraph.png" border="0" usemap="#budget_8c_a81a06ebf4e0ee67caf867120d2110e8b_cgraph" alt=""/></div>
<map name="budget_8c_a81a06ebf4e0ee67caf867120d2110e8b_cgraph" id="budget_8c_a81a06ebf4e0ee67caf867120d2110e8b_cgraph">
<area shape="rect" id="node2" href="budget_8c.html#af6ffce775afbdd84428a42c48116af4d" title="get_liability" alt="" coords="198,375,285,402"/>
<area shape="rect" id="node3" href="budget_8c.html#a86d591c657c803075a7270c12b4f25e1" title="shrink_liability" alt="" coords="189,426,293,453"/>
<area shape="rect" id="node10" href="budget_8c.html#a5ccd81c906fb851139ba3da031d26f12" title="run_gc" alt="" coords="393,477,455,503"/>
<area shape="rect" id="node32" href="ubifs_2commit_8c.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="179,743,304,770"/>
<area shape="rect" id="node4" href="fs-writeback_8c.html#a70bbac9421dfdcee19058ee02fa48d60" title="writeback_inodes_sb" alt="" coords="352,97,496,123"/>
<area shape="rect" id="node5" href="fs-writeback_8c.html#a5f14271630e6ec54ed1bb0d6d47eebb5" title="writeback_inodes_sb_nr" alt="" coords="550,21,713,47"/>
<area shape="rect" id="node7" href="fs-writeback_8c.html#a044f1d7ff09b03f639232ec0e6a88ee1" title="EXPORT_SYMBOL" alt="" coords="783,71,922,98"/>
<area shape="rect" id="node8" href="fs-writeback_8c.html#a0212abe301572be390e75990c26df518" title="get_nr_dirty_pages" alt="" coords="565,122,697,149"/>
<area shape="rect" id="node6" href="fs-writeback_8c.html#a887e7bd03820702e5bfe81228027bece" title="__writeback_inodes\l_sb_nr" alt="" coords="784,5,921,47"/>
<area shape="rect" id="node9" href="inode_8c.html#aa66e4e917c986fb8fcb36efebf00a217" title="get_nr_dirty_inodes" alt="" coords="785,122,920,149"/>
<area shape="rect" id="node11" href="ubifs_2gc_8c.html#a6aba86bcae816613915e10318fdf6b83" title="ubifs_garbage_collect" alt="" coords="557,426,705,453"/>
<area shape="rect" id="node31" href="misc_8h.html#a61ad06675d59063a2171172f8ba94c79" title="ubifs_return_leb" alt="" coords="795,629,910,655"/>
<area shape="rect" id="node12" href="ubifs_2commit_8c.html#a18183f6ca9e5e865909aa32d50f4be4b" title="ubifs_gc_should_commit" alt="" coords="769,426,936,453"/>
<area shape="rect" id="node13" href="ubifs_2commit_8c.html#a6e9dcff4b0f768c14f6f8448f4b1343e" title="ubifs_commit_required" alt="" coords="776,173,929,199"/>
<area shape="rect" id="node15" href="find_8c.html#aa0e0f58e74f915d84712f6a1367b75d0" title="ubifs_find_dirty_leb" alt="" coords="993,325,1127,351"/>
<area shape="rect" id="node22" href="ubifs_2gc_8c.html#a29dd378f4b22d45580bff155cbb275cd" title="ubifs_garbage_collect_leb" alt="" coords="767,527,939,554"/>
<area shape="rect" id="node25" href="ubifs_2io_8c.html#a3e6d29ad192528c05f246cd31a1732fb" title="ubifs_wbuf_sync_nolock" alt="" coords="1389,578,1555,605"/>
<area shape="rect" id="node28" href="ubifs_2io_8c.html#ad9d3a62a61d21e1faa60cd6e630c41ac" title="ubifs_leb_unmap" alt="" coords="1000,781,1120,807"/>
<area shape="rect" id="node29" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="1208,933,1315,959"/>
<area shape="rect" id="node14" href="ubifs_2debug_8c.html#a615a670f26d4407b52175ce5f3faf594" title="dbg_cstate" alt="" coords="1017,173,1103,199"/>
<area shape="rect" id="node16" href="misc_8h.html#aa89c2768eb94f129c6afbe47420b44ba" title="ubifs_get_lprops" alt="" coords="1203,426,1320,453"/>
<area shape="rect" id="node17" href="lprops_8c.html#af7bb5628372135952187c4c37b9a0a68" title="ubifs_fast_find_empty" alt="" coords="1186,375,1337,402"/>
<area shape="rect" id="node18" href="lprops_8c.html#af4f3f200dc1d36660281ec0282293308" title="ubifs_fast_find_freeable" alt="" coords="1181,274,1341,301"/>
<area shape="rect" id="node19" href="find_8c.html#a715c6a77d5e6922f0b465eaba93f3a99" title="scan_for_dirty" alt="" coords="1209,325,1313,351"/>
<area shape="rect" id="node20" href="lprops_8c.html#abfc4c6a75b37762f214cbc91f0ebe664" title="ubifs_change_lp" alt="" coords="1203,527,1319,554"/>
<area shape="rect" id="node21" href="misc_8h.html#a6dce2c34ec97d74cf4be59e0201bdb3e" title="ubifs_release_lprops" alt="" coords="1191,477,1332,503"/>
<area shape="rect" id="node23" href="ubifs_2gc_8c.html#a2f4daf5146e689ec3841b9a9840658f4" title="gc_sync_wbufs" alt="" coords="1003,629,1117,655"/>
<area shape="rect" id="node26" href="lprops_8c.html#aeb3c0f6274cdeba0c778d57f29ab39bf" title="ubifs_change_one_lp" alt="" coords="988,527,1132,554"/>
<area shape="rect" id="node30" href="ubifs_2scan_8c.html#a1689915d09ec86f76b30ee598b10f34e" title="ubifs_scan" alt="" coords="1017,679,1103,706"/>
<area shape="rect" id="node24" href="misc_8h.html#af8fd16c04f42f2a56d86f0f7a4924ecc" title="ubifs_wbuf_sync" alt="" coords="1201,679,1321,706"/>
<area shape="rect" id="node27" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1225,806,1297,833"/>
<area shape="rect" id="node33" href="ubifs_2commit_8c.html#a8066477fd4d182a562575fec9c1460f9" title="wait_for_commit" alt="" coords="365,743,483,770"/>
<area shape="rect" id="node34" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="381,958,467,985"/>
<area shape="rect" id="node35" href="ubifs_2commit_8c.html#a349da7e934725810c922b20daec868ae" title="nothing_to_commit" alt="" coords="565,933,697,959"/>
<area shape="rect" id="node36" href="ubifs_2gc_8c.html#a1ff584f97bf8a1783fc9fecde0a87b1e" title="ubifs_gc_start_commit" alt="" coords="775,477,930,503"/>
<area shape="rect" id="node37" href="ubifs_2debug_8h.html#a69534405790cc12f492343243bc539a4" title="dbg_check_lprops" alt="" coords="997,831,1123,858"/>
<area shape="rect" id="node38" href="ubifs_2log_8c.html#aabacb52b14ebf81d602c26b57622cd7a" title="ubifs_log_start_commit" alt="" coords="774,882,931,909"/>
<area shape="rect" id="node39" href="tnc__commit_8c.html#ae1e7a24e81c4fa022a4065530bd77bff" title="ubifs_tnc_start_commit" alt="" coords="552,1135,711,1162"/>
<area shape="rect" id="node40" href="lpt__commit_8c.html#ad0029b471c7e38ab8a4a1ab961ca25a4" title="ubifs_lpt_start_commit" alt="" coords="554,1186,709,1213"/>
<area shape="rect" id="node41" href="ubifs_2orphan_8c.html#a4644cfc76e621c7abb3683b063707f4e" title="ubifs_orphan_start\l_commit" alt="" coords="567,1237,696,1279"/>
<area shape="rect" id="node42" href="lprops_8c.html#a8a4a969b18d269964ff80d11eb94b8ab" title="ubifs_get_lp_stats" alt="" coords="567,1303,695,1330"/>
<area shape="rect" id="node43" href="tnc__commit_8c.html#a3e11b3b283926c57ea7d7e7aaf6cabe1" title="ubifs_tnc_end_commit" alt="" coords="555,1354,708,1381"/>
<area shape="rect" id="node44" href="lpt__commit_8c.html#a2e84d4bec8fcf799eeb376d90f220efb" title="ubifs_lpt_end_commit" alt="" coords="557,1405,706,1431"/>
<area shape="rect" id="node45" href="ubifs_2orphan_8c.html#a85394180871fe6a819b8312c7c01f865" title="ubifs_orphan_end_commit" alt="" coords="544,1455,719,1482"/>
<area shape="rect" id="node46" href="ubifs_2commit_8c.html#a23369147b6e2214867a8a650ad50ebaf" title="dbg_check_old_index" alt="" coords="987,1034,1133,1061"/>
<area shape="rect" id="node47" href="ubifs_2log_8c.html#a68cc48bfb09ca4270d8d3f953441e201" title="ubifs_log_end_commit" alt="" coords="555,629,707,655"/>
<area shape="rect" id="node48" href="ubifs_2log_8c.html#a84e11c018b891280acfdb1e3071d5e18" title="ubifs_log_post_commit" alt="" coords="553,781,709,807"/>
<area shape="rect" id="node49" href="ubifs_2gc_8c.html#abd8f539c87c6fbdd3a73195b54dd9995" title="ubifs_gc_end_commit" alt="" coords="778,730,927,757"/>
<area shape="rect" id="node50" href="lpt__commit_8c.html#a0ca6bd7c2db50191b30308925d584e16" title="ubifs_lpt_post_commit" alt="" coords="555,730,708,757"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="budget_8c_a81a06ebf4e0ee67caf867120d2110e8b_icgraph.png" border="0" usemap="#budget_8c_a81a06ebf4e0ee67caf867120d2110e8b_icgraph" alt=""/></div>
<map name="budget_8c_a81a06ebf4e0ee67caf867120d2110e8b_icgraph" id="budget_8c_a81a06ebf4e0ee67caf867120d2110e8b_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="179,511,317,537"/>
<area shape="rect" id="node3" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="400,5,491,32"/>
<area shape="rect" id="node8" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="397,56,494,83"/>
<area shape="rect" id="node9" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="815,107,914,133"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1013,176,1107,203"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1019,283,1101,309"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1179,409,1266,436"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="407,536,484,563"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="400,587,491,613"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="402,637,489,664"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1015,333,1105,360"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1012,384,1108,411"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1009,435,1111,461"/>
<area shape="rect" id="node21" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="384,688,507,715"/>
<area shape="rect" id="node23" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="389,739,502,765"/>
<area shape="rect" id="node24" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="395,789,495,816"/>
<area shape="rect" id="node26" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="405,840,485,867"/>
<area shape="rect" id="node27" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="365,941,525,968"/>
<area shape="rect" id="node28" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="599,916,710,943"/>
<area shape="rect" id="node30" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="573,979,736,1005"/>
<area shape="rect" id="node31" href="ubifs_2ioctl_8c.html#a06251cc4602342e44b5ed0a1b39f7e60" title="setflags" alt="" coords="411,283,479,309"/>
<area shape="rect" id="node4" href="ubifs_2xattr_8c.html#a2c0f8e28d408b8e89b4ce7d6047af912" title="ubifs_xattr_set" alt="" coords="601,5,709,32"/>
<area shape="rect" id="node5" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="993,88,1127,115"/>
<area shape="rect" id="node6" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="1186,12,1259,39"/>
<area shape="rect" id="node7" href="ubifs_2crypto_8c.html#a4984848c1f6ebc630f98d30a9bbf2ed3" title="ubifs_crypt_set_context" alt="" coords="784,56,945,83"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="1175,283,1271,309"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="1319,409,1419,436"/>
<area shape="rect" id="node22" href="ubifs_2file_8c.html#a63bbd02975453f3f42af79e561948912" title="ubifs_write_begin" alt="" coords="593,713,716,740"/>
<area shape="rect" id="node25" href="ubifs_8h.html#aaebf1c80e366c0f2702f58b91d7a9d38" title="ubifs_setattr" alt="" coords="607,815,702,841"/>
<area shape="rect" id="node29" href="ubifs_2file_8c.html#a8cca742dfff2189dce5332cb5f013793" title="ubifs_write_iter" alt="" coords="809,916,920,943"/>
<area shape="rect" id="node32" href="ubifs_8h.html#a9831447969acb35c927f7530bc47158e" title="ubifs_ioctl" alt="" coords="614,283,695,309"/>
<area shape="rect" id="node33" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="801,283,928,309"/>
</map>
</div>

</div>
</div>
<a id="a5ccd81c906fb851139ba3da031d26f12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ccd81c906fb851139ba3da031d26f12">&#9670;&nbsp;</a></span>run_gc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int run_gc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>run_gc - run garbage collector. <code></code>: UBIFS file-system description object</p>
<p>This function runs garbage collector to make some more free space. Returns zero if a free LEB has been produced, %-EAGAIN if commit is required, and a negative error code in case of failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="budget_8c_a5ccd81c906fb851139ba3da031d26f12_cgraph.png" border="0" usemap="#budget_8c_a5ccd81c906fb851139ba3da031d26f12_cgraph" alt=""/></div>
<map name="budget_8c_a5ccd81c906fb851139ba3da031d26f12_cgraph" id="budget_8c_a5ccd81c906fb851139ba3da031d26f12_cgraph">
<area shape="rect" id="node2" href="ubifs_2gc_8c.html#a6aba86bcae816613915e10318fdf6b83" title="ubifs_garbage_collect" alt="" coords="115,539,263,566"/>
<area shape="rect" id="node50" href="misc_8h.html#a61ad06675d59063a2171172f8ba94c79" title="ubifs_return_leb" alt="" coords="339,438,454,465"/>
<area shape="rect" id="node3" href="ubifs_2commit_8c.html#a18183f6ca9e5e865909aa32d50f4be4b" title="ubifs_gc_should_commit" alt="" coords="313,489,480,515"/>
<area shape="rect" id="node4" href="ubifs_2commit_8c.html#a6e9dcff4b0f768c14f6f8448f4b1343e" title="ubifs_commit_required" alt="" coords="320,261,473,287"/>
<area shape="rect" id="node6" href="find_8c.html#aa0e0f58e74f915d84712f6a1367b75d0" title="ubifs_find_dirty_leb" alt="" coords="535,261,670,287"/>
<area shape="rect" id="node19" href="ubifs_2gc_8c.html#a29dd378f4b22d45580bff155cbb275cd" title="ubifs_garbage_collect_leb" alt="" coords="311,590,483,617"/>
<area shape="rect" id="node22" href="ubifs_2io_8c.html#a3e6d29ad192528c05f246cd31a1732fb" title="ubifs_wbuf_sync_nolock" alt="" coords="931,729,1096,755"/>
<area shape="rect" id="node29" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="1374,995,1481,1022"/>
<area shape="rect" id="node32" href="ubifs_2io_8c.html#ad9d3a62a61d21e1faa60cd6e630c41ac" title="ubifs_leb_unmap" alt="" coords="953,945,1073,971"/>
<area shape="rect" id="node5" href="ubifs_2debug_8c.html#a615a670f26d4407b52175ce5f3faf594" title="dbg_cstate" alt="" coords="559,134,646,161"/>
<area shape="rect" id="node7" href="misc_8h.html#aa89c2768eb94f129c6afbe47420b44ba" title="ubifs_get_lprops" alt="" coords="744,109,861,135"/>
<area shape="rect" id="node8" href="lprops_8c.html#af7bb5628372135952187c4c37b9a0a68" title="ubifs_fast_find_empty" alt="" coords="727,362,878,389"/>
<area shape="rect" id="node9" href="lprops_8c.html#af4f3f200dc1d36660281ec0282293308" title="ubifs_fast_find_freeable" alt="" coords="723,311,883,338"/>
<area shape="rect" id="node10" href="find_8c.html#a715c6a77d5e6922f0b465eaba93f3a99" title="scan_for_dirty" alt="" coords="751,261,855,287"/>
<area shape="rect" id="node14" href="lprops_8c.html#abfc4c6a75b37762f214cbc91f0ebe664" title="ubifs_change_lp" alt="" coords="745,159,861,186"/>
<area shape="rect" id="node18" href="misc_8h.html#a6dce2c34ec97d74cf4be59e0201bdb3e" title="ubifs_release_lprops" alt="" coords="732,210,873,237"/>
<area shape="rect" id="node11" href="lpt_8c.html#a34800df1b6052b492ca05c589dfec386" title="ubifs_lpt_scan_nolock" alt="" coords="938,261,1089,287"/>
<area shape="rect" id="node12" href="find_8c.html#a15d8baed5e0f491f1c86cab2a049acb7" title="scan_for_dirty_cb" alt="" coords="951,311,1076,338"/>
<area shape="rect" id="node13" href="lpt_8c.html#ade4e71b1fffa493cfb997feaff2c0638" title="ubifs_lpt_lookup_dirty" alt="" coords="939,210,1087,237"/>
<area shape="rect" id="node15" href="lprops_8c.html#a911df1bb1dc58cf096c97ce547539153" title="is_lprops_dirty" alt="" coords="960,58,1067,85"/>
<area shape="rect" id="node16" href="lprops_8c.html#a54fa4acd96a49b1bbe2baeac4dbd0c0b" title="ubifs_calc_dark" alt="" coords="957,109,1070,135"/>
<area shape="rect" id="node17" href="lprops_8c.html#a2f083caeaebac06c1f51d7c7d34f5c13" title="change_category" alt="" coords="953,159,1074,186"/>
<area shape="rect" id="node20" href="ubifs_2gc_8c.html#a2f4daf5146e689ec3841b9a9840658f4" title="gc_sync_wbufs" alt="" coords="546,666,659,693"/>
<area shape="rect" id="node31" href="lprops_8c.html#aeb3c0f6274cdeba0c778d57f29ab39bf" title="ubifs_change_one_lp" alt="" coords="531,185,675,211"/>
<area shape="rect" id="node34" href="ubifs_2scan_8c.html#a1689915d09ec86f76b30ee598b10f34e" title="ubifs_scan" alt="" coords="971,362,1056,389"/>
<area shape="rect" id="node38" href="key_8h.html#a5611c13d648e672825da064c90c8903a" title="key_read" alt="" coords="1390,463,1465,490"/>
<area shape="rect" id="node41" href="ubifs_2scan_8c.html#a7e559a0c70f1f17d0886f600cd59a639" title="ubifs_scan_destroy" alt="" coords="1165,463,1299,490"/>
<area shape="rect" id="node42" href="misc_8h.html#ac244bb6ab2f45cd8b870edc621d20deb" title="ubifs_idx_key" alt="" coords="551,717,654,743"/>
<area shape="rect" id="node43" href="tnc_8c.html#a3a388ce018049e8a7da4da512f8e1dcf" title="ubifs_dirty_idx_node" alt="" coords="532,615,673,642"/>
<area shape="rect" id="node46" href="ubifs_2gc_8c.html#ad0088bd16e6b85c2c28124046ab839d7" title="move_nodes" alt="" coords="555,843,651,870"/>
<area shape="rect" id="node21" href="misc_8h.html#af8fd16c04f42f2a56d86f0f7a4924ecc" title="ubifs_wbuf_sync" alt="" coords="743,717,863,743"/>
<area shape="rect" id="node23" href="ubifs_2io_8c.html#aeef91391de4e0f46023ab0afac3a2335" title="cancel_wbuf_timer_nolock" alt="" coords="1144,641,1320,667"/>
<area shape="rect" id="node24" href="ubifs_2debug_8c.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="1191,691,1273,718"/>
<area shape="rect" id="node25" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="1193,742,1271,769"/>
<area shape="rect" id="node26" href="ubifs_2io_8c.html#a02909cfc9d3a0100f549390c7d464632" title="ubifs_leb_write" alt="" coords="1177,843,1287,870"/>
<area shape="rect" id="node27" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="1368,869,1487,895"/>
<area shape="rect" id="node28" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1391,261,1463,287"/>
<area shape="rect" id="node30" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="1535,995,1620,1022"/>
<area shape="rect" id="node33" href="ubifs_2debug_8c.html#a6ba17156289f8b8ecaed40dbafc04858" title="dbg_leb_unmap" alt="" coords="1175,945,1289,971"/>
<area shape="rect" id="node35" href="ubifs_2scan_8c.html#ac9e61563282a3ab80fa1947e24f1726e" title="ubifs_start_scan" alt="" coords="1173,159,1291,186"/>
<area shape="rect" id="node36" href="ubifs_2scan_8c.html#ab974ec909e594f54f7773880688a2334" title="ubifs_scan_a_node" alt="" coords="1165,210,1299,237"/>
<area shape="rect" id="node37" href="ubifs_2scan_8c.html#a582c1d1b35a0fe0cd1d73f2f88adaa67" title="ubifs_add_snod" alt="" coords="1175,413,1289,439"/>
<area shape="rect" id="node39" href="ubifs_2scan_8c.html#a7a20ae4d7200218e4b1b4ce3cd803b21" title="ubifs_end_scan" alt="" coords="1175,362,1289,389"/>
<area shape="rect" id="node40" href="ubifs_2scan_8c.html#a18197e05567059efbb981ebe037255bb" title="ubifs_scanned_corruption" alt="" coords="1147,261,1317,287"/>
<area shape="rect" id="node44" href="tnc_8c.html#a9a3d0b0e8f6fb62cd3fc14718c0971db" title="lookup_znode" alt="" coords="751,615,854,642"/>
<area shape="rect" id="node45" href="tnc_8c.html#a609646516a8a0f3fd9f2b2a1a1849737" title="dirty_cow_bottom_up" alt="" coords="729,666,876,693"/>
<area shape="rect" id="node47" href="v9fs_8c.html#a962ef1b35907bdda12de2cddce8bc638" title="LIST_HEAD" alt="" coords="755,869,850,895"/>
<area shape="rect" id="node48" href="ubifs_2gc_8c.html#ac8af282d626a91c08e5e158b8e55ec20" title="switch_gc_head" alt="" coords="745,919,861,946"/>
<area shape="rect" id="node49" href="ubifs_2gc_8c.html#a4ac9c370cb72439015edcddf81470d28" title="sort_nodes" alt="" coords="759,818,846,845"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="budget_8c_a5ccd81c906fb851139ba3da031d26f12_icgraph.png" border="0" usemap="#budget_8c_a5ccd81c906fb851139ba3da031d26f12_icgraph" alt=""/></div>
<map name="budget_8c_a5ccd81c906fb851139ba3da031d26f12_icgraph" id="budget_8c_a5ccd81c906fb851139ba3da031d26f12_icgraph">
<area shape="rect" id="node2" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="115,511,240,537"/>
<area shape="rect" id="node3" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="288,511,427,537"/>
<area shape="rect" id="node4" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="509,5,600,32"/>
<area shape="rect" id="node9" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="506,56,603,83"/>
<area shape="rect" id="node10" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="925,107,1023,133"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1123,176,1216,203"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1128,283,1211,309"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1289,409,1375,436"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="516,536,593,563"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="509,587,600,613"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="511,637,598,664"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1125,333,1214,360"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1121,384,1217,411"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1118,435,1221,461"/>
<area shape="rect" id="node22" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="493,688,616,715"/>
<area shape="rect" id="node24" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="498,739,611,765"/>
<area shape="rect" id="node25" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="505,789,605,816"/>
<area shape="rect" id="node27" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="515,840,595,867"/>
<area shape="rect" id="node28" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="475,941,635,968"/>
<area shape="rect" id="node29" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="709,916,819,943"/>
<area shape="rect" id="node31" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="683,979,845,1005"/>
<area shape="rect" id="node32" href="ubifs_2ioctl_8c.html#a06251cc4602342e44b5ed0a1b39f7e60" title="setflags" alt="" coords="521,283,589,309"/>
<area shape="rect" id="node5" href="ubifs_2xattr_8c.html#a2c0f8e28d408b8e89b4ce7d6047af912" title="ubifs_xattr_set" alt="" coords="710,5,818,32"/>
<area shape="rect" id="node6" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1103,88,1236,115"/>
<area shape="rect" id="node7" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="1295,12,1369,39"/>
<area shape="rect" id="node8" href="ubifs_2crypto_8c.html#a4984848c1f6ebc630f98d30a9bbf2ed3" title="ubifs_crypt_set_context" alt="" coords="893,56,1055,83"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="1284,283,1380,309"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="1428,409,1528,436"/>
<area shape="rect" id="node23" href="ubifs_2file_8c.html#a63bbd02975453f3f42af79e561948912" title="ubifs_write_begin" alt="" coords="703,713,825,740"/>
<area shape="rect" id="node26" href="ubifs_8h.html#aaebf1c80e366c0f2702f58b91d7a9d38" title="ubifs_setattr" alt="" coords="717,815,811,841"/>
<area shape="rect" id="node30" href="ubifs_2file_8c.html#a8cca742dfff2189dce5332cb5f013793" title="ubifs_write_iter" alt="" coords="919,916,1029,943"/>
<area shape="rect" id="node33" href="ubifs_8h.html#a9831447969acb35c927f7530bc47158e" title="ubifs_ioctl" alt="" coords="723,283,805,309"/>
<area shape="rect" id="node34" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="911,283,1037,309"/>
</map>
</div>

</div>
</div>
<a id="a86d591c657c803075a7270c12b4f25e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86d591c657c803075a7270c12b4f25e1">&#9670;&nbsp;</a></span>shrink_liability()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void shrink_liability </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nr_to_write</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>shrink_liability - write-back some dirty pages/inodes. <code></code>: UBIFS file-system description object : how many dirty pages to write-back</p>
<p>This function shrinks UBIFS liability by means of writing back some amount of dirty inodes and their pages.</p>
<p>Note, this function synchronizes even VFS inodes which are locked () by the caller of the budgeting function, because write-back does not touch . </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="budget_8c_a86d591c657c803075a7270c12b4f25e1_cgraph.png" border="0" usemap="#budget_8c_a86d591c657c803075a7270c12b4f25e1_cgraph" alt=""/></div>
<map name="budget_8c_a86d591c657c803075a7270c12b4f25e1_cgraph" id="budget_8c_a86d591c657c803075a7270c12b4f25e1_cgraph">
<area shape="rect" id="node2" href="fs-writeback_8c.html#a70bbac9421dfdcee19058ee02fa48d60" title="writeback_inodes_sb" alt="" coords="157,1075,301,1101"/>
<area shape="rect" id="node3" href="fs-writeback_8c.html#a5f14271630e6ec54ed1bb0d6d47eebb5" title="writeback_inodes_sb_nr" alt="" coords="349,1024,512,1051"/>
<area shape="rect" id="node26" href="fs-writeback_8c.html#a044f1d7ff09b03f639232ec0e6a88ee1" title="EXPORT_SYMBOL" alt="" coords="1589,1024,1727,1051"/>
<area shape="rect" id="node47" href="fs-writeback_8c.html#a0212abe301572be390e75990c26df518" title="get_nr_dirty_pages" alt="" coords="365,1125,497,1152"/>
<area shape="rect" id="node4" href="fs-writeback_8c.html#a887e7bd03820702e5bfe81228027bece" title="__writeback_inodes\l_sb_nr" alt="" coords="560,958,697,999"/>
<area shape="rect" id="node5" href="fs-writeback_8c.html#a99cd491fe2e02d08e80587039b69edd1" title="bdi_split_work_to_wbs" alt="" coords="965,973,1119,1000"/>
<area shape="rect" id="node8" href="fs-writeback_8c.html#a84769132b734e8a29b0c09cdacfa676d" title="wb_wait_for_completion" alt="" coords="745,688,908,715"/>
<area shape="rect" id="node6" href="fs-writeback_8c.html#a369a7efc96a1b52c54cf24493d6a1671" title="wb_queue_work" alt="" coords="1193,965,1309,992"/>
<area shape="rect" id="node7" href="fs-writeback_8c.html#a40400c0486cd972779360e0a945979ca" title="finish_writeback_work" alt="" coords="1375,965,1525,992"/>
<area shape="rect" id="node9" href="fs-writeback_8c.html#ad0ca24311e1c0ba76d3810d240f72b08" title="locked_inode_to_wb\l_and_lock_list" alt="" coords="972,739,1112,781"/>
<area shape="rect" id="node10" href="fs-writeback_8c.html#ac55a800ef7f8194c63b9b304d31ffb98" title="inode_to_wb_and_lock_list" alt="" coords="1793,591,1971,617"/>
<area shape="rect" id="node11" href="fs-writeback_8c.html#a7a6ae4220731e250a48b3758d417227c" title="inode_io_list_del_locked" alt="" coords="1801,729,1963,756"/>
<area shape="rect" id="node13" href="fs-writeback_8c.html#a2a36a21e075aa2a912f5c3cb027692cf" title="inode_io_list_move\l_locked" alt="" coords="975,857,1109,898"/>
<area shape="rect" id="node15" href="fs-writeback_8c.html#a5005d8ed38bec5e5a7841abcad098d55" title="wb_wakeup" alt="" coords="997,435,1087,461"/>
<area shape="rect" id="node16" href="inode_8c.html#a378733dcbf0fb08359b9a02145ac8fc3" title="iput" alt="" coords="1021,333,1063,360"/>
<area shape="rect" id="node43" href="inode_8c.html#ab5747108c3d9a3f113b72a10a9be6a2f" title="__iget" alt="" coords="1013,536,1071,563"/>
<area shape="rect" id="node44" href="anon__inodes_8c.html#abdc9ca2bd478fe1d10917c4de2caa774" title="EXPORT_SYMBOL_GPL" alt="" coords="956,587,1128,613"/>
<area shape="rect" id="node45" href="fs-writeback_8c.html#a398d97340932af44753abf79159ff9f6" title="wb_split_bdi_pages" alt="" coords="974,637,1110,664"/>
<area shape="rect" id="node46" href="anon__inodes_8c.html#a28d80c9ad401c7232781da5e0130097e" title="fs_initcall" alt="" coords="1003,688,1081,715"/>
<area shape="rect" id="node12" href="fs-writeback_8c.html#aa31b94b7a70c8c8d396a5f0f3e8ef1ec" title="wb_io_lists_depopulated" alt="" coords="2021,780,2185,807"/>
<area shape="rect" id="node14" href="fs-writeback_8c.html#ad9e6fcccf4baffa8e6c91881c6e428a9" title="wb_io_lists_populated" alt="" coords="1176,856,1327,883"/>
<area shape="rect" id="node17" href="inode_8c.html#a7e99b25ac29d19bc82fbddcb773c4f25" title="iput_final" alt="" coords="1214,372,1289,399"/>
<area shape="rect" id="node33" href="debugfs_2inode_8c.html#a16e485b5debd4cd96a200844c38df190" title="EXPORT_SYMBOL" alt="" coords="2034,43,2173,69"/>
<area shape="rect" id="node18" href="inode_8c.html#a943dee860d20f57552f168683dcb4b5d" title="inode_add_lru" alt="" coords="2052,448,2155,475"/>
<area shape="rect" id="node20" href="fs-writeback_8c.html#aceeba3df6a433f68c665086a2ee53faa" title="write_inode_now" alt="" coords="1391,473,1509,500"/>
<area shape="rect" id="node27" href="inode_8c.html#a1f2fe8883e70882e845560b2ccf4ab16" title="inode_lru_list_del" alt="" coords="1389,372,1511,399"/>
<area shape="rect" id="node28" href="inode_8c.html#a4b62e1e360840615442b8ad6a9f16bc7" title="evict" alt="" coords="1425,220,1475,247"/>
<area shape="rect" id="node19" href="inode_8c.html#a19db2cb42c3c0fb426d842dcbd0e4754" title="inode_lru_list_add" alt="" coords="2233,448,2360,475"/>
<area shape="rect" id="node21" href="fs-writeback_8c.html#adf3fdb0955c8ea5fcad15b51ea6aa76e" title="writeback_single_inode" alt="" coords="1579,473,1737,500"/>
<area shape="rect" id="node22" href="fs-writeback_8c.html#a1e97e23bc25f00f2a833fcf5aeab2630" title="__inode_wait_for_writeback" alt="" coords="1791,360,1973,387"/>
<area shape="rect" id="node23" href="fs-writeback_8c.html#ac4ebf19f04368ec669a08449911d9627" title="__writeback_single\l_inode" alt="" coords="1815,525,1949,566"/>
<area shape="rect" id="node25" href="fs-writeback_8c.html#a736fee7c52c60bcf4ec1722d99c7918d" title="inode_sync_complete" alt="" coords="1808,473,1956,500"/>
<area shape="rect" id="node24" href="fs-writeback_8c.html#a5bd471e3d188b5af658a60ff346167c0" title="write_inode" alt="" coords="2059,532,2147,559"/>
<area shape="rect" id="node29" href="fs-writeback_8c.html#ac6d2db367ed77b70b681e887ba0b05fc" title="inode_io_list_del" alt="" coords="1599,591,1717,617"/>
<area shape="rect" id="node30" href="inode_8c.html#a512fc1963a4346c6b2d0ea53a3f88985" title="inode_sb_list_del" alt="" coords="1597,93,1719,120"/>
<area shape="rect" id="node31" href="fs-writeback_8c.html#a48ed1405bbf8e54568c31f215bbc9429" title="inode_wait_for_writeback" alt="" coords="1573,195,1743,221"/>
<area shape="rect" id="node32" href="inode_8c.html#a5ef1de74cc382d6cd8afddc6e66a47a4" title="clear_inode" alt="" coords="1838,43,1926,69"/>
<area shape="rect" id="node34" href="block__dev_8c.html#a3ff5855083d5b2081708b2f1442a5121" title="bd_forget" alt="" coords="1620,296,1696,323"/>
<area shape="rect" id="node37" href="char__dev_8c.html#a3e21c6290eac67cfa61d376da8c025a3" title="cd_forget" alt="" coords="1620,245,1696,272"/>
<area shape="rect" id="node38" href="inode_8c.html#a076b86296ed39596f96ef03ea8aa74d7" title="destroy_inode" alt="" coords="1607,144,1709,171"/>
<area shape="rect" id="node35" href="block__dev_8c.html#a47d4b8b48b31eb6197e6f93d6e48034e" title="bdput" alt="" coords="1855,303,1909,329"/>
<area shape="rect" id="node36" href="block__dev_8c.html#ad8301dbb3297e4ea3063019db7183347" title="EXPORT_SYMBOL" alt="" coords="2034,303,2173,329"/>
<area shape="rect" id="node39" href="inode_8c.html#acc59c5a81bf40ee903f9feb03ac7b7fa" title="__destroy_inode" alt="" coords="1823,144,1941,171"/>
<area shape="rect" id="node42" href="inode_8c.html#af3846da666673695a3040ee40b92bf0e" title="i_callback" alt="" coords="1842,93,1922,120"/>
<area shape="rect" id="node40" href="buffer_8c.html#ae1120bf173819fd9bfa5a939b13f46e8" title="inode_has_buffers" alt="" coords="2039,169,2167,196"/>
<area shape="rect" id="node41" href="locks_8c.html#a24b09f5cedf01a8cff5e10f3d00636a2" title="locks_free_lock_context" alt="" coords="2022,119,2185,145"/>
<area shape="rect" id="node48" href="inode_8c.html#aa66e4e917c986fb8fcb36efebf00a217" title="get_nr_dirty_inodes" alt="" coords="561,1125,696,1152"/>
<area shape="rect" id="node49" href="inode_8c.html#a5db22a5f7f1481c08a65593e46808324" title="get_nr_inodes" alt="" coords="775,1125,878,1152"/>
<area shape="rect" id="node50" href="inode_8c.html#a53c046a2c130aa89a1f077f278302092" title="get_nr_inodes_unused" alt="" coords="751,1176,903,1203"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="budget_8c_a86d591c657c803075a7270c12b4f25e1_icgraph.png" border="0" usemap="#budget_8c_a86d591c657c803075a7270c12b4f25e1_icgraph" alt=""/></div>
<map name="budget_8c_a86d591c657c803075a7270c12b4f25e1_icgraph" id="budget_8c_a86d591c657c803075a7270c12b4f25e1_icgraph">
<area shape="rect" id="node2" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="157,511,283,537"/>
<area shape="rect" id="node3" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="331,511,469,537"/>
<area shape="rect" id="node4" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="552,5,643,32"/>
<area shape="rect" id="node9" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="549,56,646,83"/>
<area shape="rect" id="node10" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="967,107,1066,133"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1165,176,1259,203"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1171,283,1253,309"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1331,409,1418,436"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="559,536,636,563"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="552,587,643,613"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="554,637,641,664"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1167,333,1257,360"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1164,384,1260,411"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1161,435,1263,461"/>
<area shape="rect" id="node22" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="536,688,659,715"/>
<area shape="rect" id="node24" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="541,739,654,765"/>
<area shape="rect" id="node25" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="547,789,647,816"/>
<area shape="rect" id="node27" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="557,840,637,867"/>
<area shape="rect" id="node28" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="517,941,677,968"/>
<area shape="rect" id="node29" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="751,916,862,943"/>
<area shape="rect" id="node31" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="725,979,888,1005"/>
<area shape="rect" id="node32" href="ubifs_2ioctl_8c.html#a06251cc4602342e44b5ed0a1b39f7e60" title="setflags" alt="" coords="563,283,631,309"/>
<area shape="rect" id="node5" href="ubifs_2xattr_8c.html#a2c0f8e28d408b8e89b4ce7d6047af912" title="ubifs_xattr_set" alt="" coords="753,5,861,32"/>
<area shape="rect" id="node6" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1145,88,1279,115"/>
<area shape="rect" id="node7" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="1338,12,1411,39"/>
<area shape="rect" id="node8" href="ubifs_2crypto_8c.html#a4984848c1f6ebc630f98d30a9bbf2ed3" title="ubifs_crypt_set_context" alt="" coords="936,56,1097,83"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="1327,283,1423,309"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="1471,409,1571,436"/>
<area shape="rect" id="node23" href="ubifs_2file_8c.html#a63bbd02975453f3f42af79e561948912" title="ubifs_write_begin" alt="" coords="745,713,868,740"/>
<area shape="rect" id="node26" href="ubifs_8h.html#aaebf1c80e366c0f2702f58b91d7a9d38" title="ubifs_setattr" alt="" coords="759,815,854,841"/>
<area shape="rect" id="node30" href="ubifs_2file_8c.html#a8cca742dfff2189dce5332cb5f013793" title="ubifs_write_iter" alt="" coords="961,916,1072,943"/>
<area shape="rect" id="node33" href="ubifs_8h.html#a9831447969acb35c927f7530bc47158e" title="ubifs_ioctl" alt="" coords="766,283,847,309"/>
<area shape="rect" id="node34" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="953,283,1080,309"/>
</map>
</div>

</div>
</div>
<a id="a97c8a1e101f1eb52eafc1200ef0544ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97c8a1e101f1eb52eafc1200ef0544ae">&#9670;&nbsp;</a></span>ubifs_budget_space()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ubifs_budget_space </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structubifs__budget__req.html">ubifs_budget_req</a> *&#160;</td>
          <td class="paramname"><em>req</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_budget_space - ensure there is enough space to complete an operation. <code></code>: UBIFS file-system description object : budget request</p>
<p>This function allocates budget for an operation. It uses pessimistic approximation of how much flash space the operation needs. The goal of this function is to make sure UBIFS always has flash space to flush all dirty pages, dirty inodes, and dirty znodes (liability). This function may force commit, garbage-collection or write-back. Returns zero in case of success, %-ENOSPC if there is no free space and other negative error codes in case of failures. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="budget_8c_a97c8a1e101f1eb52eafc1200ef0544ae_cgraph.png" border="0" usemap="#budget_8c_a97c8a1e101f1eb52eafc1200ef0544ae_cgraph" alt=""/></div>
<map name="budget_8c_a97c8a1e101f1eb52eafc1200ef0544ae_cgraph" id="budget_8c_a97c8a1e101f1eb52eafc1200ef0544ae_cgraph">
<area shape="rect" id="node2" href="budget_8c.html#ae7fb821f0bda60b202ba1bd7b8445634" title="calc_data_growth" alt="" coords="193,5,317,32"/>
<area shape="rect" id="node3" href="budget_8c.html#ad59159f2a92429bd81d6bcb530d7c5c5" title="calc_dd_growth" alt="" coords="198,56,311,83"/>
<area shape="rect" id="node4" href="budget_8c.html#ac3fe021e20fd3d248577fe5d2623ad96" title="calc_idx_growth" alt="" coords="197,107,313,133"/>
<area shape="rect" id="node5" href="budget_8c.html#a2defe97e005967f0deab94271d273ff1" title="can_use_rp" alt="" coords="390,68,479,95"/>
<area shape="rect" id="node6" href="budget_8c.html#ae0376da215ef10226bf8949db1efe446" title="do_budget_space" alt="" coords="193,208,317,235"/>
<area shape="rect" id="node9" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="192,284,317,311"/>
<area shape="rect" id="node26" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1417,1064,1489,1091"/>
<area shape="rect" id="node7" href="budget_8c.html#a6109e1d36eaa593c345944d0d4b30745" title="ubifs_calc_min_idx_lebs" alt="" coords="971,220,1135,247"/>
<area shape="rect" id="node8" href="budget_8c.html#adaa1427281786d8bfca793236b5f0457" title="ubifs_calc_available" alt="" coords="365,119,504,145"/>
<area shape="rect" id="node10" href="budget_8c.html#af6ffce775afbdd84428a42c48116af4d" title="get_liability" alt="" coords="391,284,478,311"/>
<area shape="rect" id="node11" href="budget_8c.html#a86d591c657c803075a7270c12b4f25e1" title="shrink_liability" alt="" coords="383,169,487,196"/>
<area shape="rect" id="node18" href="budget_8c.html#a5ccd81c906fb851139ba3da031d26f12" title="run_gc" alt="" coords="593,372,655,399"/>
<area shape="rect" id="node31" href="ubifs_2commit_8c.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="372,608,497,635"/>
<area shape="rect" id="node12" href="fs-writeback_8c.html#a70bbac9421dfdcee19058ee02fa48d60" title="writeback_inodes_sb" alt="" coords="552,144,696,171"/>
<area shape="rect" id="node13" href="fs-writeback_8c.html#a5f14271630e6ec54ed1bb0d6d47eebb5" title="writeback_inodes_sb_nr" alt="" coords="750,119,913,145"/>
<area shape="rect" id="node15" href="fs-writeback_8c.html#a044f1d7ff09b03f639232ec0e6a88ee1" title="EXPORT_SYMBOL" alt="" coords="983,169,1122,196"/>
<area shape="rect" id="node16" href="fs-writeback_8c.html#a0212abe301572be390e75990c26df518" title="get_nr_dirty_pages" alt="" coords="765,60,897,87"/>
<area shape="rect" id="node14" href="fs-writeback_8c.html#a887e7bd03820702e5bfe81228027bece" title="__writeback_inodes\l_sb_nr" alt="" coords="984,103,1121,145"/>
<area shape="rect" id="node17" href="inode_8c.html#aa66e4e917c986fb8fcb36efebf00a217" title="get_nr_dirty_inodes" alt="" coords="985,52,1120,79"/>
<area shape="rect" id="node19" href="ubifs_2gc_8c.html#a6aba86bcae816613915e10318fdf6b83" title="ubifs_garbage_collect" alt="" coords="757,372,905,399"/>
<area shape="rect" id="node30" href="misc_8h.html#a61ad06675d59063a2171172f8ba94c79" title="ubifs_return_leb" alt="" coords="995,676,1110,703"/>
<area shape="rect" id="node20" href="ubifs_2commit_8c.html#a18183f6ca9e5e865909aa32d50f4be4b" title="ubifs_gc_should_commit" alt="" coords="969,423,1136,449"/>
<area shape="rect" id="node21" href="ubifs_2commit_8c.html#a6e9dcff4b0f768c14f6f8448f4b1343e" title="ubifs_commit_required" alt="" coords="976,321,1129,348"/>
<area shape="rect" id="node23" href="find_8c.html#aa0e0f58e74f915d84712f6a1367b75d0" title="ubifs_find_dirty_leb" alt="" coords="985,473,1120,500"/>
<area shape="rect" id="node24" href="ubifs_2gc_8c.html#a29dd378f4b22d45580bff155cbb275cd" title="ubifs_garbage_collect_leb" alt="" coords="967,575,1139,601"/>
<area shape="rect" id="node27" href="ubifs_2io_8c.html#ad9d3a62a61d21e1faa60cd6e630c41ac" title="ubifs_leb_unmap" alt="" coords="1209,803,1329,829"/>
<area shape="rect" id="node28" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="1400,372,1507,399"/>
<area shape="rect" id="node29" href="ubifs_2io_8c.html#a3e6d29ad192528c05f246cd31a1732fb" title="ubifs_wbuf_sync_nolock" alt="" coords="1187,575,1352,601"/>
<area shape="rect" id="node22" href="ubifs_2debug_8c.html#a615a670f26d4407b52175ce5f3faf594" title="dbg_cstate" alt="" coords="1226,321,1313,348"/>
<area shape="rect" id="node25" href="lprops_8c.html#aeb3c0f6274cdeba0c778d57f29ab39bf" title="ubifs_change_one_lp" alt="" coords="1197,727,1341,753"/>
<area shape="rect" id="node32" href="ubifs_2commit_8c.html#a8066477fd4d182a562575fec9c1460f9" title="wait_for_commit" alt="" coords="565,608,683,635"/>
<area shape="rect" id="node33" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="581,819,667,845"/>
<area shape="rect" id="node34" href="ubifs_2commit_8c.html#a349da7e934725810c922b20daec868ae" title="nothing_to_commit" alt="" coords="765,1199,897,1225"/>
<area shape="rect" id="node35" href="misc_8h.html#af8fd16c04f42f2a56d86f0f7a4924ecc" title="ubifs_wbuf_sync" alt="" coords="993,727,1113,753"/>
<area shape="rect" id="node36" href="ubifs_2gc_8c.html#a1ff584f97bf8a1783fc9fecde0a87b1e" title="ubifs_gc_start_commit" alt="" coords="975,980,1130,1007"/>
<area shape="rect" id="node37" href="ubifs_2debug_8h.html#a69534405790cc12f492343243bc539a4" title="dbg_check_lprops" alt="" coords="768,793,895,820"/>
<area shape="rect" id="node38" href="ubifs_2log_8c.html#aabacb52b14ebf81d602c26b57622cd7a" title="ubifs_log_start_commit" alt="" coords="974,929,1131,956"/>
<area shape="rect" id="node39" href="tnc__commit_8c.html#ae1e7a24e81c4fa022a4065530bd77bff" title="ubifs_tnc_start_commit" alt="" coords="752,271,911,297"/>
<area shape="rect" id="node40" href="lpt__commit_8c.html#ad0029b471c7e38ab8a4a1ab961ca25a4" title="ubifs_lpt_start_commit" alt="" coords="754,524,909,551"/>
<area shape="rect" id="node41" href="ubifs_2orphan_8c.html#a4644cfc76e621c7abb3683b063707f4e" title="ubifs_orphan_start\l_commit" alt="" coords="767,575,896,617"/>
<area shape="rect" id="node42" href="lprops_8c.html#a8a4a969b18d269964ff80d11eb94b8ab" title="ubifs_get_lp_stats" alt="" coords="767,641,895,668"/>
<area shape="rect" id="node43" href="tnc__commit_8c.html#a3e11b3b283926c57ea7d7e7aaf6cabe1" title="ubifs_tnc_end_commit" alt="" coords="755,692,908,719"/>
<area shape="rect" id="node44" href="lpt__commit_8c.html#a2e84d4bec8fcf799eeb376d90f220efb" title="ubifs_lpt_end_commit" alt="" coords="757,945,906,972"/>
<area shape="rect" id="node45" href="ubifs_2orphan_8c.html#a85394180871fe6a819b8312c7c01f865" title="ubifs_orphan_end_commit" alt="" coords="744,996,919,1023"/>
<area shape="rect" id="node46" href="ubifs_2commit_8c.html#a23369147b6e2214867a8a650ad50ebaf" title="dbg_check_old_index" alt="" coords="1196,1300,1343,1327"/>
<area shape="rect" id="node47" href="ubifs_2log_8c.html#a68cc48bfb09ca4270d8d3f953441e201" title="ubifs_log_end_commit" alt="" coords="755,1047,907,1073"/>
<area shape="rect" id="node48" href="ubifs_2log_8c.html#a84e11c018b891280acfdb1e3071d5e18" title="ubifs_log_post_commit" alt="" coords="753,743,909,769"/>
<area shape="rect" id="node49" href="ubifs_2gc_8c.html#abd8f539c87c6fbdd3a73195b54dd9995" title="ubifs_gc_end_commit" alt="" coords="978,828,1127,855"/>
<area shape="rect" id="node50" href="lpt__commit_8c.html#a0ca6bd7c2db50191b30308925d584e16" title="ubifs_lpt_post_commit" alt="" coords="755,1097,908,1124"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="budget_8c_a97c8a1e101f1eb52eafc1200ef0544ae_icgraph.png" border="0" usemap="#budget_8c_a97c8a1e101f1eb52eafc1200ef0544ae_icgraph" alt=""/></div>
<map name="budget_8c_a97c8a1e101f1eb52eafc1200ef0544ae_icgraph" id="budget_8c_a97c8a1e101f1eb52eafc1200ef0544ae_icgraph">
<area shape="rect" id="node2" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="227,5,317,32"/>
<area shape="rect" id="node7" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="223,56,321,83"/>
<area shape="rect" id="node8" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="642,107,741,133"/>
<area shape="rect" id="node9" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="840,176,933,203"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="845,283,928,309"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1006,409,1093,436"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="233,536,311,563"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="227,587,317,613"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="229,637,315,664"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="842,333,931,360"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="839,384,935,411"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="835,435,938,461"/>
<area shape="rect" id="node20" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="211,688,333,715"/>
<area shape="rect" id="node22" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="215,739,329,765"/>
<area shape="rect" id="node23" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="222,789,322,816"/>
<area shape="rect" id="node25" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="232,840,312,867"/>
<area shape="rect" id="node26" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="192,941,352,968"/>
<area shape="rect" id="node27" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="426,916,537,943"/>
<area shape="rect" id="node29" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="400,979,563,1005"/>
<area shape="rect" id="node30" href="ubifs_2ioctl_8c.html#a06251cc4602342e44b5ed0a1b39f7e60" title="setflags" alt="" coords="238,283,306,309"/>
<area shape="rect" id="node3" href="ubifs_2xattr_8c.html#a2c0f8e28d408b8e89b4ce7d6047af912" title="ubifs_xattr_set" alt="" coords="427,5,535,32"/>
<area shape="rect" id="node4" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="820,88,953,115"/>
<area shape="rect" id="node5" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="1013,12,1086,39"/>
<area shape="rect" id="node6" href="ubifs_2crypto_8c.html#a4984848c1f6ebc630f98d30a9bbf2ed3" title="ubifs_crypt_set_context" alt="" coords="611,56,772,83"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="1001,283,1097,309"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="1145,409,1245,436"/>
<area shape="rect" id="node21" href="ubifs_2file_8c.html#a63bbd02975453f3f42af79e561948912" title="ubifs_write_begin" alt="" coords="420,713,543,740"/>
<area shape="rect" id="node24" href="ubifs_8h.html#aaebf1c80e366c0f2702f58b91d7a9d38" title="ubifs_setattr" alt="" coords="434,815,529,841"/>
<area shape="rect" id="node28" href="ubifs_2file_8c.html#a8cca742dfff2189dce5332cb5f013793" title="ubifs_write_iter" alt="" coords="636,916,747,943"/>
<area shape="rect" id="node31" href="ubifs_8h.html#a9831447969acb35c927f7530bc47158e" title="ubifs_ioctl" alt="" coords="441,283,522,309"/>
<area shape="rect" id="node32" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="628,283,755,309"/>
</map>
</div>

</div>
</div>
<a id="adaa1427281786d8bfca793236b5f0457"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adaa1427281786d8bfca793236b5f0457">&#9670;&nbsp;</a></span>ubifs_calc_available()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long long ubifs_calc_available </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>min_idx_lebs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_calc_available - calculate available FS space. <code></code>: UBIFS file-system description object : minimum number of LEBs reserved for the index</p>
<p>This function calculates and returns amount of FS space available for use. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="budget_8c_adaa1427281786d8bfca793236b5f0457_icgraph.png" border="0" usemap="#budget_8c_adaa1427281786d8bfca793236b5f0457_icgraph" alt=""/></div>
<map name="budget_8c_adaa1427281786d8bfca793236b5f0457_icgraph" id="budget_8c_adaa1427281786d8bfca793236b5f0457_icgraph">
<area shape="rect" id="node2" href="ubifs_2debug_8h.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="398,715,522,741"/>
<area shape="rect" id="node42" href="budget_8c.html#ae0376da215ef10226bf8949db1efe446" title="do_budget_space" alt="" coords="203,563,327,589"/>
<area shape="rect" id="node48" href="ubifs_8h.html#a6323235e83f399d119f1deb54fa2f144" title="ubifs_get_free_space\l_nolock" alt="" coords="192,910,339,951"/>
<area shape="rect" id="node3" href="ubifs_2super_8c.html#a89667bfaa94195c84c77e521ec5dd134" title="check_free_space" alt="" coords="759,664,887,691"/>
<area shape="rect" id="node6" href="ubifs_2debug_8h.html#ace23cd2189dd2d7a9435ddd891e9beaa" title="dbg_check_space_info" alt="" coords="745,867,900,893"/>
<area shape="rect" id="node8" href="ubifs_2debug_8h.html#ab599356d6c84ddd2c7b9001b452c30bd" title="dbg_is_power_cut" alt="" coords="949,841,1076,868"/>
<area shape="rect" id="node13" href="ubifs_2debug_8c.html#adc399c34cd63b898f18c26a9e16268ef" title="dfs_file_write" alt="" coords="589,765,688,792"/>
<area shape="rect" id="node14" href="ubifs_2recovery_8c.html#acb6fbec748694453a2e4b3ed2be6cc6b" title="grab_empty_leb" alt="" coords="581,715,696,741"/>
<area shape="rect" id="node16" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="950,537,1075,564"/>
<area shape="rect" id="node38" href="lprops_8c.html#a14844fa99e1b9a5c6519cb82bd423fc5" title="scan_check_cb" alt="" coords="582,613,695,640"/>
<area shape="rect" id="node40" href="tnc__commit_8c.html#aa94160dc8891f55de97cfb630b191ef2" title="layout_in_gaps" alt="" coords="584,563,693,589"/>
<area shape="rect" id="node4" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="966,664,1059,691"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="950,752,1075,779"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#aad3435b0a495a23bcdcae895da4bf976" title="ubifs_remount_ro" alt="" coords="951,892,1074,919"/>
<area shape="rect" id="node9" href="ubifs_2debug_8h.html#af929a6951e19c79f1235738386005c06" title="dbg_leb_write" alt="" coords="1149,765,1251,792"/>
<area shape="rect" id="node10" href="ubifs_2debug_8h.html#af2ad985422103ec5e3e13776002d6ceb" title="dbg_leb_change" alt="" coords="1142,816,1258,843"/>
<area shape="rect" id="node11" href="ubifs_2debug_8h.html#a6ba17156289f8b8ecaed40dbafc04858" title="dbg_leb_unmap" alt="" coords="1143,867,1257,893"/>
<area shape="rect" id="node12" href="ubifs_2debug_8h.html#a56743d00da08f53b07b233e616378b33" title="dbg_leb_map" alt="" coords="1151,917,1249,944"/>
<area shape="rect" id="node15" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="744,715,901,741"/>
<area shape="rect" id="node17" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="1142,563,1258,589"/>
<area shape="rect" id="node28" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="1131,613,1269,640"/>
<area shape="rect" id="node29" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="1129,664,1271,691"/>
<area shape="rect" id="node30" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="1137,715,1263,741"/>
<area shape="rect" id="node31" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="1140,88,1260,115"/>
<area shape="rect" id="node32" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="1138,171,1262,197"/>
<area shape="rect" id="node34" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="1127,284,1273,311"/>
<area shape="rect" id="node36" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="1124,21,1276,48"/>
<area shape="rect" id="node18" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1359,461,1449,488"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1357,512,1451,539"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1363,563,1445,589"/>
<area shape="rect" id="node22" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1365,613,1443,640"/>
<area shape="rect" id="node23" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1359,664,1449,691"/>
<area shape="rect" id="node24" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1361,715,1447,741"/>
<area shape="rect" id="node25" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1359,765,1449,792"/>
<area shape="rect" id="node26" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1356,816,1452,843"/>
<area shape="rect" id="node27" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1353,867,1455,893"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1532,360,1619,387"/>
<area shape="rect" id="node33" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1354,107,1454,133"/>
<area shape="rect" id="node35" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="1355,157,1453,184"/>
<area shape="rect" id="node37" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="1355,5,1453,32"/>
<area shape="rect" id="node39" href="lprops_8c.html#a69534405790cc12f492343243bc539a4" title="dbg_check_lprops" alt="" coords="759,613,886,640"/>
<area shape="rect" id="node41" href="tnc__commit_8c.html#a1f7210689e6f040c0b106db3e447e04b" title="layout_commit" alt="" coords="769,563,876,589"/>
<area shape="rect" id="node43" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="1131,461,1269,488"/>
<area shape="rect" id="node44" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="1343,411,1465,437"/>
<area shape="rect" id="node45" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="1347,208,1461,235"/>
<area shape="rect" id="node46" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="1364,259,1444,285"/>
<area shape="rect" id="node47" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="1324,309,1484,336"/>
<area shape="rect" id="node49" href="ubifs_2debug_8h.html#a42a0e664e63f651533d2a5abc23bf4da" title="dbg_save_space_info" alt="" coords="749,917,897,944"/>
<area shape="rect" id="node50" href="ubifs_8h.html#a88a8f2bce74b5f5ab48b7afa5b8ce02a" title="ubifs_get_free_space" alt="" coords="387,968,533,995"/>
</map>
</div>

</div>
</div>
<a id="a6109e1d36eaa593c345944d0d4b30745"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6109e1d36eaa593c345944d0d4b30745">&#9670;&nbsp;</a></span>ubifs_calc_min_idx_lebs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ubifs_calc_min_idx_lebs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_calc_min_idx_lebs - calculate amount of LEBs for the index. <code></code>: UBIFS file-system description object</p>
<p>This function calculates and returns the number of LEBs which should be kept for index usage. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="budget_8c_a6109e1d36eaa593c345944d0d4b30745_icgraph.png" border="0" usemap="#budget_8c_a6109e1d36eaa593c345944d0d4b30745_icgraph" alt=""/></div>
<map name="budget_8c_a6109e1d36eaa593c345944d0d4b30745_icgraph" id="budget_8c_a6109e1d36eaa593c345944d0d4b30745_icgraph">
<area shape="rect" id="node2" href="ubifs_2super_8c.html#a1ec4af9c805e63aea85b94819eee9868" title="init_constants_master" alt="" coords="221,588,372,615"/>
<area shape="rect" id="node3" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="451,537,545,564"/>
<area shape="rect" id="node6" href="budget_8c.html#ae0376da215ef10226bf8949db1efe446" title="do_budget_space" alt="" coords="235,765,359,792"/>
<area shape="rect" id="node35" href="ubifs_8h.html#afb4a050131358f08985939fa532bc694" title="ubifs_release_budget" alt="" coords="425,917,571,944"/>
<area shape="rect" id="node43" href="ubifs_8h.html#a5dcf8189b7afa1fce3cb515f617feb84" title="ubifs_convert_page\l_budget" alt="" coords="641,1222,775,1263"/>
<area shape="rect" id="node44" href="ubifs_8h.html#a6323235e83f399d119f1deb54fa2f144" title="ubifs_get_free_space\l_nolock" alt="" coords="223,1354,370,1395"/>
<area shape="rect" id="node49" href="ubifs_8h.html#ae1e7a24e81c4fa022a4065530bd77bff" title="ubifs_tnc_start_commit" alt="" coords="217,1467,376,1493"/>
<area shape="rect" id="node4" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="653,5,763,32"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="879,5,972,32"/>
<area shape="rect" id="node7" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="429,588,567,615"/>
<area shape="rect" id="node8" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="663,309,753,336"/>
<area shape="rect" id="node11" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="659,208,757,235"/>
<area shape="rect" id="node12" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="659,157,757,184"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="661,765,755,792"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="667,360,749,387"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="882,309,969,336"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="669,917,747,944"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="663,968,753,995"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="665,816,751,843"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="663,867,753,893"/>
<area shape="rect" id="node22" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="660,613,756,640"/>
<area shape="rect" id="node23" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="657,664,759,691"/>
<area shape="rect" id="node24" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="864,1259,987,1285"/>
<area shape="rect" id="node26" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="869,107,982,133"/>
<area shape="rect" id="node27" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1071,1288,1171,1315"/>
<area shape="rect" id="node29" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="668,56,748,83"/>
<area shape="rect" id="node30" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="628,1069,788,1096"/>
<area shape="rect" id="node31" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="870,1069,981,1096"/>
<area shape="rect" id="node33" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="844,1189,1007,1216"/>
<area shape="rect" id="node34" href="ubifs_2ioctl_8c.html#a06251cc4602342e44b5ed0a1b39f7e60" title="setflags" alt="" coords="674,715,742,741"/>
<area shape="rect" id="node9" href="ubifs_2xattr_8c.html#a2c0f8e28d408b8e89b4ce7d6047af912" title="ubifs_xattr_set" alt="" coords="871,208,979,235"/>
<area shape="rect" id="node10" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1055,183,1188,209"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="877,360,973,387"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="1071,816,1171,843"/>
<area shape="rect" id="node25" href="ubifs_2file_8c.html#a63bbd02975453f3f42af79e561948912" title="ubifs_write_begin" alt="" coords="1060,411,1183,437"/>
<area shape="rect" id="node28" href="ubifs_8h.html#aaebf1c80e366c0f2702f58b91d7a9d38" title="ubifs_setattr" alt="" coords="1236,756,1331,783"/>
<area shape="rect" id="node32" href="ubifs_2file_8c.html#a8cca742dfff2189dce5332cb5f013793" title="ubifs_write_iter" alt="" coords="1066,1069,1177,1096"/>
<area shape="rect" id="node36" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="872,1332,979,1359"/>
<area shape="rect" id="node37" href="ubifs_2file_8c.html#a01989f957629450ab7009eb5df5129a9" title="release_new_page_budget" alt="" coords="620,1456,796,1483"/>
<area shape="rect" id="node41" href="ubifs_2file_8c.html#adcc5939bd48e791a796e320711c9fd84" title="release_existing_page\l_budget" alt="" coords="633,1507,783,1549"/>
<area shape="rect" id="node42" href="ubifs_8h.html#a42a33c943c4f8862342d84cc1b152182" title="ubifs_release_dirty\l_inode_budget" alt="" coords="643,1339,773,1381"/>
<area shape="rect" id="node38" href="ubifs_2file_8c.html#a6e8d6bd20f19e6df845b44c32800a704" title="cancel_budget" alt="" coords="872,1407,979,1433"/>
<area shape="rect" id="node39" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="876,1457,975,1484"/>
<area shape="rect" id="node40" href="ubifs_2file_8c.html#aa4c1180586f8cacea1cd78baabb7594a" title="ubifs_invalidatepage" alt="" coords="855,1512,995,1539"/>
<area shape="rect" id="node45" href="ubifs_2debug_8h.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="436,1412,560,1439"/>
<area shape="rect" id="node46" href="ubifs_2debug_8h.html#ace23cd2189dd2d7a9435ddd891e9beaa" title="dbg_check_space_info" alt="" coords="631,1624,785,1651"/>
<area shape="rect" id="node47" href="ubifs_2debug_8h.html#a42a0e664e63f651533d2a5abc23bf4da" title="dbg_save_space_info" alt="" coords="424,1311,572,1337"/>
<area shape="rect" id="node48" href="ubifs_8h.html#a88a8f2bce74b5f5ab48b7afa5b8ce02a" title="ubifs_get_free_space" alt="" coords="425,1361,571,1388"/>
<area shape="rect" id="node50" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="455,1513,541,1540"/>
</map>
</div>

</div>
</div>
<a id="a5dcf8189b7afa1fce3cb515f617feb84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5dcf8189b7afa1fce3cb515f617feb84">&#9670;&nbsp;</a></span>ubifs_convert_page_budget()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ubifs_convert_page_budget </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_convert_page_budget - convert budget of a new page. <code></code>: UBIFS file-system description object</p>
<p>This function converts budget which was allocated for a new page of data to the budget of changing an existing page of data. The latter is smaller than the former, so this function only does simple re-calculation and does not involve any write-back. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="budget_8c_a5dcf8189b7afa1fce3cb515f617feb84_cgraph.png" border="0" usemap="#budget_8c_a5dcf8189b7afa1fce3cb515f617feb84_cgraph" alt=""/></div>
<map name="budget_8c_a5dcf8189b7afa1fce3cb515f617feb84_cgraph" id="budget_8c_a5dcf8189b7afa1fce3cb515f617feb84_cgraph">
<area shape="rect" id="node2" href="budget_8c.html#a6109e1d36eaa593c345944d0d4b30745" title="ubifs_calc_min_idx_lebs" alt="" coords="188,13,352,39"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="budget_8c_a5dcf8189b7afa1fce3cb515f617feb84_icgraph.png" border="0" usemap="#budget_8c_a5dcf8189b7afa1fce3cb515f617feb84_icgraph" alt=""/></div>
<map name="budget_8c_a5dcf8189b7afa1fce3cb515f617feb84_icgraph" id="budget_8c_a5dcf8189b7afa1fce3cb515f617feb84_icgraph">
<area shape="rect" id="node2" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="208,5,331,32"/>
<area shape="rect" id="node4" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="188,56,351,83"/>
<area shape="rect" id="node3" href="ubifs_2file_8c.html#a63bbd02975453f3f42af79e561948912" title="ubifs_write_begin" alt="" coords="399,5,521,32"/>
</map>
</div>

</div>
</div>
<a id="a88a8f2bce74b5f5ab48b7afa5b8ce02a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88a8f2bce74b5f5ab48b7afa5b8ce02a">&#9670;&nbsp;</a></span>ubifs_get_free_space()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long long ubifs_get_free_space </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_get_free_space - return amount of free space. <code></code>: UBIFS file-system description object</p>
<p>This function calculates and returns amount of free space to report to user-space. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="budget_8c_a88a8f2bce74b5f5ab48b7afa5b8ce02a_cgraph.png" border="0" usemap="#budget_8c_a88a8f2bce74b5f5ab48b7afa5b8ce02a_cgraph" alt=""/></div>
<map name="budget_8c_a88a8f2bce74b5f5ab48b7afa5b8ce02a_cgraph" id="budget_8c_a88a8f2bce74b5f5ab48b7afa5b8ce02a_cgraph">
<area shape="rect" id="node2" href="budget_8c.html#a6323235e83f399d119f1deb54fa2f144" title="ubifs_get_free_space\l_nolock" alt="" coords="200,49,347,90"/>
<area shape="rect" id="node3" href="budget_8c.html#a6109e1d36eaa593c345944d0d4b30745" title="ubifs_calc_min_idx_lebs" alt="" coords="395,5,559,32"/>
<area shape="rect" id="node4" href="budget_8c.html#adaa1427281786d8bfca793236b5f0457" title="ubifs_calc_available" alt="" coords="407,56,546,83"/>
<area shape="rect" id="node5" href="budget_8c.html#a66e49aaeea4680a7b2c9973ba0dde86c" title="ubifs_reported_space" alt="" coords="403,107,550,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="budget_8c_a88a8f2bce74b5f5ab48b7afa5b8ce02a_icgraph.png" border="0" usemap="#budget_8c_a88a8f2bce74b5f5ab48b7afa5b8ce02a_icgraph" alt=""/></div>
<map name="budget_8c_a88a8f2bce74b5f5ab48b7afa5b8ce02a_icgraph" id="budget_8c_a88a8f2bce74b5f5ab48b7afa5b8ce02a_icgraph">
<area shape="rect" id="node2" href="ubifs_2super_8c.html#a1041b4cf7c2b356ffde360ee4710bb4d" title="ubifs_statfs" alt="" coords="200,5,291,32"/>
</map>
</div>

</div>
</div>
<a id="a6323235e83f399d119f1deb54fa2f144"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6323235e83f399d119f1deb54fa2f144">&#9670;&nbsp;</a></span>ubifs_get_free_space_nolock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long long ubifs_get_free_space_nolock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_get_free_space_nolock - return amount of free space. <code></code>: UBIFS file-system description object</p>
<p>This function calculates amount of free space to report to user-space.</p>
<p>Because UBIFS may introduce substantial overhead (the index, node headers, alignment, wastage at the end of LEBs, etc), it cannot report real amount of free flash space it has (well, because not all dirty space is reclaimable, UBIFS does not actually know the real amount). If UBIFS did so, it would bread user expectations about what free space is. Users seem to accustomed to assume that if the file-system reports N bytes of free space, they would be able to fit a file of N bytes to the FS. This almost works for traditional file-systems, because they have way less overhead than UBIFS. So, to keep users happy, UBIFS tries to take the overhead into account. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="budget_8c_a6323235e83f399d119f1deb54fa2f144_cgraph.png" border="0" usemap="#budget_8c_a6323235e83f399d119f1deb54fa2f144_cgraph" alt=""/></div>
<map name="budget_8c_a6323235e83f399d119f1deb54fa2f144_cgraph" id="budget_8c_a6323235e83f399d119f1deb54fa2f144_cgraph">
<area shape="rect" id="node2" href="budget_8c.html#a6109e1d36eaa593c345944d0d4b30745" title="ubifs_calc_min_idx_lebs" alt="" coords="200,5,364,32"/>
<area shape="rect" id="node3" href="budget_8c.html#adaa1427281786d8bfca793236b5f0457" title="ubifs_calc_available" alt="" coords="213,56,351,83"/>
<area shape="rect" id="node4" href="budget_8c.html#a66e49aaeea4680a7b2c9973ba0dde86c" title="ubifs_reported_space" alt="" coords="209,107,355,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="budget_8c_a6323235e83f399d119f1deb54fa2f144_icgraph.png" border="0" usemap="#budget_8c_a6323235e83f399d119f1deb54fa2f144_icgraph" alt=""/></div>
<map name="budget_8c_a6323235e83f399d119f1deb54fa2f144_icgraph" id="budget_8c_a6323235e83f399d119f1deb54fa2f144_icgraph">
<area shape="rect" id="node2" href="ubifs_2debug_8h.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="211,549,335,576"/>
<area shape="rect" id="node8" href="ubifs_2debug_8h.html#ace23cd2189dd2d7a9435ddd891e9beaa" title="dbg_check_space_info" alt="" coords="559,701,713,728"/>
<area shape="rect" id="node48" href="ubifs_2debug_8h.html#a42a0e664e63f651533d2a5abc23bf4da" title="dbg_save_space_info" alt="" coords="562,752,710,779"/>
<area shape="rect" id="node49" href="ubifs_8h.html#a88a8f2bce74b5f5ab48b7afa5b8ce02a" title="ubifs_get_free_space" alt="" coords="200,853,347,880"/>
<area shape="rect" id="node3" href="ubifs_2super_8c.html#a89667bfaa94195c84c77e521ec5dd134" title="check_free_space" alt="" coords="572,549,700,576"/>
<area shape="rect" id="node10" href="ubifs_2debug_8h.html#ab599356d6c84ddd2c7b9001b452c30bd" title="dbg_is_power_cut" alt="" coords="763,575,889,601"/>
<area shape="rect" id="node15" href="ubifs_2debug_8c.html#adc399c34cd63b898f18c26a9e16268ef" title="dfs_file_write" alt="" coords="403,397,501,424"/>
<area shape="rect" id="node16" href="ubifs_2recovery_8c.html#acb6fbec748694453a2e4b3ed2be6cc6b" title="grab_empty_leb" alt="" coords="395,651,509,677"/>
<area shape="rect" id="node25" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="763,284,889,311"/>
<area shape="rect" id="node44" href="lprops_8c.html#a14844fa99e1b9a5c6519cb82bd423fc5" title="scan_check_cb" alt="" coords="395,448,509,475"/>
<area shape="rect" id="node46" href="tnc__commit_8c.html#aa94160dc8891f55de97cfb630b191ef2" title="layout_in_gaps" alt="" coords="397,600,507,627"/>
<area shape="rect" id="node4" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="779,487,873,513"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="763,701,889,728"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="959,461,1068,488"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="952,765,1075,792"/>
<area shape="rect" id="node9" href="ubifs_2super_8c.html#aad3435b0a495a23bcdcae895da4bf976" title="ubifs_remount_ro" alt="" coords="765,752,887,779"/>
<area shape="rect" id="node11" href="ubifs_2debug_8h.html#af929a6951e19c79f1235738386005c06" title="dbg_leb_write" alt="" coords="962,613,1065,640"/>
<area shape="rect" id="node12" href="ubifs_2debug_8h.html#af2ad985422103ec5e3e13776002d6ceb" title="dbg_leb_change" alt="" coords="955,664,1071,691"/>
<area shape="rect" id="node13" href="ubifs_2debug_8h.html#a6ba17156289f8b8ecaed40dbafc04858" title="dbg_leb_unmap" alt="" coords="957,512,1070,539"/>
<area shape="rect" id="node14" href="ubifs_2debug_8h.html#a56743d00da08f53b07b233e616378b33" title="dbg_leb_map" alt="" coords="964,563,1063,589"/>
<area shape="rect" id="node17" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="557,651,715,677"/>
<area shape="rect" id="node18" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="950,715,1077,741"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1166,563,1259,589"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1171,765,1254,792"/>
<area shape="rect" id="node22" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1168,613,1257,640"/>
<area shape="rect" id="node23" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1165,664,1261,691"/>
<area shape="rect" id="node24" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1161,715,1264,741"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1343,487,1429,513"/>
<area shape="rect" id="node26" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="955,411,1071,437"/>
<area shape="rect" id="node31" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="945,259,1082,285"/>
<area shape="rect" id="node34" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="942,56,1085,83"/>
<area shape="rect" id="node37" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="950,107,1077,133"/>
<area shape="rect" id="node39" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="1153,309,1273,336"/>
<area shape="rect" id="node40" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="951,157,1075,184"/>
<area shape="rect" id="node41" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="941,208,1086,235"/>
<area shape="rect" id="node43" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="937,309,1089,336"/>
<area shape="rect" id="node27" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1167,411,1258,437"/>
<area shape="rect" id="node28" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1174,461,1251,488"/>
<area shape="rect" id="node29" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1167,512,1258,539"/>
<area shape="rect" id="node30" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1169,360,1256,387"/>
<area shape="rect" id="node32" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="1163,259,1262,285"/>
<area shape="rect" id="node33" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1336,208,1436,235"/>
<area shape="rect" id="node35" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="1151,5,1274,32"/>
<area shape="rect" id="node36" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="1137,56,1288,83"/>
<area shape="rect" id="node38" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1159,107,1266,133"/>
<area shape="rect" id="node42" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="1163,208,1262,235"/>
<area shape="rect" id="node45" href="lprops_8c.html#a69534405790cc12f492343243bc539a4" title="dbg_check_lprops" alt="" coords="573,448,699,475"/>
<area shape="rect" id="node47" href="tnc__commit_8c.html#a1f7210689e6f040c0b106db3e447e04b" title="layout_commit" alt="" coords="583,600,689,627"/>
<area shape="rect" id="node50" href="ubifs_2super_8c.html#a1041b4cf7c2b356ffde360ee4710bb4d" title="ubifs_statfs" alt="" coords="407,853,497,880"/>
</map>
</div>

</div>
</div>
<a id="afb4a050131358f08985939fa532bc694"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb4a050131358f08985939fa532bc694">&#9670;&nbsp;</a></span>ubifs_release_budget()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ubifs_release_budget </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structubifs__budget__req.html">ubifs_budget_req</a> *&#160;</td>
          <td class="paramname"><em>req</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_release_budget - release budgeted free space. <code></code>: UBIFS file-system description object : budget request</p>
<p>This function releases the space budgeted by '<a class="el" href="budget_8c.html#a97c8a1e101f1eb52eafc1200ef0544ae">ubifs_budget_space()</a>'. Note, since the index changes (which were budgeted for in -&gt;idx_growth) will only be written to the media on commit, this function moves the index budget from <code></code>-&gt;bi.idx_growth to <code></code>-&gt;bi.uncommitted_idx. The latter will be zeroed by the commit operation. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="budget_8c_afb4a050131358f08985939fa532bc694_cgraph.png" border="0" usemap="#budget_8c_afb4a050131358f08985939fa532bc694_cgraph" alt=""/></div>
<map name="budget_8c_afb4a050131358f08985939fa532bc694_cgraph" id="budget_8c_afb4a050131358f08985939fa532bc694_cgraph">
<area shape="rect" id="node2" href="budget_8c.html#ae7fb821f0bda60b202ba1bd7b8445634" title="calc_data_growth" alt="" coords="219,5,343,32"/>
<area shape="rect" id="node3" href="budget_8c.html#ad59159f2a92429bd81d6bcb530d7c5c5" title="calc_dd_growth" alt="" coords="224,56,337,83"/>
<area shape="rect" id="node4" href="budget_8c.html#ac3fe021e20fd3d248577fe5d2623ad96" title="calc_idx_growth" alt="" coords="223,107,339,133"/>
<area shape="rect" id="node5" href="budget_8c.html#a6109e1d36eaa593c345944d0d4b30745" title="ubifs_calc_min_idx_lebs" alt="" coords="199,157,363,184"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="budget_8c_afb4a050131358f08985939fa532bc694_icgraph.png" border="0" usemap="#budget_8c_afb4a050131358f08985939fa532bc694_icgraph" alt=""/></div>
<map name="budget_8c_afb4a050131358f08985939fa532bc694_icgraph" id="budget_8c_afb4a050131358f08985939fa532bc694_icgraph">
<area shape="rect" id="node2" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="841,512,932,539"/>
<area shape="rect" id="node7" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="838,461,935,488"/>
<area shape="rect" id="node8" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="837,563,936,589"/>
<area shape="rect" id="node9" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="840,968,933,995"/>
<area shape="rect" id="node10" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="845,1171,928,1197"/>
<area shape="rect" id="node12" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="999,1171,1085,1197"/>
<area shape="rect" id="node14" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="848,816,925,843"/>
<area shape="rect" id="node15" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="841,867,932,893"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="843,917,930,944"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="842,1019,931,1045"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="839,1069,935,1096"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="835,1221,938,1248"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="833,715,940,741"/>
<area shape="rect" id="node21" href="ubifs_2file_8c.html#a01989f957629450ab7009eb5df5129a9" title="release_new_page_budget" alt="" coords="199,259,375,285"/>
<area shape="rect" id="node22" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="443,309,565,336"/>
<area shape="rect" id="node28" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="837,120,937,147"/>
<area shape="rect" id="node31" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="423,664,585,691"/>
<area shape="rect" id="node32" href="ubifs_2file_8c.html#adcc5939bd48e791a796e320711c9fd84" title="release_existing_page\l_budget" alt="" coords="211,193,362,234"/>
<area shape="rect" id="node33" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="247,5,327,32"/>
<area shape="rect" id="node34" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="207,917,367,944"/>
<area shape="rect" id="node35" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="449,1019,559,1045"/>
<area shape="rect" id="node37" href="ubifs_2ioctl_8c.html#a06251cc4602342e44b5ed0a1b39f7e60" title="setflags" alt="" coords="253,1132,321,1159"/>
<area shape="rect" id="node40" href="ubifs_8h.html#a42a33c943c4f8862342d84cc1b152182" title="ubifs_release_dirty\l_inode_budget" alt="" coords="221,555,352,597"/>
<area shape="rect" id="node3" href="ubifs_2xattr_8c.html#a2c0f8e28d408b8e89b4ce7d6047af912" title="ubifs_xattr_set" alt="" coords="988,512,1096,539"/>
<area shape="rect" id="node4" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1158,563,1291,589"/>
<area shape="rect" id="node5" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="1353,512,1427,539"/>
<area shape="rect" id="node6" href="ubifs_2crypto_8c.html#a4984848c1f6ebc630f98d30a9bbf2ed3" title="ubifs_crypt_set_context" alt="" coords="1144,512,1305,539"/>
<area shape="rect" id="node11" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="994,1221,1090,1248"/>
<area shape="rect" id="node13" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="1175,1031,1275,1057"/>
<area shape="rect" id="node24" href="ubifs_2file_8c.html#a6e8d6bd20f19e6df845b44c32800a704" title="cancel_budget" alt="" coords="451,259,557,285"/>
<area shape="rect" id="node26" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="455,157,553,184"/>
<area shape="rect" id="node30" href="ubifs_2file_8c.html#aa4c1180586f8cacea1cd78baabb7594a" title="ubifs_invalidatepage" alt="" coords="434,208,574,235"/>
<area shape="rect" id="node23" href="ubifs_2file_8c.html#a63bbd02975453f3f42af79e561948912" title="ubifs_write_begin" alt="" coords="648,309,771,336"/>
<area shape="rect" id="node25" href="ubifs_2file_8c.html#ad4a3e116a3a56c3a7ffded1d91b0c564" title="ubifs_write_end" alt="" coords="653,259,766,285"/>
<area shape="rect" id="node27" href="ubifs_2file_8c.html#a2ad22c013a0dccfd9f49e114ed89dfa6" title="ubifs_writepage" alt="" coords="653,208,766,235"/>
<area shape="rect" id="node29" href="ubifs_8h.html#aaebf1c80e366c0f2702f58b91d7a9d38" title="ubifs_setattr" alt="" coords="995,44,1089,71"/>
<area shape="rect" id="node36" href="ubifs_2file_8c.html#a8cca742dfff2189dce5332cb5f013793" title="ubifs_write_iter" alt="" coords="654,1019,765,1045"/>
<area shape="rect" id="node38" href="ubifs_8h.html#a9831447969acb35c927f7530bc47158e" title="ubifs_ioctl" alt="" coords="463,1144,545,1171"/>
<area shape="rect" id="node39" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="646,1120,773,1147"/>
<area shape="rect" id="node41" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="443,512,565,539"/>
<area shape="rect" id="node42" href="ubifs_2super_8c.html#a063c51fb658c01f325e4a0744d2f28ce" title="ubifs_evict_inode" alt="" coords="443,613,565,640"/>
<area shape="rect" id="node43" href="ubifs_2journal_8c.html#aed47b114c8f20052b62f78e27cbada07" title="mark_inode_clean" alt="" coords="441,563,567,589"/>
<area shape="rect" id="node44" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="651,917,767,944"/>
<area shape="rect" id="node45" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="646,613,773,640"/>
<area shape="rect" id="node46" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="649,664,769,691"/>
<area shape="rect" id="node47" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="647,461,771,488"/>
<area shape="rect" id="node48" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="637,563,782,589"/>
<area shape="rect" id="node49" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="633,512,785,539"/>
</map>
</div>

</div>
</div>
<a id="a42a33c943c4f8862342d84cc1b152182"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42a33c943c4f8862342d84cc1b152182">&#9670;&nbsp;</a></span>ubifs_release_dirty_inode_budget()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ubifs_release_dirty_inode_budget </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structubifs__inode.html">ubifs_inode</a> *&#160;</td>
          <td class="paramname"><em>ui</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_release_dirty_inode_budget - release dirty inode budget. <code></code>: UBIFS file-system description object : UBIFS inode to release the budget for</p>
<p>This function releases budget corresponding to a dirty inode. It is usually called when after the inode has been written to the media and marked as clean. It also causes the "no space" flags to be cleared. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="budget_8c_a42a33c943c4f8862342d84cc1b152182_cgraph.png" border="0" usemap="#budget_8c_a42a33c943c4f8862342d84cc1b152182_cgraph" alt=""/></div>
<map name="budget_8c_a42a33c943c4f8862342d84cc1b152182_cgraph" id="budget_8c_a42a33c943c4f8862342d84cc1b152182_cgraph">
<area shape="rect" id="node2" href="budget_8c.html#afb4a050131358f08985939fa532bc694" title="ubifs_release_budget" alt="" coords="184,81,329,108"/>
<area shape="rect" id="node3" href="budget_8c.html#ae7fb821f0bda60b202ba1bd7b8445634" title="calc_data_growth" alt="" coords="397,5,521,32"/>
<area shape="rect" id="node4" href="budget_8c.html#ad59159f2a92429bd81d6bcb530d7c5c5" title="calc_dd_growth" alt="" coords="403,56,516,83"/>
<area shape="rect" id="node5" href="budget_8c.html#ac3fe021e20fd3d248577fe5d2623ad96" title="calc_idx_growth" alt="" coords="401,107,517,133"/>
<area shape="rect" id="node6" href="budget_8c.html#a6109e1d36eaa593c345944d0d4b30745" title="ubifs_calc_min_idx_lebs" alt="" coords="377,157,541,184"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="budget_8c_a42a33c943c4f8862342d84cc1b152182_icgraph.png" border="0" usemap="#budget_8c_a42a33c943c4f8862342d84cc1b152182_icgraph" alt=""/></div>
<map name="budget_8c_a42a33c943c4f8862342d84cc1b152182_icgraph" id="budget_8c_a42a33c943c4f8862342d84cc1b152182_icgraph">
<area shape="rect" id="node2" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="204,88,327,115"/>
<area shape="rect" id="node4" href="ubifs_2file_8c.html#a6e8d6bd20f19e6df845b44c32800a704" title="cancel_budget" alt="" coords="212,139,319,165"/>
<area shape="rect" id="node6" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="184,189,347,216"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="204,240,327,267"/>
<area shape="rect" id="node8" href="ubifs_2super_8c.html#a063c51fb658c01f325e4a0744d2f28ce" title="ubifs_evict_inode" alt="" coords="204,291,327,317"/>
<area shape="rect" id="node9" href="ubifs_2journal_8c.html#aed47b114c8f20052b62f78e27cbada07" title="mark_inode_clean" alt="" coords="202,341,329,368"/>
<area shape="rect" id="node3" href="ubifs_2file_8c.html#a63bbd02975453f3f42af79e561948912" title="ubifs_write_begin" alt="" coords="409,88,532,115"/>
<area shape="rect" id="node5" href="ubifs_2file_8c.html#ad4a3e116a3a56c3a7ffded1d91b0c564" title="ubifs_write_end" alt="" coords="414,139,527,165"/>
<area shape="rect" id="node10" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="413,335,529,361"/>
<area shape="rect" id="node27" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="407,531,534,557"/>
<area shape="rect" id="node29" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="411,404,531,431"/>
<area shape="rect" id="node30" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="409,619,533,645"/>
<area shape="rect" id="node33" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="398,196,543,223"/>
<area shape="rect" id="node35" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="395,259,547,285"/>
<area shape="rect" id="node11" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="601,259,691,285"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="599,309,693,336"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="605,360,687,387"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="607,411,685,437"/>
<area shape="rect" id="node22" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="601,461,691,488"/>
<area shape="rect" id="node23" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="603,512,689,539"/>
<area shape="rect" id="node24" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="601,107,691,133"/>
<area shape="rect" id="node25" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="598,157,694,184"/>
<area shape="rect" id="node26" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="595,208,697,235"/>
<area shape="rect" id="node12" href="ubifs_2xattr_8c.html#a2c0f8e28d408b8e89b4ce7d6047af912" title="ubifs_xattr_set" alt="" coords="745,56,853,83"/>
<area shape="rect" id="node13" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="915,5,1049,32"/>
<area shape="rect" id="node14" href="ubifs_2xattr_8c.html#a77418f005715889cfa65e2645c52415e" title="xattr_set" alt="" coords="1111,56,1184,83"/>
<area shape="rect" id="node15" href="ubifs_2crypto_8c.html#a4984848c1f6ebc630f98d30a9bbf2ed3" title="ubifs_crypt_set_context" alt="" coords="901,56,1063,83"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a3f555c38e148b4f95ec62ad6df5c2e4d" title="ubifs_tmpfile" alt="" coords="751,360,847,387"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="756,563,843,589"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#a694f37c0038586c58b4a2cfeab67d496" title="ubifs_rename" alt="" coords="932,588,1032,615"/>
<area shape="rect" id="node28" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="746,613,853,640"/>
<area shape="rect" id="node31" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="596,664,696,691"/>
<area shape="rect" id="node32" href="ubifs_8h.html#aaebf1c80e366c0f2702f58b91d7a9d38" title="ubifs_setattr" alt="" coords="752,664,847,691"/>
<area shape="rect" id="node34" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="750,5,849,32"/>
<area shape="rect" id="node36" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="597,56,695,83"/>
</map>
</div>

</div>
</div>
<a id="a66e49aaeea4680a7b2c9973ba0dde86c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66e49aaeea4680a7b2c9973ba0dde86c">&#9670;&nbsp;</a></span>ubifs_reported_space()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long long ubifs_reported_space </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long long&#160;</td>
          <td class="paramname"><em>free</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_reported_space - calculate reported free space. <code></code>: the UBIFS file-system description object : amount of free space</p>
<p>This function calculates amount of free space which will be reported to user-space. User-space application tend to expect that if the file-system (e.g., via the 'statfs()' call) reports that it has N bytes available, they are able to write a file of size N. UBIFS attaches node headers to each data node and it has to write indexing nodes as well. This introduces additional overhead, and UBIFS has to report slightly less free space to meet the above expectations.</p>
<p>This function assumes free space is made up of uncompressed data nodes and full index nodes (one per data node, tripled because we always allow enough space to write the index thrice).</p>
<p>Note, the calculation is pessimistic, which means that most of the time UBIFS reports less space than it actually has. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="budget_8c_a66e49aaeea4680a7b2c9973ba0dde86c_icgraph.png" border="0" usemap="#budget_8c_a66e49aaeea4680a7b2c9973ba0dde86c_icgraph" alt=""/></div>
<map name="budget_8c_a66e49aaeea4680a7b2c9973ba0dde86c_icgraph" id="budget_8c_a66e49aaeea4680a7b2c9973ba0dde86c_icgraph">
<area shape="rect" id="node2" href="ubifs_2super_8c.html#a1ec4af9c805e63aea85b94819eee9868" title="init_constants_master" alt="" coords="200,545,351,572"/>
<area shape="rect" id="node6" href="ubifs_8h.html#a6323235e83f399d119f1deb54fa2f144" title="ubifs_get_free_space\l_nolock" alt="" coords="202,795,349,837"/>
<area shape="rect" id="node3" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="978,499,1071,525"/>
<area shape="rect" id="node4" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1157,563,1267,589"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="1365,664,1458,691"/>
<area shape="rect" id="node7" href="ubifs_2debug_8h.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="410,600,534,627"/>
<area shape="rect" id="node11" href="ubifs_2debug_8h.html#ace23cd2189dd2d7a9435ddd891e9beaa" title="dbg_check_space_info" alt="" coords="757,752,912,779"/>
<area shape="rect" id="node48" href="ubifs_2debug_8h.html#a42a0e664e63f651533d2a5abc23bf4da" title="dbg_save_space_info" alt="" coords="761,803,909,829"/>
<area shape="rect" id="node49" href="ubifs_8h.html#a88a8f2bce74b5f5ab48b7afa5b8ce02a" title="ubifs_get_free_space" alt="" coords="399,853,545,880"/>
<area shape="rect" id="node8" href="ubifs_2super_8c.html#a89667bfaa94195c84c77e521ec5dd134" title="check_free_space" alt="" coords="771,651,899,677"/>
<area shape="rect" id="node13" href="ubifs_2debug_8h.html#ab599356d6c84ddd2c7b9001b452c30bd" title="dbg_is_power_cut" alt="" coords="961,676,1088,703"/>
<area shape="rect" id="node18" href="ubifs_2debug_8c.html#adc399c34cd63b898f18c26a9e16268ef" title="dfs_file_write" alt="" coords="601,701,700,728"/>
<area shape="rect" id="node19" href="ubifs_2recovery_8c.html#acb6fbec748694453a2e4b3ed2be6cc6b" title="grab_empty_leb" alt="" coords="593,549,708,576"/>
<area shape="rect" id="node27" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="962,335,1087,361"/>
<area shape="rect" id="node44" href="lprops_8c.html#a14844fa99e1b9a5c6519cb82bd423fc5" title="scan_check_cb" alt="" coords="594,448,707,475"/>
<area shape="rect" id="node46" href="tnc__commit_8c.html#aa94160dc8891f55de97cfb630b191ef2" title="layout_in_gaps" alt="" coords="596,499,705,525"/>
<area shape="rect" id="node9" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="962,752,1087,779"/>
<area shape="rect" id="node10" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="1151,816,1273,843"/>
<area shape="rect" id="node12" href="ubifs_2super_8c.html#aad3435b0a495a23bcdcae895da4bf976" title="ubifs_remount_ro" alt="" coords="963,803,1086,829"/>
<area shape="rect" id="node14" href="ubifs_2debug_8h.html#af929a6951e19c79f1235738386005c06" title="dbg_leb_write" alt="" coords="1161,765,1263,792"/>
<area shape="rect" id="node15" href="ubifs_2debug_8h.html#af2ad985422103ec5e3e13776002d6ceb" title="dbg_leb_change" alt="" coords="1154,613,1270,640"/>
<area shape="rect" id="node16" href="ubifs_2debug_8h.html#a6ba17156289f8b8ecaed40dbafc04858" title="dbg_leb_unmap" alt="" coords="1155,664,1269,691"/>
<area shape="rect" id="node17" href="ubifs_2debug_8h.html#a56743d00da08f53b07b233e616378b33" title="dbg_leb_map" alt="" coords="1163,715,1261,741"/>
<area shape="rect" id="node20" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="756,549,913,576"/>
<area shape="rect" id="node21" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="1149,512,1275,539"/>
<area shape="rect" id="node22" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1365,411,1458,437"/>
<area shape="rect" id="node23" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1370,461,1453,488"/>
<area shape="rect" id="node24" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1367,512,1456,539"/>
<area shape="rect" id="node25" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1363,563,1459,589"/>
<area shape="rect" id="node26" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1360,613,1463,640"/>
<area shape="rect" id="node28" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="1154,360,1270,387"/>
<area shape="rect" id="node33" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="1143,208,1281,235"/>
<area shape="rect" id="node35" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="1141,259,1283,285"/>
<area shape="rect" id="node38" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="1149,309,1275,336"/>
<area shape="rect" id="node40" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="1152,411,1272,437"/>
<area shape="rect" id="node41" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="1150,461,1274,488"/>
<area shape="rect" id="node42" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="1139,107,1285,133"/>
<area shape="rect" id="node43" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="1136,157,1288,184"/>
<area shape="rect" id="node29" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1366,259,1457,285"/>
<area shape="rect" id="node30" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1373,309,1450,336"/>
<area shape="rect" id="node31" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1366,360,1457,387"/>
<area shape="rect" id="node32" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1368,208,1455,235"/>
<area shape="rect" id="node34" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="1362,5,1461,32"/>
<area shape="rect" id="node36" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="1350,56,1473,83"/>
<area shape="rect" id="node37" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="1336,107,1487,133"/>
<area shape="rect" id="node39" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1358,157,1465,184"/>
<area shape="rect" id="node45" href="lprops_8c.html#a69534405790cc12f492343243bc539a4" title="dbg_check_lprops" alt="" coords="771,448,898,475"/>
<area shape="rect" id="node47" href="tnc__commit_8c.html#a1f7210689e6f040c0b106db3e447e04b" title="layout_commit" alt="" coords="781,499,888,525"/>
<area shape="rect" id="node50" href="ubifs_2super_8c.html#a1041b4cf7c2b356ffde360ee4710bb4d" title="ubifs_statfs" alt="" coords="605,853,696,880"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_fbbc61eb3235ac15a35746d00bf5db85.html">ubifs</a></li><li class="navelem"><a class="el" href="budget_8c.html">budget.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>linux/fs: nfsd/nfsd.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">linux/fs
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('nfsd_8h_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">nfsd.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="nfsd_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/* SPDX-License-Identifier: GPL-2.0 */</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Hodge-podge collection of knfsd-related stuff.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * I will sort this out later.</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * Copyright (C) 1995-1997 Olaf Kirch &lt;okir@monad.swb.de&gt;</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#ifndef LINUX_NFSD_NFSD_H</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#define LINUX_NFSD_NFSD_H</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;linux/types.h&gt;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &lt;linux/mount.h&gt;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;linux/nfs.h&gt;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;linux/nfs2.h&gt;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;linux/nfs3.h&gt;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;linux/nfs4.h&gt;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;linux/sunrpc/svc.h&gt;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;linux/sunrpc/msg_prot.h&gt;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;uapi/linux/nfsd/debug.h&gt;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="stats_8h.html">stats.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="nfsd_2export_8h.html">export.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#undef ifdebug</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#ifdef CONFIG_SUNRPC_DEBUG</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor"># define ifdebug(flag)      if (nfsd_debug &amp; NFSDDBG_##flag)</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="nfsd_8h.html#adb695fee86d494b0fb4e49b308c7ccac">   31</a></span>&#160;<span class="preprocessor"># define ifdebug(flag)      if (0)</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment"> * nfsd version</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a685360f0b16020f4e6a32507e2dbce24">   37</a></span>&#160;<span class="preprocessor">#define NFSD_SUPPORTED_MINOR_VERSION    2</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment"> * Maximum blocksizes supported by daemon under various circumstances.</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a6315eeb8d8321a48a2579f364d4dcad8">   41</a></span>&#160;<span class="preprocessor">#define NFSSVC_MAXBLKSIZE       RPCSVC_MAXPAYLOAD</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">/* NFSv2 is limited by the protocol specification, see RFC 1094 */</span></div><div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a98aef75a70c496a86cd976a5e147f1b3">   43</a></span>&#160;<span class="preprocessor">#define NFSSVC_MAXBLKSIZE_V2    (8*1024)</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment"> * Largest number of bytes we need to allocate for an NFS</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment"> * call or reply.  Used to control buffer sizes.  We use</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment"> * the length of v3 WRITE, READDIR and READDIR replies</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment"> * which are an RPC header, up to 26 XDR units of reply</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment"> * data, and some page data.</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment"> * Note that accuracy here doesn&#39;t matter too much as the</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment"> * size is rounded up to a page size when allocating space.</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a3825ce8f296f387272001a694a3c7143">   56</a></span>&#160;<span class="preprocessor">#define NFSD_BUFSIZE            ((RPC_MAX_HEADER_WITH_AUTH+26)*XDR_UNIT + NFSSVC_MAXBLKSIZE)</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="structreaddir__cd.html">   58</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structreaddir__cd.html">readdir_cd</a> {</div><div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="structreaddir__cd.html#aa2c0b77f06945e573059395e7b69daef">   59</a></span>&#160;    __be32          <a class="code" href="structreaddir__cd.html#aa2c0b77f06945e573059395e7b69daef">err</a>;    <span class="comment">/* 0, nfserr, or nfserr_eof */</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;};</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="keyword">extern</span> <span class="keyword">struct </span>svc_program   <a class="code" href="nfsd_8h.html#ae6059e80ec58754112ded31e132b0958">nfsd_program</a>;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <span class="keyword">struct </span>svc_version <a class="code" href="nfsproc_8c.html#ad20af4a8966ee9bb37f681e1c361be0c">nfsd_version2</a>, <a class="code" href="_2nfs3proc_8c.html#a1150a996a93bbe17ea04f8e620ca1617">nfsd_version3</a>,</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                <a class="code" href="nfsd_8h.html#ac2e733a9dfa124c9f0d6cf7eb769a786">nfsd_version4</a>;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="keyword">extern</span> <span class="keyword">struct </span>mutex     <a class="code" href="nfsd_8h.html#a770d0756138e88c7f627621bc4bc4e63">nfsd_mutex</a>;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="keyword">extern</span> spinlock_t       <a class="code" href="nfsd_8h.html#ad02804ffdfa1e7c1aacd07770fd6a189">nfsd_drc_lock</a>;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>        <a class="code" href="nfsd_8h.html#a202be3aa4f1a2453cde2ee53d52ba869">nfsd_drc_max_mem</a>;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>        <a class="code" href="nfsd_8h.html#a5c1edada6342201142f217a02308ca73">nfsd_drc_mem_used</a>;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <span class="keyword">struct </span>seq_operations <a class="code" href="nfsd_8h.html#ad4209ee69c7a09cb79aae0320a2f940e">nfs_exports_op</a>;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment"> * Function prototypes.</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="keywordtype">int</span>     <a class="code" href="nfsd_8h.html#ada372426164cc6d508f879a00f91628b">nfsd_svc</a>(<span class="keywordtype">int</span> nrservs, <span class="keyword">struct</span> net *net);</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="keywordtype">int</span>     <a class="code" href="nfsd_8h.html#adce58307c4e28cca76873661eed9046f">nfsd_dispatch</a>(<span class="keyword">struct</span> <a class="code" href="nfsproc_8c.html#a32f7b2ed50225e76a1d7388a73a7b044">svc_rqst</a> *rqstp, __be32 *statp);</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="keywordtype">int</span>     <a class="code" href="nfsd_8h.html#aababe93825f17901c38ae207f057d0a5">nfsd_nrthreads</a>(<span class="keyword">struct</span> net *);</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="keywordtype">int</span>     <a class="code" href="nfsd_8h.html#a74e4c44dfbe178477f5f5730308db04a">nfsd_nrpools</a>(<span class="keyword">struct</span> net *);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="keywordtype">int</span>     <a class="code" href="nfsd_8h.html#a7fc6ffd76b5c924062fa52b0bedb7cd0">nfsd_get_nrthreads</a>(<span class="keywordtype">int</span> n, <span class="keywordtype">int</span> *, <span class="keyword">struct</span> net *);</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="keywordtype">int</span>     <a class="code" href="nfsd_8h.html#ab16a54e42646255f478e78140616a943">nfsd_set_nrthreads</a>(<span class="keywordtype">int</span> n, <span class="keywordtype">int</span> *, <span class="keyword">struct</span> net *);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="keywordtype">int</span>     <a class="code" href="nfsd_8h.html#a3458694766bf7c3f7d5abe235b429d9d">nfsd_pool_stats_open</a>(<span class="keyword">struct</span> <a class="code" href="summary_8h.html#a63c41f9614ee9a4e1beb75eabad72f22">inode</a> *, <span class="keyword">struct</span> file *);</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="keywordtype">int</span>     <a class="code" href="nfsd_8h.html#a47e9d8bdfd1aad3f9fa1349b07a00d51">nfsd_pool_stats_release</a>(<span class="keyword">struct</span> <a class="code" href="summary_8h.html#a63c41f9614ee9a4e1beb75eabad72f22">inode</a> *, <span class="keyword">struct</span> file *);</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="keywordtype">void</span>        <a class="code" href="nfsd_8h.html#a3129c7833ad246e7a78c197aef118ef6">nfsd_destroy</a>(<span class="keyword">struct</span> net *net);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="preprocessor">#if defined(CONFIG_NFSD_V2_ACL) || defined(CONFIG_NFSD_V3_ACL)</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="preprocessor">#ifdef CONFIG_NFSD_V2_ACL</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <span class="keyword">struct </span>svc_version <a class="code" href="nfs2acl_8c.html#aed80ed6a40466ac5b512b88294b92f0c">nfsd_acl_version2</a>;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="preprocessor">#define nfsd_acl_version2 NULL</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="preprocessor">#ifdef CONFIG_NFSD_V3_ACL</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <span class="keyword">struct </span>svc_version <a class="code" href="_2nfs3acl_8c.html#a3141295fb137cdf8878fd50186335f9a">nfsd_acl_version3</a>;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="preprocessor">#define nfsd_acl_version3 NULL</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a221afc5d6309df5c5b83b605d0a0362c">  101</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="nfsd_8h.html#a221afc5d6309df5c5b83b605d0a0362c">vers_op</a> {<a class="code" href="nfsd_8h.html#a221afc5d6309df5c5b83b605d0a0362cac040d0bf58cc483c81232f9c41cc1651">NFSD_SET</a>, <a class="code" href="nfsd_8h.html#a221afc5d6309df5c5b83b605d0a0362ca06af7e929d2223be5da2a0a0704362a7">NFSD_CLEAR</a>, <a class="code" href="nfsd_8h.html#a221afc5d6309df5c5b83b605d0a0362ca5a33d467768c336993cf8c8e7a8080de">NFSD_TEST</a>, <a class="code" href="nfsd_8h.html#a221afc5d6309df5c5b83b605d0a0362ca6367ce82523052262dbcc0b4b1cd5cb9">NFSD_AVAIL</a> };</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="keywordtype">int</span> <a class="code" href="nfsd_8h.html#ae0751dcd6dbfa4aad2c28d03254a7894">nfsd_vers</a>(<span class="keywordtype">int</span> vers, <span class="keyword">enum</span> <a class="code" href="nfsd_8h.html#a221afc5d6309df5c5b83b605d0a0362c">vers_op</a> change);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="keywordtype">int</span> <a class="code" href="nfsd_8h.html#a81c08e0e5c8725a166bf95379177f9cd">nfsd_minorversion</a>(u32 minorversion, <span class="keyword">enum</span> <a class="code" href="nfsd_8h.html#a221afc5d6309df5c5b83b605d0a0362c">vers_op</a> change);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="keywordtype">void</span> <a class="code" href="nfsd_8h.html#ab54934322cd072775734285f476a1476">nfsd_reset_versions</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="keywordtype">int</span> <a class="code" href="nfsd_8h.html#ad13e5644050ad04af42a31c53eca6904">nfsd_create_serv</a>(<span class="keyword">struct</span> net *net);</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="nfsd_8h.html#ad710af3e7860760942c8a18d45534f05">nfsd_max_blksize</a>;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a2340443cfa95fa345844de1184c8d300">  109</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="nfsd_8h.html#a2340443cfa95fa345844de1184c8d300">nfsd_v4client</a>(<span class="keyword">struct</span> <a class="code" href="nfsproc_8c.html#a32f7b2ed50225e76a1d7388a73a7b044">svc_rqst</a> *rq)</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;{</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">return</span> rq-&gt;rq_prog == NFS_PROGRAM &amp;&amp; rq-&gt;rq_vers == 4;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;}</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">/* </span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment"> * NFSv4 State</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="preprocessor">#ifdef CONFIG_NFSD_V4</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="_2nfs4state_8c.html#afbf1e0531bc76344dff33b4fe3d209f7">max_delegations</a>;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="keywordtype">int</span> <a class="code" href="nfsd_8h.html#aea7d95a8c8d2bb2fbb6f5f86281395e1">nfsd4_init_slabs</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="keywordtype">void</span> <a class="code" href="nfsd_8h.html#aabdf2bfa45ebcd6c9cc7d34ba0b2bb5a">nfsd4_free_slabs</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="keywordtype">int</span> <a class="code" href="nfsd_8h.html#a18011f02c335af51255f99c2cce62db3">nfs4_state_start</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="keywordtype">int</span> <a class="code" href="nfsd_8h.html#aed98f080c25a91f884d6b2f3cef2044f">nfs4_state_start_net</a>(<span class="keyword">struct</span> net *net);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="keywordtype">void</span> <a class="code" href="nfsd_8h.html#ab09810bc8ca720723ea64bfa954908b3">nfs4_state_shutdown</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="keywordtype">void</span> <a class="code" href="nfsd_8h.html#adbd96515fb295c1b4e4a4058e4cc1296">nfs4_state_shutdown_net</a>(<span class="keyword">struct</span> net *net);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="keywordtype">void</span> <a class="code" href="nfsd_8h.html#a45cd9b552bb727e197f6594f006f1dc6">nfs4_reset_lease</a>(time_t leasetime);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="keywordtype">int</span> <a class="code" href="nfsd_8h.html#aaa8fcc7528f6bce6191f8ca701fa68f0">nfs4_reset_recoverydir</a>(<span class="keywordtype">char</span> *recdir);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="keywordtype">char</span> * <a class="code" href="nfsd_8h.html#ab1817dd7140c6592eee04f72f1784a64">nfs4_recoverydir</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="nfsd_8h.html#a4d18d79b4ed71e82ce05396c002b70dd">nfsd4_spo_must_allow</a>(<span class="keyword">struct</span> <a class="code" href="nfsproc_8c.html#a32f7b2ed50225e76a1d7388a73a7b044">svc_rqst</a> *rqstp);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="nfsd_8h.html#aea7d95a8c8d2bb2fbb6f5f86281395e1">  130</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="nfsd_8h.html#aea7d95a8c8d2bb2fbb6f5f86281395e1">nfsd4_init_slabs</a>(<span class="keywordtype">void</span>) { <span class="keywordflow">return</span> 0; }</div><div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="nfsd_8h.html#aabdf2bfa45ebcd6c9cc7d34ba0b2bb5a">  131</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="nfsd_8h.html#aabdf2bfa45ebcd6c9cc7d34ba0b2bb5a">nfsd4_free_slabs</a>(<span class="keywordtype">void</span>) { }</div><div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a18011f02c335af51255f99c2cce62db3">  132</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="nfsd_8h.html#a18011f02c335af51255f99c2cce62db3">nfs4_state_start</a>(<span class="keywordtype">void</span>) { <span class="keywordflow">return</span> 0; }</div><div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="nfsd_8h.html#aed98f080c25a91f884d6b2f3cef2044f">  133</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="nfsd_8h.html#aed98f080c25a91f884d6b2f3cef2044f">nfs4_state_start_net</a>(<span class="keyword">struct</span> net *net) { <span class="keywordflow">return</span> 0; }</div><div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="nfsd_8h.html#ab09810bc8ca720723ea64bfa954908b3">  134</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="nfsd_8h.html#ab09810bc8ca720723ea64bfa954908b3">nfs4_state_shutdown</a>(<span class="keywordtype">void</span>) { }</div><div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="nfsd_8h.html#adbd96515fb295c1b4e4a4058e4cc1296">  135</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="nfsd_8h.html#adbd96515fb295c1b4e4a4058e4cc1296">nfs4_state_shutdown_net</a>(<span class="keyword">struct</span> net *net) { }</div><div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a45cd9b552bb727e197f6594f006f1dc6">  136</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="nfsd_8h.html#a45cd9b552bb727e197f6594f006f1dc6">nfs4_reset_lease</a>(time_t leasetime) { }</div><div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="nfsd_8h.html#aaa8fcc7528f6bce6191f8ca701fa68f0">  137</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="nfsd_8h.html#aaa8fcc7528f6bce6191f8ca701fa68f0">nfs4_reset_recoverydir</a>(<span class="keywordtype">char</span> *recdir) { <span class="keywordflow">return</span> 0; }</div><div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="nfsd_8h.html#ab1817dd7140c6592eee04f72f1784a64">  138</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">char</span> * <a class="code" href="nfsd_8h.html#ab1817dd7140c6592eee04f72f1784a64">nfs4_recoverydir</a>(<span class="keywordtype">void</span>) {<span class="keywordflow">return</span> NULL; }</div><div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a4d18d79b4ed71e82ce05396c002b70dd">  139</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="nfsd_8h.html#a4d18d79b4ed71e82ce05396c002b70dd">nfsd4_spo_must_allow</a>(<span class="keyword">struct</span> <a class="code" href="nfsproc_8c.html#a32f7b2ed50225e76a1d7388a73a7b044">svc_rqst</a> *rqstp)</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;{</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;}</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment"> * lockd binding</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="keywordtype">void</span>        <a class="code" href="nfsd_8h.html#ada79cc6410080e91572a78bcf8a5289f">nfsd_lockd_init</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="keywordtype">void</span>        <a class="code" href="nfsd_8h.html#a26861400f66c8ab1ea02f59c23430e38">nfsd_lockd_shutdown</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment"> * These macros provide pre-xdr&#39;ed values for faster operation.</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="nfsd_8h.html#af77645dd2b3619db49da94da8298a55b">  155</a></span>&#160;<span class="preprocessor">#define nfs_ok          cpu_to_be32(NFS_OK)</span></div><div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="nfsd_8h.html#ae508450c2cab0f237ffd5e4e034411d4">  156</a></span>&#160;<span class="preprocessor">#define nfserr_perm     cpu_to_be32(NFSERR_PERM)</span></div><div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="nfsd_8h.html#ade43656d1fbf390b9f002a00c300502a">  157</a></span>&#160;<span class="preprocessor">#define nfserr_noent        cpu_to_be32(NFSERR_NOENT)</span></div><div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="nfsd_8h.html#aa257934a1154e748acaa543145a522be">  158</a></span>&#160;<span class="preprocessor">#define nfserr_io       cpu_to_be32(NFSERR_IO)</span></div><div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a99a31feb4b4efa9351216359920798bb">  159</a></span>&#160;<span class="preprocessor">#define nfserr_nxio     cpu_to_be32(NFSERR_NXIO)</span></div><div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a45bb11cd64f831b281a41900d68b67aa">  160</a></span>&#160;<span class="preprocessor">#define nfserr_eagain       cpu_to_be32(NFSERR_EAGAIN)</span></div><div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a52bf3aa7f8c478cab082bc7c9972b674">  161</a></span>&#160;<span class="preprocessor">#define nfserr_acces        cpu_to_be32(NFSERR_ACCES)</span></div><div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="nfsd_8h.html#adb89ab069fd66d2335f56dcb750104a7">  162</a></span>&#160;<span class="preprocessor">#define nfserr_exist        cpu_to_be32(NFSERR_EXIST)</span></div><div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a46fcdcdffb0d338c7c7dd0e8c815c7b0">  163</a></span>&#160;<span class="preprocessor">#define nfserr_xdev     cpu_to_be32(NFSERR_XDEV)</span></div><div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a792aadcbf9d09a4f51dff88e6cfc5cae">  164</a></span>&#160;<span class="preprocessor">#define nfserr_nodev        cpu_to_be32(NFSERR_NODEV)</span></div><div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a4257997159b2a28b5c80839dc580bace">  165</a></span>&#160;<span class="preprocessor">#define nfserr_notdir       cpu_to_be32(NFSERR_NOTDIR)</span></div><div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a4bf22c4c67b0918a6aed70d92f72e0f7">  166</a></span>&#160;<span class="preprocessor">#define nfserr_isdir        cpu_to_be32(NFSERR_ISDIR)</span></div><div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="nfsd_8h.html#ab278a5363b57a6883775002f1963c31b">  167</a></span>&#160;<span class="preprocessor">#define nfserr_inval        cpu_to_be32(NFSERR_INVAL)</span></div><div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="nfsd_8h.html#ac30776ebbb3e4afecd647b50fdb5c6a1">  168</a></span>&#160;<span class="preprocessor">#define nfserr_fbig     cpu_to_be32(NFSERR_FBIG)</span></div><div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a4afda96bfee01b501307c25aed1da457">  169</a></span>&#160;<span class="preprocessor">#define nfserr_nospc        cpu_to_be32(NFSERR_NOSPC)</span></div><div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="nfsd_8h.html#aa3f0a26fa9a7d689cf569ebf2872782e">  170</a></span>&#160;<span class="preprocessor">#define nfserr_rofs     cpu_to_be32(NFSERR_ROFS)</span></div><div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="nfsd_8h.html#adb5932563425c96418040881536de0da">  171</a></span>&#160;<span class="preprocessor">#define nfserr_mlink        cpu_to_be32(NFSERR_MLINK)</span></div><div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a15d1c8eb8af5aba68c6547386e9998bd">  172</a></span>&#160;<span class="preprocessor">#define nfserr_opnotsupp    cpu_to_be32(NFSERR_OPNOTSUPP)</span></div><div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a49eddc5d4ee8407512a213be2bb4bbf0">  173</a></span>&#160;<span class="preprocessor">#define nfserr_nametoolong  cpu_to_be32(NFSERR_NAMETOOLONG)</span></div><div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="nfsd_8h.html#ad7f37f573e2d8b72393aed696b642aad">  174</a></span>&#160;<span class="preprocessor">#define nfserr_notempty     cpu_to_be32(NFSERR_NOTEMPTY)</span></div><div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a8ff47ef793a28fd3d06ddf9c0d253b2a">  175</a></span>&#160;<span class="preprocessor">#define nfserr_dquot        cpu_to_be32(NFSERR_DQUOT)</span></div><div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a6a036f00fd57a322ff1a478773cdc44b">  176</a></span>&#160;<span class="preprocessor">#define nfserr_stale        cpu_to_be32(NFSERR_STALE)</span></div><div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="nfsd_8h.html#ab56714d33851ad2ac8f60a00d1901ef9">  177</a></span>&#160;<span class="preprocessor">#define nfserr_remote       cpu_to_be32(NFSERR_REMOTE)</span></div><div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a6f8a486b34bb1a59b88ee3c553c0a5f4">  178</a></span>&#160;<span class="preprocessor">#define nfserr_wflush       cpu_to_be32(NFSERR_WFLUSH)</span></div><div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a987e85d2f92e4cb4eb832afb70d58b9f">  179</a></span>&#160;<span class="preprocessor">#define nfserr_badhandle    cpu_to_be32(NFSERR_BADHANDLE)</span></div><div class="line"><a name="l00180"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a26f47469cf3a46d65e3470e308618d26">  180</a></span>&#160;<span class="preprocessor">#define nfserr_notsync      cpu_to_be32(NFSERR_NOT_SYNC)</span></div><div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="nfsd_8h.html#abf2022ba912de8e9b64ecd748577dabf">  181</a></span>&#160;<span class="preprocessor">#define nfserr_badcookie    cpu_to_be32(NFSERR_BAD_COOKIE)</span></div><div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a384b2006bd426874be9843ca3e57a143">  182</a></span>&#160;<span class="preprocessor">#define nfserr_notsupp      cpu_to_be32(NFSERR_NOTSUPP)</span></div><div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a186d0ef8430781163f4a1c7ba5ea9d8c">  183</a></span>&#160;<span class="preprocessor">#define nfserr_toosmall     cpu_to_be32(NFSERR_TOOSMALL)</span></div><div class="line"><a name="l00184"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a8847639765b928b49f313bb622a8a8fe">  184</a></span>&#160;<span class="preprocessor">#define nfserr_serverfault  cpu_to_be32(NFSERR_SERVERFAULT)</span></div><div class="line"><a name="l00185"></a><span class="lineno"><a class="line" href="nfsd_8h.html#ab0798001cbfd11ed6014a86a8baa6f36">  185</a></span>&#160;<span class="preprocessor">#define nfserr_badtype      cpu_to_be32(NFSERR_BADTYPE)</span></div><div class="line"><a name="l00186"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a657b954ecfd6d11a14eccb2feb52932c">  186</a></span>&#160;<span class="preprocessor">#define nfserr_jukebox      cpu_to_be32(NFSERR_JUKEBOX)</span></div><div class="line"><a name="l00187"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a795cafeeac7241f364b2f28579059263">  187</a></span>&#160;<span class="preprocessor">#define nfserr_denied       cpu_to_be32(NFSERR_DENIED)</span></div><div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a40a5a1b29c0af68ec1165e0e977f727a">  188</a></span>&#160;<span class="preprocessor">#define nfserr_deadlock     cpu_to_be32(NFSERR_DEADLOCK)</span></div><div class="line"><a name="l00189"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a5520451fdb468adb97956eada1ab0ace">  189</a></span>&#160;<span class="preprocessor">#define nfserr_expired          cpu_to_be32(NFSERR_EXPIRED)</span></div><div class="line"><a name="l00190"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a99a22a660c384b8fc831ee3635549dcf">  190</a></span>&#160;<span class="preprocessor">#define nfserr_bad_cookie   cpu_to_be32(NFSERR_BAD_COOKIE)</span></div><div class="line"><a name="l00191"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a9d76b6535b0c4538246df8a241237e7f">  191</a></span>&#160;<span class="preprocessor">#define nfserr_same     cpu_to_be32(NFSERR_SAME)</span></div><div class="line"><a name="l00192"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a515f9c4f907beab5e1c317f6ada00ce7">  192</a></span>&#160;<span class="preprocessor">#define nfserr_clid_inuse   cpu_to_be32(NFSERR_CLID_INUSE)</span></div><div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="nfsd_8h.html#afee4d715c493913a8af5cd8fd9dd79cb">  193</a></span>&#160;<span class="preprocessor">#define nfserr_stale_clientid   cpu_to_be32(NFSERR_STALE_CLIENTID)</span></div><div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="nfsd_8h.html#ab6682a1974288e81bba9160f811bd6de">  194</a></span>&#160;<span class="preprocessor">#define nfserr_resource     cpu_to_be32(NFSERR_RESOURCE)</span></div><div class="line"><a name="l00195"></a><span class="lineno"><a class="line" href="nfsd_8h.html#acd49cf2dc23494484253156a27b46cb9">  195</a></span>&#160;<span class="preprocessor">#define nfserr_moved        cpu_to_be32(NFSERR_MOVED)</span></div><div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="nfsd_8h.html#aef50207f7af5a2c7469c1499b2403fac">  196</a></span>&#160;<span class="preprocessor">#define nfserr_nofilehandle cpu_to_be32(NFSERR_NOFILEHANDLE)</span></div><div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a2ae0cec4248d224fd138744ce6b6d219">  197</a></span>&#160;<span class="preprocessor">#define nfserr_minor_vers_mismatch  cpu_to_be32(NFSERR_MINOR_VERS_MISMATCH)</span></div><div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="nfsd_8h.html#ae7e540599a471af3ddc79843d5e72336">  198</a></span>&#160;<span class="preprocessor">#define nfserr_share_denied cpu_to_be32(NFSERR_SHARE_DENIED)</span></div><div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="nfsd_8h.html#af3e076119e74a61ebd3702075fe17772">  199</a></span>&#160;<span class="preprocessor">#define nfserr_stale_stateid    cpu_to_be32(NFSERR_STALE_STATEID)</span></div><div class="line"><a name="l00200"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a6fa41ba75245738d66d1b41299f9129e">  200</a></span>&#160;<span class="preprocessor">#define nfserr_old_stateid  cpu_to_be32(NFSERR_OLD_STATEID)</span></div><div class="line"><a name="l00201"></a><span class="lineno"><a class="line" href="nfsd_8h.html#aee33299b18c794796cc3264809a54de3">  201</a></span>&#160;<span class="preprocessor">#define nfserr_bad_stateid  cpu_to_be32(NFSERR_BAD_STATEID)</span></div><div class="line"><a name="l00202"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a92a9c52c78c326b6ac50792d9ce1d525">  202</a></span>&#160;<span class="preprocessor">#define nfserr_bad_seqid    cpu_to_be32(NFSERR_BAD_SEQID)</span></div><div class="line"><a name="l00203"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a985c23a65a875e7831aeaeb65b227dc0">  203</a></span>&#160;<span class="preprocessor">#define nfserr_symlink      cpu_to_be32(NFSERR_SYMLINK)</span></div><div class="line"><a name="l00204"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a084f15e7cbe5555fddeb54005dbe76c9">  204</a></span>&#160;<span class="preprocessor">#define nfserr_not_same     cpu_to_be32(NFSERR_NOT_SAME)</span></div><div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="nfsd_8h.html#acc0da6845b41283d458801c7538ad2e7">  205</a></span>&#160;<span class="preprocessor">#define nfserr_lock_range   cpu_to_be32(NFSERR_LOCK_RANGE)</span></div><div class="line"><a name="l00206"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a8c40d3e9f645f3256909dea4d0a1b099">  206</a></span>&#160;<span class="preprocessor">#define nfserr_restorefh    cpu_to_be32(NFSERR_RESTOREFH)</span></div><div class="line"><a name="l00207"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a7ecab306852826889b74f7111e5f37d2">  207</a></span>&#160;<span class="preprocessor">#define nfserr_attrnotsupp  cpu_to_be32(NFSERR_ATTRNOTSUPP)</span></div><div class="line"><a name="l00208"></a><span class="lineno"><a class="line" href="nfsd_8h.html#aae9b37f706b19315c1686cd3283c1f37">  208</a></span>&#160;<span class="preprocessor">#define nfserr_bad_xdr      cpu_to_be32(NFSERR_BAD_XDR)</span></div><div class="line"><a name="l00209"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a9b315c0ef07c777830b24632156d85ba">  209</a></span>&#160;<span class="preprocessor">#define nfserr_openmode     cpu_to_be32(NFSERR_OPENMODE)</span></div><div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a6a37cb666baa7b44ea24509989d4335c">  210</a></span>&#160;<span class="preprocessor">#define nfserr_badowner     cpu_to_be32(NFSERR_BADOWNER)</span></div><div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a9fe7462b6b433a7615c554879c5306b5">  211</a></span>&#160;<span class="preprocessor">#define nfserr_locks_held   cpu_to_be32(NFSERR_LOCKS_HELD)</span></div><div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="nfsd_8h.html#aeeb324cd2b24aade6cba9a4a9f5f7c15">  212</a></span>&#160;<span class="preprocessor">#define nfserr_op_illegal   cpu_to_be32(NFSERR_OP_ILLEGAL)</span></div><div class="line"><a name="l00213"></a><span class="lineno"><a class="line" href="nfsd_8h.html#adf13d7346b033f5f5d76b6e255240c3e">  213</a></span>&#160;<span class="preprocessor">#define nfserr_grace        cpu_to_be32(NFSERR_GRACE)</span></div><div class="line"><a name="l00214"></a><span class="lineno"><a class="line" href="nfsd_8h.html#adbfacd52cd4145eebba3241a2b8fa7d8">  214</a></span>&#160;<span class="preprocessor">#define nfserr_no_grace     cpu_to_be32(NFSERR_NO_GRACE)</span></div><div class="line"><a name="l00215"></a><span class="lineno"><a class="line" href="nfsd_8h.html#aa747eae96f8068d37dd16479e21fdaed">  215</a></span>&#160;<span class="preprocessor">#define nfserr_reclaim_bad  cpu_to_be32(NFSERR_RECLAIM_BAD)</span></div><div class="line"><a name="l00216"></a><span class="lineno"><a class="line" href="nfsd_8h.html#ab5c0d726f47d04d5eb18817dbe9b5aa5">  216</a></span>&#160;<span class="preprocessor">#define nfserr_badname      cpu_to_be32(NFSERR_BADNAME)</span></div><div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a5cbecf037208c0bab653eaf1f0e62e85">  217</a></span>&#160;<span class="preprocessor">#define nfserr_cb_path_down cpu_to_be32(NFSERR_CB_PATH_DOWN)</span></div><div class="line"><a name="l00218"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a706b03649c9b025db435528963428159">  218</a></span>&#160;<span class="preprocessor">#define nfserr_locked       cpu_to_be32(NFSERR_LOCKED)</span></div><div class="line"><a name="l00219"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a3fd6b27568b95e300cf687afc0707874">  219</a></span>&#160;<span class="preprocessor">#define nfserr_wrongsec     cpu_to_be32(NFSERR_WRONGSEC)</span></div><div class="line"><a name="l00220"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a912842a83c414beec4216b0f98d2e28f">  220</a></span>&#160;<span class="preprocessor">#define nfserr_badiomode        cpu_to_be32(NFS4ERR_BADIOMODE)</span></div><div class="line"><a name="l00221"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a71f85dd45e030fcf39dd6e85fb4be592">  221</a></span>&#160;<span class="preprocessor">#define nfserr_badlayout        cpu_to_be32(NFS4ERR_BADLAYOUT)</span></div><div class="line"><a name="l00222"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a15547e2ff811496a57b4babd778a472b">  222</a></span>&#160;<span class="preprocessor">#define nfserr_bad_session_digest   cpu_to_be32(NFS4ERR_BAD_SESSION_DIGEST)</span></div><div class="line"><a name="l00223"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a1155f3924e5c4a82202725b57f4acff8">  223</a></span>&#160;<span class="preprocessor">#define nfserr_badsession       cpu_to_be32(NFS4ERR_BADSESSION)</span></div><div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="nfsd_8h.html#ac7913d1c72b06c2b638aefce3abd087a">  224</a></span>&#160;<span class="preprocessor">#define nfserr_badslot          cpu_to_be32(NFS4ERR_BADSLOT)</span></div><div class="line"><a name="l00225"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a66f28a115bde625a82986f6be83e1e4e">  225</a></span>&#160;<span class="preprocessor">#define nfserr_complete_already     cpu_to_be32(NFS4ERR_COMPLETE_ALREADY)</span></div><div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="nfsd_8h.html#aa0334c6547c1a1693f4aa542732e8cab">  226</a></span>&#160;<span class="preprocessor">#define nfserr_conn_not_bound_to_session cpu_to_be32(NFS4ERR_CONN_NOT_BOUND_TO_SESSION)</span></div><div class="line"><a name="l00227"></a><span class="lineno"><a class="line" href="nfsd_8h.html#ada279a23053b9f086f32cf20a38bf490">  227</a></span>&#160;<span class="preprocessor">#define nfserr_deleg_already_wanted cpu_to_be32(NFS4ERR_DELEG_ALREADY_WANTED)</span></div><div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="nfsd_8h.html#aa259748e3c6a6438154562063d6099d0">  228</a></span>&#160;<span class="preprocessor">#define nfserr_back_chan_busy       cpu_to_be32(NFS4ERR_BACK_CHAN_BUSY)</span></div><div class="line"><a name="l00229"></a><span class="lineno"><a class="line" href="nfsd_8h.html#ac59394db3d7beba034bd666073809463">  229</a></span>&#160;<span class="preprocessor">#define nfserr_layouttrylater       cpu_to_be32(NFS4ERR_LAYOUTTRYLATER)</span></div><div class="line"><a name="l00230"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a3b0c3dc3248ecc531efc331680f4f146">  230</a></span>&#160;<span class="preprocessor">#define nfserr_layoutunavailable    cpu_to_be32(NFS4ERR_LAYOUTUNAVAILABLE)</span></div><div class="line"><a name="l00231"></a><span class="lineno"><a class="line" href="nfsd_8h.html#ab50aea980d5f965d1eadaeb96b727e50">  231</a></span>&#160;<span class="preprocessor">#define nfserr_nomatching_layout    cpu_to_be32(NFS4ERR_NOMATCHING_LAYOUT)</span></div><div class="line"><a name="l00232"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a0f52a0c1782e2b607c6ba9953735c19d">  232</a></span>&#160;<span class="preprocessor">#define nfserr_recallconflict       cpu_to_be32(NFS4ERR_RECALLCONFLICT)</span></div><div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="nfsd_8h.html#ae71152e98677cb59f12d581db24eb400">  233</a></span>&#160;<span class="preprocessor">#define nfserr_unknown_layouttype   cpu_to_be32(NFS4ERR_UNKNOWN_LAYOUTTYPE)</span></div><div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="nfsd_8h.html#aee8e6151d66a86613c769298adae419a">  234</a></span>&#160;<span class="preprocessor">#define nfserr_seq_misordered       cpu_to_be32(NFS4ERR_SEQ_MISORDERED)</span></div><div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a6a9803f46ef585bb8ed275ea3f21f8c7">  235</a></span>&#160;<span class="preprocessor">#define nfserr_sequence_pos     cpu_to_be32(NFS4ERR_SEQUENCE_POS)</span></div><div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="nfsd_8h.html#ab17037bb468690f8d7fcecd1a61f850a">  236</a></span>&#160;<span class="preprocessor">#define nfserr_req_too_big      cpu_to_be32(NFS4ERR_REQ_TOO_BIG)</span></div><div class="line"><a name="l00237"></a><span class="lineno"><a class="line" href="nfsd_8h.html#ab7013627cc6074da10383bb50540d929">  237</a></span>&#160;<span class="preprocessor">#define nfserr_rep_too_big      cpu_to_be32(NFS4ERR_REP_TOO_BIG)</span></div><div class="line"><a name="l00238"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a39939656d74369fb227018782dbb06c9">  238</a></span>&#160;<span class="preprocessor">#define nfserr_rep_too_big_to_cache cpu_to_be32(NFS4ERR_REP_TOO_BIG_TO_CACHE)</span></div><div class="line"><a name="l00239"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a48e1f6251210e56930835b5f69d4a046">  239</a></span>&#160;<span class="preprocessor">#define nfserr_retry_uncached_rep   cpu_to_be32(NFS4ERR_RETRY_UNCACHED_REP)</span></div><div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="nfsd_8h.html#abe03683e5f769d719bea12e7ba0efdbf">  240</a></span>&#160;<span class="preprocessor">#define nfserr_unsafe_compound      cpu_to_be32(NFS4ERR_UNSAFE_COMPOUND)</span></div><div class="line"><a name="l00241"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a4aca1138c4bad19e3c34575ca9ec61db">  241</a></span>&#160;<span class="preprocessor">#define nfserr_too_many_ops     cpu_to_be32(NFS4ERR_TOO_MANY_OPS)</span></div><div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a0ebcb361e63295ba5c5d86b605dbf284">  242</a></span>&#160;<span class="preprocessor">#define nfserr_op_not_in_session    cpu_to_be32(NFS4ERR_OP_NOT_IN_SESSION)</span></div><div class="line"><a name="l00243"></a><span class="lineno"><a class="line" href="nfsd_8h.html#aec1e95bbdcde400af7230d74dd1944fe">  243</a></span>&#160;<span class="preprocessor">#define nfserr_hash_alg_unsupp      cpu_to_be32(NFS4ERR_HASH_ALG_UNSUPP)</span></div><div class="line"><a name="l00244"></a><span class="lineno"><a class="line" href="nfsd_8h.html#af373423695fd1982268df67683836f1e">  244</a></span>&#160;<span class="preprocessor">#define nfserr_clientid_busy        cpu_to_be32(NFS4ERR_CLIENTID_BUSY)</span></div><div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a05588772ad05ff245ffa12b70d0154cc">  245</a></span>&#160;<span class="preprocessor">#define nfserr_pnfs_io_hole     cpu_to_be32(NFS4ERR_PNFS_IO_HOLE)</span></div><div class="line"><a name="l00246"></a><span class="lineno"><a class="line" href="nfsd_8h.html#aacdd060b97ade653aa81881bef2f7f2e">  246</a></span>&#160;<span class="preprocessor">#define nfserr_seq_false_retry      cpu_to_be32(NFS4ERR_SEQ_FALSE_RETRY)</span></div><div class="line"><a name="l00247"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a789d98cfc1a273549a56ecbc5d608abc">  247</a></span>&#160;<span class="preprocessor">#define nfserr_bad_high_slot        cpu_to_be32(NFS4ERR_BAD_HIGH_SLOT)</span></div><div class="line"><a name="l00248"></a><span class="lineno"><a class="line" href="nfsd_8h.html#ae8c65ffc2338e96548c31790d6553678">  248</a></span>&#160;<span class="preprocessor">#define nfserr_deadsession      cpu_to_be32(NFS4ERR_DEADSESSION)</span></div><div class="line"><a name="l00249"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a28171a79cd8bfa0ac841969ba0d9a5c7">  249</a></span>&#160;<span class="preprocessor">#define nfserr_encr_alg_unsupp      cpu_to_be32(NFS4ERR_ENCR_ALG_UNSUPP)</span></div><div class="line"><a name="l00250"></a><span class="lineno"><a class="line" href="nfsd_8h.html#af9a2380f6b1537ab0f7cbe26b2ebd6a2">  250</a></span>&#160;<span class="preprocessor">#define nfserr_pnfs_no_layout       cpu_to_be32(NFS4ERR_PNFS_NO_LAYOUT)</span></div><div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a3ecb8e101b25f19fdb4d308fafa458ff">  251</a></span>&#160;<span class="preprocessor">#define nfserr_not_only_op      cpu_to_be32(NFS4ERR_NOT_ONLY_OP)</span></div><div class="line"><a name="l00252"></a><span class="lineno"><a class="line" href="nfsd_8h.html#af59f9b43f9b5f19b04742fe725af766c">  252</a></span>&#160;<span class="preprocessor">#define nfserr_wrong_cred       cpu_to_be32(NFS4ERR_WRONG_CRED)</span></div><div class="line"><a name="l00253"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a9a5abe8c02a7eb9dd59e4b48d9924622">  253</a></span>&#160;<span class="preprocessor">#define nfserr_wrong_type       cpu_to_be32(NFS4ERR_WRONG_TYPE)</span></div><div class="line"><a name="l00254"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a626f0659cad1b5513c4e6b50e1eb6a8a">  254</a></span>&#160;<span class="preprocessor">#define nfserr_dirdeleg_unavail     cpu_to_be32(NFS4ERR_DIRDELEG_UNAVAIL)</span></div><div class="line"><a name="l00255"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a7e8e465a55adbda31d84e06be1c12a59">  255</a></span>&#160;<span class="preprocessor">#define nfserr_reject_deleg     cpu_to_be32(NFS4ERR_REJECT_DELEG)</span></div><div class="line"><a name="l00256"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a92abc38410ba97e92ebf4d89a662f52a">  256</a></span>&#160;<span class="preprocessor">#define nfserr_returnconflict       cpu_to_be32(NFS4ERR_RETURNCONFLICT)</span></div><div class="line"><a name="l00257"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a770f16c89600e6e600bb14cac676fc65">  257</a></span>&#160;<span class="preprocessor">#define nfserr_deleg_revoked        cpu_to_be32(NFS4ERR_DELEG_REVOKED)</span></div><div class="line"><a name="l00258"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a5571e5f3de5e49ff8fd736e2da64e065">  258</a></span>&#160;<span class="preprocessor">#define nfserr_partner_notsupp      cpu_to_be32(NFS4ERR_PARTNER_NOTSUPP)</span></div><div class="line"><a name="l00259"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a4f270b950a24af80a2f579cb168cefb0">  259</a></span>&#160;<span class="preprocessor">#define nfserr_partner_no_auth      cpu_to_be32(NFS4ERR_PARTNER_NO_AUTH)</span></div><div class="line"><a name="l00260"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a22ae318feb502062256fdc5714090532">  260</a></span>&#160;<span class="preprocessor">#define nfserr_union_notsupp        cpu_to_be32(NFS4ERR_UNION_NOTSUPP)</span></div><div class="line"><a name="l00261"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a894fb9af677447d1077bc8949f5d0b91">  261</a></span>&#160;<span class="preprocessor">#define nfserr_offload_denied       cpu_to_be32(NFS4ERR_OFFLOAD_DENIED)</span></div><div class="line"><a name="l00262"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a8914876ed40aeafb769f0a75f849881c">  262</a></span>&#160;<span class="preprocessor">#define nfserr_wrong_lfs        cpu_to_be32(NFS4ERR_WRONG_LFS)</span></div><div class="line"><a name="l00263"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a188f60618ba01619cd828e1cc7b0ffec">  263</a></span>&#160;<span class="preprocessor">#define nfserr_badlabel     cpu_to_be32(NFS4ERR_BADLABEL)</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">/* error codes for internal use */</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">/* if a request fails due to kmalloc failure, it gets dropped.</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment"> *  Client should resend eventually</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00269"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a3987ae41e5fcf44ffa21c2c5393a151d">  269</a></span>&#160;<span class="preprocessor">#define nfserr_dropit       cpu_to_be32(30000)</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">/* end-of-file indicator in readdir */</span></div><div class="line"><a name="l00271"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a078d47ae87650c1cc566dc615bdbe2ba">  271</a></span>&#160;<span class="preprocessor">#define nfserr_eof      cpu_to_be32(30001)</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">/* replay detected */</span></div><div class="line"><a name="l00273"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a513d43474945a560aeb00ef70de36d19">  273</a></span>&#160;<span class="preprocessor">#define nfserr_replay_me    cpu_to_be32(11001)</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">/* nfs41 replay detected */</span></div><div class="line"><a name="l00275"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a3a367242d762de481665c359f513e813">  275</a></span>&#160;<span class="preprocessor">#define nfserr_replay_cache cpu_to_be32(11002)</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">/* Check for dir entries &#39;.&#39; and &#39;..&#39; */</span></div><div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a5800f83fc4c2da3ded29ade64e0c4ba2">  278</a></span>&#160;<span class="preprocessor">#define isdotent(n, l)  (l &lt; 3 &amp;&amp; n[0] == &#39;.&#39; &amp;&amp; (l == 1 || n[1] == &#39;.&#39;))</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="preprocessor">#ifdef CONFIG_NFSD_V4</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">/* before processing a COMPOUND operation, we have to check that there</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment"> * is enough space in the buffer for XDR encode to succeed.  otherwise,</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment"> * we might process an operation with side effects, and be unable to</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment"> * tell the client that the operation succeeded.</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment"> * COMPOUND_SLACK_SPACE - this is the minimum bytes of buffer space</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment"> * needed to encode an &quot;ordinary&quot; _successful_ operation.  (GETATTR,</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment"> * READ, READDIR, and READLINK have their own buffer checks.)  if we</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment"> * fall below this level, we fail the next operation with NFS4ERR_RESOURCE.</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment"> * COMPOUND_ERR_SLACK_SPACE - this is the minimum bytes of buffer space</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment"> * needed to encode an operation which has failed with NFS4ERR_RESOURCE.</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment"> * care is taken to ensure that we never fall below this level for any</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment"> * reason.</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="preprocessor">#define COMPOUND_SLACK_SPACE        140    </span><span class="comment">/* OP_GETFH */</span><span class="preprocessor"></span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="preprocessor">#define COMPOUND_ERR_SLACK_SPACE    16     </span><span class="comment">/* OP_SETATTR */</span><span class="preprocessor"></span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="preprocessor">#define NFSD_LAUNDROMAT_MINTIMEOUT      1   </span><span class="comment">/* seconds */</span><span class="preprocessor"></span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment"> * The following attributes are currently not supported by the NFSv4 server:</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment"> *    ARCHIVE       (deprecated anyway)</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment"> *    HIDDEN        (unlikely to be supported any time soon)</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment"> *    MIMETYPE      (unlikely to be supported any time soon)</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment"> *    QUOTA_*       (will be supported in a forthcoming patch)</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment"> *    SYSTEM        (unlikely to be supported any time soon)</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment"> *    TIME_BACKUP   (unlikely to be supported any time soon)</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment"> *    TIME_CREATE   (unlikely to be supported any time soon)</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="preprocessor">#define NFSD4_SUPPORTED_ATTRS_WORD0                                                         \</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="preprocessor">(FATTR4_WORD0_SUPPORTED_ATTRS   | FATTR4_WORD0_TYPE         | FATTR4_WORD0_FH_EXPIRE_TYPE   \</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="preprocessor"> | FATTR4_WORD0_CHANGE          | FATTR4_WORD0_SIZE         | FATTR4_WORD0_LINK_SUPPORT     \</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="preprocessor"> | FATTR4_WORD0_SYMLINK_SUPPORT | FATTR4_WORD0_NAMED_ATTR   | FATTR4_WORD0_FSID             \</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="preprocessor"> | FATTR4_WORD0_UNIQUE_HANDLES  | FATTR4_WORD0_LEASE_TIME   | FATTR4_WORD0_RDATTR_ERROR     \</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="preprocessor"> | FATTR4_WORD0_ACLSUPPORT      | FATTR4_WORD0_CANSETTIME   | FATTR4_WORD0_CASE_INSENSITIVE \</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="preprocessor"> | FATTR4_WORD0_CASE_PRESERVING | FATTR4_WORD0_CHOWN_RESTRICTED                             \</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="preprocessor"> | FATTR4_WORD0_FILEHANDLE      | FATTR4_WORD0_FILEID       | FATTR4_WORD0_FILES_AVAIL      \</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="preprocessor"> | FATTR4_WORD0_FILES_FREE      | FATTR4_WORD0_FILES_TOTAL  | FATTR4_WORD0_FS_LOCATIONS | FATTR4_WORD0_HOMOGENEOUS      \</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="preprocessor"> | FATTR4_WORD0_MAXFILESIZE     | FATTR4_WORD0_MAXLINK      | FATTR4_WORD0_MAXNAME          \</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="preprocessor"> | FATTR4_WORD0_MAXREAD         | FATTR4_WORD0_MAXWRITE     | FATTR4_WORD0_ACL)</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="preprocessor">#define NFSD4_SUPPORTED_ATTRS_WORD1                                                         \</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="preprocessor">(FATTR4_WORD1_MODE              | FATTR4_WORD1_NO_TRUNC     | FATTR4_WORD1_NUMLINKS         \</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="preprocessor"> | FATTR4_WORD1_OWNER           | FATTR4_WORD1_OWNER_GROUP  | FATTR4_WORD1_RAWDEV           \</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="preprocessor"> | FATTR4_WORD1_SPACE_AVAIL     | FATTR4_WORD1_SPACE_FREE   | FATTR4_WORD1_SPACE_TOTAL      \</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="preprocessor"> | FATTR4_WORD1_SPACE_USED      | FATTR4_WORD1_TIME_ACCESS  | FATTR4_WORD1_TIME_ACCESS_SET  \</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="preprocessor"> | FATTR4_WORD1_TIME_DELTA   | FATTR4_WORD1_TIME_METADATA    \</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="preprocessor"> | FATTR4_WORD1_TIME_MODIFY     | FATTR4_WORD1_TIME_MODIFY_SET | FATTR4_WORD1_MOUNTED_ON_FILEID)</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="preprocessor">#define NFSD4_SUPPORTED_ATTRS_WORD2 0</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment">/* 4.1 */</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="preprocessor">#ifdef CONFIG_NFSD_PNFS</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="preprocessor">#define PNFSD_SUPPORTED_ATTRS_WORD1 FATTR4_WORD1_FS_LAYOUT_TYPES</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="preprocessor">#define PNFSD_SUPPORTED_ATTRS_WORD2 \</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="preprocessor">(FATTR4_WORD2_LAYOUT_BLKSIZE    | FATTR4_WORD2_LAYOUT_TYPES)</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="preprocessor">#define PNFSD_SUPPORTED_ATTRS_WORD1 0</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="preprocessor">#define PNFSD_SUPPORTED_ATTRS_WORD2 0</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CONFIG_NFSD_PNFS */</span><span class="preprocessor"></span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="preprocessor">#define NFSD4_1_SUPPORTED_ATTRS_WORD0 \</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="preprocessor">    NFSD4_SUPPORTED_ATTRS_WORD0</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="preprocessor">#define NFSD4_1_SUPPORTED_ATTRS_WORD1 \</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="preprocessor">    (NFSD4_SUPPORTED_ATTRS_WORD1    | PNFSD_SUPPORTED_ATTRS_WORD1)</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="preprocessor">#define NFSD4_1_SUPPORTED_ATTRS_WORD2 \</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="preprocessor">    (NFSD4_SUPPORTED_ATTRS_WORD2    | PNFSD_SUPPORTED_ATTRS_WORD2 | \</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="preprocessor">     FATTR4_WORD2_SUPPATTR_EXCLCREAT)</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment">/* 4.2 */</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="preprocessor">#ifdef CONFIG_NFSD_V4_SECURITY_LABEL</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="preprocessor">#define NFSD4_2_SECURITY_ATTRS      FATTR4_WORD2_SECURITY_LABEL</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="preprocessor">#define NFSD4_2_SECURITY_ATTRS      0</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="preprocessor">#define NFSD4_2_SUPPORTED_ATTRS_WORD2 \</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="preprocessor">    (NFSD4_1_SUPPORTED_ATTRS_WORD2 | \</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="preprocessor">    FATTR4_WORD2_MODE_UMASK | \</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="preprocessor">    NFSD4_2_SECURITY_ATTRS)</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> u32 <a class="code" href="_2nfs4xdr_8c.html#a55bf4090e59b55d269fb91f749bdefe9">nfsd_suppattrs</a>[3][3];</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> bmval_is_subset(<span class="keyword">const</span> u32 *bm1, <span class="keyword">const</span> u32 *bm2)</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;{</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordflow">return</span> !((bm1[0] &amp; ~bm2[0]) ||</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;             (bm1[1] &amp; ~bm2[1]) ||</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;         (bm1[2] &amp; ~bm2[2]));</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;}</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> nfsd_attrs_supported(u32 minorversion, <span class="keyword">const</span> u32 *bmval)</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;{</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keywordflow">return</span> bmval_is_subset(bmval, <a class="code" href="_2nfs4xdr_8c.html#a55bf4090e59b55d269fb91f749bdefe9">nfsd_suppattrs</a>[minorversion]);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;}</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment">/* These will return ERR_INVAL if specified in GETATTR or READDIR. */</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="preprocessor">#define NFSD_WRITEONLY_ATTRS_WORD1 \</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="preprocessor">    (FATTR4_WORD1_TIME_ACCESS_SET   | FATTR4_WORD1_TIME_MODIFY_SET)</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment"> * These are the only attrs allowed in CREATE/OPEN/SETATTR. Don&#39;t add</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment"> * a writeable attribute here without also adding code to parse it to</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment"> * nfsd4_decode_fattr().</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="preprocessor">#define NFSD_WRITEABLE_ATTRS_WORD0 \</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="preprocessor">    (FATTR4_WORD0_SIZE | FATTR4_WORD0_ACL)</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="preprocessor">#define NFSD_WRITEABLE_ATTRS_WORD1 \</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="preprocessor">    (FATTR4_WORD1_MODE | FATTR4_WORD1_OWNER | FATTR4_WORD1_OWNER_GROUP \</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="preprocessor">    | FATTR4_WORD1_TIME_ACCESS_SET | FATTR4_WORD1_TIME_MODIFY_SET)</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="preprocessor">#ifdef CONFIG_NFSD_V4_SECURITY_LABEL</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="preprocessor">#define MAYBE_FATTR4_WORD2_SECURITY_LABEL \</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="preprocessor">    FATTR4_WORD2_SECURITY_LABEL</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="preprocessor">#define MAYBE_FATTR4_WORD2_SECURITY_LABEL 0</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="preprocessor">#define NFSD_WRITEABLE_ATTRS_WORD2 \</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="preprocessor">    (FATTR4_WORD2_MODE_UMASK \</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="preprocessor">    | MAYBE_FATTR4_WORD2_SECURITY_LABEL)</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="preprocessor">#define NFSD_SUPPATTR_EXCLCREAT_WORD0 \</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="preprocessor">    NFSD_WRITEABLE_ATTRS_WORD0</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment"> * we currently store the exclusive create verifier in the v_{a,m}time</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment"> * attributes so the client can&#39;t set these at create time using EXCLUSIVE4_1</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="preprocessor">#define NFSD_SUPPATTR_EXCLCREAT_WORD1 \</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="preprocessor">    (NFSD_WRITEABLE_ATTRS_WORD1 &amp; \</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="preprocessor">     ~(FATTR4_WORD1_TIME_ACCESS_SET | FATTR4_WORD1_TIME_MODIFY_SET))</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="preprocessor">#define NFSD_SUPPATTR_EXCLCREAT_WORD2 \</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="preprocessor">    NFSD_WRITEABLE_ATTRS_WORD2</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="nfsd_8h.html#aaa5e24d09fb4eb6ad12df4d256bd5c55">nfsd4_is_junction</a>(<span class="keyword">struct</span> dentry *dentry);</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="nfsd_8h.html#a69119e675d2800d26154174ad712eb66">register_cld_notifier</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="nfsd_8h.html#a390eefe4abe3e89ba6f7c1753dfdc64c">unregister_cld_notifier</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* CONFIG_NFSD_V4 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00420"></a><span class="lineno"><a class="line" href="nfsd_8h.html#aaa5e24d09fb4eb6ad12df4d256bd5c55">  420</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="nfsd_8h.html#aaa5e24d09fb4eb6ad12df4d256bd5c55">nfsd4_is_junction</a>(<span class="keyword">struct</span> dentry *dentry)</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;{</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;}</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div><div class="line"><a name="l00425"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a69119e675d2800d26154174ad712eb66">  425</a></span>&#160;<span class="preprocessor">#define register_cld_notifier() 0</span></div><div class="line"><a name="l00426"></a><span class="lineno"><a class="line" href="nfsd_8h.html#a390eefe4abe3e89ba6f7c1753dfdc64c">  426</a></span>&#160;<span class="preprocessor">#define unregister_cld_notifier() do { } while(0)</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CONFIG_NFSD_V4 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* LINUX_NFSD_NFSD_H */</span><span class="preprocessor"></span></div><div class="ttc" id="nfsd_8h_html_a770d0756138e88c7f627621bc4bc4e63"><div class="ttname"><a href="nfsd_8h.html#a770d0756138e88c7f627621bc4bc4e63">nfsd_mutex</a></div><div class="ttdeci">struct mutex nfsd_mutex</div></div>
<div class="ttc" id="nfsd_8h_html_ab09810bc8ca720723ea64bfa954908b3"><div class="ttname"><a href="nfsd_8h.html#ab09810bc8ca720723ea64bfa954908b3">nfs4_state_shutdown</a></div><div class="ttdeci">static void nfs4_state_shutdown(void)</div><div class="ttdef"><b>Definition:</b> nfsd.h:134</div></div>
<div class="ttc" id="nfsd_8h_html_a202be3aa4f1a2453cde2ee53d52ba869"><div class="ttname"><a href="nfsd_8h.html#a202be3aa4f1a2453cde2ee53d52ba869">nfsd_drc_max_mem</a></div><div class="ttdeci">unsigned long nfsd_drc_max_mem</div><div class="ttdef"><b>Definition:</b> nfssvc.c:67</div></div>
<div class="ttc" id="nfsd_8h_html_ab1817dd7140c6592eee04f72f1784a64"><div class="ttname"><a href="nfsd_8h.html#ab1817dd7140c6592eee04f72f1784a64">nfs4_recoverydir</a></div><div class="ttdeci">static char * nfs4_recoverydir(void)</div><div class="ttdef"><b>Definition:</b> nfsd.h:138</div></div>
<div class="ttc" id="nfsd_2export_8h_html"><div class="ttname"><a href="nfsd_2export_8h.html">export.h</a></div></div>
<div class="ttc" id="nfsd_8h_html_aaa5e24d09fb4eb6ad12df4d256bd5c55"><div class="ttname"><a href="nfsd_8h.html#aaa5e24d09fb4eb6ad12df4d256bd5c55">nfsd4_is_junction</a></div><div class="ttdeci">static int nfsd4_is_junction(struct dentry *dentry)</div><div class="ttdef"><b>Definition:</b> nfsd.h:420</div></div>
<div class="ttc" id="_2nfs4state_8c_html_afbf1e0531bc76344dff33b4fe3d209f7"><div class="ttname"><a href="_2nfs4state_8c.html#afbf1e0531bc76344dff33b4fe3d209f7">max_delegations</a></div><div class="ttdeci">unsigned long max_delegations</div><div class="ttdef"><b>Definition:</b> nfs4state.c:484</div></div>
<div class="ttc" id="nfsd_8h_html_ad02804ffdfa1e7c1aacd07770fd6a189"><div class="ttname"><a href="nfsd_8h.html#ad02804ffdfa1e7c1aacd07770fd6a189">nfsd_drc_lock</a></div><div class="ttdeci">spinlock_t nfsd_drc_lock</div><div class="ttdef"><b>Definition:</b> nfssvc.c:66</div></div>
<div class="ttc" id="nfsd_8h_html_a390eefe4abe3e89ba6f7c1753dfdc64c"><div class="ttname"><a href="nfsd_8h.html#a390eefe4abe3e89ba6f7c1753dfdc64c">unregister_cld_notifier</a></div><div class="ttdeci">#define unregister_cld_notifier()</div><div class="ttdef"><b>Definition:</b> nfsd.h:426</div></div>
<div class="ttc" id="nfsd_8h_html_ada79cc6410080e91572a78bcf8a5289f"><div class="ttname"><a href="nfsd_8h.html#ada79cc6410080e91572a78bcf8a5289f">nfsd_lockd_init</a></div><div class="ttdeci">void nfsd_lockd_init(void)</div><div class="ttdef"><b>Definition:</b> lockd.c:68</div></div>
<div class="ttc" id="nfsd_8h_html_a69119e675d2800d26154174ad712eb66"><div class="ttname"><a href="nfsd_8h.html#a69119e675d2800d26154174ad712eb66">register_cld_notifier</a></div><div class="ttdeci">#define register_cld_notifier()</div><div class="ttdef"><b>Definition:</b> nfsd.h:425</div></div>
<div class="ttc" id="nfsd_8h_html_a47e9d8bdfd1aad3f9fa1349b07a00d51"><div class="ttname"><a href="nfsd_8h.html#a47e9d8bdfd1aad3f9fa1349b07a00d51">nfsd_pool_stats_release</a></div><div class="ttdeci">int nfsd_pool_stats_release(struct inode *, struct file *)</div><div class="ttdef"><b>Definition:</b> nfssvc.c:883</div></div>
<div class="ttc" id="nfsd_8h_html_ab54934322cd072775734285f476a1476"><div class="ttname"><a href="nfsd_8h.html#ab54934322cd072775734285f476a1476">nfsd_reset_versions</a></div><div class="ttdeci">void nfsd_reset_versions(void)</div><div class="ttdef"><b>Definition:</b> nfssvc.c:425</div></div>
<div class="ttc" id="nfs2acl_8c_html_aed80ed6a40466ac5b512b88294b92f0c"><div class="ttname"><a href="nfs2acl_8c.html#aed80ed6a40466ac5b512b88294b92f0c">nfsd_acl_version2</a></div><div class="ttdeci">const struct svc_version nfsd_acl_version2</div><div class="ttdef"><b>Definition:</b> nfs2acl.c:383</div></div>
<div class="ttc" id="nfsd_8h_html_ad710af3e7860760942c8a18d45534f05"><div class="ttname"><a href="nfsd_8h.html#ad710af3e7860760942c8a18d45534f05">nfsd_max_blksize</a></div><div class="ttdeci">int nfsd_max_blksize</div><div class="ttdef"><b>Definition:</b> nfsctl.c:864</div></div>
<div class="ttc" id="nfsd_8h_html_a45cd9b552bb727e197f6594f006f1dc6"><div class="ttname"><a href="nfsd_8h.html#a45cd9b552bb727e197f6594f006f1dc6">nfs4_reset_lease</a></div><div class="ttdeci">static void nfs4_reset_lease(time_t leasetime)</div><div class="ttdef"><b>Definition:</b> nfsd.h:136</div></div>
<div class="ttc" id="nfsd_8h_html_a4d18d79b4ed71e82ce05396c002b70dd"><div class="ttname"><a href="nfsd_8h.html#a4d18d79b4ed71e82ce05396c002b70dd">nfsd4_spo_must_allow</a></div><div class="ttdeci">static bool nfsd4_spo_must_allow(struct svc_rqst *rqstp)</div><div class="ttdef"><b>Definition:</b> nfsd.h:139</div></div>
<div class="ttc" id="_2nfs4xdr_8c_html_a55bf4090e59b55d269fb91f749bdefe9"><div class="ttname"><a href="_2nfs4xdr_8c.html#a55bf4090e59b55d269fb91f749bdefe9">nfsd_suppattrs</a></div><div class="ttdeci">const u32 nfsd_suppattrs[3][3]</div><div class="ttdef"><b>Definition:</b> nfs4xdr.c:60</div></div>
<div class="ttc" id="nfsd_8h_html_a74e4c44dfbe178477f5f5730308db04a"><div class="ttname"><a href="nfsd_8h.html#a74e4c44dfbe178477f5f5730308db04a">nfsd_nrpools</a></div><div class="ttdeci">int nfsd_nrpools(struct net *)</div><div class="ttdef"><b>Definition:</b> nfssvc.c:532</div></div>
<div class="ttc" id="stats_8h_html"><div class="ttname"><a href="stats_8h.html">stats.h</a></div></div>
<div class="ttc" id="nfsd_8h_html_a5c1edada6342201142f217a02308ca73"><div class="ttname"><a href="nfsd_8h.html#a5c1edada6342201142f217a02308ca73">nfsd_drc_mem_used</a></div><div class="ttdeci">unsigned long nfsd_drc_mem_used</div><div class="ttdef"><b>Definition:</b> nfssvc.c:68</div></div>
<div class="ttc" id="structreaddir__cd_html_aa2c0b77f06945e573059395e7b69daef"><div class="ttname"><a href="structreaddir__cd.html#aa2c0b77f06945e573059395e7b69daef">readdir_cd::err</a></div><div class="ttdeci">__be32 err</div><div class="ttdef"><b>Definition:</b> nfsd.h:59</div></div>
<div class="ttc" id="nfsd_8h_html_a221afc5d6309df5c5b83b605d0a0362c"><div class="ttname"><a href="nfsd_8h.html#a221afc5d6309df5c5b83b605d0a0362c">vers_op</a></div><div class="ttdeci">vers_op</div><div class="ttdef"><b>Definition:</b> nfsd.h:101</div></div>
<div class="ttc" id="nfsd_8h_html_a2340443cfa95fa345844de1184c8d300"><div class="ttname"><a href="nfsd_8h.html#a2340443cfa95fa345844de1184c8d300">nfsd_v4client</a></div><div class="ttdeci">static int nfsd_v4client(struct svc_rqst *rq)</div><div class="ttdef"><b>Definition:</b> nfsd.h:109</div></div>
<div class="ttc" id="nfsproc_8c_html_a32f7b2ed50225e76a1d7388a73a7b044"><div class="ttname"><a href="nfsproc_8c.html#a32f7b2ed50225e76a1d7388a73a7b044">svc_rqst</a></div><div class="ttdeci">struct svc_rqst svc_rqst</div><div class="ttdef"><b>Definition:</b> nfsproc.c:14</div></div>
<div class="ttc" id="structreaddir__cd_html"><div class="ttname"><a href="structreaddir__cd.html">readdir_cd</a></div><div class="ttdef"><b>Definition:</b> nfsd.h:58</div></div>
<div class="ttc" id="summary_8h_html_a63c41f9614ee9a4e1beb75eabad72f22"><div class="ttname"><a href="summary_8h.html#a63c41f9614ee9a4e1beb75eabad72f22">inode</a></div><div class="ttdeci">jint32_t inode</div><div class="ttdef"><b>Definition:</b> summary.h:848</div></div>
<div class="ttc" id="nfsd_8h_html_a221afc5d6309df5c5b83b605d0a0362cac040d0bf58cc483c81232f9c41cc1651"><div class="ttname"><a href="nfsd_8h.html#a221afc5d6309df5c5b83b605d0a0362cac040d0bf58cc483c81232f9c41cc1651">NFSD_SET</a></div><div class="ttdef"><b>Definition:</b> nfsd.h:101</div></div>
<div class="ttc" id="_2nfs3acl_8c_html_a3141295fb137cdf8878fd50186335f9a"><div class="ttname"><a href="_2nfs3acl_8c.html#a3141295fb137cdf8878fd50186335f9a">nfsd_acl_version3</a></div><div class="ttdeci">const struct svc_version nfsd_acl_version3</div><div class="ttdef"><b>Definition:</b> nfs3acl.c:268</div></div>
<div class="ttc" id="nfsd_8h_html_aed98f080c25a91f884d6b2f3cef2044f"><div class="ttname"><a href="nfsd_8h.html#aed98f080c25a91f884d6b2f3cef2044f">nfs4_state_start_net</a></div><div class="ttdeci">static int nfs4_state_start_net(struct net *net)</div><div class="ttdef"><b>Definition:</b> nfsd.h:133</div></div>
<div class="ttc" id="nfsd_8h_html_aabdf2bfa45ebcd6c9cc7d34ba0b2bb5a"><div class="ttname"><a href="nfsd_8h.html#aabdf2bfa45ebcd6c9cc7d34ba0b2bb5a">nfsd4_free_slabs</a></div><div class="ttdeci">static void nfsd4_free_slabs(void)</div><div class="ttdef"><b>Definition:</b> nfsd.h:131</div></div>
<div class="ttc" id="nfsd_8h_html_a221afc5d6309df5c5b83b605d0a0362ca6367ce82523052262dbcc0b4b1cd5cb9"><div class="ttname"><a href="nfsd_8h.html#a221afc5d6309df5c5b83b605d0a0362ca6367ce82523052262dbcc0b4b1cd5cb9">NFSD_AVAIL</a></div><div class="ttdef"><b>Definition:</b> nfsd.h:101</div></div>
<div class="ttc" id="nfsd_8h_html_ab16a54e42646255f478e78140616a943"><div class="ttname"><a href="nfsd_8h.html#ab16a54e42646255f478e78140616a943">nfsd_set_nrthreads</a></div><div class="ttdeci">int nfsd_set_nrthreads(int n, int *, struct net *)</div><div class="ttdef"><b>Definition:</b> nfssvc.c:567</div></div>
<div class="ttc" id="nfsd_8h_html_a221afc5d6309df5c5b83b605d0a0362ca06af7e929d2223be5da2a0a0704362a7"><div class="ttname"><a href="nfsd_8h.html#a221afc5d6309df5c5b83b605d0a0362ca06af7e929d2223be5da2a0a0704362a7">NFSD_CLEAR</a></div><div class="ttdef"><b>Definition:</b> nfsd.h:101</div></div>
<div class="ttc" id="nfsd_8h_html_a26861400f66c8ab1ea02f59c23430e38"><div class="ttname"><a href="nfsd_8h.html#a26861400f66c8ab1ea02f59c23430e38">nfsd_lockd_shutdown</a></div><div class="ttdeci">void nfsd_lockd_shutdown(void)</div><div class="ttdef"><b>Definition:</b> lockd.c:75</div></div>
<div class="ttc" id="nfsd_8h_html_a3129c7833ad246e7a78c197aef118ef6"><div class="ttname"><a href="nfsd_8h.html#a3129c7833ad246e7a78c197aef118ef6">nfsd_destroy</a></div><div class="ttdeci">void nfsd_destroy(struct net *net)</div><div class="ttdef"><b>Definition:</b> nfssvc.c:555</div></div>
<div class="ttc" id="nfsd_8h_html_a7fc6ffd76b5c924062fa52b0bedb7cd0"><div class="ttname"><a href="nfsd_8h.html#a7fc6ffd76b5c924062fa52b0bedb7cd0">nfsd_get_nrthreads</a></div><div class="ttdeci">int nfsd_get_nrthreads(int n, int *, struct net *)</div><div class="ttdef"><b>Definition:</b> nfssvc.c:542</div></div>
<div class="ttc" id="nfsd_8h_html_a18011f02c335af51255f99c2cce62db3"><div class="ttname"><a href="nfsd_8h.html#a18011f02c335af51255f99c2cce62db3">nfs4_state_start</a></div><div class="ttdeci">static int nfs4_state_start(void)</div><div class="ttdef"><b>Definition:</b> nfsd.h:132</div></div>
<div class="ttc" id="nfsd_8h_html_ad4209ee69c7a09cb79aae0320a2f940e"><div class="ttname"><a href="nfsd_8h.html#ad4209ee69c7a09cb79aae0320a2f940e">nfs_exports_op</a></div><div class="ttdeci">const struct seq_operations nfs_exports_op</div><div class="ttdef"><b>Definition:</b> export.c:1217</div></div>
<div class="ttc" id="nfsd_8h_html_adbd96515fb295c1b4e4a4058e4cc1296"><div class="ttname"><a href="nfsd_8h.html#adbd96515fb295c1b4e4a4058e4cc1296">nfs4_state_shutdown_net</a></div><div class="ttdeci">static void nfs4_state_shutdown_net(struct net *net)</div><div class="ttdef"><b>Definition:</b> nfsd.h:135</div></div>
<div class="ttc" id="nfsd_8h_html_aababe93825f17901c38ae207f057d0a5"><div class="ttname"><a href="nfsd_8h.html#aababe93825f17901c38ae207f057d0a5">nfsd_nrthreads</a></div><div class="ttdeci">int nfsd_nrthreads(struct net *)</div><div class="ttdef"><b>Definition:</b> nfssvc.c:196</div></div>
<div class="ttc" id="nfsd_8h_html_ada372426164cc6d508f879a00f91628b"><div class="ttname"><a href="nfsd_8h.html#ada372426164cc6d508f879a00f91628b">nfsd_svc</a></div><div class="ttdeci">int nfsd_svc(int nrservs, struct net *net)</div><div class="ttdef"><b>Definition:</b> nfssvc.c:626</div></div>
<div class="ttc" id="nfsd_8h_html_adce58307c4e28cca76873661eed9046f"><div class="ttname"><a href="nfsd_8h.html#adce58307c4e28cca76873661eed9046f">nfsd_dispatch</a></div><div class="ttdeci">int nfsd_dispatch(struct svc_rqst *rqstp, __be32 *statp)</div><div class="ttdef"><b>Definition:</b> nfssvc.c:791</div></div>
<div class="ttc" id="nfsd_8h_html_a81c08e0e5c8725a166bf95379177f9cd"><div class="ttname"><a href="nfsd_8h.html#a81c08e0e5c8725a166bf95379177f9cd">nfsd_minorversion</a></div><div class="ttdeci">int nfsd_minorversion(u32 minorversion, enum vers_op change)</div><div class="ttdef"><b>Definition:</b> nfssvc.c:169</div></div>
<div class="ttc" id="nfsproc_8c_html_ad20af4a8966ee9bb37f681e1c361be0c"><div class="ttname"><a href="nfsproc_8c.html#ad20af4a8966ee9bb37f681e1c361be0c">nfsd_version2</a></div><div class="ttdeci">const struct svc_version nfsd_version2</div><div class="ttdef"><b>Definition:</b> nfsproc.c:755</div></div>
<div class="ttc" id="nfsd_8h_html_a221afc5d6309df5c5b83b605d0a0362ca5a33d467768c336993cf8c8e7a8080de"><div class="ttname"><a href="nfsd_8h.html#a221afc5d6309df5c5b83b605d0a0362ca5a33d467768c336993cf8c8e7a8080de">NFSD_TEST</a></div><div class="ttdef"><b>Definition:</b> nfsd.h:101</div></div>
<div class="ttc" id="nfsd_8h_html_a3458694766bf7c3f7d5abe235b429d9d"><div class="ttname"><a href="nfsd_8h.html#a3458694766bf7c3f7d5abe235b429d9d">nfsd_pool_stats_open</a></div><div class="ttdeci">int nfsd_pool_stats_open(struct inode *, struct file *)</div><div class="ttdef"><b>Definition:</b> nfssvc.c:866</div></div>
<div class="ttc" id="nfsd_8h_html_ae0751dcd6dbfa4aad2c28d03254a7894"><div class="ttname"><a href="nfsd_8h.html#ae0751dcd6dbfa4aad2c28d03254a7894">nfsd_vers</a></div><div class="ttdeci">int nfsd_vers(int vers, enum vers_op change)</div><div class="ttdef"><b>Definition:</b> nfssvc.c:130</div></div>
<div class="ttc" id="nfsd_8h_html_aaa8fcc7528f6bce6191f8ca701fa68f0"><div class="ttname"><a href="nfsd_8h.html#aaa8fcc7528f6bce6191f8ca701fa68f0">nfs4_reset_recoverydir</a></div><div class="ttdeci">static int nfs4_reset_recoverydir(char *recdir)</div><div class="ttdef"><b>Definition:</b> nfsd.h:137</div></div>
<div class="ttc" id="nfsd_8h_html_ae6059e80ec58754112ded31e132b0958"><div class="ttname"><a href="nfsd_8h.html#ae6059e80ec58754112ded31e132b0958">nfsd_program</a></div><div class="ttdeci">struct svc_program nfsd_program</div><div class="ttdef"><b>Definition:</b> nfssvc.c:110</div></div>
<div class="ttc" id="nfsd_8h_html_ad13e5644050ad04af42a31c53eca6904"><div class="ttname"><a href="nfsd_8h.html#ad13e5644050ad04af42a31c53eca6904">nfsd_create_serv</a></div><div class="ttdeci">int nfsd_create_serv(struct net *net)</div><div class="ttdef"><b>Definition:</b> nfssvc.c:494</div></div>
<div class="ttc" id="nfsd_8h_html_ac2e733a9dfa124c9f0d6cf7eb769a786"><div class="ttname"><a href="nfsd_8h.html#ac2e733a9dfa124c9f0d6cf7eb769a786">nfsd_version4</a></div><div class="ttdeci">const struct svc_version nfsd_version2 nfsd_version3 nfsd_version4</div><div class="ttdef"><b>Definition:</b> nfs4proc.c:2559</div></div>
<div class="ttc" id="nfsd_8h_html_aea7d95a8c8d2bb2fbb6f5f86281395e1"><div class="ttname"><a href="nfsd_8h.html#aea7d95a8c8d2bb2fbb6f5f86281395e1">nfsd4_init_slabs</a></div><div class="ttdeci">static int nfsd4_init_slabs(void)</div><div class="ttdef"><b>Definition:</b> nfsd.h:130</div></div>
<div class="ttc" id="_2nfs3proc_8c_html_a1150a996a93bbe17ea04f8e620ca1617"><div class="ttname"><a href="_2nfs3proc_8c.html#a1150a996a93bbe17ea04f8e620ca1617">nfsd_version3</a></div><div class="ttdeci">const struct svc_version nfsd_version3</div><div class="ttdef"><b>Definition:</b> nfs3proc.c:909</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_37a5c16207e2fb12d0585b778b336f42.html">nfsd</a></li><li class="navelem"><a class="el" href="nfsd_8h.html">nfsd.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>linux/fs: nilfs2/sufile.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">linux/fs
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('sufile_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">sufile.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;linux/kernel.h&gt;</code><br />
<code>#include &lt;linux/fs.h&gt;</code><br />
<code>#include &lt;linux/string.h&gt;</code><br />
<code>#include &lt;linux/buffer_head.h&gt;</code><br />
<code>#include &lt;linux/errno.h&gt;</code><br />
<code>#include &quot;<a class="el" href="mdt_8h_source.html">mdt.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sufile_8h_source.html">sufile.h</a>&quot;</code><br />
<code>#include &lt;trace/events/nilfs2.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for sufile.c:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c__incl.png" border="0" usemap="#nilfs2_2sufile_8c" alt=""/></div>
<map name="nilfs2_2sufile_8c" id="nilfs2_2sufile_8c">
<area shape="rect" id="node7" href="mdt_8h.html" title="mdt.h" alt="" coords="991,155,1045,181"/>
<area shape="rect" id="node24" href="sufile_8h.html" title="sufile.h" alt="" coords="893,80,957,107"/>
<area shape="rect" id="node9" href="nilfs_8h.html" title="nilfs.h" alt="" coords="864,304,921,331"/>
<area shape="rect" id="node23" href="page_8h.html" title="page.h" alt="" coords="1022,229,1083,256"/>
<area shape="rect" id="node14" href="the__nilfs_8h.html" title="the_nilfs.h" alt="" coords="409,453,491,480"/>
<area shape="rect" id="node20" href="nilfs2_2bmap_8h.html" title="bmap.h" alt="" coords="803,379,868,405"/>
<area shape="rect" id="node21" href="nilfs2_2alloc_8h.html" title="alloc.h" alt="" coords="805,453,865,480"/>
<area shape="rect" id="node22" href="dat_8h.html" title="dat.h" alt="" coords="890,453,941,480"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnilfs__sufile__info.html">nilfs_sufile_info</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:acbb532a1df92111d05a67092edbfd65b"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structnilfs__sufile__info.html">nilfs_sufile_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b">NILFS_SUI</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile)</td></tr>
<tr class="separator:acbb532a1df92111d05a67092edbfd65b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a048a58aad760411d79b7e01d28babbb5"><td class="memItemLeft" align="right" valign="top">static unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5">nilfs_sufile_segment_usages_per_block</a> (const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile)</td></tr>
<tr class="separator:a048a58aad760411d79b7e01d28babbb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10c3757a2afcb34eb7d66ee614608724"><td class="memItemLeft" align="right" valign="top">static unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724">nilfs_sufile_get_blkoff</a> (const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile, __u64 segnum)</td></tr>
<tr class="separator:a10c3757a2afcb34eb7d66ee614608724"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a618eb2bb692e0a971e9606f29e87261c"><td class="memItemLeft" align="right" valign="top">static unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c">nilfs_sufile_get_offset</a> (const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile, __u64 segnum)</td></tr>
<tr class="separator:a618eb2bb692e0a971e9606f29e87261c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34ecb984fd0f57101d2ee0b4bde4bf95"><td class="memItemLeft" align="right" valign="top">static unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8c.html#a34ecb984fd0f57101d2ee0b4bde4bf95">nilfs_sufile_segment_usages_in_block</a> (const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile, __u64 curr, __u64 max)</td></tr>
<tr class="separator:a34ecb984fd0f57101d2ee0b4bde4bf95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22641f45cc119a770bda855c5e2e6fcb"><td class="memItemLeft" align="right" valign="top">static struct nilfs_segment_usage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb">nilfs_sufile_block_get_segment_usage</a> (const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile, __u64 segnum, struct buffer_head *bh, void *kaddr)</td></tr>
<tr class="separator:a22641f45cc119a770bda855c5e2e6fcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7df3cdff37c5aa00cca3458f1d7d400e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8c.html#a7df3cdff37c5aa00cca3458f1d7d400e">nilfs_sufile_get_header_block</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile, struct buffer_head **bhp)</td></tr>
<tr class="separator:a7df3cdff37c5aa00cca3458f1d7d400e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38f2abf7ef7577b1af4b9e8fc9316727"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8c.html#a38f2abf7ef7577b1af4b9e8fc9316727">nilfs_sufile_get_segment_usage_block</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile, __u64 segnum, int create, struct buffer_head **bhp)</td></tr>
<tr class="separator:a38f2abf7ef7577b1af4b9e8fc9316727"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c6906f2fa7470c98e36fadfed86c294"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8c.html#a6c6906f2fa7470c98e36fadfed86c294">nilfs_sufile_delete_segment_usage_block</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile, __u64 segnum)</td></tr>
<tr class="separator:a6c6906f2fa7470c98e36fadfed86c294"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1d36bfa94541a3fdad59955464852ea"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea">nilfs_sufile_mod_counter</a> (struct buffer_head *header_bh, u64 ncleanadd, u64 ndirtyadd)</td></tr>
<tr class="separator:af1d36bfa94541a3fdad59955464852ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50c0d7ff8c8bf821d281286007c39cd5"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8c.html#a50c0d7ff8c8bf821d281286007c39cd5">nilfs_sufile_get_ncleansegs</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile)</td></tr>
<tr class="separator:a50c0d7ff8c8bf821d281286007c39cd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab23fa738fd953c9957776612e1317492"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8c.html#ab23fa738fd953c9957776612e1317492">nilfs_sufile_updatev</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile, __u64 *segnumv, size_t nsegs, int create, size_t *ndone, void(*dofunc)(struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *, __u64, struct buffer_head *, struct buffer_head *))</td></tr>
<tr class="separator:ab23fa738fd953c9957776612e1317492"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe69341b840700471e118f002ea07d84"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8c.html#afe69341b840700471e118f002ea07d84">nilfs_sufile_update</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile, __u64 segnum, int create, void(*dofunc)(struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *, __u64, struct buffer_head *, struct buffer_head *))</td></tr>
<tr class="separator:afe69341b840700471e118f002ea07d84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0bd62c3d3681b821085c55c413aa1bb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8c.html#ac0bd62c3d3681b821085c55c413aa1bb">nilfs_sufile_set_alloc_range</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile, __u64 <a class="el" href="cifspdu_8h.html#a94f8d852c02921f3079f6987b4a5d7d0">start</a>, __u64 end)</td></tr>
<tr class="separator:ac0bd62c3d3681b821085c55c413aa1bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6af95c8f1e6b7fedd7f95421e2eeafe6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8c.html#a6af95c8f1e6b7fedd7f95421e2eeafe6">nilfs_sufile_alloc</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile, __u64 *segnump)</td></tr>
<tr class="separator:a6af95c8f1e6b7fedd7f95421e2eeafe6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab405480a777b640ff03b7c335b375a24"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8c.html#ab405480a777b640ff03b7c335b375a24">nilfs_sufile_do_cancel_free</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile, __u64 segnum, struct buffer_head *header_bh, struct buffer_head *su_bh)</td></tr>
<tr class="separator:ab405480a777b640ff03b7c335b375a24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ae81c72eacf55adbfe6e7f702e88588"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8c.html#a8ae81c72eacf55adbfe6e7f702e88588">nilfs_sufile_do_scrap</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile, __u64 segnum, struct buffer_head *header_bh, struct buffer_head *su_bh)</td></tr>
<tr class="separator:a8ae81c72eacf55adbfe6e7f702e88588"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10ddb1ac5848e2b7336c9e3f759beccf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8c.html#a10ddb1ac5848e2b7336c9e3f759beccf">nilfs_sufile_do_free</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile, __u64 segnum, struct buffer_head *header_bh, struct buffer_head *su_bh)</td></tr>
<tr class="separator:a10ddb1ac5848e2b7336c9e3f759beccf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5c9db186be6baf07d66e049a0fd9b9b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8c.html#ae5c9db186be6baf07d66e049a0fd9b9b">nilfs_sufile_mark_dirty</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile, __u64 segnum)</td></tr>
<tr class="separator:ae5c9db186be6baf07d66e049a0fd9b9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6379742426c30d02072b1a5b0f527f8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8c.html#ac6379742426c30d02072b1a5b0f527f8">nilfs_sufile_set_segment_usage</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile, __u64 segnum, unsigned long <a class="el" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033">nblocks</a>, time64_t modtime)</td></tr>
<tr class="separator:ac6379742426c30d02072b1a5b0f527f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e2abc1d2040e49935a1448ce3c3c43e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8c.html#a9e2abc1d2040e49935a1448ce3c3c43e">nilfs_sufile_get_stat</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile, struct nilfs_sustat *sustat)</td></tr>
<tr class="separator:a9e2abc1d2040e49935a1448ce3c3c43e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a044384f23ae4138292187d4d60d4cc94"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8c.html#a044384f23ae4138292187d4d60d4cc94">nilfs_sufile_do_set_error</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile, __u64 segnum, struct buffer_head *header_bh, struct buffer_head *su_bh)</td></tr>
<tr class="separator:a044384f23ae4138292187d4d60d4cc94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06bf3b2669ffdbe7c8809d8c3b730cbc"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc">nilfs_sufile_truncate_range</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile, __u64 <a class="el" href="cifspdu_8h.html#a94f8d852c02921f3079f6987b4a5d7d0">start</a>, __u64 end)</td></tr>
<tr class="separator:a06bf3b2669ffdbe7c8809d8c3b730cbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9feb3258026bbd1136c545e911c5d91"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8c.html#ac9feb3258026bbd1136c545e911c5d91">nilfs_sufile_resize</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile, __u64 newnsegs)</td></tr>
<tr class="separator:ac9feb3258026bbd1136c545e911c5d91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e877b67f3c19b343311b97a6554c0ba"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8c.html#a1e877b67f3c19b343311b97a6554c0ba">nilfs_sufile_get_suinfo</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile, __u64 segnum, void *buf, unsigned int sisz, size_t nsi)</td></tr>
<tr class="separator:a1e877b67f3c19b343311b97a6554c0ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac063361c980263bb8906571633cfcf2d"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8c.html#ac063361c980263bb8906571633cfcf2d">nilfs_sufile_set_suinfo</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile, void *buf, unsigned int supsz, size_t nsup)</td></tr>
<tr class="separator:ac063361c980263bb8906571633cfcf2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a202058a1d5a7ee3658e8e7cda1ffee37"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8c.html#a202058a1d5a7ee3658e8e7cda1ffee37">nilfs_sufile_trim_fs</a> (struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *sufile, struct fstrim_range *range)</td></tr>
<tr class="separator:a202058a1d5a7ee3658e8e7cda1ffee37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ad0af8131357596ac729f04c3009e15"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sufile_8c.html#a3ad0af8131357596ac729f04c3009e15">nilfs_sufile_read</a> (struct <a class="el" href="structsuper__block.html">super_block</a> *<a class="el" href="ntfs_2debug_8h.html#a65b1b0602e37268ec9bc2c240a676c39">sb</a>, size_t susize, struct nilfs_inode *raw_inode, struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> **inodep)</td></tr>
<tr class="separator:a3ad0af8131357596ac729f04c3009e15"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a6af95c8f1e6b7fedd7f95421e2eeafe6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6af95c8f1e6b7fedd7f95421e2eeafe6">&#9670;&nbsp;</a></span>nilfs_sufile_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nilfs_sufile_alloc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64 *&#160;</td>
          <td class="paramname"><em>segnump</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>nilfs_sufile_alloc - allocate a segment : inode of segment usage file : pointer to segment number</p>
<p>Description: <a class="el" href="sufile_8c.html#a6af95c8f1e6b7fedd7f95421e2eeafe6">nilfs_sufile_alloc()</a> allocates a clean segment.</p>
<p>Return Value: On success, 0 is returned and the segment number of the allocated segment is stored in the place pointed by . On error, one of the following negative error codes is returned.</p>
<p>%-EIO - I/O error.</p>
<p>%-ENOMEM - Insufficient amount of memory available.</p>
<p>%-ENOSPC - No clean segment left. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a6af95c8f1e6b7fedd7f95421e2eeafe6_cgraph.png" border="0" usemap="#sufile_8c_a6af95c8f1e6b7fedd7f95421e2eeafe6_cgraph" alt=""/></div>
<map name="sufile_8c_a6af95c8f1e6b7fedd7f95421e2eeafe6_cgraph" id="sufile_8c_a6af95c8f1e6b7fedd7f95421e2eeafe6_cgraph">
<area shape="rect" id="node2" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="899,2251,989,2277"/>
<area shape="rect" id="node3" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1497,1129,1593,1156"/>
<area shape="rect" id="node4" href="sufile_8c.html#a7df3cdff37c5aa00cca3458f1d7d400e" title="nilfs_sufile_get_header\l_block" alt="" coords="867,550,1021,591"/>
<area shape="rect" id="node8" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="172,1248,352,1275"/>
<area shape="rect" id="node12" href="sufile_8c.html#a38f2abf7ef7577b1af4b9e8fc9316727" title="nilfs_sufile_get_segment\l_usage_block" alt="" coords="861,987,1027,1029"/>
<area shape="rect" id="node15" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="871,1881,1017,1922"/>
<area shape="rect" id="node17" href="sufile_8c.html#a34ecb984fd0f57101d2ee0b4bde4bf95" title="nilfs_sufile_segment\l_usages_in_block" alt="" coords="873,1409,1015,1450"/>
<area shape="rect" id="node18" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1101,1997,1223,2024"/>
<area shape="rect" id="node22" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="873,1677,1015,1704"/>
<area shape="rect" id="node5" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="1093,983,1231,1009"/>
<area shape="rect" id="node6" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="1299,1003,1444,1029"/>
<area shape="rect" id="node7" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="1293,952,1449,979"/>
<area shape="rect" id="node9" href="sufile_8h.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="400,1779,583,1805"/>
<area shape="rect" id="node10" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="420,2058,563,2099"/>
<area shape="rect" id="node11" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="661,1728,779,1755"/>
<area shape="rect" id="node24" href="sufile_8h.html#ae5c9db186be6baf07d66e049a0fd9b9b" title="nilfs_sufile_mark_dirty" alt="" coords="644,1299,796,1325"/>
<area shape="rect" id="node25" href="sufile_8h.html#ac6379742426c30d02072b1a5b0f527f8" title="nilfs_sufile_set_segment\l_usage" alt="" coords="637,1233,803,1274"/>
<area shape="rect" id="node26" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033" title="nblocks" alt="" coords="911,667,977,693"/>
<area shape="rect" id="node27" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="422,920,561,947"/>
<area shape="rect" id="node28" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="645,1080,795,1107"/>
<area shape="rect" id="node30" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687" title="nilfs_sufile_set_suinfo" alt="" coords="645,1779,795,1805"/>
<area shape="rect" id="node32" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="651,448,789,475"/>
<area shape="rect" id="node33" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="655,549,785,576"/>
<area shape="rect" id="node34" href="sufile_8h.html#acad60c93c0f7f6c3a8a9dc843107f1ed" title="nilfs_sufile_do_scrap" alt="" coords="648,1931,792,1957"/>
<area shape="rect" id="node35" href="sufile_8h.html#a577d0d35a7907909b6c0a139d8cc1704" title="nilfs_sufile_do_free" alt="" coords="653,2048,787,2075"/>
<area shape="rect" id="node36" href="sufile_8h.html#aff87ff4257115842ff3c7940e5f8e769" title="nilfs_sufile_do_cancel_free" alt="" coords="631,2099,809,2125"/>
<area shape="rect" id="node37" href="sufile_8h.html#a7e943e59486cd6176a3317bed589b7c9" title="nilfs_sufile_do_set\l_error" alt="" coords="655,1982,785,2023"/>
<area shape="rect" id="node38" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="428,1248,555,1275"/>
<area shape="rect" id="node42" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="662,296,778,323"/>
<area shape="rect" id="node49" href="sufile_8h.html#a202058a1d5a7ee3658e8e7cda1ffee37" title="nilfs_sufile_trim_fs" alt="" coords="655,979,785,1005"/>
<area shape="rect" id="node13" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="1088,1155,1236,1181"/>
<area shape="rect" id="node14" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="1301,1274,1442,1315"/>
<area shape="rect" id="node16" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="1087,1357,1237,1384"/>
<area shape="rect" id="node19" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1311,2048,1432,2075"/>
<area shape="rect" id="node20" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1304,1947,1439,1973"/>
<area shape="rect" id="node21" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1302,1997,1441,2024"/>
<area shape="rect" id="node23" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1127,397,1197,424"/>
<area shape="rect" id="node29" href="the__nilfs_8h.html#a51bb53199a62a87f269e03404136d00f" title="nilfs_segment_is_active" alt="" coords="863,1205,1025,1232"/>
<area shape="rect" id="node31" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="861,2149,1027,2176"/>
<area shape="rect" id="node39" href="the__nilfs_8c.html#aa7bf85e7bb9022b3680b22d945d17f91" title="nilfs_nrsvsegs" alt="" coords="891,1155,997,1181"/>
<area shape="rect" id="node40" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="651,1350,789,1391"/>
<area shape="rect" id="node41" href="the__nilfs_8c.html#a38632ac69509070865038bf0120a1509" title="nilfs_set_nsegments" alt="" coords="649,1131,791,1157"/>
<area shape="rect" id="node43" href="nilfs2_2inode_8c.html#ae758d8edf633a8af3535ac0af248f1d1" title="nilfs_iget_locked" alt="" coords="885,195,1003,221"/>
<area shape="rect" id="node44" href="mdt_8c.html#a9d24c6e56a98e581fc30fd8a65841e2a" title="nilfs_mdt_init" alt="" coords="895,245,993,272"/>
<area shape="rect" id="node45" href="mdt_8c.html#ae0d853ce1775f22eb93823f6423e6fac" title="nilfs_mdt_set_entry_size" alt="" coords="1079,169,1245,196"/>
<area shape="rect" id="node46" href="nilfs2_2inode_8c.html#affec0e84c605c1d9028332974ba58cd3" title="nilfs_read_inode_common" alt="" coords="857,347,1031,373"/>
<area shape="rect" id="node47" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="1097,68,1227,95"/>
<area shape="rect" id="node48" href="bad__inode_8c.html#a8c027cf52e2b7669b11b0bfa09bbcd45" title="iget_failed" alt="" coords="903,43,985,69"/>
<area shape="rect" id="node50" href="the__nilfs_8h.html#acbe15a8b57f8ecf5e4777294c2f7303d" title="nilfs_get_segnum_of\l_block" alt="" coords="873,769,1015,810"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a6af95c8f1e6b7fedd7f95421e2eeafe6_icgraph.png" border="0" usemap="#sufile_8c_a6af95c8f1e6b7fedd7f95421e2eeafe6_icgraph" alt=""/></div>
<map name="sufile_8c_a6af95c8f1e6b7fedd7f95421e2eeafe6_icgraph" id="sufile_8c_a6af95c8f1e6b7fedd7f95421e2eeafe6_icgraph">
<area shape="rect" id="node2" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="801,528,954,569"/>
<area shape="rect" id="node13" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="603,832,737,873"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="806,716,949,757"/>
<area shape="rect" id="node24" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="172,322,352,349"/>
<area shape="rect" id="node3" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1013,449,1188,475"/>
<area shape="rect" id="node4" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1287,389,1364,415"/>
<area shape="rect" id="node5" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1502,363,1607,390"/>
<area shape="rect" id="node7" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1496,414,1613,441"/>
<area shape="rect" id="node6" href="nilfs2_2super_8c.html#a6f69bb47bb8193c95863dfa7858e0556" title="nilfs_mount" alt="" coords="1729,363,1818,390"/>
<area shape="rect" id="node8" href="nilfs2_2super_8c.html#aa52d92dd32f84052f43449918f769c15" title="nilfs_sync_fs" alt="" coords="1724,414,1823,441"/>
<area shape="rect" id="node9" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1695,465,1852,491"/>
<area shape="rect" id="node10" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1904,406,2052,433"/>
<area shape="rect" id="node11" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1909,457,2047,499"/>
<area shape="rect" id="node12" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1900,523,2056,550"/>
<area shape="rect" id="node14" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1236,603,1415,630"/>
<area shape="rect" id="node15" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1903,575,2053,616"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1463,567,1647,608"/>
<area shape="rect" id="node16" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="2109,582,2215,609"/>
<area shape="rect" id="node18" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="2104,531,2220,558"/>
<area shape="rect" id="node17" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="2268,447,2388,474"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8h.html#a1907ac7b54882bbf06019eaf6d03c21c" title="nilfs_relax_pressure\l_in_lock" alt="" coords="1704,567,1843,608"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a8b69f4181745f44662620421e0f88ab0" title="nilfs_transaction_lock" alt="" coords="1699,515,1847,542"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1030,574,1171,601"/>
<area shape="rect" id="node25" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="407,402,544,429"/>
<area shape="rect" id="node30" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="410,527,541,554"/>
<area shape="rect" id="node36" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="404,285,547,327"/>
<area shape="rect" id="node41" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="416,578,535,605"/>
<area shape="rect" id="node42" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="406,94,545,121"/>
<area shape="rect" id="node45" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="406,220,545,261"/>
<area shape="rect" id="node46" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="607,157,733,183"/>
<area shape="rect" id="node47" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="400,43,551,70"/>
<area shape="rect" id="node49" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="417,351,533,378"/>
<area shape="rect" id="node26" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="610,359,730,386"/>
<area shape="rect" id="node28" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="605,411,735,452"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="807,360,948,401"/>
<area shape="rect" id="node29" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1035,625,1167,667"/>
<area shape="rect" id="node31" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="609,527,731,554"/>
<area shape="rect" id="node32" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="613,629,727,655"/>
<area shape="rect" id="node35" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="599,679,741,706"/>
<area shape="rect" id="node33" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="789,659,965,686"/>
<area shape="rect" id="node34" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="802,593,953,635"/>
<area shape="rect" id="node37" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="824,258,931,285"/>
<area shape="rect" id="node40" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1033,192,1169,233"/>
<area shape="rect" id="node38" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="1041,258,1160,285"/>
<area shape="rect" id="node39" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1287,199,1364,226"/>
<area shape="rect" id="node43" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="1028,94,1173,121"/>
<area shape="rect" id="node44" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="599,91,741,132"/>
<area shape="rect" id="node48" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="1039,5,1162,47"/>
<area shape="rect" id="node50" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="805,309,950,335"/>
</map>
</div>

</div>
</div>
<a id="a22641f45cc119a770bda855c5e2e6fcb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22641f45cc119a770bda855c5e2e6fcb">&#9670;&nbsp;</a></span>nilfs_sufile_block_get_segment_usage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct nilfs_segment_usage* nilfs_sufile_block_get_segment_usage </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64&#160;</td>
          <td class="paramname"><em>segnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct buffer_head *&#160;</td>
          <td class="paramname"><em>bh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>kaddr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a22641f45cc119a770bda855c5e2e6fcb_cgraph.png" border="0" usemap="#sufile_8c_a22641f45cc119a770bda855c5e2e6fcb_cgraph" alt=""/></div>
<map name="sufile_8c_a22641f45cc119a770bda855c5e2e6fcb_cgraph" id="sufile_8c_a22641f45cc119a770bda855c5e2e6fcb_cgraph">
<area shape="rect" id="node2" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="200,31,349,58"/>
<area shape="rect" id="node3" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="587,31,683,58"/>
<area shape="rect" id="node4" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="397,24,539,65"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a22641f45cc119a770bda855c5e2e6fcb_icgraph.png" border="0" usemap="#sufile_8c_a22641f45cc119a770bda855c5e2e6fcb_icgraph" alt=""/></div>
<map name="sufile_8c_a22641f45cc119a770bda855c5e2e6fcb_icgraph" id="sufile_8c_a22641f45cc119a770bda855c5e2e6fcb_icgraph">
<area shape="rect" id="node2" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="230,216,349,243"/>
<area shape="rect" id="node34" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="661,742,799,783"/>
<area shape="rect" id="node36" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="655,909,805,936"/>
<area shape="rect" id="node40" href="sufile_8h.html#aff87ff4257115842ff3c7940e5f8e769" title="nilfs_sufile_do_cancel_free" alt="" coords="200,491,379,517"/>
<area shape="rect" id="node41" href="sufile_8h.html#acad60c93c0f7f6c3a8a9dc843107f1ed" title="nilfs_sufile_do_scrap" alt="" coords="217,389,361,416"/>
<area shape="rect" id="node42" href="sufile_8h.html#a577d0d35a7907909b6c0a139d8cc1704" title="nilfs_sufile_do_free" alt="" coords="222,440,357,467"/>
<area shape="rect" id="node43" href="sufile_8h.html#ac6379742426c30d02072b1a5b0f527f8" title="nilfs_sufile_set_segment\l_usage" alt="" coords="206,659,373,701"/>
<area shape="rect" id="node46" href="sufile_8h.html#a7e943e59486cd6176a3317bed589b7c9" title="nilfs_sufile_do_set\l_error" alt="" coords="224,542,355,583"/>
<area shape="rect" id="node47" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687" title="nilfs_sufile_set_suinfo" alt="" coords="214,725,365,752"/>
<area shape="rect" id="node49" href="sufile_8h.html#a202058a1d5a7ee3658e8e7cda1ffee37" title="nilfs_sufile_trim_fs" alt="" coords="224,776,355,803"/>
<area shape="rect" id="node3" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="1055,129,1209,170"/>
<area shape="rect" id="node6" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1288,29,1423,70"/>
<area shape="rect" id="node11" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="1061,246,1203,287"/>
<area shape="rect" id="node13" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="427,549,607,576"/>
<area shape="rect" id="node4" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1268,139,1443,165"/>
<area shape="rect" id="node5" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1541,167,1619,193"/>
<area shape="rect" id="node7" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1491,439,1669,465"/>
<area shape="rect" id="node8" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1735,373,1884,414"/>
<area shape="rect" id="node9" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1731,439,1888,465"/>
<area shape="rect" id="node10" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1717,490,1901,531"/>
<area shape="rect" id="node12" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1285,384,1426,411"/>
<area shape="rect" id="node14" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="661,499,799,525"/>
<area shape="rect" id="node19" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="665,448,795,475"/>
<area shape="rect" id="node25" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="659,601,801,642"/>
<area shape="rect" id="node31" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="661,549,799,576"/>
<area shape="rect" id="node35" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="861,749,988,776"/>
<area shape="rect" id="node38" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="672,397,788,424"/>
<area shape="rect" id="node15" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="865,363,985,389"/>
<area shape="rect" id="node17" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="860,414,989,455"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="1061,377,1203,418"/>
<area shape="rect" id="node18" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1289,509,1421,550"/>
<area shape="rect" id="node20" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="863,144,986,171"/>
<area shape="rect" id="node21" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="868,283,981,309"/>
<area shape="rect" id="node24" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="853,480,996,507"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="1044,544,1220,571"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="1057,311,1207,353"/>
<area shape="rect" id="node26" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="1079,749,1185,776"/>
<area shape="rect" id="node30" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1064,666,1200,707"/>
<area shape="rect" id="node27" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="1296,871,1415,897"/>
<area shape="rect" id="node28" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1541,896,1619,923"/>
<area shape="rect" id="node29" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1749,896,1869,923"/>
<area shape="rect" id="node32" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="1283,633,1428,660"/>
<area shape="rect" id="node33" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="853,531,996,573"/>
<area shape="rect" id="node37" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="1071,906,1193,947"/>
<area shape="rect" id="node39" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="1283,193,1428,220"/>
<area shape="rect" id="node44" href="nilfs2_2segment_8c.html#a5e55835a8c7bac0db60b81df4d707d4e" title="nilfs_segctor_update\l_segusage" alt="" coords="445,755,588,797"/>
<area shape="rect" id="node45" href="nilfs2_2segment_8c.html#a2ad2a278dd41af2f12f1e28a0b61ec8c" title="nilfs_cancel_segusage" alt="" coords="439,683,594,709"/>
<area shape="rect" id="node48" href="nilfs2_2ioctl_8c.html#a879fc213e33210988660173aec449143" title="nilfs_ioctl_set_suinfo" alt="" coords="445,913,589,940"/>
<area shape="rect" id="node50" href="nilfs2_2ioctl_8c.html#a8913a80e32e55bd55c20461949a3e6b6" title="nilfs_ioctl_trim_fs" alt="" coords="455,1011,579,1037"/>
</map>
</div>

</div>
</div>
<a id="a6c6906f2fa7470c98e36fadfed86c294"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c6906f2fa7470c98e36fadfed86c294">&#9670;&nbsp;</a></span>nilfs_sufile_delete_segment_usage_block()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_sufile_delete_segment_usage_block </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64&#160;</td>
          <td class="paramname"><em>segnum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a6c6906f2fa7470c98e36fadfed86c294_cgraph.png" border="0" usemap="#sufile_8c_a6c6906f2fa7470c98e36fadfed86c294_cgraph" alt=""/></div>
<map name="sufile_8c_a6c6906f2fa7470c98e36fadfed86c294_cgraph" id="sufile_8c_a6c6906f2fa7470c98e36fadfed86c294_cgraph">
<area shape="rect" id="node2" href="mdt_8c.html#a920f1cd6bb101e5f43a349fe7531e096" title="nilfs_mdt_delete_block" alt="" coords="212,453,367,480"/>
<area shape="rect" id="node34" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="215,555,363,581"/>
<area shape="rect" id="node3" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="655,504,725,531"/>
<area shape="rect" id="node4" href="nilfs2_2bmap_8c.html#a4d8c849b61993e58b8939b406cc3d72a" title="nilfs_bmap_delete" alt="" coords="428,329,555,356"/>
<area shape="rect" id="node28" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="420,504,563,531"/>
<area shape="rect" id="node29" href="mdt_8c.html#a309c3290c2f50bdeab9db8bd3569dc8d" title="nilfs_mdt_forget_block" alt="" coords="415,403,568,429"/>
<area shape="rect" id="node5" href="nilfs2_2bmap_8c.html#a54e619b4cf86165cb313e3e79ddc1964" title="nilfs_bmap_do_delete" alt="" coords="616,329,764,356"/>
<area shape="rect" id="node9" href="nilfs2_2bmap_8c.html#a7a7ea41075313d317e5036ebc1fbbe3b" title="nilfs_bmap_convert\l_error" alt="" coords="623,246,757,287"/>
<area shape="rect" id="node6" href="nilfs2_2direct_8c.html#ae7a4e867b8728ea6f0c276b68f537479" title="nilfs_direct_delete\l_and_convert" alt="" coords="814,322,941,363"/>
<area shape="rect" id="node7" href="nilfs2_2direct_8c.html#af7a09b01970bcd0a5aa1467aa705f5fe" title="nilfs_direct_dptrs" alt="" coords="991,347,1112,373"/>
<area shape="rect" id="node8" href="nilfs2_2direct_8c.html#aeecaf45244f88e4286516e9b26ff6afd" title="nilfs_direct_init" alt="" coords="997,296,1106,323"/>
<area shape="rect" id="node10" href="nilfs2_2super_8c.html#a5f424aefed531edcd064bfa930d96670" title="__nilfs_error" alt="" coords="831,247,924,273"/>
<area shape="rect" id="node11" href="nilfs2_2super_8c.html#a9c0186bd7dabac457a10733abdbafc76" title="nilfs_set_error" alt="" coords="999,240,1103,267"/>
<area shape="rect" id="node12" href="nilfs2_2super_8c.html#a8e2908caf99fa61e4da3134daa205dd0" title="nilfs_prepare_super" alt="" coords="1160,240,1295,267"/>
<area shape="rect" id="node14" href="nilfs2_2super_8c.html#a0955c5c7387c5d5ea561c70b3eeb5925" title="nilfs_commit_super" alt="" coords="1160,188,1295,215"/>
<area shape="rect" id="node13" href="the__nilfs_8c.html#ab41ad60b507d8f217c2062c254a00367" title="nilfs_swap_super_block" alt="" coords="1343,240,1504,267"/>
<area shape="rect" id="node15" href="nilfs2_2super_8c.html#a7f749f73b57e01f7d7b45df9c3cc836b" title="nilfs_sync_super" alt="" coords="1363,185,1483,212"/>
<area shape="rect" id="node16" href="buffer_8c.html#ad14d5a18ab22cf24baa474870664c128" title="__sync_dirty_buffer" alt="" coords="1744,184,1880,211"/>
<area shape="rect" id="node26" href="buffer_8c.html#aa6e73e23b9f75a73cf4112fb3d19b668" title="sync_dirty_buffer" alt="" coords="1563,133,1685,160"/>
<area shape="rect" id="node27" href="the__nilfs_8c.html#a6809c74809ebc6547ec0168ba3303ad8" title="nilfs_fall_back_super\l_block" alt="" coords="1552,235,1696,277"/>
<area shape="rect" id="node17" href="buffer_8c.html#aac5852df82371e20e891b02a37461248" title="end_buffer_write_sync" alt="" coords="1928,300,2081,327"/>
<area shape="rect" id="node20" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="2321,212,2459,239"/>
<area shape="rect" id="node21" href="buffer_8c.html#a5fc92b2c44523c64e98193eaa4f46541" title="unlock_buffer" alt="" coords="2151,401,2251,428"/>
<area shape="rect" id="node22" href="buffer_8c.html#ab65df498c54845f497bae7afe9222c91" title="submit_bh" alt="" coords="1963,132,2046,159"/>
<area shape="rect" id="node18" href="buffer_8c.html#a15c60a53f942f27f505098848dda3f3e" title="buffer_io_error" alt="" coords="2148,300,2253,327"/>
<area shape="rect" id="node19" href="buffer_8c.html#a0c5a9b93af2e1cc8bdeb45d23f5fd4fd" title="mark_buffer_write_io\l_error" alt="" coords="2129,234,2272,275"/>
<area shape="rect" id="node23" href="buffer_8c.html#a5fd6f01c5f9cff0945cb999cbefa412d" title="submit_bh_wbc" alt="" coords="2144,31,2257,57"/>
<area shape="rect" id="node24" href="buffer_8c.html#a2463267e7636f2be0fc2b44fb65cb5ba" title="end_bio_bh_io_sync" alt="" coords="2320,5,2460,32"/>
<area shape="rect" id="node25" href="buffer_8c.html#aa35a4aa9ac3d40858082aabb83e2a44c" title="guard_bio_eod" alt="" coords="2337,56,2443,83"/>
<area shape="rect" id="node30" href="page_8h.html#aaad58f68fa9675f7e9803744d0e3f414" title="nilfs_page_get_nth\l_block" alt="" coords="625,387,755,429"/>
<area shape="rect" id="node31" href="nilfs2_2page_8c.html#a866283c71b48e2aec59af06e7dd9d0ac" title="nilfs_forget_buffer" alt="" coords="627,453,753,480"/>
<area shape="rect" id="node32" href="nilfs2_2page_8c.html#ae480881857e8afeef790a92ae1772630" title="nilfs_page_buffers\l_clean" alt="" coords="813,453,941,494"/>
<area shape="rect" id="node33" href="nilfs2_2page_8c.html#a6236b3bde5556e05843d2c5e34074b65" title="__nilfs_clear_page\l_dirty" alt="" coords="812,518,943,559"/>
<area shape="rect" id="node35" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="642,584,738,611"/>
<area shape="rect" id="node36" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="421,606,562,647"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a6c6906f2fa7470c98e36fadfed86c294_icgraph.png" border="0" usemap="#sufile_8c_a6c6906f2fa7470c98e36fadfed86c294_icgraph" alt=""/></div>
<map name="sufile_8c_a6c6906f2fa7470c98e36fadfed86c294_icgraph" id="sufile_8c_a6c6906f2fa7470c98e36fadfed86c294_icgraph">
<area shape="rect" id="node2" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="212,317,351,358"/>
<area shape="rect" id="node3" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="399,299,525,325"/>
<area shape="rect" id="node4" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="1018,29,1125,56"/>
<area shape="rect" id="node14" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="573,324,753,351"/>
<area shape="rect" id="node5" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="1219,5,1338,32"/>
<area shape="rect" id="node6" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1463,129,1541,156"/>
<area shape="rect" id="node7" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="2315,180,2435,207"/>
<area shape="rect" id="node8" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2505,180,2620,207"/>
<area shape="rect" id="node13" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2497,129,2628,156"/>
<area shape="rect" id="node9" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="2681,104,2770,131"/>
<area shape="rect" id="node10" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="2679,155,2771,181"/>
<area shape="rect" id="node11" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="2676,205,2775,232"/>
<area shape="rect" id="node12" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="2683,256,2768,283"/>
<area shape="rect" id="node15" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="808,324,945,351"/>
<area shape="rect" id="node28" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="811,404,942,431"/>
<area shape="rect" id="node40" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="805,114,948,155"/>
<area shape="rect" id="node42" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="1012,567,1131,593"/>
<area shape="rect" id="node44" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="807,273,946,300"/>
<area shape="rect" id="node47" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="801,223,952,249"/>
<area shape="rect" id="node49" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="819,529,935,556"/>
<area shape="rect" id="node16" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="1011,364,1131,391"/>
<area shape="rect" id="node26" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="1007,298,1136,339"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="1208,341,1349,382"/>
<area shape="rect" id="node18" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1431,464,1573,491"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1637,461,1816,488"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1881,354,2031,395"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="2096,537,2253,564"/>
<area shape="rect" id="node25" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1864,446,2048,487"/>
<area shape="rect" id="node21" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="2122,257,2227,284"/>
<area shape="rect" id="node22" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="2117,361,2233,388"/>
<area shape="rect" id="node24" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="2301,537,2449,564"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1436,398,1568,439"/>
<area shape="rect" id="node29" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="1010,516,1133,543"/>
<area shape="rect" id="node35" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="1015,465,1128,492"/>
<area shape="rect" id="node39" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="1000,415,1143,441"/>
<area shape="rect" id="node30" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="1202,589,1355,630"/>
<area shape="rect" id="node31" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1415,593,1589,620"/>
<area shape="rect" id="node32" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1688,597,1765,624"/>
<area shape="rect" id="node33" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1903,613,2009,640"/>
<area shape="rect" id="node34" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1897,563,2015,589"/>
<area shape="rect" id="node36" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="1207,523,1350,565"/>
<area shape="rect" id="node37" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="1191,407,1367,433"/>
<area shape="rect" id="node38" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="1203,458,1354,499"/>
<area shape="rect" id="node41" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1211,57,1347,98"/>
<area shape="rect" id="node43" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1435,645,1569,686"/>
<area shape="rect" id="node45" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="1206,188,1351,215"/>
<area shape="rect" id="node46" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="1000,233,1143,274"/>
<area shape="rect" id="node48" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="1217,122,1340,163"/>
<area shape="rect" id="node50" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="1429,711,1575,737"/>
</map>
</div>

</div>
</div>
<a id="ab405480a777b640ff03b7c335b375a24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab405480a777b640ff03b7c335b375a24">&#9670;&nbsp;</a></span>nilfs_sufile_do_cancel_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nilfs_sufile_do_cancel_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64&#160;</td>
          <td class="paramname"><em>segnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct buffer_head *&#160;</td>
          <td class="paramname"><em>header_bh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct buffer_head *&#160;</td>
          <td class="paramname"><em>su_bh</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_ab405480a777b640ff03b7c335b375a24_cgraph.png" border="0" usemap="#sufile_8c_ab405480a777b640ff03b7c335b375a24_cgraph" alt=""/></div>
<map name="sufile_8c_ab405480a777b640ff03b7c335b375a24_cgraph" id="sufile_8c_ab405480a777b640ff03b7c335b375a24_cgraph">
<area shape="rect" id="node2" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="242,107,389,148"/>
<area shape="rect" id="node6" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="232,274,399,301"/>
<area shape="rect" id="node7" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="460,274,583,301"/>
<area shape="rect" id="node48" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="476,173,567,199"/>
<area shape="rect" id="node49" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="244,325,387,351"/>
<area shape="rect" id="node3" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="447,71,596,98"/>
<area shape="rect" id="node4" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="875,97,971,123"/>
<area shape="rect" id="node5" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="644,5,785,47"/>
<area shape="rect" id="node8" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="654,274,775,301"/>
<area shape="rect" id="node10" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="647,361,782,387"/>
<area shape="rect" id="node47" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="645,223,784,250"/>
<area shape="rect" id="node9" href="buffer_8c.html#ae236845de65ed065f74eecf8f6ee9742" title="EXPORT_SYMBOL_GPL" alt="" coords="837,237,1009,263"/>
<area shape="rect" id="node11" href="fs-writeback_8c.html#af5890cdc0a937a4f944928bd1880d49b" title="block_dump___mark_inode\l_dirty" alt="" coords="833,419,1013,460"/>
<area shape="rect" id="node34" href="fs-writeback_8c.html#a044f1d7ff09b03f639232ec0e6a88ee1" title="EXPORT_SYMBOL" alt="" coords="2324,327,2463,354"/>
<area shape="rect" id="node43" href="fs-writeback_8c.html#ad0ca24311e1c0ba76d3810d240f72b08" title="locked_inode_to_wb\l_and_lock_list" alt="" coords="853,288,993,329"/>
<area shape="rect" id="node44" href="fs-writeback_8c.html#a2a36a21e075aa2a912f5c3cb027692cf" title="inode_io_list_move\l_locked" alt="" coords="857,353,990,395"/>
<area shape="rect" id="node12" href="dcache_8c.html#a9f042046c19f277000ddfc09b02e3633" title="d_find_alias" alt="" coords="1098,487,1189,514"/>
<area shape="rect" id="node16" href="dcache_8c.html#aebcca358185b5176b69b97e7eab12dfd" title="dput" alt="" coords="1120,411,1167,438"/>
<area shape="rect" id="node13" href="dcache_8c.html#a3eb221591429fdc67dec907c0d09d26a" title="__d_find_alias" alt="" coords="1273,538,1379,565"/>
<area shape="rect" id="node15" href="dcache_8c.html#aeb5ec7bdf3301140d66dd18ae638685c" title="EXPORT_SYMBOL" alt="" coords="1759,437,1897,463"/>
<area shape="rect" id="node14" href="dcache_8c.html#ab9c0fece5c680f2c592413b6d3239ae9" title="__dget_dlock" alt="" coords="1427,538,1525,565"/>
<area shape="rect" id="node17" href="dcache_8c.html#a364a93ebd8b57977a5a90f2076dd8f59" title="fast_dput" alt="" coords="1288,335,1364,362"/>
<area shape="rect" id="node18" href="dcache_8c.html#a689bf4f6109300b7bc021f1641052f99" title="retain_dentry" alt="" coords="1427,386,1525,413"/>
<area shape="rect" id="node20" href="dcache_8c.html#a4a5ea078fab8f6527abb7f44aa88efd3" title="dentry_kill" alt="" coords="1285,285,1367,311"/>
<area shape="rect" id="node19" href="dcache_8c.html#a3b177069d047c319ff2309aa5be9342e" title="d_lru_add" alt="" coords="1603,386,1681,413"/>
<area shape="rect" id="node21" href="dcache_8c.html#aa89b23ccc5b34160480a5b0541255a2e" title="__lock_parent" alt="" coords="1591,335,1693,362"/>
<area shape="rect" id="node22" href="dcache_8c.html#a051b3970369269b3c6fcc1a19be37bed" title="__dentry_kill" alt="" coords="1429,209,1523,235"/>
<area shape="rect" id="node42" href="dcache_8c.html#a6a36af9be383e7cbabb89162ff8af440" title="lock_parent" alt="" coords="1431,285,1521,311"/>
<area shape="rect" id="node23" href="dcache_8c.html#aa69465ec94d92f14786fdce2f5bfb175" title="d_lru_del" alt="" coords="1605,82,1679,109"/>
<area shape="rect" id="node24" href="dcache_8c.html#ae4904480d16c7850ae6994e92d110f96" title="__d_drop" alt="" coords="1605,285,1679,311"/>
<area shape="rect" id="node27" href="dcache_8c.html#ae2050a139fbd1eb7bfc238686e1b2e0b" title="dentry_unlist" alt="" coords="1594,133,1690,159"/>
<area shape="rect" id="node28" href="dcache_8c.html#acad4e66a4f8cc5a5bce5cb90bc5d6279" title="dentry_unlink_inode" alt="" coords="1573,183,1711,210"/>
<area shape="rect" id="node36" href="dcache_8c.html#ad8b0a5de190038ed843fa392d181c8a5" title="dentry_free" alt="" coords="1599,234,1685,261"/>
<area shape="rect" id="node25" href="dcache_8c.html#afe7718ea6372af4edd41d375be2b7755" title="___d_drop" alt="" coords="1787,386,1869,413"/>
<area shape="rect" id="node26" href="dcache_8c.html#ad0da24b939325fb96de67394f99b2766" title="d_hash" alt="" coords="1995,386,2059,413"/>
<area shape="rect" id="node29" href="dcache_8c.html#a0858bd86148196ec3ef3606f8f0de24f" title="__d_clear_type_and\l_inode" alt="" coords="1759,117,1897,159"/>
<area shape="rect" id="node30" href="inode_8c.html#a378733dcbf0fb08359b9a02145ac8fc3" title="iput" alt="" coords="1807,66,1849,93"/>
<area shape="rect" id="node31" href="inode_8c.html#a7e99b25ac29d19bc82fbddcb773c4f25" title="iput_final" alt="" coords="1990,66,2065,93"/>
<area shape="rect" id="node35" href="debugfs_2inode_8c.html#a16e485b5debd4cd96a200844c38df190" title="EXPORT_SYMBOL" alt="" coords="1958,117,2097,143"/>
<area shape="rect" id="node32" href="inode_8c.html#a943dee860d20f57552f168683dcb4b5d" title="inode_add_lru" alt="" coords="2165,117,2268,143"/>
<area shape="rect" id="node33" href="fs-writeback_8c.html#aceeba3df6a433f68c665086a2ee53faa" title="write_inode_now" alt="" coords="2157,66,2276,93"/>
<area shape="rect" id="node37" href="dcache_8c.html#a230d6245e3962408f039e2e33a251d98" title="dname_external" alt="" coords="1771,234,1885,261"/>
<area shape="rect" id="node38" href="dcache_8c.html#a1cda4f5743f52a426fe40cc5cf933675" title="external_name" alt="" coords="1974,285,2081,311"/>
<area shape="rect" id="node39" href="dcache_8c.html#a9017dd31269b4b6d79821de35551ae41" title="__d_free_external" alt="" coords="1765,335,1891,362"/>
<area shape="rect" id="node41" href="dcache_8c.html#a7d181ee17b4a49e02eac0f247fd484a9" title="__d_free" alt="" coords="1792,183,1864,210"/>
<area shape="rect" id="node40" href="dcache_8c.html#a711826e19d5ad53c7b0bbe26a878cfff" title="__d_free_external_name" alt="" coords="1945,335,2109,362"/>
<area shape="rect" id="node45" href="fs-writeback_8c.html#ad9e6fcccf4baffa8e6c91881c6e428a9" title="wb_io_lists_populated" alt="" coords="1068,361,1219,387"/>
<area shape="rect" id="node46" href="fs-writeback_8c.html#aa31b94b7a70c8c8d396a5f0f3e8ef1ec" title="wb_io_lists_depopulated" alt="" coords="1061,310,1225,337"/>
<area shape="rect" id="node50" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="486,325,557,351"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_ab405480a777b640ff03b7c335b375a24_icgraph.png" border="0" usemap="#sufile_8c_ab405480a777b640ff03b7c335b375a24_icgraph" alt=""/></div>
<map name="sufile_8c_ab405480a777b640ff03b7c335b375a24_icgraph" id="sufile_8c_ab405480a777b640ff03b7c335b375a24_icgraph">
<area shape="rect" id="node2" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="232,367,412,393"/>
<area shape="rect" id="node22" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="665,450,795,491"/>
<area shape="rect" id="node3" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="467,367,604,393"/>
<area shape="rect" id="node24" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="470,316,601,343"/>
<area shape="rect" id="node36" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="464,418,607,459"/>
<area shape="rect" id="node40" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="671,183,789,209"/>
<area shape="rect" id="node42" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="466,676,605,703"/>
<area shape="rect" id="node45" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="466,610,605,651"/>
<area shape="rect" id="node46" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="667,617,793,644"/>
<area shape="rect" id="node47" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="460,140,611,167"/>
<area shape="rect" id="node49" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="477,191,593,217"/>
<area shape="rect" id="node4" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="670,391,790,417"/>
<area shape="rect" id="node5" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="867,393,1008,434"/>
<area shape="rect" id="node6" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1090,288,1231,315"/>
<area shape="rect" id="node7" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1296,289,1475,316"/>
<area shape="rect" id="node8" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1963,343,2113,385"/>
<area shape="rect" id="node15" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1755,183,1912,209"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1523,282,1707,323"/>
<area shape="rect" id="node9" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="2184,403,2289,429"/>
<area shape="rect" id="node14" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="2179,351,2295,377"/>
<area shape="rect" id="node10" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="2359,404,2479,431"/>
<area shape="rect" id="node11" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2536,404,2651,431"/>
<area shape="rect" id="node12" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2528,505,2659,532"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="2707,531,2784,557"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1964,292,2112,319"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1969,175,2107,217"/>
<area shape="rect" id="node18" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1960,241,2116,268"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8h.html#a1907ac7b54882bbf06019eaf6d03c21c" title="nilfs_relax_pressure\l_in_lock" alt="" coords="1764,234,1903,275"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a8b69f4181745f44662620421e0f88ab0" title="nilfs_transaction_lock" alt="" coords="1759,300,1907,327"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1095,339,1227,381"/>
<area shape="rect" id="node25" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="669,233,791,260"/>
<area shape="rect" id="node31" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="673,284,787,311"/>
<area shape="rect" id="node35" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="659,339,801,365"/>
<area shape="rect" id="node26" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="861,145,1014,186"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1073,144,1248,171"/>
<area shape="rect" id="node28" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1347,140,1424,167"/>
<area shape="rect" id="node29" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1562,180,1667,207"/>
<area shape="rect" id="node30" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1556,129,1673,156"/>
<area shape="rect" id="node32" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="866,210,1009,251"/>
<area shape="rect" id="node33" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="849,341,1025,368"/>
<area shape="rect" id="node34" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="862,275,1013,317"/>
<area shape="rect" id="node37" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="884,615,991,641"/>
<area shape="rect" id="node39" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1317,549,1453,590"/>
<area shape="rect" id="node38" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="2359,612,2478,639"/>
<area shape="rect" id="node41" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1093,217,1228,258"/>
<area shape="rect" id="node43" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="2164,697,2309,724"/>
<area shape="rect" id="node44" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="659,669,801,710"/>
<area shape="rect" id="node48" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="2357,162,2480,203"/>
<area shape="rect" id="node50" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="1088,57,1233,84"/>
</map>
</div>

</div>
</div>
<a id="a10ddb1ac5848e2b7336c9e3f759beccf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10ddb1ac5848e2b7336c9e3f759beccf">&#9670;&nbsp;</a></span>nilfs_sufile_do_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nilfs_sufile_do_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64&#160;</td>
          <td class="paramname"><em>segnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct buffer_head *&#160;</td>
          <td class="paramname"><em>header_bh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct buffer_head *&#160;</td>
          <td class="paramname"><em>su_bh</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a10ddb1ac5848e2b7336c9e3f759beccf_cgraph.png" border="0" usemap="#sufile_8c_a10ddb1ac5848e2b7336c9e3f759beccf_cgraph" alt=""/></div>
<map name="sufile_8c_a10ddb1ac5848e2b7336c9e3f759beccf_cgraph" id="sufile_8c_a10ddb1ac5848e2b7336c9e3f759beccf_cgraph">
<area shape="rect" id="node2" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="198,107,345,148"/>
<area shape="rect" id="node6" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="416,274,539,301"/>
<area shape="rect" id="node47" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="188,274,355,301"/>
<area shape="rect" id="node48" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="432,173,523,199"/>
<area shape="rect" id="node49" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="200,325,343,351"/>
<area shape="rect" id="node3" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="403,71,552,98"/>
<area shape="rect" id="node4" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="831,97,927,123"/>
<area shape="rect" id="node5" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="600,5,741,47"/>
<area shape="rect" id="node7" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="610,274,731,301"/>
<area shape="rect" id="node9" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="603,361,738,387"/>
<area shape="rect" id="node46" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="601,223,740,250"/>
<area shape="rect" id="node8" href="buffer_8c.html#ae236845de65ed065f74eecf8f6ee9742" title="EXPORT_SYMBOL_GPL" alt="" coords="793,237,965,263"/>
<area shape="rect" id="node10" href="fs-writeback_8c.html#af5890cdc0a937a4f944928bd1880d49b" title="block_dump___mark_inode\l_dirty" alt="" coords="789,419,969,460"/>
<area shape="rect" id="node33" href="fs-writeback_8c.html#a044f1d7ff09b03f639232ec0e6a88ee1" title="EXPORT_SYMBOL" alt="" coords="2280,327,2419,354"/>
<area shape="rect" id="node42" href="fs-writeback_8c.html#ad0ca24311e1c0ba76d3810d240f72b08" title="locked_inode_to_wb\l_and_lock_list" alt="" coords="809,288,949,329"/>
<area shape="rect" id="node43" href="fs-writeback_8c.html#a2a36a21e075aa2a912f5c3cb027692cf" title="inode_io_list_move\l_locked" alt="" coords="813,353,946,395"/>
<area shape="rect" id="node11" href="dcache_8c.html#a9f042046c19f277000ddfc09b02e3633" title="d_find_alias" alt="" coords="1054,487,1145,514"/>
<area shape="rect" id="node15" href="dcache_8c.html#aebcca358185b5176b69b97e7eab12dfd" title="dput" alt="" coords="1076,411,1123,438"/>
<area shape="rect" id="node12" href="dcache_8c.html#a3eb221591429fdc67dec907c0d09d26a" title="__d_find_alias" alt="" coords="1229,538,1335,565"/>
<area shape="rect" id="node14" href="dcache_8c.html#aeb5ec7bdf3301140d66dd18ae638685c" title="EXPORT_SYMBOL" alt="" coords="1715,437,1853,463"/>
<area shape="rect" id="node13" href="dcache_8c.html#ab9c0fece5c680f2c592413b6d3239ae9" title="__dget_dlock" alt="" coords="1383,538,1481,565"/>
<area shape="rect" id="node16" href="dcache_8c.html#a364a93ebd8b57977a5a90f2076dd8f59" title="fast_dput" alt="" coords="1244,335,1320,362"/>
<area shape="rect" id="node17" href="dcache_8c.html#a689bf4f6109300b7bc021f1641052f99" title="retain_dentry" alt="" coords="1383,386,1481,413"/>
<area shape="rect" id="node19" href="dcache_8c.html#a4a5ea078fab8f6527abb7f44aa88efd3" title="dentry_kill" alt="" coords="1241,285,1323,311"/>
<area shape="rect" id="node18" href="dcache_8c.html#a3b177069d047c319ff2309aa5be9342e" title="d_lru_add" alt="" coords="1559,386,1637,413"/>
<area shape="rect" id="node20" href="dcache_8c.html#aa89b23ccc5b34160480a5b0541255a2e" title="__lock_parent" alt="" coords="1547,335,1649,362"/>
<area shape="rect" id="node21" href="dcache_8c.html#a051b3970369269b3c6fcc1a19be37bed" title="__dentry_kill" alt="" coords="1385,209,1479,235"/>
<area shape="rect" id="node41" href="dcache_8c.html#a6a36af9be383e7cbabb89162ff8af440" title="lock_parent" alt="" coords="1387,285,1477,311"/>
<area shape="rect" id="node22" href="dcache_8c.html#aa69465ec94d92f14786fdce2f5bfb175" title="d_lru_del" alt="" coords="1561,82,1635,109"/>
<area shape="rect" id="node23" href="dcache_8c.html#ae4904480d16c7850ae6994e92d110f96" title="__d_drop" alt="" coords="1561,285,1635,311"/>
<area shape="rect" id="node26" href="dcache_8c.html#ae2050a139fbd1eb7bfc238686e1b2e0b" title="dentry_unlist" alt="" coords="1550,133,1646,159"/>
<area shape="rect" id="node27" href="dcache_8c.html#acad4e66a4f8cc5a5bce5cb90bc5d6279" title="dentry_unlink_inode" alt="" coords="1529,183,1667,210"/>
<area shape="rect" id="node35" href="dcache_8c.html#ad8b0a5de190038ed843fa392d181c8a5" title="dentry_free" alt="" coords="1555,234,1641,261"/>
<area shape="rect" id="node24" href="dcache_8c.html#afe7718ea6372af4edd41d375be2b7755" title="___d_drop" alt="" coords="1743,386,1825,413"/>
<area shape="rect" id="node25" href="dcache_8c.html#ad0da24b939325fb96de67394f99b2766" title="d_hash" alt="" coords="1951,386,2015,413"/>
<area shape="rect" id="node28" href="dcache_8c.html#a0858bd86148196ec3ef3606f8f0de24f" title="__d_clear_type_and\l_inode" alt="" coords="1715,117,1853,159"/>
<area shape="rect" id="node29" href="inode_8c.html#a378733dcbf0fb08359b9a02145ac8fc3" title="iput" alt="" coords="1763,66,1805,93"/>
<area shape="rect" id="node30" href="inode_8c.html#a7e99b25ac29d19bc82fbddcb773c4f25" title="iput_final" alt="" coords="1946,66,2021,93"/>
<area shape="rect" id="node34" href="debugfs_2inode_8c.html#a16e485b5debd4cd96a200844c38df190" title="EXPORT_SYMBOL" alt="" coords="1914,117,2053,143"/>
<area shape="rect" id="node31" href="inode_8c.html#a943dee860d20f57552f168683dcb4b5d" title="inode_add_lru" alt="" coords="2121,117,2224,143"/>
<area shape="rect" id="node32" href="fs-writeback_8c.html#aceeba3df6a433f68c665086a2ee53faa" title="write_inode_now" alt="" coords="2113,66,2232,93"/>
<area shape="rect" id="node36" href="dcache_8c.html#a230d6245e3962408f039e2e33a251d98" title="dname_external" alt="" coords="1727,234,1841,261"/>
<area shape="rect" id="node37" href="dcache_8c.html#a1cda4f5743f52a426fe40cc5cf933675" title="external_name" alt="" coords="1930,285,2037,311"/>
<area shape="rect" id="node38" href="dcache_8c.html#a9017dd31269b4b6d79821de35551ae41" title="__d_free_external" alt="" coords="1721,335,1847,362"/>
<area shape="rect" id="node40" href="dcache_8c.html#a7d181ee17b4a49e02eac0f247fd484a9" title="__d_free" alt="" coords="1748,183,1820,210"/>
<area shape="rect" id="node39" href="dcache_8c.html#a711826e19d5ad53c7b0bbe26a878cfff" title="__d_free_external_name" alt="" coords="1901,335,2065,362"/>
<area shape="rect" id="node44" href="fs-writeback_8c.html#ad9e6fcccf4baffa8e6c91881c6e428a9" title="wb_io_lists_populated" alt="" coords="1024,361,1175,387"/>
<area shape="rect" id="node45" href="fs-writeback_8c.html#aa31b94b7a70c8c8d396a5f0f3e8ef1ec" title="wb_io_lists_depopulated" alt="" coords="1017,310,1181,337"/>
<area shape="rect" id="node50" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="442,325,513,351"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a10ddb1ac5848e2b7336c9e3f759beccf_icgraph.png" border="0" usemap="#sufile_8c_a10ddb1ac5848e2b7336c9e3f759beccf_icgraph" alt=""/></div>
<map name="sufile_8c_a10ddb1ac5848e2b7336c9e3f759beccf_icgraph" id="sufile_8c_a10ddb1ac5848e2b7336c9e3f759beccf_icgraph">
<area shape="rect" id="node2" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="188,450,368,477"/>
<area shape="rect" id="node4" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="626,63,746,90"/>
<area shape="rect" id="node31" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="629,243,743,270"/>
<area shape="rect" id="node3" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="423,249,560,275"/>
<area shape="rect" id="node24" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="426,299,557,326"/>
<area shape="rect" id="node36" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="420,719,563,760"/>
<area shape="rect" id="node40" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="627,362,745,389"/>
<area shape="rect" id="node42" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="422,475,561,502"/>
<area shape="rect" id="node45" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="422,577,561,619"/>
<area shape="rect" id="node46" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="623,651,749,678"/>
<area shape="rect" id="node47" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="416,526,567,553"/>
<area shape="rect" id="node49" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="433,425,549,451"/>
<area shape="rect" id="node22" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="621,115,751,156"/>
<area shape="rect" id="node5" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="823,5,964,47"/>
<area shape="rect" id="node6" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1046,231,1187,258"/>
<area shape="rect" id="node7" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1252,301,1431,327"/>
<area shape="rect" id="node8" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1919,311,2069,352"/>
<area shape="rect" id="node15" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1711,442,1868,469"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1479,323,1663,364"/>
<area shape="rect" id="node9" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="2140,379,2245,406"/>
<area shape="rect" id="node14" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="2135,318,2251,345"/>
<area shape="rect" id="node10" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="2315,389,2435,415"/>
<area shape="rect" id="node11" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2492,389,2607,415"/>
<area shape="rect" id="node12" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2484,439,2615,466"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="2663,566,2740,593"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1920,493,2068,519"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1925,376,2063,417"/>
<area shape="rect" id="node18" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1916,442,2072,469"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8h.html#a1907ac7b54882bbf06019eaf6d03c21c" title="nilfs_relax_pressure\l_in_lock" alt="" coords="1720,323,1859,364"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a8b69f4181745f44662620421e0f88ab0" title="nilfs_transaction_lock" alt="" coords="1715,389,1863,415"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1051,165,1183,207"/>
<area shape="rect" id="node25" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="625,306,747,333"/>
<area shape="rect" id="node35" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="615,186,757,213"/>
<area shape="rect" id="node26" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="817,355,970,396"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1029,358,1204,385"/>
<area shape="rect" id="node28" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1303,455,1380,482"/>
<area shape="rect" id="node29" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1518,439,1623,466"/>
<area shape="rect" id="node30" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1512,490,1629,517"/>
<area shape="rect" id="node32" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="822,289,965,331"/>
<area shape="rect" id="node33" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="805,173,981,199"/>
<area shape="rect" id="node34" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="818,224,969,265"/>
<area shape="rect" id="node37" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="840,658,947,685"/>
<area shape="rect" id="node39" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1273,728,1409,769"/>
<area shape="rect" id="node38" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="2315,658,2434,685"/>
<area shape="rect" id="node41" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1049,409,1184,451"/>
<area shape="rect" id="node43" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="2120,542,2265,569"/>
<area shape="rect" id="node44" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="615,479,757,520"/>
<area shape="rect" id="node48" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="2313,592,2436,633"/>
<area shape="rect" id="node50" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="1044,475,1189,502"/>
</map>
</div>

</div>
</div>
<a id="a8ae81c72eacf55adbfe6e7f702e88588"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ae81c72eacf55adbfe6e7f702e88588">&#9670;&nbsp;</a></span>nilfs_sufile_do_scrap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nilfs_sufile_do_scrap </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64&#160;</td>
          <td class="paramname"><em>segnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct buffer_head *&#160;</td>
          <td class="paramname"><em>header_bh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct buffer_head *&#160;</td>
          <td class="paramname"><em>su_bh</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a8ae81c72eacf55adbfe6e7f702e88588_cgraph.png" border="0" usemap="#sufile_8c_a8ae81c72eacf55adbfe6e7f702e88588_cgraph" alt=""/></div>
<map name="sufile_8c_a8ae81c72eacf55adbfe6e7f702e88588_cgraph" id="sufile_8c_a8ae81c72eacf55adbfe6e7f702e88588_cgraph">
<area shape="rect" id="node2" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="207,107,354,148"/>
<area shape="rect" id="node6" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="197,274,364,301"/>
<area shape="rect" id="node7" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="425,274,548,301"/>
<area shape="rect" id="node48" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="441,173,532,199"/>
<area shape="rect" id="node49" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="209,325,352,351"/>
<area shape="rect" id="node3" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="412,71,561,98"/>
<area shape="rect" id="node4" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="841,97,937,123"/>
<area shape="rect" id="node5" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="609,5,751,47"/>
<area shape="rect" id="node8" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="619,274,741,301"/>
<area shape="rect" id="node10" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="613,361,747,387"/>
<area shape="rect" id="node47" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="611,223,749,250"/>
<area shape="rect" id="node9" href="buffer_8c.html#ae236845de65ed065f74eecf8f6ee9742" title="EXPORT_SYMBOL_GPL" alt="" coords="803,237,975,263"/>
<area shape="rect" id="node11" href="fs-writeback_8c.html#af5890cdc0a937a4f944928bd1880d49b" title="block_dump___mark_inode\l_dirty" alt="" coords="799,419,979,460"/>
<area shape="rect" id="node34" href="fs-writeback_8c.html#a044f1d7ff09b03f639232ec0e6a88ee1" title="EXPORT_SYMBOL" alt="" coords="2289,327,2428,354"/>
<area shape="rect" id="node43" href="fs-writeback_8c.html#ad0ca24311e1c0ba76d3810d240f72b08" title="locked_inode_to_wb\l_and_lock_list" alt="" coords="819,288,959,329"/>
<area shape="rect" id="node44" href="fs-writeback_8c.html#a2a36a21e075aa2a912f5c3cb027692cf" title="inode_io_list_move\l_locked" alt="" coords="822,353,955,395"/>
<area shape="rect" id="node12" href="dcache_8c.html#a9f042046c19f277000ddfc09b02e3633" title="d_find_alias" alt="" coords="1063,487,1154,514"/>
<area shape="rect" id="node16" href="dcache_8c.html#aebcca358185b5176b69b97e7eab12dfd" title="dput" alt="" coords="1085,411,1132,438"/>
<area shape="rect" id="node13" href="dcache_8c.html#a3eb221591429fdc67dec907c0d09d26a" title="__d_find_alias" alt="" coords="1239,538,1344,565"/>
<area shape="rect" id="node15" href="dcache_8c.html#aeb5ec7bdf3301140d66dd18ae638685c" title="EXPORT_SYMBOL" alt="" coords="1724,437,1863,463"/>
<area shape="rect" id="node14" href="dcache_8c.html#ab9c0fece5c680f2c592413b6d3239ae9" title="__dget_dlock" alt="" coords="1392,538,1491,565"/>
<area shape="rect" id="node17" href="dcache_8c.html#a364a93ebd8b57977a5a90f2076dd8f59" title="fast_dput" alt="" coords="1253,335,1329,362"/>
<area shape="rect" id="node18" href="dcache_8c.html#a689bf4f6109300b7bc021f1641052f99" title="retain_dentry" alt="" coords="1393,386,1490,413"/>
<area shape="rect" id="node20" href="dcache_8c.html#a4a5ea078fab8f6527abb7f44aa88efd3" title="dentry_kill" alt="" coords="1251,285,1332,311"/>
<area shape="rect" id="node19" href="dcache_8c.html#a3b177069d047c319ff2309aa5be9342e" title="d_lru_add" alt="" coords="1568,386,1647,413"/>
<area shape="rect" id="node21" href="dcache_8c.html#aa89b23ccc5b34160480a5b0541255a2e" title="__lock_parent" alt="" coords="1556,335,1659,362"/>
<area shape="rect" id="node22" href="dcache_8c.html#a051b3970369269b3c6fcc1a19be37bed" title="__dentry_kill" alt="" coords="1394,209,1489,235"/>
<area shape="rect" id="node42" href="dcache_8c.html#a6a36af9be383e7cbabb89162ff8af440" title="lock_parent" alt="" coords="1397,285,1486,311"/>
<area shape="rect" id="node23" href="dcache_8c.html#aa69465ec94d92f14786fdce2f5bfb175" title="d_lru_del" alt="" coords="1570,82,1645,109"/>
<area shape="rect" id="node24" href="dcache_8c.html#ae4904480d16c7850ae6994e92d110f96" title="__d_drop" alt="" coords="1570,285,1645,311"/>
<area shape="rect" id="node27" href="dcache_8c.html#ae2050a139fbd1eb7bfc238686e1b2e0b" title="dentry_unlist" alt="" coords="1559,133,1655,159"/>
<area shape="rect" id="node28" href="dcache_8c.html#acad4e66a4f8cc5a5bce5cb90bc5d6279" title="dentry_unlink_inode" alt="" coords="1539,183,1676,210"/>
<area shape="rect" id="node36" href="dcache_8c.html#ad8b0a5de190038ed843fa392d181c8a5" title="dentry_free" alt="" coords="1564,234,1651,261"/>
<area shape="rect" id="node25" href="dcache_8c.html#afe7718ea6372af4edd41d375be2b7755" title="___d_drop" alt="" coords="1752,386,1835,413"/>
<area shape="rect" id="node26" href="dcache_8c.html#ad0da24b939325fb96de67394f99b2766" title="d_hash" alt="" coords="1961,386,2025,413"/>
<area shape="rect" id="node29" href="dcache_8c.html#a0858bd86148196ec3ef3606f8f0de24f" title="__d_clear_type_and\l_inode" alt="" coords="1724,117,1863,159"/>
<area shape="rect" id="node30" href="inode_8c.html#a378733dcbf0fb08359b9a02145ac8fc3" title="iput" alt="" coords="1772,66,1815,93"/>
<area shape="rect" id="node31" href="inode_8c.html#a7e99b25ac29d19bc82fbddcb773c4f25" title="iput_final" alt="" coords="1955,66,2030,93"/>
<area shape="rect" id="node35" href="debugfs_2inode_8c.html#a16e485b5debd4cd96a200844c38df190" title="EXPORT_SYMBOL" alt="" coords="1923,117,2062,143"/>
<area shape="rect" id="node32" href="inode_8c.html#a943dee860d20f57552f168683dcb4b5d" title="inode_add_lru" alt="" coords="2131,117,2233,143"/>
<area shape="rect" id="node33" href="fs-writeback_8c.html#aceeba3df6a433f68c665086a2ee53faa" title="write_inode_now" alt="" coords="2123,66,2241,93"/>
<area shape="rect" id="node37" href="dcache_8c.html#a230d6245e3962408f039e2e33a251d98" title="dname_external" alt="" coords="1736,234,1851,261"/>
<area shape="rect" id="node38" href="dcache_8c.html#a1cda4f5743f52a426fe40cc5cf933675" title="external_name" alt="" coords="1939,285,2046,311"/>
<area shape="rect" id="node39" href="dcache_8c.html#a9017dd31269b4b6d79821de35551ae41" title="__d_free_external" alt="" coords="1731,335,1856,362"/>
<area shape="rect" id="node41" href="dcache_8c.html#a7d181ee17b4a49e02eac0f247fd484a9" title="__d_free" alt="" coords="1757,183,1829,210"/>
<area shape="rect" id="node40" href="dcache_8c.html#a711826e19d5ad53c7b0bbe26a878cfff" title="__d_free_external_name" alt="" coords="1911,335,2075,362"/>
<area shape="rect" id="node45" href="fs-writeback_8c.html#ad9e6fcccf4baffa8e6c91881c6e428a9" title="wb_io_lists_populated" alt="" coords="1033,361,1184,387"/>
<area shape="rect" id="node46" href="fs-writeback_8c.html#aa31b94b7a70c8c8d396a5f0f3e8ef1ec" title="wb_io_lists_depopulated" alt="" coords="1027,310,1191,337"/>
<area shape="rect" id="node50" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="451,325,522,351"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a8ae81c72eacf55adbfe6e7f702e88588_icgraph.png" border="0" usemap="#sufile_8c_a8ae81c72eacf55adbfe6e7f702e88588_icgraph" alt=""/></div>
<map name="sufile_8c_a8ae81c72eacf55adbfe6e7f702e88588_icgraph" id="sufile_8c_a8ae81c72eacf55adbfe6e7f702e88588_icgraph">
<area shape="rect" id="node2" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="197,368,377,395"/>
<area shape="rect" id="node25" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="634,116,757,143"/>
<area shape="rect" id="node3" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="432,394,569,420"/>
<area shape="rect" id="node24" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="435,343,566,370"/>
<area shape="rect" id="node36" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="429,446,572,488"/>
<area shape="rect" id="node40" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="636,219,755,246"/>
<area shape="rect" id="node42" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="431,670,570,696"/>
<area shape="rect" id="node45" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="431,514,570,556"/>
<area shape="rect" id="node46" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="632,612,759,639"/>
<area shape="rect" id="node47" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="425,167,576,194"/>
<area shape="rect" id="node49" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="443,218,559,244"/>
<area shape="rect" id="node4" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="635,394,755,420"/>
<area shape="rect" id="node22" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="631,445,760,486"/>
<area shape="rect" id="node5" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="832,394,973,436"/>
<area shape="rect" id="node6" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1055,284,1197,311"/>
<area shape="rect" id="node7" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1261,284,1440,311"/>
<area shape="rect" id="node8" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1929,338,2078,380"/>
<area shape="rect" id="node15" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1720,178,1877,204"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1488,277,1672,318"/>
<area shape="rect" id="node9" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="2149,400,2255,427"/>
<area shape="rect" id="node14" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="2144,346,2260,372"/>
<area shape="rect" id="node10" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="2324,402,2444,428"/>
<area shape="rect" id="node11" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2501,402,2616,428"/>
<area shape="rect" id="node12" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2493,503,2624,530"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="2672,528,2749,555"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1929,287,2077,314"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1934,170,2073,212"/>
<area shape="rect" id="node18" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1925,236,2081,263"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8h.html#a1907ac7b54882bbf06019eaf6d03c21c" title="nilfs_relax_pressure\l_in_lock" alt="" coords="1729,229,1868,270"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a8b69f4181745f44662620421e0f88ab0" title="nilfs_transaction_lock" alt="" coords="1725,295,1873,322"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1060,336,1192,377"/>
<area shape="rect" id="node31" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="639,284,752,311"/>
<area shape="rect" id="node35" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="624,343,767,370"/>
<area shape="rect" id="node26" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="826,94,979,136"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1039,102,1213,128"/>
<area shape="rect" id="node28" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1312,102,1389,128"/>
<area shape="rect" id="node29" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1527,152,1633,179"/>
<area shape="rect" id="node30" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1521,102,1639,128"/>
<area shape="rect" id="node32" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="831,212,974,253"/>
<area shape="rect" id="node33" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="815,343,991,370"/>
<area shape="rect" id="node34" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="827,277,978,318"/>
<area shape="rect" id="node37" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="849,612,956,639"/>
<area shape="rect" id="node39" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1283,546,1419,588"/>
<area shape="rect" id="node38" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="2325,608,2443,635"/>
<area shape="rect" id="node41" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1059,185,1193,226"/>
<area shape="rect" id="node43" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="2129,696,2275,723"/>
<area shape="rect" id="node44" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="624,664,767,705"/>
<area shape="rect" id="node48" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="2323,161,2445,202"/>
<area shape="rect" id="node50" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="1053,47,1199,74"/>
</map>
</div>

</div>
</div>
<a id="a044384f23ae4138292187d4d60d4cc94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a044384f23ae4138292187d4d60d4cc94">&#9670;&nbsp;</a></span>nilfs_sufile_do_set_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nilfs_sufile_do_set_error </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64&#160;</td>
          <td class="paramname"><em>segnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct buffer_head *&#160;</td>
          <td class="paramname"><em>header_bh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct buffer_head *&#160;</td>
          <td class="paramname"><em>su_bh</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a044384f23ae4138292187d4d60d4cc94_cgraph.png" border="0" usemap="#sufile_8c_a044384f23ae4138292187d4d60d4cc94_cgraph" alt=""/></div>
<map name="sufile_8c_a044384f23ae4138292187d4d60d4cc94_cgraph" id="sufile_8c_a044384f23ae4138292187d4d60d4cc94_cgraph">
<area shape="rect" id="node2" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="194,107,341,148"/>
<area shape="rect" id="node6" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="184,274,351,301"/>
<area shape="rect" id="node7" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="412,274,535,301"/>
<area shape="rect" id="node48" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="428,173,519,199"/>
<area shape="rect" id="node49" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="196,325,339,351"/>
<area shape="rect" id="node3" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="399,71,548,98"/>
<area shape="rect" id="node4" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="827,97,923,123"/>
<area shape="rect" id="node5" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="596,5,737,47"/>
<area shape="rect" id="node8" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="606,274,727,301"/>
<area shape="rect" id="node10" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="599,361,734,387"/>
<area shape="rect" id="node47" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="597,223,736,250"/>
<area shape="rect" id="node9" href="buffer_8c.html#ae236845de65ed065f74eecf8f6ee9742" title="EXPORT_SYMBOL_GPL" alt="" coords="789,237,961,263"/>
<area shape="rect" id="node11" href="fs-writeback_8c.html#af5890cdc0a937a4f944928bd1880d49b" title="block_dump___mark_inode\l_dirty" alt="" coords="785,419,965,460"/>
<area shape="rect" id="node34" href="fs-writeback_8c.html#a044f1d7ff09b03f639232ec0e6a88ee1" title="EXPORT_SYMBOL" alt="" coords="2276,327,2415,354"/>
<area shape="rect" id="node43" href="fs-writeback_8c.html#ad0ca24311e1c0ba76d3810d240f72b08" title="locked_inode_to_wb\l_and_lock_list" alt="" coords="805,288,945,329"/>
<area shape="rect" id="node44" href="fs-writeback_8c.html#a2a36a21e075aa2a912f5c3cb027692cf" title="inode_io_list_move\l_locked" alt="" coords="809,353,942,395"/>
<area shape="rect" id="node12" href="dcache_8c.html#a9f042046c19f277000ddfc09b02e3633" title="d_find_alias" alt="" coords="1050,487,1141,514"/>
<area shape="rect" id="node16" href="dcache_8c.html#aebcca358185b5176b69b97e7eab12dfd" title="dput" alt="" coords="1072,411,1119,438"/>
<area shape="rect" id="node13" href="dcache_8c.html#a3eb221591429fdc67dec907c0d09d26a" title="__d_find_alias" alt="" coords="1225,538,1331,565"/>
<area shape="rect" id="node15" href="dcache_8c.html#aeb5ec7bdf3301140d66dd18ae638685c" title="EXPORT_SYMBOL" alt="" coords="1711,437,1849,463"/>
<area shape="rect" id="node14" href="dcache_8c.html#ab9c0fece5c680f2c592413b6d3239ae9" title="__dget_dlock" alt="" coords="1379,538,1477,565"/>
<area shape="rect" id="node17" href="dcache_8c.html#a364a93ebd8b57977a5a90f2076dd8f59" title="fast_dput" alt="" coords="1240,335,1316,362"/>
<area shape="rect" id="node18" href="dcache_8c.html#a689bf4f6109300b7bc021f1641052f99" title="retain_dentry" alt="" coords="1379,386,1477,413"/>
<area shape="rect" id="node20" href="dcache_8c.html#a4a5ea078fab8f6527abb7f44aa88efd3" title="dentry_kill" alt="" coords="1237,285,1319,311"/>
<area shape="rect" id="node19" href="dcache_8c.html#a3b177069d047c319ff2309aa5be9342e" title="d_lru_add" alt="" coords="1555,386,1633,413"/>
<area shape="rect" id="node21" href="dcache_8c.html#aa89b23ccc5b34160480a5b0541255a2e" title="__lock_parent" alt="" coords="1543,335,1645,362"/>
<area shape="rect" id="node22" href="dcache_8c.html#a051b3970369269b3c6fcc1a19be37bed" title="__dentry_kill" alt="" coords="1381,209,1475,235"/>
<area shape="rect" id="node42" href="dcache_8c.html#a6a36af9be383e7cbabb89162ff8af440" title="lock_parent" alt="" coords="1383,285,1473,311"/>
<area shape="rect" id="node23" href="dcache_8c.html#aa69465ec94d92f14786fdce2f5bfb175" title="d_lru_del" alt="" coords="1557,82,1631,109"/>
<area shape="rect" id="node24" href="dcache_8c.html#ae4904480d16c7850ae6994e92d110f96" title="__d_drop" alt="" coords="1557,285,1631,311"/>
<area shape="rect" id="node27" href="dcache_8c.html#ae2050a139fbd1eb7bfc238686e1b2e0b" title="dentry_unlist" alt="" coords="1546,133,1642,159"/>
<area shape="rect" id="node28" href="dcache_8c.html#acad4e66a4f8cc5a5bce5cb90bc5d6279" title="dentry_unlink_inode" alt="" coords="1525,183,1663,210"/>
<area shape="rect" id="node36" href="dcache_8c.html#ad8b0a5de190038ed843fa392d181c8a5" title="dentry_free" alt="" coords="1551,234,1637,261"/>
<area shape="rect" id="node25" href="dcache_8c.html#afe7718ea6372af4edd41d375be2b7755" title="___d_drop" alt="" coords="1739,386,1821,413"/>
<area shape="rect" id="node26" href="dcache_8c.html#ad0da24b939325fb96de67394f99b2766" title="d_hash" alt="" coords="1947,386,2011,413"/>
<area shape="rect" id="node29" href="dcache_8c.html#a0858bd86148196ec3ef3606f8f0de24f" title="__d_clear_type_and\l_inode" alt="" coords="1711,117,1849,159"/>
<area shape="rect" id="node30" href="inode_8c.html#a378733dcbf0fb08359b9a02145ac8fc3" title="iput" alt="" coords="1759,66,1801,93"/>
<area shape="rect" id="node31" href="inode_8c.html#a7e99b25ac29d19bc82fbddcb773c4f25" title="iput_final" alt="" coords="1942,66,2017,93"/>
<area shape="rect" id="node35" href="debugfs_2inode_8c.html#a16e485b5debd4cd96a200844c38df190" title="EXPORT_SYMBOL" alt="" coords="1910,117,2049,143"/>
<area shape="rect" id="node32" href="inode_8c.html#a943dee860d20f57552f168683dcb4b5d" title="inode_add_lru" alt="" coords="2117,117,2220,143"/>
<area shape="rect" id="node33" href="fs-writeback_8c.html#aceeba3df6a433f68c665086a2ee53faa" title="write_inode_now" alt="" coords="2109,66,2228,93"/>
<area shape="rect" id="node37" href="dcache_8c.html#a230d6245e3962408f039e2e33a251d98" title="dname_external" alt="" coords="1723,234,1837,261"/>
<area shape="rect" id="node38" href="dcache_8c.html#a1cda4f5743f52a426fe40cc5cf933675" title="external_name" alt="" coords="1926,285,2033,311"/>
<area shape="rect" id="node39" href="dcache_8c.html#a9017dd31269b4b6d79821de35551ae41" title="__d_free_external" alt="" coords="1717,335,1843,362"/>
<area shape="rect" id="node41" href="dcache_8c.html#a7d181ee17b4a49e02eac0f247fd484a9" title="__d_free" alt="" coords="1744,183,1816,210"/>
<area shape="rect" id="node40" href="dcache_8c.html#a711826e19d5ad53c7b0bbe26a878cfff" title="__d_free_external_name" alt="" coords="1897,335,2061,362"/>
<area shape="rect" id="node45" href="fs-writeback_8c.html#ad9e6fcccf4baffa8e6c91881c6e428a9" title="wb_io_lists_populated" alt="" coords="1020,361,1171,387"/>
<area shape="rect" id="node46" href="fs-writeback_8c.html#aa31b94b7a70c8c8d396a5f0f3e8ef1ec" title="wb_io_lists_depopulated" alt="" coords="1013,310,1177,337"/>
<area shape="rect" id="node50" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="438,325,509,351"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a044384f23ae4138292187d4d60d4cc94_icgraph.png" border="0" usemap="#sufile_8c_a044384f23ae4138292187d4d60d4cc94_icgraph" alt=""/></div>
<map name="sufile_8c_a044384f23ae4138292187d4d60d4cc94_icgraph" id="sufile_8c_a044384f23ae4138292187d4d60d4cc94_icgraph">
<area shape="rect" id="node2" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="184,310,364,337"/>
<area shape="rect" id="node35" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="611,566,753,593"/>
<area shape="rect" id="node3" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="419,515,556,542"/>
<area shape="rect" id="node24" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="422,465,553,491"/>
<area shape="rect" id="node36" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="416,273,559,315"/>
<area shape="rect" id="node40" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="623,402,741,429"/>
<area shape="rect" id="node42" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="418,82,557,109"/>
<area shape="rect" id="node45" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="418,208,557,249"/>
<area shape="rect" id="node46" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="619,161,745,187"/>
<area shape="rect" id="node47" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="412,31,563,58"/>
<area shape="rect" id="node49" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="429,339,545,366"/>
<area shape="rect" id="node4" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="622,626,742,653"/>
<area shape="rect" id="node22" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="617,696,747,737"/>
<area shape="rect" id="node5" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="819,663,960,704"/>
<area shape="rect" id="node6" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1042,553,1183,579"/>
<area shape="rect" id="node7" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1248,525,1427,551"/>
<area shape="rect" id="node8" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1915,488,2065,529"/>
<area shape="rect" id="node15" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1707,386,1864,413"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1475,488,1659,529"/>
<area shape="rect" id="node9" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="2136,379,2241,406"/>
<area shape="rect" id="node14" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="2131,495,2247,522"/>
<area shape="rect" id="node10" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="2311,323,2431,350"/>
<area shape="rect" id="node11" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2488,273,2603,299"/>
<area shape="rect" id="node12" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2480,374,2611,401"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="2659,197,2736,223"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1916,437,2064,463"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1921,320,2059,361"/>
<area shape="rect" id="node18" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1912,386,2068,413"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8h.html#a1907ac7b54882bbf06019eaf6d03c21c" title="nilfs_relax_pressure\l_in_lock" alt="" coords="1716,488,1855,529"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a8b69f4181745f44662620421e0f88ab0" title="nilfs_transaction_lock" alt="" coords="1711,437,1859,463"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1047,604,1179,645"/>
<area shape="rect" id="node25" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="621,453,743,479"/>
<area shape="rect" id="node31" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="625,503,739,530"/>
<area shape="rect" id="node26" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="813,415,966,456"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1025,430,1200,457"/>
<area shape="rect" id="node28" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1299,361,1376,387"/>
<area shape="rect" id="node29" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1514,386,1619,413"/>
<area shape="rect" id="node30" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1508,335,1625,362"/>
<area shape="rect" id="node32" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="818,480,961,521"/>
<area shape="rect" id="node33" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="801,611,977,638"/>
<area shape="rect" id="node34" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="814,545,965,587"/>
<area shape="rect" id="node37" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="836,171,943,198"/>
<area shape="rect" id="node39" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1269,233,1405,275"/>
<area shape="rect" id="node38" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="2311,171,2430,198"/>
<area shape="rect" id="node41" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1045,364,1180,405"/>
<area shape="rect" id="node43" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="2116,47,2261,74"/>
<area shape="rect" id="node44" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="611,95,753,136"/>
<area shape="rect" id="node48" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="2309,5,2432,47"/>
<area shape="rect" id="node50" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="1040,313,1185,339"/>
</map>
</div>

</div>
</div>
<a id="a10c3757a2afcb34eb7d66ee614608724"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10c3757a2afcb34eb7d66ee614608724">&#9670;&nbsp;</a></span>nilfs_sufile_get_blkoff()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned long nilfs_sufile_get_blkoff </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64&#160;</td>
          <td class="paramname"><em>segnum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a10c3757a2afcb34eb7d66ee614608724_cgraph.png" border="0" usemap="#sufile_8c_a10c3757a2afcb34eb7d66ee614608724_cgraph" alt=""/></div>
<map name="sufile_8c_a10c3757a2afcb34eb7d66ee614608724_cgraph" id="sufile_8c_a10c3757a2afcb34eb7d66ee614608724_cgraph">
<area shape="rect" id="node2" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="391,5,487,32"/>
<area shape="rect" id="node3" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="201,27,343,69"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a10c3757a2afcb34eb7d66ee614608724_icgraph.png" border="0" usemap="#sufile_8c_a10c3757a2afcb34eb7d66ee614608724_icgraph" alt=""/></div>
<map name="sufile_8c_a10c3757a2afcb34eb7d66ee614608724_icgraph" id="sufile_8c_a10c3757a2afcb34eb7d66ee614608724_icgraph">
<area shape="rect" id="node2" href="sufile_8c.html#a38f2abf7ef7577b1af4b9e8fc9316727" title="nilfs_sufile_get_segment\l_usage_block" alt="" coords="201,327,368,369"/>
<area shape="rect" id="node5" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="865,815,1003,841"/>
<area shape="rect" id="node48" href="sufile_8c.html#a6c6906f2fa7470c98e36fadfed86c294" title="nilfs_sufile_delete\l_segment_usage_block" alt="" coords="205,173,364,214"/>
<area shape="rect" id="node49" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687" title="nilfs_sufile_set_suinfo" alt="" coords="424,53,575,80"/>
<area shape="rect" id="node3" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="434,357,565,384"/>
<area shape="rect" id="node22" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="875,508,993,535"/>
<area shape="rect" id="node31" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="865,97,1003,138"/>
<area shape="rect" id="node33" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="859,163,1009,189"/>
<area shape="rect" id="node42" href="sufile_8h.html#ae5c9db186be6baf07d66e049a0fd9b9b" title="nilfs_sufile_mark_dirty" alt="" coords="423,560,575,587"/>
<area shape="rect" id="node43" href="sufile_8h.html#ac6379742426c30d02072b1a5b0f527f8" title="nilfs_sufile_set_segment\l_usage" alt="" coords="416,653,583,694"/>
<area shape="rect" id="node46" href="sufile_8h.html#a202058a1d5a7ee3658e8e7cda1ffee37" title="nilfs_sufile_trim_fs" alt="" coords="434,307,565,333"/>
<area shape="rect" id="node4" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="631,307,811,333"/>
<area shape="rect" id="node37" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="659,357,782,384"/>
<area shape="rect" id="node38" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="877,609,991,636"/>
<area shape="rect" id="node41" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="649,459,792,485"/>
<area shape="rect" id="node15" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="863,289,1005,330"/>
<area shape="rect" id="node28" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="865,355,1003,381"/>
<area shape="rect" id="node32" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="1082,144,1209,171"/>
<area shape="rect" id="node35" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="876,405,992,432"/>
<area shape="rect" id="node6" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="1085,881,1205,908"/>
<area shape="rect" id="node13" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="1081,815,1210,857"/>
<area shape="rect" id="node7" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="1298,863,1439,905"/>
<area shape="rect" id="node8" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1506,703,1647,729"/>
<area shape="rect" id="node9" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1697,728,1876,755"/>
<area shape="rect" id="node10" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1941,662,2091,703"/>
<area shape="rect" id="node11" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1937,728,2095,755"/>
<area shape="rect" id="node12" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1924,779,2108,821"/>
<area shape="rect" id="node14" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1303,746,1435,787"/>
<area shape="rect" id="node16" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="1315,160,1422,187"/>
<area shape="rect" id="node21" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1509,219,1645,261"/>
<area shape="rect" id="node17" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="1517,159,1636,185"/>
<area shape="rect" id="node18" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1748,132,1825,159"/>
<area shape="rect" id="node19" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1956,132,2076,159"/>
<area shape="rect" id="node20" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2156,132,2271,159"/>
<area shape="rect" id="node23" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="1069,465,1222,506"/>
<area shape="rect" id="node26" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1078,530,1213,571"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="1074,647,1217,689"/>
<area shape="rect" id="node24" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1281,469,1456,496"/>
<area shape="rect" id="node25" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1538,441,1615,468"/>
<area shape="rect" id="node29" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="1504,291,1649,317"/>
<area shape="rect" id="node30" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="1074,347,1217,389"/>
<area shape="rect" id="node34" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="1307,94,1430,135"/>
<area shape="rect" id="node36" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="1296,415,1441,441"/>
<area shape="rect" id="node39" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="1057,713,1233,740"/>
<area shape="rect" id="node40" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="1293,615,1444,657"/>
<area shape="rect" id="node44" href="nilfs2_2segment_8c.html#a5e55835a8c7bac0db60b81df4d707d4e" title="nilfs_segctor_update\l_segusage" alt="" coords="1505,865,1648,906"/>
<area shape="rect" id="node45" href="nilfs2_2segment_8c.html#a2ad2a278dd41af2f12f1e28a0b61ec8c" title="nilfs_cancel_segusage" alt="" coords="643,737,798,764"/>
<area shape="rect" id="node47" href="nilfs2_2ioctl_8c.html#a8913a80e32e55bd55c20461949a3e6b6" title="nilfs_ioctl_trim_fs" alt="" coords="659,155,783,181"/>
<area shape="rect" id="node50" href="nilfs2_2ioctl_8c.html#a879fc213e33210988660173aec449143" title="nilfs_ioctl_set_suinfo" alt="" coords="649,23,793,49"/>
</map>
</div>

</div>
</div>
<a id="a7df3cdff37c5aa00cca3458f1d7d400e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7df3cdff37c5aa00cca3458f1d7d400e">&#9670;&nbsp;</a></span>nilfs_sufile_get_header_block()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_sufile_get_header_block </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct buffer_head **&#160;</td>
          <td class="paramname"><em>bhp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a7df3cdff37c5aa00cca3458f1d7d400e_cgraph.png" border="0" usemap="#sufile_8c_a7df3cdff37c5aa00cca3458f1d7d400e_cgraph" alt=""/></div>
<map name="sufile_8c_a7df3cdff37c5aa00cca3458f1d7d400e_cgraph" id="sufile_8c_a7df3cdff37c5aa00cca3458f1d7d400e_cgraph">
<area shape="rect" id="node2" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="208,595,347,622"/>
<area shape="rect" id="node3" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="395,514,540,540"/>
<area shape="rect" id="node28" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="589,734,745,760"/>
<area shape="rect" id="node4" href="mdt_8c.html#a43ded315f7122596d14b88c43fe9c98d" title="nilfs_mdt_submit_block" alt="" coords="588,376,747,403"/>
<area shape="rect" id="node5" href="nilfs2_2page_8c.html#aa4a24cc5a684ba71b9e4423f2ea38970" title="nilfs_grab_buffer" alt="" coords="819,456,937,483"/>
<area shape="rect" id="node13" href="buffer_8c.html#a5fc92b2c44523c64e98193eaa4f46541" title="unlock_buffer" alt="" coords="1283,43,1383,70"/>
<area shape="rect" id="node14" href="nilfs2_2bmap_8h.html#a282d60470960949277ac67e31c97f05b" title="nilfs_bmap_lookup" alt="" coords="813,376,943,403"/>
<area shape="rect" id="node21" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1297,683,1368,710"/>
<area shape="rect" id="node22" href="buffer_8c.html#ade60786fa99b4fbb4cf607434af395db" title="end_buffer_read_sync" alt="" coords="803,94,953,120"/>
<area shape="rect" id="node24" href="buffer_8c.html#ab65df498c54845f497bae7afe9222c91" title="submit_bh" alt="" coords="837,220,919,247"/>
<area shape="rect" id="node6" href="nilfs2_2page_8c.html#a051d0268f3af219ba3e2a9ca79a8843c" title="__nilfs_get_page_block" alt="" coords="1022,456,1181,483"/>
<area shape="rect" id="node7" href="buffer_8c.html#a4844b8163e94b4a214fbf85d86fe88d0" title="create_empty_buffers" alt="" coords="1259,515,1407,542"/>
<area shape="rect" id="node11" href="page_8h.html#aaad58f68fa9675f7e9803744d0e3f414" title="nilfs_page_get_nth\l_block" alt="" coords="1267,449,1398,490"/>
<area shape="rect" id="node12" href="buffer_8c.html#a59a45ba914a951c36f0cabe79be9756b" title="touch_buffer" alt="" coords="1285,398,1380,424"/>
<area shape="rect" id="node8" href="buffer_8c.html#a94ca9132735bfcb0b0b2ae9531461cc8" title="alloc_page_buffers" alt="" coords="1476,519,1607,546"/>
<area shape="rect" id="node10" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1472,271,1611,298"/>
<area shape="rect" id="node9" href="buffer_8c.html#ae236845de65ed065f74eecf8f6ee9742" title="EXPORT_SYMBOL_GPL" alt="" coords="1663,568,1835,595"/>
<area shape="rect" id="node15" href="nilfs2_2bmap_8h.html#a47e39e91829ba28e44d1b0913f5ef480" title="nilfs_bmap_lookup_at\l_level" alt="" coords="1027,340,1175,381"/>
<area shape="rect" id="node20" href="nilfs2_2bmap_8h.html#abd107e6c373b3d12d3817a32d403001b" title="nilfs_bmap_get_dat" alt="" coords="1034,406,1169,432"/>
<area shape="rect" id="node16" href="nilfs2_2bmap_8c.html#a7a7ea41075313d317e5036ebc1fbbe3b" title="nilfs_bmap_convert\l_error" alt="" coords="1265,566,1400,608"/>
<area shape="rect" id="node18" href="dat_8c.html#a1641d48ed89a1de35dda5513abd31cc3" title="nilfs_dat_translate" alt="" coords="1269,296,1397,323"/>
<area shape="rect" id="node19" href="nilfs2_2bmap_8c.html#aef6e9d2acff7b7d161389bb790483d06" title="nilfs_bmap_get_dat" alt="" coords="1265,347,1400,374"/>
<area shape="rect" id="node17" href="nilfs2_2super_8c.html#a5f424aefed531edcd064bfa930d96670" title="__nilfs_error" alt="" coords="1495,574,1588,600"/>
<area shape="rect" id="node23" href="buffer_8c.html#a85e290b32d9599acd25df3b159392ab7" title="__end_buffer_read_notouch" alt="" coords="1010,43,1193,70"/>
<area shape="rect" id="node25" href="buffer_8c.html#a5fd6f01c5f9cff0945cb999cbefa412d" title="submit_bh_wbc" alt="" coords="1045,220,1158,247"/>
<area shape="rect" id="node26" href="buffer_8c.html#a2463267e7636f2be0fc2b44fb65cb5ba" title="end_bio_bh_io_sync" alt="" coords="1263,195,1403,222"/>
<area shape="rect" id="node27" href="buffer_8c.html#aa35a4aa9ac3d40858082aabb83e2a44c" title="guard_bio_eod" alt="" coords="1279,246,1386,272"/>
<area shape="rect" id="node29" href="nilfs_8h.html#aacff7fe9750a849356475b2063b69e3b" title="nilfs_transaction_begin" alt="" coords="801,919,955,946"/>
<area shape="rect" id="node34" href="mdt_8c.html#a759ca943427ead8bb22ecdc82a9338ee" title="nilfs_mdt_insert_new\l_block" alt="" coords="805,676,951,717"/>
<area shape="rect" id="node45" href="nilfs_8h.html#a576ee8d20fe7a5d7c5889cb118fe0533" title="nilfs_transaction_commit" alt="" coords="795,810,961,836"/>
<area shape="rect" id="node50" href="nilfs_8h.html#a155140033fba0977ed043367001c3384" title="nilfs_transaction_abort" alt="" coords="801,970,955,996"/>
<area shape="rect" id="node30" href="nilfs2_2segment_8c.html#ada0ba1bf162679380f6096c9f83b94ea" title="nilfs_prepare_segment_lock" alt="" coords="1009,1003,1193,1030"/>
<area shape="rect" id="node31" href="the__nilfs_8c.html#a137faca9117bfef2a2264ccf3a9aa809" title="nilfs_near_disk_full" alt="" coords="1035,952,1168,979"/>
<area shape="rect" id="node32" href="sufile_8c.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="1241,952,1424,979"/>
<area shape="rect" id="node33" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="1496,952,1587,979"/>
<area shape="rect" id="node35" href="nilfs2_2bmap_8c.html#a4e7fd87b553f99a5d10b2f1d0cbbec0b" title="nilfs_bmap_insert" alt="" coords="1039,531,1163,558"/>
<area shape="rect" id="node38" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1271,734,1394,760"/>
<area shape="rect" id="node44" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="1030,632,1173,659"/>
<area shape="rect" id="node36" href="nilfs2_2bmap_8c.html#ac5f71baa604f8d2043ceb4c11aa72ff3" title="nilfs_bmap_do_insert" alt="" coords="1260,632,1405,659"/>
<area shape="rect" id="node37" href="nilfs2_2btree_8c.html#a6f8ff0cabbdb9b0241bf032c6a5ac11d" title="nilfs_btree_convert\l_and_insert" alt="" coords="1475,625,1607,666"/>
<area shape="rect" id="node39" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1481,691,1602,718"/>
<area shape="rect" id="node40" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1474,742,1609,768"/>
<area shape="rect" id="node41" href="fs-writeback_8c.html#af5890cdc0a937a4f944928bd1880d49b" title="block_dump___mark_inode\l_dirty" alt="" coords="1659,800,1839,841"/>
<area shape="rect" id="node42" href="fs-writeback_8c.html#ad0ca24311e1c0ba76d3810d240f72b08" title="locked_inode_to_wb\l_and_lock_list" alt="" coords="1679,669,1819,710"/>
<area shape="rect" id="node43" href="fs-writeback_8c.html#a2a36a21e075aa2a912f5c3cb027692cf" title="inode_io_list_move\l_locked" alt="" coords="1682,734,1815,776"/>
<area shape="rect" id="node46" href="nilfs2_2segment_8c.html#aa55509ef3ea01cc74488f916f1d551f3" title="nilfs_segctor_start\l_timer" alt="" coords="1037,886,1166,928"/>
<area shape="rect" id="node47" href="nilfs2_2segment_8c.html#a23c179e5f28f728a442e31641f71c795" title="nilfs_segctor_do_flush" alt="" coords="1025,784,1177,811"/>
<area shape="rect" id="node48" href="nilfs2_2segment_8c.html#ad8bab60b16b37c93e180e1ea3e1580ad" title="nilfs_construct_segment" alt="" coords="1019,835,1183,862"/>
<area shape="rect" id="node49" href="nilfs2_2segment_8c.html#aece5ba8b7c1a8df29083370bfb0f3aad" title="nilfs_segctor_sync" alt="" coords="1267,835,1398,862"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a7df3cdff37c5aa00cca3458f1d7d400e_icgraph.png" border="0" usemap="#sufile_8c_a7df3cdff37c5aa00cca3458f1d7d400e_icgraph" alt=""/></div>
<map name="sufile_8c_a7df3cdff37c5aa00cca3458f1d7d400e_icgraph" id="sufile_8c_a7df3cdff37c5aa00cca3458f1d7d400e_icgraph">
<area shape="rect" id="node2" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="215,471,352,497"/>
<area shape="rect" id="node4" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="645,243,775,269"/>
<area shape="rect" id="node35" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="651,345,769,372"/>
<area shape="rect" id="node37" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="641,812,779,839"/>
<area shape="rect" id="node40" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="641,695,779,737"/>
<area shape="rect" id="node41" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="843,699,969,725"/>
<area shape="rect" id="node44" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="652,401,768,428"/>
<area shape="rect" id="node49" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687" title="nilfs_sufile_set_suinfo" alt="" coords="208,521,359,548"/>
<area shape="rect" id="node3" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="407,496,587,523"/>
<area shape="rect" id="node46" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="437,445,557,472"/>
<area shape="rect" id="node48" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="841,23,971,65"/>
<area shape="rect" id="node30" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="639,503,781,545"/>
<area shape="rect" id="node42" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="635,452,785,479"/>
<area shape="rect" id="node5" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="845,243,967,269"/>
<area shape="rect" id="node15" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="849,192,963,219"/>
<area shape="rect" id="node29" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="835,141,977,168"/>
<area shape="rect" id="node6" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="1038,329,1191,370"/>
<area shape="rect" id="node7" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1251,328,1425,355"/>
<area shape="rect" id="node8" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1524,408,1601,435"/>
<area shape="rect" id="node9" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1739,383,1845,409"/>
<area shape="rect" id="node10" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1733,433,1851,460"/>
<area shape="rect" id="node11" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1932,387,2089,413"/>
<area shape="rect" id="node12" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="2141,328,2289,355"/>
<area shape="rect" id="node13" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="2146,379,2285,421"/>
<area shape="rect" id="node14" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="2137,277,2293,304"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="1043,263,1186,305"/>
<area shape="rect" id="node26" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="1027,147,1203,173"/>
<area shape="rect" id="node28" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="1039,198,1190,239"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1267,205,1409,232"/>
<area shape="rect" id="node18" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1473,244,1652,271"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="2141,211,2290,253"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1700,266,1884,307"/>
<area shape="rect" id="node20" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="2347,219,2452,245"/>
<area shape="rect" id="node22" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="2341,269,2457,296"/>
<area shape="rect" id="node21" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="2505,361,2625,388"/>
<area shape="rect" id="node24" href="nilfs2_2segment_8h.html#a1907ac7b54882bbf06019eaf6d03c21c" title="nilfs_relax_pressure\l_in_lock" alt="" coords="1941,321,2080,362"/>
<area shape="rect" id="node25" href="nilfs2_2segment_8c.html#a8b69f4181745f44662620421e0f88ab0" title="nilfs_transaction_lock" alt="" coords="1937,269,2085,296"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1272,139,1404,181"/>
<area shape="rect" id="node31" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="1061,699,1168,725"/>
<area shape="rect" id="node34" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1270,569,1406,610"/>
<area shape="rect" id="node32" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="1279,699,1397,725"/>
<area shape="rect" id="node33" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1524,612,1601,639"/>
<area shape="rect" id="node36" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1271,379,1405,421"/>
<area shape="rect" id="node38" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="1265,783,1411,809"/>
<area shape="rect" id="node39" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="835,750,977,791"/>
<area shape="rect" id="node43" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="1053,497,1176,538"/>
<area shape="rect" id="node45" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="833,445,979,472"/>
<area shape="rect" id="node47" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="1044,81,1185,122"/>
<area shape="rect" id="node50" href="nilfs2_2ioctl_8c.html#a879fc213e33210988660173aec449143" title="nilfs_ioctl_set_suinfo" alt="" coords="425,573,569,600"/>
</map>
</div>

</div>
</div>
<a id="a50c0d7ff8c8bf821d281286007c39cd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50c0d7ff8c8bf821d281286007c39cd5">&#9670;&nbsp;</a></span>nilfs_sufile_get_ncleansegs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long nilfs_sufile_get_ncleansegs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>nilfs_sufile_get_ncleansegs - return the number of clean segments : inode of segment usage file </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a50c0d7ff8c8bf821d281286007c39cd5_cgraph.png" border="0" usemap="#sufile_8c_a50c0d7ff8c8bf821d281286007c39cd5_cgraph" alt=""/></div>
<map name="sufile_8c_a50c0d7ff8c8bf821d281286007c39cd5_cgraph" id="sufile_8c_a50c0d7ff8c8bf821d281286007c39cd5_cgraph">
<area shape="rect" id="node2" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="236,5,327,32"/>
<area shape="rect" id="node3" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="375,5,471,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a50c0d7ff8c8bf821d281286007c39cd5_icgraph.png" border="0" usemap="#sufile_8c_a50c0d7ff8c8bf821d281286007c39cd5_icgraph" alt=""/></div>
<map name="sufile_8c_a50c0d7ff8c8bf821d281286007c39cd5_icgraph" id="sufile_8c_a50c0d7ff8c8bf821d281286007c39cd5_icgraph">
<area shape="rect" id="node2" href="nilfs2_2sysfs_8c.html#ad6b551fbfd9a694cf672480de0c6df9d" title="nilfs_segments_clean\l_segments_show" alt="" coords="252,443,400,484"/>
<area shape="rect" id="node3" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="236,509,416,535"/>
<area shape="rect" id="node27" href="the__nilfs_8h.html#a6d64c6b82e4107f17097d08e4f2b933b" title="nilfs_count_free_blocks" alt="" coords="247,895,405,922"/>
<area shape="rect" id="node35" href="the__nilfs_8h.html#a90dd6a38fbbe4af1b07031036a6ee500" title="nilfs_near_disk_full" alt="" coords="259,1022,393,1049"/>
<area shape="rect" id="node4" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="489,559,626,586"/>
<area shape="rect" id="node7" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="492,391,623,418"/>
<area shape="rect" id="node13" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="486,615,629,656"/>
<area shape="rect" id="node16" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="498,122,617,149"/>
<area shape="rect" id="node18" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="488,286,627,313"/>
<area shape="rect" id="node21" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="488,687,627,728"/>
<area shape="rect" id="node22" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="714,794,841,821"/>
<area shape="rect" id="node23" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="482,458,633,485"/>
<area shape="rect" id="node25" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="499,509,615,535"/>
<area shape="rect" id="node5" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="717,559,837,586"/>
<area shape="rect" id="node6" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="713,611,842,652"/>
<area shape="rect" id="node8" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="716,341,839,367"/>
<area shape="rect" id="node10" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="721,290,834,317"/>
<area shape="rect" id="node12" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="706,391,849,418"/>
<area shape="rect" id="node9" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="904,283,1057,324"/>
<area shape="rect" id="node11" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="909,141,1052,183"/>
<area shape="rect" id="node14" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="927,794,1034,821"/>
<area shape="rect" id="node15" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="709,728,845,769"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="710,5,845,47"/>
<area shape="rect" id="node19" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="705,173,850,199"/>
<area shape="rect" id="node20" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="706,224,849,265"/>
<area shape="rect" id="node24" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="716,443,839,484"/>
<area shape="rect" id="node26" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="705,509,850,535"/>
<area shape="rect" id="node28" href="nilfs2_2super_8c.html#a6cb8ff08bb40fc6f664e18570efacb50" title="nilfs_set_log_cursor" alt="" coords="488,845,627,871"/>
<area shape="rect" id="node32" href="nilfs2_2super_8c.html#a11ed86135bdf32d65de6a5ec47e23783" title="nilfs_statfs" alt="" coords="514,895,601,922"/>
<area shape="rect" id="node33" href="nilfs2_2sysfs_8c.html#af7c911663115a102ca0afffeb63820ec" title="nilfs_dev_free_blocks_show" alt="" coords="464,946,651,973"/>
<area shape="rect" id="node34" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="499,997,616,1023"/>
<area shape="rect" id="node29" href="nilfs2_2super_8c.html#a8fc44d93b832ec3180c5936e4b2b623d" title="nilfs_cleanup_super" alt="" coords="709,895,846,922"/>
<area shape="rect" id="node30" href="nilfs2_2super_8c.html#aa52d92dd32f84052f43449918f769c15" title="nilfs_sync_fs" alt="" coords="728,997,827,1023"/>
<area shape="rect" id="node31" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="699,946,856,973"/>
<area shape="rect" id="node36" href="nilfs2_2file_8c.html#afcd58fb7c6b35bfcc8fbc7bb056ada6a" title="nilfs_page_mkwrite" alt="" coords="913,1402,1048,1429"/>
<area shape="rect" id="node37" href="nilfs2_2segment_8c.html#ae4a012a0fc0026d060aa426f15cfb8a7" title="nilfs_transaction_begin" alt="" coords="480,1402,635,1429"/>
<area shape="rect" id="node38" href="nilfs_8h.html#ac6f027abd7712740e465f16c41e7d69e" title="nilfs_get_block" alt="" coords="723,1453,832,1479"/>
<area shape="rect" id="node39" href="nilfs2_2inode_8c.html#a312da46a81f7b2935058b894b07c327a" title="nilfs_write_begin" alt="" coords="921,1478,1040,1505"/>
<area shape="rect" id="node40" href="nilfs_8h.html#a09611eebbba5a083ef8bc7e99be0f4a1" title="nilfs_truncate" alt="" coords="931,1554,1031,1581"/>
<area shape="rect" id="node41" href="nilfs_8h.html#a6397167aefce0988e92601bcc79770d6" title="nilfs_setattr" alt="" coords="1105,1655,1196,1682"/>
<area shape="rect" id="node42" href="nilfs_8h.html#a83b6688ab0aed44d51559794d660c5ca" title="nilfs_evict_inode" alt="" coords="718,1605,837,1631"/>
<area shape="rect" id="node43" href="nilfs_8h.html#a427f81f381729712183a50be32eec24c" title="nilfs_dirty_inode" alt="" coords="719,1655,835,1682"/>
<area shape="rect" id="node44" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="733,1706,822,1733"/>
<area shape="rect" id="node45" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="731,1098,823,1125"/>
<area shape="rect" id="node46" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="728,1149,827,1175"/>
<area shape="rect" id="node47" href="nilfs2_2namei_8c.html#a58c2145f412579c3d56691a02664b765" title="nilfs_link" alt="" coords="741,1199,814,1226"/>
<area shape="rect" id="node48" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="735,1250,820,1277"/>
<area shape="rect" id="node49" href="nilfs2_2namei_8c.html#a2d87a38f1671f1e8162939d34f52abd9" title="nilfs_unlink" alt="" coords="734,1301,821,1327"/>
<area shape="rect" id="node50" href="nilfs2_2namei_8c.html#aa26376eec3ac46f8addd4a5f6f7ca1e2" title="nilfs_rmdir" alt="" coords="736,1351,819,1378"/>
</map>
</div>

</div>
</div>
<a id="a618eb2bb692e0a971e9606f29e87261c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a618eb2bb692e0a971e9606f29e87261c">&#9670;&nbsp;</a></span>nilfs_sufile_get_offset()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned long nilfs_sufile_get_offset </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64&#160;</td>
          <td class="paramname"><em>segnum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a618eb2bb692e0a971e9606f29e87261c_cgraph.png" border="0" usemap="#sufile_8c_a618eb2bb692e0a971e9606f29e87261c_cgraph" alt=""/></div>
<map name="sufile_8c_a618eb2bb692e0a971e9606f29e87261c_cgraph" id="sufile_8c_a618eb2bb692e0a971e9606f29e87261c_cgraph">
<area shape="rect" id="node2" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="392,5,488,32"/>
<area shape="rect" id="node3" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="203,27,344,69"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a618eb2bb692e0a971e9606f29e87261c_icgraph.png" border="0" usemap="#sufile_8c_a618eb2bb692e0a971e9606f29e87261c_icgraph" alt=""/></div>
<map name="sufile_8c_a618eb2bb692e0a971e9606f29e87261c_icgraph" id="sufile_8c_a618eb2bb692e0a971e9606f29e87261c_icgraph">
<area shape="rect" id="node2" href="sufile_8c.html#a34ecb984fd0f57101d2ee0b4bde4bf95" title="nilfs_sufile_segment\l_usages_in_block" alt="" coords="205,651,347,692"/>
<area shape="rect" id="node33" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="858,984,997,1025"/>
<area shape="rect" id="node35" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="852,1050,1003,1077"/>
<area shape="rect" id="node41" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="203,716,349,757"/>
<area shape="rect" id="node3" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="427,479,546,506"/>
<area shape="rect" id="node39" href="sufile_8h.html#a202058a1d5a7ee3658e8e7cda1ffee37" title="nilfs_sufile_trim_fs" alt="" coords="421,698,552,725"/>
<area shape="rect" id="node4" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="1253,516,1406,557"/>
<area shape="rect" id="node7" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1485,117,1620,159"/>
<area shape="rect" id="node10" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="1258,231,1401,272"/>
<area shape="rect" id="node12" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="624,639,804,666"/>
<area shape="rect" id="node5" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1465,550,1640,577"/>
<area shape="rect" id="node6" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1739,577,1816,603"/>
<area shape="rect" id="node8" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1688,182,1867,209"/>
<area shape="rect" id="node9" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1915,175,2064,216"/>
<area shape="rect" id="node11" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1482,238,1623,265"/>
<area shape="rect" id="node13" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="859,335,996,362"/>
<area shape="rect" id="node18" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="862,538,993,565"/>
<area shape="rect" id="node24" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="856,691,999,732"/>
<area shape="rect" id="node30" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="858,589,997,615"/>
<area shape="rect" id="node34" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="1059,831,1185,858"/>
<area shape="rect" id="node37" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="869,639,985,666"/>
<area shape="rect" id="node14" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="1062,234,1182,261"/>
<area shape="rect" id="node16" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="1057,289,1187,331"/>
<area shape="rect" id="node15" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="1259,165,1400,207"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1487,348,1619,389"/>
<area shape="rect" id="node19" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="1061,511,1183,538"/>
<area shape="rect" id="node20" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="1065,355,1179,382"/>
<area shape="rect" id="node23" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="1051,461,1193,487"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="1241,465,1417,491"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="1254,348,1405,389"/>
<area shape="rect" id="node25" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="1276,831,1383,858"/>
<area shape="rect" id="node29" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1261,748,1397,789"/>
<area shape="rect" id="node26" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="1493,831,1612,858"/>
<area shape="rect" id="node27" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1739,857,1816,883"/>
<area shape="rect" id="node28" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1929,857,2049,883"/>
<area shape="rect" id="node31" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="1480,698,1625,725"/>
<area shape="rect" id="node32" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="1051,563,1193,604"/>
<area shape="rect" id="node36" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="1268,999,1391,1040"/>
<area shape="rect" id="node38" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="1480,615,1625,642"/>
<area shape="rect" id="node40" href="nilfs2_2ioctl_8c.html#a8913a80e32e55bd55c20461949a3e6b6" title="nilfs_ioctl_trim_fs" alt="" coords="652,739,776,766"/>
<area shape="rect" id="node42" href="sufile_8h.html#aff87ff4257115842ff3c7940e5f8e769" title="nilfs_sufile_do_cancel_free" alt="" coords="397,581,576,607"/>
<area shape="rect" id="node43" href="sufile_8h.html#acad60c93c0f7f6c3a8a9dc843107f1ed" title="nilfs_sufile_do_scrap" alt="" coords="415,749,559,775"/>
<area shape="rect" id="node44" href="sufile_8h.html#a577d0d35a7907909b6c0a139d8cc1704" title="nilfs_sufile_do_free" alt="" coords="419,530,554,557"/>
<area shape="rect" id="node45" href="sufile_8h.html#ac6379742426c30d02072b1a5b0f527f8" title="nilfs_sufile_set_segment\l_usage" alt="" coords="403,241,570,283"/>
<area shape="rect" id="node48" href="sufile_8h.html#a7e943e59486cd6176a3317bed589b7c9" title="nilfs_sufile_do_set\l_error" alt="" coords="421,632,552,673"/>
<area shape="rect" id="node49" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687" title="nilfs_sufile_set_suinfo" alt="" coords="411,799,562,826"/>
<area shape="rect" id="node46" href="nilfs2_2segment_8c.html#a5e55835a8c7bac0db60b81df4d707d4e" title="nilfs_segctor_update\l_segusage" alt="" coords="643,5,785,47"/>
<area shape="rect" id="node47" href="nilfs2_2segment_8c.html#a2ad2a278dd41af2f12f1e28a0b61ec8c" title="nilfs_cancel_segusage" alt="" coords="637,71,791,98"/>
<area shape="rect" id="node50" href="nilfs2_2ioctl_8c.html#a879fc213e33210988660173aec449143" title="nilfs_ioctl_set_suinfo" alt="" coords="642,882,786,909"/>
</map>
</div>

</div>
</div>
<a id="a38f2abf7ef7577b1af4b9e8fc9316727"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38f2abf7ef7577b1af4b9e8fc9316727">&#9670;&nbsp;</a></span>nilfs_sufile_get_segment_usage_block()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_sufile_get_segment_usage_block </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64&#160;</td>
          <td class="paramname"><em>segnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>create</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct buffer_head **&#160;</td>
          <td class="paramname"><em>bhp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a38f2abf7ef7577b1af4b9e8fc9316727_cgraph.png" border="0" usemap="#sufile_8c_a38f2abf7ef7577b1af4b9e8fc9316727_cgraph" alt=""/></div>
<map name="sufile_8c_a38f2abf7ef7577b1af4b9e8fc9316727_cgraph" id="sufile_8c_a38f2abf7ef7577b1af4b9e8fc9316727_cgraph">
<area shape="rect" id="node2" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="220,635,359,662"/>
<area shape="rect" id="node49" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="1075,863,1223,890"/>
<area shape="rect" id="node3" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="412,464,557,491"/>
<area shape="rect" id="node28" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="407,635,563,662"/>
<area shape="rect" id="node4" href="mdt_8c.html#a43ded315f7122596d14b88c43fe9c98d" title="nilfs_mdt_submit_block" alt="" coords="615,350,773,376"/>
<area shape="rect" id="node5" href="nilfs2_2page_8c.html#aa4a24cc5a684ba71b9e4423f2ea38970" title="nilfs_grab_buffer" alt="" coords="858,426,977,452"/>
<area shape="rect" id="node13" href="buffer_8c.html#a5fc92b2c44523c64e98193eaa4f46541" title="unlock_buffer" alt="" coords="1312,67,1412,94"/>
<area shape="rect" id="node14" href="nilfs2_2bmap_8h.html#a282d60470960949277ac67e31c97f05b" title="nilfs_bmap_lookup" alt="" coords="852,350,983,376"/>
<area shape="rect" id="node21" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1327,707,1397,734"/>
<area shape="rect" id="node22" href="buffer_8c.html#ade60786fa99b4fbb4cf607434af395db" title="end_buffer_read_sync" alt="" coords="842,67,993,94"/>
<area shape="rect" id="node24" href="buffer_8c.html#ab65df498c54845f497bae7afe9222c91" title="submit_bh" alt="" coords="876,219,959,246"/>
<area shape="rect" id="node6" href="nilfs2_2page_8c.html#a051d0268f3af219ba3e2a9ca79a8843c" title="__nilfs_get_page_block" alt="" coords="1069,430,1228,456"/>
<area shape="rect" id="node7" href="buffer_8c.html#a4844b8163e94b4a214fbf85d86fe88d0" title="create_empty_buffers" alt="" coords="1288,488,1436,515"/>
<area shape="rect" id="node11" href="page_8h.html#aaad58f68fa9675f7e9803744d0e3f414" title="nilfs_page_get_nth\l_block" alt="" coords="1297,422,1427,464"/>
<area shape="rect" id="node12" href="buffer_8c.html#a59a45ba914a951c36f0cabe79be9756b" title="touch_buffer" alt="" coords="1315,371,1409,398"/>
<area shape="rect" id="node8" href="buffer_8c.html#a94ca9132735bfcb0b0b2ae9531461cc8" title="alloc_page_buffers" alt="" coords="1488,488,1619,515"/>
<area shape="rect" id="node10" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1484,295,1623,322"/>
<area shape="rect" id="node9" href="buffer_8c.html#ae236845de65ed065f74eecf8f6ee9742" title="EXPORT_SYMBOL_GPL" alt="" coords="1671,539,1843,566"/>
<area shape="rect" id="node15" href="nilfs2_2bmap_8h.html#a47e39e91829ba28e44d1b0913f5ef480" title="nilfs_bmap_lookup_at\l_level" alt="" coords="1075,313,1223,354"/>
<area shape="rect" id="node20" href="nilfs2_2bmap_8h.html#abd107e6c373b3d12d3817a32d403001b" title="nilfs_bmap_get_dat" alt="" coords="1081,379,1216,406"/>
<area shape="rect" id="node16" href="nilfs2_2bmap_8c.html#a7a7ea41075313d317e5036ebc1fbbe3b" title="nilfs_bmap_convert\l_error" alt="" coords="1295,540,1429,581"/>
<area shape="rect" id="node18" href="dat_8c.html#a1641d48ed89a1de35dda5513abd31cc3" title="nilfs_dat_translate" alt="" coords="1298,270,1426,296"/>
<area shape="rect" id="node19" href="nilfs2_2bmap_8c.html#aef6e9d2acff7b7d161389bb790483d06" title="nilfs_bmap_get_dat" alt="" coords="1295,320,1429,347"/>
<area shape="rect" id="node17" href="nilfs2_2super_8c.html#a5f424aefed531edcd064bfa930d96670" title="__nilfs_error" alt="" coords="1507,539,1600,566"/>
<area shape="rect" id="node23" href="buffer_8c.html#a85e290b32d9599acd25df3b159392ab7" title="__end_buffer_read_notouch" alt="" coords="1057,67,1240,94"/>
<area shape="rect" id="node25" href="buffer_8c.html#a5fd6f01c5f9cff0945cb999cbefa412d" title="submit_bh_wbc" alt="" coords="1092,168,1205,195"/>
<area shape="rect" id="node26" href="buffer_8c.html#a2463267e7636f2be0fc2b44fb65cb5ba" title="end_bio_bh_io_sync" alt="" coords="1292,118,1432,144"/>
<area shape="rect" id="node27" href="buffer_8c.html#aa35a4aa9ac3d40858082aabb83e2a44c" title="guard_bio_eod" alt="" coords="1309,168,1415,195"/>
<area shape="rect" id="node29" href="nilfs_8h.html#aacff7fe9750a849356475b2063b69e3b" title="nilfs_transaction_begin" alt="" coords="617,760,771,787"/>
<area shape="rect" id="node35" href="mdt_8c.html#a759ca943427ead8bb22ecdc82a9338ee" title="nilfs_mdt_insert_new\l_block" alt="" coords="845,694,990,736"/>
<area shape="rect" id="node43" href="nilfs_8h.html#a576ee8d20fe7a5d7c5889cb118fe0533" title="nilfs_transaction_commit" alt="" coords="611,582,777,608"/>
<area shape="rect" id="node48" href="nilfs_8h.html#a155140033fba0977ed043367001c3384" title="nilfs_transaction_abort" alt="" coords="617,635,771,662"/>
<area shape="rect" id="node30" href="nilfs2_2segment_8c.html#ada0ba1bf162679380f6096c9f83b94ea" title="nilfs_prepare_segment_lock" alt="" coords="825,760,1009,787"/>
<area shape="rect" id="node31" href="the__nilfs_8c.html#a137faca9117bfef2a2264ccf3a9aa809" title="nilfs_near_disk_full" alt="" coords="851,811,984,838"/>
<area shape="rect" id="node32" href="sufile_8c.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="1057,807,1240,834"/>
<area shape="rect" id="node33" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="1317,804,1407,831"/>
<area shape="rect" id="node34" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1505,863,1601,890"/>
<area shape="rect" id="node36" href="nilfs2_2bmap_8c.html#a4e7fd87b553f99a5d10b2f1d0cbbec0b" title="nilfs_bmap_insert" alt="" coords="1087,550,1211,576"/>
<area shape="rect" id="node39" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1301,606,1423,632"/>
<area shape="rect" id="node42" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="1077,752,1220,779"/>
<area shape="rect" id="node37" href="nilfs2_2bmap_8c.html#ac5f71baa604f8d2043ceb4c11aa72ff3" title="nilfs_bmap_do_insert" alt="" coords="1289,656,1435,683"/>
<area shape="rect" id="node38" href="nilfs2_2btree_8c.html#a6f8ff0cabbdb9b0241bf032c6a5ac11d" title="nilfs_btree_convert\l_and_insert" alt="" coords="1487,692,1619,733"/>
<area shape="rect" id="node40" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1493,590,1614,616"/>
<area shape="rect" id="node41" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1486,640,1621,667"/>
<area shape="rect" id="node44" href="nilfs2_2segment_8c.html#aa55509ef3ea01cc74488f916f1d551f3" title="nilfs_segctor_start\l_timer" alt="" coords="853,629,982,670"/>
<area shape="rect" id="node45" href="nilfs2_2segment_8c.html#a23c179e5f28f728a442e31641f71c795" title="nilfs_segctor_do_flush" alt="" coords="841,578,993,604"/>
<area shape="rect" id="node46" href="nilfs2_2segment_8c.html#ad8bab60b16b37c93e180e1ea3e1580ad" title="nilfs_construct_segment" alt="" coords="835,527,999,554"/>
<area shape="rect" id="node47" href="nilfs2_2segment_8c.html#aece5ba8b7c1a8df29083370bfb0f3aad" title="nilfs_segctor_sync" alt="" coords="1083,499,1214,526"/>
<area shape="rect" id="node50" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="1291,856,1433,897"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a38f2abf7ef7577b1af4b9e8fc9316727_icgraph.png" border="0" usemap="#sufile_8c_a38f2abf7ef7577b1af4b9e8fc9316727_icgraph" alt=""/></div>
<map name="sufile_8c_a38f2abf7ef7577b1af4b9e8fc9316727_icgraph" id="sufile_8c_a38f2abf7ef7577b1af4b9e8fc9316727_icgraph">
<area shape="rect" id="node2" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="238,487,369,514"/>
<area shape="rect" id="node23" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="679,285,797,311"/>
<area shape="rect" id="node34" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="669,781,807,823"/>
<area shape="rect" id="node36" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="663,847,813,874"/>
<area shape="rect" id="node45" href="sufile_8h.html#ae5c9db186be6baf07d66e049a0fd9b9b" title="nilfs_sufile_mark_dirty" alt="" coords="227,159,379,186"/>
<area shape="rect" id="node46" href="sufile_8h.html#ac6379742426c30d02072b1a5b0f527f8" title="nilfs_sufile_set_segment\l_usage" alt="" coords="220,247,387,288"/>
<area shape="rect" id="node49" href="sufile_8h.html#a202058a1d5a7ee3658e8e7cda1ffee37" title="nilfs_sufile_trim_fs" alt="" coords="238,690,369,717"/>
<area shape="rect" id="node3" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="435,538,615,565"/>
<area shape="rect" id="node40" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="463,487,586,514"/>
<area shape="rect" id="node41" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="681,437,795,463"/>
<area shape="rect" id="node44" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="453,379,596,406"/>
<area shape="rect" id="node4" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="669,386,807,413"/>
<area shape="rect" id="node18" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="667,640,809,681"/>
<area shape="rect" id="node31" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="669,589,807,615"/>
<area shape="rect" id="node35" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="886,797,1013,823"/>
<area shape="rect" id="node38" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="680,538,796,565"/>
<area shape="rect" id="node5" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="889,191,1009,218"/>
<area shape="rect" id="node16" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="885,243,1014,284"/>
<area shape="rect" id="node6" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="1102,184,1243,225"/>
<area shape="rect" id="node7" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1308,250,1449,277"/>
<area shape="rect" id="node8" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1497,257,1676,283"/>
<area shape="rect" id="node9" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1741,249,1891,291"/>
<area shape="rect" id="node13" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1737,402,1895,429"/>
<area shape="rect" id="node15" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1724,315,1908,356"/>
<area shape="rect" id="node10" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="1977,257,2083,283"/>
<area shape="rect" id="node12" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="1972,307,2088,334"/>
<area shape="rect" id="node11" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="2152,483,2272,510"/>
<area shape="rect" id="node14" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1956,402,2104,429"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1107,301,1239,343"/>
<area shape="rect" id="node19" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="1119,762,1226,789"/>
<area shape="rect" id="node22" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1311,696,1447,737"/>
<area shape="rect" id="node20" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="1319,762,1438,789"/>
<area shape="rect" id="node21" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1548,733,1625,759"/>
<area shape="rect" id="node24" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="873,461,1026,503"/>
<area shape="rect" id="node29" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="882,8,1017,49"/>
<area shape="rect" id="node30" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="878,125,1021,167"/>
<area shape="rect" id="node25" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1085,469,1260,495"/>
<area shape="rect" id="node26" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1340,469,1417,495"/>
<area shape="rect" id="node27" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1534,469,1639,495"/>
<area shape="rect" id="node28" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1528,407,1645,434"/>
<area shape="rect" id="node32" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="1100,645,1245,671"/>
<area shape="rect" id="node33" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="878,579,1021,620"/>
<area shape="rect" id="node37" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="1317,823,1440,864"/>
<area shape="rect" id="node39" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="1100,523,1245,550"/>
<area shape="rect" id="node42" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="861,359,1037,386"/>
<area shape="rect" id="node43" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="1097,385,1248,427"/>
<area shape="rect" id="node47" href="nilfs2_2segment_8c.html#a5e55835a8c7bac0db60b81df4d707d4e" title="nilfs_segctor_update\l_segusage" alt="" coords="453,185,596,227"/>
<area shape="rect" id="node48" href="nilfs2_2segment_8c.html#a2ad2a278dd41af2f12f1e28a0b61ec8c" title="nilfs_cancel_segusage" alt="" coords="447,253,602,279"/>
<area shape="rect" id="node50" href="nilfs2_2ioctl_8c.html#a8913a80e32e55bd55c20461949a3e6b6" title="nilfs_ioctl_trim_fs" alt="" coords="463,794,587,821"/>
</map>
</div>

</div>
</div>
<a id="a9e2abc1d2040e49935a1448ce3c3c43e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e2abc1d2040e49935a1448ce3c3c43e">&#9670;&nbsp;</a></span>nilfs_sufile_get_stat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nilfs_sufile_get_stat </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct nilfs_sustat *&#160;</td>
          <td class="paramname"><em>sustat</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>nilfs_sufile_get_stat - get segment usage statistics : inode of segment usage file : pointer to a structure of segment usage statistics</p>
<p>Description: <a class="el" href="sufile_8c.html#a9e2abc1d2040e49935a1448ce3c3c43e">nilfs_sufile_get_stat()</a> returns information about segment usage.</p>
<p>Return Value: On success, 0 is returned, and segment usage information is stored in the place pointed by . On error, one of the following negative error codes is returned.</p>
<p>%-EIO - I/O error.</p>
<p>%-ENOMEM - Insufficient amount of memory available. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a9e2abc1d2040e49935a1448ce3c3c43e_cgraph.png" border="0" usemap="#sufile_8c_a9e2abc1d2040e49935a1448ce3c3c43e_cgraph" alt=""/></div>
<map name="sufile_8c_a9e2abc1d2040e49935a1448ce3c3c43e_cgraph" id="sufile_8c_a9e2abc1d2040e49935a1448ce3c3c43e_cgraph">
<area shape="rect" id="node2" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1542,1427,1638,1453"/>
<area shape="rect" id="node3" href="sufile_8c.html#a7df3cdff37c5aa00cca3458f1d7d400e" title="nilfs_sufile_get_header\l_block" alt="" coords="887,2185,1041,2226"/>
<area shape="rect" id="node10" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="192,1131,372,1157"/>
<area shape="rect" id="node4" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="1104,2377,1243,2404"/>
<area shape="rect" id="node5" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="1307,2384,1452,2411"/>
<area shape="rect" id="node8" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="1301,2504,1457,2531"/>
<area shape="rect" id="node6" href="mdt_8c.html#a43ded315f7122596d14b88c43fe9c98d" title="nilfs_mdt_submit_block" alt="" coords="1511,2387,1669,2413"/>
<area shape="rect" id="node7" href="nilfs2_2page_8c.html#aa4a24cc5a684ba71b9e4423f2ea38970" title="nilfs_grab_buffer" alt="" coords="1717,2419,1836,2445"/>
<area shape="rect" id="node9" href="nilfs_8h.html#aacff7fe9750a849356475b2063b69e3b" title="nilfs_transaction_begin" alt="" coords="1513,2504,1667,2531"/>
<area shape="rect" id="node11" href="sufile_8h.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="420,703,603,729"/>
<area shape="rect" id="node13" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="440,513,583,554"/>
<area shape="rect" id="node14" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="681,1267,799,1293"/>
<area shape="rect" id="node23" href="sufile_8h.html#ae5c9db186be6baf07d66e049a0fd9b9b" title="nilfs_sufile_mark_dirty" alt="" coords="664,1021,816,1048"/>
<area shape="rect" id="node24" href="sufile_8h.html#ac6379742426c30d02072b1a5b0f527f8" title="nilfs_sufile_set_segment\l_usage" alt="" coords="657,1123,823,1165"/>
<area shape="rect" id="node25" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033" title="nblocks" alt="" coords="931,2251,997,2277"/>
<area shape="rect" id="node26" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="442,1752,581,1779"/>
<area shape="rect" id="node27" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="665,1655,815,1681"/>
<area shape="rect" id="node29" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687" title="nilfs_sufile_set_suinfo" alt="" coords="665,1072,815,1099"/>
<area shape="rect" id="node31" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="671,2343,809,2369"/>
<area shape="rect" id="node32" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="675,2083,805,2109"/>
<area shape="rect" id="node33" href="sufile_8h.html#acad60c93c0f7f6c3a8a9dc843107f1ed" title="nilfs_sufile_do_scrap" alt="" coords="668,803,812,829"/>
<area shape="rect" id="node34" href="sufile_8h.html#a577d0d35a7907909b6c0a139d8cc1704" title="nilfs_sufile_do_free" alt="" coords="673,752,807,779"/>
<area shape="rect" id="node35" href="sufile_8h.html#aff87ff4257115842ff3c7940e5f8e769" title="nilfs_sufile_do_cancel_free" alt="" coords="651,853,829,880"/>
<area shape="rect" id="node36" href="sufile_8h.html#a7e943e59486cd6176a3317bed589b7c9" title="nilfs_sufile_do_set\l_error" alt="" coords="675,905,805,946"/>
<area shape="rect" id="node37" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="448,651,575,677"/>
<area shape="rect" id="node41" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="682,271,798,297"/>
<area shape="rect" id="node48" href="sufile_8h.html#a202058a1d5a7ee3658e8e7cda1ffee37" title="nilfs_sufile_trim_fs" alt="" coords="675,1872,805,1899"/>
<area shape="rect" id="node12" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="919,600,1009,627"/>
<area shape="rect" id="node15" href="sufile_8c.html#a38f2abf7ef7577b1af4b9e8fc9316727" title="nilfs_sufile_get_segment\l_usage_block" alt="" coords="881,1849,1047,1890"/>
<area shape="rect" id="node18" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="891,1107,1037,1149"/>
<area shape="rect" id="node20" href="sufile_8c.html#a34ecb984fd0f57101d2ee0b4bde4bf95" title="nilfs_sufile_segment\l_usages_in_block" alt="" coords="893,1731,1035,1773"/>
<area shape="rect" id="node21" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1112,803,1235,829"/>
<area shape="rect" id="node22" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="893,853,1035,880"/>
<area shape="rect" id="node16" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="1099,1848,1247,1875"/>
<area shape="rect" id="node17" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="1309,1618,1450,1659"/>
<area shape="rect" id="node19" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="1099,1528,1248,1555"/>
<area shape="rect" id="node28" href="the__nilfs_8h.html#a51bb53199a62a87f269e03404136d00f" title="nilfs_segment_is_active" alt="" coords="883,1629,1045,1656"/>
<area shape="rect" id="node30" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="881,752,1047,779"/>
<area shape="rect" id="node38" href="the__nilfs_8c.html#aa7bf85e7bb9022b3680b22d945d17f91" title="nilfs_nrsvsegs" alt="" coords="911,448,1017,475"/>
<area shape="rect" id="node39" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="671,1189,809,1230"/>
<area shape="rect" id="node40" href="the__nilfs_8c.html#a38632ac69509070865038bf0120a1509" title="nilfs_set_nsegments" alt="" coords="669,499,811,525"/>
<area shape="rect" id="node42" href="nilfs2_2inode_8c.html#ae758d8edf633a8af3535ac0af248f1d1" title="nilfs_iget_locked" alt="" coords="905,144,1023,171"/>
<area shape="rect" id="node43" href="mdt_8c.html#a9d24c6e56a98e581fc30fd8a65841e2a" title="nilfs_mdt_init" alt="" coords="915,195,1013,221"/>
<area shape="rect" id="node44" href="mdt_8c.html#ae0d853ce1775f22eb93823f6423e6fac" title="nilfs_mdt_set_entry_size" alt="" coords="1296,296,1463,323"/>
<area shape="rect" id="node45" href="nilfs2_2inode_8c.html#affec0e84c605c1d9028332974ba58cd3" title="nilfs_read_inode_common" alt="" coords="877,245,1051,272"/>
<area shape="rect" id="node46" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="1109,68,1238,95"/>
<area shape="rect" id="node47" href="bad__inode_8c.html#a8c027cf52e2b7669b11b0bfa09bbcd45" title="iget_failed" alt="" coords="923,43,1005,69"/>
<area shape="rect" id="node49" href="the__nilfs_8h.html#acbe15a8b57f8ecf5e4777294c2f7303d" title="nilfs_get_segnum_of\l_block" alt="" coords="893,2017,1035,2058"/>
<area shape="rect" id="node50" href="the__nilfs_8h.html#a0dc161eb6c4f6bad9212b67517b46a37" title="nilfs_get_segment_range" alt="" coords="881,2083,1047,2109"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a9e2abc1d2040e49935a1448ce3c3c43e_icgraph.png" border="0" usemap="#sufile_8c_a9e2abc1d2040e49935a1448ce3c3c43e_icgraph" alt=""/></div>
<map name="sufile_8c_a9e2abc1d2040e49935a1448ce3c3c43e_icgraph" id="sufile_8c_a9e2abc1d2040e49935a1448ce3c3c43e_icgraph">
<area shape="rect" id="node2" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="619,86,764,113"/>
<area shape="rect" id="node11" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="620,5,763,47"/>
<area shape="rect" id="node12" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="192,346,372,373"/>
<area shape="rect" id="node3" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1309,273,1387,299"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1937,374,2057,401"/>
<area shape="rect" id="node5" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2127,374,2241,401"/>
<area shape="rect" id="node10" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2119,298,2249,325"/>
<area shape="rect" id="node6" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="2302,298,2391,325"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="2301,349,2393,375"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="2297,399,2396,426"/>
<area shape="rect" id="node9" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="2304,450,2389,477"/>
<area shape="rect" id="node13" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="427,634,564,661"/>
<area shape="rect" id="node26" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="430,459,561,486"/>
<area shape="rect" id="node38" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="424,203,567,244"/>
<area shape="rect" id="node42" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="632,542,751,569"/>
<area shape="rect" id="node44" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="426,101,565,127"/>
<area shape="rect" id="node45" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="426,268,565,309"/>
<area shape="rect" id="node46" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="628,289,755,315"/>
<area shape="rect" id="node47" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="420,409,571,435"/>
<area shape="rect" id="node49" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="437,151,553,178"/>
<area shape="rect" id="node14" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="631,778,751,805"/>
<area shape="rect" id="node24" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="627,687,756,728"/>
<area shape="rect" id="node15" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="829,784,971,825"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1053,623,1194,650"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1259,525,1437,551"/>
<area shape="rect" id="node18" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1503,541,1652,583"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1717,323,1875,350"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1485,476,1669,517"/>
<area shape="rect" id="node19" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="1743,461,1849,487"/>
<area shape="rect" id="node20" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="1738,549,1854,575"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1923,323,2071,350"/>
<area shape="rect" id="node25" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1057,557,1189,599"/>
<area shape="rect" id="node27" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="630,441,753,467"/>
<area shape="rect" id="node33" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="635,491,748,518"/>
<area shape="rect" id="node37" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="620,390,763,417"/>
<area shape="rect" id="node28" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="823,433,977,475"/>
<area shape="rect" id="node29" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1036,222,1211,249"/>
<area shape="rect" id="node30" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1309,185,1387,211"/>
<area shape="rect" id="node31" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1525,171,1630,198"/>
<area shape="rect" id="node32" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1519,222,1636,249"/>
<area shape="rect" id="node34" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="829,616,971,657"/>
<area shape="rect" id="node35" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="812,382,988,409"/>
<area shape="rect" id="node36" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="825,551,975,592"/>
<area shape="rect" id="node39" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="847,265,953,291"/>
<area shape="rect" id="node41" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1055,156,1191,197"/>
<area shape="rect" id="node40" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="1064,273,1183,299"/>
<area shape="rect" id="node43" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1056,492,1191,533"/>
<area shape="rect" id="node48" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="839,316,961,357"/>
<area shape="rect" id="node50" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="1051,35,1196,62"/>
</map>
</div>

</div>
</div>
<a id="a1e877b67f3c19b343311b97a6554c0ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e877b67f3c19b343311b97a6554c0ba">&#9670;&nbsp;</a></span>nilfs_sufile_get_suinfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t nilfs_sufile_get_suinfo </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64&#160;</td>
          <td class="paramname"><em>segnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>sisz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nsi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>nilfs_sufile_get_suinfo - : inode of segment usage file : segment number to start looking : array of suinfo : byte size of suinfo : size of suinfo array</p>
<p>Description:</p>
<p>Return Value: On success, 0 is returned and .... On error, one of the following negative error codes is returned.</p>
<p>%-EIO - I/O error.</p>
<p>%-ENOMEM - Insufficient amount of memory available. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a1e877b67f3c19b343311b97a6554c0ba_cgraph.png" border="0" usemap="#sufile_8c_a1e877b67f3c19b343311b97a6554c0ba_cgraph" alt=""/></div>
<map name="sufile_8c_a1e877b67f3c19b343311b97a6554c0ba_cgraph" id="sufile_8c_a1e877b67f3c19b343311b97a6554c0ba_cgraph">
<area shape="rect" id="node2" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1529,1443,1625,1469"/>
<area shape="rect" id="node3" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="1333,1763,1474,1805"/>
<area shape="rect" id="node4" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="204,1131,384,1157"/>
<area shape="rect" id="node13" href="sufile_8c.html#a38f2abf7ef7577b1af4b9e8fc9316727" title="nilfs_sufile_get_segment\l_usage_block" alt="" coords="893,1545,1059,1586"/>
<area shape="rect" id="node15" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="903,1057,1049,1098"/>
<area shape="rect" id="node16" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="1119,1712,1269,1739"/>
<area shape="rect" id="node28" href="the__nilfs_8h.html#a51bb53199a62a87f269e03404136d00f" title="nilfs_segment_is_active" alt="" coords="895,1173,1057,1200"/>
<area shape="rect" id="node5" href="sufile_8h.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="432,695,615,721"/>
<area shape="rect" id="node7" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="452,405,595,446"/>
<area shape="rect" id="node8" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="693,1236,811,1263"/>
<area shape="rect" id="node23" href="sufile_8h.html#ae5c9db186be6baf07d66e049a0fd9b9b" title="nilfs_sufile_mark_dirty" alt="" coords="676,839,828,865"/>
<area shape="rect" id="node24" href="sufile_8h.html#ac6379742426c30d02072b1a5b0f527f8" title="nilfs_sufile_set_segment\l_usage" alt="" coords="669,1294,835,1335"/>
<area shape="rect" id="node25" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033" title="nblocks" alt="" coords="943,2504,1009,2531"/>
<area shape="rect" id="node26" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="454,847,593,873"/>
<area shape="rect" id="node27" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="677,1493,827,1520"/>
<area shape="rect" id="node29" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687" title="nilfs_sufile_set_suinfo" alt="" coords="677,775,827,801"/>
<area shape="rect" id="node31" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="683,1361,821,1388"/>
<area shape="rect" id="node32" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="687,1413,817,1440"/>
<area shape="rect" id="node33" href="sufile_8h.html#acad60c93c0f7f6c3a8a9dc843107f1ed" title="nilfs_sufile_do_scrap" alt="" coords="680,616,824,643"/>
<area shape="rect" id="node34" href="sufile_8h.html#a577d0d35a7907909b6c0a139d8cc1704" title="nilfs_sufile_do_free" alt="" coords="685,667,819,693"/>
<area shape="rect" id="node35" href="sufile_8h.html#aff87ff4257115842ff3c7940e5f8e769" title="nilfs_sufile_do_cancel_free" alt="" coords="663,565,841,592"/>
<area shape="rect" id="node36" href="sufile_8h.html#a7e943e59486cd6176a3317bed589b7c9" title="nilfs_sufile_do_set\l_error" alt="" coords="687,499,817,541"/>
<area shape="rect" id="node37" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="460,528,587,555"/>
<area shape="rect" id="node41" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="694,1813,810,1840"/>
<area shape="rect" id="node48" href="sufile_8h.html#a202058a1d5a7ee3658e8e7cda1ffee37" title="nilfs_sufile_trim_fs" alt="" coords="687,1864,817,1891"/>
<area shape="rect" id="node6" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="931,397,1021,424"/>
<area shape="rect" id="node9" href="sufile_8c.html#a7df3cdff37c5aa00cca3458f1d7d400e" title="nilfs_sufile_get_header\l_block" alt="" coords="899,1225,1053,1266"/>
<area shape="rect" id="node17" href="sufile_8c.html#a34ecb984fd0f57101d2ee0b4bde4bf95" title="nilfs_sufile_segment\l_usages_in_block" alt="" coords="905,1814,1047,1855"/>
<area shape="rect" id="node18" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1133,549,1255,576"/>
<area shape="rect" id="node22" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="905,600,1047,627"/>
<area shape="rect" id="node10" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="1125,1273,1263,1300"/>
<area shape="rect" id="node11" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="1331,1248,1476,1275"/>
<area shape="rect" id="node12" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="1325,1299,1481,1325"/>
<area shape="rect" id="node14" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="1120,1552,1268,1579"/>
<area shape="rect" id="node19" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1343,600,1464,627"/>
<area shape="rect" id="node20" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1336,499,1471,525"/>
<area shape="rect" id="node21" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1334,549,1473,576"/>
<area shape="rect" id="node30" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="893,499,1059,525"/>
<area shape="rect" id="node38" href="the__nilfs_8c.html#aa7bf85e7bb9022b3680b22d945d17f91" title="nilfs_nrsvsegs" alt="" coords="923,93,1029,120"/>
<area shape="rect" id="node39" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="683,897,821,938"/>
<area shape="rect" id="node40" href="the__nilfs_8c.html#a38632ac69509070865038bf0120a1509" title="nilfs_set_nsegments" alt="" coords="681,93,823,120"/>
<area shape="rect" id="node42" href="nilfs2_2inode_8c.html#ae758d8edf633a8af3535ac0af248f1d1" title="nilfs_iget_locked" alt="" coords="917,2032,1035,2059"/>
<area shape="rect" id="node43" href="mdt_8c.html#a9d24c6e56a98e581fc30fd8a65841e2a" title="nilfs_mdt_init" alt="" coords="927,2083,1025,2109"/>
<area shape="rect" id="node44" href="mdt_8c.html#ae0d853ce1775f22eb93823f6423e6fac" title="nilfs_mdt_set_entry_size" alt="" coords="1111,2403,1277,2429"/>
<area shape="rect" id="node45" href="nilfs2_2inode_8c.html#affec0e84c605c1d9028332974ba58cd3" title="nilfs_read_inode_common" alt="" coords="889,2133,1063,2160"/>
<area shape="rect" id="node46" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="1129,2209,1259,2236"/>
<area shape="rect" id="node47" href="bad__inode_8c.html#a8c027cf52e2b7669b11b0bfa09bbcd45" title="iget_failed" alt="" coords="935,2184,1017,2211"/>
<area shape="rect" id="node49" href="the__nilfs_8h.html#acbe15a8b57f8ecf5e4777294c2f7303d" title="nilfs_get_segnum_of\l_block" alt="" coords="905,2387,1047,2429"/>
<area shape="rect" id="node50" href="the__nilfs_8h.html#a0dc161eb6c4f6bad9212b67517b46a37" title="nilfs_get_segment_range" alt="" coords="893,2336,1059,2363"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a1e877b67f3c19b343311b97a6554c0ba_icgraph.png" border="0" usemap="#sufile_8c_a1e877b67f3c19b343311b97a6554c0ba_icgraph" alt=""/></div>
<map name="sufile_8c_a1e877b67f3c19b343311b97a6554c0ba_icgraph" id="sufile_8c_a1e877b67f3c19b343311b97a6554c0ba_icgraph">
<area shape="rect" id="node2" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="641,746,763,787"/>
<area shape="rect" id="node11" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="204,453,384,480"/>
<area shape="rect" id="node3" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1319,585,1396,612"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1946,535,2066,561"/>
<area shape="rect" id="node5" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2136,535,2251,561"/>
<area shape="rect" id="node10" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2128,585,2259,612"/>
<area shape="rect" id="node6" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="2311,459,2401,485"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="2310,509,2402,536"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="2307,560,2405,587"/>
<area shape="rect" id="node9" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="2313,611,2399,637"/>
<area shape="rect" id="node12" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="439,359,576,385"/>
<area shape="rect" id="node25" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="442,308,573,335"/>
<area shape="rect" id="node37" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="436,551,579,593"/>
<area shape="rect" id="node41" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="643,152,761,179"/>
<area shape="rect" id="node43" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="438,617,577,644"/>
<area shape="rect" id="node46" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="438,410,577,451"/>
<area shape="rect" id="node47" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="639,476,765,503"/>
<area shape="rect" id="node48" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="432,668,583,695"/>
<area shape="rect" id="node49" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="449,183,565,209"/>
<area shape="rect" id="node13" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="642,359,762,385"/>
<area shape="rect" id="node23" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="637,410,767,451"/>
<area shape="rect" id="node14" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="839,359,980,401"/>
<area shape="rect" id="node15" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1062,268,1203,295"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1268,269,1447,296"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1512,357,1661,398"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1727,195,1884,221"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1495,271,1679,313"/>
<area shape="rect" id="node18" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="1753,455,1858,481"/>
<area shape="rect" id="node19" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="1747,364,1863,391"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1932,195,2080,221"/>
<area shape="rect" id="node24" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1067,319,1199,361"/>
<area shape="rect" id="node26" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="641,203,763,229"/>
<area shape="rect" id="node32" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="645,253,759,280"/>
<area shape="rect" id="node36" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="631,308,773,335"/>
<area shape="rect" id="node27" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="833,111,986,153"/>
<area shape="rect" id="node28" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1045,123,1220,149"/>
<area shape="rect" id="node29" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1319,121,1396,148"/>
<area shape="rect" id="node30" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1534,119,1639,145"/>
<area shape="rect" id="node31" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1528,169,1645,196"/>
<area shape="rect" id="node33" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="838,177,981,218"/>
<area shape="rect" id="node34" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="821,308,997,335"/>
<area shape="rect" id="node35" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="834,242,985,283"/>
<area shape="rect" id="node38" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="856,527,963,553"/>
<area shape="rect" id="node40" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1065,578,1201,619"/>
<area shape="rect" id="node39" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="1073,527,1192,553"/>
<area shape="rect" id="node42" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1065,57,1200,98"/>
<area shape="rect" id="node44" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="837,683,982,709"/>
<area shape="rect" id="node45" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="631,629,773,670"/>
<area shape="rect" id="node50" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="1060,5,1205,32"/>
</map>
</div>

</div>
</div>
<a id="ae5c9db186be6baf07d66e049a0fd9b9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5c9db186be6baf07d66e049a0fd9b9b">&#9670;&nbsp;</a></span>nilfs_sufile_mark_dirty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nilfs_sufile_mark_dirty </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64&#160;</td>
          <td class="paramname"><em>segnum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>nilfs_sufile_mark_dirty - mark the buffer having a segment usage dirty : inode of segment usage file : segment number </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_ae5c9db186be6baf07d66e049a0fd9b9b_cgraph.png" border="0" usemap="#sufile_8c_ae5c9db186be6baf07d66e049a0fd9b9b_cgraph" alt=""/></div>
<map name="sufile_8c_ae5c9db186be6baf07d66e049a0fd9b9b_cgraph" id="sufile_8c_ae5c9db186be6baf07d66e049a0fd9b9b_cgraph">
<area shape="rect" id="node2" href="sufile_8c.html#a38f2abf7ef7577b1af4b9e8fc9316727" title="nilfs_sufile_get_segment\l_usage_block" alt="" coords="205,721,372,762"/>
<area shape="rect" id="node25" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1065,293,1188,320"/>
<area shape="rect" id="node42" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="1055,344,1198,371"/>
<area shape="rect" id="node3" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="425,728,563,755"/>
<area shape="rect" id="node48" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="420,833,568,860"/>
<area shape="rect" id="node4" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="621,759,767,785"/>
<area shape="rect" id="node18" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="616,697,772,724"/>
<area shape="rect" id="node5" href="mdt_8c.html#a43ded315f7122596d14b88c43fe9c98d" title="nilfs_mdt_submit_block" alt="" coords="824,841,983,868"/>
<area shape="rect" id="node6" href="nilfs2_2page_8c.html#aa4a24cc5a684ba71b9e4423f2ea38970" title="nilfs_grab_buffer" alt="" coords="1067,816,1186,843"/>
<area shape="rect" id="node8" href="buffer_8c.html#a5fc92b2c44523c64e98193eaa4f46541" title="unlock_buffer" alt="" coords="1537,1023,1637,1049"/>
<area shape="rect" id="node10" href="nilfs2_2bmap_8h.html#a282d60470960949277ac67e31c97f05b" title="nilfs_bmap_lookup" alt="" coords="1061,867,1192,893"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1323,395,1393,421"/>
<area shape="rect" id="node14" href="buffer_8c.html#ade60786fa99b4fbb4cf607434af395db" title="end_buffer_read_sync" alt="" coords="1051,1073,1202,1100"/>
<area shape="rect" id="node16" href="buffer_8c.html#ab65df498c54845f497bae7afe9222c91" title="submit_bh" alt="" coords="1085,921,1168,948"/>
<area shape="rect" id="node7" href="nilfs2_2page_8c.html#a051d0268f3af219ba3e2a9ca79a8843c" title="__nilfs_get_page_block" alt="" coords="1279,753,1437,780"/>
<area shape="rect" id="node9" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1738,997,1877,1024"/>
<area shape="rect" id="node11" href="nilfs2_2bmap_8h.html#a47e39e91829ba28e44d1b0913f5ef480" title="nilfs_bmap_lookup_at\l_level" alt="" coords="1284,855,1432,897"/>
<area shape="rect" id="node12" href="nilfs2_2bmap_8h.html#abd107e6c373b3d12d3817a32d403001b" title="nilfs_bmap_get_dat" alt="" coords="1291,804,1425,831"/>
<area shape="rect" id="node15" href="buffer_8c.html#a85e290b32d9599acd25df3b159392ab7" title="__end_buffer_read_notouch" alt="" coords="1267,1073,1449,1100"/>
<area shape="rect" id="node17" href="buffer_8c.html#a5fd6f01c5f9cff0945cb999cbefa412d" title="submit_bh_wbc" alt="" coords="1301,921,1415,948"/>
<area shape="rect" id="node19" href="nilfs_8h.html#aacff7fe9750a849356475b2063b69e3b" title="nilfs_transaction_begin" alt="" coords="826,676,981,703"/>
<area shape="rect" id="node23" href="mdt_8c.html#a759ca943427ead8bb22ecdc82a9338ee" title="nilfs_mdt_insert_new\l_block" alt="" coords="831,395,976,437"/>
<area shape="rect" id="node43" href="nilfs_8h.html#a576ee8d20fe7a5d7c5889cb118fe0533" title="nilfs_transaction_commit" alt="" coords="820,588,987,615"/>
<area shape="rect" id="node47" href="nilfs_8h.html#a155140033fba0977ed043367001c3384" title="nilfs_transaction_abort" alt="" coords="827,777,980,804"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8c.html#ada0ba1bf162679380f6096c9f83b94ea" title="nilfs_prepare_segment_lock" alt="" coords="1035,664,1219,691"/>
<area shape="rect" id="node21" href="the__nilfs_8c.html#a137faca9117bfef2a2264ccf3a9aa809" title="nilfs_near_disk_full" alt="" coords="1060,715,1193,741"/>
<area shape="rect" id="node22" href="sufile_8c.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="1267,703,1449,729"/>
<area shape="rect" id="node24" href="nilfs2_2bmap_8c.html#a4e7fd87b553f99a5d10b2f1d0cbbec0b" title="nilfs_bmap_insert" alt="" coords="1065,445,1189,472"/>
<area shape="rect" id="node26" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1297,344,1419,371"/>
<area shape="rect" id="node28" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1291,176,1425,203"/>
<area shape="rect" id="node27" href="buffer_8c.html#ae236845de65ed065f74eecf8f6ee9742" title="EXPORT_SYMBOL_GPL" alt="" coords="1501,344,1673,371"/>
<area shape="rect" id="node29" href="fs-writeback_8c.html#af5890cdc0a937a4f944928bd1880d49b" title="block_dump___mark_inode\l_dirty" alt="" coords="1497,110,1677,151"/>
<area shape="rect" id="node37" href="fs-writeback_8c.html#ad0ca24311e1c0ba76d3810d240f72b08" title="locked_inode_to_wb\l_and_lock_list" alt="" coords="1517,227,1657,269"/>
<area shape="rect" id="node38" href="fs-writeback_8c.html#a2a36a21e075aa2a912f5c3cb027692cf" title="inode_io_list_move\l_locked" alt="" coords="1521,45,1654,86"/>
<area shape="rect" id="node41" href="fs-writeback_8c.html#a044f1d7ff09b03f639232ec0e6a88ee1" title="EXPORT_SYMBOL" alt="" coords="1518,176,1657,203"/>
<area shape="rect" id="node30" href="dcache_8c.html#a9f042046c19f277000ddfc09b02e3633" title="d_find_alias" alt="" coords="1762,164,1853,191"/>
<area shape="rect" id="node33" href="dcache_8c.html#aebcca358185b5176b69b97e7eab12dfd" title="dput" alt="" coords="1784,113,1831,140"/>
<area shape="rect" id="node31" href="dcache_8c.html#a3eb221591429fdc67dec907c0d09d26a" title="__d_find_alias" alt="" coords="1954,215,2059,241"/>
<area shape="rect" id="node32" href="dcache_8c.html#aeb5ec7bdf3301140d66dd18ae638685c" title="EXPORT_SYMBOL" alt="" coords="1937,164,2076,191"/>
<area shape="rect" id="node34" href="dcache_8c.html#a364a93ebd8b57977a5a90f2076dd8f59" title="fast_dput" alt="" coords="1969,63,2045,89"/>
<area shape="rect" id="node35" href="dcache_8c.html#a689bf4f6109300b7bc021f1641052f99" title="retain_dentry" alt="" coords="2124,63,2221,89"/>
<area shape="rect" id="node36" href="dcache_8c.html#a4a5ea078fab8f6527abb7f44aa88efd3" title="dentry_kill" alt="" coords="1966,113,2047,140"/>
<area shape="rect" id="node39" href="fs-writeback_8c.html#ad9e6fcccf4baffa8e6c91881c6e428a9" title="wb_io_lists_populated" alt="" coords="1732,56,1883,83"/>
<area shape="rect" id="node40" href="fs-writeback_8c.html#aa31b94b7a70c8c8d396a5f0f3e8ef1ec" title="wb_io_lists_depopulated" alt="" coords="1725,5,1889,32"/>
<area shape="rect" id="node44" href="nilfs2_2segment_8c.html#aa55509ef3ea01cc74488f916f1d551f3" title="nilfs_segctor_start\l_timer" alt="" coords="1062,497,1191,538"/>
<area shape="rect" id="node45" href="nilfs2_2segment_8c.html#a23c179e5f28f728a442e31641f71c795" title="nilfs_segctor_do_flush" alt="" coords="1051,563,1203,589"/>
<area shape="rect" id="node46" href="nilfs2_2segment_8c.html#ad8bab60b16b37c93e180e1ea3e1580ad" title="nilfs_construct_segment" alt="" coords="1045,613,1209,640"/>
<area shape="rect" id="node49" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="855,892,951,919"/>
<area shape="rect" id="node50" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="623,885,765,926"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_ae5c9db186be6baf07d66e049a0fd9b9b_icgraph.png" border="0" usemap="#sufile_8c_ae5c9db186be6baf07d66e049a0fd9b9b_icgraph" alt=""/></div>
<map name="sufile_8c_ae5c9db186be6baf07d66e049a0fd9b9b_icgraph" id="sufile_8c_ae5c9db186be6baf07d66e049a0fd9b9b_icgraph">
<area shape="rect" id="node2" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="636,5,771,47"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="839,83,982,124"/>
<area shape="rect" id="node22" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="205,482,385,509"/>
<area shape="rect" id="node3" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1269,358,1448,385"/>
<area shape="rect" id="node4" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1937,296,2086,337"/>
<area shape="rect" id="node8" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1728,421,1885,447"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1496,355,1680,396"/>
<area shape="rect" id="node5" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="2364,402,2469,429"/>
<area shape="rect" id="node7" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="2169,323,2285,350"/>
<area shape="rect" id="node6" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="2517,569,2637,595"/>
<area shape="rect" id="node9" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1937,362,2085,389"/>
<area shape="rect" id="node12" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1942,413,2081,455"/>
<area shape="rect" id="node14" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1933,479,2089,506"/>
<area shape="rect" id="node10" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096" title="nilfs_ioctl_clean_segments" alt="" coords="2137,374,2316,401"/>
<area shape="rect" id="node11" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="2378,606,2455,633"/>
<area shape="rect" id="node13" href="nilfs2_2segment_8c.html#a39d3b93661aea1ce6d75d52641a734f7" title="nilfs_segctor_thread" alt="" coords="2157,425,2296,451"/>
<area shape="rect" id="node15" href="nilfs2_2segment_8c.html#a53eace4b3351e7a47d95a83e02257fda" title="nilfs_segctor_destroy" alt="" coords="2153,479,2300,506"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8h.html#a1907ac7b54882bbf06019eaf6d03c21c" title="nilfs_relax_pressure\l_in_lock" alt="" coords="1737,493,1876,535"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8c.html#a8b69f4181745f44662620421e0f88ab0" title="nilfs_transaction_lock" alt="" coords="1733,362,1881,389"/>
<area shape="rect" id="node18" href="nilfs2_2inode_8c.html#a8a5d71f4673d9c2189dbab1207a8ed89" title="nilfs_truncate_bmap" alt="" coords="1942,530,2081,557"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1063,358,1205,385"/>
<area shape="rect" id="node23" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="440,402,577,429"/>
<area shape="rect" id="node28" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="443,325,574,351"/>
<area shape="rect" id="node37" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="437,504,580,545"/>
<area shape="rect" id="node41" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="449,274,568,301"/>
<area shape="rect" id="node42" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="439,762,578,789"/>
<area shape="rect" id="node45" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="439,645,578,687"/>
<area shape="rect" id="node46" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="640,653,767,679"/>
<area shape="rect" id="node47" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="433,711,584,738"/>
<area shape="rect" id="node49" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="451,453,567,479"/>
<area shape="rect" id="node24" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="643,442,763,469"/>
<area shape="rect" id="node26" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="639,376,768,417"/>
<area shape="rect" id="node25" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="840,435,981,476"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1068,241,1200,283"/>
<area shape="rect" id="node29" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="642,325,765,351"/>
<area shape="rect" id="node33" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="647,223,760,250"/>
<area shape="rect" id="node36" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="632,173,775,199"/>
<area shape="rect" id="node30" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="834,200,987,241"/>
<area shape="rect" id="node31" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1047,307,1221,334"/>
<area shape="rect" id="node32" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1320,450,1397,477"/>
<area shape="rect" id="node34" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="823,149,999,175"/>
<area shape="rect" id="node35" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="835,317,986,359"/>
<area shape="rect" id="node38" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="857,631,964,658"/>
<area shape="rect" id="node40" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1291,555,1427,596"/>
<area shape="rect" id="node39" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="1529,631,1647,658"/>
<area shape="rect" id="node43" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="1286,791,1431,818"/>
<area shape="rect" id="node44" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="632,755,775,796"/>
<area shape="rect" id="node48" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="1527,691,1649,732"/>
<area shape="rect" id="node50" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="1061,475,1207,502"/>
</map>
</div>

</div>
</div>
<a id="af1d36bfa94541a3fdad59955464852ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1d36bfa94541a3fdad59955464852ea">&#9670;&nbsp;</a></span>nilfs_sufile_mod_counter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void nilfs_sufile_mod_counter </td>
          <td>(</td>
          <td class="paramtype">struct buffer_head *&#160;</td>
          <td class="paramname"><em>header_bh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>ncleanadd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u64&#160;</td>
          <td class="paramname"><em>ndirtyadd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_af1d36bfa94541a3fdad59955464852ea_cgraph.png" border="0" usemap="#sufile_8c_af1d36bfa94541a3fdad59955464852ea_cgraph" alt=""/></div>
<map name="sufile_8c_af1d36bfa94541a3fdad59955464852ea_cgraph" id="sufile_8c_af1d36bfa94541a3fdad59955464852ea_cgraph">
<area shape="rect" id="node2" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="220,123,343,149"/>
<area shape="rect" id="node3" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="399,39,521,65"/>
<area shape="rect" id="node5" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="393,123,527,149"/>
<area shape="rect" id="node50" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="391,173,529,200"/>
<area shape="rect" id="node4" href="buffer_8c.html#ae236845de65ed065f74eecf8f6ee9742" title="EXPORT_SYMBOL_GPL" alt="" coords="581,5,753,32"/>
<area shape="rect" id="node6" href="fs-writeback_8c.html#af5890cdc0a937a4f944928bd1880d49b" title="block_dump___mark_inode\l_dirty" alt="" coords="577,297,757,338"/>
<area shape="rect" id="node31" href="fs-writeback_8c.html#a044f1d7ff09b03f639232ec0e6a88ee1" title="EXPORT_SYMBOL" alt="" coords="2087,123,2226,149"/>
<area shape="rect" id="node46" href="fs-writeback_8c.html#ad0ca24311e1c0ba76d3810d240f72b08" title="locked_inode_to_wb\l_and_lock_list" alt="" coords="597,362,737,403"/>
<area shape="rect" id="node47" href="fs-writeback_8c.html#a2a36a21e075aa2a912f5c3cb027692cf" title="inode_io_list_move\l_locked" alt="" coords="601,57,734,98"/>
<area shape="rect" id="node7" href="dcache_8c.html#a9f042046c19f277000ddfc09b02e3633" title="d_find_alias" alt="" coords="842,587,933,613"/>
<area shape="rect" id="node11" href="dcache_8c.html#aebcca358185b5176b69b97e7eab12dfd" title="dput" alt="" coords="864,435,911,461"/>
<area shape="rect" id="node8" href="dcache_8c.html#a3eb221591429fdc67dec907c0d09d26a" title="__d_find_alias" alt="" coords="1017,637,1123,664"/>
<area shape="rect" id="node10" href="dcache_8c.html#aeb5ec7bdf3301140d66dd18ae638685c" title="EXPORT_SYMBOL" alt="" coords="1503,544,1641,571"/>
<area shape="rect" id="node9" href="dcache_8c.html#ab9c0fece5c680f2c592413b6d3239ae9" title="__dget_dlock" alt="" coords="1171,637,1269,664"/>
<area shape="rect" id="node12" href="dcache_8c.html#a364a93ebd8b57977a5a90f2076dd8f59" title="fast_dput" alt="" coords="1032,384,1108,411"/>
<area shape="rect" id="node13" href="dcache_8c.html#a689bf4f6109300b7bc021f1641052f99" title="retain_dentry" alt="" coords="1171,485,1269,512"/>
<area shape="rect" id="node15" href="dcache_8c.html#a4a5ea078fab8f6527abb7f44aa88efd3" title="dentry_kill" alt="" coords="1029,435,1111,461"/>
<area shape="rect" id="node14" href="dcache_8c.html#a3b177069d047c319ff2309aa5be9342e" title="d_lru_add" alt="" coords="1347,485,1425,512"/>
<area shape="rect" id="node16" href="dcache_8c.html#aa89b23ccc5b34160480a5b0541255a2e" title="__lock_parent" alt="" coords="1335,435,1437,461"/>
<area shape="rect" id="node17" href="dcache_8c.html#a051b3970369269b3c6fcc1a19be37bed" title="__dentry_kill" alt="" coords="1173,308,1267,335"/>
<area shape="rect" id="node45" href="dcache_8c.html#a6a36af9be383e7cbabb89162ff8af440" title="lock_parent" alt="" coords="1175,435,1265,461"/>
<area shape="rect" id="node18" href="dcache_8c.html#aa69465ec94d92f14786fdce2f5bfb175" title="d_lru_del" alt="" coords="1349,181,1423,208"/>
<area shape="rect" id="node19" href="dcache_8c.html#ae4904480d16c7850ae6994e92d110f96" title="__d_drop" alt="" coords="1349,384,1423,411"/>
<area shape="rect" id="node22" href="dcache_8c.html#ae2050a139fbd1eb7bfc238686e1b2e0b" title="dentry_unlist" alt="" coords="1338,232,1434,259"/>
<area shape="rect" id="node23" href="dcache_8c.html#acad4e66a4f8cc5a5bce5cb90bc5d6279" title="dentry_unlink_inode" alt="" coords="1317,333,1455,360"/>
<area shape="rect" id="node39" href="dcache_8c.html#ad8b0a5de190038ed843fa392d181c8a5" title="dentry_free" alt="" coords="1343,283,1429,309"/>
<area shape="rect" id="node20" href="dcache_8c.html#afe7718ea6372af4edd41d375be2b7755" title="___d_drop" alt="" coords="1531,493,1613,520"/>
<area shape="rect" id="node21" href="dcache_8c.html#ad0da24b939325fb96de67394f99b2766" title="d_hash" alt="" coords="1739,528,1803,555"/>
<area shape="rect" id="node24" href="dcache_8c.html#a0858bd86148196ec3ef3606f8f0de24f" title="__d_clear_type_and\l_inode" alt="" coords="1503,377,1641,418"/>
<area shape="rect" id="node25" href="inode_8c.html#a378733dcbf0fb08359b9a02145ac8fc3" title="iput" alt="" coords="1551,443,1593,469"/>
<area shape="rect" id="node26" href="inode_8c.html#a7e99b25ac29d19bc82fbddcb773c4f25" title="iput_final" alt="" coords="1734,376,1809,403"/>
<area shape="rect" id="node38" href="debugfs_2inode_8c.html#a16e485b5debd4cd96a200844c38df190" title="EXPORT_SYMBOL" alt="" coords="2289,427,2428,453"/>
<area shape="rect" id="node27" href="inode_8c.html#a943dee860d20f57552f168683dcb4b5d" title="inode_add_lru" alt="" coords="1911,401,2014,428"/>
<area shape="rect" id="node29" href="fs-writeback_8c.html#aceeba3df6a433f68c665086a2ee53faa" title="write_inode_now" alt="" coords="1903,249,2022,276"/>
<area shape="rect" id="node32" href="inode_8c.html#a1f2fe8883e70882e845560b2ccf4ab16" title="inode_lru_list_del" alt="" coords="1901,199,2024,225"/>
<area shape="rect" id="node33" href="inode_8c.html#a4b62e1e360840615442b8ad6a9f16bc7" title="evict" alt="" coords="1937,325,1988,352"/>
<area shape="rect" id="node28" href="inode_8c.html#a19db2cb42c3c0fb426d842dcbd0e4754" title="inode_lru_list_add" alt="" coords="2093,427,2220,453"/>
<area shape="rect" id="node30" href="fs-writeback_8c.html#adf3fdb0955c8ea5fcad15b51ea6aa76e" title="writeback_single_inode" alt="" coords="2078,173,2235,200"/>
<area shape="rect" id="node34" href="fs-writeback_8c.html#ac6d2db367ed77b70b681e887ba0b05fc" title="inode_io_list_del" alt="" coords="2097,224,2216,251"/>
<area shape="rect" id="node35" href="inode_8c.html#a512fc1963a4346c6b2d0ea53a3f88985" title="inode_sb_list_del" alt="" coords="2095,275,2218,301"/>
<area shape="rect" id="node36" href="fs-writeback_8c.html#a48ed1405bbf8e54568c31f215bbc9429" title="inode_wait_for_writeback" alt="" coords="2072,325,2241,352"/>
<area shape="rect" id="node37" href="inode_8c.html#a5ef1de74cc382d6cd8afddc6e66a47a4" title="clear_inode" alt="" coords="2113,376,2201,403"/>
<area shape="rect" id="node40" href="dcache_8c.html#a230d6245e3962408f039e2e33a251d98" title="dname_external" alt="" coords="1515,224,1629,251"/>
<area shape="rect" id="node41" href="dcache_8c.html#a1cda4f5743f52a426fe40cc5cf933675" title="external_name" alt="" coords="1718,275,1825,301"/>
<area shape="rect" id="node42" href="dcache_8c.html#a9017dd31269b4b6d79821de35551ae41" title="__d_free_external" alt="" coords="1509,325,1635,352"/>
<area shape="rect" id="node44" href="dcache_8c.html#a7d181ee17b4a49e02eac0f247fd484a9" title="__d_free" alt="" coords="1536,173,1608,200"/>
<area shape="rect" id="node43" href="dcache_8c.html#a711826e19d5ad53c7b0bbe26a878cfff" title="__d_free_external_name" alt="" coords="1689,325,1853,352"/>
<area shape="rect" id="node48" href="fs-writeback_8c.html#ad9e6fcccf4baffa8e6c91881c6e428a9" title="wb_io_lists_populated" alt="" coords="812,68,963,95"/>
<area shape="rect" id="node49" href="fs-writeback_8c.html#aa31b94b7a70c8c8d396a5f0f3e8ef1ec" title="wb_io_lists_depopulated" alt="" coords="805,17,969,44"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_af1d36bfa94541a3fdad59955464852ea_icgraph.png" border="0" usemap="#sufile_8c_af1d36bfa94541a3fdad59955464852ea_icgraph" alt=""/></div>
<map name="sufile_8c_af1d36bfa94541a3fdad59955464852ea_icgraph" id="sufile_8c_af1d36bfa94541a3fdad59955464852ea_icgraph">
<area shape="rect" id="node2" href="sufile_8h.html#aff87ff4257115842ff3c7940e5f8e769" title="nilfs_sufile_do_cancel_free" alt="" coords="220,400,399,427"/>
<area shape="rect" id="node40" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="681,770,819,811"/>
<area shape="rect" id="node46" href="sufile_8h.html#acad60c93c0f7f6c3a8a9dc843107f1ed" title="nilfs_sufile_do_scrap" alt="" coords="237,451,381,477"/>
<area shape="rect" id="node47" href="sufile_8h.html#a577d0d35a7907909b6c0a139d8cc1704" title="nilfs_sufile_do_free" alt="" coords="242,349,377,376"/>
<area shape="rect" id="node48" href="sufile_8h.html#a7e943e59486cd6176a3317bed589b7c9" title="nilfs_sufile_do_set\l_error" alt="" coords="244,283,375,325"/>
<area shape="rect" id="node49" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687" title="nilfs_sufile_set_suinfo" alt="" coords="234,501,385,528"/>
<area shape="rect" id="node3" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="447,476,627,503"/>
<area shape="rect" id="node17" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="880,153,1009,194"/>
<area shape="rect" id="node4" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="681,300,819,327"/>
<area shape="rect" id="node19" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="685,351,815,377"/>
<area shape="rect" id="node31" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="679,578,821,619"/>
<area shape="rect" id="node35" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="885,411,1004,437"/>
<area shape="rect" id="node37" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="681,527,819,553"/>
<area shape="rect" id="node41" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="881,731,1008,757"/>
<area shape="rect" id="node42" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="675,719,825,745"/>
<area shape="rect" id="node44" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="692,476,808,503"/>
<area shape="rect" id="node5" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="885,101,1005,128"/>
<area shape="rect" id="node6" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="1081,97,1223,138"/>
<area shape="rect" id="node7" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1305,221,1446,248"/>
<area shape="rect" id="node8" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1511,259,1689,285"/>
<area shape="rect" id="node9" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1755,218,1904,259"/>
<area shape="rect" id="node15" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1969,375,2127,401"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1737,283,1921,325"/>
<area shape="rect" id="node10" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="1995,263,2101,289"/>
<area shape="rect" id="node11" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="2176,487,2296,513"/>
<area shape="rect" id="node12" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2353,487,2468,513"/>
<area shape="rect" id="node13" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2345,537,2476,564"/>
<area shape="rect" id="node14" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="2524,639,2601,665"/>
<area shape="rect" id="node18" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1309,38,1441,79"/>
<area shape="rect" id="node20" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="883,351,1006,377"/>
<area shape="rect" id="node26" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="888,255,1001,281"/>
<area shape="rect" id="node30" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="873,47,1016,73"/>
<area shape="rect" id="node21" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="1075,345,1229,386"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1288,348,1463,375"/>
<area shape="rect" id="node23" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1561,425,1639,452"/>
<area shape="rect" id="node24" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1777,451,1882,477"/>
<area shape="rect" id="node25" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1771,400,1888,427"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="1081,279,1223,321"/>
<area shape="rect" id="node28" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="1064,45,1240,72"/>
<area shape="rect" id="node29" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="1077,214,1227,255"/>
<area shape="rect" id="node32" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="1099,696,1205,723"/>
<area shape="rect" id="node34" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1532,630,1668,671"/>
<area shape="rect" id="node33" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="2177,695,2295,721"/>
<area shape="rect" id="node36" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1308,399,1443,441"/>
<area shape="rect" id="node38" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="1975,583,2121,609"/>
<area shape="rect" id="node39" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="873,513,1016,554"/>
<area shape="rect" id="node43" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="2175,762,2297,803"/>
<area shape="rect" id="node45" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="1303,465,1448,492"/>
<area shape="rect" id="node50" href="nilfs2_2ioctl_8c.html#a879fc213e33210988660173aec449143" title="nilfs_ioctl_set_suinfo" alt="" coords="465,759,609,785"/>
</map>
</div>

</div>
</div>
<a id="a3ad0af8131357596ac729f04c3009e15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ad0af8131357596ac729f04c3009e15">&#9670;&nbsp;</a></span>nilfs_sufile_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nilfs_sufile_read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structsuper__block.html">super_block</a> *&#160;</td>
          <td class="paramname"><em>sb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>susize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct nilfs_inode *&#160;</td>
          <td class="paramname"><em>raw_inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> **&#160;</td>
          <td class="paramname"><em>inodep</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>nilfs_sufile_read - read or get sufile inode : super block instance : size of a segment usage entry : on-disk sufile inode : buffer to store the inode </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a3ad0af8131357596ac729f04c3009e15_cgraph.png" border="0" usemap="#sufile_8c_a3ad0af8131357596ac729f04c3009e15_cgraph" alt=""/></div>
<map name="sufile_8c_a3ad0af8131357596ac729f04c3009e15_cgraph" id="sufile_8c_a3ad0af8131357596ac729f04c3009e15_cgraph">
<area shape="rect" id="node2" href="nilfs2_2inode_8c.html#ae758d8edf633a8af3535ac0af248f1d1" title="nilfs_iget_locked" alt="" coords="655,411,774,437"/>
<area shape="rect" id="node15" href="mdt_8c.html#a9d24c6e56a98e581fc30fd8a65841e2a" title="nilfs_mdt_init" alt="" coords="665,664,764,691"/>
<area shape="rect" id="node16" href="mdt_8c.html#ae0d853ce1775f22eb93823f6423e6fac" title="nilfs_mdt_set_entry_size" alt="" coords="631,765,798,792"/>
<area shape="rect" id="node18" href="nilfs2_2inode_8c.html#affec0e84c605c1d9028332974ba58cd3" title="nilfs_read_inode_common" alt="" coords="628,512,801,539"/>
<area shape="rect" id="node25" href="sufile_8c.html#a7df3cdff37c5aa00cca3458f1d7d400e" title="nilfs_sufile_get_header\l_block" alt="" coords="637,1546,792,1587"/>
<area shape="rect" id="node27" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="669,1111,760,1137"/>
<area shape="rect" id="node28" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="169,1304,349,1331"/>
<area shape="rect" id="node46" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="854,715,983,741"/>
<area shape="rect" id="node47" href="bad__inode_8c.html#a8c027cf52e2b7669b11b0bfa09bbcd45" title="iget_failed" alt="" coords="674,563,755,589"/>
<area shape="rect" id="node3" href="inode_8c.html#a0e9a0440646ab0424be87f1ee6387c64" title="iget5_locked" alt="" coords="871,183,966,209"/>
<area shape="rect" id="node11" href="nilfs2_2inode_8c.html#a42350b0b59e53776755f5a0b17efd97f" title="nilfs_iget_test" alt="" coords="867,411,970,437"/>
<area shape="rect" id="node13" href="nilfs2_2inode_8c.html#ab596c6b27b262ff881fb811a5d25990a" title="nilfs_iget_set" alt="" coords="869,360,968,387"/>
<area shape="rect" id="node4" href="inode_8c.html#aa1822403d896f1040c371de082022045" title="hash" alt="" coords="1080,157,1131,184"/>
<area shape="rect" id="node5" href="inode_8c.html#af827e753dda790b4b798f86e933bb380" title="find_inode" alt="" coords="1065,208,1146,235"/>
<area shape="rect" id="node6" href="inode_8c.html#a378733dcbf0fb08359b9a02145ac8fc3" title="iput" alt="" coords="1084,309,1127,336"/>
<area shape="rect" id="node7" href="debugfs_2inode_8c.html#a16e485b5debd4cd96a200844c38df190" title="EXPORT_SYMBOL" alt="" coords="1223,461,1361,488"/>
<area shape="rect" id="node8" href="inode_8c.html#a6328f7a2621c5365a1df969e8c7ab998" title="alloc_inode" alt="" coords="1062,5,1149,32"/>
<area shape="rect" id="node9" href="inode_8c.html#a1871c58d9c393006e24f7fea1bcc288d" title="inode_sb_list_add" alt="" coords="1042,56,1169,83"/>
<area shape="rect" id="node10" href="inode_8c.html#a076b86296ed39596f96ef03ea8aa74d7" title="destroy_inode" alt="" coords="1054,107,1157,133"/>
<area shape="rect" id="node12" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1070,411,1141,437"/>
<area shape="rect" id="node14" href="the__nilfs_8h.html#a4af5a977af148ee222180ae10226f487" title="nilfs_get_root" alt="" coords="1055,360,1155,387"/>
<area shape="rect" id="node17" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="871,1301,967,1328"/>
<area shape="rect" id="node19" href="inode_8c.html#a01ed868f59230449a75b85f7157efd95" title="set_nlink" alt="" coords="881,512,956,539"/>
<area shape="rect" id="node21" href="nilfs2_2bmap_8c.html#a1dab812b511c175bcc95dd9221f82172" title="nilfs_bmap_read" alt="" coords="860,563,977,589"/>
<area shape="rect" id="node20" href="inode_8c.html#a3988783ee2de89674d83e4e86080d792" title="clear_nlink" alt="" coords="1063,461,1147,488"/>
<area shape="rect" id="node22" href="nilfs_8h.html#ab02aecb562f6c74a04aad6d769ac9f1e" title="NILFS_BMAP_I" alt="" coords="1047,563,1163,589"/>
<area shape="rect" id="node23" href="nilfs2_2btree_8c.html#a8e12be4abec0ec1530a707fea17e7298" title="nilfs_btree_init" alt="" coords="1052,613,1159,640"/>
<area shape="rect" id="node24" href="nilfs2_2direct_8c.html#aeecaf45244f88e4286516e9b26ff6afd" title="nilfs_direct_init" alt="" coords="1051,664,1160,691"/>
<area shape="rect" id="node26" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="849,1713,988,1740"/>
<area shape="rect" id="node29" href="sufile_8h.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="397,984,580,1011"/>
<area shape="rect" id="node30" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="417,918,560,959"/>
<area shape="rect" id="node31" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="429,1355,548,1381"/>
<area shape="rect" id="node32" href="sufile_8h.html#ae5c9db186be6baf07d66e049a0fd9b9b" title="nilfs_sufile_mark_dirty" alt="" coords="413,1187,565,1213"/>
<area shape="rect" id="node33" href="sufile_8h.html#ac6379742426c30d02072b1a5b0f527f8" title="nilfs_sufile_set_segment\l_usage" alt="" coords="631,1429,798,1470"/>
<area shape="rect" id="node34" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033" title="nblocks" alt="" coords="681,1377,748,1404"/>
<area shape="rect" id="node35" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="419,1659,558,1685"/>
<area shape="rect" id="node36" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="413,867,564,893"/>
<area shape="rect" id="node37" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687" title="nilfs_sufile_set_suinfo" alt="" coords="413,1608,564,1635"/>
<area shape="rect" id="node38" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="420,1709,557,1736"/>
<area shape="rect" id="node39" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="423,1557,554,1584"/>
<area shape="rect" id="node40" href="sufile_8h.html#acad60c93c0f7f6c3a8a9dc843107f1ed" title="nilfs_sufile_do_scrap" alt="" coords="417,1035,561,1061"/>
<area shape="rect" id="node41" href="sufile_8h.html#a577d0d35a7907909b6c0a139d8cc1704" title="nilfs_sufile_do_free" alt="" coords="421,1085,556,1112"/>
<area shape="rect" id="node42" href="sufile_8h.html#aff87ff4257115842ff3c7940e5f8e769" title="nilfs_sufile_do_cancel_free" alt="" coords="399,1136,578,1163"/>
<area shape="rect" id="node43" href="sufile_8h.html#a7e943e59486cd6176a3317bed589b7c9" title="nilfs_sufile_do_set\l_error" alt="" coords="423,1238,554,1279"/>
<area shape="rect" id="node44" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="425,1304,552,1331"/>
<area shape="rect" id="node45" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="431,715,547,741"/>
<area shape="rect" id="node50" href="sufile_8h.html#a202058a1d5a7ee3658e8e7cda1ffee37" title="nilfs_sufile_trim_fs" alt="" coords="423,1405,554,1432"/>
<area shape="rect" id="node48" href="bad__inode_8c.html#ab9cc2af6161530b35e5f86e29f977033" title="make_bad_inode" alt="" coords="859,613,979,640"/>
<area shape="rect" id="node49" href="bad__inode_8c.html#a74ff3566c64350315f12163f4ddfdae7" title="EXPORT_SYMBOL" alt="" coords="1036,715,1175,741"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a3ad0af8131357596ac729f04c3009e15_icgraph.png" border="0" usemap="#sufile_8c_a3ad0af8131357596ac729f04c3009e15_icgraph" alt=""/></div>
<map name="sufile_8c_a3ad0af8131357596ac729f04c3009e15_icgraph" id="sufile_8c_a3ad0af8131357596ac729f04c3009e15_icgraph">
<area shape="rect" id="node2" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="169,434,349,461"/>
<area shape="rect" id="node50" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="596,466,741,493"/>
<area shape="rect" id="node3" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="404,290,541,317"/>
<area shape="rect" id="node22" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="407,341,538,367"/>
<area shape="rect" id="node36" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="401,517,544,559"/>
<area shape="rect" id="node40" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="609,403,728,430"/>
<area shape="rect" id="node42" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="403,723,542,750"/>
<area shape="rect" id="node45" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="403,583,542,624"/>
<area shape="rect" id="node46" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="605,661,732,687"/>
<area shape="rect" id="node47" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="397,239,548,266"/>
<area shape="rect" id="node49" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="415,466,531,493"/>
<area shape="rect" id="node4" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="609,169,729,195"/>
<area shape="rect" id="node20" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="604,95,733,136"/>
<area shape="rect" id="node5" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="807,147,948,188"/>
<area shape="rect" id="node6" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1030,271,1171,298"/>
<area shape="rect" id="node7" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1236,341,1415,367"/>
<area shape="rect" id="node8" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1480,279,1629,320"/>
<area shape="rect" id="node15" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1695,410,1852,437"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1463,344,1647,385"/>
<area shape="rect" id="node9" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="1721,339,1826,366"/>
<area shape="rect" id="node14" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="1715,286,1831,313"/>
<area shape="rect" id="node10" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1918,341,2038,367"/>
<area shape="rect" id="node11" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2115,341,2229,367"/>
<area shape="rect" id="node12" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2107,462,2237,489"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="2288,470,2365,497"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1904,509,2052,535"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1909,392,2047,433"/>
<area shape="rect" id="node18" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1900,458,2056,485"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1035,205,1167,247"/>
<area shape="rect" id="node23" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="607,353,730,379"/>
<area shape="rect" id="node31" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="612,302,725,329"/>
<area shape="rect" id="node35" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="597,233,740,259"/>
<area shape="rect" id="node24" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="801,395,954,436"/>
<area shape="rect" id="node25" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1013,442,1188,469"/>
<area shape="rect" id="node26" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1287,486,1364,513"/>
<area shape="rect" id="node27" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1502,511,1607,538"/>
<area shape="rect" id="node29" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1496,461,1613,487"/>
<area shape="rect" id="node28" href="nilfs2_2super_8c.html#a6f69bb47bb8193c95863dfa7858e0556" title="nilfs_mount" alt="" coords="1729,511,1818,538"/>
<area shape="rect" id="node30" href="nilfs2_2super_8c.html#aa52d92dd32f84052f43449918f769c15" title="nilfs_sync_fs" alt="" coords="1724,461,1823,487"/>
<area shape="rect" id="node32" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="806,329,949,371"/>
<area shape="rect" id="node33" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="789,213,965,239"/>
<area shape="rect" id="node34" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="802,264,953,305"/>
<area shape="rect" id="node37" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="824,613,931,639"/>
<area shape="rect" id="node39" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="2104,520,2240,561"/>
<area shape="rect" id="node38" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="1266,613,1385,639"/>
<area shape="rect" id="node41" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1033,351,1168,392"/>
<area shape="rect" id="node43" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="1028,722,1173,749"/>
<area shape="rect" id="node44" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="597,712,740,753"/>
<area shape="rect" id="node48" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="1264,45,1387,87"/>
</map>
</div>

</div>
</div>
<a id="ac9feb3258026bbd1136c545e911c5d91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9feb3258026bbd1136c545e911c5d91">&#9670;&nbsp;</a></span>nilfs_sufile_resize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nilfs_sufile_resize </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64&#160;</td>
          <td class="paramname"><em>newnsegs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>nilfs_sufile_resize - resize segment array : inode of segment usage file : new number of segments</p>
<p>Return Value: On success, 0 is returned. On error, one of the following negative error codes is returned.</p>
<p>%-EIO - I/O error.</p>
<p>%-ENOMEM - Insufficient amount of memory available.</p>
<p>%-ENOSPC - Enough free space is not left for shrinking</p>
<p>%-EBUSY - Dirty or active segments exist in the region to be truncated </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_ac9feb3258026bbd1136c545e911c5d91_cgraph.png" border="0" usemap="#sufile_8c_ac9feb3258026bbd1136c545e911c5d91_cgraph" alt=""/></div>
<map name="sufile_8c_ac9feb3258026bbd1136c545e911c5d91_cgraph" id="sufile_8c_ac9feb3258026bbd1136c545e911c5d91_cgraph">
<area shape="rect" id="node2" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="907,2267,997,2293"/>
<area shape="rect" id="node3" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1499,1133,1595,1160"/>
<area shape="rect" id="node4" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="180,1349,360,1376"/>
<area shape="rect" id="node8" href="sufile_8c.html#a7df3cdff37c5aa00cca3458f1d7d400e" title="nilfs_sufile_get_header\l_block" alt="" coords="875,819,1029,861"/>
<area shape="rect" id="node16" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1100,2089,1223,2116"/>
<area shape="rect" id="node20" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="881,1475,1023,1501"/>
<area shape="rect" id="node37" href="the__nilfs_8c.html#aa7bf85e7bb9022b3680b22d945d17f91" title="nilfs_nrsvsegs" alt="" coords="899,2520,1005,2547"/>
<area shape="rect" id="node38" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="659,1697,797,1738"/>
<area shape="rect" id="node40" href="the__nilfs_8c.html#a38632ac69509070865038bf0120a1509" title="nilfs_set_nsegments" alt="" coords="657,2520,799,2547"/>
<area shape="rect" id="node5" href="sufile_8h.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="408,2007,591,2033"/>
<area shape="rect" id="node6" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="428,2174,571,2215"/>
<area shape="rect" id="node7" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="669,1380,787,1407"/>
<area shape="rect" id="node22" href="sufile_8h.html#ae5c9db186be6baf07d66e049a0fd9b9b" title="nilfs_sufile_mark_dirty" alt="" coords="652,1244,804,1271"/>
<area shape="rect" id="node23" href="sufile_8h.html#ac6379742426c30d02072b1a5b0f527f8" title="nilfs_sufile_set_segment\l_usage" alt="" coords="645,1313,811,1354"/>
<area shape="rect" id="node24" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033" title="nblocks" alt="" coords="919,565,985,592"/>
<area shape="rect" id="node25" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="430,1067,569,1093"/>
<area shape="rect" id="node26" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="653,1171,803,1197"/>
<area shape="rect" id="node28" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687" title="nilfs_sufile_set_suinfo" alt="" coords="653,1764,803,1791"/>
<area shape="rect" id="node30" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="659,724,797,751"/>
<area shape="rect" id="node31" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="663,995,793,1021"/>
<area shape="rect" id="node32" href="sufile_8h.html#acad60c93c0f7f6c3a8a9dc843107f1ed" title="nilfs_sufile_do_scrap" alt="" coords="656,2004,800,2031"/>
<area shape="rect" id="node33" href="sufile_8h.html#a577d0d35a7907909b6c0a139d8cc1704" title="nilfs_sufile_do_free" alt="" coords="661,1816,795,1843"/>
<area shape="rect" id="node34" href="sufile_8h.html#aff87ff4257115842ff3c7940e5f8e769" title="nilfs_sufile_do_cancel_free" alt="" coords="639,1883,817,1909"/>
<area shape="rect" id="node35" href="sufile_8h.html#a7e943e59486cd6176a3317bed589b7c9" title="nilfs_sufile_do_set\l_error" alt="" coords="663,1937,793,1978"/>
<area shape="rect" id="node36" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="436,2061,563,2088"/>
<area shape="rect" id="node41" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="670,245,786,272"/>
<area shape="rect" id="node48" href="sufile_8h.html#a202058a1d5a7ee3658e8e7cda1ffee37" title="nilfs_sufile_trim_fs" alt="" coords="663,596,793,623"/>
<area shape="rect" id="node10" href="sufile_8c.html#a38f2abf7ef7577b1af4b9e8fc9316727" title="nilfs_sufile_get_segment\l_usage_block" alt="" coords="869,987,1035,1029"/>
<area shape="rect" id="node13" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="879,1795,1025,1837"/>
<area shape="rect" id="node15" href="sufile_8c.html#a34ecb984fd0f57101d2ee0b4bde4bf95" title="nilfs_sufile_segment\l_usages_in_block" alt="" coords="881,1105,1023,1146"/>
<area shape="rect" id="node9" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="1092,835,1231,861"/>
<area shape="rect" id="node11" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="1087,1104,1235,1131"/>
<area shape="rect" id="node12" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="1297,1155,1438,1197"/>
<area shape="rect" id="node14" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="1087,1256,1236,1283"/>
<area shape="rect" id="node17" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1307,2039,1428,2065"/>
<area shape="rect" id="node18" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1300,2089,1435,2116"/>
<area shape="rect" id="node19" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1298,2140,1437,2167"/>
<area shape="rect" id="node21" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1126,784,1197,811"/>
<area shape="rect" id="node27" href="the__nilfs_8h.html#a51bb53199a62a87f269e03404136d00f" title="nilfs_segment_is_active" alt="" coords="871,1323,1033,1349"/>
<area shape="rect" id="node29" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="869,2115,1035,2141"/>
<area shape="rect" id="node39" href="sufile_8c.html#a6c6906f2fa7470c98e36fadfed86c294" title="nilfs_sufile_delete\l_segment_usage_block" alt="" coords="873,1526,1031,1567"/>
<area shape="rect" id="node42" href="nilfs2_2inode_8c.html#ae758d8edf633a8af3535ac0af248f1d1" title="nilfs_iget_locked" alt="" coords="893,195,1011,221"/>
<area shape="rect" id="node43" href="mdt_8c.html#a9d24c6e56a98e581fc30fd8a65841e2a" title="nilfs_mdt_init" alt="" coords="903,245,1001,272"/>
<area shape="rect" id="node44" href="mdt_8c.html#ae0d853ce1775f22eb93823f6423e6fac" title="nilfs_mdt_set_entry_size" alt="" coords="1284,195,1451,221"/>
<area shape="rect" id="node45" href="nilfs2_2inode_8c.html#affec0e84c605c1d9028332974ba58cd3" title="nilfs_read_inode_common" alt="" coords="865,347,1039,373"/>
<area shape="rect" id="node46" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="1097,68,1226,95"/>
<area shape="rect" id="node47" href="bad__inode_8c.html#a8c027cf52e2b7669b11b0bfa09bbcd45" title="iget_failed" alt="" coords="911,93,993,120"/>
<area shape="rect" id="node49" href="the__nilfs_8h.html#acbe15a8b57f8ecf5e4777294c2f7303d" title="nilfs_get_segnum_of\l_block" alt="" coords="881,449,1023,490"/>
<area shape="rect" id="node50" href="the__nilfs_8h.html#a0dc161eb6c4f6bad9212b67517b46a37" title="nilfs_get_segment_range" alt="" coords="869,515,1035,541"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_ac9feb3258026bbd1136c545e911c5d91_icgraph.png" border="0" usemap="#sufile_8c_ac9feb3258026bbd1136c545e911c5d91_icgraph" alt=""/></div>
<map name="sufile_8c_ac9feb3258026bbd1136c545e911c5d91_icgraph" id="sufile_8c_ac9feb3258026bbd1136c545e911c5d91_icgraph">
<area shape="rect" id="node2" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="832,88,939,115"/>
<area shape="rect" id="node12" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="180,284,360,311"/>
<area shape="rect" id="node3" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="1049,100,1168,127"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1295,175,1372,201"/>
<area shape="rect" id="node5" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1922,175,2042,201"/>
<area shape="rect" id="node6" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2112,175,2227,201"/>
<area shape="rect" id="node11" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2104,225,2235,252"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="2287,99,2377,125"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="2286,149,2378,176"/>
<area shape="rect" id="node9" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="2283,200,2381,227"/>
<area shape="rect" id="node10" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="2289,251,2375,277"/>
<area shape="rect" id="node13" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="415,573,552,600"/>
<area shape="rect" id="node26" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="418,460,549,487"/>
<area shape="rect" id="node38" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="412,218,555,259"/>
<area shape="rect" id="node40" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="619,397,737,424"/>
<area shape="rect" id="node42" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="414,284,553,311"/>
<area shape="rect" id="node45" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="414,77,553,118"/>
<area shape="rect" id="node46" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="615,77,741,104"/>
<area shape="rect" id="node47" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="408,25,559,52"/>
<area shape="rect" id="node49" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="425,335,541,361"/>
<area shape="rect" id="node14" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="618,637,738,664"/>
<area shape="rect" id="node24" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="613,689,743,730"/>
<area shape="rect" id="node15" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="815,634,956,675"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1038,524,1179,551"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1244,512,1423,539"/>
<area shape="rect" id="node18" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1488,358,1637,399"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1703,483,1860,509"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1471,475,1655,517"/>
<area shape="rect" id="node19" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="1729,301,1834,328"/>
<area shape="rect" id="node20" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="1723,365,1839,392"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1908,483,2056,509"/>
<area shape="rect" id="node25" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1043,575,1175,617"/>
<area shape="rect" id="node27" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="617,448,739,475"/>
<area shape="rect" id="node33" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="621,499,735,525"/>
<area shape="rect" id="node37" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="607,567,749,593"/>
<area shape="rect" id="node28" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="809,386,962,427"/>
<area shape="rect" id="node29" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1021,401,1196,428"/>
<area shape="rect" id="node30" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1295,355,1372,381"/>
<area shape="rect" id="node31" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1510,307,1615,333"/>
<area shape="rect" id="node32" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1504,424,1621,451"/>
<area shape="rect" id="node34" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="814,451,957,493"/>
<area shape="rect" id="node35" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="797,583,973,609"/>
<area shape="rect" id="node36" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="810,517,961,558"/>
<area shape="rect" id="node39" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1041,167,1177,209"/>
<area shape="rect" id="node41" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1041,335,1176,377"/>
<area shape="rect" id="node43" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="813,233,958,260"/>
<area shape="rect" id="node44" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="607,230,749,271"/>
<area shape="rect" id="node48" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="1047,26,1170,67"/>
<area shape="rect" id="node50" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="813,284,958,311"/>
</map>
</div>

</div>
</div>
<a id="a34ecb984fd0f57101d2ee0b4bde4bf95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34ecb984fd0f57101d2ee0b4bde4bf95">&#9670;&nbsp;</a></span>nilfs_sufile_segment_usages_in_block()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned long nilfs_sufile_segment_usages_in_block </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64&#160;</td>
          <td class="paramname"><em>curr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64&#160;</td>
          <td class="paramname"><em>max</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a34ecb984fd0f57101d2ee0b4bde4bf95_cgraph.png" border="0" usemap="#sufile_8c_a34ecb984fd0f57101d2ee0b4bde4bf95_cgraph" alt=""/></div>
<map name="sufile_8c_a34ecb984fd0f57101d2ee0b4bde4bf95_cgraph" id="sufile_8c_a34ecb984fd0f57101d2ee0b4bde4bf95_cgraph">
<area shape="rect" id="node2" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="392,5,533,47"/>
<area shape="rect" id="node4" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="195,63,344,90"/>
<area shape="rect" id="node3" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="581,42,677,69"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a34ecb984fd0f57101d2ee0b4bde4bf95_icgraph.png" border="0" usemap="#sufile_8c_a34ecb984fd0f57101d2ee0b4bde4bf95_icgraph" alt=""/></div>
<map name="sufile_8c_a34ecb984fd0f57101d2ee0b4bde4bf95_icgraph" id="sufile_8c_a34ecb984fd0f57101d2ee0b4bde4bf95_icgraph">
<area shape="rect" id="node2" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="201,365,319,392"/>
<area shape="rect" id="node49" href="sufile_8h.html#a202058a1d5a7ee3658e8e7cda1ffee37" title="nilfs_sufile_trim_fs" alt="" coords="195,521,325,548"/>
<area shape="rect" id="node3" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="1002,157,1155,198"/>
<area shape="rect" id="node12" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="396,70,531,111"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="1007,229,1150,270"/>
<area shape="rect" id="node23" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="373,521,553,548"/>
<area shape="rect" id="node4" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1215,161,1389,188"/>
<area shape="rect" id="node5" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1488,160,1565,187"/>
<area shape="rect" id="node6" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1703,209,1809,236"/>
<area shape="rect" id="node7" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1697,159,1815,185"/>
<area shape="rect" id="node8" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1896,235,2053,261"/>
<area shape="rect" id="node9" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="2105,344,2253,371"/>
<area shape="rect" id="node10" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="2110,227,2249,269"/>
<area shape="rect" id="node11" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="2101,293,2257,320"/>
<area shape="rect" id="node13" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1437,313,1616,340"/>
<area shape="rect" id="node14" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="2105,395,2254,437"/>
<area shape="rect" id="node18" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1664,311,1848,353"/>
<area shape="rect" id="node15" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="2311,512,2416,539"/>
<area shape="rect" id="node17" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="2305,403,2421,429"/>
<area shape="rect" id="node16" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="2469,656,2589,683"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8h.html#a1907ac7b54882bbf06019eaf6d03c21c" title="nilfs_relax_pressure\l_in_lock" alt="" coords="1905,286,2044,327"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8c.html#a8b69f4181745f44662620421e0f88ab0" title="nilfs_transaction_lock" alt="" coords="1901,352,2049,379"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1231,312,1373,339"/>
<area shape="rect" id="node24" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="608,469,745,496"/>
<area shape="rect" id="node29" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="611,389,742,416"/>
<area shape="rect" id="node35" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="605,626,748,667"/>
<area shape="rect" id="node40" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="607,521,746,548"/>
<area shape="rect" id="node43" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="607,779,746,821"/>
<area shape="rect" id="node44" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="808,796,935,823"/>
<area shape="rect" id="node45" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="601,572,752,599"/>
<area shape="rect" id="node47" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="619,339,735,365"/>
<area shape="rect" id="node25" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="811,411,931,437"/>
<area shape="rect" id="node27" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="807,462,936,503"/>
<area shape="rect" id="node26" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="1008,411,1149,453"/>
<area shape="rect" id="node28" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1236,363,1368,405"/>
<area shape="rect" id="node30" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="810,208,933,235"/>
<area shape="rect" id="node31" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="815,309,928,336"/>
<area shape="rect" id="node34" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="800,360,943,387"/>
<area shape="rect" id="node32" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="991,360,1167,387"/>
<area shape="rect" id="node33" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="1003,294,1154,335"/>
<area shape="rect" id="node36" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="1025,768,1132,795"/>
<area shape="rect" id="node39" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1234,702,1370,743"/>
<area shape="rect" id="node37" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="1243,768,1361,795"/>
<area shape="rect" id="node38" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1488,692,1565,719"/>
<area shape="rect" id="node41" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="1229,585,1375,612"/>
<area shape="rect" id="node42" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="800,527,943,569"/>
<area shape="rect" id="node46" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="1241,637,1363,678"/>
<area shape="rect" id="node48" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="1006,5,1151,32"/>
<area shape="rect" id="node50" href="nilfs2_2ioctl_8c.html#a8913a80e32e55bd55c20461949a3e6b6" title="nilfs_ioctl_trim_fs" alt="" coords="401,709,525,736"/>
</map>
</div>

</div>
</div>
<a id="a048a58aad760411d79b7e01d28babbb5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a048a58aad760411d79b7e01d28babbb5">&#9670;&nbsp;</a></span>nilfs_sufile_segment_usages_per_block()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned long nilfs_sufile_segment_usages_per_block </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a048a58aad760411d79b7e01d28babbb5_cgraph.png" border="0" usemap="#sufile_8c_a048a58aad760411d79b7e01d28babbb5_cgraph" alt=""/></div>
<map name="sufile_8c_a048a58aad760411d79b7e01d28babbb5_cgraph" id="sufile_8c_a048a58aad760411d79b7e01d28babbb5_cgraph">
<area shape="rect" id="node2" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="195,13,291,39"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a048a58aad760411d79b7e01d28babbb5_icgraph.png" border="0" usemap="#sufile_8c_a048a58aad760411d79b7e01d28babbb5_icgraph" alt=""/></div>
<map name="sufile_8c_a048a58aad760411d79b7e01d28babbb5_icgraph" id="sufile_8c_a048a58aad760411d79b7e01d28babbb5_icgraph">
<area shape="rect" id="node2" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="195,950,343,977"/>
<area shape="rect" id="node27" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="1067,855,1206,896"/>
<area shape="rect" id="node29" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="1061,1118,1212,1145"/>
<area shape="rect" id="node44" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="195,1063,344,1090"/>
<area shape="rect" id="node45" href="sufile_8c.html#a34ecb984fd0f57101d2ee0b4bde4bf95" title="nilfs_sufile_segment\l_usages_in_block" alt="" coords="405,683,546,724"/>
<area shape="rect" id="node3" href="sufile_8c.html#a38f2abf7ef7577b1af4b9e8fc9316727" title="nilfs_sufile_get_segment\l_usage_block" alt="" coords="392,603,559,644"/>
<area shape="rect" id="node6" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="1068,510,1205,537"/>
<area shape="rect" id="node41" href="sufile_8c.html#a6c6906f2fa7470c98e36fadfed86c294" title="nilfs_sufile_delete\l_segment_usage_block" alt="" coords="396,1001,555,1043"/>
<area shape="rect" id="node42" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687" title="nilfs_sufile_set_suinfo" alt="" coords="621,966,771,993"/>
<area shape="rect" id="node4" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="631,595,761,622"/>
<area shape="rect" id="node19" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="1077,257,1196,283"/>
<area shape="rect" id="node35" href="sufile_8h.html#ae5c9db186be6baf07d66e049a0fd9b9b" title="nilfs_sufile_mark_dirty" alt="" coords="620,38,772,65"/>
<area shape="rect" id="node36" href="sufile_8h.html#ac6379742426c30d02072b1a5b0f527f8" title="nilfs_sufile_set_segment\l_usage" alt="" coords="613,241,779,283"/>
<area shape="rect" id="node39" href="sufile_8h.html#a202058a1d5a7ee3658e8e7cda1ffee37" title="nilfs_sufile_trim_fs" alt="" coords="631,697,761,723"/>
<area shape="rect" id="node5" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="833,662,1013,689"/>
<area shape="rect" id="node32" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="862,611,985,638"/>
<area shape="rect" id="node33" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="1080,307,1193,334"/>
<area shape="rect" id="node34" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="852,763,995,790"/>
<area shape="rect" id="node13" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="1065,663,1208,704"/>
<area shape="rect" id="node24" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="1067,611,1206,638"/>
<area shape="rect" id="node28" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="1273,753,1400,779"/>
<area shape="rect" id="node31" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="1079,561,1195,587"/>
<area shape="rect" id="node7" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="1277,459,1397,486"/>
<area shape="rect" id="node11" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="1272,372,1401,413"/>
<area shape="rect" id="node8" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="1478,412,1619,453"/>
<area shape="rect" id="node9" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1686,309,1827,335"/>
<area shape="rect" id="node10" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1877,102,2056,129"/>
<area shape="rect" id="node12" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1483,183,1615,224"/>
<area shape="rect" id="node14" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="1495,753,1602,779"/>
<area shape="rect" id="node18" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1689,665,1825,707"/>
<area shape="rect" id="node15" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="1697,753,1816,779"/>
<area shape="rect" id="node16" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1928,778,2005,805"/>
<area shape="rect" id="node17" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="2104,778,2224,805"/>
<area shape="rect" id="node20" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="1260,307,1413,348"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1269,5,1404,47"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="1265,241,1408,283"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1461,310,1636,337"/>
<area shape="rect" id="node25" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="1684,585,1829,611"/>
<area shape="rect" id="node26" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="1265,585,1408,627"/>
<area shape="rect" id="node30" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="1487,1020,1610,1061"/>
<area shape="rect" id="node37" href="nilfs2_2segment_8c.html#a5e55835a8c7bac0db60b81df4d707d4e" title="nilfs_segctor_update\l_segusage" alt="" coords="852,140,995,181"/>
<area shape="rect" id="node38" href="nilfs2_2segment_8c.html#a2ad2a278dd41af2f12f1e28a0b61ec8c" title="nilfs_cancel_segusage" alt="" coords="846,206,1001,233"/>
<area shape="rect" id="node40" href="nilfs2_2ioctl_8c.html#a8913a80e32e55bd55c20461949a3e6b6" title="nilfs_ioctl_trim_fs" alt="" coords="1695,803,1819,830"/>
<area shape="rect" id="node43" href="nilfs2_2ioctl_8c.html#a879fc213e33210988660173aec449143" title="nilfs_ioctl_set_suinfo" alt="" coords="1477,903,1621,930"/>
<area shape="rect" id="node46" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="402,748,549,789"/>
<area shape="rect" id="node47" href="sufile_8h.html#aff87ff4257115842ff3c7940e5f8e769" title="nilfs_sufile_do_cancel_free" alt="" coords="607,545,785,571"/>
<area shape="rect" id="node48" href="sufile_8h.html#acad60c93c0f7f6c3a8a9dc843107f1ed" title="nilfs_sufile_do_scrap" alt="" coords="624,646,768,673"/>
<area shape="rect" id="node49" href="sufile_8h.html#a577d0d35a7907909b6c0a139d8cc1704" title="nilfs_sufile_do_free" alt="" coords="629,451,763,478"/>
<area shape="rect" id="node50" href="sufile_8h.html#a7e943e59486cd6176a3317bed589b7c9" title="nilfs_sufile_do_set\l_error" alt="" coords="631,748,761,789"/>
</map>
</div>

</div>
</div>
<a id="ac0bd62c3d3681b821085c55c413aa1bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0bd62c3d3681b821085c55c413aa1bb">&#9670;&nbsp;</a></span>nilfs_sufile_set_alloc_range()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nilfs_sufile_set_alloc_range </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64&#160;</td>
          <td class="paramname"><em>end</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>nilfs_sufile_set_alloc_range - limit range of segment to be allocated : inode of segment usage file : minimum segment number of allocatable region (inclusive) : maximum segment number of allocatable region (inclusive)</p>
<p>Return Value: On success, 0 is returned. On error, one of the following negative error codes is returned.</p>
<p>%-ERANGE - invalid segment region </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_ac0bd62c3d3681b821085c55c413aa1bb_cgraph.png" border="0" usemap="#sufile_8c_ac0bd62c3d3681b821085c55c413aa1bb_cgraph" alt=""/></div>
<map name="sufile_8c_ac0bd62c3d3681b821085c55c413aa1bb_cgraph" id="sufile_8c_ac0bd62c3d3681b821085c55c413aa1bb_cgraph">
<area shape="rect" id="node2" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="923,448,1013,475"/>
<area shape="rect" id="node3" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1515,1417,1611,1444"/>
<area shape="rect" id="node4" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="196,1016,376,1043"/>
<area shape="rect" id="node5" href="sufile_8h.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="424,569,607,596"/>
<area shape="rect" id="node6" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="444,318,587,359"/>
<area shape="rect" id="node7" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="685,1169,803,1196"/>
<area shape="rect" id="node23" href="sufile_8h.html#ae5c9db186be6baf07d66e049a0fd9b9b" title="nilfs_sufile_mark_dirty" alt="" coords="668,909,820,936"/>
<area shape="rect" id="node24" href="sufile_8h.html#ac6379742426c30d02072b1a5b0f527f8" title="nilfs_sufile_set_segment\l_usage" alt="" coords="661,1221,827,1262"/>
<area shape="rect" id="node25" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033" title="nblocks" alt="" coords="935,2083,1001,2109"/>
<area shape="rect" id="node26" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="446,839,585,865"/>
<area shape="rect" id="node27" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="669,1557,819,1584"/>
<area shape="rect" id="node29" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687" title="nilfs_sufile_set_suinfo" alt="" coords="669,768,819,795"/>
<area shape="rect" id="node31" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="675,1287,813,1313"/>
<area shape="rect" id="node32" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="679,1337,809,1364"/>
<area shape="rect" id="node33" href="sufile_8h.html#acad60c93c0f7f6c3a8a9dc843107f1ed" title="nilfs_sufile_do_scrap" alt="" coords="672,549,816,576"/>
<area shape="rect" id="node34" href="sufile_8h.html#a577d0d35a7907909b6c0a139d8cc1704" title="nilfs_sufile_do_free" alt="" coords="677,600,811,627"/>
<area shape="rect" id="node35" href="sufile_8h.html#aff87ff4257115842ff3c7940e5f8e769" title="nilfs_sufile_do_cancel_free" alt="" coords="655,651,833,677"/>
<area shape="rect" id="node36" href="sufile_8h.html#a7e943e59486cd6176a3317bed589b7c9" title="nilfs_sufile_do_set\l_error" alt="" coords="679,702,809,743"/>
<area shape="rect" id="node37" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="452,515,579,541"/>
<area shape="rect" id="node41" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="686,2236,802,2263"/>
<area shape="rect" id="node48" href="sufile_8h.html#a202058a1d5a7ee3658e8e7cda1ffee37" title="nilfs_sufile_trim_fs" alt="" coords="679,1953,809,1980"/>
<area shape="rect" id="node8" href="sufile_8c.html#a7df3cdff37c5aa00cca3458f1d7d400e" title="nilfs_sufile_get_header\l_block" alt="" coords="891,1275,1045,1317"/>
<area shape="rect" id="node11" href="sufile_8c.html#a38f2abf7ef7577b1af4b9e8fc9316727" title="nilfs_sufile_get_segment\l_usage_block" alt="" coords="885,1443,1051,1485"/>
<area shape="rect" id="node14" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="895,1057,1041,1098"/>
<area shape="rect" id="node16" href="sufile_8c.html#a34ecb984fd0f57101d2ee0b4bde4bf95" title="nilfs_sufile_segment\l_usages_in_block" alt="" coords="897,1713,1039,1754"/>
<area shape="rect" id="node17" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1116,600,1239,627"/>
<area shape="rect" id="node21" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="897,803,1039,829"/>
<area shape="rect" id="node9" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="1108,1312,1247,1339"/>
<area shape="rect" id="node10" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="1311,1312,1456,1339"/>
<area shape="rect" id="node12" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="1103,1443,1251,1469"/>
<area shape="rect" id="node13" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="1313,1545,1454,1586"/>
<area shape="rect" id="node15" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="1103,1493,1252,1520"/>
<area shape="rect" id="node18" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1323,600,1444,627"/>
<area shape="rect" id="node19" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1316,651,1451,677"/>
<area shape="rect" id="node20" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1314,549,1453,576"/>
<area shape="rect" id="node22" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1142,1613,1213,1640"/>
<area shape="rect" id="node28" href="the__nilfs_8h.html#a51bb53199a62a87f269e03404136d00f" title="nilfs_segment_is_active" alt="" coords="887,1611,1049,1637"/>
<area shape="rect" id="node30" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="885,549,1051,576"/>
<area shape="rect" id="node38" href="the__nilfs_8c.html#aa7bf85e7bb9022b3680b22d945d17f91" title="nilfs_nrsvsegs" alt="" coords="915,144,1021,171"/>
<area shape="rect" id="node39" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="675,1002,813,1043"/>
<area shape="rect" id="node40" href="the__nilfs_8c.html#a38632ac69509070865038bf0120a1509" title="nilfs_set_nsegments" alt="" coords="673,245,815,272"/>
<area shape="rect" id="node42" href="nilfs2_2inode_8c.html#ae758d8edf633a8af3535ac0af248f1d1" title="nilfs_iget_locked" alt="" coords="909,2403,1027,2429"/>
<area shape="rect" id="node43" href="mdt_8c.html#a9d24c6e56a98e581fc30fd8a65841e2a" title="nilfs_mdt_init" alt="" coords="919,2453,1017,2480"/>
<area shape="rect" id="node44" href="mdt_8c.html#ae0d853ce1775f22eb93823f6423e6fac" title="nilfs_mdt_set_entry_size" alt="" coords="1300,2301,1467,2328"/>
<area shape="rect" id="node45" href="nilfs2_2inode_8c.html#affec0e84c605c1d9028332974ba58cd3" title="nilfs_read_inode_common" alt="" coords="881,1931,1055,1957"/>
<area shape="rect" id="node46" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="1113,2428,1242,2455"/>
<area shape="rect" id="node47" href="bad__inode_8c.html#a8c027cf52e2b7669b11b0bfa09bbcd45" title="iget_failed" alt="" coords="927,2352,1009,2379"/>
<area shape="rect" id="node49" href="the__nilfs_8h.html#acbe15a8b57f8ecf5e4777294c2f7303d" title="nilfs_get_segnum_of\l_block" alt="" coords="897,2134,1039,2175"/>
<area shape="rect" id="node50" href="the__nilfs_8h.html#a0dc161eb6c4f6bad9212b67517b46a37" title="nilfs_get_segment_range" alt="" coords="885,2200,1051,2227"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_ac0bd62c3d3681b821085c55c413aa1bb_icgraph.png" border="0" usemap="#sufile_8c_ac0bd62c3d3681b821085c55c413aa1bb_icgraph" alt=""/></div>
<map name="sufile_8c_ac0bd62c3d3681b821085c55c413aa1bb_icgraph" id="sufile_8c_ac0bd62c3d3681b821085c55c413aa1bb_icgraph">
<area shape="rect" id="node2" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="848,198,955,225"/>
<area shape="rect" id="node12" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="626,45,762,87"/>
<area shape="rect" id="node13" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="196,379,376,406"/>
<area shape="rect" id="node3" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="1065,226,1184,253"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1311,289,1388,315"/>
<area shape="rect" id="node5" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1938,390,2058,417"/>
<area shape="rect" id="node6" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2128,390,2243,417"/>
<area shape="rect" id="node11" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2120,314,2251,341"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="2303,314,2393,341"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="2302,365,2394,391"/>
<area shape="rect" id="node9" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="2299,415,2397,442"/>
<area shape="rect" id="node10" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="2305,466,2391,493"/>
<area shape="rect" id="node14" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="431,647,568,674"/>
<area shape="rect" id="node27" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="434,555,565,582"/>
<area shape="rect" id="node39" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="428,173,571,215"/>
<area shape="rect" id="node40" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="635,486,753,513"/>
<area shape="rect" id="node42" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="430,430,569,457"/>
<area shape="rect" id="node45" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="430,239,569,280"/>
<area shape="rect" id="node46" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="631,246,757,273"/>
<area shape="rect" id="node47" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="424,379,575,406"/>
<area shape="rect" id="node49" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="441,122,557,149"/>
<area shape="rect" id="node15" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="634,694,754,721"/>
<area shape="rect" id="node25" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="629,753,759,795"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="831,697,972,739"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1054,587,1195,614"/>
<area shape="rect" id="node18" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1260,533,1439,559"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1504,557,1653,599"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1719,339,1876,366"/>
<area shape="rect" id="node24" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1487,492,1671,533"/>
<area shape="rect" id="node20" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="1745,477,1850,503"/>
<area shape="rect" id="node21" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="1739,565,1855,591"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1924,339,2072,366"/>
<area shape="rect" id="node26" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1059,639,1191,680"/>
<area shape="rect" id="node28" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="633,537,755,563"/>
<area shape="rect" id="node34" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="637,587,751,614"/>
<area shape="rect" id="node38" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="623,639,765,666"/>
<area shape="rect" id="node29" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="825,449,978,491"/>
<area shape="rect" id="node30" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1037,414,1212,441"/>
<area shape="rect" id="node31" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1311,201,1388,227"/>
<area shape="rect" id="node32" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1526,238,1631,265"/>
<area shape="rect" id="node33" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1520,187,1637,214"/>
<area shape="rect" id="node35" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="830,515,973,556"/>
<area shape="rect" id="node36" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="813,646,989,673"/>
<area shape="rect" id="node37" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="826,580,977,621"/>
<area shape="rect" id="node41" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1057,505,1192,547"/>
<area shape="rect" id="node43" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="1052,343,1197,370"/>
<area shape="rect" id="node44" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="623,420,765,461"/>
<area shape="rect" id="node48" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="840,281,963,323"/>
<area shape="rect" id="node50" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="1052,51,1197,78"/>
</map>
</div>

</div>
</div>
<a id="ac6379742426c30d02072b1a5b0f527f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6379742426c30d02072b1a5b0f527f8">&#9670;&nbsp;</a></span>nilfs_sufile_set_segment_usage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nilfs_sufile_set_segment_usage </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64&#160;</td>
          <td class="paramname"><em>segnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>nblocks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time64_t&#160;</td>
          <td class="paramname"><em>modtime</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>nilfs_sufile_set_segment_usage - set usage of a segment : inode of segment usage file : segment number : number of live blocks in the segment : modification time (option) </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_ac6379742426c30d02072b1a5b0f527f8_cgraph.png" border="0" usemap="#sufile_8c_ac6379742426c30d02072b1a5b0f527f8_cgraph" alt=""/></div>
<map name="sufile_8c_ac6379742426c30d02072b1a5b0f527f8_cgraph" id="sufile_8c_ac6379742426c30d02072b1a5b0f527f8_cgraph">
<area shape="rect" id="node2" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="871,591,967,617"/>
<area shape="rect" id="node3" href="sufile_8c.html#a38f2abf7ef7577b1af4b9e8fc9316727" title="nilfs_sufile_get_segment\l_usage_block" alt="" coords="220,489,387,530"/>
<area shape="rect" id="node24" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1081,173,1204,200"/>
<area shape="rect" id="node41" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="1071,224,1214,251"/>
<area shape="rect" id="node49" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="230,423,377,465"/>
<area shape="rect" id="node4" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="440,380,579,407"/>
<area shape="rect" id="node47" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="435,540,583,567"/>
<area shape="rect" id="node5" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="637,380,783,407"/>
<area shape="rect" id="node18" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="632,329,788,356"/>
<area shape="rect" id="node6" href="mdt_8c.html#a43ded315f7122596d14b88c43fe9c98d" title="nilfs_mdt_submit_block" alt="" coords="840,540,999,567"/>
<area shape="rect" id="node7" href="nilfs2_2page_8c.html#aa4a24cc5a684ba71b9e4423f2ea38970" title="nilfs_grab_buffer" alt="" coords="1083,477,1202,504"/>
<area shape="rect" id="node9" href="buffer_8c.html#a5fc92b2c44523c64e98193eaa4f46541" title="unlock_buffer" alt="" coords="1553,747,1653,773"/>
<area shape="rect" id="node11" href="nilfs2_2bmap_8h.html#a282d60470960949277ac67e31c97f05b" title="nilfs_bmap_lookup" alt="" coords="1077,629,1208,656"/>
<area shape="rect" id="node14" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1339,377,1409,404"/>
<area shape="rect" id="node15" href="buffer_8c.html#ade60786fa99b4fbb4cf607434af395db" title="end_buffer_read_sync" alt="" coords="1067,797,1218,824"/>
<area shape="rect" id="node17" href="buffer_8c.html#ab65df498c54845f497bae7afe9222c91" title="submit_bh" alt="" coords="1562,620,1645,647"/>
<area shape="rect" id="node8" href="nilfs2_2page_8c.html#a051d0268f3af219ba3e2a9ca79a8843c" title="__nilfs_get_page_block" alt="" coords="1295,477,1453,504"/>
<area shape="rect" id="node10" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1754,663,1893,689"/>
<area shape="rect" id="node12" href="nilfs2_2bmap_8h.html#a47e39e91829ba28e44d1b0913f5ef480" title="nilfs_bmap_lookup_at\l_level" alt="" coords="1300,681,1448,722"/>
<area shape="rect" id="node13" href="nilfs2_2bmap_8h.html#abd107e6c373b3d12d3817a32d403001b" title="nilfs_bmap_get_dat" alt="" coords="1307,629,1441,656"/>
<area shape="rect" id="node16" href="buffer_8c.html#a85e290b32d9599acd25df3b159392ab7" title="__end_buffer_read_notouch" alt="" coords="1283,797,1465,824"/>
<area shape="rect" id="node19" href="nilfs_8h.html#aacff7fe9750a849356475b2063b69e3b" title="nilfs_transaction_begin" alt="" coords="842,388,997,415"/>
<area shape="rect" id="node22" href="mdt_8c.html#a759ca943427ead8bb22ecdc82a9338ee" title="nilfs_mdt_insert_new\l_block" alt="" coords="847,322,992,363"/>
<area shape="rect" id="node42" href="nilfs_8h.html#a576ee8d20fe7a5d7c5889cb118fe0533" title="nilfs_transaction_commit" alt="" coords="836,85,1003,112"/>
<area shape="rect" id="node46" href="nilfs_8h.html#a155140033fba0977ed043367001c3384" title="nilfs_transaction_abort" alt="" coords="843,271,996,297"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8c.html#ada0ba1bf162679380f6096c9f83b94ea" title="nilfs_prepare_segment_lock" alt="" coords="1051,376,1235,403"/>
<area shape="rect" id="node21" href="the__nilfs_8c.html#a137faca9117bfef2a2264ccf3a9aa809" title="nilfs_near_disk_full" alt="" coords="1076,427,1209,453"/>
<area shape="rect" id="node23" href="nilfs2_2bmap_8c.html#a4e7fd87b553f99a5d10b2f1d0cbbec0b" title="nilfs_bmap_insert" alt="" coords="1081,275,1205,301"/>
<area shape="rect" id="node25" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1313,60,1435,87"/>
<area shape="rect" id="node27" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1307,173,1441,200"/>
<area shape="rect" id="node26" href="buffer_8c.html#ae236845de65ed065f74eecf8f6ee9742" title="EXPORT_SYMBOL_GPL" alt="" coords="1517,27,1689,53"/>
<area shape="rect" id="node28" href="fs-writeback_8c.html#af5890cdc0a937a4f944928bd1880d49b" title="block_dump___mark_inode\l_dirty" alt="" coords="1513,261,1693,302"/>
<area shape="rect" id="node36" href="fs-writeback_8c.html#ad0ca24311e1c0ba76d3810d240f72b08" title="locked_inode_to_wb\l_and_lock_list" alt="" coords="1533,195,1673,237"/>
<area shape="rect" id="node37" href="fs-writeback_8c.html#a2a36a21e075aa2a912f5c3cb027692cf" title="inode_io_list_move\l_locked" alt="" coords="1537,78,1670,119"/>
<area shape="rect" id="node40" href="fs-writeback_8c.html#a044f1d7ff09b03f639232ec0e6a88ee1" title="EXPORT_SYMBOL" alt="" coords="1534,144,1673,171"/>
<area shape="rect" id="node29" href="dcache_8c.html#a9f042046c19f277000ddfc09b02e3633" title="d_find_alias" alt="" coords="1778,243,1869,269"/>
<area shape="rect" id="node32" href="dcache_8c.html#aebcca358185b5176b69b97e7eab12dfd" title="dput" alt="" coords="1800,293,1847,320"/>
<area shape="rect" id="node30" href="dcache_8c.html#a3eb221591429fdc67dec907c0d09d26a" title="__d_find_alias" alt="" coords="1970,192,2075,219"/>
<area shape="rect" id="node31" href="dcache_8c.html#aeb5ec7bdf3301140d66dd18ae638685c" title="EXPORT_SYMBOL" alt="" coords="1953,243,2092,269"/>
<area shape="rect" id="node33" href="dcache_8c.html#a364a93ebd8b57977a5a90f2076dd8f59" title="fast_dput" alt="" coords="1985,344,2061,371"/>
<area shape="rect" id="node34" href="dcache_8c.html#a689bf4f6109300b7bc021f1641052f99" title="retain_dentry" alt="" coords="2140,344,2237,371"/>
<area shape="rect" id="node35" href="dcache_8c.html#a4a5ea078fab8f6527abb7f44aa88efd3" title="dentry_kill" alt="" coords="1982,293,2063,320"/>
<area shape="rect" id="node38" href="fs-writeback_8c.html#ad9e6fcccf4baffa8e6c91881c6e428a9" title="wb_io_lists_populated" alt="" coords="1748,60,1899,87"/>
<area shape="rect" id="node39" href="fs-writeback_8c.html#aa31b94b7a70c8c8d396a5f0f3e8ef1ec" title="wb_io_lists_depopulated" alt="" coords="1741,111,1905,137"/>
<area shape="rect" id="node43" href="nilfs2_2segment_8c.html#aa55509ef3ea01cc74488f916f1d551f3" title="nilfs_segctor_start\l_timer" alt="" coords="1078,107,1207,149"/>
<area shape="rect" id="node44" href="nilfs2_2segment_8c.html#a23c179e5f28f728a442e31641f71c795" title="nilfs_segctor_do_flush" alt="" coords="1067,5,1219,32"/>
<area shape="rect" id="node45" href="nilfs2_2segment_8c.html#ad8bab60b16b37c93e180e1ea3e1580ad" title="nilfs_construct_segment" alt="" coords="1061,56,1225,83"/>
<area shape="rect" id="node48" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="639,533,781,574"/>
<area shape="rect" id="node50" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="435,481,584,508"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_ac6379742426c30d02072b1a5b0f527f8_icgraph.png" border="0" usemap="#sufile_8c_ac6379742426c30d02072b1a5b0f527f8_icgraph" alt=""/></div>
<map name="sufile_8c_ac6379742426c30d02072b1a5b0f527f8_icgraph" id="sufile_8c_ac6379742426c30d02072b1a5b0f527f8_icgraph">
<area shape="rect" id="node2" href="nilfs2_2segment_8c.html#a5e55835a8c7bac0db60b81df4d707d4e" title="nilfs_segctor_update\l_segusage" alt="" coords="239,889,381,931"/>
<area shape="rect" id="node18" href="nilfs2_2segment_8c.html#a2ad2a278dd41af2f12f1e28a0b61ec8c" title="nilfs_cancel_segusage" alt="" coords="233,838,387,865"/>
<area shape="rect" id="node20" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="220,389,400,415"/>
<area shape="rect" id="node3" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1284,505,1463,531"/>
<area shape="rect" id="node4" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1951,457,2101,499"/>
<area shape="rect" id="node8" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1743,333,1900,359"/>
<area shape="rect" id="node15" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1511,439,1695,480"/>
<area shape="rect" id="node5" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="2379,309,2484,335"/>
<area shape="rect" id="node7" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="2183,482,2299,509"/>
<area shape="rect" id="node6" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="2532,283,2652,310"/>
<area shape="rect" id="node9" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1952,281,2100,307"/>
<area shape="rect" id="node12" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1957,383,2095,424"/>
<area shape="rect" id="node14" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1948,331,2104,358"/>
<area shape="rect" id="node10" href="nilfs2_2ioctl_8c.html#a80c0559fcfd518a664113365f15d1096" title="nilfs_ioctl_clean_segments" alt="" coords="2152,238,2331,265"/>
<area shape="rect" id="node11" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="2393,162,2470,189"/>
<area shape="rect" id="node13" href="nilfs2_2segment_8c.html#a39d3b93661aea1ce6d75d52641a734f7" title="nilfs_segctor_thread" alt="" coords="2172,381,2311,407"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8h.html#a1907ac7b54882bbf06019eaf6d03c21c" title="nilfs_relax_pressure\l_in_lock" alt="" coords="1752,439,1891,480"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8c.html#a8b69f4181745f44662620421e0f88ab0" title="nilfs_transaction_lock" alt="" coords="1747,387,1895,414"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1083,704,1215,745"/>
<area shape="rect" id="node21" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="455,619,592,646"/>
<area shape="rect" id="node26" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="458,543,589,570"/>
<area shape="rect" id="node36" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="452,160,595,201"/>
<area shape="rect" id="node40" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="659,453,777,479"/>
<area shape="rect" id="node42" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="454,226,593,253"/>
<area shape="rect" id="node45" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="454,352,593,393"/>
<area shape="rect" id="node46" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="655,289,781,315"/>
<area shape="rect" id="node47" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="448,109,599,135"/>
<area shape="rect" id="node49" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="465,418,581,445"/>
<area shape="rect" id="node22" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="658,661,778,687"/>
<area shape="rect" id="node25" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="653,720,783,761"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="855,679,996,720"/>
<area shape="rect" id="node24" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1078,569,1219,595"/>
<area shape="rect" id="node27" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="657,503,779,530"/>
<area shape="rect" id="node31" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="661,554,775,581"/>
<area shape="rect" id="node35" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="647,606,789,633"/>
<area shape="rect" id="node28" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="849,431,1002,472"/>
<area shape="rect" id="node29" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1061,410,1236,437"/>
<area shape="rect" id="node30" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1335,379,1412,406"/>
<area shape="rect" id="node32" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="854,496,997,537"/>
<area shape="rect" id="node33" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="837,627,1013,654"/>
<area shape="rect" id="node34" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="850,561,1001,603"/>
<area shape="rect" id="node37" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="872,187,979,214"/>
<area shape="rect" id="node39" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1305,71,1441,112"/>
<area shape="rect" id="node38" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="1543,187,1662,214"/>
<area shape="rect" id="node41" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1081,483,1216,524"/>
<area shape="rect" id="node43" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="1301,137,1446,163"/>
<area shape="rect" id="node44" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="647,223,789,264"/>
<area shape="rect" id="node48" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="1541,15,1664,56"/>
<area shape="rect" id="node50" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="1076,349,1221,375"/>
</map>
</div>

</div>
</div>
<a id="ac063361c980263bb8906571633cfcf2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac063361c980263bb8906571633cfcf2d">&#9670;&nbsp;</a></span>nilfs_sufile_set_suinfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t nilfs_sufile_set_suinfo </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>supsz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nsup</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>nilfs_sufile_set_suinfo - sets segment usage info : inode of segment usage file : array of suinfo_update : byte size of suinfo_update : size of suinfo_update array</p>
<p>Description: Takes an array of nilfs_suinfo_update structs and updates segment usage accordingly. Only the fields indicated by the sup_flags are updated.</p>
<p>Return Value: On success, 0 is returned. On error, one of the following negative error codes is returned.</p>
<p>%-EIO - I/O error.</p>
<p>%-ENOMEM - Insufficient amount of memory available.</p>
<p>%-EINVAL - Invalid values in input (segment number, flags or nblocks) </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_ac063361c980263bb8906571633cfcf2d_cgraph.png" border="0" usemap="#sufile_8c_ac063361c980263bb8906571633cfcf2d_cgraph" alt=""/></div>
<map name="sufile_8c_ac063361c980263bb8906571633cfcf2d_cgraph" id="sufile_8c_ac063361c980263bb8906571633cfcf2d_cgraph">
<area shape="rect" id="node2" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1765,877,1861,904"/>
<area shape="rect" id="node3" href="sufile_8c.html#a7df3cdff37c5aa00cca3458f1d7d400e" title="nilfs_sufile_get_header\l_block" alt="" coords="204,563,359,604"/>
<area shape="rect" id="node4" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="421,570,559,597"/>
<area shape="rect" id="node25" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="1547,688,1638,714"/>
<area shape="rect" id="node28" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1071,969,1193,996"/>
<area shape="rect" id="node40" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="1061,629,1203,656"/>
<area shape="rect" id="node46" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="1289,840,1437,866"/>
<area shape="rect" id="node48" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="1059,895,1205,936"/>
<area shape="rect" id="node50" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="407,984,573,1010"/>
<area shape="rect" id="node5" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="627,364,772,390"/>
<area shape="rect" id="node20" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="621,570,777,597"/>
<area shape="rect" id="node6" href="mdt_8c.html#a43ded315f7122596d14b88c43fe9c98d" title="nilfs_mdt_submit_block" alt="" coords="829,208,988,234"/>
<area shape="rect" id="node7" href="nilfs2_2page_8c.html#aa4a24cc5a684ba71b9e4423f2ea38970" title="nilfs_grab_buffer" alt="" coords="1073,309,1191,336"/>
<area shape="rect" id="node11" href="buffer_8c.html#a5fc92b2c44523c64e98193eaa4f46541" title="unlock_buffer" alt="" coords="1543,30,1643,57"/>
<area shape="rect" id="node12" href="nilfs2_2bmap_8h.html#a282d60470960949277ac67e31c97f05b" title="nilfs_bmap_lookup" alt="" coords="1067,208,1197,234"/>
<area shape="rect" id="node15" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1328,578,1399,605"/>
<area shape="rect" id="node16" href="buffer_8c.html#ade60786fa99b4fbb4cf607434af395db" title="end_buffer_read_sync" alt="" coords="1057,81,1207,108"/>
<area shape="rect" id="node18" href="buffer_8c.html#ab65df498c54845f497bae7afe9222c91" title="submit_bh" alt="" coords="1091,157,1173,184"/>
<area shape="rect" id="node8" href="nilfs2_2page_8c.html#a051d0268f3af219ba3e2a9ca79a8843c" title="__nilfs_get_page_block" alt="" coords="1284,350,1443,377"/>
<area shape="rect" id="node9" href="buffer_8c.html#a4844b8163e94b4a214fbf85d86fe88d0" title="create_empty_buffers" alt="" coords="1519,266,1667,293"/>
<area shape="rect" id="node10" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1743,132,1882,158"/>
<area shape="rect" id="node13" href="nilfs2_2bmap_8h.html#a47e39e91829ba28e44d1b0913f5ef480" title="nilfs_bmap_lookup_at\l_level" alt="" coords="1289,284,1437,326"/>
<area shape="rect" id="node14" href="nilfs2_2bmap_8h.html#abd107e6c373b3d12d3817a32d403001b" title="nilfs_bmap_get_dat" alt="" coords="1296,233,1431,260"/>
<area shape="rect" id="node17" href="buffer_8c.html#a85e290b32d9599acd25df3b159392ab7" title="__end_buffer_read_notouch" alt="" coords="1272,30,1455,57"/>
<area shape="rect" id="node19" href="buffer_8c.html#a5fd6f01c5f9cff0945cb999cbefa412d" title="submit_bh_wbc" alt="" coords="1307,182,1420,209"/>
<area shape="rect" id="node21" href="nilfs_8h.html#aacff7fe9750a849356475b2063b69e3b" title="nilfs_transaction_begin" alt="" coords="831,730,986,757"/>
<area shape="rect" id="node26" href="mdt_8c.html#a759ca943427ead8bb22ecdc82a9338ee" title="nilfs_mdt_insert_new\l_block" alt="" coords="836,563,981,604"/>
<area shape="rect" id="node41" href="nilfs_8h.html#a576ee8d20fe7a5d7c5889cb118fe0533" title="nilfs_transaction_commit" alt="" coords="825,448,992,474"/>
<area shape="rect" id="node45" href="nilfs_8h.html#a155140033fba0977ed043367001c3384" title="nilfs_transaction_abort" alt="" coords="832,629,985,656"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8c.html#ada0ba1bf162679380f6096c9f83b94ea" title="nilfs_prepare_segment_lock" alt="" coords="1040,680,1224,706"/>
<area shape="rect" id="node23" href="the__nilfs_8c.html#a137faca9117bfef2a2264ccf3a9aa809" title="nilfs_near_disk_full" alt="" coords="1065,730,1199,757"/>
<area shape="rect" id="node24" href="sufile_8c.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="1272,688,1455,714"/>
<area shape="rect" id="node27" href="nilfs2_2bmap_8c.html#a4e7fd87b553f99a5d10b2f1d0cbbec0b" title="nilfs_bmap_insert" alt="" coords="1070,528,1194,554"/>
<area shape="rect" id="node29" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1303,1008,1424,1034"/>
<area shape="rect" id="node31" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1296,1176,1431,1202"/>
<area shape="rect" id="node30" href="buffer_8c.html#ae236845de65ed065f74eecf8f6ee9742" title="EXPORT_SYMBOL_GPL" alt="" coords="1507,1008,1679,1034"/>
<area shape="rect" id="node32" href="fs-writeback_8c.html#af5890cdc0a937a4f944928bd1880d49b" title="block_dump___mark_inode\l_dirty" alt="" coords="1503,1227,1683,1268"/>
<area shape="rect" id="node35" href="fs-writeback_8c.html#ad0ca24311e1c0ba76d3810d240f72b08" title="locked_inode_to_wb\l_and_lock_list" alt="" coords="1523,1110,1663,1151"/>
<area shape="rect" id="node36" href="fs-writeback_8c.html#a2a36a21e075aa2a912f5c3cb027692cf" title="inode_io_list_move\l_locked" alt="" coords="1526,1292,1659,1334"/>
<area shape="rect" id="node39" href="fs-writeback_8c.html#a044f1d7ff09b03f639232ec0e6a88ee1" title="EXPORT_SYMBOL" alt="" coords="1523,1176,1662,1202"/>
<area shape="rect" id="node33" href="dcache_8c.html#a9f042046c19f277000ddfc09b02e3633" title="d_find_alias" alt="" coords="1767,1188,1858,1214"/>
<area shape="rect" id="node34" href="dcache_8c.html#aebcca358185b5176b69b97e7eab12dfd" title="dput" alt="" coords="1789,1238,1836,1265"/>
<area shape="rect" id="node37" href="fs-writeback_8c.html#ad9e6fcccf4baffa8e6c91881c6e428a9" title="wb_io_lists_populated" alt="" coords="1737,1296,1888,1322"/>
<area shape="rect" id="node38" href="fs-writeback_8c.html#aa31b94b7a70c8c8d396a5f0f3e8ef1ec" title="wb_io_lists_depopulated" alt="" coords="1731,1346,1895,1373"/>
<area shape="rect" id="node42" href="nilfs2_2segment_8c.html#aa55509ef3ea01cc74488f916f1d551f3" title="nilfs_segctor_start\l_timer" alt="" coords="1067,411,1197,452"/>
<area shape="rect" id="node43" href="nilfs2_2segment_8c.html#a23c179e5f28f728a442e31641f71c795" title="nilfs_segctor_do_flush" alt="" coords="1056,477,1208,504"/>
<area shape="rect" id="node44" href="nilfs2_2segment_8c.html#ad8bab60b16b37c93e180e1ea3e1580ad" title="nilfs_construct_segment" alt="" coords="1050,360,1214,386"/>
<area shape="rect" id="node47" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="1522,840,1663,882"/>
<area shape="rect" id="node49" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="1289,902,1438,929"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_ac063361c980263bb8906571633cfcf2d_icgraph.png" border="0" usemap="#sufile_8c_ac063361c980263bb8906571633cfcf2d_icgraph" alt=""/></div>
<map name="sufile_8c_ac063361c980263bb8906571633cfcf2d_icgraph" id="sufile_8c_ac063361c980263bb8906571633cfcf2d_icgraph">
<area shape="rect" id="node2" href="nilfs2_2ioctl_8c.html#a879fc213e33210988660173aec449143" title="nilfs_ioctl_set_suinfo" alt="" coords="222,140,366,167"/>
<area shape="rect" id="node11" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="204,331,384,358"/>
<area shape="rect" id="node3" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1319,144,1396,171"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1932,195,2052,222"/>
<area shape="rect" id="node5" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2108,195,2223,222"/>
<area shape="rect" id="node10" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2100,246,2231,272"/>
<area shape="rect" id="node6" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="2283,119,2373,146"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="2282,170,2374,196"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="2279,220,2377,247"/>
<area shape="rect" id="node9" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="2285,271,2371,298"/>
<area shape="rect" id="node12" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="439,382,576,408"/>
<area shape="rect" id="node24" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="442,507,573,534"/>
<area shape="rect" id="node36" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="436,73,579,114"/>
<area shape="rect" id="node40" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="643,544,761,571"/>
<area shape="rect" id="node42" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="438,280,577,307"/>
<area shape="rect" id="node45" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="438,214,577,256"/>
<area shape="rect" id="node46" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="639,151,765,178"/>
<area shape="rect" id="node47" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="432,331,583,358"/>
<area shape="rect" id="node49" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="449,558,565,584"/>
<area shape="rect" id="node13" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="642,370,762,396"/>
<area shape="rect" id="node22" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="637,421,767,462"/>
<area shape="rect" id="node14" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="839,293,980,334"/>
<area shape="rect" id="node15" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1062,418,1203,444"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1268,491,1447,518"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1512,338,1661,380"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1727,564,1884,591"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1495,542,1679,584"/>
<area shape="rect" id="node18" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="1753,195,1858,222"/>
<area shape="rect" id="node19" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="1747,346,1863,372"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1067,484,1199,525"/>
<area shape="rect" id="node25" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="641,659,763,686"/>
<area shape="rect" id="node31" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="645,494,759,520"/>
<area shape="rect" id="node35" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="631,595,773,622"/>
<area shape="rect" id="node26" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="833,696,986,737"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1045,703,1220,730"/>
<area shape="rect" id="node28" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1319,703,1396,730"/>
<area shape="rect" id="node29" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1534,703,1639,730"/>
<area shape="rect" id="node30" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1528,638,1645,664"/>
<area shape="rect" id="node32" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="838,528,981,569"/>
<area shape="rect" id="node33" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="821,594,997,620"/>
<area shape="rect" id="node34" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="834,410,985,452"/>
<area shape="rect" id="node37" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="856,50,963,76"/>
<area shape="rect" id="node39" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1065,105,1201,146"/>
<area shape="rect" id="node38" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="1073,51,1192,78"/>
<area shape="rect" id="node41" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1065,600,1200,641"/>
<area shape="rect" id="node43" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="837,183,982,210"/>
<area shape="rect" id="node44" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="631,253,773,294"/>
<area shape="rect" id="node48" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="1071,234,1194,276"/>
<area shape="rect" id="node50" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="837,762,982,788"/>
</map>
</div>

</div>
</div>
<a id="a202058a1d5a7ee3658e8e7cda1ffee37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a202058a1d5a7ee3658e8e7cda1ffee37">&#9670;&nbsp;</a></span>nilfs_sufile_trim_fs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nilfs_sufile_trim_fs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct fstrim_range *&#160;</td>
          <td class="paramname"><em>range</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="sufile_8c.html#a202058a1d5a7ee3658e8e7cda1ffee37">nilfs_sufile_trim_fs()</a> - trim ioctl handle function : inode of segment usage file : fstrim_range structure</p>
<p>start: First Byte to trim len: number of Bytes to trim from start minlen: minimum extent length in Bytes</p>
<p>Decription: nilfs_sufile_trim_fs goes through all segments containing bytes from start to start+len. start is rounded up to the next block boundary and start+len is rounded down. For each clean segment blkdev_issue_discard function is invoked.</p>
<p>Return Value: On success, 0 is returned or negative error code, otherwise. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a202058a1d5a7ee3658e8e7cda1ffee37_cgraph.png" border="0" usemap="#sufile_8c_a202058a1d5a7ee3658e8e7cda1ffee37_cgraph" alt=""/></div>
<map name="sufile_8c_a202058a1d5a7ee3658e8e7cda1ffee37_cgraph" id="sufile_8c_a202058a1d5a7ee3658e8e7cda1ffee37_cgraph">
<area shape="rect" id="node2" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="821,195,917,222"/>
<area shape="rect" id="node3" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033" title="nblocks" alt="" coords="234,71,301,98"/>
<area shape="rect" id="node4" href="the__nilfs_8h.html#acbe15a8b57f8ecf5e4777294c2f7303d" title="nilfs_get_segnum_of\l_block" alt="" coords="196,123,339,164"/>
<area shape="rect" id="node5" href="sufile_8c.html#a34ecb984fd0f57101d2ee0b4bde4bf95" title="nilfs_sufile_segment\l_usages_in_block" alt="" coords="197,188,338,229"/>
<area shape="rect" id="node8" href="sufile_8c.html#a38f2abf7ef7577b1af4b9e8fc9316727" title="nilfs_sufile_get_segment\l_usage_block" alt="" coords="184,305,351,347"/>
<area shape="rect" id="node49" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="194,5,341,47"/>
<area shape="rect" id="node50" href="the__nilfs_8h.html#a0dc161eb6c4f6bad9212b67517b46a37" title="nilfs_get_segment_range" alt="" coords="184,371,351,398"/>
<area shape="rect" id="node6" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="598,188,739,229"/>
<area shape="rect" id="node7" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="399,139,548,166"/>
<area shape="rect" id="node9" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="404,355,543,382"/>
<area shape="rect" id="node48" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="399,305,547,331"/>
<area shape="rect" id="node10" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="596,485,741,511"/>
<area shape="rect" id="node30" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="791,301,947,327"/>
<area shape="rect" id="node11" href="mdt_8c.html#a43ded315f7122596d14b88c43fe9c98d" title="nilfs_mdt_submit_block" alt="" coords="789,689,948,715"/>
<area shape="rect" id="node12" href="nilfs2_2page_8c.html#aa4a24cc5a684ba71b9e4423f2ea38970" title="nilfs_grab_buffer" alt="" coords="1020,399,1139,426"/>
<area shape="rect" id="node18" href="buffer_8c.html#a5fc92b2c44523c64e98193eaa4f46541" title="unlock_buffer" alt="" coords="1484,882,1584,909"/>
<area shape="rect" id="node19" href="nilfs2_2bmap_8h.html#a282d60470960949277ac67e31c97f05b" title="nilfs_bmap_lookup" alt="" coords="1014,773,1145,799"/>
<area shape="rect" id="node25" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1499,391,1569,418"/>
<area shape="rect" id="node26" href="buffer_8c.html#ade60786fa99b4fbb4cf607434af395db" title="end_buffer_read_sync" alt="" coords="1004,933,1155,959"/>
<area shape="rect" id="node28" href="buffer_8c.html#ab65df498c54845f497bae7afe9222c91" title="submit_bh" alt="" coords="1038,689,1121,715"/>
<area shape="rect" id="node13" href="nilfs2_2page_8c.html#a051d0268f3af219ba3e2a9ca79a8843c" title="__nilfs_get_page_block" alt="" coords="1223,551,1382,578"/>
<area shape="rect" id="node14" href="buffer_8c.html#a4844b8163e94b4a214fbf85d86fe88d0" title="create_empty_buffers" alt="" coords="1460,675,1608,702"/>
<area shape="rect" id="node16" href="page_8h.html#aaad58f68fa9675f7e9803744d0e3f414" title="nilfs_page_get_nth\l_block" alt="" coords="1469,544,1599,585"/>
<area shape="rect" id="node17" href="buffer_8c.html#a59a45ba914a951c36f0cabe79be9756b" title="touch_buffer" alt="" coords="1487,493,1581,519"/>
<area shape="rect" id="node15" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1673,701,1812,727"/>
<area shape="rect" id="node20" href="nilfs2_2bmap_8h.html#a47e39e91829ba28e44d1b0913f5ef480" title="nilfs_bmap_lookup_at\l_level" alt="" coords="1229,765,1377,807"/>
<area shape="rect" id="node24" href="nilfs2_2bmap_8h.html#abd107e6c373b3d12d3817a32d403001b" title="nilfs_bmap_get_dat" alt="" coords="1235,831,1370,858"/>
<area shape="rect" id="node21" href="nilfs2_2bmap_8c.html#a7a7ea41075313d317e5036ebc1fbbe3b" title="nilfs_bmap_convert\l_error" alt="" coords="1467,609,1601,651"/>
<area shape="rect" id="node22" href="dat_8c.html#a1641d48ed89a1de35dda5513abd31cc3" title="nilfs_dat_translate" alt="" coords="1470,827,1598,854"/>
<area shape="rect" id="node23" href="nilfs2_2bmap_8c.html#aef6e9d2acff7b7d161389bb790483d06" title="nilfs_bmap_get_dat" alt="" coords="1467,777,1601,803"/>
<area shape="rect" id="node27" href="buffer_8c.html#a85e290b32d9599acd25df3b159392ab7" title="__end_buffer_read_notouch" alt="" coords="1211,933,1394,959"/>
<area shape="rect" id="node29" href="buffer_8c.html#a5fd6f01c5f9cff0945cb999cbefa412d" title="submit_bh_wbc" alt="" coords="1246,663,1359,690"/>
<area shape="rect" id="node31" href="nilfs_8h.html#aacff7fe9750a849356475b2063b69e3b" title="nilfs_transaction_begin" alt="" coords="1002,250,1157,277"/>
<area shape="rect" id="node35" href="mdt_8c.html#a759ca943427ead8bb22ecdc82a9338ee" title="nilfs_mdt_insert_new\l_block" alt="" coords="1007,333,1152,375"/>
<area shape="rect" id="node42" href="nilfs_8h.html#a576ee8d20fe7a5d7c5889cb118fe0533" title="nilfs_transaction_commit" alt="" coords="996,127,1163,154"/>
<area shape="rect" id="node47" href="nilfs_8h.html#a155140033fba0977ed043367001c3384" title="nilfs_transaction_abort" alt="" coords="1003,199,1156,226"/>
<area shape="rect" id="node32" href="nilfs2_2segment_8c.html#ada0ba1bf162679380f6096c9f83b94ea" title="nilfs_prepare_segment_lock" alt="" coords="1211,239,1395,266"/>
<area shape="rect" id="node33" href="the__nilfs_8c.html#a137faca9117bfef2a2264ccf3a9aa809" title="nilfs_near_disk_full" alt="" coords="1236,189,1369,215"/>
<area shape="rect" id="node34" href="sufile_8c.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="1443,189,1625,215"/>
<area shape="rect" id="node36" href="nilfs2_2bmap_8c.html#a4e7fd87b553f99a5d10b2f1d0cbbec0b" title="nilfs_bmap_insert" alt="" coords="1241,501,1365,527"/>
<area shape="rect" id="node38" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1241,290,1364,317"/>
<area shape="rect" id="node41" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="1231,391,1374,418"/>
<area shape="rect" id="node37" href="nilfs2_2bmap_8c.html#ac5f71baa604f8d2043ceb4c11aa72ff3" title="nilfs_bmap_do_insert" alt="" coords="1461,442,1607,469"/>
<area shape="rect" id="node39" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1473,239,1595,266"/>
<area shape="rect" id="node40" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1467,290,1601,317"/>
<area shape="rect" id="node43" href="nilfs2_2segment_8c.html#aa55509ef3ea01cc74488f916f1d551f3" title="nilfs_segctor_start\l_timer" alt="" coords="1238,21,1367,63"/>
<area shape="rect" id="node44" href="nilfs2_2segment_8c.html#a23c179e5f28f728a442e31641f71c795" title="nilfs_segctor_do_flush" alt="" coords="1227,87,1379,114"/>
<area shape="rect" id="node45" href="nilfs2_2segment_8c.html#ad8bab60b16b37c93e180e1ea3e1580ad" title="nilfs_construct_segment" alt="" coords="1221,138,1385,165"/>
<area shape="rect" id="node46" href="nilfs2_2segment_8c.html#aece5ba8b7c1a8df29083370bfb0f3aad" title="nilfs_segctor_sync" alt="" coords="1469,138,1599,165"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a202058a1d5a7ee3658e8e7cda1ffee37_icgraph.png" border="0" usemap="#sufile_8c_a202058a1d5a7ee3658e8e7cda1ffee37_icgraph" alt=""/></div>
<map name="sufile_8c_a202058a1d5a7ee3658e8e7cda1ffee37_icgraph" id="sufile_8c_a202058a1d5a7ee3658e8e7cda1ffee37_icgraph">
<area shape="rect" id="node2" href="nilfs2_2ioctl_8c.html#a8913a80e32e55bd55c20461949a3e6b6" title="nilfs_ioctl_trim_fs" alt="" coords="212,140,336,167"/>
<area shape="rect" id="node11" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="184,331,364,358"/>
<area shape="rect" id="node3" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1299,144,1376,171"/>
<area shape="rect" id="node4" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="1912,195,2032,222"/>
<area shape="rect" id="node5" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2088,195,2203,222"/>
<area shape="rect" id="node10" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2080,246,2211,272"/>
<area shape="rect" id="node6" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="2263,119,2353,146"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="2262,170,2354,196"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="2259,220,2357,247"/>
<area shape="rect" id="node9" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="2265,271,2351,298"/>
<area shape="rect" id="node12" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="419,382,556,408"/>
<area shape="rect" id="node24" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="422,507,553,534"/>
<area shape="rect" id="node36" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="416,73,559,114"/>
<area shape="rect" id="node40" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="623,544,741,571"/>
<area shape="rect" id="node42" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="418,280,557,307"/>
<area shape="rect" id="node45" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="418,214,557,256"/>
<area shape="rect" id="node46" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="619,151,745,178"/>
<area shape="rect" id="node47" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="412,331,563,358"/>
<area shape="rect" id="node49" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="429,558,545,584"/>
<area shape="rect" id="node13" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="622,370,742,396"/>
<area shape="rect" id="node22" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="617,421,747,462"/>
<area shape="rect" id="node14" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="819,293,960,334"/>
<area shape="rect" id="node15" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1042,418,1183,444"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1248,491,1427,518"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1492,338,1641,380"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1707,564,1864,591"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1475,542,1659,584"/>
<area shape="rect" id="node18" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="1733,195,1838,222"/>
<area shape="rect" id="node19" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="1727,346,1843,372"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1047,484,1179,525"/>
<area shape="rect" id="node25" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="621,659,743,686"/>
<area shape="rect" id="node31" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="625,494,739,520"/>
<area shape="rect" id="node35" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="611,595,753,622"/>
<area shape="rect" id="node26" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="813,696,966,737"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1025,703,1200,730"/>
<area shape="rect" id="node28" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1299,703,1376,730"/>
<area shape="rect" id="node29" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1514,703,1619,730"/>
<area shape="rect" id="node30" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1508,638,1625,664"/>
<area shape="rect" id="node32" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="818,528,961,569"/>
<area shape="rect" id="node33" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="801,594,977,620"/>
<area shape="rect" id="node34" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="814,410,965,452"/>
<area shape="rect" id="node37" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="836,50,943,76"/>
<area shape="rect" id="node39" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1045,105,1181,146"/>
<area shape="rect" id="node38" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="1053,51,1172,78"/>
<area shape="rect" id="node41" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1045,600,1180,641"/>
<area shape="rect" id="node43" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="817,183,962,210"/>
<area shape="rect" id="node44" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="611,253,753,294"/>
<area shape="rect" id="node48" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="1051,234,1174,276"/>
<area shape="rect" id="node50" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="817,762,962,788"/>
</map>
</div>

</div>
</div>
<a id="a06bf3b2669ffdbe7c8809d8c3b730cbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06bf3b2669ffdbe7c8809d8c3b730cbc">&#9670;&nbsp;</a></span>nilfs_sufile_truncate_range()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_sufile_truncate_range </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64&#160;</td>
          <td class="paramname"><em>end</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>nilfs_sufile_truncate_range - truncate range of segment array : inode of segment usage file : start segment number (inclusive) : end segment number (inclusive)</p>
<p>Return Value: On success, 0 is returned. On error, one of the following negative error codes is returned.</p>
<p>%-EIO - I/O error.</p>
<p>%-ENOMEM - Insufficient amount of memory available.</p>
<p>%-EINVAL - Invalid number of segments specified</p>
<p>%-EBUSY - Dirty or active segments are present in the range </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a06bf3b2669ffdbe7c8809d8c3b730cbc_cgraph.png" border="0" usemap="#sufile_8c_a06bf3b2669ffdbe7c8809d8c3b730cbc_cgraph" alt=""/></div>
<map name="sufile_8c_a06bf3b2669ffdbe7c8809d8c3b730cbc_cgraph" id="sufile_8c_a06bf3b2669ffdbe7c8809d8c3b730cbc_cgraph">
<area shape="rect" id="node2" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1284,1528,1380,1555"/>
<area shape="rect" id="node3" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="192,1304,372,1331"/>
<area shape="rect" id="node5" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="692,651,783,677"/>
<area shape="rect" id="node8" href="sufile_8c.html#a7df3cdff37c5aa00cca3458f1d7d400e" title="nilfs_sufile_get_header\l_block" alt="" coords="660,1579,815,1621"/>
<area shape="rect" id="node10" href="sufile_8c.html#a38f2abf7ef7577b1af4b9e8fc9316727" title="nilfs_sufile_get_segment\l_usage_block" alt="" coords="654,1645,821,1686"/>
<area shape="rect" id="node12" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="1082,1965,1223,2006"/>
<area shape="rect" id="node13" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="664,1411,811,1453"/>
<area shape="rect" id="node14" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="872,1964,1021,1991"/>
<area shape="rect" id="node16" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="885,879,1008,905"/>
<area shape="rect" id="node20" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="666,955,809,981"/>
<area shape="rect" id="node27" href="the__nilfs_8h.html#a51bb53199a62a87f269e03404136d00f" title="nilfs_segment_is_active" alt="" coords="656,2452,819,2479"/>
<area shape="rect" id="node29" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="654,803,821,829"/>
<area shape="rect" id="node49" href="sufile_8c.html#a6c6906f2fa7470c98e36fadfed86c294" title="nilfs_sufile_delete\l_segment_usage_block" alt="" coords="203,1414,361,1455"/>
<area shape="rect" id="node4" href="sufile_8h.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="420,787,603,813"/>
<area shape="rect" id="node6" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="440,569,583,610"/>
<area shape="rect" id="node7" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="452,1419,571,1445"/>
<area shape="rect" id="node22" href="sufile_8h.html#ae5c9db186be6baf07d66e049a0fd9b9b" title="nilfs_sufile_mark_dirty" alt="" coords="435,1240,587,1267"/>
<area shape="rect" id="node23" href="sufile_8h.html#ac6379742426c30d02072b1a5b0f527f8" title="nilfs_sufile_set_segment\l_usage" alt="" coords="428,1297,595,1338"/>
<area shape="rect" id="node24" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033" title="nblocks" alt="" coords="704,2199,771,2225"/>
<area shape="rect" id="node25" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="442,1621,581,1648"/>
<area shape="rect" id="node26" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="436,2155,587,2181"/>
<area shape="rect" id="node28" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687" title="nilfs_sufile_set_suinfo" alt="" coords="436,1168,587,1195"/>
<area shape="rect" id="node30" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="443,1571,580,1597"/>
<area shape="rect" id="node31" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="446,1469,577,1496"/>
<area shape="rect" id="node32" href="sufile_8h.html#acad60c93c0f7f6c3a8a9dc843107f1ed" title="nilfs_sufile_do_scrap" alt="" coords="439,904,583,931"/>
<area shape="rect" id="node33" href="sufile_8h.html#a577d0d35a7907909b6c0a139d8cc1704" title="nilfs_sufile_do_free" alt="" coords="444,955,579,981"/>
<area shape="rect" id="node34" href="sufile_8h.html#aff87ff4257115842ff3c7940e5f8e769" title="nilfs_sufile_do_cancel_free" alt="" coords="422,1005,601,1032"/>
<area shape="rect" id="node35" href="sufile_8h.html#a7e943e59486cd6176a3317bed589b7c9" title="nilfs_sufile_do_set\l_error" alt="" coords="446,838,577,879"/>
<area shape="rect" id="node36" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="448,635,575,661"/>
<area shape="rect" id="node39" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="453,685,569,712"/>
<area shape="rect" id="node46" href="sufile_8h.html#a202058a1d5a7ee3658e8e7cda1ffee37" title="nilfs_sufile_trim_fs" alt="" coords="446,1980,577,2007"/>
<area shape="rect" id="node15" href="sufile_8c.html#a34ecb984fd0f57101d2ee0b4bde4bf95" title="nilfs_sufile_segment\l_usages_in_block" alt="" coords="667,1914,808,1955"/>
<area shape="rect" id="node9" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="877,1620,1016,1647"/>
<area shape="rect" id="node11" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="873,1812,1021,1839"/>
<area shape="rect" id="node17" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1092,879,1213,905"/>
<area shape="rect" id="node18" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1085,929,1220,956"/>
<area shape="rect" id="node19" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1083,828,1222,855"/>
<area shape="rect" id="node21" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="911,828,982,855"/>
<area shape="rect" id="node37" href="the__nilfs_8c.html#aa7bf85e7bb9022b3680b22d945d17f91" title="nilfs_nrsvsegs" alt="" coords="893,220,1000,247"/>
<area shape="rect" id="node38" href="the__nilfs_8c.html#a38632ac69509070865038bf0120a1509" title="nilfs_set_nsegments" alt="" coords="666,245,809,272"/>
<area shape="rect" id="node40" href="nilfs2_2inode_8c.html#ae758d8edf633a8af3535ac0af248f1d1" title="nilfs_iget_locked" alt="" coords="678,499,797,525"/>
<area shape="rect" id="node41" href="mdt_8c.html#a9d24c6e56a98e581fc30fd8a65841e2a" title="nilfs_mdt_init" alt="" coords="688,549,787,576"/>
<area shape="rect" id="node42" href="mdt_8c.html#ae0d853ce1775f22eb93823f6423e6fac" title="nilfs_mdt_set_entry_size" alt="" coords="1069,549,1236,576"/>
<area shape="rect" id="node43" href="nilfs2_2inode_8c.html#affec0e84c605c1d9028332974ba58cd3" title="nilfs_read_inode_common" alt="" coords="651,600,824,627"/>
<area shape="rect" id="node44" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="882,347,1011,373"/>
<area shape="rect" id="node45" href="bad__inode_8c.html#a8c027cf52e2b7669b11b0bfa09bbcd45" title="iget_failed" alt="" coords="697,397,778,424"/>
<area shape="rect" id="node47" href="the__nilfs_8h.html#acbe15a8b57f8ecf5e4777294c2f7303d" title="nilfs_get_segnum_of\l_block" alt="" coords="666,2031,809,2073"/>
<area shape="rect" id="node48" href="the__nilfs_8h.html#a0dc161eb6c4f6bad9212b67517b46a37" title="nilfs_get_segment_range" alt="" coords="654,2097,821,2124"/>
<area shape="rect" id="node50" href="mdt_8c.html#a920f1cd6bb101e5f43a349fe7531e096" title="nilfs_mdt_delete_block" alt="" coords="434,1107,589,1133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_a06bf3b2669ffdbe7c8809d8c3b730cbc_icgraph.png" border="0" usemap="#sufile_8c_a06bf3b2669ffdbe7c8809d8c3b730cbc_icgraph" alt=""/></div>
<map name="sufile_8c_a06bf3b2669ffdbe7c8809d8c3b730cbc_icgraph" id="sufile_8c_a06bf3b2669ffdbe7c8809d8c3b730cbc_icgraph">
<area shape="rect" id="node2" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="192,299,319,325"/>
<area shape="rect" id="node3" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="811,29,918,56"/>
<area shape="rect" id="node13" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="367,324,547,351"/>
<area shape="rect" id="node4" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="1013,5,1131,32"/>
<area shape="rect" id="node5" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1257,129,1334,156"/>
<area shape="rect" id="node6" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="2109,180,2229,207"/>
<area shape="rect" id="node7" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2299,180,2413,207"/>
<area shape="rect" id="node12" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2291,129,2421,156"/>
<area shape="rect" id="node8" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="2474,104,2563,131"/>
<area shape="rect" id="node9" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="2473,155,2565,181"/>
<area shape="rect" id="node10" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="2469,205,2568,232"/>
<area shape="rect" id="node11" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="2476,256,2561,283"/>
<area shape="rect" id="node14" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="601,324,739,351"/>
<area shape="rect" id="node28" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="605,404,735,431"/>
<area shape="rect" id="node40" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="599,114,741,155"/>
<area shape="rect" id="node42" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="805,567,924,593"/>
<area shape="rect" id="node44" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="601,273,739,300"/>
<area shape="rect" id="node47" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="595,223,745,249"/>
<area shape="rect" id="node49" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="612,529,728,556"/>
<area shape="rect" id="node15" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="805,364,925,391"/>
<area shape="rect" id="node26" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="800,298,929,339"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="1001,341,1143,382"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1225,464,1366,491"/>
<area shape="rect" id="node18" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1431,461,1609,488"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1675,354,1824,395"/>
<area shape="rect" id="node22" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1889,537,2047,564"/>
<area shape="rect" id="node25" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1657,446,1841,487"/>
<area shape="rect" id="node20" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="1915,257,2021,284"/>
<area shape="rect" id="node21" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="1910,361,2026,388"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="2095,567,2243,593"/>
<area shape="rect" id="node24" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="2099,501,2238,542"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1229,398,1361,439"/>
<area shape="rect" id="node29" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="803,516,926,543"/>
<area shape="rect" id="node35" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="808,465,921,492"/>
<area shape="rect" id="node39" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="793,415,936,441"/>
<area shape="rect" id="node30" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="995,589,1149,630"/>
<area shape="rect" id="node31" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1208,593,1383,620"/>
<area shape="rect" id="node32" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1481,597,1559,624"/>
<area shape="rect" id="node33" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1697,613,1802,640"/>
<area shape="rect" id="node34" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1691,563,1808,589"/>
<area shape="rect" id="node36" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="1001,523,1143,565"/>
<area shape="rect" id="node37" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="984,407,1160,433"/>
<area shape="rect" id="node38" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="997,458,1147,499"/>
<area shape="rect" id="node41" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1004,57,1140,98"/>
<area shape="rect" id="node43" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1228,645,1363,686"/>
<area shape="rect" id="node45" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="999,188,1145,215"/>
<area shape="rect" id="node46" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="793,233,936,274"/>
<area shape="rect" id="node48" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="1011,122,1133,163"/>
<area shape="rect" id="node50" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="1223,711,1368,737"/>
</map>
</div>

</div>
</div>
<a id="afe69341b840700471e118f002ea07d84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe69341b840700471e118f002ea07d84">&#9670;&nbsp;</a></span>nilfs_sufile_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nilfs_sufile_update </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64&#160;</td>
          <td class="paramname"><em>segnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>create</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *, __u64, struct buffer_head *, struct buffer_head *)&#160;</td>
          <td class="paramname"><em>dofunc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_afe69341b840700471e118f002ea07d84_cgraph.png" border="0" usemap="#sufile_8c_afe69341b840700471e118f002ea07d84_cgraph" alt=""/></div>
<map name="sufile_8c_afe69341b840700471e118f002ea07d84_cgraph" id="sufile_8c_afe69341b840700471e118f002ea07d84_cgraph">
<area shape="rect" id="node2" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="184,1372,364,1399"/>
<area shape="rect" id="node5" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1509,1079,1605,1105"/>
<area shape="rect" id="node8" href="sufile_8c.html#a7df3cdff37c5aa00cca3458f1d7d400e" title="nilfs_sufile_get_header\l_block" alt="" coords="879,870,1033,911"/>
<area shape="rect" id="node12" href="sufile_8c.html#a38f2abf7ef7577b1af4b9e8fc9316727" title="nilfs_sufile_get_segment\l_usage_block" alt="" coords="873,1038,1039,1079"/>
<area shape="rect" id="node3" href="sufile_8h.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="412,1632,595,1659"/>
<area shape="rect" id="node6" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="432,1094,575,1135"/>
<area shape="rect" id="node7" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="673,1497,791,1524"/>
<area shape="rect" id="node23" href="sufile_8h.html#ae5c9db186be6baf07d66e049a0fd9b9b" title="nilfs_sufile_mark_dirty" alt="" coords="656,2099,808,2125"/>
<area shape="rect" id="node24" href="sufile_8h.html#ac6379742426c30d02072b1a5b0f527f8" title="nilfs_sufile_set_segment\l_usage" alt="" coords="649,1815,815,1857"/>
<area shape="rect" id="node25" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033" title="nblocks" alt="" coords="923,397,989,424"/>
<area shape="rect" id="node26" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="434,1043,573,1069"/>
<area shape="rect" id="node27" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="657,1347,807,1373"/>
<area shape="rect" id="node29" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687" title="nilfs_sufile_set_suinfo" alt="" coords="657,1440,807,1467"/>
<area shape="rect" id="node31" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="663,680,801,707"/>
<area shape="rect" id="node32" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="667,925,797,952"/>
<area shape="rect" id="node33" href="sufile_8h.html#acad60c93c0f7f6c3a8a9dc843107f1ed" title="nilfs_sufile_do_scrap" alt="" coords="660,1947,804,1973"/>
<area shape="rect" id="node34" href="sufile_8h.html#a577d0d35a7907909b6c0a139d8cc1704" title="nilfs_sufile_do_free" alt="" coords="665,2048,799,2075"/>
<area shape="rect" id="node35" href="sufile_8h.html#aff87ff4257115842ff3c7940e5f8e769" title="nilfs_sufile_do_cancel_free" alt="" coords="643,1997,821,2024"/>
<area shape="rect" id="node36" href="sufile_8h.html#a7e943e59486cd6176a3317bed589b7c9" title="nilfs_sufile_do_set\l_error" alt="" coords="667,1881,797,1922"/>
<area shape="rect" id="node37" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="440,2125,567,2152"/>
<area shape="rect" id="node41" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="674,271,790,297"/>
<area shape="rect" id="node48" href="sufile_8h.html#a202058a1d5a7ee3658e8e7cda1ffee37" title="nilfs_sufile_trim_fs" alt="" coords="667,761,797,788"/>
<area shape="rect" id="node4" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="911,1845,1001,1872"/>
<area shape="rect" id="node15" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="883,1678,1029,1719"/>
<area shape="rect" id="node17" href="sufile_8c.html#a34ecb984fd0f57101d2ee0b4bde4bf95" title="nilfs_sufile_segment\l_usages_in_block" alt="" coords="885,1257,1027,1298"/>
<area shape="rect" id="node18" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1113,2048,1235,2075"/>
<area shape="rect" id="node22" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="885,2099,1027,2125"/>
<area shape="rect" id="node9" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="1105,903,1243,929"/>
<area shape="rect" id="node10" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="1311,928,1456,955"/>
<area shape="rect" id="node11" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="1305,877,1461,904"/>
<area shape="rect" id="node13" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="1100,1053,1248,1080"/>
<area shape="rect" id="node14" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="1313,1221,1454,1262"/>
<area shape="rect" id="node16" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="1099,1357,1249,1384"/>
<area shape="rect" id="node19" href="buffer_8c.html#a458aadaed6fe3384c18ac175e19fefd4" title="__set_page_dirty" alt="" coords="1323,2048,1444,2075"/>
<area shape="rect" id="node20" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="1316,2099,1451,2125"/>
<area shape="rect" id="node21" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="1314,1997,1453,2024"/>
<area shape="rect" id="node28" href="the__nilfs_8h.html#a51bb53199a62a87f269e03404136d00f" title="nilfs_segment_is_active" alt="" coords="875,1424,1037,1451"/>
<area shape="rect" id="node30" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="873,2048,1039,2075"/>
<area shape="rect" id="node38" href="the__nilfs_8c.html#aa7bf85e7bb9022b3680b22d945d17f91" title="nilfs_nrsvsegs" alt="" coords="903,2403,1009,2429"/>
<area shape="rect" id="node39" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="663,1597,801,1638"/>
<area shape="rect" id="node40" href="the__nilfs_8c.html#a38632ac69509070865038bf0120a1509" title="nilfs_set_nsegments" alt="" coords="661,2352,803,2379"/>
<area shape="rect" id="node42" href="nilfs2_2inode_8c.html#ae758d8edf633a8af3535ac0af248f1d1" title="nilfs_iget_locked" alt="" coords="897,245,1015,272"/>
<area shape="rect" id="node43" href="mdt_8c.html#a9d24c6e56a98e581fc30fd8a65841e2a" title="nilfs_mdt_init" alt="" coords="907,93,1005,120"/>
<area shape="rect" id="node44" href="mdt_8c.html#ae0d853ce1775f22eb93823f6423e6fac" title="nilfs_mdt_set_entry_size" alt="" coords="1091,296,1257,323"/>
<area shape="rect" id="node45" href="nilfs2_2inode_8c.html#affec0e84c605c1d9028332974ba58cd3" title="nilfs_read_inode_common" alt="" coords="869,195,1043,221"/>
<area shape="rect" id="node46" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="1109,93,1239,120"/>
<area shape="rect" id="node47" href="bad__inode_8c.html#a8c027cf52e2b7669b11b0bfa09bbcd45" title="iget_failed" alt="" coords="915,43,997,69"/>
<area shape="rect" id="node49" href="the__nilfs_8h.html#acbe15a8b57f8ecf5e4777294c2f7303d" title="nilfs_get_segnum_of\l_block" alt="" coords="885,753,1027,794"/>
<area shape="rect" id="node50" href="the__nilfs_8h.html#a0dc161eb6c4f6bad9212b67517b46a37" title="nilfs_get_segment_range" alt="" coords="873,701,1039,728"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_afe69341b840700471e118f002ea07d84_icgraph.png" border="0" usemap="#sufile_8c_afe69341b840700471e118f002ea07d84_icgraph" alt=""/></div>
<map name="sufile_8c_afe69341b840700471e118f002ea07d84_icgraph" id="sufile_8c_afe69341b840700471e118f002ea07d84_icgraph">
<area shape="rect" id="node2" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="184,335,364,361"/>
<area shape="rect" id="node25" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="621,489,743,516"/>
<area shape="rect" id="node31" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="625,548,739,575"/>
<area shape="rect" id="node35" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="611,751,753,777"/>
<area shape="rect" id="node3" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="419,641,556,668"/>
<area shape="rect" id="node24" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="422,489,553,516"/>
<area shape="rect" id="node36" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="416,157,559,198"/>
<area shape="rect" id="node40" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="623,427,741,453"/>
<area shape="rect" id="node42" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="418,55,557,81"/>
<area shape="rect" id="node45" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="418,298,557,339"/>
<area shape="rect" id="node46" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="619,261,745,288"/>
<area shape="rect" id="node47" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="412,105,563,132"/>
<area shape="rect" id="node49" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="429,364,545,391"/>
<area shape="rect" id="node4" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="622,700,742,727"/>
<area shape="rect" id="node22" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="617,634,747,675"/>
<area shape="rect" id="node5" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="819,713,960,754"/>
<area shape="rect" id="node6" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1042,552,1183,579"/>
<area shape="rect" id="node7" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1248,524,1427,551"/>
<area shape="rect" id="node8" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1915,487,2065,529"/>
<area shape="rect" id="node15" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1707,385,1864,412"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1475,487,1659,529"/>
<area shape="rect" id="node9" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="2136,388,2241,415"/>
<area shape="rect" id="node14" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="2131,495,2247,521"/>
<area shape="rect" id="node10" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="2311,320,2431,347"/>
<area shape="rect" id="node11" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2488,320,2603,347"/>
<area shape="rect" id="node12" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2480,371,2611,397"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="2659,193,2736,220"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1916,436,2064,463"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1921,319,2059,361"/>
<area shape="rect" id="node18" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1912,385,2068,412"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8h.html#a1907ac7b54882bbf06019eaf6d03c21c" title="nilfs_relax_pressure\l_in_lock" alt="" coords="1716,487,1855,529"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a8b69f4181745f44662620421e0f88ab0" title="nilfs_transaction_lock" alt="" coords="1711,436,1859,463"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1047,654,1179,695"/>
<area shape="rect" id="node26" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="813,414,966,455"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1025,388,1200,415"/>
<area shape="rect" id="node28" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1299,349,1376,376"/>
<area shape="rect" id="node29" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1514,335,1619,361"/>
<area shape="rect" id="node30" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1508,385,1625,412"/>
<area shape="rect" id="node32" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="818,479,961,521"/>
<area shape="rect" id="node33" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="801,779,977,805"/>
<area shape="rect" id="node34" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="814,545,965,586"/>
<area shape="rect" id="node37" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="836,227,943,253"/>
<area shape="rect" id="node39" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1269,161,1405,202"/>
<area shape="rect" id="node38" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="2311,223,2430,249"/>
<area shape="rect" id="node41" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1045,470,1180,511"/>
<area shape="rect" id="node43" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="2116,21,2261,48"/>
<area shape="rect" id="node44" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="611,43,753,85"/>
<area shape="rect" id="node48" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="2309,102,2432,143"/>
<area shape="rect" id="node50" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="1040,323,1185,349"/>
</map>
</div>

</div>
</div>
<a id="ab23fa738fd953c9957776612e1317492"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab23fa738fd953c9957776612e1317492">&#9670;&nbsp;</a></span>nilfs_sufile_updatev()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nilfs_sufile_updatev </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__u64 *&#160;</td>
          <td class="paramname"><em>segnumv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nsegs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>create</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>ndone</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *, __u64, struct buffer_head *, struct buffer_head *)&#160;</td>
          <td class="paramname"><em>dofunc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>nilfs_sufile_updatev - modify multiple segment usages at a time : inode of segment usage file : array of segment numbers : size of  array : creation flag : place to store number of modified segments on  : primitive operation for the update</p>
<p>Description: <a class="el" href="sufile_8c.html#ab23fa738fd953c9957776612e1317492">nilfs_sufile_updatev()</a> repeatedly calls  against the given array of segments. The  is called with buffers of a header block and the sufile block in which the target segment usage entry is contained. If  is given, the number of successfully modified segments from the head is stored in the place  points to.</p>
<p>Return Value: On success, zero is returned. On error, one of the following negative error codes is returned.</p>
<p>%-EIO - I/O error.</p>
<p>%-ENOMEM - Insufficient amount of memory available.</p>
<p>%-ENOENT - Given segment usage is in hole block (may be returned if  is zero)</p>
<p>%-EINVAL - Invalid segment usage number </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_ab23fa738fd953c9957776612e1317492_cgraph.png" border="0" usemap="#sufile_8c_ab23fa738fd953c9957776612e1317492_cgraph" alt=""/></div>
<map name="sufile_8c_ab23fa738fd953c9957776612e1317492_cgraph" id="sufile_8c_ab23fa738fd953c9957776612e1317492_cgraph">
<area shape="rect" id="node2" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1541,1221,1637,1248"/>
<area shape="rect" id="node3" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="191,1191,371,1217"/>
<area shape="rect" id="node8" href="sufile_8c.html#a7df3cdff37c5aa00cca3458f1d7d400e" title="nilfs_sufile_get_header\l_block" alt="" coords="885,1931,1040,1973"/>
<area shape="rect" id="node9" href="mdt_8c.html#ac80b1d3dd5ba6c242b10a9b6dc78f3d6" title="nilfs_mdt_get_block" alt="" coords="1103,2099,1241,2125"/>
<area shape="rect" id="node16" href="sufile_8c.html#a10c3757a2afcb34eb7d66ee614608724" title="nilfs_sufile_get_blkoff" alt="" coords="1098,1539,1246,1565"/>
<area shape="rect" id="node4" href="sufile_8h.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="419,708,601,735"/>
<area shape="rect" id="node6" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="439,447,581,489"/>
<area shape="rect" id="node7" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="679,1160,798,1187"/>
<area shape="rect" id="node23" href="sufile_8h.html#ae5c9db186be6baf07d66e049a0fd9b9b" title="nilfs_sufile_mark_dirty" alt="" coords="663,1337,815,1364"/>
<area shape="rect" id="node24" href="sufile_8h.html#ac6379742426c30d02072b1a5b0f527f8" title="nilfs_sufile_set_segment\l_usage" alt="" coords="655,1391,822,1433"/>
<area shape="rect" id="node25" href="itree__common_8c.html#a9e0e9bc5296a639c2e2a4b9b99733033" title="nblocks" alt="" coords="929,43,996,69"/>
<area shape="rect" id="node26" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="441,1273,579,1300"/>
<area shape="rect" id="node27" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="663,1459,814,1485"/>
<area shape="rect" id="node29" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687" title="nilfs_sufile_set_suinfo" alt="" coords="663,1241,814,1268"/>
<area shape="rect" id="node31" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="670,1993,807,2020"/>
<area shape="rect" id="node32" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="673,1611,804,1637"/>
<area shape="rect" id="node33" href="sufile_8h.html#acad60c93c0f7f6c3a8a9dc843107f1ed" title="nilfs_sufile_do_scrap" alt="" coords="667,873,811,900"/>
<area shape="rect" id="node34" href="sufile_8h.html#a577d0d35a7907909b6c0a139d8cc1704" title="nilfs_sufile_do_free" alt="" coords="671,975,806,1001"/>
<area shape="rect" id="node35" href="sufile_8h.html#aff87ff4257115842ff3c7940e5f8e769" title="nilfs_sufile_do_cancel_free" alt="" coords="649,924,828,951"/>
<area shape="rect" id="node36" href="sufile_8h.html#a7e943e59486cd6176a3317bed589b7c9" title="nilfs_sufile_do_set\l_error" alt="" coords="673,801,804,842"/>
<area shape="rect" id="node37" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="447,765,573,792"/>
<area shape="rect" id="node41" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="681,2225,797,2252"/>
<area shape="rect" id="node48" href="sufile_8h.html#a202058a1d5a7ee3658e8e7cda1ffee37" title="nilfs_sufile_trim_fs" alt="" coords="673,185,804,212"/>
<area shape="rect" id="node5" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="917,683,1008,709"/>
<area shape="rect" id="node15" href="sufile_8c.html#a38f2abf7ef7577b1af4b9e8fc9316727" title="nilfs_sufile_get_segment\l_usage_block" alt="" coords="879,1561,1046,1602"/>
<area shape="rect" id="node18" href="sufile_8c.html#a22641f45cc119a770bda855c5e2e6fcb" title="nilfs_sufile_block\l_get_segment_usage" alt="" coords="889,1089,1036,1130"/>
<area shape="rect" id="node20" href="sufile_8c.html#a34ecb984fd0f57101d2ee0b4bde4bf95" title="nilfs_sufile_segment\l_usages_in_block" alt="" coords="892,566,1033,607"/>
<area shape="rect" id="node21" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1111,835,1233,861"/>
<area shape="rect" id="node22" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="891,1155,1034,1181"/>
<area shape="rect" id="node10" href="mdt_8c.html#ae82520fdfc46a00a63e6446213d557b6" title="nilfs_mdt_read_block" alt="" coords="1305,2099,1451,2125"/>
<area shape="rect" id="node13" href="mdt_8c.html#a48d0f6558518576b3d5e039e9b9c7fd8" title="nilfs_mdt_create_block" alt="" coords="1300,2251,1456,2277"/>
<area shape="rect" id="node11" href="mdt_8c.html#a43ded315f7122596d14b88c43fe9c98d" title="nilfs_mdt_submit_block" alt="" coords="1509,2111,1668,2137"/>
<area shape="rect" id="node12" href="nilfs2_2page_8c.html#aa4a24cc5a684ba71b9e4423f2ea38970" title="nilfs_grab_buffer" alt="" coords="1716,2149,1835,2176"/>
<area shape="rect" id="node14" href="nilfs_8h.html#aacff7fe9750a849356475b2063b69e3b" title="nilfs_transaction_begin" alt="" coords="1511,2251,1666,2277"/>
<area shape="rect" id="node17" href="sufile_8c.html#a048a58aad760411d79b7e01d28babbb5" title="nilfs_sufile_segment\l_usages_per_block" alt="" coords="1307,1185,1449,1226"/>
<area shape="rect" id="node19" href="sufile_8c.html#a618eb2bb692e0a971e9606f29e87261c" title="nilfs_sufile_get_offset" alt="" coords="1097,1101,1247,1128"/>
<area shape="rect" id="node28" href="the__nilfs_8h.html#a51bb53199a62a87f269e03404136d00f" title="nilfs_segment_is_active" alt="" coords="881,1459,1044,1485"/>
<area shape="rect" id="node30" href="sufile_8c.html#af1d36bfa94541a3fdad59955464852ea" title="nilfs_sufile_mod_counter" alt="" coords="879,784,1046,811"/>
<area shape="rect" id="node38" href="the__nilfs_8c.html#aa7bf85e7bb9022b3680b22d945d17f91" title="nilfs_nrsvsegs" alt="" coords="909,363,1016,389"/>
<area shape="rect" id="node39" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="669,1030,808,1071"/>
<area shape="rect" id="node40" href="the__nilfs_8c.html#a38632ac69509070865038bf0120a1509" title="nilfs_set_nsegments" alt="" coords="667,388,810,415"/>
<area shape="rect" id="node42" href="nilfs2_2inode_8c.html#ae758d8edf633a8af3535ac0af248f1d1" title="nilfs_iget_locked" alt="" coords="903,2352,1022,2379"/>
<area shape="rect" id="node43" href="mdt_8c.html#a9d24c6e56a98e581fc30fd8a65841e2a" title="nilfs_mdt_init" alt="" coords="913,2403,1012,2429"/>
<area shape="rect" id="node44" href="mdt_8c.html#ae0d853ce1775f22eb93823f6423e6fac" title="nilfs_mdt_set_entry_size" alt="" coords="1295,2200,1461,2227"/>
<area shape="rect" id="node45" href="nilfs2_2inode_8c.html#affec0e84c605c1d9028332974ba58cd3" title="nilfs_read_inode_common" alt="" coords="876,2453,1049,2480"/>
<area shape="rect" id="node46" href="inode_8c.html#a9282b7bd35d1e54dbe441c57da2400fc" title="unlock_new_inode" alt="" coords="1107,2276,1237,2303"/>
<area shape="rect" id="node47" href="bad__inode_8c.html#a8c027cf52e2b7669b11b0bfa09bbcd45" title="iget_failed" alt="" coords="922,2251,1003,2277"/>
<area shape="rect" id="node49" href="the__nilfs_8h.html#acbe15a8b57f8ecf5e4777294c2f7303d" title="nilfs_get_segnum_of\l_block" alt="" coords="891,94,1034,135"/>
<area shape="rect" id="node50" href="the__nilfs_8h.html#a0dc161eb6c4f6bad9212b67517b46a37" title="nilfs_get_segment_range" alt="" coords="879,160,1046,187"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_ab23fa738fd953c9957776612e1317492_icgraph.png" border="0" usemap="#sufile_8c_ab23fa738fd953c9957776612e1317492_icgraph" alt=""/></div>
<map name="sufile_8c_ab23fa738fd953c9957776612e1317492_icgraph" id="sufile_8c_ab23fa738fd953c9957776612e1317492_icgraph">
<area shape="rect" id="node2" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="191,432,371,458"/>
<area shape="rect" id="node4" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="629,141,749,168"/>
<area shape="rect" id="node22" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="624,75,753,116"/>
<area shape="rect" id="node3" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="425,210,563,237"/>
<area shape="rect" id="node24" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="429,281,559,308"/>
<area shape="rect" id="node36" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="423,700,565,742"/>
<area shape="rect" id="node40" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="629,344,748,370"/>
<area shape="rect" id="node42" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="425,457,563,484"/>
<area shape="rect" id="node45" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="425,559,563,600"/>
<area shape="rect" id="node46" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="625,634,752,661"/>
<area shape="rect" id="node47" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="419,508,569,534"/>
<area shape="rect" id="node49" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="436,406,552,433"/>
<area shape="rect" id="node5" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="825,82,967,123"/>
<area shape="rect" id="node6" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1049,206,1190,233"/>
<area shape="rect" id="node7" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1255,248,1433,274"/>
<area shape="rect" id="node8" href="nilfs2_2segment_8h.html#a79d6faa259873957e4e6e42876aca8d4" title="nilfs_construct_dsync\l_segment" alt="" coords="1922,259,2071,300"/>
<area shape="rect" id="node15" href="nilfs2_2segment_8c.html#a7a995d883df35bebf400352d48cc380a" title="nilfs_segctor_construct" alt="" coords="1713,390,1871,417"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="1481,270,1665,311"/>
<area shape="rect" id="node9" href="nilfs_8h.html#a17285f5088aaa553863d6f3a645faca7" title="nilfs_sync_file" alt="" coords="2143,344,2248,370"/>
<area shape="rect" id="node14" href="nilfs2_2inode_8c.html#ac6060a89a348905b9c5365bbf504a9d5" title="nilfs_writepages" alt="" coords="2137,266,2253,293"/>
<area shape="rect" id="node10" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="2317,369,2437,396"/>
<area shape="rect" id="node11" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="2495,369,2609,396"/>
<area shape="rect" id="node12" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="2487,420,2617,446"/>
<area shape="rect" id="node13" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="2665,546,2743,573"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8h.html#a743bf0928dcbc45a2ba24a08ac395224" title="nilfs_clean_segments" alt="" coords="1923,441,2071,468"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8c.html#a94663ea74105a230816c915236ad199a" title="nilfs_segctor_thread\l_construct" alt="" coords="1927,324,2066,366"/>
<area shape="rect" id="node18" href="nilfs2_2segment_8c.html#a2eda3501e8ed1cdd3323a4a77257416f" title="nilfs_segctor_write_out" alt="" coords="1919,390,2075,417"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8h.html#a1907ac7b54882bbf06019eaf6d03c21c" title="nilfs_relax_pressure\l_in_lock" alt="" coords="1723,270,1861,311"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a8b69f4181745f44662620421e0f88ab0" title="nilfs_transaction_lock" alt="" coords="1718,336,1866,362"/>
<area shape="rect" id="node23" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1053,140,1185,182"/>
<area shape="rect" id="node25" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="627,293,750,320"/>
<area shape="rect" id="node31" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="632,242,745,269"/>
<area shape="rect" id="node35" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="617,192,760,218"/>
<area shape="rect" id="node26" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="819,330,973,371"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1032,333,1207,360"/>
<area shape="rect" id="node28" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1305,401,1383,428"/>
<area shape="rect" id="node29" href="nilfs2_2super_8c.html#a1ea867b4c80af5447edde8aad7f03a6c" title="nilfs_fill_super" alt="" coords="1521,386,1626,413"/>
<area shape="rect" id="node30" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1515,437,1632,464"/>
<area shape="rect" id="node32" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="825,264,967,306"/>
<area shape="rect" id="node33" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="808,148,984,174"/>
<area shape="rect" id="node34" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="821,199,971,240"/>
<area shape="rect" id="node37" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="843,638,949,665"/>
<area shape="rect" id="node39" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1276,708,1412,750"/>
<area shape="rect" id="node38" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="2318,638,2437,665"/>
<area shape="rect" id="node41" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1052,384,1187,426"/>
<area shape="rect" id="node43" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="2123,522,2268,549"/>
<area shape="rect" id="node44" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="617,459,760,500"/>
<area shape="rect" id="node48" href="nilfs2_2ioctl_8c.html#a34169b6b8da0810dd6b289d1ac8f192f" title="nilfs_ioctl_do_get\l_suinfo" alt="" coords="2316,572,2439,614"/>
<area shape="rect" id="node50" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="1047,450,1192,477"/>
</map>
</div>

</div>
</div>
<a id="acbb532a1df92111d05a67092edbfd65b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbb532a1df92111d05a67092edbfd65b">&#9670;&nbsp;</a></span>NILFS_SUI()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structnilfs__sufile__info.html">nilfs_sufile_info</a>* NILFS_SUI </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="ocfs2__fs_8h.html#a6f188e75c49f1f314346d1183cde3873">inode</a> *&#160;</td>
          <td class="paramname"><em>sufile</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_acbb532a1df92111d05a67092edbfd65b_cgraph.png" border="0" usemap="#sufile_8c_acbb532a1df92111d05a67092edbfd65b_cgraph" alt=""/></div>
<map name="sufile_8c_acbb532a1df92111d05a67092edbfd65b_cgraph" id="sufile_8c_acbb532a1df92111d05a67092edbfd65b_cgraph">
<area shape="rect" id="node2" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="144,5,240,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="sufile_8c_acbb532a1df92111d05a67092edbfd65b_icgraph.png" border="0" usemap="#sufile_8c_acbb532a1df92111d05a67092edbfd65b_icgraph" alt=""/></div>
<map name="sufile_8c_acbb532a1df92111d05a67092edbfd65b_icgraph" id="sufile_8c_acbb532a1df92111d05a67092edbfd65b_icgraph">
<area shape="rect" id="node2" href="sufile_8h.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="144,969,327,996"/>
<area shape="rect" id="node23" href="sufile_8h.html#ac0bd62c3d3681b821085c55c413aa1bb" title="nilfs_sufile_set_alloc\l_range" alt="" coords="611,818,753,859"/>
<area shape="rect" id="node28" href="sufile_8h.html#ae43422797775f081a1fe1fe6abef686f" title="nilfs_sufile_alloc" alt="" coords="623,220,741,247"/>
<area shape="rect" id="node33" href="sufile_8c.html#a06bf3b2669ffdbe7c8809d8c3b730cbc" title="nilfs_sufile_truncate\l_range" alt="" coords="613,701,751,742"/>
<area shape="rect" id="node34" href="sufile_8h.html#ac9feb3258026bbd1136c545e911c5d91" title="nilfs_sufile_resize" alt="" coords="839,673,966,700"/>
<area shape="rect" id="node36" href="sufile_8h.html#a3ad0af8131357596ac729f04c3009e15" title="nilfs_sufile_read" alt="" coords="624,649,740,676"/>
<area shape="rect" id="node46" href="sufile_8h.html#aff87ff4257115842ff3c7940e5f8e769" title="nilfs_sufile_do_cancel_free" alt="" coords="146,465,325,492"/>
<area shape="rect" id="node47" href="sufile_8h.html#acad60c93c0f7f6c3a8a9dc843107f1ed" title="nilfs_sufile_do_scrap" alt="" coords="163,583,307,609"/>
<area shape="rect" id="node48" href="sufile_8h.html#a577d0d35a7907909b6c0a139d8cc1704" title="nilfs_sufile_do_free" alt="" coords="168,119,303,145"/>
<area shape="rect" id="node49" href="sufile_8h.html#a7e943e59486cd6176a3317bed589b7c9" title="nilfs_sufile_do_set\l_error" alt="" coords="170,517,301,558"/>
<area shape="rect" id="node50" href="sufile_8h.html#abc30bf95562e00949a44b244e3088687" title="nilfs_sufile_set_suinfo" alt="" coords="160,805,311,832"/>
<area shape="rect" id="node3" href="nilfs2_2sysfs_8c.html#ad6b551fbfd9a694cf672480de0c6df9d" title="nilfs_segments_clean\l_segments_show" alt="" coords="391,962,539,1003"/>
<area shape="rect" id="node4" href="sufile_8h.html#a9c732ab29452414325bd9a1e70fe3978" title="nilfs_sufile_get_nsegments" alt="" coords="375,524,555,551"/>
<area shape="rect" id="node38" href="the__nilfs_8h.html#a6d64c6b82e4107f17097d08e4f2b933b" title="nilfs_count_free_blocks" alt="" coords="603,884,761,911"/>
<area shape="rect" id="node42" href="the__nilfs_8h.html#a90dd6a38fbbe4af1b07031036a6ee500" title="nilfs_near_disk_full" alt="" coords="398,1079,531,1105"/>
<area shape="rect" id="node5" href="sufile_8h.html#a4f79159d2c1037184f20a9ed3a5f410a" title="nilfs_sufile_updatev" alt="" coords="613,372,751,399"/>
<area shape="rect" id="node12" href="sufile_8h.html#a954be8e038b533c82c78cf5250e56cbe" title="nilfs_sufile_update" alt="" coords="617,423,747,449"/>
<area shape="rect" id="node30" href="sufile_8h.html#a3fef1b4dbdae6f60e2dc3b703969a3dd" title="nilfs_sufile_get_stat" alt="" coords="613,524,751,551"/>
<area shape="rect" id="node35" href="sufile_8h.html#a479c51cdecafad05d22942c107b00c4f" title="nilfs_sufile_get_suinfo" alt="" coords="607,473,757,500"/>
<area shape="rect" id="node6" href="sufile_8h.html#af210832d1efe1b482aa7522fc34e4372" title="nilfs_sufile_freev" alt="" coords="843,69,963,96"/>
<area shape="rect" id="node10" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="838,121,967,162"/>
<area shape="rect" id="node7" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="1061,62,1203,103"/>
<area shape="rect" id="node8" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1285,128,1426,155"/>
<area shape="rect" id="node9" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="1491,128,1669,155"/>
<area shape="rect" id="node11" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1289,179,1421,221"/>
<area shape="rect" id="node13" href="sufile_8h.html#afdd3e828fa8ffde5856b483f0c32c6f4" title="nilfs_sufile_scrap" alt="" coords="841,423,964,449"/>
<area shape="rect" id="node18" href="sufile_8h.html#a67f76a7b0da53a061147b4a7f48e082d" title="nilfs_sufile_free" alt="" coords="846,271,959,297"/>
<area shape="rect" id="node22" href="sufile_8h.html#aa5623f31382355a7f576224994d7e571" title="nilfs_sufile_set_error" alt="" coords="831,372,974,399"/>
<area shape="rect" id="node14" href="nilfs2_2recovery_8c.html#a561c361c13ae22022d24695836c97423" title="nilfs_prepare_segment\l_for_recovery" alt="" coords="1055,414,1209,455"/>
<area shape="rect" id="node15" href="nilfs2_2segment_8h.html#a9e61516876368ef4aa3118ef414d37c3" title="nilfs_salvage_orphan_logs" alt="" coords="1268,472,1443,499"/>
<area shape="rect" id="node16" href="the__nilfs_8h.html#acf19b96bd4de0b4bc159d5f7ceca5b3d" title="load_nilfs" alt="" coords="1541,623,1619,649"/>
<area shape="rect" id="node17" href="the__nilfs_8h.html#a896212eecf4577d6ec6f424ce62622d3" title="nilfs_sb_will_flip" alt="" coords="1717,977,1835,1004"/>
<area shape="rect" id="node19" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="1061,230,1203,271"/>
<area shape="rect" id="node20" href="nilfs2_2segment_8c.html#aa460eb83c61cec1ca9286a5c74b04c77" title="nilfs_free_incomplete_logs" alt="" coords="1044,361,1220,388"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="1057,295,1207,337"/>
<area shape="rect" id="node24" href="nilfs2_2super_8c.html#a0bb917ba8d34150bbfd347e44ed259c3" title="nilfs_resize_fs" alt="" coords="1079,731,1185,757"/>
<area shape="rect" id="node27" href="nilfs2_2ioctl_8c.html#a7f41bf53459a54ba4c2d14e01aaad2b7" title="nilfs_ioctl_set_alloc\l_range" alt="" coords="1287,811,1423,853"/>
<area shape="rect" id="node25" href="nilfs2_2ioctl_8c.html#ae197bb230d6c201248dcabcc2df73e20" title="nilfs_ioctl_resize" alt="" coords="1296,743,1415,769"/>
<area shape="rect" id="node26" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="1541,781,1619,808"/>
<area shape="rect" id="node29" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1288,33,1423,74"/>
<area shape="rect" id="node31" href="nilfs2_2ioctl_8c.html#a0841eacabd5d2f65cc1e4e903cb0b9c9" title="nilfs_ioctl_get_sustat" alt="" coords="1283,572,1428,599"/>
<area shape="rect" id="node32" href="nilfs2_2sysfs_8c.html#a2e0a66db248732b01455e742b57ad56c" title="nilfs_segments_dirty\l_segments_show" alt="" coords="831,506,974,547"/>
<area shape="rect" id="node37" href="the__nilfs_8c.html#a571d8e8a8684ca89542920087a8b8527" title="nilfs_load_super_root" alt="" coords="1059,623,1205,649"/>
<area shape="rect" id="node39" href="nilfs2_2super_8c.html#a6cb8ff08bb40fc6f664e18570efacb50" title="nilfs_set_log_cursor" alt="" coords="833,775,972,801"/>
<area shape="rect" id="node40" href="nilfs2_2super_8c.html#a11ed86135bdf32d65de6a5ec47e23783" title="nilfs_statfs" alt="" coords="859,876,946,903"/>
<area shape="rect" id="node41" href="nilfs2_2sysfs_8c.html#af7c911663115a102ca0afffeb63820ec" title="nilfs_dev_free_blocks_show" alt="" coords="809,927,996,953"/>
<area shape="rect" id="node43" href="nilfs2_2file_8c.html#afcd58fb7c6b35bfcc8fbc7bb056ada6a" title="nilfs_page_mkwrite" alt="" coords="835,1079,970,1105"/>
<area shape="rect" id="node44" href="nilfs2_2segment_8c.html#ae4a012a0fc0026d060aa426f15cfb8a7" title="nilfs_transaction_begin" alt="" coords="605,1028,759,1055"/>
<area shape="rect" id="node45" href="nilfs2_2ioctl_8c.html#a879fc213e33210988660173aec449143" title="nilfs_ioctl_set_suinfo" alt="" coords="831,1028,975,1055"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_8fac9e178a1e3eec5aa774d52dddfbee.html">nilfs2</a></li><li class="navelem"><a class="el" href="sufile_8c.html">sufile.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>

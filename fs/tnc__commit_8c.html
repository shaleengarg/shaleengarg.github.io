<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>linux/fs: ubifs/tnc_commit.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">linux/fs
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('tnc__commit_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">tnc_commit.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;linux/random.h&gt;</code><br />
<code>#include &quot;<a class="el" href="ubifs_8h_source.html">ubifs.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for tnc_commit.c:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c__incl.png" border="0" usemap="#ubifs_2tnc__commit_8c" alt=""/></div>
<map name="ubifs_2tnc__commit_8c" id="ubifs_2tnc__commit_8c">
<area shape="rect" id="node3" href="ubifs_8h.html" title="ubifs.h" alt="" coords="1164,80,1225,107"/>
<area shape="rect" id="node20" href="ubifs-media_8h.html" title="ubifs&#45;media.h" alt="" coords="2143,155,2243,181"/>
<area shape="rect" id="node21" href="ubifs_2debug_8h.html" title="debug.h" alt="" coords="2267,155,2335,181"/>
<area shape="rect" id="node22" href="misc_8h.html" title="misc.h" alt="" coords="2360,155,2421,181"/>
<area shape="rect" id="node23" href="key_8h.html" title="key.h" alt="" coords="2446,155,2501,181"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad681f20f8fb62e0331f43526e7fc5c99"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tnc__commit_8c.html#ad681f20f8fb62e0331f43526e7fc5c99">make_idx_node</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, struct <a class="el" href="structubifs__idx__node.html">ubifs_idx_node</a> *idx, struct <a class="el" href="structubifs__znode.html">ubifs_znode</a> *znode, int lnum, int offs, int <a class="el" href="rock_8h.html#aa1460ec7ef11d3c3a91c8ee9fb6380d5">len</a>)</td></tr>
<tr class="separator:ad681f20f8fb62e0331f43526e7fc5c99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaab41523ed81f906598dbc52e68444ac"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tnc__commit_8c.html#aaab41523ed81f906598dbc52e68444ac">fill_gap</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, int lnum, int gap_start, int gap_end, int *dirt)</td></tr>
<tr class="separator:aaab41523ed81f906598dbc52e68444ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbc913319e0b75162b563df6d2b4584f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tnc__commit_8c.html#adbc913319e0b75162b563df6d2b4584f">find_old_idx</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, int lnum, int offs)</td></tr>
<tr class="separator:adbc913319e0b75162b563df6d2b4584f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a674601c7e9e367fc2e8f38696f9640c8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tnc__commit_8c.html#a674601c7e9e367fc2e8f38696f9640c8">is_idx_node_in_use</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, union <a class="el" href="unionubifs__key.html">ubifs_key</a> *<a class="el" href="cifspdu_8h.html#a63d44da4c2019b7ae1dd3c4e15b887aa">key</a>, int <a class="el" href="nilfs_8h.html#a4d8634ba374002ecc7800ee7e88b959f">level</a>, int lnum, int offs)</td></tr>
<tr class="separator:a674601c7e9e367fc2e8f38696f9640c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae35ab1b0e8a8676ac825941f36e77bdd"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tnc__commit_8c.html#ae35ab1b0e8a8676ac825941f36e77bdd">layout_leb_in_gaps</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, int *p)</td></tr>
<tr class="separator:ae35ab1b0e8a8676ac825941f36e77bdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa01412c139f0a3f0aaf0a6d83e1415c5"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tnc__commit_8c.html#aa01412c139f0a3f0aaf0a6d83e1415c5">get_leb_cnt</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, int cnt)</td></tr>
<tr class="separator:aa01412c139f0a3f0aaf0a6d83e1415c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa94160dc8891f55de97cfb630b191ef2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tnc__commit_8c.html#aa94160dc8891f55de97cfb630b191ef2">layout_in_gaps</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, int cnt)</td></tr>
<tr class="separator:aa94160dc8891f55de97cfb630b191ef2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5704e54ff6ae794072cf6fefd287ee56"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tnc__commit_8c.html#a5704e54ff6ae794072cf6fefd287ee56">layout_in_empty_space</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:a5704e54ff6ae794072cf6fefd287ee56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f7210689e6f040c0b106db3e447e04b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tnc__commit_8c.html#a1f7210689e6f040c0b106db3e447e04b">layout_commit</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, int no_space, int cnt)</td></tr>
<tr class="separator:a1f7210689e6f040c0b106db3e447e04b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad50b2f657e8580a4de9d921e8866a3b9"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structubifs__znode.html">ubifs_znode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tnc__commit_8c.html#ad50b2f657e8580a4de9d921e8866a3b9">find_first_dirty</a> (struct <a class="el" href="structubifs__znode.html">ubifs_znode</a> *znode)</td></tr>
<tr class="separator:ad50b2f657e8580a4de9d921e8866a3b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38afc10e5e3f36e9ef617ceeb9e74871"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structubifs__znode.html">ubifs_znode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tnc__commit_8c.html#a38afc10e5e3f36e9ef617ceeb9e74871">find_next_dirty</a> (struct <a class="el" href="structubifs__znode.html">ubifs_znode</a> *znode)</td></tr>
<tr class="separator:a38afc10e5e3f36e9ef617ceeb9e74871"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64748c798bfc8c8fd1ee5bedae19a5b3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tnc__commit_8c.html#a64748c798bfc8c8fd1ee5bedae19a5b3">get_znodes_to_commit</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:a64748c798bfc8c8fd1ee5bedae19a5b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82dea2876366b839f177356c01a9c031"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tnc__commit_8c.html#a82dea2876366b839f177356c01a9c031">alloc_idx_lebs</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, int cnt)</td></tr>
<tr class="separator:a82dea2876366b839f177356c01a9c031"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a045e506a5e968ca24069299455ff0abf"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tnc__commit_8c.html#a045e506a5e968ca24069299455ff0abf">free_unused_idx_lebs</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:a045e506a5e968ca24069299455ff0abf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabbfd5925b308189c641e1570a2a19f7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tnc__commit_8c.html#aabbfd5925b308189c641e1570a2a19f7">free_idx_lebs</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:aabbfd5925b308189c641e1570a2a19f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1e7a24e81c4fa022a4065530bd77bff"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tnc__commit_8c.html#ae1e7a24e81c4fa022a4065530bd77bff">ubifs_tnc_start_commit</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c, struct <a class="el" href="structubifs__zbranch.html">ubifs_zbranch</a> *zroot)</td></tr>
<tr class="separator:ae1e7a24e81c4fa022a4065530bd77bff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a170826fc5905c8e3ff4182dbb98b8e86"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tnc__commit_8c.html#a170826fc5905c8e3ff4182dbb98b8e86">write_index</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:a170826fc5905c8e3ff4182dbb98b8e86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed7297664da69ab5524f0e53b435d679"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tnc__commit_8c.html#aed7297664da69ab5524f0e53b435d679">free_obsolete_znodes</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:aed7297664da69ab5524f0e53b435d679"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae53a03c19715003f3e3770f006496e51"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tnc__commit_8c.html#ae53a03c19715003f3e3770f006496e51">return_gap_lebs</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:ae53a03c19715003f3e3770f006496e51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e11b3b283926c57ea7d7e7aaf6cabe1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tnc__commit_8c.html#a3e11b3b283926c57ea7d7e7aaf6cabe1">ubifs_tnc_end_commit</a> (struct <a class="el" href="structubifs__info.html">ubifs_info</a> *c)</td></tr>
<tr class="separator:a3e11b3b283926c57ea7d7e7aaf6cabe1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a82dea2876366b839f177356c01a9c031"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82dea2876366b839f177356c01a9c031">&#9670;&nbsp;</a></span>alloc_idx_lebs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int alloc_idx_lebs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cnt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>alloc_idx_lebs - allocate empty LEBs to be used to commit. <code></code>: UBIFS file-system description object : number of znodes to commit</p>
<p>This function returns %-ENOSPC if it cannot allocate a sufficient number of empty LEBs. %0 is returned on success, otherwise a negative error code is returned. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_a82dea2876366b839f177356c01a9c031_cgraph.png" border="0" usemap="#tnc__commit_8c_a82dea2876366b839f177356c01a9c031_cgraph" alt=""/></div>
<map name="tnc__commit_8c_a82dea2876366b839f177356c01a9c031_cgraph" id="tnc__commit_8c_a82dea2876366b839f177356c01a9c031_cgraph">
<area shape="rect" id="node2" href="tnc__commit_8c.html#aa01412c139f0a3f0aaf0a6d83e1415c5" title="get_leb_cnt" alt="" coords="178,716,267,743"/>
<area shape="rect" id="node3" href="find_8c.html#a5dbeb2fbcdd3403f15e5d6ce214edcf9" title="ubifs_find_free_leb\l_for_idx" alt="" coords="157,767,288,809"/>
<area shape="rect" id="node50" href="ubifs_2debug_8h.html#aaccd583a761afebb452421d214607adb" title="dbg_is_chk_index" alt="" coords="159,833,286,860"/>
<area shape="rect" id="node4" href="misc_8h.html#aa89c2768eb94f129c6afbe47420b44ba" title="ubifs_get_lprops" alt="" coords="557,701,674,728"/>
<area shape="rect" id="node5" href="lprops_8c.html#af7bb5628372135952187c4c37b9a0a68" title="ubifs_fast_find_empty" alt="" coords="341,648,491,675"/>
<area shape="rect" id="node6" href="lprops_8c.html#af4f3f200dc1d36660281ec0282293308" title="ubifs_fast_find_freeable" alt="" coords="336,699,496,725"/>
<area shape="rect" id="node7" href="find_8c.html#ae53f61786f9fb4f68b3eb47770f97846" title="scan_for_leb_for_idx" alt="" coords="544,572,687,599"/>
<area shape="rect" id="node36" href="lprops_8c.html#abfc4c6a75b37762f214cbc91f0ebe664" title="ubifs_change_lp" alt="" coords="557,803,673,829"/>
<area shape="rect" id="node41" href="misc_8h.html#a6dce2c34ec97d74cf4be59e0201bdb3e" title="ubifs_release_lprops" alt="" coords="545,967,686,993"/>
<area shape="rect" id="node42" href="ubifs_2io_8c.html#ad9d3a62a61d21e1faa60cd6e630c41ac" title="ubifs_leb_unmap" alt="" coords="555,1017,675,1044"/>
<area shape="rect" id="node49" href="lprops_8c.html#aeb3c0f6274cdeba0c778d57f29ab39bf" title="ubifs_change_one_lp" alt="" coords="344,800,488,827"/>
<area shape="rect" id="node8" href="lpt_8c.html#a34800df1b6052b492ca05c589dfec386" title="ubifs_lpt_scan_nolock" alt="" coords="931,564,1081,591"/>
<area shape="rect" id="node29" href="find_8c.html#a729b477660fd27cb7248516da9c558e1" title="scan_for_idx_cb" alt="" coords="750,464,867,491"/>
<area shape="rect" id="node31" href="lpt_8c.html#ade4e71b1fffa493cfb997feaff2c0638" title="ubifs_lpt_lookup_dirty" alt="" coords="735,628,883,655"/>
<area shape="rect" id="node9" href="lpt_8c.html#a6d9ea5f42b955fdb68064bc37bd9540d" title="ubifs_read_nnode" alt="" coords="1141,461,1265,488"/>
<area shape="rect" id="node15" href="lpt_8c.html#af47bb0ff8b216699052f86ee1b165be3" title="scan_get_nnode" alt="" coords="1145,360,1262,387"/>
<area shape="rect" id="node16" href="lpt_8c.html#abfbc6c90536c2d37859a5f26cf67f7c3" title="scan_get_pnode" alt="" coords="1145,157,1262,184"/>
<area shape="rect" id="node22" href="lprops_8c.html#a37b315dc45919358339f018bbab084b8" title="ubifs_ensure_cat" alt="" coords="1143,564,1264,591"/>
<area shape="rect" id="node25" href="lpt_8c.html#a50862af12cdded0c2e3be8cea516be8e" title="update_cats" alt="" coords="1157,615,1250,641"/>
<area shape="rect" id="node26" href="lpt_8c.html#a9941cb0ea2abb61e89ac3f6e3076eab5" title="dbg_check_lpt_nodes" alt="" coords="1129,816,1277,843"/>
<area shape="rect" id="node28" href="ubifs_2debug_8h.html#a4d24d720745a25e26d273dc892c703eb" title="dbg_check_cats" alt="" coords="1145,867,1262,893"/>
<area shape="rect" id="node10" href="lpt_8c.html#a9f9e5388fe8c2966b4517e0b243b9ce6" title="calc_nnode_num_from\l_parent" alt="" coords="1535,353,1688,394"/>
<area shape="rect" id="node11" href="ubifs_2io_8c.html#ab6a2a3c4a79d6d4c52350540437d3cb3" title="ubifs_leb_read" alt="" coords="1351,309,1458,336"/>
<area shape="rect" id="node12" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1575,867,1647,893"/>
<area shape="rect" id="node13" href="lpt_8c.html#a0d29b2eba67308c09e6c7e05ad2b63b1" title="ubifs_unpack_nnode" alt="" coords="1334,411,1475,437"/>
<area shape="rect" id="node14" href="lpt_8c.html#ad905cc71245ecfb3152a844c581d3e12" title="validate_nnode" alt="" coords="1350,360,1459,387"/>
<area shape="rect" id="node17" href="lpt_8c.html#afaa9919aea45f990f706d5a19a7de403" title="calc_pnode_num_from\l_parent" alt="" coords="1535,49,1688,90"/>
<area shape="rect" id="node18" href="lprops_8c.html#a7a2c9edc0537908ba98fe9a7ab5659d8" title="ubifs_categorize_lprops" alt="" coords="1532,465,1691,492"/>
<area shape="rect" id="node19" href="lpt_8c.html#a7d13c8b402e5a787d5f689a01f01725d" title="unpack_pnode" alt="" coords="1351,259,1458,285"/>
<area shape="rect" id="node20" href="lpt_8c.html#aa9b770e270a9dd0d3fa430bcca3eb9b1" title="validate_pnode" alt="" coords="1350,5,1459,32"/>
<area shape="rect" id="node21" href="lpt_8c.html#a60013b08dd0072dd2a70f499427a67d0" title="set_pnode_lnum" alt="" coords="1346,56,1463,83"/>
<area shape="rect" id="node23" href="lprops_8c.html#a88d9d4b260ebb86abbc16675b951f2c1" title="ubifs_remove_from_cat" alt="" coords="1325,664,1484,691"/>
<area shape="rect" id="node24" href="lprops_8c.html#a664f531f8332b3c53d93e25c4e688e09" title="ubifs_add_to_cat" alt="" coords="1344,613,1465,640"/>
<area shape="rect" id="node27" href="ubifs_2debug_8h.html#ab66d4ac998d5cd15774f5a22d366e1f1" title="dbg_is_chk_lprops" alt="" coords="1339,867,1470,893"/>
<area shape="rect" id="node30" href="find_8c.html#a2303bab7a34c9ea495ff055cb06db596" title="valuable" alt="" coords="971,412,1041,439"/>
<area shape="rect" id="node32" href="lpt_8c.html#accd7155d1f9997fb5e6a7fd577fdc0f2" title="dirty_cow_nnode" alt="" coords="946,716,1066,743"/>
<area shape="rect" id="node33" href="lpt_8c.html#a7fd536e4a29b47a6485fc3931f91857b" title="ubifs_get_nnode" alt="" coords="947,463,1065,489"/>
<area shape="rect" id="node34" href="lpt_8c.html#ad8f891756dae6c6dceeb51fb917b023b" title="ubifs_get_pnode" alt="" coords="947,615,1065,641"/>
<area shape="rect" id="node35" href="lpt_8c.html#ac60e8c2b5dbc5ab11045f313bcc441a0" title="dirty_cow_pnode" alt="" coords="946,665,1066,692"/>
<area shape="rect" id="node37" href="lprops_8c.html#a911df1bb1dc58cf096c97ce547539153" title="is_lprops_dirty" alt="" coords="755,701,862,728"/>
<area shape="rect" id="node38" href="lprops_8c.html#a54fa4acd96a49b1bbe2baeac4dbd0c0b" title="ubifs_calc_dark" alt="" coords="752,752,865,779"/>
<area shape="rect" id="node39" href="lprops_8c.html#a2f083caeaebac06c1f51d7c7d34f5c13" title="change_category" alt="" coords="1143,715,1264,741"/>
<area shape="rect" id="node40" href="lprops_8c.html#a1b58cb9915dbbdf9ac60e7a1369d05ab" title="adjust_lpt_heap" alt="" coords="1348,765,1461,792"/>
<area shape="rect" id="node43" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="1144,1040,1263,1067"/>
<area shape="rect" id="node44" href="ubifs_2debug_8c.html#a6ba17156289f8b8ecaed40dbafc04858" title="dbg_leb_unmap" alt="" coords="752,1017,865,1044"/>
<area shape="rect" id="node48" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="755,967,862,993"/>
<area shape="rect" id="node45" href="ubifs_2debug_8h.html#ab599356d6c84ddd2c7b9001b452c30bd" title="dbg_is_power_cut" alt="" coords="943,865,1069,892"/>
<area shape="rect" id="node46" href="ubifs_2debug_8c.html#a67b6fc23cfbf882431d33323a03ef74c" title="power_cut_emulated" alt="" coords="935,1017,1077,1044"/>
<area shape="rect" id="node47" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="1161,977,1246,1004"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_a82dea2876366b839f177356c01a9c031_icgraph.png" border="0" usemap="#tnc__commit_8c_a82dea2876366b839f177356c01a9c031_icgraph" alt=""/></div>
<map name="tnc__commit_8c_a82dea2876366b839f177356c01a9c031_icgraph" id="tnc__commit_8c_a82dea2876366b839f177356c01a9c031_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#ae1e7a24e81c4fa022a4065530bd77bff" title="ubifs_tnc_start_commit" alt="" coords="157,247,316,273"/>
<area shape="rect" id="node3" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="364,247,451,273"/>
<area shape="rect" id="node4" href="ubifs_2commit_8c.html#a91c88ecee0c3d4a55bbe6669a0caa521" title="run_bg_commit" alt="" coords="506,184,617,211"/>
<area shape="rect" id="node10" href="ubifs_8h.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="499,272,624,299"/>
<area shape="rect" id="node5" href="ubifs_8h.html#ad1d2abb94e9ca171f253ba64fdbf7aa6" title="ubifs_bg_thread" alt="" coords="867,145,981,172"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="1080,120,1173,147"/>
<area shape="rect" id="node8" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="1064,171,1189,197"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1276,5,1385,32"/>
<area shape="rect" id="node9" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="1269,56,1392,83"/>
<area shape="rect" id="node11" href="ubifs_2super_8c.html#a5f9c4c32c42dc338c1b84b87b7098105" title="ubifs_sync_fs" alt="" coords="683,196,786,223"/>
<area shape="rect" id="node12" href="ubifs_2recovery_8c.html#acb6fbec748694453a2e4b3ed2be6cc6b" title="grab_empty_leb" alt="" coords="677,297,792,324"/>
<area shape="rect" id="node13" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="845,233,1003,260"/>
<area shape="rect" id="node22" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="861,1171,987,1197"/>
<area shape="rect" id="node42" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="672,399,797,425"/>
<area shape="rect" id="node14" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="1063,233,1190,260"/>
<area shape="rect" id="node15" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1473,436,1607,463"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1284,208,1377,235"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1289,157,1372,184"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1286,259,1375,285"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1283,309,1379,336"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1279,360,1382,387"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1497,816,1583,843"/>
<area shape="rect" id="node23" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="1069,385,1185,412"/>
<area shape="rect" id="node28" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="1058,1412,1195,1439"/>
<area shape="rect" id="node31" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="1055,1272,1198,1299"/>
<area shape="rect" id="node34" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="1063,1348,1190,1375"/>
<area shape="rect" id="node36" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="1067,1171,1187,1197"/>
<area shape="rect" id="node37" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="1065,1221,1189,1248"/>
<area shape="rect" id="node38" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="1054,968,1199,995"/>
<area shape="rect" id="node40" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="1051,1120,1203,1147"/>
<area shape="rect" id="node24" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1285,411,1376,437"/>
<area shape="rect" id="node25" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1292,461,1369,488"/>
<area shape="rect" id="node26" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1285,512,1376,539"/>
<area shape="rect" id="node27" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1287,563,1374,589"/>
<area shape="rect" id="node29" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="1281,1424,1380,1451"/>
<area shape="rect" id="node30" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1490,1221,1590,1248"/>
<area shape="rect" id="node32" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="1269,1323,1392,1349"/>
<area shape="rect" id="node33" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="1255,1272,1406,1299"/>
<area shape="rect" id="node35" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1277,1373,1384,1400"/>
<area shape="rect" id="node39" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="1281,867,1380,893"/>
<area shape="rect" id="node41" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="1282,1120,1379,1147"/>
<area shape="rect" id="node43" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="1057,613,1196,640"/>
<area shape="rect" id="node44" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="1269,664,1392,691"/>
<area shape="rect" id="node45" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="1274,715,1387,741"/>
<area shape="rect" id="node46" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="1291,765,1371,792"/>
<area shape="rect" id="node47" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="1251,968,1411,995"/>
<area shape="rect" id="node48" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="1485,917,1595,944"/>
<area shape="rect" id="node49" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="1459,993,1621,1020"/>
<area shape="rect" id="node50" href="ubifs_2ioctl_8c.html#a06251cc4602342e44b5ed0a1b39f7e60" title="setflags" alt="" coords="1297,613,1365,640"/>
</map>
</div>

</div>
</div>
<a id="aaab41523ed81f906598dbc52e68444ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaab41523ed81f906598dbc52e68444ac">&#9670;&nbsp;</a></span>fill_gap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int fill_gap </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>gap_start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>gap_end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>dirt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>fill_gap - make index nodes in gaps in dirty index LEBs. <code></code>: UBIFS file-system description object : LEB number that gap appears in : offset of start of gap : offset of end of gap : adds dirty space to this</p>
<p>This function returns the number of index nodes written into the gap. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_aaab41523ed81f906598dbc52e68444ac_cgraph.png" border="0" usemap="#tnc__commit_8c_aaab41523ed81f906598dbc52e68444ac_cgraph" alt=""/></div>
<map name="tnc__commit_8c_aaab41523ed81f906598dbc52e68444ac_cgraph" id="tnc__commit_8c_aaab41523ed81f906598dbc52e68444ac_cgraph">
<area shape="rect" id="node2" href="misc_8h.html#ac7a685691e935bc3ef4a7918e107c8de" title="ubifs_idx_node_sz" alt="" coords="116,157,247,184"/>
<area shape="rect" id="node3" href="tnc__commit_8c.html#ad681f20f8fb62e0331f43526e7fc5c99" title="make_idx_node" alt="" coords="125,208,238,235"/>
<area shape="rect" id="node18" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="508,411,587,437"/>
<area shape="rect" id="node4" href="misc_8h.html#a1598cadb907a20f9e5dc3e7ee74edb1d" title="ubifs_idx_branch" alt="" coords="307,56,427,83"/>
<area shape="rect" id="node5" href="key_8h.html#a6a23a0657894a1a52a8a3046007995b3" title="key_write_idx" alt="" coords="315,107,418,133"/>
<area shape="rect" id="node6" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="673,157,745,184"/>
<area shape="rect" id="node7" href="ubifs_2debug_8c.html#a56365d730ac6932bf3163a8ba7279779" title="ubifs_dump_znode" alt="" coords="301,259,432,285"/>
<area shape="rect" id="node14" href="ubifs_2io_8c.html#acfc2ca3ffa8d094855c2e59551f3a767" title="ubifs_prepare_node" alt="" coords="299,309,434,336"/>
<area shape="rect" id="node19" href="tnc_8c.html#adb06b4070b4a33080b62c3882163a274" title="insert_old_idx_znode" alt="" coords="295,157,439,184"/>
<area shape="rect" id="node21" href="misc_8h.html#abe5c86108a05199a899138767ca1f42a" title="ubifs_zn_dirty" alt="" coords="315,360,418,387"/>
<area shape="rect" id="node22" href="misc_8h.html#a21390e9f6e0627bc617f177cee88fad7" title="ubifs_zn_cow" alt="" coords="315,5,418,32"/>
<area shape="rect" id="node8" href="ubifs_2debug_8c.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="487,360,608,387"/>
<area shape="rect" id="node9" href="key_8h.html#a06f47822510ef850cb7065778115453c" title="key_type" alt="" coords="672,461,747,488"/>
<area shape="rect" id="node10" href="key_8h.html#a4a12b97ed78e138baf7886a6df7ed50f" title="key_inum" alt="" coords="670,512,749,539"/>
<area shape="rect" id="node11" href="ubifs_2debug_8c.html#ad6af0af711fdb082f6df4eaeb4d82fe6" title="get_key_type" alt="" coords="659,309,759,336"/>
<area shape="rect" id="node12" href="key_8h.html#acddf1ca88d72a37e06c5c608cd084656" title="key_hash" alt="" coords="670,360,749,387"/>
<area shape="rect" id="node13" href="key_8h.html#a10c13375b52dbb12be6f9b685d1d1ba7" title="key_block" alt="" coords="669,411,750,437"/>
<area shape="rect" id="node15" href="ubifs_2io_8c.html#a0b3f089c430db97bbc68e362dc7867c8" title="next_sqnum" alt="" coords="501,259,594,285"/>
<area shape="rect" id="node16" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="656,259,763,285"/>
<area shape="rect" id="node17" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="811,233,896,260"/>
<area shape="rect" id="node20" href="tnc_8c.html#a86f5f773a93872a89b7bab3ff0d096d8" title="insert_old_idx" alt="" coords="496,157,599,184"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_aaab41523ed81f906598dbc52e68444ac_icgraph.png" border="0" usemap="#tnc__commit_8c_aaab41523ed81f906598dbc52e68444ac_icgraph" alt=""/></div>
<map name="tnc__commit_8c_aaab41523ed81f906598dbc52e68444ac_icgraph" id="tnc__commit_8c_aaab41523ed81f906598dbc52e68444ac_icgraph">
<area shape="rect" id="node2" href="tnc__commit_8c.html#ae35ab1b0e8a8676ac825941f36e77bdd" title="layout_leb_in_gaps" alt="" coords="116,233,249,260"/>
<area shape="rect" id="node3" href="tnc__commit_8c.html#aa94160dc8891f55de97cfb630b191ef2" title="layout_in_gaps" alt="" coords="297,233,407,260"/>
<area shape="rect" id="node4" href="tnc__commit_8c.html#a1f7210689e6f040c0b106db3e447e04b" title="layout_commit" alt="" coords="455,233,561,260"/>
<area shape="rect" id="node5" href="ubifs_8h.html#ae1e7a24e81c4fa022a4065530bd77bff" title="ubifs_tnc_start_commit" alt="" coords="609,233,768,260"/>
<area shape="rect" id="node6" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="816,233,903,260"/>
<area shape="rect" id="node7" href="ubifs_2commit_8c.html#a91c88ecee0c3d4a55bbe6669a0caa521" title="run_bg_commit" alt="" coords="958,171,1069,197"/>
<area shape="rect" id="node13" href="ubifs_8h.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="951,259,1076,285"/>
<area shape="rect" id="node8" href="ubifs_8h.html#ad1d2abb94e9ca171f253ba64fdbf7aa6" title="ubifs_bg_thread" alt="" coords="1319,107,1433,133"/>
<area shape="rect" id="node9" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="1532,56,1625,83"/>
<area shape="rect" id="node11" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="1516,107,1641,133"/>
<area shape="rect" id="node10" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1728,5,1837,32"/>
<area shape="rect" id="node12" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="1721,56,1844,83"/>
<area shape="rect" id="node14" href="ubifs_2super_8c.html#a5f9c4c32c42dc338c1b84b87b7098105" title="ubifs_sync_fs" alt="" coords="1135,335,1238,361"/>
<area shape="rect" id="node15" href="ubifs_2recovery_8c.html#acb6fbec748694453a2e4b3ed2be6cc6b" title="grab_empty_leb" alt="" coords="1129,233,1244,260"/>
<area shape="rect" id="node16" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="1297,183,1455,209"/>
<area shape="rect" id="node25" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="1313,309,1439,336"/>
<area shape="rect" id="node45" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="1124,487,1249,513"/>
<area shape="rect" id="node17" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="1515,461,1642,488"/>
<area shape="rect" id="node18" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1911,613,2044,640"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1736,563,1829,589"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1741,411,1824,437"/>
<area shape="rect" id="node22" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1738,613,1827,640"/>
<area shape="rect" id="node23" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1735,461,1831,488"/>
<area shape="rect" id="node24" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1731,512,1834,539"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1934,917,2021,944"/>
<area shape="rect" id="node26" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="1521,588,1637,615"/>
<area shape="rect" id="node31" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="1510,157,1647,184"/>
<area shape="rect" id="node34" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="1507,208,1650,235"/>
<area shape="rect" id="node37" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="1515,309,1642,336"/>
<area shape="rect" id="node39" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="1519,1228,1639,1255"/>
<area shape="rect" id="node40" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="1517,259,1641,285"/>
<area shape="rect" id="node41" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="1506,1155,1651,1181"/>
<area shape="rect" id="node43" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="1503,1016,1655,1043"/>
<area shape="rect" id="node27" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1737,765,1828,792"/>
<area shape="rect" id="node28" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1744,816,1821,843"/>
<area shape="rect" id="node29" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1737,664,1828,691"/>
<area shape="rect" id="node30" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1739,715,1826,741"/>
<area shape="rect" id="node32" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="1733,107,1832,133"/>
<area shape="rect" id="node33" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1927,259,2027,285"/>
<area shape="rect" id="node35" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="1721,208,1844,235"/>
<area shape="rect" id="node36" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="1707,157,1858,184"/>
<area shape="rect" id="node38" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1729,309,1836,336"/>
<area shape="rect" id="node42" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="1733,1221,1832,1248"/>
<area shape="rect" id="node44" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="1734,1171,1831,1197"/>
<area shape="rect" id="node46" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="1509,788,1648,815"/>
<area shape="rect" id="node47" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="1721,1069,1844,1096"/>
<area shape="rect" id="node48" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="1726,1120,1839,1147"/>
<area shape="rect" id="node49" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="1743,968,1823,995"/>
<area shape="rect" id="node50" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="1703,1019,1863,1045"/>
</map>
</div>

</div>
</div>
<a id="ad50b2f657e8580a4de9d921e8866a3b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad50b2f657e8580a4de9d921e8866a3b9">&#9670;&nbsp;</a></span>find_first_dirty()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structubifs__znode.html">ubifs_znode</a>* find_first_dirty </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__znode.html">ubifs_znode</a> *&#160;</td>
          <td class="paramname"><em>znode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>find_first_dirty - find first dirty znode. : znode to begin searching from </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_ad50b2f657e8580a4de9d921e8866a3b9_cgraph.png" border="0" usemap="#tnc__commit_8c_ad50b2f657e8580a4de9d921e8866a3b9_cgraph" alt=""/></div>
<map name="tnc__commit_8c_ad50b2f657e8580a4de9d921e8866a3b9_cgraph" id="tnc__commit_8c_ad50b2f657e8580a4de9d921e8866a3b9_cgraph">
<area shape="rect" id="node2" href="misc_8h.html#abe5c86108a05199a899138767ca1f42a" title="ubifs_zn_dirty" alt="" coords="157,5,260,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_ad50b2f657e8580a4de9d921e8866a3b9_icgraph.png" border="0" usemap="#tnc__commit_8c_ad50b2f657e8580a4de9d921e8866a3b9_icgraph" alt=""/></div>
<map name="tnc__commit_8c_ad50b2f657e8580a4de9d921e8866a3b9_icgraph" id="tnc__commit_8c_ad50b2f657e8580a4de9d921e8866a3b9_icgraph">
<area shape="rect" id="node2" href="tnc__commit_8c.html#a38afc10e5e3f36e9ef617ceeb9e74871" title="find_next_dirty" alt="" coords="157,259,264,285"/>
<area shape="rect" id="node3" href="tnc__commit_8c.html#a64748c798bfc8c8fd1ee5bedae19a5b3" title="get_znodes_to_commit" alt="" coords="312,284,469,311"/>
<area shape="rect" id="node4" href="ubifs_8h.html#ae1e7a24e81c4fa022a4065530bd77bff" title="ubifs_tnc_start_commit" alt="" coords="517,284,676,311"/>
<area shape="rect" id="node5" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="724,284,811,311"/>
<area shape="rect" id="node6" href="ubifs_2commit_8c.html#a91c88ecee0c3d4a55bbe6669a0caa521" title="run_bg_commit" alt="" coords="866,221,977,248"/>
<area shape="rect" id="node12" href="ubifs_8h.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="859,309,984,336"/>
<area shape="rect" id="node7" href="ubifs_8h.html#ad1d2abb94e9ca171f253ba64fdbf7aa6" title="ubifs_bg_thread" alt="" coords="1227,183,1341,209"/>
<area shape="rect" id="node8" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="1440,132,1533,159"/>
<area shape="rect" id="node10" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="1424,183,1549,209"/>
<area shape="rect" id="node9" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1636,5,1745,32"/>
<area shape="rect" id="node11" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="1629,56,1752,83"/>
<area shape="rect" id="node13" href="ubifs_2super_8c.html#a5f9c4c32c42dc338c1b84b87b7098105" title="ubifs_sync_fs" alt="" coords="1043,385,1146,412"/>
<area shape="rect" id="node14" href="ubifs_2recovery_8c.html#acb6fbec748694453a2e4b3ed2be6cc6b" title="grab_empty_leb" alt="" coords="1037,233,1152,260"/>
<area shape="rect" id="node15" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="1205,233,1363,260"/>
<area shape="rect" id="node24" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="1221,1069,1347,1096"/>
<area shape="rect" id="node44" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="1032,335,1157,361"/>
<area shape="rect" id="node16" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="1423,233,1550,260"/>
<area shape="rect" id="node17" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1819,348,1952,375"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1644,157,1737,184"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1649,360,1732,387"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1646,208,1735,235"/>
<area shape="rect" id="node22" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1643,259,1739,285"/>
<area shape="rect" id="node23" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1639,309,1742,336"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1842,867,1929,893"/>
<area shape="rect" id="node25" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="1429,385,1545,412"/>
<area shape="rect" id="node30" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="1418,1309,1555,1336"/>
<area shape="rect" id="node33" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="1415,1171,1558,1197"/>
<area shape="rect" id="node36" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="1423,1233,1550,1260"/>
<area shape="rect" id="node38" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="1427,1069,1547,1096"/>
<area shape="rect" id="node39" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="1425,1120,1549,1147"/>
<area shape="rect" id="node40" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="1414,943,1559,969"/>
<area shape="rect" id="node42" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="1411,1019,1563,1045"/>
<area shape="rect" id="node26" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1645,411,1736,437"/>
<area shape="rect" id="node27" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1652,461,1729,488"/>
<area shape="rect" id="node28" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1645,512,1736,539"/>
<area shape="rect" id="node29" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1647,563,1734,589"/>
<area shape="rect" id="node31" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="1641,1323,1740,1349"/>
<area shape="rect" id="node32" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1835,1120,1935,1147"/>
<area shape="rect" id="node34" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="1629,1171,1752,1197"/>
<area shape="rect" id="node35" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="1615,1221,1766,1248"/>
<area shape="rect" id="node37" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1637,1272,1744,1299"/>
<area shape="rect" id="node41" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="1641,917,1740,944"/>
<area shape="rect" id="node43" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="1642,1019,1739,1045"/>
<area shape="rect" id="node45" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="1417,563,1556,589"/>
<area shape="rect" id="node46" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="1629,715,1752,741"/>
<area shape="rect" id="node47" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="1634,765,1747,792"/>
<area shape="rect" id="node48" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="1651,816,1731,843"/>
<area shape="rect" id="node49" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="1611,664,1771,691"/>
<area shape="rect" id="node50" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="1830,639,1941,665"/>
</map>
</div>

</div>
</div>
<a id="a38afc10e5e3f36e9ef617ceeb9e74871"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38afc10e5e3f36e9ef617ceeb9e74871">&#9670;&nbsp;</a></span>find_next_dirty()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structubifs__znode.html">ubifs_znode</a>* find_next_dirty </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__znode.html">ubifs_znode</a> *&#160;</td>
          <td class="paramname"><em>znode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>find_next_dirty - find next dirty znode. : znode to begin searching from </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_a38afc10e5e3f36e9ef617ceeb9e74871_cgraph.png" border="0" usemap="#tnc__commit_8c_a38afc10e5e3f36e9ef617ceeb9e74871_cgraph" alt=""/></div>
<map name="tnc__commit_8c_a38afc10e5e3f36e9ef617ceeb9e74871_cgraph" id="tnc__commit_8c_a38afc10e5e3f36e9ef617ceeb9e74871_cgraph">
<area shape="rect" id="node2" href="misc_8h.html#abe5c86108a05199a899138767ca1f42a" title="ubifs_zn_dirty" alt="" coords="312,5,415,32"/>
<area shape="rect" id="node3" href="tnc__commit_8c.html#ad50b2f657e8580a4de9d921e8866a3b9" title="find_first_dirty" alt="" coords="160,31,264,57"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_a38afc10e5e3f36e9ef617ceeb9e74871_icgraph.png" border="0" usemap="#tnc__commit_8c_a38afc10e5e3f36e9ef617ceeb9e74871_icgraph" alt=""/></div>
<map name="tnc__commit_8c_a38afc10e5e3f36e9ef617ceeb9e74871_icgraph" id="tnc__commit_8c_a38afc10e5e3f36e9ef617ceeb9e74871_icgraph">
<area shape="rect" id="node2" href="tnc__commit_8c.html#a64748c798bfc8c8fd1ee5bedae19a5b3" title="get_znodes_to_commit" alt="" coords="160,284,317,311"/>
<area shape="rect" id="node3" href="ubifs_8h.html#ae1e7a24e81c4fa022a4065530bd77bff" title="ubifs_tnc_start_commit" alt="" coords="365,284,524,311"/>
<area shape="rect" id="node4" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="572,284,659,311"/>
<area shape="rect" id="node5" href="ubifs_2commit_8c.html#a91c88ecee0c3d4a55bbe6669a0caa521" title="run_bg_commit" alt="" coords="714,221,825,248"/>
<area shape="rect" id="node11" href="ubifs_8h.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="707,309,832,336"/>
<area shape="rect" id="node6" href="ubifs_8h.html#ad1d2abb94e9ca171f253ba64fdbf7aa6" title="ubifs_bg_thread" alt="" coords="1075,183,1189,209"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="1288,132,1381,159"/>
<area shape="rect" id="node9" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="1272,183,1397,209"/>
<area shape="rect" id="node8" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1484,5,1593,32"/>
<area shape="rect" id="node10" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="1477,56,1600,83"/>
<area shape="rect" id="node12" href="ubifs_2super_8c.html#a5f9c4c32c42dc338c1b84b87b7098105" title="ubifs_sync_fs" alt="" coords="891,385,994,412"/>
<area shape="rect" id="node13" href="ubifs_2recovery_8c.html#acb6fbec748694453a2e4b3ed2be6cc6b" title="grab_empty_leb" alt="" coords="885,233,1000,260"/>
<area shape="rect" id="node14" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="1053,233,1211,260"/>
<area shape="rect" id="node23" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="1069,1120,1195,1147"/>
<area shape="rect" id="node43" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="880,335,1005,361"/>
<area shape="rect" id="node15" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="1271,233,1398,260"/>
<area shape="rect" id="node16" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1681,664,1815,691"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1492,157,1585,184"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1497,309,1580,336"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1494,208,1583,235"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1491,259,1587,285"/>
<area shape="rect" id="node22" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1487,360,1590,387"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1705,968,1791,995"/>
<area shape="rect" id="node24" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="1277,385,1393,412"/>
<area shape="rect" id="node29" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="1266,1272,1403,1299"/>
<area shape="rect" id="node32" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="1263,1323,1406,1349"/>
<area shape="rect" id="node35" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="1271,1171,1398,1197"/>
<area shape="rect" id="node37" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="1275,1120,1395,1147"/>
<area shape="rect" id="node38" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="1273,1221,1397,1248"/>
<area shape="rect" id="node39" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="1262,968,1407,995"/>
<area shape="rect" id="node41" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="1259,1069,1411,1096"/>
<area shape="rect" id="node25" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1493,512,1584,539"/>
<area shape="rect" id="node26" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1500,563,1577,589"/>
<area shape="rect" id="node27" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1493,411,1584,437"/>
<area shape="rect" id="node28" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1495,461,1582,488"/>
<area shape="rect" id="node30" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="1489,1272,1588,1299"/>
<area shape="rect" id="node31" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1698,1221,1798,1248"/>
<area shape="rect" id="node33" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="1477,1323,1600,1349"/>
<area shape="rect" id="node34" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="1463,1373,1614,1400"/>
<area shape="rect" id="node36" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1485,1171,1592,1197"/>
<area shape="rect" id="node40" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="1489,917,1588,944"/>
<area shape="rect" id="node42" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="1490,1069,1587,1096"/>
<area shape="rect" id="node44" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="1265,588,1404,615"/>
<area shape="rect" id="node45" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="1477,765,1600,792"/>
<area shape="rect" id="node46" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="1482,816,1595,843"/>
<area shape="rect" id="node47" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="1499,867,1579,893"/>
<area shape="rect" id="node48" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="1459,664,1619,691"/>
<area shape="rect" id="node49" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="1693,613,1803,640"/>
<area shape="rect" id="node50" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="1667,715,1829,741"/>
</map>
</div>

</div>
</div>
<a id="adbc913319e0b75162b563df6d2b4584f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbc913319e0b75162b563df6d2b4584f">&#9670;&nbsp;</a></span>find_old_idx()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int find_old_idx </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>find_old_idx - find an index node obsoleted since the last commit start. <code></code>: UBIFS file-system description object : LEB number of obsoleted index node : offset of obsoleted index node</p>
<p>Returns %1 if found and %0 otherwise. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_adbc913319e0b75162b563df6d2b4584f_icgraph.png" border="0" usemap="#tnc__commit_8c_adbc913319e0b75162b563df6d2b4584f_icgraph" alt=""/></div>
<map name="tnc__commit_8c_adbc913319e0b75162b563df6d2b4584f_icgraph" id="tnc__commit_8c_adbc913319e0b75162b563df6d2b4584f_icgraph">
<area shape="rect" id="node2" href="tnc__commit_8c.html#a674601c7e9e367fc2e8f38696f9640c8" title="is_idx_node_in_use" alt="" coords="144,284,280,311"/>
<area shape="rect" id="node3" href="tnc__commit_8c.html#ae35ab1b0e8a8676ac825941f36e77bdd" title="layout_leb_in_gaps" alt="" coords="328,284,461,311"/>
<area shape="rect" id="node4" href="tnc__commit_8c.html#aa94160dc8891f55de97cfb630b191ef2" title="layout_in_gaps" alt="" coords="509,284,619,311"/>
<area shape="rect" id="node5" href="tnc__commit_8c.html#a1f7210689e6f040c0b106db3e447e04b" title="layout_commit" alt="" coords="667,284,773,311"/>
<area shape="rect" id="node6" href="ubifs_8h.html#ae1e7a24e81c4fa022a4065530bd77bff" title="ubifs_tnc_start_commit" alt="" coords="821,284,980,311"/>
<area shape="rect" id="node7" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="1028,284,1115,311"/>
<area shape="rect" id="node8" href="ubifs_2commit_8c.html#a91c88ecee0c3d4a55bbe6669a0caa521" title="run_bg_commit" alt="" coords="1170,221,1281,248"/>
<area shape="rect" id="node14" href="ubifs_8h.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="1163,309,1288,336"/>
<area shape="rect" id="node9" href="ubifs_8h.html#ad1d2abb94e9ca171f253ba64fdbf7aa6" title="ubifs_bg_thread" alt="" coords="1531,183,1645,209"/>
<area shape="rect" id="node10" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="1744,132,1837,159"/>
<area shape="rect" id="node12" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="1728,183,1853,209"/>
<area shape="rect" id="node11" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1935,5,2045,32"/>
<area shape="rect" id="node13" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="1929,56,2051,83"/>
<area shape="rect" id="node15" href="ubifs_2super_8c.html#a5f9c4c32c42dc338c1b84b87b7098105" title="ubifs_sync_fs" alt="" coords="1347,335,1450,361"/>
<area shape="rect" id="node16" href="ubifs_2recovery_8c.html#acb6fbec748694453a2e4b3ed2be6cc6b" title="grab_empty_leb" alt="" coords="1341,284,1456,311"/>
<area shape="rect" id="node17" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="1509,233,1667,260"/>
<area shape="rect" id="node26" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="1525,968,1651,995"/>
<area shape="rect" id="node46" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="1336,411,1461,437"/>
<area shape="rect" id="node18" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="1727,233,1854,260"/>
<area shape="rect" id="node19" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="2113,411,2247,437"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1943,157,2037,184"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1949,309,2031,336"/>
<area shape="rect" id="node23" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1945,208,2035,235"/>
<area shape="rect" id="node24" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1942,259,2038,285"/>
<area shape="rect" id="node25" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1939,360,2041,387"/>
<area shape="rect" id="node22" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="2137,765,2223,792"/>
<area shape="rect" id="node27" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="1733,385,1849,412"/>
<area shape="rect" id="node32" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="1722,1019,1859,1045"/>
<area shape="rect" id="node35" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="1719,1171,1862,1197"/>
<area shape="rect" id="node38" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="1727,1069,1854,1096"/>
<area shape="rect" id="node40" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="1731,968,1851,995"/>
<area shape="rect" id="node41" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="1729,1120,1853,1147"/>
<area shape="rect" id="node42" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="1718,841,1863,868"/>
<area shape="rect" id="node44" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="1715,917,1867,944"/>
<area shape="rect" id="node28" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1945,512,2035,539"/>
<area shape="rect" id="node29" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1951,563,2029,589"/>
<area shape="rect" id="node30" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1945,411,2035,437"/>
<area shape="rect" id="node31" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1947,461,2033,488"/>
<area shape="rect" id="node33" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="1941,1019,2039,1045"/>
<area shape="rect" id="node34" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="2130,1019,2230,1045"/>
<area shape="rect" id="node36" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="1929,1221,2051,1248"/>
<area shape="rect" id="node37" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="1915,1171,2065,1197"/>
<area shape="rect" id="node39" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1937,1069,2043,1096"/>
<area shape="rect" id="node43" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="1941,816,2039,843"/>
<area shape="rect" id="node45" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="1941,917,2039,944"/>
<area shape="rect" id="node47" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="1721,512,1860,539"/>
<area shape="rect" id="node48" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="1929,613,2051,640"/>
<area shape="rect" id="node49" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="1933,664,2047,691"/>
<area shape="rect" id="node50" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="1950,715,2030,741"/>
</map>
</div>

</div>
</div>
<a id="aabbfd5925b308189c641e1570a2a19f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabbfd5925b308189c641e1570a2a19f7">&#9670;&nbsp;</a></span>free_idx_lebs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int free_idx_lebs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>free_idx_lebs - free unused LEBs after commit end. <code></code>: UBIFS file-system description object</p>
<p>This function returns %0 on success and a negative error code on failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_aabbfd5925b308189c641e1570a2a19f7_cgraph.png" border="0" usemap="#tnc__commit_8c_aabbfd5925b308189c641e1570a2a19f7_cgraph" alt=""/></div>
<map name="tnc__commit_8c_aabbfd5925b308189c641e1570a2a19f7_cgraph" id="tnc__commit_8c_aabbfd5925b308189c641e1570a2a19f7_cgraph">
<area shape="rect" id="node2" href="tnc__commit_8c.html#a045e506a5e968ca24069299455ff0abf" title="free_unused_idx_lebs" alt="" coords="152,743,300,769"/>
<area shape="rect" id="node3" href="lprops_8c.html#aeb3c0f6274cdeba0c778d57f29ab39bf" title="ubifs_change_one_lp" alt="" coords="348,743,492,769"/>
<area shape="rect" id="node4" href="misc_8h.html#aa89c2768eb94f129c6afbe47420b44ba" title="ubifs_get_lprops" alt="" coords="552,641,669,668"/>
<area shape="rect" id="node5" href="lpt_8c.html#ade4e71b1fffa493cfb997feaff2c0638" title="ubifs_lpt_lookup_dirty" alt="" coords="729,743,877,769"/>
<area shape="rect" id="node9" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="2822,499,2894,525"/>
<area shape="rect" id="node42" href="lprops_8c.html#abfc4c6a75b37762f214cbc91f0ebe664" title="ubifs_change_lp" alt="" coords="553,692,669,719"/>
<area shape="rect" id="node49" href="misc_8h.html#a6dce2c34ec97d74cf4be59e0201bdb3e" title="ubifs_release_lprops" alt="" coords="540,920,681,947"/>
<area shape="rect" id="node6" href="lpt_8c.html#a6d9ea5f42b955fdb68064bc37bd9540d" title="ubifs_read_nnode" alt="" coords="2227,625,2351,652"/>
<area shape="rect" id="node15" href="lpt_8c.html#accd7155d1f9997fb5e6a7fd577fdc0f2" title="dirty_cow_nnode" alt="" coords="925,717,1045,744"/>
<area shape="rect" id="node18" href="lpt_8c.html#a7fd536e4a29b47a6485fc3931f91857b" title="ubifs_get_nnode" alt="" coords="2061,641,2179,668"/>
<area shape="rect" id="node19" href="lpt_8c.html#ad8f891756dae6c6dceeb51fb917b023b" title="ubifs_get_pnode" alt="" coords="927,553,1044,580"/>
<area shape="rect" id="node37" href="lpt_8c.html#ac60e8c2b5dbc5ab11045f313bcc441a0" title="dirty_cow_pnode" alt="" coords="925,667,1045,693"/>
<area shape="rect" id="node7" href="lpt_8c.html#a9f9e5388fe8c2966b4517e0b243b9ce6" title="calc_nnode_num_from\l_parent" alt="" coords="2591,673,2744,714"/>
<area shape="rect" id="node8" href="ubifs_2io_8c.html#ab6a2a3c4a79d6d4c52350540437d3cb3" title="ubifs_leb_read" alt="" coords="2416,549,2523,576"/>
<area shape="rect" id="node10" href="lpt_8c.html#a0d29b2eba67308c09e6c7e05ad2b63b1" title="ubifs_unpack_nnode" alt="" coords="2399,397,2540,424"/>
<area shape="rect" id="node14" href="lpt_8c.html#ad905cc71245ecfb3152a844c581d3e12" title="validate_nnode" alt="" coords="2415,701,2524,728"/>
<area shape="rect" id="node11" href="lpt_8c.html#a96436eaf7459ebef6525d09761a38d2c" title="check_lpt_type" alt="" coords="2612,397,2723,424"/>
<area shape="rect" id="node12" href="lpt_8c.html#af769280c22d887914ee95e9c2e4cc7de" title="ubifs_unpack_bits" alt="" coords="2795,321,2921,348"/>
<area shape="rect" id="node13" href="lpt_8c.html#ac0dcb63535a53346f5364a21cd948dec" title="check_lpt_crc" alt="" coords="2616,296,2719,323"/>
<area shape="rect" id="node16" href="lpt_8c.html#af853639d65479e588832f7abbc932bea" title="ubifs_add_nnode_dirt" alt="" coords="1093,717,1239,744"/>
<area shape="rect" id="node17" href="lpt_8c.html#ae5e7ec1ecf58650a45f5ffb5d4029d10" title="ubifs_add_lpt_dirt" alt="" coords="1304,692,1428,719"/>
<area shape="rect" id="node20" href="lpt_8c.html#a1e838b76fdfdb8c75cbd35ed51bad53c" title="read_pnode" alt="" coords="2244,245,2333,272"/>
<area shape="rect" id="node27" href="lpt_8c.html#a50862af12cdded0c2e3be8cea516be8e" title="update_cats" alt="" coords="1119,515,1213,541"/>
<area shape="rect" id="node21" href="lpt_8c.html#afaa9919aea45f990f706d5a19a7de403" title="calc_pnode_num_from\l_parent" alt="" coords="2591,107,2744,149"/>
<area shape="rect" id="node22" href="lprops_8c.html#a7a2c9edc0537908ba98fe9a7ab5659d8" title="ubifs_categorize_lprops" alt="" coords="2588,195,2747,221"/>
<area shape="rect" id="node23" href="lpt_8c.html#a7d13c8b402e5a787d5f689a01f01725d" title="unpack_pnode" alt="" coords="2416,347,2523,373"/>
<area shape="rect" id="node24" href="lpt_8c.html#aa9b770e270a9dd0d3fa430bcca3eb9b1" title="validate_pnode" alt="" coords="2415,144,2524,171"/>
<area shape="rect" id="node25" href="lpt_8c.html#a60013b08dd0072dd2a70f499427a67d0" title="set_pnode_lnum" alt="" coords="2411,245,2528,272"/>
<area shape="rect" id="node26" href="ubifs_2debug_8c.html#ab2224f946272a25cfacf2607c6502818" title="ubifs_dump_pnode" alt="" coords="2404,296,2535,323"/>
<area shape="rect" id="node28" href="lprops_8c.html#a664f531f8332b3c53d93e25c4e688e09" title="ubifs_add_to_cat" alt="" coords="1305,515,1427,541"/>
<area shape="rect" id="node29" href="lprops_8c.html#afab6b8531eed73f29803f3f00ecb646e" title="add_to_lpt_heap" alt="" coords="1512,515,1629,541"/>
<area shape="rect" id="node30" href="lprops_8c.html#ad0f7bf66835597d0e8e171b0c91b57be" title="get_heap_comp_val" alt="" coords="1875,641,2013,668"/>
<area shape="rect" id="node31" href="lprops_8c.html#aa85b7d6ee17c895f4a592398484654bb" title="move_up_lpt_heap" alt="" coords="1696,515,1827,541"/>
<area shape="rect" id="node32" href="lprops_8c.html#a715a0be6e5e1b99a7bf830fca61a84e2" title="dbg_check_heap" alt="" coords="1701,413,1821,440"/>
<area shape="rect" id="node33" href="ubifs_2debug_8h.html#ad9c4d68015fb8802b1553a53880d43cc" title="dbg_is_chk_gen" alt="" coords="1886,439,2002,465"/>
<area shape="rect" id="node34" href="ubifs_2debug_8h.html#ab66d4ac998d5cd15774f5a22d366e1f1" title="dbg_is_chk_lprops" alt="" coords="1879,489,2009,516"/>
<area shape="rect" id="node35" href="lpt_8c.html#af1c4868152bb6ea9ae7c87e7dad9cede" title="ubifs_lpt_lookup" alt="" coords="1886,591,2002,617"/>
<area shape="rect" id="node36" href="ubifs_2debug_8c.html#a5600b63b8362df17ed46c4e20784fb6c" title="ubifs_dump_heap" alt="" coords="1882,540,2006,567"/>
<area shape="rect" id="node38" href="lpt_8c.html#a0e19e0a4226ca2a2502accf8a120c9fd" title="add_pnode_dirt" alt="" coords="1111,667,1221,693"/>
<area shape="rect" id="node39" href="lpt_8c.html#a1c3d339c703cc7819cf15ac8fbd2c911" title="replace_cats" alt="" coords="1118,616,1214,643"/>
<area shape="rect" id="node40" href="lprops_8c.html#a4a2c2b7e688877c1df8d8f4d49e1728a" title="ubifs_replace_cat" alt="" coords="1304,616,1428,643"/>
<area shape="rect" id="node41" href="lprops_8c.html#a0b65160e0da643b5257b811348f16321" title="lpt_heap_replace" alt="" coords="1511,616,1631,643"/>
<area shape="rect" id="node43" href="lprops_8c.html#a911df1bb1dc58cf096c97ce547539153" title="is_lprops_dirty" alt="" coords="750,641,857,668"/>
<area shape="rect" id="node44" href="lprops_8c.html#a54fa4acd96a49b1bbe2baeac4dbd0c0b" title="ubifs_calc_dark" alt="" coords="747,692,860,719"/>
<area shape="rect" id="node45" href="lprops_8c.html#a2f083caeaebac06c1f51d7c7d34f5c13" title="change_category" alt="" coords="1105,464,1227,491"/>
<area shape="rect" id="node46" href="lprops_8c.html#a1b58cb9915dbbdf9ac60e7a1369d05ab" title="adjust_lpt_heap" alt="" coords="1705,464,1818,491"/>
<area shape="rect" id="node47" href="lprops_8c.html#a88d9d4b260ebb86abbc16675b951f2c1" title="ubifs_remove_from_cat" alt="" coords="1287,413,1445,440"/>
<area shape="rect" id="node48" href="lprops_8c.html#a94e67294df31694767c10db81d4fbd47" title="remove_from_lpt_heap" alt="" coords="1493,413,1648,440"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_aabbfd5925b308189c641e1570a2a19f7_icgraph.png" border="0" usemap="#tnc__commit_8c_aabbfd5925b308189c641e1570a2a19f7_icgraph" alt=""/></div>
<map name="tnc__commit_8c_aabbfd5925b308189c641e1570a2a19f7_icgraph" id="tnc__commit_8c_aabbfd5925b308189c641e1570a2a19f7_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#ae1e7a24e81c4fa022a4065530bd77bff" title="ubifs_tnc_start_commit" alt="" coords="152,247,311,273"/>
<area shape="rect" id="node3" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="359,247,445,273"/>
<area shape="rect" id="node4" href="ubifs_2commit_8c.html#a91c88ecee0c3d4a55bbe6669a0caa521" title="run_bg_commit" alt="" coords="501,184,611,211"/>
<area shape="rect" id="node10" href="ubifs_8h.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="493,272,619,299"/>
<area shape="rect" id="node5" href="ubifs_8h.html#ad1d2abb94e9ca171f253ba64fdbf7aa6" title="ubifs_bg_thread" alt="" coords="861,145,976,172"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="1075,120,1168,147"/>
<area shape="rect" id="node8" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="1059,171,1184,197"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1271,5,1380,32"/>
<area shape="rect" id="node9" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="1264,56,1387,83"/>
<area shape="rect" id="node11" href="ubifs_2super_8c.html#a5f9c4c32c42dc338c1b84b87b7098105" title="ubifs_sync_fs" alt="" coords="678,196,781,223"/>
<area shape="rect" id="node12" href="ubifs_2recovery_8c.html#acb6fbec748694453a2e4b3ed2be6cc6b" title="grab_empty_leb" alt="" coords="672,297,787,324"/>
<area shape="rect" id="node13" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="840,233,997,260"/>
<area shape="rect" id="node22" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="856,1171,981,1197"/>
<area shape="rect" id="node42" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="667,399,792,425"/>
<area shape="rect" id="node14" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="1058,233,1185,260"/>
<area shape="rect" id="node15" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1468,436,1601,463"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1279,208,1372,235"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1284,157,1367,184"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1281,259,1370,285"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1277,309,1373,336"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1274,360,1377,387"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1491,816,1578,843"/>
<area shape="rect" id="node23" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="1063,385,1179,412"/>
<area shape="rect" id="node28" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="1053,1412,1190,1439"/>
<area shape="rect" id="node31" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="1050,1272,1193,1299"/>
<area shape="rect" id="node34" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="1058,1348,1185,1375"/>
<area shape="rect" id="node36" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="1061,1171,1181,1197"/>
<area shape="rect" id="node37" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="1059,1221,1183,1248"/>
<area shape="rect" id="node38" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="1049,968,1194,995"/>
<area shape="rect" id="node40" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="1045,1120,1197,1147"/>
<area shape="rect" id="node24" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1280,411,1371,437"/>
<area shape="rect" id="node25" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1287,461,1364,488"/>
<area shape="rect" id="node26" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1280,512,1371,539"/>
<area shape="rect" id="node27" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1282,563,1369,589"/>
<area shape="rect" id="node29" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="1276,1424,1375,1451"/>
<area shape="rect" id="node30" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1485,1221,1585,1248"/>
<area shape="rect" id="node32" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="1264,1323,1387,1349"/>
<area shape="rect" id="node33" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="1250,1272,1401,1299"/>
<area shape="rect" id="node35" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1272,1373,1379,1400"/>
<area shape="rect" id="node39" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="1276,867,1375,893"/>
<area shape="rect" id="node41" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="1277,1120,1374,1147"/>
<area shape="rect" id="node43" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="1052,613,1191,640"/>
<area shape="rect" id="node44" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="1264,664,1387,691"/>
<area shape="rect" id="node45" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="1269,715,1382,741"/>
<area shape="rect" id="node46" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="1285,765,1365,792"/>
<area shape="rect" id="node47" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="1245,968,1405,995"/>
<area shape="rect" id="node48" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="1479,917,1590,944"/>
<area shape="rect" id="node49" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="1453,993,1616,1020"/>
<area shape="rect" id="node50" href="ubifs_2ioctl_8c.html#a06251cc4602342e44b5ed0a1b39f7e60" title="setflags" alt="" coords="1291,613,1359,640"/>
</map>
</div>

</div>
</div>
<a id="aed7297664da69ab5524f0e53b435d679"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed7297664da69ab5524f0e53b435d679">&#9670;&nbsp;</a></span>free_obsolete_znodes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void free_obsolete_znodes </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>free_obsolete_znodes - free obsolete znodes. <code></code>: UBIFS file-system description object</p>
<p>At the end of commit end, obsolete znodes are freed. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_aed7297664da69ab5524f0e53b435d679_cgraph.png" border="0" usemap="#tnc__commit_8c_aed7297664da69ab5524f0e53b435d679_cgraph" alt=""/></div>
<map name="tnc__commit_8c_aed7297664da69ab5524f0e53b435d679_cgraph" id="tnc__commit_8c_aed7297664da69ab5524f0e53b435d679_cgraph">
<area shape="rect" id="node2" href="misc_8h.html#a85284dff497fd8ebc7ef947efe958eb6" title="ubifs_zn_obsolete" alt="" coords="203,5,329,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_aed7297664da69ab5524f0e53b435d679_icgraph.png" border="0" usemap="#tnc__commit_8c_aed7297664da69ab5524f0e53b435d679_icgraph" alt=""/></div>
<map name="tnc__commit_8c_aed7297664da69ab5524f0e53b435d679_icgraph" id="tnc__commit_8c_aed7297664da69ab5524f0e53b435d679_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#a3e11b3b283926c57ea7d7e7aaf6cabe1" title="ubifs_tnc_end_commit" alt="" coords="203,247,356,273"/>
<area shape="rect" id="node3" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="404,247,491,273"/>
<area shape="rect" id="node4" href="ubifs_2commit_8c.html#a91c88ecee0c3d4a55bbe6669a0caa521" title="run_bg_commit" alt="" coords="546,184,657,211"/>
<area shape="rect" id="node10" href="ubifs_8h.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="539,272,664,299"/>
<area shape="rect" id="node5" href="ubifs_8h.html#ad1d2abb94e9ca171f253ba64fdbf7aa6" title="ubifs_bg_thread" alt="" coords="907,145,1021,172"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="1120,120,1213,147"/>
<area shape="rect" id="node8" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="1104,171,1229,197"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1316,5,1425,32"/>
<area shape="rect" id="node9" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="1309,56,1432,83"/>
<area shape="rect" id="node11" href="ubifs_2super_8c.html#a5f9c4c32c42dc338c1b84b87b7098105" title="ubifs_sync_fs" alt="" coords="723,196,826,223"/>
<area shape="rect" id="node12" href="ubifs_2recovery_8c.html#acb6fbec748694453a2e4b3ed2be6cc6b" title="grab_empty_leb" alt="" coords="717,297,832,324"/>
<area shape="rect" id="node13" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="885,233,1043,260"/>
<area shape="rect" id="node22" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="901,1171,1027,1197"/>
<area shape="rect" id="node42" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="712,399,837,425"/>
<area shape="rect" id="node14" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="1103,233,1230,260"/>
<area shape="rect" id="node15" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1513,436,1647,463"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1324,208,1417,235"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1329,157,1412,184"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1326,259,1415,285"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1323,309,1419,336"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1319,360,1422,387"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1537,816,1623,843"/>
<area shape="rect" id="node23" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="1109,385,1225,412"/>
<area shape="rect" id="node28" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="1098,1412,1235,1439"/>
<area shape="rect" id="node31" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="1095,1272,1238,1299"/>
<area shape="rect" id="node34" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="1103,1348,1230,1375"/>
<area shape="rect" id="node36" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="1107,1171,1227,1197"/>
<area shape="rect" id="node37" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="1105,1221,1229,1248"/>
<area shape="rect" id="node38" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="1094,968,1239,995"/>
<area shape="rect" id="node40" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="1091,1120,1243,1147"/>
<area shape="rect" id="node24" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1325,411,1416,437"/>
<area shape="rect" id="node25" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1332,461,1409,488"/>
<area shape="rect" id="node26" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1325,512,1416,539"/>
<area shape="rect" id="node27" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1327,563,1414,589"/>
<area shape="rect" id="node29" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="1321,1424,1420,1451"/>
<area shape="rect" id="node30" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1530,1221,1630,1248"/>
<area shape="rect" id="node32" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="1309,1323,1432,1349"/>
<area shape="rect" id="node33" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="1295,1272,1446,1299"/>
<area shape="rect" id="node35" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1317,1373,1424,1400"/>
<area shape="rect" id="node39" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="1321,867,1420,893"/>
<area shape="rect" id="node41" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="1322,1120,1419,1147"/>
<area shape="rect" id="node43" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="1097,613,1236,640"/>
<area shape="rect" id="node44" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="1309,664,1432,691"/>
<area shape="rect" id="node45" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="1314,715,1427,741"/>
<area shape="rect" id="node46" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="1331,765,1411,792"/>
<area shape="rect" id="node47" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="1291,968,1451,995"/>
<area shape="rect" id="node48" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="1525,917,1635,944"/>
<area shape="rect" id="node49" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="1499,993,1661,1020"/>
<area shape="rect" id="node50" href="ubifs_2ioctl_8c.html#a06251cc4602342e44b5ed0a1b39f7e60" title="setflags" alt="" coords="1337,613,1405,640"/>
</map>
</div>

</div>
</div>
<a id="a045e506a5e968ca24069299455ff0abf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a045e506a5e968ca24069299455ff0abf">&#9670;&nbsp;</a></span>free_unused_idx_lebs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int free_unused_idx_lebs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>free_unused_idx_lebs - free unused LEBs that were allocated for the commit. <code></code>: UBIFS file-system description object</p>
<p>It is possible that we allocate more empty LEBs for the commit than we need. This functions frees the surplus.</p>
<p>This function returns %0 on success and a negative error code on failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_a045e506a5e968ca24069299455ff0abf_cgraph.png" border="0" usemap="#tnc__commit_8c_a045e506a5e968ca24069299455ff0abf_cgraph" alt=""/></div>
<map name="tnc__commit_8c_a045e506a5e968ca24069299455ff0abf_cgraph" id="tnc__commit_8c_a045e506a5e968ca24069299455ff0abf_cgraph">
<area shape="rect" id="node2" href="lprops_8c.html#aeb3c0f6274cdeba0c778d57f29ab39bf" title="ubifs_change_one_lp" alt="" coords="201,743,345,769"/>
<area shape="rect" id="node3" href="misc_8h.html#aa89c2768eb94f129c6afbe47420b44ba" title="ubifs_get_lprops" alt="" coords="405,641,523,668"/>
<area shape="rect" id="node4" href="lpt_8c.html#ade4e71b1fffa493cfb997feaff2c0638" title="ubifs_lpt_lookup_dirty" alt="" coords="583,743,731,769"/>
<area shape="rect" id="node8" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="2675,499,2747,525"/>
<area shape="rect" id="node41" href="lprops_8c.html#abfc4c6a75b37762f214cbc91f0ebe664" title="ubifs_change_lp" alt="" coords="406,692,522,719"/>
<area shape="rect" id="node48" href="misc_8h.html#a6dce2c34ec97d74cf4be59e0201bdb3e" title="ubifs_release_lprops" alt="" coords="393,920,535,947"/>
<area shape="rect" id="node5" href="lpt_8c.html#a6d9ea5f42b955fdb68064bc37bd9540d" title="ubifs_read_nnode" alt="" coords="2080,625,2204,652"/>
<area shape="rect" id="node14" href="lpt_8c.html#accd7155d1f9997fb5e6a7fd577fdc0f2" title="dirty_cow_nnode" alt="" coords="779,717,899,744"/>
<area shape="rect" id="node17" href="lpt_8c.html#a7fd536e4a29b47a6485fc3931f91857b" title="ubifs_get_nnode" alt="" coords="1915,641,2032,668"/>
<area shape="rect" id="node18" href="lpt_8c.html#ad8f891756dae6c6dceeb51fb917b023b" title="ubifs_get_pnode" alt="" coords="780,553,897,580"/>
<area shape="rect" id="node36" href="lpt_8c.html#ac60e8c2b5dbc5ab11045f313bcc441a0" title="dirty_cow_pnode" alt="" coords="779,667,899,693"/>
<area shape="rect" id="node6" href="lpt_8c.html#a9f9e5388fe8c2966b4517e0b243b9ce6" title="calc_nnode_num_from\l_parent" alt="" coords="2444,673,2597,714"/>
<area shape="rect" id="node7" href="ubifs_2io_8c.html#ab6a2a3c4a79d6d4c52350540437d3cb3" title="ubifs_leb_read" alt="" coords="2269,549,2376,576"/>
<area shape="rect" id="node9" href="lpt_8c.html#a0d29b2eba67308c09e6c7e05ad2b63b1" title="ubifs_unpack_nnode" alt="" coords="2252,397,2393,424"/>
<area shape="rect" id="node13" href="lpt_8c.html#ad905cc71245ecfb3152a844c581d3e12" title="validate_nnode" alt="" coords="2268,701,2377,728"/>
<area shape="rect" id="node10" href="lpt_8c.html#a96436eaf7459ebef6525d09761a38d2c" title="check_lpt_type" alt="" coords="2465,397,2576,424"/>
<area shape="rect" id="node11" href="lpt_8c.html#af769280c22d887914ee95e9c2e4cc7de" title="ubifs_unpack_bits" alt="" coords="2648,321,2775,348"/>
<area shape="rect" id="node12" href="lpt_8c.html#ac0dcb63535a53346f5364a21cd948dec" title="check_lpt_crc" alt="" coords="2469,296,2572,323"/>
<area shape="rect" id="node15" href="lpt_8c.html#af853639d65479e588832f7abbc932bea" title="ubifs_add_nnode_dirt" alt="" coords="947,717,1092,744"/>
<area shape="rect" id="node16" href="lpt_8c.html#ae5e7ec1ecf58650a45f5ffb5d4029d10" title="ubifs_add_lpt_dirt" alt="" coords="1157,692,1281,719"/>
<area shape="rect" id="node19" href="lpt_8c.html#a1e838b76fdfdb8c75cbd35ed51bad53c" title="read_pnode" alt="" coords="2097,245,2187,272"/>
<area shape="rect" id="node26" href="lpt_8c.html#a50862af12cdded0c2e3be8cea516be8e" title="update_cats" alt="" coords="973,515,1066,541"/>
<area shape="rect" id="node20" href="lpt_8c.html#afaa9919aea45f990f706d5a19a7de403" title="calc_pnode_num_from\l_parent" alt="" coords="2444,107,2597,149"/>
<area shape="rect" id="node21" href="lprops_8c.html#a7a2c9edc0537908ba98fe9a7ab5659d8" title="ubifs_categorize_lprops" alt="" coords="2441,195,2600,221"/>
<area shape="rect" id="node22" href="lpt_8c.html#a7d13c8b402e5a787d5f689a01f01725d" title="unpack_pnode" alt="" coords="2269,347,2376,373"/>
<area shape="rect" id="node23" href="lpt_8c.html#aa9b770e270a9dd0d3fa430bcca3eb9b1" title="validate_pnode" alt="" coords="2268,144,2377,171"/>
<area shape="rect" id="node24" href="lpt_8c.html#a60013b08dd0072dd2a70f499427a67d0" title="set_pnode_lnum" alt="" coords="2264,245,2381,272"/>
<area shape="rect" id="node25" href="ubifs_2debug_8c.html#ab2224f946272a25cfacf2607c6502818" title="ubifs_dump_pnode" alt="" coords="2257,296,2388,323"/>
<area shape="rect" id="node27" href="lprops_8c.html#a664f531f8332b3c53d93e25c4e688e09" title="ubifs_add_to_cat" alt="" coords="1159,515,1280,541"/>
<area shape="rect" id="node28" href="lprops_8c.html#afab6b8531eed73f29803f3f00ecb646e" title="add_to_lpt_heap" alt="" coords="1365,515,1483,541"/>
<area shape="rect" id="node29" href="lprops_8c.html#ad0f7bf66835597d0e8e171b0c91b57be" title="get_heap_comp_val" alt="" coords="1728,641,1867,668"/>
<area shape="rect" id="node30" href="lprops_8c.html#aa85b7d6ee17c895f4a592398484654bb" title="move_up_lpt_heap" alt="" coords="1549,515,1680,541"/>
<area shape="rect" id="node31" href="lprops_8c.html#a715a0be6e5e1b99a7bf830fca61a84e2" title="dbg_check_heap" alt="" coords="1555,413,1675,440"/>
<area shape="rect" id="node32" href="ubifs_2debug_8h.html#ad9c4d68015fb8802b1553a53880d43cc" title="dbg_is_chk_gen" alt="" coords="1739,439,1855,465"/>
<area shape="rect" id="node33" href="ubifs_2debug_8h.html#ab66d4ac998d5cd15774f5a22d366e1f1" title="dbg_is_chk_lprops" alt="" coords="1732,489,1863,516"/>
<area shape="rect" id="node34" href="lpt_8c.html#af1c4868152bb6ea9ae7c87e7dad9cede" title="ubifs_lpt_lookup" alt="" coords="1739,591,1855,617"/>
<area shape="rect" id="node35" href="ubifs_2debug_8c.html#a5600b63b8362df17ed46c4e20784fb6c" title="ubifs_dump_heap" alt="" coords="1735,540,1859,567"/>
<area shape="rect" id="node37" href="lpt_8c.html#a0e19e0a4226ca2a2502accf8a120c9fd" title="add_pnode_dirt" alt="" coords="964,667,1075,693"/>
<area shape="rect" id="node38" href="lpt_8c.html#a1c3d339c703cc7819cf15ac8fbd2c911" title="replace_cats" alt="" coords="971,616,1067,643"/>
<area shape="rect" id="node39" href="lprops_8c.html#a4a2c2b7e688877c1df8d8f4d49e1728a" title="ubifs_replace_cat" alt="" coords="1157,616,1281,643"/>
<area shape="rect" id="node40" href="lprops_8c.html#a0b65160e0da643b5257b811348f16321" title="lpt_heap_replace" alt="" coords="1364,616,1484,643"/>
<area shape="rect" id="node42" href="lprops_8c.html#a911df1bb1dc58cf096c97ce547539153" title="is_lprops_dirty" alt="" coords="603,641,710,668"/>
<area shape="rect" id="node43" href="lprops_8c.html#a54fa4acd96a49b1bbe2baeac4dbd0c0b" title="ubifs_calc_dark" alt="" coords="600,692,713,719"/>
<area shape="rect" id="node44" href="lprops_8c.html#a2f083caeaebac06c1f51d7c7d34f5c13" title="change_category" alt="" coords="959,464,1080,491"/>
<area shape="rect" id="node45" href="lprops_8c.html#a1b58cb9915dbbdf9ac60e7a1369d05ab" title="adjust_lpt_heap" alt="" coords="1558,464,1671,491"/>
<area shape="rect" id="node46" href="lprops_8c.html#a88d9d4b260ebb86abbc16675b951f2c1" title="ubifs_remove_from_cat" alt="" coords="1140,413,1299,440"/>
<area shape="rect" id="node47" href="lprops_8c.html#a94e67294df31694767c10db81d4fbd47" title="remove_from_lpt_heap" alt="" coords="1347,413,1501,440"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_a045e506a5e968ca24069299455ff0abf_icgraph.png" border="0" usemap="#tnc__commit_8c_a045e506a5e968ca24069299455ff0abf_icgraph" alt=""/></div>
<map name="tnc__commit_8c_a045e506a5e968ca24069299455ff0abf_icgraph" id="tnc__commit_8c_a045e506a5e968ca24069299455ff0abf_icgraph">
<area shape="rect" id="node2" href="tnc__commit_8c.html#aabbfd5925b308189c641e1570a2a19f7" title="free_idx_lebs" alt="" coords="201,259,300,285"/>
<area shape="rect" id="node3" href="ubifs_8h.html#ae1e7a24e81c4fa022a4065530bd77bff" title="ubifs_tnc_start_commit" alt="" coords="348,284,507,311"/>
<area shape="rect" id="node4" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="555,284,641,311"/>
<area shape="rect" id="node5" href="ubifs_2commit_8c.html#a91c88ecee0c3d4a55bbe6669a0caa521" title="run_bg_commit" alt="" coords="697,221,807,248"/>
<area shape="rect" id="node11" href="ubifs_8h.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="689,309,815,336"/>
<area shape="rect" id="node6" href="ubifs_8h.html#ad1d2abb94e9ca171f253ba64fdbf7aa6" title="ubifs_bg_thread" alt="" coords="1057,183,1172,209"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="1271,132,1364,159"/>
<area shape="rect" id="node9" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="1255,183,1380,209"/>
<area shape="rect" id="node8" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1467,5,1576,32"/>
<area shape="rect" id="node10" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="1460,56,1583,83"/>
<area shape="rect" id="node12" href="ubifs_2super_8c.html#a5f9c4c32c42dc338c1b84b87b7098105" title="ubifs_sync_fs" alt="" coords="874,385,977,412"/>
<area shape="rect" id="node13" href="ubifs_2recovery_8c.html#acb6fbec748694453a2e4b3ed2be6cc6b" title="grab_empty_leb" alt="" coords="868,233,983,260"/>
<area shape="rect" id="node14" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="1036,233,1193,260"/>
<area shape="rect" id="node23" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="1052,1120,1177,1147"/>
<area shape="rect" id="node43" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="863,335,988,361"/>
<area shape="rect" id="node15" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="1254,233,1381,260"/>
<area shape="rect" id="node16" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1664,664,1797,691"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1475,157,1568,184"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1480,309,1563,336"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1477,208,1566,235"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1473,259,1569,285"/>
<area shape="rect" id="node22" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1470,360,1573,387"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1687,968,1774,995"/>
<area shape="rect" id="node24" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="1259,385,1375,412"/>
<area shape="rect" id="node29" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="1249,1272,1386,1299"/>
<area shape="rect" id="node32" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="1246,1323,1389,1349"/>
<area shape="rect" id="node35" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="1254,1171,1381,1197"/>
<area shape="rect" id="node37" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="1257,1120,1377,1147"/>
<area shape="rect" id="node38" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="1255,1221,1379,1248"/>
<area shape="rect" id="node39" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="1245,968,1390,995"/>
<area shape="rect" id="node41" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="1241,1069,1393,1096"/>
<area shape="rect" id="node25" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1476,512,1567,539"/>
<area shape="rect" id="node26" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1483,563,1560,589"/>
<area shape="rect" id="node27" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1476,411,1567,437"/>
<area shape="rect" id="node28" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1478,461,1565,488"/>
<area shape="rect" id="node30" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="1472,1272,1571,1299"/>
<area shape="rect" id="node31" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1681,1221,1781,1248"/>
<area shape="rect" id="node33" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="1460,1323,1583,1349"/>
<area shape="rect" id="node34" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="1446,1373,1597,1400"/>
<area shape="rect" id="node36" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1468,1171,1575,1197"/>
<area shape="rect" id="node40" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="1472,917,1571,944"/>
<area shape="rect" id="node42" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="1473,1069,1570,1096"/>
<area shape="rect" id="node44" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="1248,588,1387,615"/>
<area shape="rect" id="node45" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="1460,765,1583,792"/>
<area shape="rect" id="node46" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="1465,816,1578,843"/>
<area shape="rect" id="node47" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="1481,867,1561,893"/>
<area shape="rect" id="node48" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="1441,664,1601,691"/>
<area shape="rect" id="node49" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="1675,613,1786,640"/>
<area shape="rect" id="node50" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="1649,715,1812,741"/>
</map>
</div>

</div>
</div>
<a id="aa01412c139f0a3f0aaf0a6d83e1415c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa01412c139f0a3f0aaf0a6d83e1415c5">&#9670;&nbsp;</a></span>get_leb_cnt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int get_leb_cnt </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cnt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>get_leb_cnt - calculate the number of empty LEBs needed to commit. <code></code>: UBIFS file-system description object : number of znodes to commit</p>
<p>This function returns the number of empty LEBs needed to commit  znodes to the current index head. The number is not exact and may be more than needed. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_aa01412c139f0a3f0aaf0a6d83e1415c5_icgraph.png" border="0" usemap="#tnc__commit_8c_aa01412c139f0a3f0aaf0a6d83e1415c5_icgraph" alt=""/></div>
<map name="tnc__commit_8c_aa01412c139f0a3f0aaf0a6d83e1415c5_icgraph" id="tnc__commit_8c_aa01412c139f0a3f0aaf0a6d83e1415c5_icgraph">
<area shape="rect" id="node2" href="tnc__commit_8c.html#aa94160dc8891f55de97cfb630b191ef2" title="layout_in_gaps" alt="" coords="143,208,252,235"/>
<area shape="rect" id="node50" href="tnc__commit_8c.html#a82dea2876366b839f177356c01a9c031" title="alloc_idx_lebs" alt="" coords="301,259,405,285"/>
<area shape="rect" id="node3" href="tnc__commit_8c.html#a1f7210689e6f040c0b106db3e447e04b" title="layout_commit" alt="" coords="300,208,407,235"/>
<area shape="rect" id="node4" href="ubifs_8h.html#ae1e7a24e81c4fa022a4065530bd77bff" title="ubifs_tnc_start_commit" alt="" coords="455,233,613,260"/>
<area shape="rect" id="node5" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="661,233,748,260"/>
<area shape="rect" id="node6" href="ubifs_2commit_8c.html#a91c88ecee0c3d4a55bbe6669a0caa521" title="run_bg_commit" alt="" coords="803,164,914,191"/>
<area shape="rect" id="node12" href="ubifs_8h.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="796,259,921,285"/>
<area shape="rect" id="node7" href="ubifs_8h.html#ad1d2abb94e9ca171f253ba64fdbf7aa6" title="ubifs_bg_thread" alt="" coords="1164,107,1279,133"/>
<area shape="rect" id="node8" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="1377,56,1471,83"/>
<area shape="rect" id="node10" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="1361,107,1487,133"/>
<area shape="rect" id="node9" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1573,5,1683,32"/>
<area shape="rect" id="node11" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="1567,56,1689,83"/>
<area shape="rect" id="node13" href="ubifs_2super_8c.html#a5f9c4c32c42dc338c1b84b87b7098105" title="ubifs_sync_fs" alt="" coords="981,335,1083,361"/>
<area shape="rect" id="node14" href="ubifs_2recovery_8c.html#acb6fbec748694453a2e4b3ed2be6cc6b" title="grab_empty_leb" alt="" coords="975,233,1089,260"/>
<area shape="rect" id="node15" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="1143,183,1300,209"/>
<area shape="rect" id="node24" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="1159,309,1284,336"/>
<area shape="rect" id="node44" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="969,485,1095,512"/>
<area shape="rect" id="node16" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="1361,461,1487,488"/>
<area shape="rect" id="node17" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1756,613,1889,640"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1581,563,1675,589"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1587,411,1669,437"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1583,613,1673,640"/>
<area shape="rect" id="node22" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1580,461,1676,488"/>
<area shape="rect" id="node23" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1577,512,1679,539"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1779,917,1866,944"/>
<area shape="rect" id="node25" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="1366,588,1482,615"/>
<area shape="rect" id="node30" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="1355,157,1493,184"/>
<area shape="rect" id="node33" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="1353,208,1495,235"/>
<area shape="rect" id="node36" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="1361,309,1487,336"/>
<area shape="rect" id="node38" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="1364,1184,1484,1211"/>
<area shape="rect" id="node39" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="1362,259,1486,285"/>
<area shape="rect" id="node40" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="1351,956,1497,983"/>
<area shape="rect" id="node42" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="1348,883,1500,909"/>
<area shape="rect" id="node26" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1583,765,1673,792"/>
<area shape="rect" id="node27" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1589,816,1667,843"/>
<area shape="rect" id="node28" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1583,664,1673,691"/>
<area shape="rect" id="node29" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1585,715,1671,741"/>
<area shape="rect" id="node31" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="1579,107,1677,133"/>
<area shape="rect" id="node32" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1773,259,1873,285"/>
<area shape="rect" id="node34" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="1567,208,1689,235"/>
<area shape="rect" id="node35" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="1553,157,1703,184"/>
<area shape="rect" id="node37" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1575,309,1681,336"/>
<area shape="rect" id="node41" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="1579,1221,1677,1248"/>
<area shape="rect" id="node43" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="1579,1171,1677,1197"/>
<area shape="rect" id="node45" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="1355,788,1493,815"/>
<area shape="rect" id="node46" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="1567,1069,1689,1096"/>
<area shape="rect" id="node47" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="1571,1120,1685,1147"/>
<area shape="rect" id="node48" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="1588,968,1668,995"/>
<area shape="rect" id="node49" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="1548,1019,1708,1045"/>
</map>
</div>

</div>
</div>
<a id="a64748c798bfc8c8fd1ee5bedae19a5b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64748c798bfc8c8fd1ee5bedae19a5b3">&#9670;&nbsp;</a></span>get_znodes_to_commit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int get_znodes_to_commit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>get_znodes_to_commit - create list of dirty znodes to commit. <code></code>: UBIFS file-system description object</p>
<p>This function returns the number of znodes to commit. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_a64748c798bfc8c8fd1ee5bedae19a5b3_cgraph.png" border="0" usemap="#tnc__commit_8c_a64748c798bfc8c8fd1ee5bedae19a5b3_cgraph" alt=""/></div>
<map name="tnc__commit_8c_a64748c798bfc8c8fd1ee5bedae19a5b3_cgraph" id="tnc__commit_8c_a64748c798bfc8c8fd1ee5bedae19a5b3_cgraph">
<area shape="rect" id="node2" href="tnc__commit_8c.html#ad50b2f657e8580a4de9d921e8866a3b9" title="find_first_dirty" alt="" coords="365,21,469,48"/>
<area shape="rect" id="node4" href="misc_8h.html#a21390e9f6e0627bc617f177cee88fad7" title="ubifs_zn_cow" alt="" coords="213,21,315,48"/>
<area shape="rect" id="node5" href="tnc__commit_8c.html#a38afc10e5e3f36e9ef617ceeb9e74871" title="find_next_dirty" alt="" coords="211,72,317,99"/>
<area shape="rect" id="node3" href="misc_8h.html#abe5c86108a05199a899138767ca1f42a" title="ubifs_zn_dirty" alt="" coords="517,47,620,73"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_a64748c798bfc8c8fd1ee5bedae19a5b3_icgraph.png" border="0" usemap="#tnc__commit_8c_a64748c798bfc8c8fd1ee5bedae19a5b3_icgraph" alt=""/></div>
<map name="tnc__commit_8c_a64748c798bfc8c8fd1ee5bedae19a5b3_icgraph" id="tnc__commit_8c_a64748c798bfc8c8fd1ee5bedae19a5b3_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#ae1e7a24e81c4fa022a4065530bd77bff" title="ubifs_tnc_start_commit" alt="" coords="211,247,369,273"/>
<area shape="rect" id="node3" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="417,247,504,273"/>
<area shape="rect" id="node4" href="ubifs_2commit_8c.html#a91c88ecee0c3d4a55bbe6669a0caa521" title="run_bg_commit" alt="" coords="559,184,670,211"/>
<area shape="rect" id="node10" href="ubifs_8h.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="552,272,677,299"/>
<area shape="rect" id="node5" href="ubifs_8h.html#ad1d2abb94e9ca171f253ba64fdbf7aa6" title="ubifs_bg_thread" alt="" coords="920,145,1035,172"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="1133,120,1227,147"/>
<area shape="rect" id="node8" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="1117,171,1243,197"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1329,5,1439,32"/>
<area shape="rect" id="node9" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="1323,56,1445,83"/>
<area shape="rect" id="node11" href="ubifs_2super_8c.html#a5f9c4c32c42dc338c1b84b87b7098105" title="ubifs_sync_fs" alt="" coords="737,196,839,223"/>
<area shape="rect" id="node12" href="ubifs_2recovery_8c.html#acb6fbec748694453a2e4b3ed2be6cc6b" title="grab_empty_leb" alt="" coords="731,297,845,324"/>
<area shape="rect" id="node13" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="899,233,1056,260"/>
<area shape="rect" id="node22" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="915,1171,1040,1197"/>
<area shape="rect" id="node42" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="725,399,851,425"/>
<area shape="rect" id="node14" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="1117,233,1243,260"/>
<area shape="rect" id="node15" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1527,436,1660,463"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1337,208,1431,235"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1343,157,1425,184"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1339,259,1429,285"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1336,309,1432,336"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1333,360,1435,387"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1550,816,1637,843"/>
<area shape="rect" id="node23" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="1122,385,1238,412"/>
<area shape="rect" id="node28" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="1111,1412,1249,1439"/>
<area shape="rect" id="node31" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="1109,1272,1251,1299"/>
<area shape="rect" id="node34" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="1117,1348,1243,1375"/>
<area shape="rect" id="node36" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="1120,1171,1240,1197"/>
<area shape="rect" id="node37" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="1118,1221,1242,1248"/>
<area shape="rect" id="node38" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="1107,968,1253,995"/>
<area shape="rect" id="node40" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="1104,1120,1256,1147"/>
<area shape="rect" id="node24" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1339,411,1429,437"/>
<area shape="rect" id="node25" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1345,461,1423,488"/>
<area shape="rect" id="node26" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1339,512,1429,539"/>
<area shape="rect" id="node27" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1341,563,1427,589"/>
<area shape="rect" id="node29" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="1335,1424,1433,1451"/>
<area shape="rect" id="node30" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1543,1221,1643,1248"/>
<area shape="rect" id="node32" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="1323,1323,1445,1349"/>
<area shape="rect" id="node33" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="1309,1272,1459,1299"/>
<area shape="rect" id="node35" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1331,1373,1437,1400"/>
<area shape="rect" id="node39" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="1335,867,1433,893"/>
<area shape="rect" id="node41" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="1335,1120,1433,1147"/>
<area shape="rect" id="node43" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="1111,613,1249,640"/>
<area shape="rect" id="node44" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="1323,664,1445,691"/>
<area shape="rect" id="node45" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="1327,715,1441,741"/>
<area shape="rect" id="node46" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="1344,765,1424,792"/>
<area shape="rect" id="node47" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="1304,968,1464,995"/>
<area shape="rect" id="node48" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="1538,917,1649,944"/>
<area shape="rect" id="node49" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="1512,993,1675,1020"/>
<area shape="rect" id="node50" href="ubifs_2ioctl_8c.html#a06251cc4602342e44b5ed0a1b39f7e60" title="setflags" alt="" coords="1350,613,1418,640"/>
</map>
</div>

</div>
</div>
<a id="a674601c7e9e367fc2e8f38696f9640c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a674601c7e9e367fc2e8f38696f9640c8">&#9670;&nbsp;</a></span>is_idx_node_in_use()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int is_idx_node_in_use </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">union <a class="el" href="unionubifs__key.html">ubifs_key</a> *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>is_idx_node_in_use - determine if an index node can be overwritten. <code></code>: UBIFS file-system description object : key of index node : index node level : LEB number of index node : offset of index node</p>
<p>If  /  /  identify an index node that was not part of the old index, then this function returns %0 (obsolete). Else if the index node was part of the old index but is now dirty %1 is returned, else if it is clean %2 is returned. A negative error code is returned on failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_a674601c7e9e367fc2e8f38696f9640c8_cgraph.png" border="0" usemap="#tnc__commit_8c_a674601c7e9e367fc2e8f38696f9640c8_cgraph" alt=""/></div>
<map name="tnc__commit_8c_a674601c7e9e367fc2e8f38696f9640c8_cgraph" id="tnc__commit_8c_a674601c7e9e367fc2e8f38696f9640c8_cgraph">
<area shape="rect" id="node2" href="tnc_8c.html#af4a7fe7d3853972004012eaa58fc7d3f" title="is_idx_node_in_tnc" alt="" coords="189,195,323,221"/>
<area shape="rect" id="node31" href="tnc__commit_8c.html#adbc913319e0b75162b563df6d2b4584f" title="find_old_idx" alt="" coords="211,245,301,272"/>
<area shape="rect" id="node3" href="tnc_8c.html#a9a3d0b0e8f6fb62cd3fc14718c0971db" title="lookup_znode" alt="" coords="371,169,473,196"/>
<area shape="rect" id="node30" href="misc_8h.html#abe5c86108a05199a899138767ca1f42a" title="ubifs_zn_dirty" alt="" coords="371,220,473,247"/>
<area shape="rect" id="node4" href="key_8h.html#a06f47822510ef850cb7065778115453c" title="key_type" alt="" coords="1858,123,1933,149"/>
<area shape="rect" id="node5" href="tnc__misc_8c.html#a59f2b6d42e83b9a23712bb251112eb1b" title="ubifs_load_znode" alt="" coords="856,245,979,272"/>
<area shape="rect" id="node24" href="key_8h.html#a6395510bfa3e62eff60652c9624180e1" title="keys_cmp" alt="" coords="1181,93,1264,120"/>
<area shape="rect" id="node25" href="key_8h.html#a391b7c6e47045b125899fd494b93b2ed" title="is_hash_key" alt="" coords="1175,43,1270,69"/>
<area shape="rect" id="node26" href="tnc__misc_8c.html#a795e1a9542770ea482f128ed03e6a87f" title="ubifs_search_zbranch" alt="" coords="659,144,808,171"/>
<area shape="rect" id="node27" href="tnc_8c.html#a0411d12758cf4d8593fcc3d7c9b80a5d" title="left_znode" alt="" coords="525,296,607,323"/>
<area shape="rect" id="node28" href="tnc_8c.html#ad6989d53af75d6eb9a7b78f6335d3437" title="get_znode" alt="" coords="692,245,775,272"/>
<area shape="rect" id="node29" href="tnc_8c.html#aa498d8d889570756d93ad186764ab7e1" title="right_znode" alt="" coords="521,245,611,272"/>
<area shape="rect" id="node6" href="tnc__misc_8c.html#a8022243db51d1b7cef9ec4ff22bc0f3a" title="read_znode" alt="" coords="1027,245,1116,272"/>
<area shape="rect" id="node7" href="ubifs_2io_8c.html#ab1c29d586db30bacfa2c9a73369a8870" title="ubifs_read_node" alt="" coords="1164,397,1281,424"/>
<area shape="rect" id="node10" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1530,397,1602,424"/>
<area shape="rect" id="node12" href="ubifs_2debug_8c.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="1504,347,1628,373"/>
<area shape="rect" id="node17" href="key_8h.html#a5611c13d648e672825da064c90c8903a" title="key_read" alt="" coords="1699,549,1774,576"/>
<area shape="rect" id="node23" href="misc_8h.html#a1598cadb907a20f9e5dc3e7ee74edb1d" title="ubifs_idx_branch" alt="" coords="1677,207,1797,233"/>
<area shape="rect" id="node8" href="ubifs_2debug_8c.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="1854,492,1937,519"/>
<area shape="rect" id="node9" href="ubifs_2io_8c.html#ab6a2a3c4a79d6d4c52350540437d3cb3" title="ubifs_leb_read" alt="" coords="1339,448,1446,475"/>
<area shape="rect" id="node11" href="ubifs_2io_8c.html#ab9b2f0cc24eff9f69bd606979eb3a53e" title="ubifs_check_node" alt="" coords="1329,397,1456,424"/>
<area shape="rect" id="node13" href="ubifs_2debug_8c.html#a40190f9f60ac94040c30dbd97c73a3ca" title="dump_ch" alt="" coords="1699,439,1774,465"/>
<area shape="rect" id="node15" href="ubifs_2debug_8c.html#a4b30ad73e46b72b5043aa4efa7fb8d9a" title="get_key_hash" alt="" coords="1685,312,1788,339"/>
<area shape="rect" id="node16" href="ubifs_2debug_8c.html#af1196269cd9c24affacc60e33f960f49" title="get_key_fmt" alt="" coords="1689,363,1784,389"/>
<area shape="rect" id="node18" href="ubifs_2debug_8c.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="1676,260,1797,287"/>
<area shape="rect" id="node14" href="ubifs_2debug_8c.html#a0137ecd738390d71f938f27be78c4477" title="dbg_gtype" alt="" coords="1854,439,1937,465"/>
<area shape="rect" id="node19" href="key_8h.html#a4a12b97ed78e138baf7886a6df7ed50f" title="key_inum" alt="" coords="1856,331,1935,357"/>
<area shape="rect" id="node20" href="ubifs_2debug_8c.html#ad6af0af711fdb082f6df4eaeb4d82fe6" title="get_key_type" alt="" coords="1845,179,1945,205"/>
<area shape="rect" id="node21" href="key_8h.html#acddf1ca88d72a37e06c5c608cd084656" title="key_hash" alt="" coords="1856,229,1935,256"/>
<area shape="rect" id="node22" href="key_8h.html#a10c13375b52dbb12be6f9b685d1d1ba7" title="key_block" alt="" coords="1855,280,1936,307"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_a674601c7e9e367fc2e8f38696f9640c8_icgraph.png" border="0" usemap="#tnc__commit_8c_a674601c7e9e367fc2e8f38696f9640c8_icgraph" alt=""/></div>
<map name="tnc__commit_8c_a674601c7e9e367fc2e8f38696f9640c8_icgraph" id="tnc__commit_8c_a674601c7e9e367fc2e8f38696f9640c8_icgraph">
<area shape="rect" id="node2" href="tnc__commit_8c.html#ae35ab1b0e8a8676ac825941f36e77bdd" title="layout_leb_in_gaps" alt="" coords="189,233,323,260"/>
<area shape="rect" id="node3" href="tnc__commit_8c.html#aa94160dc8891f55de97cfb630b191ef2" title="layout_in_gaps" alt="" coords="371,233,480,260"/>
<area shape="rect" id="node4" href="tnc__commit_8c.html#a1f7210689e6f040c0b106db3e447e04b" title="layout_commit" alt="" coords="528,233,635,260"/>
<area shape="rect" id="node5" href="ubifs_8h.html#ae1e7a24e81c4fa022a4065530bd77bff" title="ubifs_tnc_start_commit" alt="" coords="683,233,841,260"/>
<area shape="rect" id="node6" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="889,233,976,260"/>
<area shape="rect" id="node7" href="ubifs_2commit_8c.html#a91c88ecee0c3d4a55bbe6669a0caa521" title="run_bg_commit" alt="" coords="1031,171,1142,197"/>
<area shape="rect" id="node13" href="ubifs_8h.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="1024,259,1149,285"/>
<area shape="rect" id="node8" href="ubifs_8h.html#ad1d2abb94e9ca171f253ba64fdbf7aa6" title="ubifs_bg_thread" alt="" coords="1392,107,1507,133"/>
<area shape="rect" id="node9" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="1605,56,1699,83"/>
<area shape="rect" id="node11" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="1589,107,1715,133"/>
<area shape="rect" id="node10" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1801,5,1911,32"/>
<area shape="rect" id="node12" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="1795,56,1917,83"/>
<area shape="rect" id="node14" href="ubifs_2super_8c.html#a5f9c4c32c42dc338c1b84b87b7098105" title="ubifs_sync_fs" alt="" coords="1209,335,1311,361"/>
<area shape="rect" id="node15" href="ubifs_2recovery_8c.html#acb6fbec748694453a2e4b3ed2be6cc6b" title="grab_empty_leb" alt="" coords="1203,233,1317,260"/>
<area shape="rect" id="node16" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="1371,183,1528,209"/>
<area shape="rect" id="node25" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="1387,309,1512,336"/>
<area shape="rect" id="node45" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="1197,487,1323,513"/>
<area shape="rect" id="node17" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="1589,461,1715,488"/>
<area shape="rect" id="node18" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1984,613,2117,640"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1809,563,1903,589"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1815,411,1897,437"/>
<area shape="rect" id="node22" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1811,613,1901,640"/>
<area shape="rect" id="node23" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1808,461,1904,488"/>
<area shape="rect" id="node24" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1805,512,1907,539"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="2007,917,2094,944"/>
<area shape="rect" id="node26" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="1594,588,1710,615"/>
<area shape="rect" id="node31" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="1583,157,1721,184"/>
<area shape="rect" id="node34" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="1581,208,1723,235"/>
<area shape="rect" id="node37" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="1589,309,1715,336"/>
<area shape="rect" id="node39" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="1592,1228,1712,1255"/>
<area shape="rect" id="node40" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="1590,259,1714,285"/>
<area shape="rect" id="node41" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="1579,1155,1725,1181"/>
<area shape="rect" id="node43" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="1576,1016,1728,1043"/>
<area shape="rect" id="node27" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1811,765,1901,792"/>
<area shape="rect" id="node28" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1817,816,1895,843"/>
<area shape="rect" id="node29" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1811,664,1901,691"/>
<area shape="rect" id="node30" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1813,715,1899,741"/>
<area shape="rect" id="node32" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="1807,107,1905,133"/>
<area shape="rect" id="node33" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="2001,259,2101,285"/>
<area shape="rect" id="node35" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="1795,208,1917,235"/>
<area shape="rect" id="node36" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="1781,157,1931,184"/>
<area shape="rect" id="node38" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1803,309,1909,336"/>
<area shape="rect" id="node42" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="1807,1221,1905,1248"/>
<area shape="rect" id="node44" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="1807,1171,1905,1197"/>
<area shape="rect" id="node46" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="1583,788,1721,815"/>
<area shape="rect" id="node47" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="1795,1069,1917,1096"/>
<area shape="rect" id="node48" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="1799,1120,1913,1147"/>
<area shape="rect" id="node49" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="1816,968,1896,995"/>
<area shape="rect" id="node50" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="1776,1019,1936,1045"/>
</map>
</div>

</div>
</div>
<a id="a1f7210689e6f040c0b106db3e447e04b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f7210689e6f040c0b106db3e447e04b">&#9670;&nbsp;</a></span>layout_commit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int layout_commit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>no_space</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cnt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>layout_commit - determine positions of index nodes to commit. <code></code>: UBIFS file-system description object : indicates that insufficient empty LEBs were allocated : number of znodes to commit</p>
<p>Calculate and update the positions of index nodes to commit. If there were an insufficient number of empty LEBs allocated, then index nodes are placed into the gaps created by obsolete index nodes in non-empty index LEBs. For this purpose, an obsolete index node is one that was not in the index as at the end of the last commit. To write "in-the-gaps" requires that those index LEBs are updated atomically in-place. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_a1f7210689e6f040c0b106db3e447e04b_cgraph.png" border="0" usemap="#tnc__commit_8c_a1f7210689e6f040c0b106db3e447e04b_cgraph" alt=""/></div>
<map name="tnc__commit_8c_a1f7210689e6f040c0b106db3e447e04b_cgraph" id="tnc__commit_8c_a1f7210689e6f040c0b106db3e447e04b_cgraph">
<area shape="rect" id="node2" href="tnc__commit_8c.html#aa94160dc8891f55de97cfb630b191ef2" title="layout_in_gaps" alt="" coords="160,747,269,773"/>
<area shape="rect" id="node49" href="tnc__commit_8c.html#a5704e54ff6ae794072cf6fefd287ee56" title="layout_in_empty_space" alt="" coords="499,905,657,932"/>
<area shape="rect" id="node3" href="tnc__commit_8c.html#ae35ab1b0e8a8676ac825941f36e77bdd" title="layout_leb_in_gaps" alt="" coords="317,664,451,691"/>
<area shape="rect" id="node36" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="952,132,1037,159"/>
<area shape="rect" id="node37" href="ubifs_2debug_8h.html#aaccd583a761afebb452421d214607adb" title="dbg_is_chk_index" alt="" coords="321,747,447,773"/>
<area shape="rect" id="node38" href="ubifs_2debug_8c.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="322,1447,446,1473"/>
<area shape="rect" id="node44" href="ubifs_2debug_8c.html#a2fa0aeaaa556f0b13d098456ef7d86d4" title="ubifs_dump_lprops" alt="" coords="513,1555,643,1581"/>
<area shape="rect" id="node48" href="tnc__commit_8c.html#aa01412c139f0a3f0aaf0a6d83e1415c5" title="get_leb_cnt" alt="" coords="339,5,429,32"/>
<area shape="rect" id="node4" href="find_8c.html#a9755efbbff945daa2e58b2c996976a29" title="ubifs_find_dirty_idx_leb" alt="" coords="499,487,657,513"/>
<area shape="rect" id="node13" href="ubifs_2scan_8c.html#a1689915d09ec86f76b30ee598b10f34e" title="ubifs_scan" alt="" coords="535,1145,621,1172"/>
<area shape="rect" id="node18" href="key_8h.html#a5611c13d648e672825da064c90c8903a" title="key_read" alt="" coords="957,1500,1032,1527"/>
<area shape="rect" id="node21" href="ubifs_2scan_8c.html#a7e559a0c70f1f17d0886f600cd59a639" title="ubifs_scan_destroy" alt="" coords="723,1019,858,1045"/>
<area shape="rect" id="node22" href="misc_8h.html#ac244bb6ab2f45cd8b870edc621d20deb" title="ubifs_idx_key" alt="" coords="527,157,629,184"/>
<area shape="rect" id="node23" href="tnc__commit_8c.html#a674601c7e9e367fc2e8f38696f9640c8" title="is_idx_node_in_use" alt="" coords="510,208,646,235"/>
<area shape="rect" id="node26" href="tnc__commit_8c.html#aaab41523ed81f906598dbc52e68444ac" title="fill_gap" alt="" coords="547,829,609,856"/>
<area shape="rect" id="node30" href="lprops_8c.html#a1eb6fc2cca5a1e34192e3c54b90d3057" title="ubifs_read_one_lp" alt="" coords="727,664,854,691"/>
<area shape="rect" id="node31" href="lprops_8c.html#aeb3c0f6274cdeba0c778d57f29ab39bf" title="ubifs_change_one_lp" alt="" coords="719,563,863,589"/>
<area shape="rect" id="node32" href="ubifs_2io_8c.html#ac70865809ab5c33c55274560e453f535" title="ubifs_leb_change" alt="" coords="517,309,639,336"/>
<area shape="rect" id="node5" href="misc_8h.html#aa89c2768eb94f129c6afbe47420b44ba" title="ubifs_get_lprops" alt="" coords="936,613,1053,640"/>
<area shape="rect" id="node6" href="find_8c.html#a40d28cfea7ac2fd6ce6f3db5cb908e42" title="find_dirtiest_idx_leb" alt="" coords="722,461,859,488"/>
<area shape="rect" id="node10" href="find_8c.html#ad8d34f3450a01ca6a4fe109ab4f12dce" title="find_dirty_idx_leb" alt="" coords="729,411,852,437"/>
<area shape="rect" id="node11" href="find_8c.html#a173f9670c2518646a936453e0af21940" title="get_idx_gc_leb" alt="" coords="736,360,845,387"/>
<area shape="rect" id="node12" href="misc_8h.html#a6dce2c34ec97d74cf4be59e0201bdb3e" title="ubifs_release_lprops" alt="" coords="924,664,1065,691"/>
<area shape="rect" id="node7" href="lpt_8c.html#af1c4868152bb6ea9ae7c87e7dad9cede" title="ubifs_lpt_lookup" alt="" coords="937,512,1053,539"/>
<area shape="rect" id="node8" href="lprops_8c.html#abfc4c6a75b37762f214cbc91f0ebe664" title="ubifs_change_lp" alt="" coords="937,461,1053,488"/>
<area shape="rect" id="node9" href="lpt_8c.html#ade4e71b1fffa493cfb997feaff2c0638" title="ubifs_lpt_lookup_dirty" alt="" coords="1113,461,1261,488"/>
<area shape="rect" id="node14" href="ubifs_2scan_8c.html#ac9e61563282a3ab80fa1947e24f1726e" title="ubifs_start_scan" alt="" coords="731,1171,850,1197"/>
<area shape="rect" id="node15" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="959,968,1031,995"/>
<area shape="rect" id="node16" href="ubifs_2scan_8c.html#ab974ec909e594f54f7773880688a2334" title="ubifs_scan_a_node" alt="" coords="723,1272,858,1299"/>
<area shape="rect" id="node17" href="ubifs_2scan_8c.html#a582c1d1b35a0fe0cd1d73f2f88adaa67" title="ubifs_add_snod" alt="" coords="734,1323,847,1349"/>
<area shape="rect" id="node19" href="ubifs_2scan_8c.html#a7a20ae4d7200218e4b1b4ce3cd803b21" title="ubifs_end_scan" alt="" coords="734,1069,847,1096"/>
<area shape="rect" id="node20" href="ubifs_2scan_8c.html#a18197e05567059efbb981ebe037255bb" title="ubifs_scanned_corruption" alt="" coords="705,1120,876,1147"/>
<area shape="rect" id="node24" href="tnc_8c.html#af4a7fe7d3853972004012eaa58fc7d3f" title="is_idx_node_in_tnc" alt="" coords="724,157,857,184"/>
<area shape="rect" id="node25" href="tnc__commit_8c.html#adbc913319e0b75162b563df6d2b4584f" title="find_old_idx" alt="" coords="745,107,836,133"/>
<area shape="rect" id="node27" href="misc_8h.html#ac7a685691e935bc3ef4a7918e107c8de" title="ubifs_idx_node_sz" alt="" coords="725,917,856,944"/>
<area shape="rect" id="node28" href="tnc__commit_8c.html#ad681f20f8fb62e0331f43526e7fc5c99" title="make_idx_node" alt="" coords="734,867,847,893"/>
<area shape="rect" id="node29" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="751,816,830,843"/>
<area shape="rect" id="node33" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="731,259,850,285"/>
<area shape="rect" id="node34" href="ubifs_2debug_8c.html#af2ad985422103ec5e3e13776002d6ceb" title="dbg_leb_change" alt="" coords="733,309,849,336"/>
<area shape="rect" id="node35" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="737,208,844,235"/>
<area shape="rect" id="node39" href="ubifs_2debug_8c.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="954,1728,1035,1755"/>
<area shape="rect" id="node40" href="budget_8c.html#adaa1427281786d8bfca793236b5f0457" title="ubifs_calc_available" alt="" coords="721,1475,860,1501"/>
<area shape="rect" id="node41" href="budget_8c.html#a6323235e83f399d119f1deb54fa2f144" title="ubifs_get_free_space\l_nolock" alt="" coords="505,1413,651,1454"/>
<area shape="rect" id="node42" href="budget_8c.html#a6109e1d36eaa593c345944d0d4b30745" title="ubifs_calc_min_idx_lebs" alt="" coords="709,1424,873,1451"/>
<area shape="rect" id="node43" href="budget_8c.html#a66e49aaeea4680a7b2c9973ba0dde86c" title="ubifs_reported_space" alt="" coords="717,1373,864,1400"/>
<area shape="rect" id="node45" href="lprops_8c.html#a8a4a969b18d269964ff80d11eb94b8ab" title="ubifs_get_lp_stats" alt="" coords="727,1576,855,1603"/>
<area shape="rect" id="node46" href="ubifs_2debug_8c.html#ab351e7abb59edb97d57bd44dd83b0484" title="ubifs_dump_lstats" alt="" coords="727,1627,855,1653"/>
<area shape="rect" id="node47" href="ubifs_2debug_8c.html#ad04e55858b69b78f20ea8b0fb79f9f27" title="ubifs_dump_lprop" alt="" coords="729,1677,853,1704"/>
<area shape="rect" id="node50" href="lprops_8c.html#ae3f8fc7da604fc1fbfa182c024679d42" title="ubifs_update_one_lp" alt="" coords="720,715,861,741"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_a1f7210689e6f040c0b106db3e447e04b_icgraph.png" border="0" usemap="#tnc__commit_8c_a1f7210689e6f040c0b106db3e447e04b_icgraph" alt=""/></div>
<map name="tnc__commit_8c_a1f7210689e6f040c0b106db3e447e04b_icgraph" id="tnc__commit_8c_a1f7210689e6f040c0b106db3e447e04b_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#ae1e7a24e81c4fa022a4065530bd77bff" title="ubifs_tnc_start_commit" alt="" coords="160,247,319,273"/>
<area shape="rect" id="node3" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="367,247,453,273"/>
<area shape="rect" id="node4" href="ubifs_2commit_8c.html#a91c88ecee0c3d4a55bbe6669a0caa521" title="run_bg_commit" alt="" coords="509,184,619,211"/>
<area shape="rect" id="node10" href="ubifs_8h.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="501,272,627,299"/>
<area shape="rect" id="node5" href="ubifs_8h.html#ad1d2abb94e9ca171f253ba64fdbf7aa6" title="ubifs_bg_thread" alt="" coords="869,145,984,172"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="1083,120,1176,147"/>
<area shape="rect" id="node8" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="1067,171,1192,197"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1279,5,1388,32"/>
<area shape="rect" id="node9" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="1272,56,1395,83"/>
<area shape="rect" id="node11" href="ubifs_2super_8c.html#a5f9c4c32c42dc338c1b84b87b7098105" title="ubifs_sync_fs" alt="" coords="686,196,789,223"/>
<area shape="rect" id="node12" href="ubifs_2recovery_8c.html#acb6fbec748694453a2e4b3ed2be6cc6b" title="grab_empty_leb" alt="" coords="680,297,795,324"/>
<area shape="rect" id="node13" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="848,233,1005,260"/>
<area shape="rect" id="node22" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="864,1171,989,1197"/>
<area shape="rect" id="node42" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="675,399,800,425"/>
<area shape="rect" id="node14" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="1066,233,1193,260"/>
<area shape="rect" id="node15" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1476,436,1609,463"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1287,208,1380,235"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1292,157,1375,184"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1289,259,1378,285"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1285,309,1381,336"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1282,360,1385,387"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1499,816,1586,843"/>
<area shape="rect" id="node23" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="1071,385,1187,412"/>
<area shape="rect" id="node28" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="1061,1412,1198,1439"/>
<area shape="rect" id="node31" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="1058,1272,1201,1299"/>
<area shape="rect" id="node34" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="1066,1348,1193,1375"/>
<area shape="rect" id="node36" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="1069,1171,1189,1197"/>
<area shape="rect" id="node37" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="1067,1221,1191,1248"/>
<area shape="rect" id="node38" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="1057,968,1202,995"/>
<area shape="rect" id="node40" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="1053,1120,1205,1147"/>
<area shape="rect" id="node24" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1288,411,1379,437"/>
<area shape="rect" id="node25" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1295,461,1372,488"/>
<area shape="rect" id="node26" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1288,512,1379,539"/>
<area shape="rect" id="node27" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1290,563,1377,589"/>
<area shape="rect" id="node29" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="1284,1424,1383,1451"/>
<area shape="rect" id="node30" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1493,1221,1593,1248"/>
<area shape="rect" id="node32" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="1272,1323,1395,1349"/>
<area shape="rect" id="node33" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="1258,1272,1409,1299"/>
<area shape="rect" id="node35" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1280,1373,1387,1400"/>
<area shape="rect" id="node39" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="1284,867,1383,893"/>
<area shape="rect" id="node41" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="1285,1120,1382,1147"/>
<area shape="rect" id="node43" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="1060,613,1199,640"/>
<area shape="rect" id="node44" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="1272,664,1395,691"/>
<area shape="rect" id="node45" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="1277,715,1390,741"/>
<area shape="rect" id="node46" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="1293,765,1373,792"/>
<area shape="rect" id="node47" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="1253,968,1413,995"/>
<area shape="rect" id="node48" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="1487,917,1598,944"/>
<area shape="rect" id="node49" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="1461,993,1624,1020"/>
<area shape="rect" id="node50" href="ubifs_2ioctl_8c.html#a06251cc4602342e44b5ed0a1b39f7e60" title="setflags" alt="" coords="1299,613,1367,640"/>
</map>
</div>

</div>
</div>
<a id="a5704e54ff6ae794072cf6fefd287ee56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5704e54ff6ae794072cf6fefd287ee56">&#9670;&nbsp;</a></span>layout_in_empty_space()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int layout_in_empty_space </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>layout_in_empty_space - layout index nodes in empty space. <code></code>: UBIFS file-system description object</p>
<p>This function lays out new index nodes for dirty znodes using empty LEBs.</p>
<p>This function returns %0 on success and a negative error code on failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_a5704e54ff6ae794072cf6fefd287ee56_cgraph.png" border="0" usemap="#tnc__commit_8c_a5704e54ff6ae794072cf6fefd287ee56_cgraph" alt=""/></div>
<map name="tnc__commit_8c_a5704e54ff6ae794072cf6fefd287ee56_cgraph" id="tnc__commit_8c_a5704e54ff6ae794072cf6fefd287ee56_cgraph">
<area shape="rect" id="node2" href="misc_8h.html#ac7a685691e935bc3ef4a7918e107c8de" title="ubifs_idx_node_sz" alt="" coords="217,5,348,32"/>
<area shape="rect" id="node3" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="2683,267,2755,293"/>
<area shape="rect" id="node4" href="lprops_8c.html#ae3f8fc7da604fc1fbfa182c024679d42" title="ubifs_update_one_lp" alt="" coords="212,208,353,235"/>
<area shape="rect" id="node5" href="misc_8h.html#aa89c2768eb94f129c6afbe47420b44ba" title="ubifs_get_lprops" alt="" coords="413,183,531,209"/>
<area shape="rect" id="node6" href="lpt_8c.html#ade4e71b1fffa493cfb997feaff2c0638" title="ubifs_lpt_lookup_dirty" alt="" coords="591,485,739,512"/>
<area shape="rect" id="node42" href="lprops_8c.html#abfc4c6a75b37762f214cbc91f0ebe664" title="ubifs_change_lp" alt="" coords="414,384,530,411"/>
<area shape="rect" id="node49" href="misc_8h.html#a6dce2c34ec97d74cf4be59e0201bdb3e" title="ubifs_release_lprops" alt="" coords="401,233,543,260"/>
<area shape="rect" id="node7" href="lpt_8c.html#a6d9ea5f42b955fdb68064bc37bd9540d" title="ubifs_read_nnode" alt="" coords="2088,309,2212,336"/>
<area shape="rect" id="node15" href="lpt_8c.html#accd7155d1f9997fb5e6a7fd577fdc0f2" title="dirty_cow_nnode" alt="" coords="787,523,907,549"/>
<area shape="rect" id="node18" href="lpt_8c.html#a7fd536e4a29b47a6485fc3931f91857b" title="ubifs_get_nnode" alt="" coords="1923,259,2040,285"/>
<area shape="rect" id="node19" href="lpt_8c.html#ad8f891756dae6c6dceeb51fb917b023b" title="ubifs_get_pnode" alt="" coords="788,460,905,487"/>
<area shape="rect" id="node37" href="lpt_8c.html#ac60e8c2b5dbc5ab11045f313bcc441a0" title="dirty_cow_pnode" alt="" coords="787,587,907,613"/>
<area shape="rect" id="node8" href="lpt_8c.html#a9f9e5388fe8c2966b4517e0b243b9ce6" title="calc_nnode_num_from\l_parent" alt="" coords="2452,259,2605,301"/>
<area shape="rect" id="node9" href="ubifs_2io_8c.html#ab6a2a3c4a79d6d4c52350540437d3cb3" title="ubifs_leb_read" alt="" coords="2277,360,2384,387"/>
<area shape="rect" id="node10" href="lpt_8c.html#a0d29b2eba67308c09e6c7e05ad2b63b1" title="ubifs_unpack_nnode" alt="" coords="2260,461,2401,488"/>
<area shape="rect" id="node14" href="lpt_8c.html#ad905cc71245ecfb3152a844c581d3e12" title="validate_nnode" alt="" coords="2276,309,2385,336"/>
<area shape="rect" id="node11" href="lpt_8c.html#a96436eaf7459ebef6525d09761a38d2c" title="check_lpt_type" alt="" coords="2473,477,2584,504"/>
<area shape="rect" id="node12" href="lpt_8c.html#af769280c22d887914ee95e9c2e4cc7de" title="ubifs_unpack_bits" alt="" coords="2656,503,2783,529"/>
<area shape="rect" id="node13" href="lpt_8c.html#ac0dcb63535a53346f5364a21cd948dec" title="check_lpt_crc" alt="" coords="2477,528,2580,555"/>
<area shape="rect" id="node16" href="lpt_8c.html#af853639d65479e588832f7abbc932bea" title="ubifs_add_nnode_dirt" alt="" coords="955,536,1100,563"/>
<area shape="rect" id="node17" href="lpt_8c.html#ae5e7ec1ecf58650a45f5ffb5d4029d10" title="ubifs_add_lpt_dirt" alt="" coords="1165,587,1289,613"/>
<area shape="rect" id="node20" href="lpt_8c.html#a1e838b76fdfdb8c75cbd35ed51bad53c" title="read_pnode" alt="" coords="2105,613,2195,640"/>
<area shape="rect" id="node27" href="lpt_8c.html#a50862af12cdded0c2e3be8cea516be8e" title="update_cats" alt="" coords="981,435,1074,461"/>
<area shape="rect" id="node21" href="lpt_8c.html#afaa9919aea45f990f706d5a19a7de403" title="calc_pnode_num_from\l_parent" alt="" coords="2452,783,2605,825"/>
<area shape="rect" id="node22" href="lprops_8c.html#a7a2c9edc0537908ba98fe9a7ab5659d8" title="ubifs_categorize_lprops" alt="" coords="2449,629,2608,656"/>
<area shape="rect" id="node23" href="lpt_8c.html#a7d13c8b402e5a787d5f689a01f01725d" title="unpack_pnode" alt="" coords="2277,512,2384,539"/>
<area shape="rect" id="node24" href="lpt_8c.html#aa9b770e270a9dd0d3fa430bcca3eb9b1" title="validate_pnode" alt="" coords="2276,765,2385,792"/>
<area shape="rect" id="node25" href="lpt_8c.html#a60013b08dd0072dd2a70f499427a67d0" title="set_pnode_lnum" alt="" coords="2272,613,2389,640"/>
<area shape="rect" id="node26" href="ubifs_2debug_8c.html#ab2224f946272a25cfacf2607c6502818" title="ubifs_dump_pnode" alt="" coords="2265,664,2396,691"/>
<area shape="rect" id="node28" href="lprops_8c.html#a664f531f8332b3c53d93e25c4e688e09" title="ubifs_add_to_cat" alt="" coords="1167,435,1288,461"/>
<area shape="rect" id="node29" href="lprops_8c.html#afab6b8531eed73f29803f3f00ecb646e" title="add_to_lpt_heap" alt="" coords="1373,435,1491,461"/>
<area shape="rect" id="node30" href="lprops_8c.html#ad0f7bf66835597d0e8e171b0c91b57be" title="get_heap_comp_val" alt="" coords="1736,461,1875,488"/>
<area shape="rect" id="node31" href="lprops_8c.html#aa85b7d6ee17c895f4a592398484654bb" title="move_up_lpt_heap" alt="" coords="1557,435,1688,461"/>
<area shape="rect" id="node32" href="lprops_8c.html#a715a0be6e5e1b99a7bf830fca61a84e2" title="dbg_check_heap" alt="" coords="1563,333,1683,360"/>
<area shape="rect" id="node33" href="ubifs_2debug_8h.html#ad9c4d68015fb8802b1553a53880d43cc" title="dbg_is_chk_gen" alt="" coords="1747,360,1863,387"/>
<area shape="rect" id="node34" href="ubifs_2debug_8h.html#ab66d4ac998d5cd15774f5a22d366e1f1" title="dbg_is_chk_lprops" alt="" coords="1740,411,1871,437"/>
<area shape="rect" id="node35" href="lpt_8c.html#af1c4868152bb6ea9ae7c87e7dad9cede" title="ubifs_lpt_lookup" alt="" coords="1747,259,1863,285"/>
<area shape="rect" id="node36" href="ubifs_2debug_8c.html#a5600b63b8362df17ed46c4e20784fb6c" title="ubifs_dump_heap" alt="" coords="1743,309,1867,336"/>
<area shape="rect" id="node38" href="lpt_8c.html#a0e19e0a4226ca2a2502accf8a120c9fd" title="add_pnode_dirt" alt="" coords="972,587,1083,613"/>
<area shape="rect" id="node39" href="lpt_8c.html#a1c3d339c703cc7819cf15ac8fbd2c911" title="replace_cats" alt="" coords="979,637,1075,664"/>
<area shape="rect" id="node40" href="lprops_8c.html#a4a2c2b7e688877c1df8d8f4d49e1728a" title="ubifs_replace_cat" alt="" coords="1165,637,1289,664"/>
<area shape="rect" id="node41" href="lprops_8c.html#a0b65160e0da643b5257b811348f16321" title="lpt_heap_replace" alt="" coords="1372,637,1492,664"/>
<area shape="rect" id="node43" href="lprops_8c.html#a911df1bb1dc58cf096c97ce547539153" title="is_lprops_dirty" alt="" coords="611,384,718,411"/>
<area shape="rect" id="node44" href="lprops_8c.html#a54fa4acd96a49b1bbe2baeac4dbd0c0b" title="ubifs_calc_dark" alt="" coords="608,435,721,461"/>
<area shape="rect" id="node45" href="lprops_8c.html#a2f083caeaebac06c1f51d7c7d34f5c13" title="change_category" alt="" coords="967,384,1088,411"/>
<area shape="rect" id="node46" href="lprops_8c.html#a1b58cb9915dbbdf9ac60e7a1369d05ab" title="adjust_lpt_heap" alt="" coords="1566,384,1679,411"/>
<area shape="rect" id="node47" href="lprops_8c.html#a88d9d4b260ebb86abbc16675b951f2c1" title="ubifs_remove_from_cat" alt="" coords="1148,333,1307,360"/>
<area shape="rect" id="node48" href="lprops_8c.html#a94e67294df31694767c10db81d4fbd47" title="remove_from_lpt_heap" alt="" coords="1355,333,1509,360"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_a5704e54ff6ae794072cf6fefd287ee56_icgraph.png" border="0" usemap="#tnc__commit_8c_a5704e54ff6ae794072cf6fefd287ee56_icgraph" alt=""/></div>
<map name="tnc__commit_8c_a5704e54ff6ae794072cf6fefd287ee56_icgraph" id="tnc__commit_8c_a5704e54ff6ae794072cf6fefd287ee56_icgraph">
<area shape="rect" id="node2" href="tnc__commit_8c.html#a1f7210689e6f040c0b106db3e447e04b" title="layout_commit" alt="" coords="212,284,319,311"/>
<area shape="rect" id="node3" href="ubifs_8h.html#ae1e7a24e81c4fa022a4065530bd77bff" title="ubifs_tnc_start_commit" alt="" coords="367,284,525,311"/>
<area shape="rect" id="node4" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="573,284,660,311"/>
<area shape="rect" id="node5" href="ubifs_2commit_8c.html#a91c88ecee0c3d4a55bbe6669a0caa521" title="run_bg_commit" alt="" coords="715,221,826,248"/>
<area shape="rect" id="node11" href="ubifs_8h.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="708,309,833,336"/>
<area shape="rect" id="node6" href="ubifs_8h.html#ad1d2abb94e9ca171f253ba64fdbf7aa6" title="ubifs_bg_thread" alt="" coords="1076,183,1191,209"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="1289,132,1383,159"/>
<area shape="rect" id="node9" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="1273,183,1399,209"/>
<area shape="rect" id="node8" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1485,5,1595,32"/>
<area shape="rect" id="node10" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="1479,56,1601,83"/>
<area shape="rect" id="node12" href="ubifs_2super_8c.html#a5f9c4c32c42dc338c1b84b87b7098105" title="ubifs_sync_fs" alt="" coords="893,385,995,412"/>
<area shape="rect" id="node13" href="ubifs_2recovery_8c.html#acb6fbec748694453a2e4b3ed2be6cc6b" title="grab_empty_leb" alt="" coords="887,233,1001,260"/>
<area shape="rect" id="node14" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="1055,233,1212,260"/>
<area shape="rect" id="node23" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="1071,1120,1196,1147"/>
<area shape="rect" id="node43" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="881,335,1007,361"/>
<area shape="rect" id="node15" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="1273,233,1399,260"/>
<area shape="rect" id="node16" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1683,664,1816,691"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1493,157,1587,184"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1499,309,1581,336"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1495,208,1585,235"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1492,259,1588,285"/>
<area shape="rect" id="node22" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1489,360,1591,387"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1706,968,1793,995"/>
<area shape="rect" id="node24" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="1278,385,1394,412"/>
<area shape="rect" id="node29" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="1267,1272,1405,1299"/>
<area shape="rect" id="node32" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="1265,1323,1407,1349"/>
<area shape="rect" id="node35" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="1273,1171,1399,1197"/>
<area shape="rect" id="node37" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="1276,1120,1396,1147"/>
<area shape="rect" id="node38" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="1274,1221,1398,1248"/>
<area shape="rect" id="node39" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="1263,968,1409,995"/>
<area shape="rect" id="node41" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="1260,1069,1412,1096"/>
<area shape="rect" id="node25" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1495,512,1585,539"/>
<area shape="rect" id="node26" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1501,563,1579,589"/>
<area shape="rect" id="node27" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1495,411,1585,437"/>
<area shape="rect" id="node28" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1497,461,1583,488"/>
<area shape="rect" id="node30" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="1491,1272,1589,1299"/>
<area shape="rect" id="node31" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1699,1221,1799,1248"/>
<area shape="rect" id="node33" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="1479,1323,1601,1349"/>
<area shape="rect" id="node34" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="1465,1373,1615,1400"/>
<area shape="rect" id="node36" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1487,1171,1593,1197"/>
<area shape="rect" id="node40" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="1491,917,1589,944"/>
<area shape="rect" id="node42" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="1491,1069,1589,1096"/>
<area shape="rect" id="node44" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="1267,588,1405,615"/>
<area shape="rect" id="node45" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="1479,765,1601,792"/>
<area shape="rect" id="node46" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="1483,816,1597,843"/>
<area shape="rect" id="node47" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="1500,867,1580,893"/>
<area shape="rect" id="node48" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="1460,664,1620,691"/>
<area shape="rect" id="node49" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="1694,613,1805,640"/>
<area shape="rect" id="node50" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="1668,715,1831,741"/>
</map>
</div>

</div>
</div>
<a id="aa94160dc8891f55de97cfb630b191ef2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa94160dc8891f55de97cfb630b191ef2">&#9670;&nbsp;</a></span>layout_in_gaps()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int layout_in_gaps </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cnt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>layout_in_gaps - in-the-gaps method of committing TNC. <code></code>: UBIFS file-system description object : number of dirty znodes to commit.</p>
<p>This function lays out new index nodes for dirty znodes using in-the-gaps method of TNC commit.</p>
<p>This function returns %0 on success and a negative error code on failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_aa94160dc8891f55de97cfb630b191ef2_cgraph.png" border="0" usemap="#tnc__commit_8c_aa94160dc8891f55de97cfb630b191ef2_cgraph" alt=""/></div>
<map name="tnc__commit_8c_aa94160dc8891f55de97cfb630b191ef2_cgraph" id="tnc__commit_8c_aa94160dc8891f55de97cfb630b191ef2_cgraph">
<area shape="rect" id="node2" href="tnc__commit_8c.html#ae35ab1b0e8a8676ac825941f36e77bdd" title="layout_leb_in_gaps" alt="" coords="163,892,296,919"/>
<area shape="rect" id="node38" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="802,1500,887,1527"/>
<area shape="rect" id="node39" href="ubifs_2debug_8h.html#aaccd583a761afebb452421d214607adb" title="dbg_is_chk_index" alt="" coords="166,1677,293,1704"/>
<area shape="rect" id="node40" href="ubifs_2debug_8c.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="167,1504,291,1531"/>
<area shape="rect" id="node46" href="ubifs_2debug_8c.html#a2fa0aeaaa556f0b13d098456ef7d86d4" title="ubifs_dump_lprops" alt="" coords="358,107,489,133"/>
<area shape="rect" id="node50" href="tnc__commit_8c.html#aa01412c139f0a3f0aaf0a6d83e1415c5" title="get_leb_cnt" alt="" coords="185,1728,274,1755"/>
<area shape="rect" id="node3" href="find_8c.html#a9755efbbff945daa2e58b2c996976a29" title="ubifs_find_dirty_idx_leb" alt="" coords="344,411,503,437"/>
<area shape="rect" id="node15" href="ubifs_2scan_8c.html#a1689915d09ec86f76b30ee598b10f34e" title="ubifs_scan" alt="" coords="381,993,466,1020"/>
<area shape="rect" id="node20" href="key_8h.html#a5611c13d648e672825da064c90c8903a" title="key_read" alt="" coords="807,1272,882,1299"/>
<area shape="rect" id="node23" href="ubifs_2scan_8c.html#a7e559a0c70f1f17d0886f600cd59a639" title="ubifs_scan_destroy" alt="" coords="569,1171,703,1197"/>
<area shape="rect" id="node24" href="misc_8h.html#ac244bb6ab2f45cd8b870edc621d20deb" title="ubifs_idx_key" alt="" coords="372,892,475,919"/>
<area shape="rect" id="node25" href="tnc__commit_8c.html#a674601c7e9e367fc2e8f38696f9640c8" title="is_idx_node_in_use" alt="" coords="355,664,491,691"/>
<area shape="rect" id="node28" href="tnc__commit_8c.html#aaab41523ed81f906598dbc52e68444ac" title="fill_gap" alt="" coords="392,791,455,817"/>
<area shape="rect" id="node32" href="lprops_8c.html#a1eb6fc2cca5a1e34192e3c54b90d3057" title="ubifs_read_one_lp" alt="" coords="573,259,699,285"/>
<area shape="rect" id="node33" href="lprops_8c.html#aeb3c0f6274cdeba0c778d57f29ab39bf" title="ubifs_change_one_lp" alt="" coords="564,411,708,437"/>
<area shape="rect" id="node34" href="ubifs_2io_8c.html#ac70865809ab5c33c55274560e453f535" title="ubifs_leb_change" alt="" coords="362,1272,485,1299"/>
<area shape="rect" id="node4" href="misc_8h.html#aa89c2768eb94f129c6afbe47420b44ba" title="ubifs_get_lprops" alt="" coords="786,309,903,336"/>
<area shape="rect" id="node5" href="find_8c.html#a40d28cfea7ac2fd6ce6f3db5cb908e42" title="find_dirtiest_idx_leb" alt="" coords="567,309,705,336"/>
<area shape="rect" id="node10" href="find_8c.html#ad8d34f3450a01ca6a4fe109ab4f12dce" title="find_dirty_idx_leb" alt="" coords="575,512,697,539"/>
<area shape="rect" id="node13" href="find_8c.html#a173f9670c2518646a936453e0af21940" title="get_idx_gc_leb" alt="" coords="581,461,691,488"/>
<area shape="rect" id="node14" href="misc_8h.html#a6dce2c34ec97d74cf4be59e0201bdb3e" title="ubifs_release_lprops" alt="" coords="774,208,915,235"/>
<area shape="rect" id="node6" href="lpt_8c.html#af1c4868152bb6ea9ae7c87e7dad9cede" title="ubifs_lpt_lookup" alt="" coords="787,259,903,285"/>
<area shape="rect" id="node7" href="lprops_8c.html#abfc4c6a75b37762f214cbc91f0ebe664" title="ubifs_change_lp" alt="" coords="787,411,903,437"/>
<area shape="rect" id="node8" href="lpt_8c.html#ade4e71b1fffa493cfb997feaff2c0638" title="ubifs_lpt_lookup_dirty" alt="" coords="968,436,1116,463"/>
<area shape="rect" id="node9" href="lprops_8c.html#a54fa4acd96a49b1bbe2baeac4dbd0c0b" title="ubifs_calc_dark" alt="" coords="985,247,1099,273"/>
<area shape="rect" id="node11" href="find_8c.html#a98d2bc7732900fffd37f45fbd8d47eec" title="scan_dirty_idx_cb" alt="" coords="781,512,908,539"/>
<area shape="rect" id="node12" href="lpt_8c.html#a34800df1b6052b492ca05c589dfec386" title="ubifs_lpt_scan_nolock" alt="" coords="769,613,920,640"/>
<area shape="rect" id="node16" href="ubifs_2scan_8c.html#ac9e61563282a3ab80fa1947e24f1726e" title="ubifs_start_scan" alt="" coords="577,1019,695,1045"/>
<area shape="rect" id="node17" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="809,867,881,893"/>
<area shape="rect" id="node18" href="ubifs_2scan_8c.html#ab974ec909e594f54f7773880688a2334" title="ubifs_scan_a_node" alt="" coords="569,1069,703,1096"/>
<area shape="rect" id="node19" href="ubifs_2scan_8c.html#a582c1d1b35a0fe0cd1d73f2f88adaa67" title="ubifs_add_snod" alt="" coords="579,1120,693,1147"/>
<area shape="rect" id="node21" href="ubifs_2scan_8c.html#a7a20ae4d7200218e4b1b4ce3cd803b21" title="ubifs_end_scan" alt="" coords="579,917,693,944"/>
<area shape="rect" id="node22" href="ubifs_2scan_8c.html#a18197e05567059efbb981ebe037255bb" title="ubifs_scanned_corruption" alt="" coords="551,867,721,893"/>
<area shape="rect" id="node26" href="tnc_8c.html#af4a7fe7d3853972004012eaa58fc7d3f" title="is_idx_node_in_tnc" alt="" coords="569,613,703,640"/>
<area shape="rect" id="node27" href="tnc__commit_8c.html#adbc913319e0b75162b563df6d2b4584f" title="find_old_idx" alt="" coords="591,664,681,691"/>
<area shape="rect" id="node29" href="misc_8h.html#ac7a685691e935bc3ef4a7918e107c8de" title="ubifs_idx_node_sz" alt="" coords="571,765,701,792"/>
<area shape="rect" id="node30" href="tnc__commit_8c.html#ad681f20f8fb62e0331f43526e7fc5c99" title="make_idx_node" alt="" coords="579,816,693,843"/>
<area shape="rect" id="node31" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="597,715,675,741"/>
<area shape="rect" id="node35" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="577,1272,695,1299"/>
<area shape="rect" id="node36" href="ubifs_2debug_8c.html#af2ad985422103ec5e3e13776002d6ceb" title="dbg_leb_change" alt="" coords="578,1323,694,1349"/>
<area shape="rect" id="node37" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="583,1373,689,1400"/>
<area shape="rect" id="node41" href="ubifs_2debug_8c.html#addcdbd9bce6753254851d6058f6de726" title="dbg_jhead" alt="" coords="804,157,885,184"/>
<area shape="rect" id="node42" href="budget_8c.html#adaa1427281786d8bfca793236b5f0457" title="ubifs_calc_available" alt="" coords="567,1475,705,1501"/>
<area shape="rect" id="node43" href="budget_8c.html#a6323235e83f399d119f1deb54fa2f144" title="ubifs_get_free_space\l_nolock" alt="" coords="350,1526,497,1567"/>
<area shape="rect" id="node44" href="budget_8c.html#a6109e1d36eaa593c345944d0d4b30745" title="ubifs_calc_min_idx_lebs" alt="" coords="554,1525,718,1552"/>
<area shape="rect" id="node45" href="budget_8c.html#a66e49aaeea4680a7b2c9973ba0dde86c" title="ubifs_reported_space" alt="" coords="563,1576,709,1603"/>
<area shape="rect" id="node47" href="lprops_8c.html#a8a4a969b18d269964ff80d11eb94b8ab" title="ubifs_get_lp_stats" alt="" coords="572,5,700,32"/>
<area shape="rect" id="node48" href="ubifs_2debug_8c.html#ab351e7abb59edb97d57bd44dd83b0484" title="ubifs_dump_lstats" alt="" coords="572,56,700,83"/>
<area shape="rect" id="node49" href="ubifs_2debug_8c.html#ad04e55858b69b78f20ea8b0fb79f9f27" title="ubifs_dump_lprop" alt="" coords="574,107,698,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_aa94160dc8891f55de97cfb630b191ef2_icgraph.png" border="0" usemap="#tnc__commit_8c_aa94160dc8891f55de97cfb630b191ef2_icgraph" alt=""/></div>
<map name="tnc__commit_8c_aa94160dc8891f55de97cfb630b191ef2_icgraph" id="tnc__commit_8c_aa94160dc8891f55de97cfb630b191ef2_icgraph">
<area shape="rect" id="node2" href="tnc__commit_8c.html#a1f7210689e6f040c0b106db3e447e04b" title="layout_commit" alt="" coords="163,284,269,311"/>
<area shape="rect" id="node3" href="ubifs_8h.html#ae1e7a24e81c4fa022a4065530bd77bff" title="ubifs_tnc_start_commit" alt="" coords="317,284,476,311"/>
<area shape="rect" id="node4" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="524,284,611,311"/>
<area shape="rect" id="node5" href="ubifs_2commit_8c.html#a91c88ecee0c3d4a55bbe6669a0caa521" title="run_bg_commit" alt="" coords="666,221,777,248"/>
<area shape="rect" id="node11" href="ubifs_8h.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="659,309,784,336"/>
<area shape="rect" id="node6" href="ubifs_8h.html#ad1d2abb94e9ca171f253ba64fdbf7aa6" title="ubifs_bg_thread" alt="" coords="1027,183,1141,209"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="1240,132,1333,159"/>
<area shape="rect" id="node9" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="1224,183,1349,209"/>
<area shape="rect" id="node8" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1436,5,1545,32"/>
<area shape="rect" id="node10" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="1429,56,1552,83"/>
<area shape="rect" id="node12" href="ubifs_2super_8c.html#a5f9c4c32c42dc338c1b84b87b7098105" title="ubifs_sync_fs" alt="" coords="843,385,946,412"/>
<area shape="rect" id="node13" href="ubifs_2recovery_8c.html#acb6fbec748694453a2e4b3ed2be6cc6b" title="grab_empty_leb" alt="" coords="837,233,952,260"/>
<area shape="rect" id="node14" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="1005,233,1163,260"/>
<area shape="rect" id="node23" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="1021,1120,1147,1147"/>
<area shape="rect" id="node43" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="832,335,957,361"/>
<area shape="rect" id="node15" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="1223,233,1350,260"/>
<area shape="rect" id="node16" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1633,664,1767,691"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1444,157,1537,184"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1449,309,1532,336"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1446,208,1535,235"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1443,259,1539,285"/>
<area shape="rect" id="node22" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1439,360,1542,387"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1657,968,1743,995"/>
<area shape="rect" id="node24" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="1229,385,1345,412"/>
<area shape="rect" id="node29" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="1218,1272,1355,1299"/>
<area shape="rect" id="node32" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="1215,1323,1358,1349"/>
<area shape="rect" id="node35" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="1223,1171,1350,1197"/>
<area shape="rect" id="node37" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="1227,1120,1347,1147"/>
<area shape="rect" id="node38" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="1225,1221,1349,1248"/>
<area shape="rect" id="node39" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="1214,968,1359,995"/>
<area shape="rect" id="node41" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="1211,1069,1363,1096"/>
<area shape="rect" id="node25" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1445,512,1536,539"/>
<area shape="rect" id="node26" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1452,563,1529,589"/>
<area shape="rect" id="node27" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1445,411,1536,437"/>
<area shape="rect" id="node28" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1447,461,1534,488"/>
<area shape="rect" id="node30" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="1441,1272,1540,1299"/>
<area shape="rect" id="node31" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1650,1221,1750,1248"/>
<area shape="rect" id="node33" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="1429,1323,1552,1349"/>
<area shape="rect" id="node34" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="1415,1373,1566,1400"/>
<area shape="rect" id="node36" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1437,1171,1544,1197"/>
<area shape="rect" id="node40" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="1441,917,1540,944"/>
<area shape="rect" id="node42" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="1442,1069,1539,1096"/>
<area shape="rect" id="node44" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="1217,588,1356,615"/>
<area shape="rect" id="node45" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="1429,765,1552,792"/>
<area shape="rect" id="node46" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="1434,816,1547,843"/>
<area shape="rect" id="node47" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="1451,867,1531,893"/>
<area shape="rect" id="node48" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="1411,664,1571,691"/>
<area shape="rect" id="node49" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="1645,613,1755,640"/>
<area shape="rect" id="node50" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="1619,715,1781,741"/>
</map>
</div>

</div>
</div>
<a id="ae35ab1b0e8a8676ac825941f36e77bdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae35ab1b0e8a8676ac825941f36e77bdd">&#9670;&nbsp;</a></span>layout_leb_in_gaps()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int layout_leb_in_gaps </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>layout_leb_in_gaps - layout index nodes using in-the-gaps method. <code></code>: UBIFS file-system description object <code></code>: return LEB number here</p>
<p>This function lays out new index nodes for dirty znodes using in-the-gaps method of TNC commit. This function merely puts the next znode into the next gap, making no attempt to try to maximise the number of znodes that fit. This function returns the number of index nodes written into the gaps, or a negative error code on failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_ae35ab1b0e8a8676ac825941f36e77bdd_cgraph.png" border="0" usemap="#tnc__commit_8c_ae35ab1b0e8a8676ac825941f36e77bdd_cgraph" alt=""/></div>
<map name="tnc__commit_8c_ae35ab1b0e8a8676ac825941f36e77bdd_cgraph" id="tnc__commit_8c_ae35ab1b0e8a8676ac825941f36e77bdd_cgraph">
<area shape="rect" id="node2" href="find_8c.html#a9755efbbff945daa2e58b2c996976a29" title="ubifs_find_dirty_idx_leb" alt="" coords="187,372,345,399"/>
<area shape="rect" id="node14" href="ubifs_2scan_8c.html#a1689915d09ec86f76b30ee598b10f34e" title="ubifs_scan" alt="" coords="223,853,309,880"/>
<area shape="rect" id="node23" href="key_8h.html#a5611c13d648e672825da064c90c8903a" title="key_read" alt="" coords="1029,651,1104,677"/>
<area shape="rect" id="node29" href="ubifs_2scan_8c.html#a7e559a0c70f1f17d0886f600cd59a639" title="ubifs_scan_destroy" alt="" coords="411,1031,546,1057"/>
<area shape="rect" id="node30" href="misc_8h.html#ac244bb6ab2f45cd8b870edc621d20deb" title="ubifs_idx_key" alt="" coords="215,803,317,829"/>
<area shape="rect" id="node31" href="tnc__commit_8c.html#a674601c7e9e367fc2e8f38696f9640c8" title="is_idx_node_in_use" alt="" coords="198,1208,334,1235"/>
<area shape="rect" id="node36" href="tnc__commit_8c.html#aaab41523ed81f906598dbc52e68444ac" title="fill_gap" alt="" coords="235,1411,297,1437"/>
<area shape="rect" id="node45" href="lprops_8c.html#a1eb6fc2cca5a1e34192e3c54b90d3057" title="ubifs_read_one_lp" alt="" coords="415,549,542,576"/>
<area shape="rect" id="node46" href="lprops_8c.html#aeb3c0f6274cdeba0c778d57f29ab39bf" title="ubifs_change_one_lp" alt="" coords="407,448,551,475"/>
<area shape="rect" id="node47" href="ubifs_2io_8c.html#ac70865809ab5c33c55274560e453f535" title="ubifs_leb_change" alt="" coords="205,1715,327,1741"/>
<area shape="rect" id="node3" href="misc_8h.html#aa89c2768eb94f129c6afbe47420b44ba" title="ubifs_get_lprops" alt="" coords="629,549,746,576"/>
<area shape="rect" id="node4" href="find_8c.html#a40d28cfea7ac2fd6ce6f3db5cb908e42" title="find_dirtiest_idx_leb" alt="" coords="410,347,547,373"/>
<area shape="rect" id="node8" href="find_8c.html#ad8d34f3450a01ca6a4fe109ab4f12dce" title="find_dirty_idx_leb" alt="" coords="417,144,540,171"/>
<area shape="rect" id="node11" href="find_8c.html#a173f9670c2518646a936453e0af21940" title="get_idx_gc_leb" alt="" coords="424,271,533,297"/>
<area shape="rect" id="node13" href="misc_8h.html#a6dce2c34ec97d74cf4be59e0201bdb3e" title="ubifs_release_lprops" alt="" coords="617,499,758,525"/>
<area shape="rect" id="node5" href="lpt_8c.html#af1c4868152bb6ea9ae7c87e7dad9cede" title="ubifs_lpt_lookup" alt="" coords="629,347,745,373"/>
<area shape="rect" id="node6" href="lprops_8c.html#abfc4c6a75b37762f214cbc91f0ebe664" title="ubifs_change_lp" alt="" coords="629,296,745,323"/>
<area shape="rect" id="node7" href="lpt_8c.html#ade4e71b1fffa493cfb997feaff2c0638" title="ubifs_lpt_lookup_dirty" alt="" coords="811,245,959,272"/>
<area shape="rect" id="node9" href="find_8c.html#a98d2bc7732900fffd37f45fbd8d47eec" title="scan_dirty_idx_cb" alt="" coords="624,43,751,69"/>
<area shape="rect" id="node10" href="lpt_8c.html#a34800df1b6052b492ca05c589dfec386" title="ubifs_lpt_scan_nolock" alt="" coords="612,93,763,120"/>
<area shape="rect" id="node12" href="ubifs_2gc_8c.html#a2e83b83738924a4b92576798c5409df2" title="ubifs_get_idx_gc_leb" alt="" coords="615,245,759,272"/>
<area shape="rect" id="node15" href="ubifs_2scan_8c.html#ac9e61563282a3ab80fa1947e24f1726e" title="ubifs_start_scan" alt="" coords="419,752,538,779"/>
<area shape="rect" id="node17" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="849,879,921,905"/>
<area shape="rect" id="node18" href="ubifs_2scan_8c.html#ab974ec909e594f54f7773880688a2334" title="ubifs_scan_a_node" alt="" coords="411,980,546,1007"/>
<area shape="rect" id="node25" href="ubifs_2scan_8c.html#a582c1d1b35a0fe0cd1d73f2f88adaa67" title="ubifs_add_snod" alt="" coords="422,701,535,728"/>
<area shape="rect" id="node27" href="ubifs_2scan_8c.html#a7a20ae4d7200218e4b1b4ce3cd803b21" title="ubifs_end_scan" alt="" coords="422,853,535,880"/>
<area shape="rect" id="node28" href="ubifs_2scan_8c.html#a18197e05567059efbb981ebe037255bb" title="ubifs_scanned_corruption" alt="" coords="393,803,564,829"/>
<area shape="rect" id="node16" href="ubifs_2io_8c.html#ab6a2a3c4a79d6d4c52350540437d3cb3" title="ubifs_leb_read" alt="" coords="634,752,741,779"/>
<area shape="rect" id="node19" href="ubifs_2scan_8c.html#a93a80ae9e3252efb52d991f4abc7152a" title="scan_padding_bytes" alt="" coords="617,955,758,981"/>
<area shape="rect" id="node20" href="ubifs_2debug_8c.html#a1bb9ed2a2e382da8b419ce5d2a772b81" title="dbg_ntype" alt="" coords="646,1005,729,1032"/>
<area shape="rect" id="node21" href="ubifs_2io_8c.html#ab9b2f0cc24eff9f69bd606979eb3a53e" title="ubifs_check_node" alt="" coords="624,1107,751,1133"/>
<area shape="rect" id="node22" href="ubifs_2debug_8c.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="823,1132,947,1159"/>
<area shape="rect" id="node24" href="misc_8h.html#a1598cadb907a20f9e5dc3e7ee74edb1d" title="ubifs_idx_branch" alt="" coords="1007,1347,1127,1373"/>
<area shape="rect" id="node26" href="key_8h.html#af4813229a115f3590fe4d6dc91938244" title="invalid_key_init" alt="" coords="632,701,743,728"/>
<area shape="rect" id="node32" href="tnc_8c.html#af4a7fe7d3853972004012eaa58fc7d3f" title="is_idx_node_in_tnc" alt="" coords="412,1208,545,1235"/>
<area shape="rect" id="node35" href="tnc__commit_8c.html#adbc913319e0b75162b563df6d2b4584f" title="find_old_idx" alt="" coords="433,1259,524,1285"/>
<area shape="rect" id="node33" href="tnc_8c.html#a9a3d0b0e8f6fb62cd3fc14718c0971db" title="lookup_znode" alt="" coords="636,1208,739,1235"/>
<area shape="rect" id="node34" href="misc_8h.html#abe5c86108a05199a899138767ca1f42a" title="ubifs_zn_dirty" alt="" coords="636,1259,739,1285"/>
<area shape="rect" id="node37" href="misc_8h.html#ac7a685691e935bc3ef4a7918e107c8de" title="ubifs_idx_node_sz" alt="" coords="413,1385,544,1412"/>
<area shape="rect" id="node38" href="tnc__commit_8c.html#ad681f20f8fb62e0331f43526e7fc5c99" title="make_idx_node" alt="" coords="422,1436,535,1463"/>
<area shape="rect" id="node42" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="845,1664,924,1691"/>
<area shape="rect" id="node39" href="key_8h.html#a6a23a0657894a1a52a8a3046007995b3" title="key_write_idx" alt="" coords="636,1360,739,1387"/>
<area shape="rect" id="node40" href="ubifs_2debug_8c.html#a56365d730ac6932bf3163a8ba7279779" title="ubifs_dump_znode" alt="" coords="622,1411,753,1437"/>
<area shape="rect" id="node41" href="ubifs_2io_8c.html#acfc2ca3ffa8d094855c2e59551f3a767" title="ubifs_prepare_node" alt="" coords="620,1613,755,1640"/>
<area shape="rect" id="node43" href="tnc_8c.html#adb06b4070b4a33080b62c3882163a274" title="insert_old_idx_znode" alt="" coords="615,1461,759,1488"/>
<area shape="rect" id="node44" href="misc_8h.html#a21390e9f6e0627bc617f177cee88fad7" title="ubifs_zn_cow" alt="" coords="636,1512,739,1539"/>
<area shape="rect" id="node48" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="419,1715,538,1741"/>
<area shape="rect" id="node49" href="ubifs_2debug_8c.html#af2ad985422103ec5e3e13776002d6ceb" title="dbg_leb_change" alt="" coords="421,1765,537,1792"/>
<area shape="rect" id="node50" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="425,1816,532,1843"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_ae35ab1b0e8a8676ac825941f36e77bdd_icgraph.png" border="0" usemap="#tnc__commit_8c_ae35ab1b0e8a8676ac825941f36e77bdd_icgraph" alt=""/></div>
<map name="tnc__commit_8c_ae35ab1b0e8a8676ac825941f36e77bdd_icgraph" id="tnc__commit_8c_ae35ab1b0e8a8676ac825941f36e77bdd_icgraph">
<area shape="rect" id="node2" href="tnc__commit_8c.html#aa94160dc8891f55de97cfb630b191ef2" title="layout_in_gaps" alt="" coords="187,284,296,311"/>
<area shape="rect" id="node3" href="tnc__commit_8c.html#a1f7210689e6f040c0b106db3e447e04b" title="layout_commit" alt="" coords="344,284,451,311"/>
<area shape="rect" id="node4" href="ubifs_8h.html#ae1e7a24e81c4fa022a4065530bd77bff" title="ubifs_tnc_start_commit" alt="" coords="499,284,657,311"/>
<area shape="rect" id="node5" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="705,284,792,311"/>
<area shape="rect" id="node6" href="ubifs_2commit_8c.html#a91c88ecee0c3d4a55bbe6669a0caa521" title="run_bg_commit" alt="" coords="847,221,958,248"/>
<area shape="rect" id="node12" href="ubifs_8h.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="840,309,965,336"/>
<area shape="rect" id="node7" href="ubifs_8h.html#ad1d2abb94e9ca171f253ba64fdbf7aa6" title="ubifs_bg_thread" alt="" coords="1208,183,1323,209"/>
<area shape="rect" id="node8" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="1421,132,1515,159"/>
<area shape="rect" id="node10" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="1405,183,1531,209"/>
<area shape="rect" id="node9" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1617,5,1727,32"/>
<area shape="rect" id="node11" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="1611,56,1733,83"/>
<area shape="rect" id="node13" href="ubifs_2super_8c.html#a5f9c4c32c42dc338c1b84b87b7098105" title="ubifs_sync_fs" alt="" coords="1025,385,1127,412"/>
<area shape="rect" id="node14" href="ubifs_2recovery_8c.html#acb6fbec748694453a2e4b3ed2be6cc6b" title="grab_empty_leb" alt="" coords="1019,233,1133,260"/>
<area shape="rect" id="node15" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="1187,233,1344,260"/>
<area shape="rect" id="node24" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="1203,1069,1328,1096"/>
<area shape="rect" id="node44" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="1013,335,1139,361"/>
<area shape="rect" id="node16" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="1405,233,1531,260"/>
<area shape="rect" id="node17" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1800,348,1933,375"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1625,157,1719,184"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1631,360,1713,387"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1627,208,1717,235"/>
<area shape="rect" id="node22" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1624,259,1720,285"/>
<area shape="rect" id="node23" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1621,309,1723,336"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1823,867,1910,893"/>
<area shape="rect" id="node25" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="1410,385,1526,412"/>
<area shape="rect" id="node30" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="1399,1311,1537,1337"/>
<area shape="rect" id="node33" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="1397,1171,1539,1197"/>
<area shape="rect" id="node36" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="1405,1247,1531,1273"/>
<area shape="rect" id="node38" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="1408,1069,1528,1096"/>
<area shape="rect" id="node39" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="1406,1120,1530,1147"/>
<area shape="rect" id="node40" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="1395,943,1541,969"/>
<area shape="rect" id="node42" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="1392,1019,1544,1045"/>
<area shape="rect" id="node26" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1627,411,1717,437"/>
<area shape="rect" id="node27" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1633,461,1711,488"/>
<area shape="rect" id="node28" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1627,512,1717,539"/>
<area shape="rect" id="node29" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1629,563,1715,589"/>
<area shape="rect" id="node31" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="1623,1323,1721,1349"/>
<area shape="rect" id="node32" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1817,1120,1917,1147"/>
<area shape="rect" id="node34" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="1611,1171,1733,1197"/>
<area shape="rect" id="node35" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="1597,1221,1747,1248"/>
<area shape="rect" id="node37" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1619,1272,1725,1299"/>
<area shape="rect" id="node41" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="1623,917,1721,944"/>
<area shape="rect" id="node43" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="1623,1019,1721,1045"/>
<area shape="rect" id="node45" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="1399,563,1537,589"/>
<area shape="rect" id="node46" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="1611,715,1733,741"/>
<area shape="rect" id="node47" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="1615,765,1729,792"/>
<area shape="rect" id="node48" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="1632,816,1712,843"/>
<area shape="rect" id="node49" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="1592,664,1752,691"/>
<area shape="rect" id="node50" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="1811,639,1922,665"/>
</map>
</div>

</div>
</div>
<a id="ad681f20f8fb62e0331f43526e7fc5c99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad681f20f8fb62e0331f43526e7fc5c99">&#9670;&nbsp;</a></span>make_idx_node()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int make_idx_node </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structubifs__idx__node.html">ubifs_idx_node</a> *&#160;</td>
          <td class="paramname"><em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structubifs__znode.html">ubifs_znode</a> *&#160;</td>
          <td class="paramname"><em>znode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>make_idx_node - make an index node for fill-the-gaps method of TNC commit. <code></code>: UBIFS file-system description object : buffer in which to place new index node : znode from which to make new index node : LEB number where new index node will be written : offset where new index node will be written : length of new index node </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_ad681f20f8fb62e0331f43526e7fc5c99_cgraph.png" border="0" usemap="#tnc__commit_8c_ad681f20f8fb62e0331f43526e7fc5c99_cgraph" alt=""/></div>
<map name="tnc__commit_8c_ad681f20f8fb62e0331f43526e7fc5c99_cgraph" id="tnc__commit_8c_ad681f20f8fb62e0331f43526e7fc5c99_cgraph">
<area shape="rect" id="node2" href="misc_8h.html#a1598cadb907a20f9e5dc3e7ee74edb1d" title="ubifs_idx_branch" alt="" coords="179,157,299,184"/>
<area shape="rect" id="node3" href="key_8h.html#a6a23a0657894a1a52a8a3046007995b3" title="key_write_idx" alt="" coords="187,208,290,235"/>
<area shape="rect" id="node4" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="545,360,617,387"/>
<area shape="rect" id="node5" href="ubifs_2debug_8c.html#a56365d730ac6932bf3163a8ba7279779" title="ubifs_dump_znode" alt="" coords="173,259,304,285"/>
<area shape="rect" id="node12" href="ubifs_2io_8c.html#acfc2ca3ffa8d094855c2e59551f3a767" title="ubifs_prepare_node" alt="" coords="171,309,306,336"/>
<area shape="rect" id="node17" href="tnc_8c.html#adb06b4070b4a33080b62c3882163a274" title="insert_old_idx_znode" alt="" coords="167,411,311,437"/>
<area shape="rect" id="node19" href="misc_8h.html#abe5c86108a05199a899138767ca1f42a" title="ubifs_zn_dirty" alt="" coords="187,461,290,488"/>
<area shape="rect" id="node20" href="misc_8h.html#a21390e9f6e0627bc617f177cee88fad7" title="ubifs_zn_cow" alt="" coords="187,512,290,539"/>
<area shape="rect" id="node6" href="ubifs_2debug_8c.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="359,132,480,159"/>
<area shape="rect" id="node7" href="key_8h.html#a06f47822510ef850cb7065778115453c" title="key_type" alt="" coords="544,157,619,184"/>
<area shape="rect" id="node8" href="key_8h.html#a4a12b97ed78e138baf7886a6df7ed50f" title="key_inum" alt="" coords="542,208,621,235"/>
<area shape="rect" id="node9" href="ubifs_2debug_8c.html#ad6af0af711fdb082f6df4eaeb4d82fe6" title="get_key_type" alt="" coords="531,5,631,32"/>
<area shape="rect" id="node10" href="key_8h.html#acddf1ca88d72a37e06c5c608cd084656" title="key_hash" alt="" coords="542,56,621,83"/>
<area shape="rect" id="node11" href="key_8h.html#a10c13375b52dbb12be6f9b685d1d1ba7" title="key_block" alt="" coords="541,107,622,133"/>
<area shape="rect" id="node13" href="ubifs_2io_8c.html#a0b3f089c430db97bbc68e362dc7867c8" title="next_sqnum" alt="" coords="373,259,466,285"/>
<area shape="rect" id="node16" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="380,309,459,336"/>
<area shape="rect" id="node14" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="528,259,635,285"/>
<area shape="rect" id="node15" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="683,284,768,311"/>
<area shape="rect" id="node18" href="tnc_8c.html#a86f5f773a93872a89b7bab3ff0d096d8" title="insert_old_idx" alt="" coords="368,411,471,437"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_ad681f20f8fb62e0331f43526e7fc5c99_icgraph.png" border="0" usemap="#tnc__commit_8c_ad681f20f8fb62e0331f43526e7fc5c99_icgraph" alt=""/></div>
<map name="tnc__commit_8c_ad681f20f8fb62e0331f43526e7fc5c99_icgraph" id="tnc__commit_8c_ad681f20f8fb62e0331f43526e7fc5c99_icgraph">
<area shape="rect" id="node2" href="tnc__commit_8c.html#aaab41523ed81f906598dbc52e68444ac" title="fill_gap" alt="" coords="167,284,229,311"/>
<area shape="rect" id="node3" href="tnc__commit_8c.html#ae35ab1b0e8a8676ac825941f36e77bdd" title="layout_leb_in_gaps" alt="" coords="277,284,411,311"/>
<area shape="rect" id="node4" href="tnc__commit_8c.html#aa94160dc8891f55de97cfb630b191ef2" title="layout_in_gaps" alt="" coords="459,284,568,311"/>
<area shape="rect" id="node5" href="tnc__commit_8c.html#a1f7210689e6f040c0b106db3e447e04b" title="layout_commit" alt="" coords="616,284,723,311"/>
<area shape="rect" id="node6" href="ubifs_8h.html#ae1e7a24e81c4fa022a4065530bd77bff" title="ubifs_tnc_start_commit" alt="" coords="771,284,929,311"/>
<area shape="rect" id="node7" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="977,284,1064,311"/>
<area shape="rect" id="node8" href="ubifs_2commit_8c.html#a91c88ecee0c3d4a55bbe6669a0caa521" title="run_bg_commit" alt="" coords="1119,221,1230,248"/>
<area shape="rect" id="node14" href="ubifs_8h.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="1112,309,1237,336"/>
<area shape="rect" id="node9" href="ubifs_8h.html#ad1d2abb94e9ca171f253ba64fdbf7aa6" title="ubifs_bg_thread" alt="" coords="1480,183,1595,209"/>
<area shape="rect" id="node10" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="1693,132,1787,159"/>
<area shape="rect" id="node12" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="1677,183,1803,209"/>
<area shape="rect" id="node11" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1885,5,1994,32"/>
<area shape="rect" id="node13" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="1878,56,2001,83"/>
<area shape="rect" id="node15" href="ubifs_2super_8c.html#a5f9c4c32c42dc338c1b84b87b7098105" title="ubifs_sync_fs" alt="" coords="1297,335,1399,361"/>
<area shape="rect" id="node16" href="ubifs_2recovery_8c.html#acb6fbec748694453a2e4b3ed2be6cc6b" title="grab_empty_leb" alt="" coords="1291,284,1405,311"/>
<area shape="rect" id="node17" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="1459,233,1616,260"/>
<area shape="rect" id="node26" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="1475,968,1600,995"/>
<area shape="rect" id="node46" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="1285,411,1411,437"/>
<area shape="rect" id="node18" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="1677,233,1803,260"/>
<area shape="rect" id="node19" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="2063,411,2196,437"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1893,157,1986,184"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1898,309,1981,336"/>
<area shape="rect" id="node23" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1895,208,1984,235"/>
<area shape="rect" id="node24" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1891,259,1987,285"/>
<area shape="rect" id="node25" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1888,360,1991,387"/>
<area shape="rect" id="node22" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="2086,765,2173,792"/>
<area shape="rect" id="node27" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="1682,385,1798,412"/>
<area shape="rect" id="node32" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="1671,1019,1809,1045"/>
<area shape="rect" id="node35" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="1669,1171,1811,1197"/>
<area shape="rect" id="node38" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="1677,1069,1803,1096"/>
<area shape="rect" id="node40" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="1680,968,1800,995"/>
<area shape="rect" id="node41" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="1678,1120,1802,1147"/>
<area shape="rect" id="node42" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="1667,841,1813,868"/>
<area shape="rect" id="node44" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="1664,917,1816,944"/>
<area shape="rect" id="node28" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1894,512,1985,539"/>
<area shape="rect" id="node29" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1901,563,1978,589"/>
<area shape="rect" id="node30" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1894,411,1985,437"/>
<area shape="rect" id="node31" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1896,461,1983,488"/>
<area shape="rect" id="node33" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="1890,1019,1989,1045"/>
<area shape="rect" id="node34" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="2079,1019,2179,1045"/>
<area shape="rect" id="node36" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="1878,1221,2001,1248"/>
<area shape="rect" id="node37" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="1864,1171,2015,1197"/>
<area shape="rect" id="node39" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1886,1069,1993,1096"/>
<area shape="rect" id="node43" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="1890,816,1989,843"/>
<area shape="rect" id="node45" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="1891,917,1988,944"/>
<area shape="rect" id="node47" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="1671,512,1809,539"/>
<area shape="rect" id="node48" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="1878,613,2001,640"/>
<area shape="rect" id="node49" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="1883,664,1996,691"/>
<area shape="rect" id="node50" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="1899,715,1979,741"/>
</map>
</div>

</div>
</div>
<a id="ae53a03c19715003f3e3770f006496e51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae53a03c19715003f3e3770f006496e51">&#9670;&nbsp;</a></span>return_gap_lebs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int return_gap_lebs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>return_gap_lebs - return LEBs used by the in-gap commit method. <code></code>: UBIFS file-system description object</p>
<p>This function clears the "taken" flag for the LEBs which were used by the "commit in-the-gaps" method. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_ae53a03c19715003f3e3770f006496e51_cgraph.png" border="0" usemap="#tnc__commit_8c_ae53a03c19715003f3e3770f006496e51_cgraph" alt=""/></div>
<map name="tnc__commit_8c_ae53a03c19715003f3e3770f006496e51_cgraph" id="tnc__commit_8c_ae53a03c19715003f3e3770f006496e51_cgraph">
<area shape="rect" id="node2" href="lprops_8c.html#aeb3c0f6274cdeba0c778d57f29ab39bf" title="ubifs_change_one_lp" alt="" coords="168,743,312,769"/>
<area shape="rect" id="node3" href="misc_8h.html#aa89c2768eb94f129c6afbe47420b44ba" title="ubifs_get_lprops" alt="" coords="372,641,489,668"/>
<area shape="rect" id="node4" href="lpt_8c.html#ade4e71b1fffa493cfb997feaff2c0638" title="ubifs_lpt_lookup_dirty" alt="" coords="549,743,697,769"/>
<area shape="rect" id="node8" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="2642,499,2714,525"/>
<area shape="rect" id="node41" href="lprops_8c.html#abfc4c6a75b37762f214cbc91f0ebe664" title="ubifs_change_lp" alt="" coords="373,692,489,719"/>
<area shape="rect" id="node48" href="misc_8h.html#a6dce2c34ec97d74cf4be59e0201bdb3e" title="ubifs_release_lprops" alt="" coords="360,920,501,947"/>
<area shape="rect" id="node5" href="lpt_8c.html#a6d9ea5f42b955fdb68064bc37bd9540d" title="ubifs_read_nnode" alt="" coords="2047,625,2171,652"/>
<area shape="rect" id="node14" href="lpt_8c.html#accd7155d1f9997fb5e6a7fd577fdc0f2" title="dirty_cow_nnode" alt="" coords="745,717,865,744"/>
<area shape="rect" id="node17" href="lpt_8c.html#a7fd536e4a29b47a6485fc3931f91857b" title="ubifs_get_nnode" alt="" coords="1881,641,1999,668"/>
<area shape="rect" id="node18" href="lpt_8c.html#ad8f891756dae6c6dceeb51fb917b023b" title="ubifs_get_pnode" alt="" coords="747,553,864,580"/>
<area shape="rect" id="node36" href="lpt_8c.html#ac60e8c2b5dbc5ab11045f313bcc441a0" title="dirty_cow_pnode" alt="" coords="745,667,865,693"/>
<area shape="rect" id="node6" href="lpt_8c.html#a9f9e5388fe8c2966b4517e0b243b9ce6" title="calc_nnode_num_from\l_parent" alt="" coords="2411,673,2564,714"/>
<area shape="rect" id="node7" href="ubifs_2io_8c.html#ab6a2a3c4a79d6d4c52350540437d3cb3" title="ubifs_leb_read" alt="" coords="2236,549,2343,576"/>
<area shape="rect" id="node9" href="lpt_8c.html#a0d29b2eba67308c09e6c7e05ad2b63b1" title="ubifs_unpack_nnode" alt="" coords="2219,397,2360,424"/>
<area shape="rect" id="node13" href="lpt_8c.html#ad905cc71245ecfb3152a844c581d3e12" title="validate_nnode" alt="" coords="2235,701,2344,728"/>
<area shape="rect" id="node10" href="lpt_8c.html#a96436eaf7459ebef6525d09761a38d2c" title="check_lpt_type" alt="" coords="2432,397,2543,424"/>
<area shape="rect" id="node11" href="lpt_8c.html#af769280c22d887914ee95e9c2e4cc7de" title="ubifs_unpack_bits" alt="" coords="2615,321,2741,348"/>
<area shape="rect" id="node12" href="lpt_8c.html#ac0dcb63535a53346f5364a21cd948dec" title="check_lpt_crc" alt="" coords="2436,296,2539,323"/>
<area shape="rect" id="node15" href="lpt_8c.html#af853639d65479e588832f7abbc932bea" title="ubifs_add_nnode_dirt" alt="" coords="913,717,1059,744"/>
<area shape="rect" id="node16" href="lpt_8c.html#ae5e7ec1ecf58650a45f5ffb5d4029d10" title="ubifs_add_lpt_dirt" alt="" coords="1124,692,1248,719"/>
<area shape="rect" id="node19" href="lpt_8c.html#a1e838b76fdfdb8c75cbd35ed51bad53c" title="read_pnode" alt="" coords="2064,245,2153,272"/>
<area shape="rect" id="node26" href="lpt_8c.html#a50862af12cdded0c2e3be8cea516be8e" title="update_cats" alt="" coords="939,515,1033,541"/>
<area shape="rect" id="node20" href="lpt_8c.html#afaa9919aea45f990f706d5a19a7de403" title="calc_pnode_num_from\l_parent" alt="" coords="2411,107,2564,149"/>
<area shape="rect" id="node21" href="lprops_8c.html#a7a2c9edc0537908ba98fe9a7ab5659d8" title="ubifs_categorize_lprops" alt="" coords="2408,195,2567,221"/>
<area shape="rect" id="node22" href="lpt_8c.html#a7d13c8b402e5a787d5f689a01f01725d" title="unpack_pnode" alt="" coords="2236,347,2343,373"/>
<area shape="rect" id="node23" href="lpt_8c.html#aa9b770e270a9dd0d3fa430bcca3eb9b1" title="validate_pnode" alt="" coords="2235,144,2344,171"/>
<area shape="rect" id="node24" href="lpt_8c.html#a60013b08dd0072dd2a70f499427a67d0" title="set_pnode_lnum" alt="" coords="2231,245,2348,272"/>
<area shape="rect" id="node25" href="ubifs_2debug_8c.html#ab2224f946272a25cfacf2607c6502818" title="ubifs_dump_pnode" alt="" coords="2224,296,2355,323"/>
<area shape="rect" id="node27" href="lprops_8c.html#a664f531f8332b3c53d93e25c4e688e09" title="ubifs_add_to_cat" alt="" coords="1125,515,1247,541"/>
<area shape="rect" id="node28" href="lprops_8c.html#afab6b8531eed73f29803f3f00ecb646e" title="add_to_lpt_heap" alt="" coords="1332,515,1449,541"/>
<area shape="rect" id="node29" href="lprops_8c.html#ad0f7bf66835597d0e8e171b0c91b57be" title="get_heap_comp_val" alt="" coords="1695,641,1833,668"/>
<area shape="rect" id="node30" href="lprops_8c.html#aa85b7d6ee17c895f4a592398484654bb" title="move_up_lpt_heap" alt="" coords="1516,515,1647,541"/>
<area shape="rect" id="node31" href="lprops_8c.html#a715a0be6e5e1b99a7bf830fca61a84e2" title="dbg_check_heap" alt="" coords="1521,413,1641,440"/>
<area shape="rect" id="node32" href="ubifs_2debug_8h.html#ad9c4d68015fb8802b1553a53880d43cc" title="dbg_is_chk_gen" alt="" coords="1706,439,1822,465"/>
<area shape="rect" id="node33" href="ubifs_2debug_8h.html#ab66d4ac998d5cd15774f5a22d366e1f1" title="dbg_is_chk_lprops" alt="" coords="1699,489,1829,516"/>
<area shape="rect" id="node34" href="lpt_8c.html#af1c4868152bb6ea9ae7c87e7dad9cede" title="ubifs_lpt_lookup" alt="" coords="1706,591,1822,617"/>
<area shape="rect" id="node35" href="ubifs_2debug_8c.html#a5600b63b8362df17ed46c4e20784fb6c" title="ubifs_dump_heap" alt="" coords="1702,540,1826,567"/>
<area shape="rect" id="node37" href="lpt_8c.html#a0e19e0a4226ca2a2502accf8a120c9fd" title="add_pnode_dirt" alt="" coords="931,667,1041,693"/>
<area shape="rect" id="node38" href="lpt_8c.html#a1c3d339c703cc7819cf15ac8fbd2c911" title="replace_cats" alt="" coords="938,616,1034,643"/>
<area shape="rect" id="node39" href="lprops_8c.html#a4a2c2b7e688877c1df8d8f4d49e1728a" title="ubifs_replace_cat" alt="" coords="1124,616,1248,643"/>
<area shape="rect" id="node40" href="lprops_8c.html#a0b65160e0da643b5257b811348f16321" title="lpt_heap_replace" alt="" coords="1331,616,1451,643"/>
<area shape="rect" id="node42" href="lprops_8c.html#a911df1bb1dc58cf096c97ce547539153" title="is_lprops_dirty" alt="" coords="570,641,677,668"/>
<area shape="rect" id="node43" href="lprops_8c.html#a54fa4acd96a49b1bbe2baeac4dbd0c0b" title="ubifs_calc_dark" alt="" coords="567,692,680,719"/>
<area shape="rect" id="node44" href="lprops_8c.html#a2f083caeaebac06c1f51d7c7d34f5c13" title="change_category" alt="" coords="925,464,1047,491"/>
<area shape="rect" id="node45" href="lprops_8c.html#a1b58cb9915dbbdf9ac60e7a1369d05ab" title="adjust_lpt_heap" alt="" coords="1525,464,1638,491"/>
<area shape="rect" id="node46" href="lprops_8c.html#a88d9d4b260ebb86abbc16675b951f2c1" title="ubifs_remove_from_cat" alt="" coords="1107,413,1265,440"/>
<area shape="rect" id="node47" href="lprops_8c.html#a94e67294df31694767c10db81d4fbd47" title="remove_from_lpt_heap" alt="" coords="1313,413,1468,440"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_ae53a03c19715003f3e3770f006496e51_icgraph.png" border="0" usemap="#tnc__commit_8c_ae53a03c19715003f3e3770f006496e51_icgraph" alt=""/></div>
<map name="tnc__commit_8c_ae53a03c19715003f3e3770f006496e51_icgraph" id="tnc__commit_8c_ae53a03c19715003f3e3770f006496e51_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#a3e11b3b283926c57ea7d7e7aaf6cabe1" title="ubifs_tnc_end_commit" alt="" coords="168,247,321,273"/>
<area shape="rect" id="node3" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="369,247,456,273"/>
<area shape="rect" id="node4" href="ubifs_2commit_8c.html#a91c88ecee0c3d4a55bbe6669a0caa521" title="run_bg_commit" alt="" coords="511,184,622,211"/>
<area shape="rect" id="node10" href="ubifs_8h.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="504,272,629,299"/>
<area shape="rect" id="node5" href="ubifs_8h.html#ad1d2abb94e9ca171f253ba64fdbf7aa6" title="ubifs_bg_thread" alt="" coords="872,145,987,172"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="1085,120,1179,147"/>
<area shape="rect" id="node8" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="1069,171,1195,197"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1281,5,1391,32"/>
<area shape="rect" id="node9" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="1275,56,1397,83"/>
<area shape="rect" id="node11" href="ubifs_2super_8c.html#a5f9c4c32c42dc338c1b84b87b7098105" title="ubifs_sync_fs" alt="" coords="689,196,791,223"/>
<area shape="rect" id="node12" href="ubifs_2recovery_8c.html#acb6fbec748694453a2e4b3ed2be6cc6b" title="grab_empty_leb" alt="" coords="683,297,797,324"/>
<area shape="rect" id="node13" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="851,233,1008,260"/>
<area shape="rect" id="node22" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="867,1171,992,1197"/>
<area shape="rect" id="node42" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="677,399,803,425"/>
<area shape="rect" id="node14" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="1069,233,1195,260"/>
<area shape="rect" id="node15" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1479,436,1612,463"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1289,208,1383,235"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1295,157,1377,184"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1291,259,1381,285"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1288,309,1384,336"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1285,360,1387,387"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1502,816,1589,843"/>
<area shape="rect" id="node23" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="1074,385,1190,412"/>
<area shape="rect" id="node28" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="1063,1412,1201,1439"/>
<area shape="rect" id="node31" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="1061,1272,1203,1299"/>
<area shape="rect" id="node34" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="1069,1348,1195,1375"/>
<area shape="rect" id="node36" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="1072,1171,1192,1197"/>
<area shape="rect" id="node37" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="1070,1221,1194,1248"/>
<area shape="rect" id="node38" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="1059,968,1205,995"/>
<area shape="rect" id="node40" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="1056,1120,1208,1147"/>
<area shape="rect" id="node24" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1291,411,1381,437"/>
<area shape="rect" id="node25" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1297,461,1375,488"/>
<area shape="rect" id="node26" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1291,512,1381,539"/>
<area shape="rect" id="node27" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1293,563,1379,589"/>
<area shape="rect" id="node29" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="1287,1424,1385,1451"/>
<area shape="rect" id="node30" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1495,1221,1595,1248"/>
<area shape="rect" id="node32" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="1275,1323,1397,1349"/>
<area shape="rect" id="node33" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="1261,1272,1411,1299"/>
<area shape="rect" id="node35" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1283,1373,1389,1400"/>
<area shape="rect" id="node39" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="1287,867,1385,893"/>
<area shape="rect" id="node41" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="1287,1120,1385,1147"/>
<area shape="rect" id="node43" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="1063,613,1201,640"/>
<area shape="rect" id="node44" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="1275,664,1397,691"/>
<area shape="rect" id="node45" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="1279,715,1393,741"/>
<area shape="rect" id="node46" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="1296,765,1376,792"/>
<area shape="rect" id="node47" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="1256,968,1416,995"/>
<area shape="rect" id="node48" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="1490,917,1601,944"/>
<area shape="rect" id="node49" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="1464,993,1627,1020"/>
<area shape="rect" id="node50" href="ubifs_2ioctl_8c.html#a06251cc4602342e44b5ed0a1b39f7e60" title="setflags" alt="" coords="1302,613,1370,640"/>
</map>
</div>

</div>
</div>
<a id="a3e11b3b283926c57ea7d7e7aaf6cabe1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e11b3b283926c57ea7d7e7aaf6cabe1">&#9670;&nbsp;</a></span>ubifs_tnc_end_commit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ubifs_tnc_end_commit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_tnc_end_commit - update the TNC for commit end. <code></code>: UBIFS file-system description object</p>
<p>Write the dirty znodes. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_a3e11b3b283926c57ea7d7e7aaf6cabe1_cgraph.png" border="0" usemap="#tnc__commit_8c_a3e11b3b283926c57ea7d7e7aaf6cabe1_cgraph" alt=""/></div>
<map name="tnc__commit_8c_a3e11b3b283926c57ea7d7e7aaf6cabe1_cgraph" id="tnc__commit_8c_a3e11b3b283926c57ea7d7e7aaf6cabe1_cgraph">
<area shape="rect" id="node2" href="tnc__commit_8c.html#ae53a03c19715003f3e3770f006496e51" title="return_gap_lebs" alt="" coords="224,461,339,488"/>
<area shape="rect" id="node24" href="tnc__commit_8c.html#a170826fc5905c8e3ff4182dbb98b8e86" title="write_index" alt="" coords="237,715,325,741"/>
<area shape="rect" id="node49" href="tnc__commit_8c.html#aed7297664da69ab5524f0e53b435d679" title="free_obsolete_znodes" alt="" coords="207,892,356,919"/>
<area shape="rect" id="node3" href="lprops_8c.html#aeb3c0f6274cdeba0c778d57f29ab39bf" title="ubifs_change_one_lp" alt="" coords="404,247,548,273"/>
<area shape="rect" id="node4" href="misc_8h.html#aa89c2768eb94f129c6afbe47420b44ba" title="ubifs_get_lprops" alt="" coords="608,208,725,235"/>
<area shape="rect" id="node5" href="lpt_8c.html#ade4e71b1fffa493cfb997feaff2c0638" title="ubifs_lpt_lookup_dirty" alt="" coords="785,208,933,235"/>
<area shape="rect" id="node9" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1573,385,1645,412"/>
<area shape="rect" id="node19" href="lprops_8c.html#abfc4c6a75b37762f214cbc91f0ebe664" title="ubifs_change_lp" alt="" coords="609,360,725,387"/>
<area shape="rect" id="node23" href="misc_8h.html#a6dce2c34ec97d74cf4be59e0201bdb3e" title="ubifs_release_lprops" alt="" coords="596,259,737,285"/>
<area shape="rect" id="node6" href="lpt_8c.html#a6d9ea5f42b955fdb68064bc37bd9540d" title="ubifs_read_nnode" alt="" coords="1160,259,1284,285"/>
<area shape="rect" id="node12" href="lpt_8c.html#accd7155d1f9997fb5e6a7fd577fdc0f2" title="dirty_cow_nnode" alt="" coords="981,208,1101,235"/>
<area shape="rect" id="node14" href="lpt_8c.html#a7fd536e4a29b47a6485fc3931f91857b" title="ubifs_get_nnode" alt="" coords="983,309,1100,336"/>
<area shape="rect" id="node15" href="lpt_8c.html#ad8f891756dae6c6dceeb51fb917b023b" title="ubifs_get_pnode" alt="" coords="983,360,1100,387"/>
<area shape="rect" id="node18" href="lpt_8c.html#ac60e8c2b5dbc5ab11045f313bcc441a0" title="dirty_cow_pnode" alt="" coords="981,157,1101,184"/>
<area shape="rect" id="node7" href="lpt_8c.html#a9f9e5388fe8c2966b4517e0b243b9ce6" title="calc_nnode_num_from\l_parent" alt="" coords="1532,23,1685,65"/>
<area shape="rect" id="node8" href="ubifs_2io_8c.html#ab6a2a3c4a79d6d4c52350540437d3cb3" title="ubifs_leb_read" alt="" coords="1360,309,1467,336"/>
<area shape="rect" id="node10" href="lpt_8c.html#a0d29b2eba67308c09e6c7e05ad2b63b1" title="ubifs_unpack_nnode" alt="" coords="1343,208,1484,235"/>
<area shape="rect" id="node11" href="lpt_8c.html#ad905cc71245ecfb3152a844c581d3e12" title="validate_nnode" alt="" coords="1359,5,1468,32"/>
<area shape="rect" id="node13" href="lpt_8c.html#af853639d65479e588832f7abbc932bea" title="ubifs_add_nnode_dirt" alt="" coords="1149,208,1295,235"/>
<area shape="rect" id="node16" href="lpt_8c.html#a1e838b76fdfdb8c75cbd35ed51bad53c" title="read_pnode" alt="" coords="1177,360,1267,387"/>
<area shape="rect" id="node17" href="lpt_8c.html#a50862af12cdded0c2e3be8cea516be8e" title="update_cats" alt="" coords="1175,309,1269,336"/>
<area shape="rect" id="node20" href="lprops_8c.html#a911df1bb1dc58cf096c97ce547539153" title="is_lprops_dirty" alt="" coords="806,360,913,387"/>
<area shape="rect" id="node21" href="lprops_8c.html#a54fa4acd96a49b1bbe2baeac4dbd0c0b" title="ubifs_calc_dark" alt="" coords="803,259,916,285"/>
<area shape="rect" id="node22" href="lprops_8c.html#a2f083caeaebac06c1f51d7c7d34f5c13" title="change_category" alt="" coords="799,309,920,336"/>
<area shape="rect" id="node25" href="misc_8h.html#ac7a685691e935bc3ef4a7918e107c8de" title="ubifs_idx_node_sz" alt="" coords="411,867,541,893"/>
<area shape="rect" id="node26" href="lprops_8c.html#ae3f8fc7da604fc1fbfa182c024679d42" title="ubifs_update_one_lp" alt="" coords="405,323,547,349"/>
<area shape="rect" id="node27" href="misc_8h.html#a1598cadb907a20f9e5dc3e7ee74edb1d" title="ubifs_idx_branch" alt="" coords="416,917,536,944"/>
<area shape="rect" id="node28" href="key_8h.html#a6a23a0657894a1a52a8a3046007995b3" title="key_write_idx" alt="" coords="425,968,527,995"/>
<area shape="rect" id="node29" href="ubifs_2debug_8c.html#a56365d730ac6932bf3163a8ba7279779" title="ubifs_dump_znode" alt="" coords="411,512,541,539"/>
<area shape="rect" id="node36" href="ubifs_2io_8c.html#acfc2ca3ffa8d094855c2e59551f3a767" title="ubifs_prepare_node" alt="" coords="409,765,543,792"/>
<area shape="rect" id="node40" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="627,613,706,640"/>
<area shape="rect" id="node41" href="misc_8h.html#abe5c86108a05199a899138767ca1f42a" title="ubifs_zn_dirty" alt="" coords="425,613,527,640"/>
<area shape="rect" id="node42" href="misc_8h.html#a21390e9f6e0627bc617f177cee88fad7" title="ubifs_zn_cow" alt="" coords="425,664,527,691"/>
<area shape="rect" id="node43" href="ubifs_2io_8c.html#a02909cfc9d3a0100f549390c7d464632" title="ubifs_leb_write" alt="" coords="421,816,531,843"/>
<area shape="rect" id="node30" href="ubifs_2debug_8c.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="606,537,727,564"/>
<area shape="rect" id="node31" href="key_8h.html#a06f47822510ef850cb7065778115453c" title="key_type" alt="" coords="822,512,897,539"/>
<area shape="rect" id="node32" href="key_8h.html#a4a12b97ed78e138baf7886a6df7ed50f" title="key_inum" alt="" coords="820,563,899,589"/>
<area shape="rect" id="node33" href="ubifs_2debug_8c.html#ad6af0af711fdb082f6df4eaeb4d82fe6" title="get_key_type" alt="" coords="809,613,909,640"/>
<area shape="rect" id="node34" href="key_8h.html#acddf1ca88d72a37e06c5c608cd084656" title="key_hash" alt="" coords="820,664,899,691"/>
<area shape="rect" id="node35" href="key_8h.html#a10c13375b52dbb12be6f9b685d1d1ba7" title="key_block" alt="" coords="819,461,900,488"/>
<area shape="rect" id="node37" href="ubifs_2io_8c.html#a0b3f089c430db97bbc68e362dc7867c8" title="next_sqnum" alt="" coords="620,892,713,919"/>
<area shape="rect" id="node38" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="806,968,913,995"/>
<area shape="rect" id="node39" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="999,1019,1084,1045"/>
<area shape="rect" id="node44" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="982,816,1101,843"/>
<area shape="rect" id="node45" href="ubifs_2debug_8c.html#af929a6951e19c79f1235738386005c06" title="dbg_leb_write" alt="" coords="615,1069,718,1096"/>
<area shape="rect" id="node46" href="ubifs_2debug_8h.html#ab599356d6c84ddd2c7b9001b452c30bd" title="dbg_is_power_cut" alt="" coords="796,1120,923,1147"/>
<area shape="rect" id="node47" href="ubifs_2debug_8c.html#a67b6fc23cfbf882431d33323a03ef74c" title="power_cut_emulated" alt="" coords="788,1019,931,1045"/>
<area shape="rect" id="node48" href="ubifs_2debug_8c.html#a90853c3e5be760b8c7d76c2d39fdb28c" title="corrupt_data" alt="" coords="812,1171,907,1197"/>
<area shape="rect" id="node50" href="misc_8h.html#a85284dff497fd8ebc7ef947efe958eb6" title="ubifs_zn_obsolete" alt="" coords="413,1019,539,1045"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_a3e11b3b283926c57ea7d7e7aaf6cabe1_icgraph.png" border="0" usemap="#tnc__commit_8c_a3e11b3b283926c57ea7d7e7aaf6cabe1_icgraph" alt=""/></div>
<map name="tnc__commit_8c_a3e11b3b283926c57ea7d7e7aaf6cabe1_icgraph" id="tnc__commit_8c_a3e11b3b283926c57ea7d7e7aaf6cabe1_icgraph">
<area shape="rect" id="node2" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="207,247,293,273"/>
<area shape="rect" id="node3" href="ubifs_2commit_8c.html#a91c88ecee0c3d4a55bbe6669a0caa521" title="run_bg_commit" alt="" coords="349,184,459,211"/>
<area shape="rect" id="node10" href="ubifs_8h.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="341,272,467,299"/>
<area shape="rect" id="node4" href="ubifs_8h.html#ad1d2abb94e9ca171f253ba64fdbf7aa6" title="ubifs_bg_thread" alt="" coords="709,145,824,172"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="923,120,1016,147"/>
<area shape="rect" id="node8" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="907,171,1032,197"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1119,5,1228,32"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="1336,5,1429,32"/>
<area shape="rect" id="node9" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="1112,56,1235,83"/>
<area shape="rect" id="node11" href="ubifs_2super_8c.html#a5f9c4c32c42dc338c1b84b87b7098105" title="ubifs_sync_fs" alt="" coords="526,196,629,223"/>
<area shape="rect" id="node12" href="ubifs_2recovery_8c.html#acb6fbec748694453a2e4b3ed2be6cc6b" title="grab_empty_leb" alt="" coords="520,297,635,324"/>
<area shape="rect" id="node13" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="688,233,845,260"/>
<area shape="rect" id="node22" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="704,1171,829,1197"/>
<area shape="rect" id="node42" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="515,399,640,425"/>
<area shape="rect" id="node14" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="906,233,1033,260"/>
<area shape="rect" id="node15" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1316,436,1449,463"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1127,208,1220,235"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1132,157,1215,184"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1129,259,1218,285"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1125,309,1221,336"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1122,360,1225,387"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1339,816,1426,843"/>
<area shape="rect" id="node23" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="911,385,1027,412"/>
<area shape="rect" id="node28" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="901,1412,1038,1439"/>
<area shape="rect" id="node31" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="898,1272,1041,1299"/>
<area shape="rect" id="node34" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="906,1348,1033,1375"/>
<area shape="rect" id="node36" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="909,1171,1029,1197"/>
<area shape="rect" id="node37" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="907,1221,1031,1248"/>
<area shape="rect" id="node38" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="897,968,1042,995"/>
<area shape="rect" id="node40" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="893,1120,1045,1147"/>
<area shape="rect" id="node24" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1128,411,1219,437"/>
<area shape="rect" id="node25" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1135,461,1212,488"/>
<area shape="rect" id="node26" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1128,512,1219,539"/>
<area shape="rect" id="node27" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1130,563,1217,589"/>
<area shape="rect" id="node29" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="1124,1424,1223,1451"/>
<area shape="rect" id="node30" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1333,1221,1433,1248"/>
<area shape="rect" id="node32" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="1112,1323,1235,1349"/>
<area shape="rect" id="node33" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="1098,1272,1249,1299"/>
<area shape="rect" id="node35" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1120,1373,1227,1400"/>
<area shape="rect" id="node39" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="1124,867,1223,893"/>
<area shape="rect" id="node41" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="1125,1120,1222,1147"/>
<area shape="rect" id="node43" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="900,613,1039,640"/>
<area shape="rect" id="node44" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="1112,664,1235,691"/>
<area shape="rect" id="node45" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="1117,715,1230,741"/>
<area shape="rect" id="node46" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="1133,765,1213,792"/>
<area shape="rect" id="node47" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="1093,968,1253,995"/>
<area shape="rect" id="node48" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="1327,917,1438,944"/>
<area shape="rect" id="node49" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="1301,993,1464,1020"/>
<area shape="rect" id="node50" href="ubifs_2ioctl_8c.html#a06251cc4602342e44b5ed0a1b39f7e60" title="setflags" alt="" coords="1139,613,1207,640"/>
</map>
</div>

</div>
</div>
<a id="ae1e7a24e81c4fa022a4065530bd77bff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1e7a24e81c4fa022a4065530bd77bff">&#9670;&nbsp;</a></span>ubifs_tnc_start_commit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ubifs_tnc_start_commit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structubifs__zbranch.html">ubifs_zbranch</a> *&#160;</td>
          <td class="paramname"><em>zroot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ubifs_tnc_start_commit - start TNC commit. <code></code>: UBIFS file-system description object : new index root position is returned here</p>
<p>This function prepares the list of indexing nodes to commit and lays out their positions on flash. If there is not enough free space it uses the in-gap commit method. Returns zero in case of success and a negative error code in case of failure. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_ae1e7a24e81c4fa022a4065530bd77bff_cgraph.png" border="0" usemap="#tnc__commit_8c_ae1e7a24e81c4fa022a4065530bd77bff_cgraph" alt=""/></div>
<map name="tnc__commit_8c_ae1e7a24e81c4fa022a4065530bd77bff_cgraph" id="tnc__commit_8c_ae1e7a24e81c4fa022a4065530bd77bff_cgraph">
<area shape="rect" id="node2" href="ubifs_2debug_8c.html#a8e749de733b483ca979984b8aa078aa6" title="dbg_check_tnc" alt="" coords="239,518,349,544"/>
<area shape="rect" id="node21" href="tnc__commit_8c.html#a64748c798bfc8c8fd1ee5bedae19a5b3" title="get_znodes_to_commit" alt="" coords="215,911,373,938"/>
<area shape="rect" id="node25" href="tnc__commit_8c.html#a82dea2876366b839f177356c01a9c031" title="alloc_idx_lebs" alt="" coords="456,1139,560,1166"/>
<area shape="rect" id="node36" href="tnc__commit_8c.html#a1f7210689e6f040c0b106db3e447e04b" title="layout_commit" alt="" coords="241,1038,347,1064"/>
<area shape="rect" id="node44" href="tnc__commit_8c.html#a045e506a5e968ca24069299455ff0abf" title="free_unused_idx_lebs" alt="" coords="434,1240,582,1267"/>
<area shape="rect" id="node45" href="tnc_8c.html#a01e38c99f12ee3c060c9214d14ec62f3" title="destroy_old_idx" alt="" coords="237,1190,351,1216"/>
<area shape="rect" id="node46" href="find_8c.html#abb183b65aeed0bc4e18681aec0ffdb5b" title="ubifs_save_dirty_idx\l_lnums" alt="" coords="847,1452,988,1493"/>
<area shape="rect" id="node49" href="budget_8c.html#a6109e1d36eaa593c345944d0d4b30745" title="ubifs_calc_min_idx_lebs" alt="" coords="212,1291,376,1318"/>
<area shape="rect" id="node50" href="tnc__commit_8c.html#aabbfd5925b308189c641e1570a2a19f7" title="free_idx_lebs" alt="" coords="245,1139,343,1166"/>
<area shape="rect" id="node3" href="ubifs_2debug_8h.html#aaccd583a761afebb452421d214607adb" title="dbg_is_chk_index" alt="" coords="651,1088,778,1115"/>
<area shape="rect" id="node4" href="tnc__misc_8c.html#a97a13645d24f27ca0f17eec920e0e6c5" title="ubifs_tnc_postorder\l_first" alt="" coords="647,566,783,608"/>
<area shape="rect" id="node6" href="ubifs_2debug_8c.html#a39ae5d2547e899a30e5f9bfe9acb40ba" title="dbg_check_znode" alt="" coords="445,262,571,288"/>
<area shape="rect" id="node7" href="misc_8h.html#abe5c86108a05199a899138767ca1f42a" title="ubifs_zn_dirty" alt="" coords="866,708,969,735"/>
<area shape="rect" id="node9" href="key_8h.html#a6395510bfa3e62eff60652c9624180e1" title="keys_cmp" alt="" coords="876,118,959,144"/>
<area shape="rect" id="node11" href="ubifs_2debug_8c.html#a5ffffda90e7c954ece8261620b832623" title="dbg_check_key_order" alt="" coords="640,363,789,390"/>
<area shape="rect" id="node14" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1080,632,1152,659"/>
<area shape="rect" id="node18" href="ubifs_2misc_8c.html#a49c185988382ac9b2f28935dd44a0441" title="ubifs_msg" alt="" coords="876,176,959,203"/>
<area shape="rect" id="node19" href="ubifs_2debug_8c.html#a56365d730ac6932bf3163a8ba7279779" title="ubifs_dump_znode" alt="" coords="649,8,780,35"/>
<area shape="rect" id="node20" href="tnc__misc_8c.html#ab73fd13bf253a9f01d5ddeb1e6da16fc" title="ubifs_tnc_postorder_next" alt="" coords="424,518,592,544"/>
<area shape="rect" id="node5" href="misc_8h.html#a28eee58cbe217f89376908e1cf560061" title="ubifs_tnc_find_child" alt="" coords="849,582,986,608"/>
<area shape="rect" id="node8" href="tnc__misc_8c.html#a795e1a9542770ea482f128ed03e6a87f" title="ubifs_search_zbranch" alt="" coords="640,160,789,187"/>
<area shape="rect" id="node10" href="key_8h.html#a391b7c6e47045b125899fd494b93b2ed" title="is_hash_key" alt="" coords="667,211,762,238"/>
<area shape="rect" id="node12" href="tnc__misc_8c.html#a9e631b2ac150afe245c06afae9abe5e4" title="ubifs_tnc_read_node" alt="" coords="846,379,989,406"/>
<area shape="rect" id="node13" href="key_8h.html#a5611c13d648e672825da064c90c8903a" title="key_read" alt="" coords="1258,354,1333,380"/>
<area shape="rect" id="node15" href="ubifs_2debug_8c.html#a21f9fd19dbd716216a94f656bba5e3e0" title="ubifs_dump_node" alt="" coords="1054,278,1178,304"/>
<area shape="rect" id="node16" href="ubifs_2debug_8c.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="1235,227,1356,254"/>
<area shape="rect" id="node17" href="replay_8c.html#a7b1ba80877b09e706904424df32d5ed3" title="ubifs_validate_entry" alt="" coords="848,430,987,456"/>
<area shape="rect" id="node22" href="tnc__commit_8c.html#ad50b2f657e8580a4de9d921e8866a3b9" title="find_first_dirty" alt="" coords="663,784,767,811"/>
<area shape="rect" id="node23" href="misc_8h.html#a21390e9f6e0627bc617f177cee88fad7" title="ubifs_zn_cow" alt="" coords="457,987,559,1014"/>
<area shape="rect" id="node24" href="tnc__commit_8c.html#a38afc10e5e3f36e9ef617ceeb9e74871" title="find_next_dirty" alt="" coords="455,784,561,811"/>
<area shape="rect" id="node26" href="tnc__commit_8c.html#aa01412c139f0a3f0aaf0a6d83e1415c5" title="get_leb_cnt" alt="" coords="670,1190,759,1216"/>
<area shape="rect" id="node27" href="find_8c.html#a5dbeb2fbcdd3403f15e5d6ce214edcf9" title="ubifs_find_free_leb\l_for_idx" alt="" coords="649,1292,780,1333"/>
<area shape="rect" id="node28" href="misc_8h.html#aa89c2768eb94f129c6afbe47420b44ba" title="ubifs_get_lprops" alt="" coords="1057,1350,1175,1376"/>
<area shape="rect" id="node29" href="lprops_8c.html#af7bb5628372135952187c4c37b9a0a68" title="ubifs_fast_find_empty" alt="" coords="842,1198,993,1224"/>
<area shape="rect" id="node30" href="lprops_8c.html#af4f3f200dc1d36660281ec0282293308" title="ubifs_fast_find_freeable" alt="" coords="837,1248,997,1275"/>
<area shape="rect" id="node31" href="find_8c.html#ae53f61786f9fb4f68b3eb47770f97846" title="scan_for_leb_for_idx" alt="" coords="846,1299,989,1326"/>
<area shape="rect" id="node32" href="lprops_8c.html#abfc4c6a75b37762f214cbc91f0ebe664" title="ubifs_change_lp" alt="" coords="1058,1122,1174,1148"/>
<area shape="rect" id="node33" href="misc_8h.html#a6dce2c34ec97d74cf4be59e0201bdb3e" title="ubifs_release_lprops" alt="" coords="1045,1400,1187,1427"/>
<area shape="rect" id="node34" href="ubifs_2io_8c.html#ad9d3a62a61d21e1faa60cd6e630c41ac" title="ubifs_leb_unmap" alt="" coords="857,1039,977,1066"/>
<area shape="rect" id="node35" href="lprops_8c.html#aeb3c0f6274cdeba0c778d57f29ab39bf" title="ubifs_change_one_lp" alt="" coords="845,1096,989,1123"/>
<area shape="rect" id="node37" href="tnc__commit_8c.html#aa94160dc8891f55de97cfb630b191ef2" title="layout_in_gaps" alt="" coords="453,1038,563,1064"/>
<area shape="rect" id="node42" href="tnc__commit_8c.html#a5704e54ff6ae794072cf6fefd287ee56" title="layout_in_empty_space" alt="" coords="429,886,587,912"/>
<area shape="rect" id="node38" href="tnc__commit_8c.html#ae35ab1b0e8a8676ac825941f36e77bdd" title="layout_leb_in_gaps" alt="" coords="648,1038,781,1064"/>
<area shape="rect" id="node39" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="672,987,757,1014"/>
<area shape="rect" id="node40" href="ubifs_2debug_8c.html#aed811715f06c90d00e8bc83e9616e016" title="ubifs_dump_budg" alt="" coords="653,1139,777,1166"/>
<area shape="rect" id="node41" href="ubifs_2debug_8c.html#a2fa0aeaaa556f0b13d098456ef7d86d4" title="ubifs_dump_lprops" alt="" coords="852,900,983,927"/>
<area shape="rect" id="node43" href="misc_8h.html#ac7a685691e935bc3ef4a7918e107c8de" title="ubifs_idx_node_sz" alt="" coords="649,886,780,912"/>
<area shape="rect" id="node47" href="find_8c.html#a3e29c87a698697582a0330af8bf8ebef" title="cmp_dirty_idx" alt="" coords="1065,1455,1167,1482"/>
<area shape="rect" id="node48" href="find_8c.html#aa2d7c3b5243a5c0090c3f9283939eeaf" title="swap_dirty_idx" alt="" coords="1061,1506,1171,1532"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_ae1e7a24e81c4fa022a4065530bd77bff_icgraph.png" border="0" usemap="#tnc__commit_8c_ae1e7a24e81c4fa022a4065530bd77bff_icgraph" alt=""/></div>
<map name="tnc__commit_8c_ae1e7a24e81c4fa022a4065530bd77bff_icgraph" id="tnc__commit_8c_ae1e7a24e81c4fa022a4065530bd77bff_icgraph">
<area shape="rect" id="node2" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="212,247,299,273"/>
<area shape="rect" id="node3" href="ubifs_2commit_8c.html#a91c88ecee0c3d4a55bbe6669a0caa521" title="run_bg_commit" alt="" coords="354,184,465,211"/>
<area shape="rect" id="node10" href="ubifs_8h.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="347,272,472,299"/>
<area shape="rect" id="node4" href="ubifs_8h.html#ad1d2abb94e9ca171f253ba64fdbf7aa6" title="ubifs_bg_thread" alt="" coords="715,145,829,172"/>
<area shape="rect" id="node5" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="928,120,1021,147"/>
<area shape="rect" id="node8" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="912,171,1037,197"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1124,5,1233,32"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a9d5671876eccb7da1101b3039a34dffc" title="ubifs_mount" alt="" coords="1341,5,1435,32"/>
<area shape="rect" id="node9" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="1117,56,1240,83"/>
<area shape="rect" id="node11" href="ubifs_2super_8c.html#a5f9c4c32c42dc338c1b84b87b7098105" title="ubifs_sync_fs" alt="" coords="531,196,634,223"/>
<area shape="rect" id="node12" href="ubifs_2recovery_8c.html#acb6fbec748694453a2e4b3ed2be6cc6b" title="grab_empty_leb" alt="" coords="525,297,640,324"/>
<area shape="rect" id="node13" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="693,233,851,260"/>
<area shape="rect" id="node22" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="709,1171,835,1197"/>
<area shape="rect" id="node42" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="520,399,645,425"/>
<area shape="rect" id="node14" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="911,233,1038,260"/>
<area shape="rect" id="node15" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1321,436,1455,463"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1132,208,1225,235"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1137,157,1220,184"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1134,259,1223,285"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1131,309,1227,336"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1127,360,1230,387"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1345,816,1431,843"/>
<area shape="rect" id="node23" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="917,385,1033,412"/>
<area shape="rect" id="node28" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="906,1412,1043,1439"/>
<area shape="rect" id="node31" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="903,1272,1046,1299"/>
<area shape="rect" id="node34" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="911,1348,1038,1375"/>
<area shape="rect" id="node36" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="915,1171,1035,1197"/>
<area shape="rect" id="node37" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="913,1221,1037,1248"/>
<area shape="rect" id="node38" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="902,968,1047,995"/>
<area shape="rect" id="node40" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="899,1120,1051,1147"/>
<area shape="rect" id="node24" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1133,411,1224,437"/>
<area shape="rect" id="node25" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1140,461,1217,488"/>
<area shape="rect" id="node26" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1133,512,1224,539"/>
<area shape="rect" id="node27" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1135,563,1222,589"/>
<area shape="rect" id="node29" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="1129,1424,1228,1451"/>
<area shape="rect" id="node30" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1338,1221,1438,1248"/>
<area shape="rect" id="node32" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="1117,1323,1240,1349"/>
<area shape="rect" id="node33" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="1103,1272,1254,1299"/>
<area shape="rect" id="node35" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1125,1373,1232,1400"/>
<area shape="rect" id="node39" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="1129,867,1228,893"/>
<area shape="rect" id="node41" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="1130,1120,1227,1147"/>
<area shape="rect" id="node43" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="905,613,1044,640"/>
<area shape="rect" id="node44" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="1117,664,1240,691"/>
<area shape="rect" id="node45" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="1122,715,1235,741"/>
<area shape="rect" id="node46" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="1139,765,1219,792"/>
<area shape="rect" id="node47" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="1099,968,1259,995"/>
<area shape="rect" id="node48" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="1333,917,1443,944"/>
<area shape="rect" id="node49" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="1307,993,1469,1020"/>
<area shape="rect" id="node50" href="ubifs_2ioctl_8c.html#a06251cc4602342e44b5ed0a1b39f7e60" title="setflags" alt="" coords="1145,613,1213,640"/>
</map>
</div>

</div>
</div>
<a id="a170826fc5905c8e3ff4182dbb98b8e86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a170826fc5905c8e3ff4182dbb98b8e86">&#9670;&nbsp;</a></span>write_index()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int write_index </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structubifs__info.html">ubifs_info</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>write_index - write index nodes. <code></code>: UBIFS file-system description object</p>
<p>This function writes the index nodes whose positions were laid out in the layout_in_empty_space function. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_a170826fc5905c8e3ff4182dbb98b8e86_cgraph.png" border="0" usemap="#tnc__commit_8c_a170826fc5905c8e3ff4182dbb98b8e86_cgraph" alt=""/></div>
<map name="tnc__commit_8c_a170826fc5905c8e3ff4182dbb98b8e86_cgraph" id="tnc__commit_8c_a170826fc5905c8e3ff4182dbb98b8e86_cgraph">
<area shape="rect" id="node2" href="misc_8h.html#ac7a685691e935bc3ef4a7918e107c8de" title="ubifs_idx_node_sz" alt="" coords="147,342,277,369"/>
<area shape="rect" id="node3" href="lprops_8c.html#ae3f8fc7da604fc1fbfa182c024679d42" title="ubifs_update_one_lp" alt="" coords="141,393,283,419"/>
<area shape="rect" id="node9" href="ubifs_2misc_8c.html#af5ba8850d81aacf8102c272d5cf47550" title="ubifs_err" alt="" coords="1363,443,1435,470"/>
<area shape="rect" id="node29" href="misc_8h.html#a1598cadb907a20f9e5dc3e7ee74edb1d" title="ubifs_idx_branch" alt="" coords="152,545,272,571"/>
<area shape="rect" id="node30" href="key_8h.html#a6a23a0657894a1a52a8a3046007995b3" title="key_write_idx" alt="" coords="161,595,263,622"/>
<area shape="rect" id="node31" href="ubifs_2debug_8c.html#a56365d730ac6932bf3163a8ba7279779" title="ubifs_dump_znode" alt="" coords="147,646,277,673"/>
<area shape="rect" id="node38" href="ubifs_2io_8c.html#acfc2ca3ffa8d094855c2e59551f3a767" title="ubifs_prepare_node" alt="" coords="145,747,279,774"/>
<area shape="rect" id="node42" href="ubifs_2io_8c.html#aa52d954c97cdff3426851893fbbcf91f" title="ubifs_pad" alt="" coords="362,722,441,749"/>
<area shape="rect" id="node43" href="misc_8h.html#abe5c86108a05199a899138767ca1f42a" title="ubifs_zn_dirty" alt="" coords="161,798,263,825"/>
<area shape="rect" id="node44" href="misc_8h.html#a21390e9f6e0627bc617f177cee88fad7" title="ubifs_zn_cow" alt="" coords="161,849,263,875"/>
<area shape="rect" id="node45" href="ubifs_2io_8c.html#a02909cfc9d3a0100f549390c7d464632" title="ubifs_leb_write" alt="" coords="157,950,267,977"/>
<area shape="rect" id="node4" href="misc_8h.html#aa89c2768eb94f129c6afbe47420b44ba" title="ubifs_get_lprops" alt="" coords="343,291,460,318"/>
<area shape="rect" id="node5" href="lpt_8c.html#ade4e71b1fffa493cfb997feaff2c0638" title="ubifs_lpt_lookup_dirty" alt="" coords="520,190,668,217"/>
<area shape="rect" id="node22" href="lprops_8c.html#abfc4c6a75b37762f214cbc91f0ebe664" title="ubifs_change_lp" alt="" coords="343,342,459,369"/>
<area shape="rect" id="node28" href="misc_8h.html#a6dce2c34ec97d74cf4be59e0201bdb3e" title="ubifs_release_lprops" alt="" coords="331,443,472,470"/>
<area shape="rect" id="node6" href="lpt_8c.html#a6d9ea5f42b955fdb68064bc37bd9540d" title="ubifs_read_nnode" alt="" coords="933,38,1057,65"/>
<area shape="rect" id="node12" href="lpt_8c.html#accd7155d1f9997fb5e6a7fd577fdc0f2" title="dirty_cow_nnode" alt="" coords="735,139,855,166"/>
<area shape="rect" id="node14" href="lpt_8c.html#a7fd536e4a29b47a6485fc3931f91857b" title="ubifs_get_nnode" alt="" coords="737,38,854,65"/>
<area shape="rect" id="node15" href="lpt_8c.html#ad8f891756dae6c6dceeb51fb917b023b" title="ubifs_get_pnode" alt="" coords="737,190,854,217"/>
<area shape="rect" id="node19" href="lpt_8c.html#ac60e8c2b5dbc5ab11045f313bcc441a0" title="dirty_cow_pnode" alt="" coords="735,241,855,267"/>
<area shape="rect" id="node7" href="lpt_8c.html#a9f9e5388fe8c2966b4517e0b243b9ce6" title="calc_nnode_num_from\l_parent" alt="" coords="1323,5,1476,47"/>
<area shape="rect" id="node8" href="ubifs_2io_8c.html#ab6a2a3c4a79d6d4c52350540437d3cb3" title="ubifs_leb_read" alt="" coords="1142,190,1249,217"/>
<area shape="rect" id="node10" href="lpt_8c.html#a0d29b2eba67308c09e6c7e05ad2b63b1" title="ubifs_unpack_nnode" alt="" coords="1125,89,1266,115"/>
<area shape="rect" id="node11" href="lpt_8c.html#ad905cc71245ecfb3152a844c581d3e12" title="validate_nnode" alt="" coords="1141,38,1250,65"/>
<area shape="rect" id="node13" href="lpt_8c.html#af853639d65479e588832f7abbc932bea" title="ubifs_add_nnode_dirt" alt="" coords="923,89,1068,115"/>
<area shape="rect" id="node16" href="lpt_8c.html#a1e838b76fdfdb8c75cbd35ed51bad53c" title="read_pnode" alt="" coords="951,190,1040,217"/>
<area shape="rect" id="node18" href="lpt_8c.html#a50862af12cdded0c2e3be8cea516be8e" title="update_cats" alt="" coords="949,139,1042,166"/>
<area shape="rect" id="node17" href="lprops_8c.html#a7a2c9edc0537908ba98fe9a7ab5659d8" title="ubifs_categorize_lprops" alt="" coords="1116,329,1275,355"/>
<area shape="rect" id="node20" href="lpt_8c.html#a0e19e0a4226ca2a2502accf8a120c9fd" title="add_pnode_dirt" alt="" coords="940,241,1051,267"/>
<area shape="rect" id="node21" href="lpt_8c.html#a1c3d339c703cc7819cf15ac8fbd2c911" title="replace_cats" alt="" coords="947,291,1043,318"/>
<area shape="rect" id="node23" href="lprops_8c.html#a911df1bb1dc58cf096c97ce547539153" title="is_lprops_dirty" alt="" coords="541,393,647,419"/>
<area shape="rect" id="node24" href="lprops_8c.html#a54fa4acd96a49b1bbe2baeac4dbd0c0b" title="ubifs_calc_dark" alt="" coords="537,342,651,369"/>
<area shape="rect" id="node25" href="lprops_8c.html#a2f083caeaebac06c1f51d7c7d34f5c13" title="change_category" alt="" coords="533,291,655,318"/>
<area shape="rect" id="node26" href="lprops_8c.html#a1b58cb9915dbbdf9ac60e7a1369d05ab" title="adjust_lpt_heap" alt="" coords="739,393,852,419"/>
<area shape="rect" id="node27" href="lprops_8c.html#a88d9d4b260ebb86abbc16675b951f2c1" title="ubifs_remove_from_cat" alt="" coords="716,342,875,369"/>
<area shape="rect" id="node32" href="ubifs_2debug_8c.html#a33e36c49b5c19585e6cdb24955d1e937" title="dbg_snprintf_key" alt="" coords="341,646,462,673"/>
<area shape="rect" id="node33" href="key_8h.html#a06f47822510ef850cb7065778115453c" title="key_type" alt="" coords="557,545,631,571"/>
<area shape="rect" id="node34" href="key_8h.html#a4a12b97ed78e138baf7886a6df7ed50f" title="key_inum" alt="" coords="555,595,633,622"/>
<area shape="rect" id="node35" href="ubifs_2debug_8c.html#ad6af0af711fdb082f6df4eaeb4d82fe6" title="get_key_type" alt="" coords="544,646,644,673"/>
<area shape="rect" id="node36" href="key_8h.html#acddf1ca88d72a37e06c5c608cd084656" title="key_hash" alt="" coords="555,697,633,723"/>
<area shape="rect" id="node37" href="key_8h.html#a10c13375b52dbb12be6f9b685d1d1ba7" title="key_block" alt="" coords="553,747,635,774"/>
<area shape="rect" id="node39" href="ubifs_2io_8c.html#a0b3f089c430db97bbc68e362dc7867c8" title="next_sqnum" alt="" coords="355,823,448,850"/>
<area shape="rect" id="node40" href="ubifs_2io_8c.html#a0674f14e3d6ab28a6de41c44eeb85797" title="ubifs_ro_mode" alt="" coords="541,950,647,977"/>
<area shape="rect" id="node41" href="ubifs_2misc_8c.html#ac942d216b2a4c5475393c0506b23c862" title="ubifs_warn" alt="" coords="753,1001,838,1027"/>
<area shape="rect" id="node46" href="ubifs_2debug_8h.html#ac281738ca65301217af22a7a7b37c25b" title="dbg_is_tst_rcvry" alt="" coords="736,1178,855,1205"/>
<area shape="rect" id="node47" href="ubifs_2debug_8c.html#af929a6951e19c79f1235738386005c06" title="dbg_leb_write" alt="" coords="350,1051,453,1078"/>
<area shape="rect" id="node48" href="ubifs_2debug_8h.html#ab599356d6c84ddd2c7b9001b452c30bd" title="dbg_is_power_cut" alt="" coords="531,1051,657,1078"/>
<area shape="rect" id="node49" href="ubifs_2debug_8c.html#a67b6fc23cfbf882431d33323a03ef74c" title="power_cut_emulated" alt="" coords="523,1153,665,1179"/>
<area shape="rect" id="node50" href="ubifs_2debug_8c.html#a90853c3e5be760b8c7d76c2d39fdb28c" title="corrupt_data" alt="" coords="547,1102,641,1129"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tnc__commit_8c_a170826fc5905c8e3ff4182dbb98b8e86_icgraph.png" border="0" usemap="#tnc__commit_8c_a170826fc5905c8e3ff4182dbb98b8e86_icgraph" alt=""/></div>
<map name="tnc__commit_8c_a170826fc5905c8e3ff4182dbb98b8e86_icgraph" id="tnc__commit_8c_a170826fc5905c8e3ff4182dbb98b8e86_icgraph">
<area shape="rect" id="node2" href="ubifs_8h.html#a3e11b3b283926c57ea7d7e7aaf6cabe1" title="ubifs_tnc_end_commit" alt="" coords="141,247,295,273"/>
<area shape="rect" id="node3" href="ubifs_2commit_8c.html#aff22e767be69aea3cc8ede3847389766" title="do_commit" alt="" coords="343,247,429,273"/>
<area shape="rect" id="node4" href="ubifs_2commit_8c.html#a91c88ecee0c3d4a55bbe6669a0caa521" title="run_bg_commit" alt="" coords="485,184,595,211"/>
<area shape="rect" id="node10" href="ubifs_8h.html#ae4c760f55879f81abc758f058e481834" title="ubifs_run_commit" alt="" coords="477,272,603,299"/>
<area shape="rect" id="node5" href="ubifs_8h.html#ad1d2abb94e9ca171f253ba64fdbf7aa6" title="ubifs_bg_thread" alt="" coords="845,145,960,172"/>
<area shape="rect" id="node6" href="ubifs_2super_8c.html#a46b3e42ff47f5cf6ff917d607a273c2e" title="mount_ubifs" alt="" coords="1059,120,1152,147"/>
<area shape="rect" id="node8" href="ubifs_2super_8c.html#a294d4bb3f82a15e7bed2e2ae0c7f472d" title="ubifs_remount_rw" alt="" coords="1043,171,1168,197"/>
<area shape="rect" id="node7" href="ubifs_2super_8c.html#a73c1841d0d4128ecdc7942ca25001f98" title="ubifs_fill_super" alt="" coords="1255,5,1364,32"/>
<area shape="rect" id="node9" href="ubifs_2super_8c.html#a819db79224fd15f0eb125fe0a3c6123e" title="ubifs_remount_fs" alt="" coords="1248,56,1371,83"/>
<area shape="rect" id="node11" href="ubifs_2super_8c.html#a5f9c4c32c42dc338c1b84b87b7098105" title="ubifs_sync_fs" alt="" coords="662,196,765,223"/>
<area shape="rect" id="node12" href="ubifs_2recovery_8c.html#acb6fbec748694453a2e4b3ed2be6cc6b" title="grab_empty_leb" alt="" coords="656,297,771,324"/>
<area shape="rect" id="node13" href="ubifs_8h.html#ae25afe7a337008e52b357558646ed71f" title="ubifs_rcvry_gc_commit" alt="" coords="824,233,981,260"/>
<area shape="rect" id="node22" href="ubifs_2journal_8c.html#a2e3ce1f566393c4f8de0ea9c7eeedb42" title="make_reservation" alt="" coords="840,1171,965,1197"/>
<area shape="rect" id="node42" href="budget_8c.html#a81a06ebf4e0ee67caf867120d2110e8b" title="make_free_space" alt="" coords="651,399,776,425"/>
<area shape="rect" id="node14" href="ubifs_8h.html#a3e52fa16110396ffb0817447ae15125c" title="ubifs_init_security" alt="" coords="1042,233,1169,260"/>
<area shape="rect" id="node15" href="ubifs_2xattr_8c.html#ab1059c832c48181a6da6627bc5e9a1a7" title="ubifs_xattr_remove" alt="" coords="1452,436,1585,463"/>
<area shape="rect" id="node16" href="ubifs_2dir_8c.html#ace57346daa44170d0da86e02e5d502a9" title="ubifs_create" alt="" coords="1263,208,1356,235"/>
<area shape="rect" id="node17" href="ubifs_2dir_8c.html#a3a794929afbec4909d9270d60d77ac3f" title="do_tmpfile" alt="" coords="1268,157,1351,184"/>
<area shape="rect" id="node19" href="ubifs_2dir_8c.html#a8cbda000d384f82d771e78b8d630b913" title="ubifs_mkdir" alt="" coords="1265,259,1354,285"/>
<area shape="rect" id="node20" href="ubifs_2dir_8c.html#ae9d96a3c6a70aaf0f3878c82cfd8cb79" title="ubifs_mknod" alt="" coords="1261,309,1357,336"/>
<area shape="rect" id="node21" href="ubifs_2dir_8c.html#a150ff746c8a3a3468200de17cd5f0c11" title="ubifs_symlink" alt="" coords="1258,360,1361,387"/>
<area shape="rect" id="node18" href="ubifs_2dir_8c.html#ab7cff33bbe95d2729ca524f0c565907b" title="do_rename" alt="" coords="1475,816,1562,843"/>
<area shape="rect" id="node23" href="ubifs_8h.html#ad342a112d6f683c94399a45a14ec3aef" title="ubifs_jnl_update" alt="" coords="1047,385,1163,412"/>
<area shape="rect" id="node28" href="ubifs_8h.html#a9ed51b8a566d5776a783b6f955c32cf5" title="ubifs_jnl_write_data" alt="" coords="1037,1412,1174,1439"/>
<area shape="rect" id="node31" href="ubifs_8h.html#a8c1bde924b99b7852408656e18230d99" title="ubifs_jnl_write_inode" alt="" coords="1034,1272,1177,1299"/>
<area shape="rect" id="node34" href="ubifs_8h.html#a295cfad6549230751ca3d670fd12fc12" title="ubifs_jnl_xrename" alt="" coords="1042,1348,1169,1375"/>
<area shape="rect" id="node36" href="ubifs_8h.html#ab6387ea48fd6825a567f58c2786bee56" title="ubifs_jnl_rename" alt="" coords="1045,1171,1165,1197"/>
<area shape="rect" id="node37" href="ubifs_8h.html#a2a2057b667417cf20bfd05deb79a8a0e" title="ubifs_jnl_truncate" alt="" coords="1043,1221,1167,1248"/>
<area shape="rect" id="node38" href="ubifs_8h.html#a75ae3c25abba8f076e8d4e000ffcf45d" title="ubifs_jnl_delete_xattr" alt="" coords="1033,968,1178,995"/>
<area shape="rect" id="node40" href="ubifs_8h.html#a6f3994496f803665f9b68e76fa48127b" title="ubifs_jnl_change_xattr" alt="" coords="1029,1120,1181,1147"/>
<area shape="rect" id="node24" href="ubifs_2xattr_8c.html#a227139173e6acd4afdc79e7dab0f6637" title="create_xattr" alt="" coords="1264,411,1355,437"/>
<area shape="rect" id="node25" href="ubifs_2dir_8c.html#a1cda05627be9233d31b7eaec35155e26" title="ubifs_link" alt="" coords="1271,461,1348,488"/>
<area shape="rect" id="node26" href="ubifs_2dir_8c.html#a62ee7ccc82e083cbee42ccf01d20a652" title="ubifs_unlink" alt="" coords="1264,512,1355,539"/>
<area shape="rect" id="node27" href="ubifs_2dir_8c.html#af7ee7825efe7887ff626f7018547333f" title="ubifs_rmdir" alt="" coords="1266,563,1353,589"/>
<area shape="rect" id="node29" href="ubifs_2file_8c.html#a7963591329617b7ba84af562f9193522" title="do_writepage" alt="" coords="1260,1424,1359,1451"/>
<area shape="rect" id="node30" href="ubifs_2file_8c.html#a6a28fab460199df7505989ced9674cdc" title="do_truncation" alt="" coords="1469,1221,1569,1248"/>
<area shape="rect" id="node32" href="ubifs_2super_8c.html#a43fe8315ecd278321ca9b40ad881d97c" title="ubifs_write_inode" alt="" coords="1248,1323,1371,1349"/>
<area shape="rect" id="node33" href="ubifs_8h.html#aae33ce80e24113a8224187cb917d0c09" title="ubifs_jnl_delete_inode" alt="" coords="1234,1272,1385,1299"/>
<area shape="rect" id="node35" href="ubifs_2dir_8c.html#ae23dceb04d7c1e26e2a774de2a6fb458" title="ubifs_xrename" alt="" coords="1256,1373,1363,1400"/>
<area shape="rect" id="node39" href="ubifs_2xattr_8c.html#add93f337e6b626799603a792fabb984f" title="remove_xattr" alt="" coords="1260,867,1359,893"/>
<area shape="rect" id="node41" href="ubifs_2xattr_8c.html#a7e944b9a2b2e41df1dfbf521e3f5d9d8" title="change_xattr" alt="" coords="1261,1120,1358,1147"/>
<area shape="rect" id="node43" href="ubifs_8h.html#a97c8a1e101f1eb52eafc1200ef0544ae" title="ubifs_budget_space" alt="" coords="1036,613,1175,640"/>
<area shape="rect" id="node44" href="ubifs_2file_8c.html#a2e1595770dcbefe7a93c601d25af2ae8" title="write_begin_slow" alt="" coords="1248,664,1371,691"/>
<area shape="rect" id="node45" href="ubifs_2file_8c.html#a0aefd3357cc5cb83048756801f2f7609" title="allocate_budget" alt="" coords="1253,715,1366,741"/>
<area shape="rect" id="node46" href="ubifs_2file_8c.html#acc1bfb990e0c6e6e9ebadc9c07fac286" title="do_setattr" alt="" coords="1269,765,1349,792"/>
<area shape="rect" id="node47" href="ubifs_2file_8c.html#a3f235cd298cf21e542757661a7460017" title="mctime_update_needed" alt="" coords="1229,968,1389,995"/>
<area shape="rect" id="node48" href="ubifs_2file_8c.html#a9d550e1cb4489a2615d0d50f9631f309" title="update_mctime" alt="" coords="1463,917,1574,944"/>
<area shape="rect" id="node49" href="ubifs_2file_8c.html#a8cde7ab43a1673c674c5f86c06613262" title="ubifs_vm_page_mkwrite" alt="" coords="1437,993,1600,1020"/>
<area shape="rect" id="node50" href="ubifs_2ioctl_8c.html#a06251cc4602342e44b5ed0a1b39f7e60" title="setflags" alt="" coords="1275,613,1343,640"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_fbbc61eb3235ac15a35746d00bf5db85.html">ubifs</a></li><li class="navelem"><a class="el" href="tnc__commit_8c.html">tnc_commit.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>linux/fs: nilfs2/file.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">linux/fs
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('nilfs2_2file_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">file.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;linux/fs.h&gt;</code><br />
<code>#include &lt;linux/mm.h&gt;</code><br />
<code>#include &lt;linux/writeback.h&gt;</code><br />
<code>#include &quot;<a class="el" href="nilfs_8h_source.html">nilfs.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="nilfs2_2segment_8h_source.html">segment.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for file.c:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2file_8c__incl.png" border="0" usemap="#nilfs2_2file_8c" alt=""/></div>
<map name="nilfs2_2file_8c" id="nilfs2_2file_8c">
<area shape="rect" id="node5" href="nilfs_8h.html" title="nilfs.h" alt="" coords="547,155,604,181"/>
<area shape="rect" id="node21" href="nilfs2_2segment_8h.html" title="segment.h" alt="" coords="299,80,382,107"/>
<area shape="rect" id="node12" href="the__nilfs_8h.html" title="the_nilfs.h" alt="" coords="889,304,971,331"/>
<area shape="rect" id="node18" href="nilfs2_2bmap_8h.html" title="bmap.h" alt="" coords="308,229,373,256"/>
<area shape="rect" id="node19" href="nilfs2_2alloc_8h.html" title="alloc.h" alt="" coords="423,304,483,331"/>
<area shape="rect" id="node20" href="dat_8h.html" title="dat.h" alt="" coords="297,304,347,331"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:accdd4dcff30d9d98a7280abe01fd7f94"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2file_8c.html#accdd4dcff30d9d98a7280abe01fd7f94">nilfs_sync_file</a> (struct file *file, loff_t <a class="el" href="cifspdu_8h.html#a94f8d852c02921f3079f6987b4a5d7d0">start</a>, loff_t end, int datasync)</td></tr>
<tr class="separator:accdd4dcff30d9d98a7280abe01fd7f94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcd58fb7c6b35bfcc8fbc7bb056ada6a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2file_8c.html#afcd58fb7c6b35bfcc8fbc7bb056ada6a">nilfs_page_mkwrite</a> (struct vm_fault *vmf)</td></tr>
<tr class="separator:afcd58fb7c6b35bfcc8fbc7bb056ada6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70497cab177df7067631b1c83c263523"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2file_8c.html#a70497cab177df7067631b1c83c263523">nilfs_file_mmap</a> (struct file *file, struct vm_area_struct *vma)</td></tr>
<tr class="separator:a70497cab177df7067631b1c83c263523"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a437602b1f7f00bbf63c52153559cd416"><td class="memItemLeft" align="right" valign="top">static const struct vm_operations_struct&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2file_8c.html#a437602b1f7f00bbf63c52153559cd416">nilfs_file_vm_ops</a></td></tr>
<tr class="separator:a437602b1f7f00bbf63c52153559cd416"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41c39627c714a7af144a1b03530f6716"><td class="memItemLeft" align="right" valign="top">const struct file_operations&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2file_8c.html#a41c39627c714a7af144a1b03530f6716">nilfs_file_operations</a></td></tr>
<tr class="separator:a41c39627c714a7af144a1b03530f6716"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c7c977f821df565d508efb5d74280b1"><td class="memItemLeft" align="right" valign="top">const struct inode_operations&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nilfs2_2file_8c.html#a5c7c977f821df565d508efb5d74280b1">nilfs_file_inode_operations</a></td></tr>
<tr class="separator:a5c7c977f821df565d508efb5d74280b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a70497cab177df7067631b1c83c263523"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70497cab177df7067631b1c83c263523">&#9670;&nbsp;</a></span>nilfs_file_mmap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_file_mmap </td>
          <td>(</td>
          <td class="paramtype">struct file *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct vm_area_struct *&#160;</td>
          <td class="paramname"><em>vma</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="afcd58fb7c6b35bfcc8fbc7bb056ada6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcd58fb7c6b35bfcc8fbc7bb056ada6a">&#9670;&nbsp;</a></span>nilfs_page_mkwrite()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nilfs_page_mkwrite </td>
          <td>(</td>
          <td class="paramtype">struct vm_fault *&#160;</td>
          <td class="paramname"><em>vmf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2file_8c_afcd58fb7c6b35bfcc8fbc7bb056ada6a_cgraph.png" border="0" usemap="#nilfs2_2file_8c_afcd58fb7c6b35bfcc8fbc7bb056ada6a_cgraph" alt=""/></div>
<map name="nilfs2_2file_8c_afcd58fb7c6b35bfcc8fbc7bb056ada6a_cgraph" id="nilfs2_2file_8c_afcd58fb7c6b35bfcc8fbc7bb056ada6a_cgraph">
<area shape="rect" id="node2" href="the__nilfs_8c.html#a137faca9117bfef2a2264ccf3a9aa809" title="nilfs_near_disk_full" alt="" coords="637,575,771,601"/>
<area shape="rect" id="node6" href="nilfs_8h.html#aacff7fe9750a849356475b2063b69e3b" title="nilfs_transaction_begin" alt="" coords="393,625,548,652"/>
<area shape="rect" id="node8" href="inode_8c.html#ad7b0eea4a307ae587d3887cb1d67b381" title="file_update_time" alt="" coords="200,296,317,323"/>
<area shape="rect" id="node25" href="buffer_8c.html#a65d9e1253a15b8cec3268789f21d6a0e" title="block_page_mkwrite" alt="" coords="188,499,329,525"/>
<area shape="rect" id="node31" href="nilfs2_2inode_8c.html#a335edb4af34b36291d7c68d3e4002f55" title="nilfs_get_block" alt="" coords="204,1033,313,1060"/>
<area shape="rect" id="node37" href="nilfs_8h.html#a155140033fba0977ed043367001c3384" title="nilfs_transaction_abort" alt="" coords="394,1185,547,1212"/>
<area shape="rect" id="node43" href="nilfs_8h.html#a576ee8d20fe7a5d7c5889cb118fe0533" title="nilfs_transaction_commit" alt="" coords="387,1236,554,1263"/>
<area shape="rect" id="node48" href="nilfs2_2inode_8c.html#ac5555ab9881841d4884f09d25c9e398d" title="nilfs_set_file_dirty" alt="" coords="407,676,534,703"/>
<area shape="rect" id="node3" href="sufile_8c.html#a50c0d7ff8c8bf821d281286007c39cd5" title="nilfs_sufile_get_ncleansegs" alt="" coords="844,600,1027,627"/>
<area shape="rect" id="node4" href="sufile_8c.html#acbb532a1df92111d05a67092edbfd65b" title="NILFS_SUI" alt="" coords="1095,712,1185,739"/>
<area shape="rect" id="node5" href="mdt_8h.html#a643a628d0928b0f90712ea026df6cb59" title="NILFS_MDT" alt="" coords="1291,935,1387,961"/>
<area shape="rect" id="node7" href="nilfs2_2segment_8c.html#ada0ba1bf162679380f6096c9f83b94ea" title="nilfs_prepare_segment_lock" alt="" coords="612,625,796,652"/>
<area shape="rect" id="node9" href="inode_8c.html#ab2eaca3b9ec87b9dd6568776059cb715" title="current_time" alt="" coords="423,321,518,348"/>
<area shape="rect" id="node10" href="debugfs_2inode_8c.html#a16e485b5debd4cd96a200844c38df190" title="EXPORT_SYMBOL" alt="" coords="866,335,1005,361"/>
<area shape="rect" id="node11" href="internal_8h.html#a90039e8333efdad6a1af3512897651e7" title="__mnt_want_write_file" alt="" coords="395,144,547,171"/>
<area shape="rect" id="node20" href="inode_8c.html#a7ae3fe454cb624841ffcaf6bbe2177ad" title="update_time" alt="" coords="424,271,517,297"/>
<area shape="rect" id="node23" href="internal_8h.html#a28064ac863ca84020eb386f490879ec5" title="__mnt_drop_write_file" alt="" coords="396,220,545,247"/>
<area shape="rect" id="node12" href="namespace_8c.html#ae8d4c494f66a0cda8744bf47ebeba01f" title="__mnt_want_write" alt="" coords="640,144,768,171"/>
<area shape="rect" id="node19" href="namespace_8c.html#aba77afe1262e538d2854159761e6bcb2" title="mnt_clone_write" alt="" coords="645,81,763,108"/>
<area shape="rect" id="node13" href="mount_8h.html#a799ce35ff6ad0c45266cbe2b631ac610" title="real_mount" alt="" coords="892,183,979,209"/>
<area shape="rect" id="node14" href="namespace_8c.html#a24aaa0bb913baa617bc4d19fad011a99" title="mnt_inc_writers" alt="" coords="878,81,993,108"/>
<area shape="rect" id="node15" href="namespace_8c.html#a1e8eac40e0b14fb052603f900a411760" title="mnt_is_readonly" alt="" coords="877,132,994,159"/>
<area shape="rect" id="node18" href="namespace_8c.html#a6b6223aa5bccbed87645de18e8b0abac" title="mnt_dec_writers" alt="" coords="876,233,995,260"/>
<area shape="rect" id="node16" href="namespace_8c.html#ae435f6295042ca4769078d0b11c47713" title="__mnt_is_readonly" alt="" coords="1075,31,1205,57"/>
<area shape="rect" id="node17" href="namespace_8c.html#a14b50b29ea751e02e86a7c9a2fa01128" title="EXPORT_SYMBOL_GPL" alt="" coords="1253,5,1425,32"/>
<area shape="rect" id="node21" href="inode_8c.html#a4bb55223dd4c2bda8ce013f4d95ddea6" title="generic_update_time" alt="" coords="633,271,775,297"/>
<area shape="rect" id="node22" href="fs-writeback_8c.html#aadbb11843f415987b2be1fcd5850152e" title="__mark_inode_dirty" alt="" coords="868,284,1003,311"/>
<area shape="rect" id="node24" href="namespace_8c.html#ad990c81af66b82e8c66b009dd531b77b" title="__mnt_drop_write" alt="" coords="641,220,767,247"/>
<area shape="rect" id="node26" href="buffer_8c.html#a68ae9324a11c2ad8febf0b0868c8926a" title="__block_write_begin" alt="" coords="401,524,541,551"/>
<area shape="rect" id="node28" href="buffer_8c.html#a22f0973a948d1cc4ce512a1bb47331fa" title="EXPORT_SYMBOL" alt="" coords="635,473,773,500"/>
<area shape="rect" id="node29" href="buffer_8c.html#a5895e21687aeca3d39caa30e94533c9e" title="block_commit_write" alt="" coords="401,423,540,449"/>
<area shape="rect" id="node27" href="buffer_8c.html#a0d8deb1a832a7ff7803dd5bb8eeeb848" title="__block_write_begin_int" alt="" coords="623,524,785,551"/>
<area shape="rect" id="node30" href="buffer_8c.html#a2e34c3c659da4274a05fa553f0a9b9e7" title="__block_commit_write" alt="" coords="628,423,780,449"/>
<area shape="rect" id="node32" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="900,777,971,804"/>
<area shape="rect" id="node33" href="nilfs2_2bmap_8c.html#a562a4fcb04f5c54344afe05639c86914" title="nilfs_bmap_lookup_contig" alt="" coords="385,1084,557,1111"/>
<area shape="rect" id="node35" href="nilfs2_2bmap_8c.html#a4e7fd87b553f99a5d10b2f1d0cbbec0b" title="nilfs_bmap_insert" alt="" coords="409,1135,533,1161"/>
<area shape="rect" id="node38" href="nilfs_8h.html#a106a77a98b196bbb9307865c001a5025" title="nilfs_mark_inode_dirty_sync" alt="" coords="377,929,564,956"/>
<area shape="rect" id="node34" href="nilfs2_2bmap_8c.html#a7a7ea41075313d317e5036ebc1fbbe3b" title="nilfs_bmap_convert\l_error" alt="" coords="637,1098,771,1139"/>
<area shape="rect" id="node36" href="nilfs2_2bmap_8c.html#ac5f71baa604f8d2043ceb4c11aa72ff3" title="nilfs_bmap_do_insert" alt="" coords="631,1164,777,1191"/>
<area shape="rect" id="node39" href="nilfs_8h.html#a46e169872ed27278f3e5c506282e6ffe" title="__nilfs_mark_inode\l_dirty" alt="" coords="637,981,771,1022"/>
<area shape="rect" id="node40" href="nilfs_8h.html#a0b563a3dda73d94cec30f6fbfc200609" title="nilfs_alloc_inode" alt="" coords="645,828,763,855"/>
<area shape="rect" id="node41" href="nilfs_8h.html#a27f655836f48b79bbf1a0d938a6f394c" title="nilfs_destroy_inode" alt="" coords="637,879,771,905"/>
<area shape="rect" id="node42" href="nilfs_8h.html#a97604abb336d5d3a3d3cf5e84ca2f28b" title="__printf" alt="" coords="671,929,737,956"/>
<area shape="rect" id="node44" href="nilfs2_2segment_8c.html#aa55509ef3ea01cc74488f916f1d551f3" title="nilfs_segctor_start\l_timer" alt="" coords="639,1215,769,1257"/>
<area shape="rect" id="node45" href="nilfs2_2segment_8c.html#a23c179e5f28f728a442e31641f71c795" title="nilfs_segctor_do_flush" alt="" coords="628,1281,780,1308"/>
<area shape="rect" id="node46" href="nilfs2_2segment_8c.html#ad8bab60b16b37c93e180e1ea3e1580ad" title="nilfs_construct_segment" alt="" coords="622,1332,786,1359"/>
<area shape="rect" id="node47" href="nilfs2_2segment_8c.html#aece5ba8b7c1a8df29083370bfb0f3aad" title="nilfs_segctor_sync" alt="" coords="870,1332,1001,1359"/>
<area shape="rect" id="node49" href="inode_8c.html#ad2a7d900c04745e54c8d2f3847922a59" title="igrab" alt="" coords="679,676,729,703"/>
<area shape="rect" id="node50" href="inode_8c.html#ab5747108c3d9a3f113b72a10a9be6a2f" title="__iget" alt="" coords="907,676,964,703"/>
</map>
</div>

</div>
</div>
<a id="accdd4dcff30d9d98a7280abe01fd7f94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#accdd4dcff30d9d98a7280abe01fd7f94">&#9670;&nbsp;</a></span>nilfs_sync_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nilfs_sync_file </td>
          <td>(</td>
          <td class="paramtype">struct file *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t&#160;</td>
          <td class="paramname"><em>end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>datasync</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2file_8c_accdd4dcff30d9d98a7280abe01fd7f94_cgraph.png" border="0" usemap="#nilfs2_2file_8c_accdd4dcff30d9d98a7280abe01fd7f94_cgraph" alt=""/></div>
<map name="nilfs2_2file_8c_accdd4dcff30d9d98a7280abe01fd7f94_cgraph" id="nilfs2_2file_8c_accdd4dcff30d9d98a7280abe01fd7f94_cgraph">
<area shape="rect" id="node2" href="nilfs2_2inode_8c.html#abcdeec164bb9c35f661bc85b70fbf205" title="nilfs_inode_dirty" alt="" coords="615,5,731,32"/>
<area shape="rect" id="node4" href="nilfs2_2segment_8c.html#a3d237ddff4eceb734233dc317e0075d5" title="nilfs_construct_dsync\l_segment" alt="" coords="166,333,315,374"/>
<area shape="rect" id="node49" href="nilfs2_2segment_8c.html#ad8bab60b16b37c93e180e1ea3e1580ad" title="nilfs_construct_segment" alt="" coords="159,399,323,425"/>
<area shape="rect" id="node50" href="the__nilfs_8h.html#a8f2cf136125bb291f917d2741a2ecdec" title="nilfs_flush_device" alt="" coords="177,449,304,476"/>
<area shape="rect" id="node3" href="nilfs_8h.html#a4f06a82c20559c61e8f30eac6bad1001" title="NILFS_I" alt="" coords="1829,69,1900,96"/>
<area shape="rect" id="node5" href="nilfs2_2segment_8c.html#a8b69f4181745f44662620421e0f88ab0" title="nilfs_transaction_lock" alt="" coords="378,340,526,367"/>
<area shape="rect" id="node7" href="nilfs2_2segment_8c.html#a640e77718e5f25c27d6dcc9a10fa8997" title="nilfs_segctor_do_construct" alt="" coords="813,579,992,605"/>
<area shape="rect" id="node47" href="nilfs2_2segment_8c.html#a183704facbe2e823d313437cf1ef2672" title="nilfs_transaction_unlock" alt="" coords="371,289,533,316"/>
<area shape="rect" id="node48" href="nilfs2_2segment_8c.html#aece5ba8b7c1a8df29083370bfb0f3aad" title="nilfs_segctor_sync" alt="" coords="387,445,517,472"/>
<area shape="rect" id="node6" href="nilfs2_2segment_8c.html#a0928f7eed2b4d7f3a934480a1025bda7" title="nilfs_segctor_do_immediate\l_flush" alt="" coords="581,329,765,370"/>
<area shape="rect" id="node8" href="nilfs2_2segment_8c.html#a5178d3fd1af80a6dfe7402161af775b7" title="nilfs_sc_cstage_set" alt="" coords="1443,816,1582,843"/>
<area shape="rect" id="node9" href="nilfs2_2segment_8c.html#a15bdc407779c43878600587697d73136" title="nilfs_segctor_collect\l_dirty_files" alt="" coords="1442,314,1583,355"/>
<area shape="rect" id="node13" href="nilfs2_2segment_8c.html#a3942085ca8ef837029410515b850bab2" title="nilfs_test_metadata\l_dirty" alt="" coords="1243,150,1379,191"/>
<area shape="rect" id="node15" href="nilfs_8h.html#aa2547b587fff139262e053241c6d5165" title="nilfs_doing_gc" alt="" coords="1460,263,1565,289"/>
<area shape="rect" id="node16" href="nilfs2_2segment_8c.html#a5fea956c9b756d0f2be3c56a4569e720" title="nilfs_segctor_clean" alt="" coords="1244,309,1379,336"/>
<area shape="rect" id="node17" href="nilfs2_2segment_8c.html#abefe9b057b0e0d967e78abdfad63f7fc" title="nilfs_segctor_begin\l_construction" alt="" coords="1244,543,1379,585"/>
<area shape="rect" id="node26" href="nilfs2_2segment_8c.html#a623b056ff9bd308d6704a6d44b2a5ff8" title="nilfs_segctor_collect" alt="" coords="1043,680,1185,707"/>
<area shape="rect" id="node29" href="nilfs2_2segment_8c.html#a106167b91db47aa55788611baecc2929" title="nilfs_sc_cstage_get" alt="" coords="1443,1025,1582,1052"/>
<area shape="rect" id="node34" href="segbuf_8h.html#a0cfe8124c80930b9a35d9d83b53c3b9c" title="nilfs_segbuf_empty" alt="" coords="1047,781,1181,808"/>
<area shape="rect" id="node35" href="nilfs2_2segment_8c.html#a309af2cb7fa5f929676eb2aeb83abf1a" title="nilfs_segctor_abort\l_construction" alt="" coords="1245,959,1377,1001"/>
<area shape="rect" id="node36" href="nilfs2_2segment_8c.html#a0b6ab5ea47dd22b60896728d79280b78" title="nilfs_segctor_assign" alt="" coords="1043,832,1185,859"/>
<area shape="rect" id="node37" href="nilfs2_2segment_8c.html#a9646fd4f406244d5cd782f5d220f4aaa" title="nilfs_segctor_fill\l_in_file_bmap" alt="" coords="1056,883,1172,925"/>
<area shape="rect" id="node38" href="nilfs2_2segment_8c.html#a575e642d5347643b2e55e16d470c9e4f" title="nilfs_segctor_fill\l_in_checkpoint" alt="" coords="1056,949,1172,990"/>
<area shape="rect" id="node39" href="nilfs2_2segment_8c.html#a4bd2bfd7408d91f09c954196835b05eb" title="nilfs_segctor_fill\l_in_super_root" alt="" coords="1253,361,1369,402"/>
<area shape="rect" id="node40" href="nilfs2_2segment_8c.html#a5e55835a8c7bac0db60b81df4d707d4e" title="nilfs_segctor_update\l_segusage" alt="" coords="1043,1014,1185,1055"/>
<area shape="rect" id="node41" href="nilfs2_2segment_8c.html#a860212a92caeb10e765a54525c8935e7" title="nilfs_segctor_prepare\l_write" alt="" coords="1041,1079,1187,1121"/>
<area shape="rect" id="node42" href="segbuf_8c.html#a0badc0950a3433d60184499df2c63e99" title="nilfs_add_checksums\l_on_logs" alt="" coords="1040,1145,1188,1186"/>
<area shape="rect" id="node43" href="nilfs2_2segment_8c.html#a30f292d5fafad3776cf07573c3c7b46a" title="nilfs_segctor_write" alt="" coords="1049,107,1179,133"/>
<area shape="rect" id="node44" href="nilfs2_2segment_8c.html#a38f1609ad1b2d71d4f26fd1b650e9acf" title="nilfs_segctor_wait" alt="" coords="1051,208,1177,235"/>
<area shape="rect" id="node45" href="nilfs2_2segment_8c.html#a48a38cbf8f4c68e0d2cc6c384368bd48" title="nilfs_segctor_drop\l_written_files" alt="" coords="1050,361,1178,402"/>
<area shape="rect" id="node46" href="nilfs2_2segment_8c.html#a41b2f847cf14fdb22b140aea427b564c" title="nilfs_redirty_inodes" alt="" coords="1047,427,1181,453"/>
<area shape="rect" id="node10" href="ifile_8c.html#ac12b6cbcad77a1c74299227badad2ed9" title="nilfs_ifile_get_inode\l_block" alt="" coords="1642,314,1778,355"/>
<area shape="rect" id="node11" href="buffer_8c.html#af31e9f44f34481e9dd79a02e4f2fc4de" title="mark_buffer_dirty" alt="" coords="1649,496,1771,523"/>
<area shape="rect" id="node12" href="mdt_8h.html#a9d9db9c2ce4c61835ac0c297556a1ac9" title="nilfs_mdt_mark_dirty" alt="" coords="1639,412,1781,439"/>
<area shape="rect" id="node14" href="mdt_8c.html#a86b797da36e5aea598fe6f1f3f526aa4" title="nilfs_mdt_fetch_dirty" alt="" coords="1639,120,1781,147"/>
<area shape="rect" id="node18" href="segbuf_8c.html#a50fe9d805ced3904d4db3898a2bdaac8" title="nilfs_segbuf_new" alt="" coords="1451,597,1574,624"/>
<area shape="rect" id="node19" href="segbuf_8c.html#aa497e69147c7836b3bb0c1fff2bbd08f" title="nilfs_segbuf_map" alt="" coords="1451,699,1575,725"/>
<area shape="rect" id="node20" href="the__nilfs_8h.html#acf48222a83fa3d618b30972ec417a030" title="nilfs_shift_to_next\l_segment" alt="" coords="1449,379,1577,421"/>
<area shape="rect" id="node21" href="segbuf_8c.html#aa25d7cf18d0db3708ee6fbd162717ba2" title="nilfs_segbuf_map_cont" alt="" coords="1435,445,1591,472"/>
<area shape="rect" id="node22" href="sufile_8c.html#ae5c9db186be6baf07d66e049a0fd9b9b" title="nilfs_sufile_mark_dirty" alt="" coords="1437,547,1589,573"/>
<area shape="rect" id="node23" href="sufile_8c.html#a6af95c8f1e6b7fedd7f95421e2eeafe6" title="nilfs_sufile_alloc" alt="" coords="1453,496,1572,523"/>
<area shape="rect" id="node24" href="segbuf_8c.html#ace2135c9c49660e18331d4bcc5bf9675" title="nilfs_segbuf_set_next\l_segnum" alt="" coords="1438,750,1587,791"/>
<area shape="rect" id="node25" href="segbuf_8c.html#a63aa16390b9358fa427baa180df2584f" title="nilfs_segbuf_free" alt="" coords="1452,648,1573,675"/>
<area shape="rect" id="node27" href="nilfs2_2segment_8c.html#a39bd4ec246077eb3f8a8974c17457006" title="nilfs_segctor_reset\l_segment_buffer" alt="" coords="1245,426,1377,467"/>
<area shape="rect" id="node28" href="nilfs2_2segment_8c.html#ac5c1356e891d7a42317a2926baaad700" title="nilfs_segctor_collect\l_blocks" alt="" coords="1241,777,1382,818"/>
<area shape="rect" id="node30" href="sufile_8h.html#a9da8122c97b0bb9b56f5a85dbdad019b" title="nilfs_sufile_cancel\l_freev" alt="" coords="1448,901,1577,942"/>
<area shape="rect" id="node31" href="segbuf_8c.html#a797a3a84dc0d4d37ebdff3a9dd84cb96" title="nilfs_clear_logs" alt="" coords="1255,725,1367,752"/>
<area shape="rect" id="node32" href="nilfs2_2segment_8c.html#a908a0ffa2889c863319f35f979a28530" title="nilfs_segctor_extend\l_segments" alt="" coords="1240,609,1383,650"/>
<area shape="rect" id="node33" href="nilfs2_2segment_8c.html#a1718603d405fa5903c6230390dad55d3" title="nilfs_segctor_truncate\l_segments" alt="" coords="1236,842,1387,883"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="nilfs2_2file_8c_accdd4dcff30d9d98a7280abe01fd7f94_icgraph.png" border="0" usemap="#nilfs2_2file_8c_accdd4dcff30d9d98a7280abe01fd7f94_icgraph" alt=""/></div>
<map name="nilfs2_2file_8c_accdd4dcff30d9d98a7280abe01fd7f94_icgraph" id="nilfs2_2file_8c_accdd4dcff30d9d98a7280abe01fd7f94_icgraph">
<area shape="rect" id="node2" href="nilfs_8h.html#a27c90b00199990855f3026ca77b28be7" title="nilfs_mask_flags" alt="" coords="159,139,279,165"/>
<area shape="rect" id="node3" href="nilfs_8h.html#a6a913a459ba0d008002ccb63b2adcf52" title="nilfs_new_inode" alt="" coords="335,111,449,137"/>
<area shape="rect" id="node8" href="nilfs2_2ioctl_8c.html#a1ad02ae5704ccd6ef70f0c0eb418d4ac" title="nilfs_ioctl_setflags" alt="" coords="327,164,457,191"/>
<area shape="rect" id="node4" href="nilfs2_2namei_8c.html#a42fc7600e29348f24e2dbb367c25930e" title="nilfs_create" alt="" coords="510,5,599,32"/>
<area shape="rect" id="node5" href="nilfs2_2namei_8c.html#a5fee3b15e7f58081ec8fd9cd1c43e55a" title="nilfs_mknod" alt="" coords="509,56,601,83"/>
<area shape="rect" id="node6" href="nilfs2_2namei_8c.html#a83737a267d28fb54629a821efc9bd2a0" title="nilfs_symlink" alt="" coords="505,107,604,133"/>
<area shape="rect" id="node7" href="nilfs2_2namei_8c.html#a4286ecd2133e48ffac0b2b7218a2f17a" title="nilfs_mkdir" alt="" coords="512,157,597,184"/>
<area shape="rect" id="node9" href="nilfs_8h.html#a6088f2256e22e83b6ee9313e6e2a51a5" title="nilfs_ioctl" alt="" coords="516,232,593,259"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a5c7c977f821df565d508efb5d74280b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c7c977f821df565d508efb5d74280b1">&#9670;&nbsp;</a></span>nilfs_file_inode_operations</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const struct inode_operations nilfs_file_inode_operations</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">    .setattr    = <a class="code" href="nilfs2_2inode_8c.html#a9cdadbcfec20fde409d9d01519b15610">nilfs_setattr</a>,</div><div class="line">    .permission     = <a class="code" href="nilfs2_2inode_8c.html#a96d07c3f360f0e8048851ddacd3010e9">nilfs_permission</a>,</div><div class="line">    .fiemap     = <a class="code" href="nilfs2_2inode_8c.html#aa3b3b43de967957800b020d3c28d0fb4">nilfs_fiemap</a>,</div><div class="line">}</div><div class="ttc" id="nilfs2_2inode_8c_html_a9cdadbcfec20fde409d9d01519b15610"><div class="ttname"><a href="nilfs2_2inode_8c.html#a9cdadbcfec20fde409d9d01519b15610">nilfs_setattr</a></div><div class="ttdeci">int nilfs_setattr(struct dentry *dentry, struct iattr *iattr)</div><div class="ttdef"><b>Definition:</b> inode.c:825</div></div>
<div class="ttc" id="nilfs2_2inode_8c_html_a96d07c3f360f0e8048851ddacd3010e9"><div class="ttname"><a href="nilfs2_2inode_8c.html#a96d07c3f360f0e8048851ddacd3010e9">nilfs_permission</a></div><div class="ttdeci">int nilfs_permission(struct inode *inode, int mask)</div><div class="ttdef"><b>Definition:</b> inode.c:863</div></div>
<div class="ttc" id="nilfs2_2inode_8c_html_aa3b3b43de967957800b020d3c28d0fb4"><div class="ttname"><a href="nilfs2_2inode_8c.html#aa3b3b43de967957800b020d3c28d0fb4">nilfs_fiemap</a></div><div class="ttdeci">int nilfs_fiemap(struct inode *inode, struct fiemap_extent_info *fieinfo, __u64 start, __u64 len)</div><div class="ttdef"><b>Definition:</b> inode.c:1004</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a41c39627c714a7af144a1b03530f6716"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41c39627c714a7af144a1b03530f6716">&#9670;&nbsp;</a></span>nilfs_file_operations</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const struct file_operations nilfs_file_operations</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">    .llseek     = <a class="code" href="read__write_8c.html#a742084c7905066c90d7a474e8d58123d">generic_file_llseek</a>,</div><div class="line">    .read_iter  = generic_file_read_iter,</div><div class="line">    .write_iter = generic_file_write_iter,</div><div class="line">    .unlocked_ioctl = <a class="code" href="nilfs2_2ioctl_8c.html#a9413c5631e50168d0f3dfc06c0ae3355">nilfs_ioctl</a>,</div><div class="line"></div><div class="line"></div><div class="line">    </div><div class="line">    .mmap       = <a class="code" href="nilfs2_2file_8c.html#a70497cab177df7067631b1c83c263523">nilfs_file_mmap</a>,</div><div class="line">    .open       = <a class="code" href="open_8c.html#a79aee89d4955cccd3b4ba6a5c08293fa">generic_file_open</a>,</div><div class="line">    </div><div class="line">    .fsync      = <a class="code" href="nilfs2_2file_8c.html#accdd4dcff30d9d98a7280abe01fd7f94">nilfs_sync_file</a>,</div><div class="line">    .splice_read    = <a class="code" href="splice_8c.html#ae33600575f4ba244ccd2be1c1185acde">generic_file_splice_read</a>,</div><div class="line">}</div><div class="ttc" id="nilfs2_2ioctl_8c_html_a9413c5631e50168d0f3dfc06c0ae3355"><div class="ttname"><a href="nilfs2_2ioctl_8c.html#a9413c5631e50168d0f3dfc06c0ae3355">nilfs_ioctl</a></div><div class="ttdeci">long nilfs_ioctl(struct file *filp, unsigned int cmd, unsigned long arg)</div><div class="ttdef"><b>Definition:</b> ioctl.c:1294</div></div>
<div class="ttc" id="open_8c_html_a79aee89d4955cccd3b4ba6a5c08293fa"><div class="ttname"><a href="open_8c.html#a79aee89d4955cccd3b4ba6a5c08293fa">generic_file_open</a></div><div class="ttdeci">int generic_file_open(struct inode *inode, struct file *filp)</div><div class="ttdef"><b>Definition:</b> open.c:1254</div></div>
<div class="ttc" id="nilfs2_2file_8c_html_a70497cab177df7067631b1c83c263523"><div class="ttname"><a href="nilfs2_2file_8c.html#a70497cab177df7067631b1c83c263523">nilfs_file_mmap</a></div><div class="ttdeci">static int nilfs_file_mmap(struct file *file, struct vm_area_struct *vma)</div><div class="ttdef"><b>Definition:</b> file.c:129</div></div>
<div class="ttc" id="splice_8c_html_ae33600575f4ba244ccd2be1c1185acde"><div class="ttname"><a href="splice_8c.html#ae33600575f4ba244ccd2be1c1185acde">generic_file_splice_read</a></div><div class="ttdeci">ssize_t generic_file_splice_read(struct file *in, loff_t *ppos, struct pipe_inode_info *pipe, size_t len, unsigned int flags)</div><div class="ttdef"><b>Definition:</b> splice.c:295</div></div>
<div class="ttc" id="nilfs2_2file_8c_html_accdd4dcff30d9d98a7280abe01fd7f94"><div class="ttname"><a href="nilfs2_2file_8c.html#accdd4dcff30d9d98a7280abe01fd7f94">nilfs_sync_file</a></div><div class="ttdeci">int nilfs_sync_file(struct file *file, loff_t start, loff_t end, int datasync)</div><div class="ttdef"><b>Definition:</b> file.c:25</div></div>
<div class="ttc" id="read__write_8c_html_a742084c7905066c90d7a474e8d58123d"><div class="ttname"><a href="read__write_8c.html#a742084c7905066c90d7a474e8d58123d">generic_file_llseek</a></div><div class="ttdeci">loff_t generic_file_llseek(struct file *file, loff_t offset, int whence)</div><div class="ttdef"><b>Definition:</b> read_write.c:144</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a437602b1f7f00bbf63c52153559cd416"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a437602b1f7f00bbf63c52153559cd416">&#9670;&nbsp;</a></span>nilfs_file_vm_ops</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct vm_operations_struct nilfs_file_vm_ops</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">    .fault      = filemap_fault,</div><div class="line">    .map_pages  = filemap_map_pages,</div><div class="line">    .page_mkwrite   = <a class="code" href="nilfs2_2file_8c.html#afcd58fb7c6b35bfcc8fbc7bb056ada6a">nilfs_page_mkwrite</a>,</div><div class="line">}</div><div class="ttc" id="nilfs2_2file_8c_html_afcd58fb7c6b35bfcc8fbc7bb056ada6a"><div class="ttname"><a href="nilfs2_2file_8c.html#afcd58fb7c6b35bfcc8fbc7bb056ada6a">nilfs_page_mkwrite</a></div><div class="ttdeci">static int nilfs_page_mkwrite(struct vm_fault *vmf)</div><div class="ttdef"><b>Definition:</b> file.c:54</div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_8fac9e178a1e3eec5aa774d52dddfbee.html">nilfs2</a></li><li class="navelem"><a class="el" href="nilfs2_2file_8c.html">file.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
